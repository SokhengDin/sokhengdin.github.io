[{"data":1,"prerenderedAt":6193},["Reactive",2],{"topics/robotics":3},[4,3859,5787,5985],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":9,"description":10,"author":11,"slug":12,"tag":12,"img":13,"body":14,"_type":3854,"_id":3855,"_source":3856,"_file":3857,"_extension":3858},"/topics/robotics/nonlinear-mpc","robotics",false,"","Nonlinear Model Predictive Control","Introduction to Nonlinear Model Predictive Control","Din Sokheng","nonlinear-mpc","/topics/robotics/nmpc/predict_horizon.png",{"type":15,"children":16,"toc":3843},"root",[17,26,32,55,66,72,86,91,97,102,107,112,154,159,165,170,217,223,236,240,245,250,254,259,263,267,272,1516,1522,1527,1531,1546,1550,1555,1559,1565,1570,1574,1587,1591,1595,1599,1605,1618,1650,1655,2188,2193,2371,2382,2387,2392,3408,3413,3766,3772,3787,3793,3799,3804,3810,3838],{"type":18,"tag":19,"props":20,"children":22},"element","h2",{"id":21},"what-is-model-predictive-control",[23],{"type":24,"value":25},"text","What is Model Predictive Control ?",{"type":18,"tag":27,"props":28,"children":29},"p",{},[30],{"type":24,"value":31},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":18,"tag":33,"props":34,"children":41},"div",{"className":35},[36,37,38,39,40],"grid","grid-cols-2","space-x-10","justify-center","items-center",[42,50],{"type":18,"tag":43,"props":44,"children":49},"img",{"className":45,"src":13,"width":47,"height":48},[46],"mx-auto","600px","300px",[],{"type":18,"tag":43,"props":51,"children":54},{"className":52,"src":53,"width":47,"height":48},[46],"/topics/robotics/nmpc/set_points.png",[],{"type":18,"tag":56,"props":57,"children":63},"figcaption",{"className":58},[59,60,61,62],"text-center","text-sm","text-neutral-600","dark:text-neutral-400",[64],{"type":24,"value":65},"\n      A car with finite horizons prediction and set point prediction over finite horizons.\n",{"type":18,"tag":19,"props":67,"children":69},{"id":68},"nonlinear-model-predictive-control",[70],{"type":24,"value":71},"Nonlinear Model Predictive Control ?",{"type":18,"tag":27,"props":73,"children":74},{},[75,77,81,83],{"type":24,"value":76},"Nonlinear Model Predictive Control has the same basic core of its control algorithms. The different is about the mathematical solving over the system. ",{"type":18,"tag":78,"props":79,"children":80},"br",{},[],{"type":24,"value":82},"\nIn the real-life application, most of the system certainly nonlinear and it's more complex than linear model. Linear systems are mostly time-invariant, meaning that the response of the system input is time-independent. Nonlinear systems are time-varying meaning that the response of the system to any input is time-dependent.",{"type":18,"tag":78,"props":84,"children":85},{},[],{"type":18,"tag":27,"props":87,"children":88},{},[89],{"type":24,"value":90},"The system model can be represent as state-space model",{"type":18,"tag":92,"props":93,"children":96},"math-render",{"latex-express":94,"styles":59,"dist-cond":95}," \\dot{X} = f(X,U) ","true",[],{"type":18,"tag":27,"props":98,"children":99},{},[100],{"type":24,"value":101},"Nonlinear Model Predictive Control also works by solving the quardratic cost subject to the nonlinear function over a future finite horizons. The quadractic cost can be define as",{"type":18,"tag":92,"props":103,"children":106},{"latex-express":104,"styles":59,"dist-cond":105},"J(x,u) = \\displaystyle\\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})","false",[],{"type":18,"tag":27,"props":108,"children":109},{},[110],{"type":24,"value":111},"Notation",{"type":18,"tag":113,"props":114,"children":115},"ul",{},[116,127,136,145],{"type":18,"tag":117,"props":118,"children":119},"li",{},[120,125],{"type":18,"tag":92,"props":121,"children":124},{"latex-express":122,"styles":123,"dist-cond":105},"X","inline-flex",[],{"type":24,"value":126}," is the state of the system. This shall be obtained from the optimiztion problem.",{"type":18,"tag":117,"props":128,"children":129},{},[130,134],{"type":18,"tag":92,"props":131,"children":133},{"latex-express":132,"styles":123,"dist-cond":105},"X_{ref}",[],{"type":24,"value":135}," is the reference state of the system or desired input state.",{"type":18,"tag":117,"props":137,"children":138},{},[139,143],{"type":18,"tag":92,"props":140,"children":142},{"latex-express":141,"styles":123,"dist-cond":105},"U",[],{"type":24,"value":144}," is the input control of the system. This is a solution obtained from the optimization problem.",{"type":18,"tag":117,"props":146,"children":147},{},[148,152],{"type":18,"tag":92,"props":149,"children":151},{"latex-express":150,"styles":123,"dist-cond":105},"U_{ref}",[],{"type":24,"value":153}," is the reference control of the system or desired input control.",{"type":18,"tag":27,"props":155,"children":156},{},[157],{"type":24,"value":158},"Rewrite the optimization of NMPC problem.",{"type":18,"tag":160,"props":161,"children":164},"math-render-b",{"latex-express":162,"styles":163,"dist-cond":95},"\n      \\begin{align*}\n            \\min_{u_{0}, u_{1}, ..., u_{N-1} } \\quad \\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}&Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})\\\\\n            \\text{subject to} \\quad & x_{k+1} = f(x_k, u_k) \\quad \\text{(System dynamics)} \\\\\n            & g(x_k, x_k) \\leq 0 \\quad \\text{(State constraints)} \\\\\n            & h(x_k, x_k) \\leq 0 \\quad \\text{(Input constraints)} \\\\\n            & p(x_k) \\leq 0 \\quad \\text{(Path constraints)} \\\\\n            & x_0=x(0)  \\quad \\text{(Initial condition)}\n      \\end{align*}\n            ","text-center -sm:mx-auto -md:mx-auto -sm:max-w-sm -md:max-w-md",[],{"type":18,"tag":27,"props":166,"children":167},{},[168],{"type":24,"value":169},"Which,",{"type":18,"tag":113,"props":171,"children":172},{},[173,182,191,200,208],{"type":18,"tag":117,"props":174,"children":175},{},[176,180],{"type":18,"tag":92,"props":177,"children":179},{"latex-express":178,"styles":123,"dist-cond":105},"f",[],{"type":24,"value":181}," is the system dynamics model.",{"type":18,"tag":117,"props":183,"children":184},{},[185,189],{"type":18,"tag":92,"props":186,"children":188},{"latex-express":187,"styles":123,"dist-cond":105},"g",[],{"type":24,"value":190}," is the state constraints of the system.",{"type":18,"tag":117,"props":192,"children":193},{},[194,198],{"type":18,"tag":92,"props":195,"children":197},{"latex-express":196,"styles":123,"dist-cond":105},"h",[],{"type":24,"value":199}," is the input constraints of the system.",{"type":18,"tag":117,"props":201,"children":202},{},[203,206],{"type":18,"tag":92,"props":204,"children":205},{"latex-express":27,"styles":123,"dist-cond":105},[],{"type":24,"value":207}," is the path constraint, it help to ensure the safety following path of our system.",{"type":18,"tag":117,"props":209,"children":210},{},[211,215],{"type":18,"tag":92,"props":212,"children":214},{"latex-express":213,"styles":123,"dist-cond":105},"\\phi(X_{N})",[],{"type":24,"value":216}," is the terminal cost of the system.",{"type":18,"tag":19,"props":218,"children":220},{"id":219},"discretize-the-system-model-with-runge-kutta-4th-order",[221],{"type":24,"value":222},"Discretize the system model with Runge-Kutta 4th order",{"type":18,"tag":27,"props":224,"children":225},{},[226,228,234],{"type":24,"value":227},"I will choose a simple system mode robot ",{"type":18,"tag":229,"props":230,"children":231},"strong",{},[232],{"type":24,"value":233}," DifferentialDrive ",{"type":24,"value":235},".\nThe forward kinematic equation",{"type":18,"tag":92,"props":237,"children":239},{"latex-express":238,"styles":59},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":241,"children":242},{},[243],{"type":24,"value":244},"State constraints are the restriction imposed on the state variable of the system. It helps our optimizer not to obtain the solution that is outside the boundary region and also ensure the system to always perform the minimal action control in any critical condition.",{"type":18,"tag":27,"props":246,"children":247},{},[248],{"type":24,"value":249},"We, then can do the approximation",{"type":18,"tag":160,"props":251,"children":253},{"latex-express":252,"styles":59,"dist-cond":95},"\n    \\begin{align*}\n        k_{1} &= f(x^{*}, u^{*}) \\\\\n        k_{2} &= f(x^{*}+k_{1}\\frac{dt}{2}, u^{*}) \\\\ \n        k_{3} &= f(x^{*}+k_{2}\\frac{dt}{2}, u^{*}) \\\\\n        k_{4} &= f(x^{*}+k_{3}dt, u^{*}) \\\\ \n        \\Rightarrow{x_{k+1} } &= x_{k} + (k_{1}+2k_{2}+2k_{3}+k_{4})\\frac{dt}{6}\n    \\end{align*}\n",[],{"type":18,"tag":27,"props":255,"children":256},{},[257],{"type":24,"value":258},"Let's evaluate it with our model.",{"type":18,"tag":160,"props":260,"children":262},{"latex-express":261,"styles":59},"\n      \\begin{align*}\n        k_{1} &= \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n        k_{2} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{3} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{4} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n    \\end{align*}\n      ",[],{"type":18,"tag":160,"props":264,"children":266},{"latex-express":265,"styles":59},"\n      \\Rightarrow{x_{k+1} } = x_{k} + \\left( \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} + \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix}   \\right) \\frac{dt}{6}\n",[],{"type":18,"tag":27,"props":268,"children":269},{},[270],{"type":24,"value":271},"How to implement it in Python ???",{"type":18,"tag":273,"props":274,"children":279},"code",{"className":275,"code":277,"language":278,"meta":8},[276],"language-python","import numpy as np\n\n## Define sampling time dt 100Hz\ndt = 0.01\n## Define the num steps for function approximation \nnum_steps = 100\n## Define initial states\nx = 0.0\ny = 0.0\nyaw = 0.0\n## Define input control\nv = 1.5 #m/s\nomega = 1.57 #rad/s\n## Define state represent model\n### define lambda function take variable x\nf = lambda x, u :  np.array([\n      [u[0]*np.cos(x[2])],\n      [u[0]*np.sin(x[2])],\n      [u[1]]\n])\n\nfor _ in range(num_steps):\n    k1 = f([x, y, yaw], [v, omega])\n    k2 = f([x + (dt / 2) * k1[0], y + (dt / 2) * k1[1], yaw + (dt / 2) * k1[2]], [v, omega])\n    k3 = f([x + (dt / 2) * k2[0], y + (dt / 2) * k2[1], yaw + (dt / 2) * k2[2]], [v, omega])\n    k4 = f([x + dt * k3[0], y + dt * k3[1], yaw + dt * k3[2]], [v, omega])\n\n    # Update state of the robot\n    x += (k1[0] + 2 * k2[0] + 2 * k3[0] + k4[0]) * dt / 6\n    y += (k1[1] + 2 * k2[1] + 2 * k3[1] + k4[1]) * dt / 6\n    yaw += (k1[2] + 2 * k2[2] + 2 * k3[2] + k4[2]) * dt / 6\n","python",[280],{"type":18,"tag":281,"props":282,"children":283},"pre",{},[284],{"type":18,"tag":273,"props":285,"children":286},{"__ignoreMap":8},[287,315,324,334,359,368,390,399,421,442,463,472,503,534,543,552,579,618,651,669,678,686,719,737,883,1021,1112,1120,1134,1265,1390],{"type":18,"tag":288,"props":289,"children":292},"span",{"class":290,"line":291},"line",1,[293,299,305,310],{"type":18,"tag":288,"props":294,"children":296},{"class":295},"ct-857441",[297],{"type":24,"value":298},"import",{"type":18,"tag":288,"props":300,"children":302},{"class":301},"ct-767297",[303],{"type":24,"value":304}," numpy ",{"type":18,"tag":288,"props":306,"children":307},{"class":295},[308],{"type":24,"value":309},"as",{"type":18,"tag":288,"props":311,"children":312},{"class":301},[313],{"type":24,"value":314}," np\n",{"type":18,"tag":288,"props":316,"children":318},{"class":290,"line":317},2,[319],{"type":18,"tag":288,"props":320,"children":321},{},[322],{"type":24,"value":323},"\n",{"type":18,"tag":288,"props":325,"children":327},{"class":290,"line":326},3,[328],{"type":18,"tag":288,"props":329,"children":331},{"class":330},"ct-326375",[332],{"type":24,"value":333},"## Define sampling time dt 100Hz\n",{"type":18,"tag":288,"props":335,"children":337},{"class":290,"line":336},4,[338,343,348,353],{"type":18,"tag":288,"props":339,"children":340},{"class":301},[341],{"type":24,"value":342},"dt ",{"type":18,"tag":288,"props":344,"children":345},{"class":295},[346],{"type":24,"value":347},"=",{"type":18,"tag":288,"props":349,"children":350},{"class":301},[351],{"type":24,"value":352}," ",{"type":18,"tag":288,"props":354,"children":356},{"class":355},"ct-533739",[357],{"type":24,"value":358},"0.01\n",{"type":18,"tag":288,"props":360,"children":362},{"class":290,"line":361},5,[363],{"type":18,"tag":288,"props":364,"children":365},{"class":330},[366],{"type":24,"value":367},"## Define the num steps for function approximation \n",{"type":18,"tag":288,"props":369,"children":371},{"class":290,"line":370},6,[372,377,381,385],{"type":18,"tag":288,"props":373,"children":374},{"class":301},[375],{"type":24,"value":376},"num_steps ",{"type":18,"tag":288,"props":378,"children":379},{"class":295},[380],{"type":24,"value":347},{"type":18,"tag":288,"props":382,"children":383},{"class":301},[384],{"type":24,"value":352},{"type":18,"tag":288,"props":386,"children":387},{"class":355},[388],{"type":24,"value":389},"100\n",{"type":18,"tag":288,"props":391,"children":393},{"class":290,"line":392},7,[394],{"type":18,"tag":288,"props":395,"children":396},{"class":330},[397],{"type":24,"value":398},"## Define initial states\n",{"type":18,"tag":288,"props":400,"children":402},{"class":290,"line":401},8,[403,408,412,416],{"type":18,"tag":288,"props":404,"children":405},{"class":301},[406],{"type":24,"value":407},"x ",{"type":18,"tag":288,"props":409,"children":410},{"class":295},[411],{"type":24,"value":347},{"type":18,"tag":288,"props":413,"children":414},{"class":301},[415],{"type":24,"value":352},{"type":18,"tag":288,"props":417,"children":418},{"class":355},[419],{"type":24,"value":420},"0.0\n",{"type":18,"tag":288,"props":422,"children":424},{"class":290,"line":423},9,[425,430,434,438],{"type":18,"tag":288,"props":426,"children":427},{"class":301},[428],{"type":24,"value":429},"y ",{"type":18,"tag":288,"props":431,"children":432},{"class":295},[433],{"type":24,"value":347},{"type":18,"tag":288,"props":435,"children":436},{"class":301},[437],{"type":24,"value":352},{"type":18,"tag":288,"props":439,"children":440},{"class":355},[441],{"type":24,"value":420},{"type":18,"tag":288,"props":443,"children":445},{"class":290,"line":444},10,[446,451,455,459],{"type":18,"tag":288,"props":447,"children":448},{"class":301},[449],{"type":24,"value":450},"yaw ",{"type":18,"tag":288,"props":452,"children":453},{"class":295},[454],{"type":24,"value":347},{"type":18,"tag":288,"props":456,"children":457},{"class":301},[458],{"type":24,"value":352},{"type":18,"tag":288,"props":460,"children":461},{"class":355},[462],{"type":24,"value":420},{"type":18,"tag":288,"props":464,"children":466},{"class":290,"line":465},11,[467],{"type":18,"tag":288,"props":468,"children":469},{"class":330},[470],{"type":24,"value":471},"## Define input control\n",{"type":18,"tag":288,"props":473,"children":475},{"class":290,"line":474},12,[476,481,485,489,494,498],{"type":18,"tag":288,"props":477,"children":478},{"class":301},[479],{"type":24,"value":480},"v ",{"type":18,"tag":288,"props":482,"children":483},{"class":295},[484],{"type":24,"value":347},{"type":18,"tag":288,"props":486,"children":487},{"class":301},[488],{"type":24,"value":352},{"type":18,"tag":288,"props":490,"children":491},{"class":355},[492],{"type":24,"value":493},"1.5",{"type":18,"tag":288,"props":495,"children":496},{"class":301},[497],{"type":24,"value":352},{"type":18,"tag":288,"props":499,"children":500},{"class":330},[501],{"type":24,"value":502},"#m/s\n",{"type":18,"tag":288,"props":504,"children":506},{"class":290,"line":505},13,[507,512,516,520,525,529],{"type":18,"tag":288,"props":508,"children":509},{"class":301},[510],{"type":24,"value":511},"omega ",{"type":18,"tag":288,"props":513,"children":514},{"class":295},[515],{"type":24,"value":347},{"type":18,"tag":288,"props":517,"children":518},{"class":301},[519],{"type":24,"value":352},{"type":18,"tag":288,"props":521,"children":522},{"class":355},[523],{"type":24,"value":524},"1.57",{"type":18,"tag":288,"props":526,"children":527},{"class":301},[528],{"type":24,"value":352},{"type":18,"tag":288,"props":530,"children":531},{"class":330},[532],{"type":24,"value":533},"#rad/s\n",{"type":18,"tag":288,"props":535,"children":537},{"class":290,"line":536},14,[538],{"type":18,"tag":288,"props":539,"children":540},{"class":330},[541],{"type":24,"value":542},"## Define state represent model\n",{"type":18,"tag":288,"props":544,"children":546},{"class":290,"line":545},15,[547],{"type":18,"tag":288,"props":548,"children":549},{"class":330},[550],{"type":24,"value":551},"### define lambda function take variable x\n",{"type":18,"tag":288,"props":553,"children":555},{"class":290,"line":554},16,[556,561,565,569,574],{"type":18,"tag":288,"props":557,"children":558},{"class":301},[559],{"type":24,"value":560},"f ",{"type":18,"tag":288,"props":562,"children":563},{"class":295},[564],{"type":24,"value":347},{"type":18,"tag":288,"props":566,"children":567},{"class":301},[568],{"type":24,"value":352},{"type":18,"tag":288,"props":570,"children":571},{"class":295},[572],{"type":24,"value":573},"lambda",{"type":18,"tag":288,"props":575,"children":576},{"class":301},[577],{"type":24,"value":578}," x, u :  np.array([\n",{"type":18,"tag":288,"props":580,"children":582},{"class":290,"line":581},17,[583,588,593,598,603,608,613],{"type":18,"tag":288,"props":584,"children":585},{"class":301},[586],{"type":24,"value":587},"      [u[",{"type":18,"tag":288,"props":589,"children":590},{"class":355},[591],{"type":24,"value":592},"0",{"type":18,"tag":288,"props":594,"children":595},{"class":301},[596],{"type":24,"value":597},"]",{"type":18,"tag":288,"props":599,"children":600},{"class":295},[601],{"type":24,"value":602},"*",{"type":18,"tag":288,"props":604,"children":605},{"class":301},[606],{"type":24,"value":607},"np.cos(x[",{"type":18,"tag":288,"props":609,"children":610},{"class":355},[611],{"type":24,"value":612},"2",{"type":18,"tag":288,"props":614,"children":615},{"class":301},[616],{"type":24,"value":617},"])],\n",{"type":18,"tag":288,"props":619,"children":621},{"class":290,"line":620},18,[622,626,630,634,638,643,647],{"type":18,"tag":288,"props":623,"children":624},{"class":301},[625],{"type":24,"value":587},{"type":18,"tag":288,"props":627,"children":628},{"class":355},[629],{"type":24,"value":592},{"type":18,"tag":288,"props":631,"children":632},{"class":301},[633],{"type":24,"value":597},{"type":18,"tag":288,"props":635,"children":636},{"class":295},[637],{"type":24,"value":602},{"type":18,"tag":288,"props":639,"children":640},{"class":301},[641],{"type":24,"value":642},"np.sin(x[",{"type":18,"tag":288,"props":644,"children":645},{"class":355},[646],{"type":24,"value":612},{"type":18,"tag":288,"props":648,"children":649},{"class":301},[650],{"type":24,"value":617},{"type":18,"tag":288,"props":652,"children":654},{"class":290,"line":653},19,[655,659,664],{"type":18,"tag":288,"props":656,"children":657},{"class":301},[658],{"type":24,"value":587},{"type":18,"tag":288,"props":660,"children":661},{"class":355},[662],{"type":24,"value":663},"1",{"type":18,"tag":288,"props":665,"children":666},{"class":301},[667],{"type":24,"value":668},"]]\n",{"type":18,"tag":288,"props":670,"children":672},{"class":290,"line":671},20,[673],{"type":18,"tag":288,"props":674,"children":675},{"class":301},[676],{"type":24,"value":677},"])\n",{"type":18,"tag":288,"props":679,"children":681},{"class":290,"line":680},21,[682],{"type":18,"tag":288,"props":683,"children":684},{},[685],{"type":24,"value":323},{"type":18,"tag":288,"props":687,"children":689},{"class":290,"line":688},22,[690,695,700,705,709,714],{"type":18,"tag":288,"props":691,"children":692},{"class":295},[693],{"type":24,"value":694},"for",{"type":18,"tag":288,"props":696,"children":697},{"class":301},[698],{"type":24,"value":699}," _ ",{"type":18,"tag":288,"props":701,"children":702},{"class":295},[703],{"type":24,"value":704},"in",{"type":18,"tag":288,"props":706,"children":707},{"class":301},[708],{"type":24,"value":352},{"type":18,"tag":288,"props":710,"children":711},{"class":355},[712],{"type":24,"value":713},"range",{"type":18,"tag":288,"props":715,"children":716},{"class":301},[717],{"type":24,"value":718},"(num_steps):\n",{"type":18,"tag":288,"props":720,"children":722},{"class":290,"line":721},23,[723,728,732],{"type":18,"tag":288,"props":724,"children":725},{"class":301},[726],{"type":24,"value":727},"    k1 ",{"type":18,"tag":288,"props":729,"children":730},{"class":295},[731],{"type":24,"value":347},{"type":18,"tag":288,"props":733,"children":734},{"class":301},[735],{"type":24,"value":736}," f([x, y, yaw], [v, omega])\n",{"type":18,"tag":288,"props":738,"children":740},{"class":290,"line":739},24,[741,746,750,755,760,765,770,774,778,783,787,792,796,801,805,809,813,817,821,825,829,833,837,842,846,850,854,858,862,866,870,874,878],{"type":18,"tag":288,"props":742,"children":743},{"class":301},[744],{"type":24,"value":745},"    k2 ",{"type":18,"tag":288,"props":747,"children":748},{"class":295},[749],{"type":24,"value":347},{"type":18,"tag":288,"props":751,"children":752},{"class":301},[753],{"type":24,"value":754}," f([x ",{"type":18,"tag":288,"props":756,"children":757},{"class":295},[758],{"type":24,"value":759},"+",{"type":18,"tag":288,"props":761,"children":762},{"class":301},[763],{"type":24,"value":764}," (dt ",{"type":18,"tag":288,"props":766,"children":767},{"class":295},[768],{"type":24,"value":769},"/",{"type":18,"tag":288,"props":771,"children":772},{"class":301},[773],{"type":24,"value":352},{"type":18,"tag":288,"props":775,"children":776},{"class":355},[777],{"type":24,"value":612},{"type":18,"tag":288,"props":779,"children":780},{"class":301},[781],{"type":24,"value":782},") ",{"type":18,"tag":288,"props":784,"children":785},{"class":295},[786],{"type":24,"value":602},{"type":18,"tag":288,"props":788,"children":789},{"class":301},[790],{"type":24,"value":791}," k1[",{"type":18,"tag":288,"props":793,"children":794},{"class":355},[795],{"type":24,"value":592},{"type":18,"tag":288,"props":797,"children":798},{"class":301},[799],{"type":24,"value":800},"], y ",{"type":18,"tag":288,"props":802,"children":803},{"class":295},[804],{"type":24,"value":759},{"type":18,"tag":288,"props":806,"children":807},{"class":301},[808],{"type":24,"value":764},{"type":18,"tag":288,"props":810,"children":811},{"class":295},[812],{"type":24,"value":769},{"type":18,"tag":288,"props":814,"children":815},{"class":301},[816],{"type":24,"value":352},{"type":18,"tag":288,"props":818,"children":819},{"class":355},[820],{"type":24,"value":612},{"type":18,"tag":288,"props":822,"children":823},{"class":301},[824],{"type":24,"value":782},{"type":18,"tag":288,"props":826,"children":827},{"class":295},[828],{"type":24,"value":602},{"type":18,"tag":288,"props":830,"children":831},{"class":301},[832],{"type":24,"value":791},{"type":18,"tag":288,"props":834,"children":835},{"class":355},[836],{"type":24,"value":663},{"type":18,"tag":288,"props":838,"children":839},{"class":301},[840],{"type":24,"value":841},"], yaw ",{"type":18,"tag":288,"props":843,"children":844},{"class":295},[845],{"type":24,"value":759},{"type":18,"tag":288,"props":847,"children":848},{"class":301},[849],{"type":24,"value":764},{"type":18,"tag":288,"props":851,"children":852},{"class":295},[853],{"type":24,"value":769},{"type":18,"tag":288,"props":855,"children":856},{"class":301},[857],{"type":24,"value":352},{"type":18,"tag":288,"props":859,"children":860},{"class":355},[861],{"type":24,"value":612},{"type":18,"tag":288,"props":863,"children":864},{"class":301},[865],{"type":24,"value":782},{"type":18,"tag":288,"props":867,"children":868},{"class":295},[869],{"type":24,"value":602},{"type":18,"tag":288,"props":871,"children":872},{"class":301},[873],{"type":24,"value":791},{"type":18,"tag":288,"props":875,"children":876},{"class":355},[877],{"type":24,"value":612},{"type":18,"tag":288,"props":879,"children":880},{"class":301},[881],{"type":24,"value":882},"]], [v, omega])\n",{"type":18,"tag":288,"props":884,"children":886},{"class":290,"line":885},25,[887,892,896,900,904,908,912,916,920,924,928,933,937,941,945,949,953,957,961,965,969,973,977,981,985,989,993,997,1001,1005,1009,1013,1017],{"type":18,"tag":288,"props":888,"children":889},{"class":301},[890],{"type":24,"value":891},"    k3 ",{"type":18,"tag":288,"props":893,"children":894},{"class":295},[895],{"type":24,"value":347},{"type":18,"tag":288,"props":897,"children":898},{"class":301},[899],{"type":24,"value":754},{"type":18,"tag":288,"props":901,"children":902},{"class":295},[903],{"type":24,"value":759},{"type":18,"tag":288,"props":905,"children":906},{"class":301},[907],{"type":24,"value":764},{"type":18,"tag":288,"props":909,"children":910},{"class":295},[911],{"type":24,"value":769},{"type":18,"tag":288,"props":913,"children":914},{"class":301},[915],{"type":24,"value":352},{"type":18,"tag":288,"props":917,"children":918},{"class":355},[919],{"type":24,"value":612},{"type":18,"tag":288,"props":921,"children":922},{"class":301},[923],{"type":24,"value":782},{"type":18,"tag":288,"props":925,"children":926},{"class":295},[927],{"type":24,"value":602},{"type":18,"tag":288,"props":929,"children":930},{"class":301},[931],{"type":24,"value":932}," k2[",{"type":18,"tag":288,"props":934,"children":935},{"class":355},[936],{"type":24,"value":592},{"type":18,"tag":288,"props":938,"children":939},{"class":301},[940],{"type":24,"value":800},{"type":18,"tag":288,"props":942,"children":943},{"class":295},[944],{"type":24,"value":759},{"type":18,"tag":288,"props":946,"children":947},{"class":301},[948],{"type":24,"value":764},{"type":18,"tag":288,"props":950,"children":951},{"class":295},[952],{"type":24,"value":769},{"type":18,"tag":288,"props":954,"children":955},{"class":301},[956],{"type":24,"value":352},{"type":18,"tag":288,"props":958,"children":959},{"class":355},[960],{"type":24,"value":612},{"type":18,"tag":288,"props":962,"children":963},{"class":301},[964],{"type":24,"value":782},{"type":18,"tag":288,"props":966,"children":967},{"class":295},[968],{"type":24,"value":602},{"type":18,"tag":288,"props":970,"children":971},{"class":301},[972],{"type":24,"value":932},{"type":18,"tag":288,"props":974,"children":975},{"class":355},[976],{"type":24,"value":663},{"type":18,"tag":288,"props":978,"children":979},{"class":301},[980],{"type":24,"value":841},{"type":18,"tag":288,"props":982,"children":983},{"class":295},[984],{"type":24,"value":759},{"type":18,"tag":288,"props":986,"children":987},{"class":301},[988],{"type":24,"value":764},{"type":18,"tag":288,"props":990,"children":991},{"class":295},[992],{"type":24,"value":769},{"type":18,"tag":288,"props":994,"children":995},{"class":301},[996],{"type":24,"value":352},{"type":18,"tag":288,"props":998,"children":999},{"class":355},[1000],{"type":24,"value":612},{"type":18,"tag":288,"props":1002,"children":1003},{"class":301},[1004],{"type":24,"value":782},{"type":18,"tag":288,"props":1006,"children":1007},{"class":295},[1008],{"type":24,"value":602},{"type":18,"tag":288,"props":1010,"children":1011},{"class":301},[1012],{"type":24,"value":932},{"type":18,"tag":288,"props":1014,"children":1015},{"class":355},[1016],{"type":24,"value":612},{"type":18,"tag":288,"props":1018,"children":1019},{"class":301},[1020],{"type":24,"value":882},{"type":18,"tag":288,"props":1022,"children":1024},{"class":290,"line":1023},26,[1025,1030,1034,1038,1042,1047,1051,1056,1060,1064,1068,1072,1076,1080,1084,1088,1092,1096,1100,1104,1108],{"type":18,"tag":288,"props":1026,"children":1027},{"class":301},[1028],{"type":24,"value":1029},"    k4 ",{"type":18,"tag":288,"props":1031,"children":1032},{"class":295},[1033],{"type":24,"value":347},{"type":18,"tag":288,"props":1035,"children":1036},{"class":301},[1037],{"type":24,"value":754},{"type":18,"tag":288,"props":1039,"children":1040},{"class":295},[1041],{"type":24,"value":759},{"type":18,"tag":288,"props":1043,"children":1044},{"class":301},[1045],{"type":24,"value":1046}," dt ",{"type":18,"tag":288,"props":1048,"children":1049},{"class":295},[1050],{"type":24,"value":602},{"type":18,"tag":288,"props":1052,"children":1053},{"class":301},[1054],{"type":24,"value":1055}," k3[",{"type":18,"tag":288,"props":1057,"children":1058},{"class":355},[1059],{"type":24,"value":592},{"type":18,"tag":288,"props":1061,"children":1062},{"class":301},[1063],{"type":24,"value":800},{"type":18,"tag":288,"props":1065,"children":1066},{"class":295},[1067],{"type":24,"value":759},{"type":18,"tag":288,"props":1069,"children":1070},{"class":301},[1071],{"type":24,"value":1046},{"type":18,"tag":288,"props":1073,"children":1074},{"class":295},[1075],{"type":24,"value":602},{"type":18,"tag":288,"props":1077,"children":1078},{"class":301},[1079],{"type":24,"value":1055},{"type":18,"tag":288,"props":1081,"children":1082},{"class":355},[1083],{"type":24,"value":663},{"type":18,"tag":288,"props":1085,"children":1086},{"class":301},[1087],{"type":24,"value":841},{"type":18,"tag":288,"props":1089,"children":1090},{"class":295},[1091],{"type":24,"value":759},{"type":18,"tag":288,"props":1093,"children":1094},{"class":301},[1095],{"type":24,"value":1046},{"type":18,"tag":288,"props":1097,"children":1098},{"class":295},[1099],{"type":24,"value":602},{"type":18,"tag":288,"props":1101,"children":1102},{"class":301},[1103],{"type":24,"value":1055},{"type":18,"tag":288,"props":1105,"children":1106},{"class":355},[1107],{"type":24,"value":612},{"type":18,"tag":288,"props":1109,"children":1110},{"class":301},[1111],{"type":24,"value":882},{"type":18,"tag":288,"props":1113,"children":1115},{"class":290,"line":1114},27,[1116],{"type":18,"tag":288,"props":1117,"children":1118},{},[1119],{"type":24,"value":323},{"type":18,"tag":288,"props":1121,"children":1123},{"class":290,"line":1122},28,[1124,1129],{"type":18,"tag":288,"props":1125,"children":1126},{"class":301},[1127],{"type":24,"value":1128},"    ",{"type":18,"tag":288,"props":1130,"children":1131},{"class":330},[1132],{"type":24,"value":1133},"# Update state of the robot\n",{"type":18,"tag":288,"props":1135,"children":1137},{"class":290,"line":1136},29,[1138,1143,1148,1153,1157,1162,1166,1170,1174,1178,1182,1186,1190,1194,1198,1202,1206,1210,1214,1218,1222,1226,1230,1235,1239,1244,1248,1252,1256,1260],{"type":18,"tag":288,"props":1139,"children":1140},{"class":301},[1141],{"type":24,"value":1142},"    x ",{"type":18,"tag":288,"props":1144,"children":1145},{"class":295},[1146],{"type":24,"value":1147},"+=",{"type":18,"tag":288,"props":1149,"children":1150},{"class":301},[1151],{"type":24,"value":1152}," (k1[",{"type":18,"tag":288,"props":1154,"children":1155},{"class":355},[1156],{"type":24,"value":592},{"type":18,"tag":288,"props":1158,"children":1159},{"class":301},[1160],{"type":24,"value":1161},"] ",{"type":18,"tag":288,"props":1163,"children":1164},{"class":295},[1165],{"type":24,"value":759},{"type":18,"tag":288,"props":1167,"children":1168},{"class":301},[1169],{"type":24,"value":352},{"type":18,"tag":288,"props":1171,"children":1172},{"class":355},[1173],{"type":24,"value":612},{"type":18,"tag":288,"props":1175,"children":1176},{"class":301},[1177],{"type":24,"value":352},{"type":18,"tag":288,"props":1179,"children":1180},{"class":295},[1181],{"type":24,"value":602},{"type":18,"tag":288,"props":1183,"children":1184},{"class":301},[1185],{"type":24,"value":932},{"type":18,"tag":288,"props":1187,"children":1188},{"class":355},[1189],{"type":24,"value":592},{"type":18,"tag":288,"props":1191,"children":1192},{"class":301},[1193],{"type":24,"value":1161},{"type":18,"tag":288,"props":1195,"children":1196},{"class":295},[1197],{"type":24,"value":759},{"type":18,"tag":288,"props":1199,"children":1200},{"class":301},[1201],{"type":24,"value":352},{"type":18,"tag":288,"props":1203,"children":1204},{"class":355},[1205],{"type":24,"value":612},{"type":18,"tag":288,"props":1207,"children":1208},{"class":301},[1209],{"type":24,"value":352},{"type":18,"tag":288,"props":1211,"children":1212},{"class":295},[1213],{"type":24,"value":602},{"type":18,"tag":288,"props":1215,"children":1216},{"class":301},[1217],{"type":24,"value":1055},{"type":18,"tag":288,"props":1219,"children":1220},{"class":355},[1221],{"type":24,"value":592},{"type":18,"tag":288,"props":1223,"children":1224},{"class":301},[1225],{"type":24,"value":1161},{"type":18,"tag":288,"props":1227,"children":1228},{"class":295},[1229],{"type":24,"value":759},{"type":18,"tag":288,"props":1231,"children":1232},{"class":301},[1233],{"type":24,"value":1234}," k4[",{"type":18,"tag":288,"props":1236,"children":1237},{"class":355},[1238],{"type":24,"value":592},{"type":18,"tag":288,"props":1240,"children":1241},{"class":301},[1242],{"type":24,"value":1243},"]) ",{"type":18,"tag":288,"props":1245,"children":1246},{"class":295},[1247],{"type":24,"value":602},{"type":18,"tag":288,"props":1249,"children":1250},{"class":301},[1251],{"type":24,"value":1046},{"type":18,"tag":288,"props":1253,"children":1254},{"class":295},[1255],{"type":24,"value":769},{"type":18,"tag":288,"props":1257,"children":1258},{"class":301},[1259],{"type":24,"value":352},{"type":18,"tag":288,"props":1261,"children":1262},{"class":355},[1263],{"type":24,"value":1264},"6\n",{"type":18,"tag":288,"props":1266,"children":1268},{"class":290,"line":1267},30,[1269,1274,1278,1282,1286,1290,1294,1298,1302,1306,1310,1314,1318,1322,1326,1330,1334,1338,1342,1346,1350,1354,1358,1362,1366,1370,1374,1378,1382,1386],{"type":18,"tag":288,"props":1270,"children":1271},{"class":301},[1272],{"type":24,"value":1273},"    y ",{"type":18,"tag":288,"props":1275,"children":1276},{"class":295},[1277],{"type":24,"value":1147},{"type":18,"tag":288,"props":1279,"children":1280},{"class":301},[1281],{"type":24,"value":1152},{"type":18,"tag":288,"props":1283,"children":1284},{"class":355},[1285],{"type":24,"value":663},{"type":18,"tag":288,"props":1287,"children":1288},{"class":301},[1289],{"type":24,"value":1161},{"type":18,"tag":288,"props":1291,"children":1292},{"class":295},[1293],{"type":24,"value":759},{"type":18,"tag":288,"props":1295,"children":1296},{"class":301},[1297],{"type":24,"value":352},{"type":18,"tag":288,"props":1299,"children":1300},{"class":355},[1301],{"type":24,"value":612},{"type":18,"tag":288,"props":1303,"children":1304},{"class":301},[1305],{"type":24,"value":352},{"type":18,"tag":288,"props":1307,"children":1308},{"class":295},[1309],{"type":24,"value":602},{"type":18,"tag":288,"props":1311,"children":1312},{"class":301},[1313],{"type":24,"value":932},{"type":18,"tag":288,"props":1315,"children":1316},{"class":355},[1317],{"type":24,"value":663},{"type":18,"tag":288,"props":1319,"children":1320},{"class":301},[1321],{"type":24,"value":1161},{"type":18,"tag":288,"props":1323,"children":1324},{"class":295},[1325],{"type":24,"value":759},{"type":18,"tag":288,"props":1327,"children":1328},{"class":301},[1329],{"type":24,"value":352},{"type":18,"tag":288,"props":1331,"children":1332},{"class":355},[1333],{"type":24,"value":612},{"type":18,"tag":288,"props":1335,"children":1336},{"class":301},[1337],{"type":24,"value":352},{"type":18,"tag":288,"props":1339,"children":1340},{"class":295},[1341],{"type":24,"value":602},{"type":18,"tag":288,"props":1343,"children":1344},{"class":301},[1345],{"type":24,"value":1055},{"type":18,"tag":288,"props":1347,"children":1348},{"class":355},[1349],{"type":24,"value":663},{"type":18,"tag":288,"props":1351,"children":1352},{"class":301},[1353],{"type":24,"value":1161},{"type":18,"tag":288,"props":1355,"children":1356},{"class":295},[1357],{"type":24,"value":759},{"type":18,"tag":288,"props":1359,"children":1360},{"class":301},[1361],{"type":24,"value":1234},{"type":18,"tag":288,"props":1363,"children":1364},{"class":355},[1365],{"type":24,"value":663},{"type":18,"tag":288,"props":1367,"children":1368},{"class":301},[1369],{"type":24,"value":1243},{"type":18,"tag":288,"props":1371,"children":1372},{"class":295},[1373],{"type":24,"value":602},{"type":18,"tag":288,"props":1375,"children":1376},{"class":301},[1377],{"type":24,"value":1046},{"type":18,"tag":288,"props":1379,"children":1380},{"class":295},[1381],{"type":24,"value":769},{"type":18,"tag":288,"props":1383,"children":1384},{"class":301},[1385],{"type":24,"value":352},{"type":18,"tag":288,"props":1387,"children":1388},{"class":355},[1389],{"type":24,"value":1264},{"type":18,"tag":288,"props":1391,"children":1393},{"class":290,"line":1392},31,[1394,1399,1403,1407,1411,1415,1419,1423,1427,1431,1435,1439,1443,1447,1451,1455,1459,1463,1467,1471,1475,1479,1483,1487,1491,1495,1499,1503,1507,1511],{"type":18,"tag":288,"props":1395,"children":1396},{"class":301},[1397],{"type":24,"value":1398},"    yaw ",{"type":18,"tag":288,"props":1400,"children":1401},{"class":295},[1402],{"type":24,"value":1147},{"type":18,"tag":288,"props":1404,"children":1405},{"class":301},[1406],{"type":24,"value":1152},{"type":18,"tag":288,"props":1408,"children":1409},{"class":355},[1410],{"type":24,"value":612},{"type":18,"tag":288,"props":1412,"children":1413},{"class":301},[1414],{"type":24,"value":1161},{"type":18,"tag":288,"props":1416,"children":1417},{"class":295},[1418],{"type":24,"value":759},{"type":18,"tag":288,"props":1420,"children":1421},{"class":301},[1422],{"type":24,"value":352},{"type":18,"tag":288,"props":1424,"children":1425},{"class":355},[1426],{"type":24,"value":612},{"type":18,"tag":288,"props":1428,"children":1429},{"class":301},[1430],{"type":24,"value":352},{"type":18,"tag":288,"props":1432,"children":1433},{"class":295},[1434],{"type":24,"value":602},{"type":18,"tag":288,"props":1436,"children":1437},{"class":301},[1438],{"type":24,"value":932},{"type":18,"tag":288,"props":1440,"children":1441},{"class":355},[1442],{"type":24,"value":612},{"type":18,"tag":288,"props":1444,"children":1445},{"class":301},[1446],{"type":24,"value":1161},{"type":18,"tag":288,"props":1448,"children":1449},{"class":295},[1450],{"type":24,"value":759},{"type":18,"tag":288,"props":1452,"children":1453},{"class":301},[1454],{"type":24,"value":352},{"type":18,"tag":288,"props":1456,"children":1457},{"class":355},[1458],{"type":24,"value":612},{"type":18,"tag":288,"props":1460,"children":1461},{"class":301},[1462],{"type":24,"value":352},{"type":18,"tag":288,"props":1464,"children":1465},{"class":295},[1466],{"type":24,"value":602},{"type":18,"tag":288,"props":1468,"children":1469},{"class":301},[1470],{"type":24,"value":1055},{"type":18,"tag":288,"props":1472,"children":1473},{"class":355},[1474],{"type":24,"value":612},{"type":18,"tag":288,"props":1476,"children":1477},{"class":301},[1478],{"type":24,"value":1161},{"type":18,"tag":288,"props":1480,"children":1481},{"class":295},[1482],{"type":24,"value":759},{"type":18,"tag":288,"props":1484,"children":1485},{"class":301},[1486],{"type":24,"value":1234},{"type":18,"tag":288,"props":1488,"children":1489},{"class":355},[1490],{"type":24,"value":612},{"type":18,"tag":288,"props":1492,"children":1493},{"class":301},[1494],{"type":24,"value":1243},{"type":18,"tag":288,"props":1496,"children":1497},{"class":295},[1498],{"type":24,"value":602},{"type":18,"tag":288,"props":1500,"children":1501},{"class":301},[1502],{"type":24,"value":1046},{"type":18,"tag":288,"props":1504,"children":1505},{"class":295},[1506],{"type":24,"value":769},{"type":18,"tag":288,"props":1508,"children":1509},{"class":301},[1510],{"type":24,"value":352},{"type":18,"tag":288,"props":1512,"children":1513},{"class":355},[1514],{"type":24,"value":1515},"6",{"type":18,"tag":19,"props":1517,"children":1519},{"id":1518},"single-shooting-method",[1520],{"type":24,"value":1521},"Single Shooting Method",{"type":18,"tag":27,"props":1523,"children":1524},{},[1525],{"type":24,"value":1526},"Single Shooting Method is a method that we transform the optimal control problem to the nonlinear programming problem with just one decision variable.",{"type":18,"tag":160,"props":1528,"children":1530},{"latex-express":1529,"styles":59},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":1532,"children":1533},{},[1534,1536,1540,1542],{"type":24,"value":1535},"Get ",{"type":18,"tag":92,"props":1537,"children":1539},{"latex-express":1538,"styles":123},"x_{u}",[],{"type":24,"value":1541}," as a function of ",{"type":18,"tag":92,"props":1543,"children":1545},{"latex-express":1544,"styles":123},"w, x, t_{k}",[],{"type":18,"tag":160,"props":1547,"children":1549},{"latex-express":1548,"styles":59},"\n      \\begin{align*}\n            x_{u} &= F(w,x_{0},t_{k}) \\\\\n            F(w,x_{0},t_{0}) &= x_{0} \\\\\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":1551,"children":1552},{},[1553],{"type":24,"value":1554},"Then solve the NLP",{"type":18,"tag":160,"props":1556,"children":1558},{"latex-express":1557,"styles":59},"\n      \\begin{align*}\n            \\min_{w}\\Phi(F(w,x_{0},t_{k}), w) \\\\ \n            \\text{Subject to} \\hspace{1cm}  g_{1}(F(w,x_{0},t_{k}),w) \\leq{0}\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1560,"children":1562},{"id":1561},"multiple-shooting",[1563],{"type":24,"value":1564},"Multiple Shooting",{"type":18,"tag":27,"props":1566,"children":1567},{},[1568],{"type":24,"value":1569},"Multiple Shooting Method is a method that consist of transforming of optimal control problem to the nonlinear programming problem with multiple decision variables.",{"type":18,"tag":160,"props":1571,"children":1573},{"latex-express":1572,"styles":59},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}, x_{0}, ..., x_{N}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":113,"props":1575,"children":1576},{},[1577,1582],{"type":18,"tag":117,"props":1578,"children":1579},{},[1580],{"type":24,"value":1581},"X becoming decision variable in the opimization problem as well as u",{"type":18,"tag":117,"props":1583,"children":1584},{},[1585],{"type":24,"value":1586},"We apply path constraint at each iteration step",{"type":18,"tag":160,"props":1588,"children":1590},{"latex-express":1589,"styles":59},"\n      \\begin{equation*}\n                x_{k+1}-f(x_{k},u_{k}) = 0\n            \\end{equation*}\n",[],{"type":18,"tag":27,"props":1592,"children":1593},{},[1594],{"type":24,"value":1554},{"type":18,"tag":160,"props":1596,"children":1598},{"latex-express":1597,"styles":59},"\n      \\begin{align*}\n            \\min_{w}  \\Phi(F(w,x_{0},t_{k}),& w) \\\\ \n            \\text{s.t}\\hspace{0.5cm}  g_{1}(F(w,x_{0},t_{k}),w) &\\leq{0} \\\\ \n                               g_{2}(w) = \\begin{bmatrix}\n                                  \\bar{x}_{0}-x_{0} \\\\\n                                  f(x_{0},u_{0})-x_{1} \\\\ \n                                  \\vdots \\\\\n                                  f(x_{N-1}, u_{N-1}-x_{N})\n                              \\end{bmatrix} &= 0\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1600,"children":1602},{"id":1601},"implement-in-python",[1603],{"type":24,"value":1604},"Implement in Python",{"type":18,"tag":27,"props":1606,"children":1607},{},[1608,1610,1616],{"type":24,"value":1609},"We will use ",{"type":18,"tag":1611,"props":1612,"children":1613},"code-inline",{},[1614],{"type":24,"value":1615},"Casadi",{"type":24,"value":1617}," as a numerical optimization framework.",{"type":18,"tag":273,"props":1619,"children":1622},{"className":1620,"code":1621,"language":278,"meta":8},[276],"import casadi as ca\n",[1623],{"type":18,"tag":281,"props":1624,"children":1625},{},[1626],{"type":18,"tag":273,"props":1627,"children":1628},{"__ignoreMap":8},[1629],{"type":18,"tag":288,"props":1630,"children":1631},{"class":290,"line":291},[1632,1636,1641,1645],{"type":18,"tag":288,"props":1633,"children":1634},{"class":295},[1635],{"type":24,"value":298},{"type":18,"tag":288,"props":1637,"children":1638},{"class":301},[1639],{"type":24,"value":1640}," casadi ",{"type":18,"tag":288,"props":1642,"children":1643},{"class":295},[1644],{"type":24,"value":309},{"type":18,"tag":288,"props":1646,"children":1647},{"class":301},[1648],{"type":24,"value":1649}," ca",{"type":18,"tag":27,"props":1651,"children":1652},{},[1653],{"type":24,"value":1654},"Define state representation and input control of our nonlinear model.",{"type":18,"tag":273,"props":1656,"children":1659},{"className":1657,"code":1658,"language":278,"meta":8},[276],"# Symbolic Variables\n## States\nx = ca.SX.sym(\"x\")\ny = ca.SX.sym(\"y\")\ntheta = ca.SX.sym(\"theta\")\nstates = ca.vertcat(x, y, theta)\nnum_states = states.numel()\n\n## Control\nu1 = ca.SX.sym(\"u1\")\nu2 = ca.SX.sym(\"u2\")\ncontrols = ca.vertcat(u1, u2)\nnum_controls = controls.numel()\n\n# Define Nonlinear model\n## Rotation Matrix\nrot_mat = ca.vertcat(\n    ca.horzcat(ca.cos(theta), ca.sin(theta), 0),\n    ca.horzcat(-ca.sin(theta), ca.cos(theta), 0),\n    ca.horzcat(0, 0, 1)\n)\n\nvx = u1 * ca.cos(theta)\nvy = u1 * ca.sin(theta)\nvyaw = u2\n\nrhs = ca.vertcat(vx, vy, vyaw)\n## Define mapped nonlinear function f(x,u) -> rhs\nf = ca.Function('f', [states, controls], [rhs])\n",[1660],{"type":18,"tag":281,"props":1661,"children":1662},{},[1663],{"type":18,"tag":273,"props":1664,"children":1665},{"__ignoreMap":8},[1666,1674,1682,1719,1751,1784,1801,1818,1825,1833,1866,1899,1916,1933,1940,1948,1956,1973,1990,2016,2048,2055,2062,2088,2113,2130,2137,2154,2162],{"type":18,"tag":288,"props":1667,"children":1668},{"class":290,"line":291},[1669],{"type":18,"tag":288,"props":1670,"children":1671},{"class":330},[1672],{"type":24,"value":1673},"# Symbolic Variables\n",{"type":18,"tag":288,"props":1675,"children":1676},{"class":290,"line":317},[1677],{"type":18,"tag":288,"props":1678,"children":1679},{"class":330},[1680],{"type":24,"value":1681},"## States\n",{"type":18,"tag":288,"props":1683,"children":1684},{"class":290,"line":326},[1685,1689,1693,1698,1703,1708,1714],{"type":18,"tag":288,"props":1686,"children":1687},{"class":301},[1688],{"type":24,"value":407},{"type":18,"tag":288,"props":1690,"children":1691},{"class":295},[1692],{"type":24,"value":347},{"type":18,"tag":288,"props":1694,"children":1695},{"class":301},[1696],{"type":24,"value":1697}," ca.",{"type":18,"tag":288,"props":1699,"children":1700},{"class":355},[1701],{"type":24,"value":1702},"SX",{"type":18,"tag":288,"props":1704,"children":1705},{"class":301},[1706],{"type":24,"value":1707},".sym(",{"type":18,"tag":288,"props":1709,"children":1711},{"class":1710},"ct-244866",[1712],{"type":24,"value":1713},"\"x\"",{"type":18,"tag":288,"props":1715,"children":1716},{"class":301},[1717],{"type":24,"value":1718},")\n",{"type":18,"tag":288,"props":1720,"children":1721},{"class":290,"line":336},[1722,1726,1730,1734,1738,1742,1747],{"type":18,"tag":288,"props":1723,"children":1724},{"class":301},[1725],{"type":24,"value":429},{"type":18,"tag":288,"props":1727,"children":1728},{"class":295},[1729],{"type":24,"value":347},{"type":18,"tag":288,"props":1731,"children":1732},{"class":301},[1733],{"type":24,"value":1697},{"type":18,"tag":288,"props":1735,"children":1736},{"class":355},[1737],{"type":24,"value":1702},{"type":18,"tag":288,"props":1739,"children":1740},{"class":301},[1741],{"type":24,"value":1707},{"type":18,"tag":288,"props":1743,"children":1744},{"class":1710},[1745],{"type":24,"value":1746},"\"y\"",{"type":18,"tag":288,"props":1748,"children":1749},{"class":301},[1750],{"type":24,"value":1718},{"type":18,"tag":288,"props":1752,"children":1753},{"class":290,"line":361},[1754,1759,1763,1767,1771,1775,1780],{"type":18,"tag":288,"props":1755,"children":1756},{"class":301},[1757],{"type":24,"value":1758},"theta ",{"type":18,"tag":288,"props":1760,"children":1761},{"class":295},[1762],{"type":24,"value":347},{"type":18,"tag":288,"props":1764,"children":1765},{"class":301},[1766],{"type":24,"value":1697},{"type":18,"tag":288,"props":1768,"children":1769},{"class":355},[1770],{"type":24,"value":1702},{"type":18,"tag":288,"props":1772,"children":1773},{"class":301},[1774],{"type":24,"value":1707},{"type":18,"tag":288,"props":1776,"children":1777},{"class":1710},[1778],{"type":24,"value":1779},"\"theta\"",{"type":18,"tag":288,"props":1781,"children":1782},{"class":301},[1783],{"type":24,"value":1718},{"type":18,"tag":288,"props":1785,"children":1786},{"class":290,"line":370},[1787,1792,1796],{"type":18,"tag":288,"props":1788,"children":1789},{"class":301},[1790],{"type":24,"value":1791},"states ",{"type":18,"tag":288,"props":1793,"children":1794},{"class":295},[1795],{"type":24,"value":347},{"type":18,"tag":288,"props":1797,"children":1798},{"class":301},[1799],{"type":24,"value":1800}," ca.vertcat(x, y, theta)\n",{"type":18,"tag":288,"props":1802,"children":1803},{"class":290,"line":392},[1804,1809,1813],{"type":18,"tag":288,"props":1805,"children":1806},{"class":301},[1807],{"type":24,"value":1808},"num_states ",{"type":18,"tag":288,"props":1810,"children":1811},{"class":295},[1812],{"type":24,"value":347},{"type":18,"tag":288,"props":1814,"children":1815},{"class":301},[1816],{"type":24,"value":1817}," states.numel()\n",{"type":18,"tag":288,"props":1819,"children":1820},{"class":290,"line":401},[1821],{"type":18,"tag":288,"props":1822,"children":1823},{},[1824],{"type":24,"value":323},{"type":18,"tag":288,"props":1826,"children":1827},{"class":290,"line":423},[1828],{"type":18,"tag":288,"props":1829,"children":1830},{"class":330},[1831],{"type":24,"value":1832},"## Control\n",{"type":18,"tag":288,"props":1834,"children":1835},{"class":290,"line":444},[1836,1841,1845,1849,1853,1857,1862],{"type":18,"tag":288,"props":1837,"children":1838},{"class":301},[1839],{"type":24,"value":1840},"u1 ",{"type":18,"tag":288,"props":1842,"children":1843},{"class":295},[1844],{"type":24,"value":347},{"type":18,"tag":288,"props":1846,"children":1847},{"class":301},[1848],{"type":24,"value":1697},{"type":18,"tag":288,"props":1850,"children":1851},{"class":355},[1852],{"type":24,"value":1702},{"type":18,"tag":288,"props":1854,"children":1855},{"class":301},[1856],{"type":24,"value":1707},{"type":18,"tag":288,"props":1858,"children":1859},{"class":1710},[1860],{"type":24,"value":1861},"\"u1\"",{"type":18,"tag":288,"props":1863,"children":1864},{"class":301},[1865],{"type":24,"value":1718},{"type":18,"tag":288,"props":1867,"children":1868},{"class":290,"line":465},[1869,1874,1878,1882,1886,1890,1895],{"type":18,"tag":288,"props":1870,"children":1871},{"class":301},[1872],{"type":24,"value":1873},"u2 ",{"type":18,"tag":288,"props":1875,"children":1876},{"class":295},[1877],{"type":24,"value":347},{"type":18,"tag":288,"props":1879,"children":1880},{"class":301},[1881],{"type":24,"value":1697},{"type":18,"tag":288,"props":1883,"children":1884},{"class":355},[1885],{"type":24,"value":1702},{"type":18,"tag":288,"props":1887,"children":1888},{"class":301},[1889],{"type":24,"value":1707},{"type":18,"tag":288,"props":1891,"children":1892},{"class":1710},[1893],{"type":24,"value":1894},"\"u2\"",{"type":18,"tag":288,"props":1896,"children":1897},{"class":301},[1898],{"type":24,"value":1718},{"type":18,"tag":288,"props":1900,"children":1901},{"class":290,"line":474},[1902,1907,1911],{"type":18,"tag":288,"props":1903,"children":1904},{"class":301},[1905],{"type":24,"value":1906},"controls ",{"type":18,"tag":288,"props":1908,"children":1909},{"class":295},[1910],{"type":24,"value":347},{"type":18,"tag":288,"props":1912,"children":1913},{"class":301},[1914],{"type":24,"value":1915}," ca.vertcat(u1, u2)\n",{"type":18,"tag":288,"props":1917,"children":1918},{"class":290,"line":505},[1919,1924,1928],{"type":18,"tag":288,"props":1920,"children":1921},{"class":301},[1922],{"type":24,"value":1923},"num_controls ",{"type":18,"tag":288,"props":1925,"children":1926},{"class":295},[1927],{"type":24,"value":347},{"type":18,"tag":288,"props":1929,"children":1930},{"class":301},[1931],{"type":24,"value":1932}," controls.numel()\n",{"type":18,"tag":288,"props":1934,"children":1935},{"class":290,"line":536},[1936],{"type":18,"tag":288,"props":1937,"children":1938},{},[1939],{"type":24,"value":323},{"type":18,"tag":288,"props":1941,"children":1942},{"class":290,"line":545},[1943],{"type":18,"tag":288,"props":1944,"children":1945},{"class":330},[1946],{"type":24,"value":1947},"# Define Nonlinear model\n",{"type":18,"tag":288,"props":1949,"children":1950},{"class":290,"line":554},[1951],{"type":18,"tag":288,"props":1952,"children":1953},{"class":330},[1954],{"type":24,"value":1955},"## Rotation Matrix\n",{"type":18,"tag":288,"props":1957,"children":1958},{"class":290,"line":581},[1959,1964,1968],{"type":18,"tag":288,"props":1960,"children":1961},{"class":301},[1962],{"type":24,"value":1963},"rot_mat ",{"type":18,"tag":288,"props":1965,"children":1966},{"class":295},[1967],{"type":24,"value":347},{"type":18,"tag":288,"props":1969,"children":1970},{"class":301},[1971],{"type":24,"value":1972}," ca.vertcat(\n",{"type":18,"tag":288,"props":1974,"children":1975},{"class":290,"line":620},[1976,1981,1985],{"type":18,"tag":288,"props":1977,"children":1978},{"class":301},[1979],{"type":24,"value":1980},"    ca.horzcat(ca.cos(theta), ca.sin(theta), ",{"type":18,"tag":288,"props":1982,"children":1983},{"class":355},[1984],{"type":24,"value":592},{"type":18,"tag":288,"props":1986,"children":1987},{"class":301},[1988],{"type":24,"value":1989},"),\n",{"type":18,"tag":288,"props":1991,"children":1992},{"class":290,"line":653},[1993,1998,2003,2008,2012],{"type":18,"tag":288,"props":1994,"children":1995},{"class":301},[1996],{"type":24,"value":1997},"    ca.horzcat(",{"type":18,"tag":288,"props":1999,"children":2000},{"class":295},[2001],{"type":24,"value":2002},"-",{"type":18,"tag":288,"props":2004,"children":2005},{"class":301},[2006],{"type":24,"value":2007},"ca.sin(theta), ca.cos(theta), ",{"type":18,"tag":288,"props":2009,"children":2010},{"class":355},[2011],{"type":24,"value":592},{"type":18,"tag":288,"props":2013,"children":2014},{"class":301},[2015],{"type":24,"value":1989},{"type":18,"tag":288,"props":2017,"children":2018},{"class":290,"line":671},[2019,2023,2027,2032,2036,2040,2044],{"type":18,"tag":288,"props":2020,"children":2021},{"class":301},[2022],{"type":24,"value":1997},{"type":18,"tag":288,"props":2024,"children":2025},{"class":355},[2026],{"type":24,"value":592},{"type":18,"tag":288,"props":2028,"children":2029},{"class":301},[2030],{"type":24,"value":2031},", ",{"type":18,"tag":288,"props":2033,"children":2034},{"class":355},[2035],{"type":24,"value":592},{"type":18,"tag":288,"props":2037,"children":2038},{"class":301},[2039],{"type":24,"value":2031},{"type":18,"tag":288,"props":2041,"children":2042},{"class":355},[2043],{"type":24,"value":663},{"type":18,"tag":288,"props":2045,"children":2046},{"class":301},[2047],{"type":24,"value":1718},{"type":18,"tag":288,"props":2049,"children":2050},{"class":290,"line":680},[2051],{"type":18,"tag":288,"props":2052,"children":2053},{"class":301},[2054],{"type":24,"value":1718},{"type":18,"tag":288,"props":2056,"children":2057},{"class":290,"line":688},[2058],{"type":18,"tag":288,"props":2059,"children":2060},{},[2061],{"type":24,"value":323},{"type":18,"tag":288,"props":2063,"children":2064},{"class":290,"line":721},[2065,2070,2074,2079,2083],{"type":18,"tag":288,"props":2066,"children":2067},{"class":301},[2068],{"type":24,"value":2069},"vx ",{"type":18,"tag":288,"props":2071,"children":2072},{"class":295},[2073],{"type":24,"value":347},{"type":18,"tag":288,"props":2075,"children":2076},{"class":301},[2077],{"type":24,"value":2078}," u1 ",{"type":18,"tag":288,"props":2080,"children":2081},{"class":295},[2082],{"type":24,"value":602},{"type":18,"tag":288,"props":2084,"children":2085},{"class":301},[2086],{"type":24,"value":2087}," ca.cos(theta)\n",{"type":18,"tag":288,"props":2089,"children":2090},{"class":290,"line":739},[2091,2096,2100,2104,2108],{"type":18,"tag":288,"props":2092,"children":2093},{"class":301},[2094],{"type":24,"value":2095},"vy ",{"type":18,"tag":288,"props":2097,"children":2098},{"class":295},[2099],{"type":24,"value":347},{"type":18,"tag":288,"props":2101,"children":2102},{"class":301},[2103],{"type":24,"value":2078},{"type":18,"tag":288,"props":2105,"children":2106},{"class":295},[2107],{"type":24,"value":602},{"type":18,"tag":288,"props":2109,"children":2110},{"class":301},[2111],{"type":24,"value":2112}," ca.sin(theta)\n",{"type":18,"tag":288,"props":2114,"children":2115},{"class":290,"line":885},[2116,2121,2125],{"type":18,"tag":288,"props":2117,"children":2118},{"class":301},[2119],{"type":24,"value":2120},"vyaw ",{"type":18,"tag":288,"props":2122,"children":2123},{"class":295},[2124],{"type":24,"value":347},{"type":18,"tag":288,"props":2126,"children":2127},{"class":301},[2128],{"type":24,"value":2129}," u2\n",{"type":18,"tag":288,"props":2131,"children":2132},{"class":290,"line":1023},[2133],{"type":18,"tag":288,"props":2134,"children":2135},{},[2136],{"type":24,"value":323},{"type":18,"tag":288,"props":2138,"children":2139},{"class":290,"line":1114},[2140,2145,2149],{"type":18,"tag":288,"props":2141,"children":2142},{"class":301},[2143],{"type":24,"value":2144},"rhs ",{"type":18,"tag":288,"props":2146,"children":2147},{"class":295},[2148],{"type":24,"value":347},{"type":18,"tag":288,"props":2150,"children":2151},{"class":301},[2152],{"type":24,"value":2153}," ca.vertcat(vx, vy, vyaw)\n",{"type":18,"tag":288,"props":2155,"children":2156},{"class":290,"line":1122},[2157],{"type":18,"tag":288,"props":2158,"children":2159},{"class":330},[2160],{"type":24,"value":2161},"## Define mapped nonlinear function f(x,u) -> rhs\n",{"type":18,"tag":288,"props":2163,"children":2164},{"class":290,"line":1136},[2165,2169,2173,2178,2183],{"type":18,"tag":288,"props":2166,"children":2167},{"class":301},[2168],{"type":24,"value":560},{"type":18,"tag":288,"props":2170,"children":2171},{"class":295},[2172],{"type":24,"value":347},{"type":18,"tag":288,"props":2174,"children":2175},{"class":301},[2176],{"type":24,"value":2177}," ca.Function(",{"type":18,"tag":288,"props":2179,"children":2180},{"class":1710},[2181],{"type":24,"value":2182},"'f'",{"type":18,"tag":288,"props":2184,"children":2185},{"class":301},[2186],{"type":24,"value":2187},", [states, controls], [rhs])",{"type":18,"tag":27,"props":2189,"children":2190},{},[2191],{"type":24,"value":2192},"Declare symbolic matrix",{"type":18,"tag":273,"props":2194,"children":2197},{"className":2195,"code":2196,"language":278,"meta":8},[276],"X = ca.SX.sym('X', num_states, prediction_horizons + 1)\nX_ref = ca.SX.sym('X_ref', num_states, prediction_horizons + 1)\nU = ca.SX.sym('U', num_controls, prediction_horizons)\nU_ref = ca.SX.sym('U_ref', num_controls, prediction_horizons)\n",[2198],{"type":18,"tag":281,"props":2199,"children":2200},{},[2201],{"type":18,"tag":273,"props":2202,"children":2203},{"__ignoreMap":8},[2204,2254,2303,2337],{"type":18,"tag":288,"props":2205,"children":2206},{"class":290,"line":291},[2207,2212,2216,2220,2224,2228,2233,2238,2242,2246,2250],{"type":18,"tag":288,"props":2208,"children":2209},{"class":301},[2210],{"type":24,"value":2211},"X ",{"type":18,"tag":288,"props":2213,"children":2214},{"class":295},[2215],{"type":24,"value":347},{"type":18,"tag":288,"props":2217,"children":2218},{"class":301},[2219],{"type":24,"value":1697},{"type":18,"tag":288,"props":2221,"children":2222},{"class":355},[2223],{"type":24,"value":1702},{"type":18,"tag":288,"props":2225,"children":2226},{"class":301},[2227],{"type":24,"value":1707},{"type":18,"tag":288,"props":2229,"children":2230},{"class":1710},[2231],{"type":24,"value":2232},"'X'",{"type":18,"tag":288,"props":2234,"children":2235},{"class":301},[2236],{"type":24,"value":2237},", num_states, prediction_horizons ",{"type":18,"tag":288,"props":2239,"children":2240},{"class":295},[2241],{"type":24,"value":759},{"type":18,"tag":288,"props":2243,"children":2244},{"class":301},[2245],{"type":24,"value":352},{"type":18,"tag":288,"props":2247,"children":2248},{"class":355},[2249],{"type":24,"value":663},{"type":18,"tag":288,"props":2251,"children":2252},{"class":301},[2253],{"type":24,"value":1718},{"type":18,"tag":288,"props":2255,"children":2256},{"class":290,"line":317},[2257,2262,2266,2270,2274,2278,2283,2287,2291,2295,2299],{"type":18,"tag":288,"props":2258,"children":2259},{"class":301},[2260],{"type":24,"value":2261},"X_ref ",{"type":18,"tag":288,"props":2263,"children":2264},{"class":295},[2265],{"type":24,"value":347},{"type":18,"tag":288,"props":2267,"children":2268},{"class":301},[2269],{"type":24,"value":1697},{"type":18,"tag":288,"props":2271,"children":2272},{"class":355},[2273],{"type":24,"value":1702},{"type":18,"tag":288,"props":2275,"children":2276},{"class":301},[2277],{"type":24,"value":1707},{"type":18,"tag":288,"props":2279,"children":2280},{"class":1710},[2281],{"type":24,"value":2282},"'X_ref'",{"type":18,"tag":288,"props":2284,"children":2285},{"class":301},[2286],{"type":24,"value":2237},{"type":18,"tag":288,"props":2288,"children":2289},{"class":295},[2290],{"type":24,"value":759},{"type":18,"tag":288,"props":2292,"children":2293},{"class":301},[2294],{"type":24,"value":352},{"type":18,"tag":288,"props":2296,"children":2297},{"class":355},[2298],{"type":24,"value":663},{"type":18,"tag":288,"props":2300,"children":2301},{"class":301},[2302],{"type":24,"value":1718},{"type":18,"tag":288,"props":2304,"children":2305},{"class":290,"line":326},[2306,2311,2315,2319,2323,2327,2332],{"type":18,"tag":288,"props":2307,"children":2308},{"class":301},[2309],{"type":24,"value":2310},"U ",{"type":18,"tag":288,"props":2312,"children":2313},{"class":295},[2314],{"type":24,"value":347},{"type":18,"tag":288,"props":2316,"children":2317},{"class":301},[2318],{"type":24,"value":1697},{"type":18,"tag":288,"props":2320,"children":2321},{"class":355},[2322],{"type":24,"value":1702},{"type":18,"tag":288,"props":2324,"children":2325},{"class":301},[2326],{"type":24,"value":1707},{"type":18,"tag":288,"props":2328,"children":2329},{"class":1710},[2330],{"type":24,"value":2331},"'U'",{"type":18,"tag":288,"props":2333,"children":2334},{"class":301},[2335],{"type":24,"value":2336},", num_controls, prediction_horizons)\n",{"type":18,"tag":288,"props":2338,"children":2339},{"class":290,"line":336},[2340,2345,2349,2353,2357,2361,2366],{"type":18,"tag":288,"props":2341,"children":2342},{"class":301},[2343],{"type":24,"value":2344},"U_ref ",{"type":18,"tag":288,"props":2346,"children":2347},{"class":295},[2348],{"type":24,"value":347},{"type":18,"tag":288,"props":2350,"children":2351},{"class":301},[2352],{"type":24,"value":1697},{"type":18,"tag":288,"props":2354,"children":2355},{"class":355},[2356],{"type":24,"value":1702},{"type":18,"tag":288,"props":2358,"children":2359},{"class":301},[2360],{"type":24,"value":1707},{"type":18,"tag":288,"props":2362,"children":2363},{"class":1710},[2364],{"type":24,"value":2365},"'U_ref'",{"type":18,"tag":288,"props":2367,"children":2368},{"class":301},[2369],{"type":24,"value":2370},", num_controls, prediction_horizons)",{"type":18,"tag":27,"props":2372,"children":2373},{},[2374,2376,2380],{"type":24,"value":2375},"Define nonlinear programming and options for ",{"type":18,"tag":1611,"props":2377,"children":2378},{},[2379],{"type":24,"value":1615},{"type":24,"value":2381},"\nnlp_prob = {\n'f': cost_fn,\n'x': opt_var,\n'p': opt_dec,\n'g': g\n}",{"type":18,"tag":27,"props":2383,"children":2384},{},[2385],{"type":24,"value":2386},"nlp_opts = {\n'ipopt.max_iter': 5000,\n'ipopt.print_level': 0,\n'ipopt.acceptable_tol': 1e-6,\n'ipopt.acceptable_obj_change_tol': 1e-4,\n'print_time': 0\n}",{"type":18,"tag":27,"props":2388,"children":2389},{},[2390],{"type":24,"value":2391},"Determine boundary and constraint for our optimizer",{"type":18,"tag":273,"props":2393,"children":2396},{"className":2394,"code":2395,"language":278,"meta":8},[276],"lbx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\nubx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\n\nlbx[0: num_states * (prediction_horizons + 1): num_states] = x_min\nlbx[1: num_states * (prediction_horizons + 1): num_states] = y_min\nlbx[2: num_states * (prediction_horizons + 1): num_states] = theta_min\n\nubx[0: num_states * (prediction_horizons + 1): num_states] = x_max\nubx[1: num_states * (prediction_horizons + 1): num_states] = y_max\nubx[2: num_states * (prediction_horizons + 1): num_states] = theta_max\n\nlbx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\nlbx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\n\nubx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\nubx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\n\nargs = {\n    'lbg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'ubg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'lbx': lbx,\n    'ubx': ubx\n}\n",[2397],{"type":18,"tag":281,"props":2398,"children":2399},{},[2400],{"type":18,"tag":273,"props":2401,"children":2402},{"__ignoreMap":8},[2403,2481,2553,2560,2611,2659,2707,2714,2763,2811,2859,2866,2949,3044,3051,3132,3227,3234,3251,3310,3366,3383,3400],{"type":18,"tag":288,"props":2404,"children":2405},{"class":290,"line":291},[2406,2411,2415,2419,2424,2429,2433,2438,2442,2446,2450,2454,2458,2463,2467,2472,2476],{"type":18,"tag":288,"props":2407,"children":2408},{"class":301},[2409],{"type":24,"value":2410},"lbx ",{"type":18,"tag":288,"props":2412,"children":2413},{"class":295},[2414],{"type":24,"value":347},{"type":18,"tag":288,"props":2416,"children":2417},{"class":301},[2418],{"type":24,"value":1697},{"type":18,"tag":288,"props":2420,"children":2421},{"class":355},[2422],{"type":24,"value":2423},"DM",{"type":18,"tag":288,"props":2425,"children":2426},{"class":301},[2427],{"type":24,"value":2428},".zeros((num_states ",{"type":18,"tag":288,"props":2430,"children":2431},{"class":295},[2432],{"type":24,"value":602},{"type":18,"tag":288,"props":2434,"children":2435},{"class":301},[2436],{"type":24,"value":2437}," (prediction_horizons ",{"type":18,"tag":288,"props":2439,"children":2440},{"class":295},[2441],{"type":24,"value":759},{"type":18,"tag":288,"props":2443,"children":2444},{"class":301},[2445],{"type":24,"value":352},{"type":18,"tag":288,"props":2447,"children":2448},{"class":355},[2449],{"type":24,"value":663},{"type":18,"tag":288,"props":2451,"children":2452},{"class":301},[2453],{"type":24,"value":782},{"type":18,"tag":288,"props":2455,"children":2456},{"class":295},[2457],{"type":24,"value":759},{"type":18,"tag":288,"props":2459,"children":2460},{"class":301},[2461],{"type":24,"value":2462}," num_controls ",{"type":18,"tag":288,"props":2464,"children":2465},{"class":295},[2466],{"type":24,"value":602},{"type":18,"tag":288,"props":2468,"children":2469},{"class":301},[2470],{"type":24,"value":2471}," prediction_horizons, ",{"type":18,"tag":288,"props":2473,"children":2474},{"class":355},[2475],{"type":24,"value":663},{"type":18,"tag":288,"props":2477,"children":2478},{"class":301},[2479],{"type":24,"value":2480},"))\n",{"type":18,"tag":288,"props":2482,"children":2483},{"class":290,"line":317},[2484,2489,2493,2497,2501,2505,2509,2513,2517,2521,2525,2529,2533,2537,2541,2545,2549],{"type":18,"tag":288,"props":2485,"children":2486},{"class":301},[2487],{"type":24,"value":2488},"ubx ",{"type":18,"tag":288,"props":2490,"children":2491},{"class":295},[2492],{"type":24,"value":347},{"type":18,"tag":288,"props":2494,"children":2495},{"class":301},[2496],{"type":24,"value":1697},{"type":18,"tag":288,"props":2498,"children":2499},{"class":355},[2500],{"type":24,"value":2423},{"type":18,"tag":288,"props":2502,"children":2503},{"class":301},[2504],{"type":24,"value":2428},{"type":18,"tag":288,"props":2506,"children":2507},{"class":295},[2508],{"type":24,"value":602},{"type":18,"tag":288,"props":2510,"children":2511},{"class":301},[2512],{"type":24,"value":2437},{"type":18,"tag":288,"props":2514,"children":2515},{"class":295},[2516],{"type":24,"value":759},{"type":18,"tag":288,"props":2518,"children":2519},{"class":301},[2520],{"type":24,"value":352},{"type":18,"tag":288,"props":2522,"children":2523},{"class":355},[2524],{"type":24,"value":663},{"type":18,"tag":288,"props":2526,"children":2527},{"class":301},[2528],{"type":24,"value":782},{"type":18,"tag":288,"props":2530,"children":2531},{"class":295},[2532],{"type":24,"value":759},{"type":18,"tag":288,"props":2534,"children":2535},{"class":301},[2536],{"type":24,"value":2462},{"type":18,"tag":288,"props":2538,"children":2539},{"class":295},[2540],{"type":24,"value":602},{"type":18,"tag":288,"props":2542,"children":2543},{"class":301},[2544],{"type":24,"value":2471},{"type":18,"tag":288,"props":2546,"children":2547},{"class":355},[2548],{"type":24,"value":663},{"type":18,"tag":288,"props":2550,"children":2551},{"class":301},[2552],{"type":24,"value":2480},{"type":18,"tag":288,"props":2554,"children":2555},{"class":290,"line":326},[2556],{"type":18,"tag":288,"props":2557,"children":2558},{},[2559],{"type":24,"value":323},{"type":18,"tag":288,"props":2561,"children":2562},{"class":290,"line":336},[2563,2568,2572,2577,2581,2585,2589,2593,2597,2602,2606],{"type":18,"tag":288,"props":2564,"children":2565},{"class":301},[2566],{"type":24,"value":2567},"lbx[",{"type":18,"tag":288,"props":2569,"children":2570},{"class":355},[2571],{"type":24,"value":592},{"type":18,"tag":288,"props":2573,"children":2574},{"class":301},[2575],{"type":24,"value":2576},": num_states ",{"type":18,"tag":288,"props":2578,"children":2579},{"class":295},[2580],{"type":24,"value":602},{"type":18,"tag":288,"props":2582,"children":2583},{"class":301},[2584],{"type":24,"value":2437},{"type":18,"tag":288,"props":2586,"children":2587},{"class":295},[2588],{"type":24,"value":759},{"type":18,"tag":288,"props":2590,"children":2591},{"class":301},[2592],{"type":24,"value":352},{"type":18,"tag":288,"props":2594,"children":2595},{"class":355},[2596],{"type":24,"value":663},{"type":18,"tag":288,"props":2598,"children":2599},{"class":301},[2600],{"type":24,"value":2601},"): num_states] ",{"type":18,"tag":288,"props":2603,"children":2604},{"class":295},[2605],{"type":24,"value":347},{"type":18,"tag":288,"props":2607,"children":2608},{"class":301},[2609],{"type":24,"value":2610}," x_min\n",{"type":18,"tag":288,"props":2612,"children":2613},{"class":290,"line":361},[2614,2618,2622,2626,2630,2634,2638,2642,2646,2650,2654],{"type":18,"tag":288,"props":2615,"children":2616},{"class":301},[2617],{"type":24,"value":2567},{"type":18,"tag":288,"props":2619,"children":2620},{"class":355},[2621],{"type":24,"value":663},{"type":18,"tag":288,"props":2623,"children":2624},{"class":301},[2625],{"type":24,"value":2576},{"type":18,"tag":288,"props":2627,"children":2628},{"class":295},[2629],{"type":24,"value":602},{"type":18,"tag":288,"props":2631,"children":2632},{"class":301},[2633],{"type":24,"value":2437},{"type":18,"tag":288,"props":2635,"children":2636},{"class":295},[2637],{"type":24,"value":759},{"type":18,"tag":288,"props":2639,"children":2640},{"class":301},[2641],{"type":24,"value":352},{"type":18,"tag":288,"props":2643,"children":2644},{"class":355},[2645],{"type":24,"value":663},{"type":18,"tag":288,"props":2647,"children":2648},{"class":301},[2649],{"type":24,"value":2601},{"type":18,"tag":288,"props":2651,"children":2652},{"class":295},[2653],{"type":24,"value":347},{"type":18,"tag":288,"props":2655,"children":2656},{"class":301},[2657],{"type":24,"value":2658}," y_min\n",{"type":18,"tag":288,"props":2660,"children":2661},{"class":290,"line":370},[2662,2666,2670,2674,2678,2682,2686,2690,2694,2698,2702],{"type":18,"tag":288,"props":2663,"children":2664},{"class":301},[2665],{"type":24,"value":2567},{"type":18,"tag":288,"props":2667,"children":2668},{"class":355},[2669],{"type":24,"value":612},{"type":18,"tag":288,"props":2671,"children":2672},{"class":301},[2673],{"type":24,"value":2576},{"type":18,"tag":288,"props":2675,"children":2676},{"class":295},[2677],{"type":24,"value":602},{"type":18,"tag":288,"props":2679,"children":2680},{"class":301},[2681],{"type":24,"value":2437},{"type":18,"tag":288,"props":2683,"children":2684},{"class":295},[2685],{"type":24,"value":759},{"type":18,"tag":288,"props":2687,"children":2688},{"class":301},[2689],{"type":24,"value":352},{"type":18,"tag":288,"props":2691,"children":2692},{"class":355},[2693],{"type":24,"value":663},{"type":18,"tag":288,"props":2695,"children":2696},{"class":301},[2697],{"type":24,"value":2601},{"type":18,"tag":288,"props":2699,"children":2700},{"class":295},[2701],{"type":24,"value":347},{"type":18,"tag":288,"props":2703,"children":2704},{"class":301},[2705],{"type":24,"value":2706}," theta_min\n",{"type":18,"tag":288,"props":2708,"children":2709},{"class":290,"line":392},[2710],{"type":18,"tag":288,"props":2711,"children":2712},{},[2713],{"type":24,"value":323},{"type":18,"tag":288,"props":2715,"children":2716},{"class":290,"line":401},[2717,2722,2726,2730,2734,2738,2742,2746,2750,2754,2758],{"type":18,"tag":288,"props":2718,"children":2719},{"class":301},[2720],{"type":24,"value":2721},"ubx[",{"type":18,"tag":288,"props":2723,"children":2724},{"class":355},[2725],{"type":24,"value":592},{"type":18,"tag":288,"props":2727,"children":2728},{"class":301},[2729],{"type":24,"value":2576},{"type":18,"tag":288,"props":2731,"children":2732},{"class":295},[2733],{"type":24,"value":602},{"type":18,"tag":288,"props":2735,"children":2736},{"class":301},[2737],{"type":24,"value":2437},{"type":18,"tag":288,"props":2739,"children":2740},{"class":295},[2741],{"type":24,"value":759},{"type":18,"tag":288,"props":2743,"children":2744},{"class":301},[2745],{"type":24,"value":352},{"type":18,"tag":288,"props":2747,"children":2748},{"class":355},[2749],{"type":24,"value":663},{"type":18,"tag":288,"props":2751,"children":2752},{"class":301},[2753],{"type":24,"value":2601},{"type":18,"tag":288,"props":2755,"children":2756},{"class":295},[2757],{"type":24,"value":347},{"type":18,"tag":288,"props":2759,"children":2760},{"class":301},[2761],{"type":24,"value":2762}," x_max\n",{"type":18,"tag":288,"props":2764,"children":2765},{"class":290,"line":423},[2766,2770,2774,2778,2782,2786,2790,2794,2798,2802,2806],{"type":18,"tag":288,"props":2767,"children":2768},{"class":301},[2769],{"type":24,"value":2721},{"type":18,"tag":288,"props":2771,"children":2772},{"class":355},[2773],{"type":24,"value":663},{"type":18,"tag":288,"props":2775,"children":2776},{"class":301},[2777],{"type":24,"value":2576},{"type":18,"tag":288,"props":2779,"children":2780},{"class":295},[2781],{"type":24,"value":602},{"type":18,"tag":288,"props":2783,"children":2784},{"class":301},[2785],{"type":24,"value":2437},{"type":18,"tag":288,"props":2787,"children":2788},{"class":295},[2789],{"type":24,"value":759},{"type":18,"tag":288,"props":2791,"children":2792},{"class":301},[2793],{"type":24,"value":352},{"type":18,"tag":288,"props":2795,"children":2796},{"class":355},[2797],{"type":24,"value":663},{"type":18,"tag":288,"props":2799,"children":2800},{"class":301},[2801],{"type":24,"value":2601},{"type":18,"tag":288,"props":2803,"children":2804},{"class":295},[2805],{"type":24,"value":347},{"type":18,"tag":288,"props":2807,"children":2808},{"class":301},[2809],{"type":24,"value":2810}," y_max\n",{"type":18,"tag":288,"props":2812,"children":2813},{"class":290,"line":444},[2814,2818,2822,2826,2830,2834,2838,2842,2846,2850,2854],{"type":18,"tag":288,"props":2815,"children":2816},{"class":301},[2817],{"type":24,"value":2721},{"type":18,"tag":288,"props":2819,"children":2820},{"class":355},[2821],{"type":24,"value":612},{"type":18,"tag":288,"props":2823,"children":2824},{"class":301},[2825],{"type":24,"value":2576},{"type":18,"tag":288,"props":2827,"children":2828},{"class":295},[2829],{"type":24,"value":602},{"type":18,"tag":288,"props":2831,"children":2832},{"class":301},[2833],{"type":24,"value":2437},{"type":18,"tag":288,"props":2835,"children":2836},{"class":295},[2837],{"type":24,"value":759},{"type":18,"tag":288,"props":2839,"children":2840},{"class":301},[2841],{"type":24,"value":352},{"type":18,"tag":288,"props":2843,"children":2844},{"class":355},[2845],{"type":24,"value":663},{"type":18,"tag":288,"props":2847,"children":2848},{"class":301},[2849],{"type":24,"value":2601},{"type":18,"tag":288,"props":2851,"children":2852},{"class":295},[2853],{"type":24,"value":347},{"type":18,"tag":288,"props":2855,"children":2856},{"class":301},[2857],{"type":24,"value":2858}," theta_max\n",{"type":18,"tag":288,"props":2860,"children":2861},{"class":290,"line":465},[2862],{"type":18,"tag":288,"props":2863,"children":2864},{},[2865],{"type":24,"value":323},{"type":18,"tag":288,"props":2867,"children":2868},{"class":290,"line":474},[2869,2874,2878,2882,2886,2890,2894,2899,2903,2907,2911,2915,2919,2923,2927,2931,2935,2940,2944],{"type":18,"tag":288,"props":2870,"children":2871},{"class":301},[2872],{"type":24,"value":2873},"lbx[num_states ",{"type":18,"tag":288,"props":2875,"children":2876},{"class":295},[2877],{"type":24,"value":602},{"type":18,"tag":288,"props":2879,"children":2880},{"class":301},[2881],{"type":24,"value":2437},{"type":18,"tag":288,"props":2883,"children":2884},{"class":295},[2885],{"type":24,"value":759},{"type":18,"tag":288,"props":2887,"children":2888},{"class":301},[2889],{"type":24,"value":352},{"type":18,"tag":288,"props":2891,"children":2892},{"class":355},[2893],{"type":24,"value":663},{"type":18,"tag":288,"props":2895,"children":2896},{"class":301},[2897],{"type":24,"value":2898},"): num_states ",{"type":18,"tag":288,"props":2900,"children":2901},{"class":295},[2902],{"type":24,"value":602},{"type":18,"tag":288,"props":2904,"children":2905},{"class":301},[2906],{"type":24,"value":2437},{"type":18,"tag":288,"props":2908,"children":2909},{"class":295},[2910],{"type":24,"value":759},{"type":18,"tag":288,"props":2912,"children":2913},{"class":301},[2914],{"type":24,"value":352},{"type":18,"tag":288,"props":2916,"children":2917},{"class":355},[2918],{"type":24,"value":663},{"type":18,"tag":288,"props":2920,"children":2921},{"class":301},[2922],{"type":24,"value":782},{"type":18,"tag":288,"props":2924,"children":2925},{"class":295},[2926],{"type":24,"value":759},{"type":18,"tag":288,"props":2928,"children":2929},{"class":301},[2930],{"type":24,"value":2462},{"type":18,"tag":288,"props":2932,"children":2933},{"class":295},[2934],{"type":24,"value":602},{"type":18,"tag":288,"props":2936,"children":2937},{"class":301},[2938],{"type":24,"value":2939}," prediction_horizons: num_controls] ",{"type":18,"tag":288,"props":2941,"children":2942},{"class":295},[2943],{"type":24,"value":347},{"type":18,"tag":288,"props":2945,"children":2946},{"class":301},[2947],{"type":24,"value":2948}," u_min\n",{"type":18,"tag":288,"props":2950,"children":2951},{"class":290,"line":505},[2952,2956,2960,2964,2968,2972,2976,2980,2984,2988,2992,2996,3000,3004,3008,3012,3016,3020,3024,3028,3032,3036,3040],{"type":18,"tag":288,"props":2953,"children":2954},{"class":301},[2955],{"type":24,"value":2873},{"type":18,"tag":288,"props":2957,"children":2958},{"class":295},[2959],{"type":24,"value":602},{"type":18,"tag":288,"props":2961,"children":2962},{"class":301},[2963],{"type":24,"value":2437},{"type":18,"tag":288,"props":2965,"children":2966},{"class":295},[2967],{"type":24,"value":759},{"type":18,"tag":288,"props":2969,"children":2970},{"class":301},[2971],{"type":24,"value":352},{"type":18,"tag":288,"props":2973,"children":2974},{"class":355},[2975],{"type":24,"value":663},{"type":18,"tag":288,"props":2977,"children":2978},{"class":301},[2979],{"type":24,"value":782},{"type":18,"tag":288,"props":2981,"children":2982},{"class":295},[2983],{"type":24,"value":759},{"type":18,"tag":288,"props":2985,"children":2986},{"class":301},[2987],{"type":24,"value":352},{"type":18,"tag":288,"props":2989,"children":2990},{"class":355},[2991],{"type":24,"value":663},{"type":18,"tag":288,"props":2993,"children":2994},{"class":301},[2995],{"type":24,"value":2576},{"type":18,"tag":288,"props":2997,"children":2998},{"class":295},[2999],{"type":24,"value":602},{"type":18,"tag":288,"props":3001,"children":3002},{"class":301},[3003],{"type":24,"value":2437},{"type":18,"tag":288,"props":3005,"children":3006},{"class":295},[3007],{"type":24,"value":759},{"type":18,"tag":288,"props":3009,"children":3010},{"class":301},[3011],{"type":24,"value":352},{"type":18,"tag":288,"props":3013,"children":3014},{"class":355},[3015],{"type":24,"value":663},{"type":18,"tag":288,"props":3017,"children":3018},{"class":301},[3019],{"type":24,"value":782},{"type":18,"tag":288,"props":3021,"children":3022},{"class":295},[3023],{"type":24,"value":759},{"type":18,"tag":288,"props":3025,"children":3026},{"class":301},[3027],{"type":24,"value":2462},{"type":18,"tag":288,"props":3029,"children":3030},{"class":295},[3031],{"type":24,"value":602},{"type":18,"tag":288,"props":3033,"children":3034},{"class":301},[3035],{"type":24,"value":2939},{"type":18,"tag":288,"props":3037,"children":3038},{"class":295},[3039],{"type":24,"value":347},{"type":18,"tag":288,"props":3041,"children":3042},{"class":301},[3043],{"type":24,"value":2948},{"type":18,"tag":288,"props":3045,"children":3046},{"class":290,"line":536},[3047],{"type":18,"tag":288,"props":3048,"children":3049},{},[3050],{"type":24,"value":323},{"type":18,"tag":288,"props":3052,"children":3053},{"class":290,"line":545},[3054,3059,3063,3067,3071,3075,3079,3083,3087,3091,3095,3099,3103,3107,3111,3115,3119,3123,3127],{"type":18,"tag":288,"props":3055,"children":3056},{"class":301},[3057],{"type":24,"value":3058},"ubx[num_states ",{"type":18,"tag":288,"props":3060,"children":3061},{"class":295},[3062],{"type":24,"value":602},{"type":18,"tag":288,"props":3064,"children":3065},{"class":301},[3066],{"type":24,"value":2437},{"type":18,"tag":288,"props":3068,"children":3069},{"class":295},[3070],{"type":24,"value":759},{"type":18,"tag":288,"props":3072,"children":3073},{"class":301},[3074],{"type":24,"value":352},{"type":18,"tag":288,"props":3076,"children":3077},{"class":355},[3078],{"type":24,"value":663},{"type":18,"tag":288,"props":3080,"children":3081},{"class":301},[3082],{"type":24,"value":2898},{"type":18,"tag":288,"props":3084,"children":3085},{"class":295},[3086],{"type":24,"value":602},{"type":18,"tag":288,"props":3088,"children":3089},{"class":301},[3090],{"type":24,"value":2437},{"type":18,"tag":288,"props":3092,"children":3093},{"class":295},[3094],{"type":24,"value":759},{"type":18,"tag":288,"props":3096,"children":3097},{"class":301},[3098],{"type":24,"value":352},{"type":18,"tag":288,"props":3100,"children":3101},{"class":355},[3102],{"type":24,"value":663},{"type":18,"tag":288,"props":3104,"children":3105},{"class":301},[3106],{"type":24,"value":782},{"type":18,"tag":288,"props":3108,"children":3109},{"class":295},[3110],{"type":24,"value":759},{"type":18,"tag":288,"props":3112,"children":3113},{"class":301},[3114],{"type":24,"value":2462},{"type":18,"tag":288,"props":3116,"children":3117},{"class":295},[3118],{"type":24,"value":602},{"type":18,"tag":288,"props":3120,"children":3121},{"class":301},[3122],{"type":24,"value":2939},{"type":18,"tag":288,"props":3124,"children":3125},{"class":295},[3126],{"type":24,"value":347},{"type":18,"tag":288,"props":3128,"children":3129},{"class":301},[3130],{"type":24,"value":3131}," u_max\n",{"type":18,"tag":288,"props":3133,"children":3134},{"class":290,"line":554},[3135,3139,3143,3147,3151,3155,3159,3163,3167,3171,3175,3179,3183,3187,3191,3195,3199,3203,3207,3211,3215,3219,3223],{"type":18,"tag":288,"props":3136,"children":3137},{"class":301},[3138],{"type":24,"value":3058},{"type":18,"tag":288,"props":3140,"children":3141},{"class":295},[3142],{"type":24,"value":602},{"type":18,"tag":288,"props":3144,"children":3145},{"class":301},[3146],{"type":24,"value":2437},{"type":18,"tag":288,"props":3148,"children":3149},{"class":295},[3150],{"type":24,"value":759},{"type":18,"tag":288,"props":3152,"children":3153},{"class":301},[3154],{"type":24,"value":352},{"type":18,"tag":288,"props":3156,"children":3157},{"class":355},[3158],{"type":24,"value":663},{"type":18,"tag":288,"props":3160,"children":3161},{"class":301},[3162],{"type":24,"value":782},{"type":18,"tag":288,"props":3164,"children":3165},{"class":295},[3166],{"type":24,"value":759},{"type":18,"tag":288,"props":3168,"children":3169},{"class":301},[3170],{"type":24,"value":352},{"type":18,"tag":288,"props":3172,"children":3173},{"class":355},[3174],{"type":24,"value":663},{"type":18,"tag":288,"props":3176,"children":3177},{"class":301},[3178],{"type":24,"value":2576},{"type":18,"tag":288,"props":3180,"children":3181},{"class":295},[3182],{"type":24,"value":602},{"type":18,"tag":288,"props":3184,"children":3185},{"class":301},[3186],{"type":24,"value":2437},{"type":18,"tag":288,"props":3188,"children":3189},{"class":295},[3190],{"type":24,"value":759},{"type":18,"tag":288,"props":3192,"children":3193},{"class":301},[3194],{"type":24,"value":352},{"type":18,"tag":288,"props":3196,"children":3197},{"class":355},[3198],{"type":24,"value":663},{"type":18,"tag":288,"props":3200,"children":3201},{"class":301},[3202],{"type":24,"value":782},{"type":18,"tag":288,"props":3204,"children":3205},{"class":295},[3206],{"type":24,"value":759},{"type":18,"tag":288,"props":3208,"children":3209},{"class":301},[3210],{"type":24,"value":2462},{"type":18,"tag":288,"props":3212,"children":3213},{"class":295},[3214],{"type":24,"value":602},{"type":18,"tag":288,"props":3216,"children":3217},{"class":301},[3218],{"type":24,"value":2939},{"type":18,"tag":288,"props":3220,"children":3221},{"class":295},[3222],{"type":24,"value":347},{"type":18,"tag":288,"props":3224,"children":3225},{"class":301},[3226],{"type":24,"value":3131},{"type":18,"tag":288,"props":3228,"children":3229},{"class":290,"line":581},[3230],{"type":18,"tag":288,"props":3231,"children":3232},{},[3233],{"type":24,"value":323},{"type":18,"tag":288,"props":3235,"children":3236},{"class":290,"line":620},[3237,3242,3246],{"type":18,"tag":288,"props":3238,"children":3239},{"class":301},[3240],{"type":24,"value":3241},"args ",{"type":18,"tag":288,"props":3243,"children":3244},{"class":295},[3245],{"type":24,"value":347},{"type":18,"tag":288,"props":3247,"children":3248},{"class":301},[3249],{"type":24,"value":3250}," {\n",{"type":18,"tag":288,"props":3252,"children":3253},{"class":290,"line":653},[3254,3258,3263,3268,3272,3276,3280,3284,3288,3292,3296,3301,3305],{"type":18,"tag":288,"props":3255,"children":3256},{"class":301},[3257],{"type":24,"value":1128},{"type":18,"tag":288,"props":3259,"children":3260},{"class":1710},[3261],{"type":24,"value":3262},"'lbg'",{"type":18,"tag":288,"props":3264,"children":3265},{"class":301},[3266],{"type":24,"value":3267},": ca.",{"type":18,"tag":288,"props":3269,"children":3270},{"class":355},[3271],{"type":24,"value":2423},{"type":18,"tag":288,"props":3273,"children":3274},{"class":301},[3275],{"type":24,"value":2428},{"type":18,"tag":288,"props":3277,"children":3278},{"class":295},[3279],{"type":24,"value":602},{"type":18,"tag":288,"props":3281,"children":3282},{"class":301},[3283],{"type":24,"value":2437},{"type":18,"tag":288,"props":3285,"children":3286},{"class":295},[3287],{"type":24,"value":759},{"type":18,"tag":288,"props":3289,"children":3290},{"class":301},[3291],{"type":24,"value":352},{"type":18,"tag":288,"props":3293,"children":3294},{"class":355},[3295],{"type":24,"value":663},{"type":18,"tag":288,"props":3297,"children":3298},{"class":301},[3299],{"type":24,"value":3300},"), ",{"type":18,"tag":288,"props":3302,"children":3303},{"class":355},[3304],{"type":24,"value":663},{"type":18,"tag":288,"props":3306,"children":3307},{"class":301},[3308],{"type":24,"value":3309},")),\n",{"type":18,"tag":288,"props":3311,"children":3312},{"class":290,"line":671},[3313,3317,3322,3326,3330,3334,3338,3342,3346,3350,3354,3358,3362],{"type":18,"tag":288,"props":3314,"children":3315},{"class":301},[3316],{"type":24,"value":1128},{"type":18,"tag":288,"props":3318,"children":3319},{"class":1710},[3320],{"type":24,"value":3321},"'ubg'",{"type":18,"tag":288,"props":3323,"children":3324},{"class":301},[3325],{"type":24,"value":3267},{"type":18,"tag":288,"props":3327,"children":3328},{"class":355},[3329],{"type":24,"value":2423},{"type":18,"tag":288,"props":3331,"children":3332},{"class":301},[3333],{"type":24,"value":2428},{"type":18,"tag":288,"props":3335,"children":3336},{"class":295},[3337],{"type":24,"value":602},{"type":18,"tag":288,"props":3339,"children":3340},{"class":301},[3341],{"type":24,"value":2437},{"type":18,"tag":288,"props":3343,"children":3344},{"class":295},[3345],{"type":24,"value":759},{"type":18,"tag":288,"props":3347,"children":3348},{"class":301},[3349],{"type":24,"value":352},{"type":18,"tag":288,"props":3351,"children":3352},{"class":355},[3353],{"type":24,"value":663},{"type":18,"tag":288,"props":3355,"children":3356},{"class":301},[3357],{"type":24,"value":3300},{"type":18,"tag":288,"props":3359,"children":3360},{"class":355},[3361],{"type":24,"value":663},{"type":18,"tag":288,"props":3363,"children":3364},{"class":301},[3365],{"type":24,"value":3309},{"type":18,"tag":288,"props":3367,"children":3368},{"class":290,"line":680},[3369,3373,3378],{"type":18,"tag":288,"props":3370,"children":3371},{"class":301},[3372],{"type":24,"value":1128},{"type":18,"tag":288,"props":3374,"children":3375},{"class":1710},[3376],{"type":24,"value":3377},"'lbx'",{"type":18,"tag":288,"props":3379,"children":3380},{"class":301},[3381],{"type":24,"value":3382},": lbx,\n",{"type":18,"tag":288,"props":3384,"children":3385},{"class":290,"line":688},[3386,3390,3395],{"type":18,"tag":288,"props":3387,"children":3388},{"class":301},[3389],{"type":24,"value":1128},{"type":18,"tag":288,"props":3391,"children":3392},{"class":1710},[3393],{"type":24,"value":3394},"'ubx'",{"type":18,"tag":288,"props":3396,"children":3397},{"class":301},[3398],{"type":24,"value":3399},": ubx\n",{"type":18,"tag":288,"props":3401,"children":3402},{"class":290,"line":721},[3403],{"type":18,"tag":288,"props":3404,"children":3405},{"class":301},[3406],{"type":24,"value":3407},"}",{"type":18,"tag":27,"props":3409,"children":3410},{},[3411],{"type":24,"value":3412},"Obtain the solution from the solver at eact iteration",{"type":18,"tag":273,"props":3414,"children":3417},{"className":3415,"code":3416,"language":278,"meta":8},[276],"sol = solver(\n            x0=args['x0'],\n            p=args['p'],\n            lbx=args['lbx'],\n            ubx=args['ubx'],\n            lbg=args['lbg'],\n            ubg=args['ubg'],\n        )\n\n        sol_x = ca.reshape(sol['x'][:num_states * (prediction_horizons + 1)], 3, prediction_horizons + 1)\n        sol_u = ca.reshape(sol['x'][num_states * (prediction_horizons + 1):], 2, prediction_horizons)\n",[3418],{"type":18,"tag":281,"props":3419,"children":3420},{},[3421],{"type":18,"tag":273,"props":3422,"children":3423},{"__ignoreMap":8},[3424,3441,3474,3502,3530,3558,3586,3614,3622,3629,3707],{"type":18,"tag":288,"props":3425,"children":3426},{"class":290,"line":291},[3427,3432,3436],{"type":18,"tag":288,"props":3428,"children":3429},{"class":301},[3430],{"type":24,"value":3431},"sol ",{"type":18,"tag":288,"props":3433,"children":3434},{"class":295},[3435],{"type":24,"value":347},{"type":18,"tag":288,"props":3437,"children":3438},{"class":301},[3439],{"type":24,"value":3440}," solver(\n",{"type":18,"tag":288,"props":3442,"children":3443},{"class":290,"line":317},[3444,3449,3455,3459,3464,3469],{"type":18,"tag":288,"props":3445,"children":3446},{"class":301},[3447],{"type":24,"value":3448},"            ",{"type":18,"tag":288,"props":3450,"children":3452},{"class":3451},"ct-657843",[3453],{"type":24,"value":3454},"x0",{"type":18,"tag":288,"props":3456,"children":3457},{"class":295},[3458],{"type":24,"value":347},{"type":18,"tag":288,"props":3460,"children":3461},{"class":301},[3462],{"type":24,"value":3463},"args[",{"type":18,"tag":288,"props":3465,"children":3466},{"class":1710},[3467],{"type":24,"value":3468},"'x0'",{"type":18,"tag":288,"props":3470,"children":3471},{"class":301},[3472],{"type":24,"value":3473},"],\n",{"type":18,"tag":288,"props":3475,"children":3476},{"class":290,"line":326},[3477,3481,3485,3489,3493,3498],{"type":18,"tag":288,"props":3478,"children":3479},{"class":301},[3480],{"type":24,"value":3448},{"type":18,"tag":288,"props":3482,"children":3483},{"class":3451},[3484],{"type":24,"value":27},{"type":18,"tag":288,"props":3486,"children":3487},{"class":295},[3488],{"type":24,"value":347},{"type":18,"tag":288,"props":3490,"children":3491},{"class":301},[3492],{"type":24,"value":3463},{"type":18,"tag":288,"props":3494,"children":3495},{"class":1710},[3496],{"type":24,"value":3497},"'p'",{"type":18,"tag":288,"props":3499,"children":3500},{"class":301},[3501],{"type":24,"value":3473},{"type":18,"tag":288,"props":3503,"children":3504},{"class":290,"line":336},[3505,3509,3514,3518,3522,3526],{"type":18,"tag":288,"props":3506,"children":3507},{"class":301},[3508],{"type":24,"value":3448},{"type":18,"tag":288,"props":3510,"children":3511},{"class":3451},[3512],{"type":24,"value":3513},"lbx",{"type":18,"tag":288,"props":3515,"children":3516},{"class":295},[3517],{"type":24,"value":347},{"type":18,"tag":288,"props":3519,"children":3520},{"class":301},[3521],{"type":24,"value":3463},{"type":18,"tag":288,"props":3523,"children":3524},{"class":1710},[3525],{"type":24,"value":3377},{"type":18,"tag":288,"props":3527,"children":3528},{"class":301},[3529],{"type":24,"value":3473},{"type":18,"tag":288,"props":3531,"children":3532},{"class":290,"line":361},[3533,3537,3542,3546,3550,3554],{"type":18,"tag":288,"props":3534,"children":3535},{"class":301},[3536],{"type":24,"value":3448},{"type":18,"tag":288,"props":3538,"children":3539},{"class":3451},[3540],{"type":24,"value":3541},"ubx",{"type":18,"tag":288,"props":3543,"children":3544},{"class":295},[3545],{"type":24,"value":347},{"type":18,"tag":288,"props":3547,"children":3548},{"class":301},[3549],{"type":24,"value":3463},{"type":18,"tag":288,"props":3551,"children":3552},{"class":1710},[3553],{"type":24,"value":3394},{"type":18,"tag":288,"props":3555,"children":3556},{"class":301},[3557],{"type":24,"value":3473},{"type":18,"tag":288,"props":3559,"children":3560},{"class":290,"line":370},[3561,3565,3570,3574,3578,3582],{"type":18,"tag":288,"props":3562,"children":3563},{"class":301},[3564],{"type":24,"value":3448},{"type":18,"tag":288,"props":3566,"children":3567},{"class":3451},[3568],{"type":24,"value":3569},"lbg",{"type":18,"tag":288,"props":3571,"children":3572},{"class":295},[3573],{"type":24,"value":347},{"type":18,"tag":288,"props":3575,"children":3576},{"class":301},[3577],{"type":24,"value":3463},{"type":18,"tag":288,"props":3579,"children":3580},{"class":1710},[3581],{"type":24,"value":3262},{"type":18,"tag":288,"props":3583,"children":3584},{"class":301},[3585],{"type":24,"value":3473},{"type":18,"tag":288,"props":3587,"children":3588},{"class":290,"line":392},[3589,3593,3598,3602,3606,3610],{"type":18,"tag":288,"props":3590,"children":3591},{"class":301},[3592],{"type":24,"value":3448},{"type":18,"tag":288,"props":3594,"children":3595},{"class":3451},[3596],{"type":24,"value":3597},"ubg",{"type":18,"tag":288,"props":3599,"children":3600},{"class":295},[3601],{"type":24,"value":347},{"type":18,"tag":288,"props":3603,"children":3604},{"class":301},[3605],{"type":24,"value":3463},{"type":18,"tag":288,"props":3607,"children":3608},{"class":1710},[3609],{"type":24,"value":3321},{"type":18,"tag":288,"props":3611,"children":3612},{"class":301},[3613],{"type":24,"value":3473},{"type":18,"tag":288,"props":3615,"children":3616},{"class":290,"line":401},[3617],{"type":18,"tag":288,"props":3618,"children":3619},{"class":301},[3620],{"type":24,"value":3621},"        )\n",{"type":18,"tag":288,"props":3623,"children":3624},{"class":290,"line":423},[3625],{"type":18,"tag":288,"props":3626,"children":3627},{},[3628],{"type":24,"value":323},{"type":18,"tag":288,"props":3630,"children":3631},{"class":290,"line":444},[3632,3637,3641,3646,3651,3656,3660,3664,3668,3672,3676,3681,3686,3691,3695,3699,3703],{"type":18,"tag":288,"props":3633,"children":3634},{"class":301},[3635],{"type":24,"value":3636},"        sol_x ",{"type":18,"tag":288,"props":3638,"children":3639},{"class":295},[3640],{"type":24,"value":347},{"type":18,"tag":288,"props":3642,"children":3643},{"class":301},[3644],{"type":24,"value":3645}," ca.reshape(sol[",{"type":18,"tag":288,"props":3647,"children":3648},{"class":1710},[3649],{"type":24,"value":3650},"'x'",{"type":18,"tag":288,"props":3652,"children":3653},{"class":301},[3654],{"type":24,"value":3655},"][:num_states ",{"type":18,"tag":288,"props":3657,"children":3658},{"class":295},[3659],{"type":24,"value":602},{"type":18,"tag":288,"props":3661,"children":3662},{"class":301},[3663],{"type":24,"value":2437},{"type":18,"tag":288,"props":3665,"children":3666},{"class":295},[3667],{"type":24,"value":759},{"type":18,"tag":288,"props":3669,"children":3670},{"class":301},[3671],{"type":24,"value":352},{"type":18,"tag":288,"props":3673,"children":3674},{"class":355},[3675],{"type":24,"value":663},{"type":18,"tag":288,"props":3677,"children":3678},{"class":301},[3679],{"type":24,"value":3680},")], ",{"type":18,"tag":288,"props":3682,"children":3683},{"class":355},[3684],{"type":24,"value":3685},"3",{"type":18,"tag":288,"props":3687,"children":3688},{"class":301},[3689],{"type":24,"value":3690},", prediction_horizons ",{"type":18,"tag":288,"props":3692,"children":3693},{"class":295},[3694],{"type":24,"value":759},{"type":18,"tag":288,"props":3696,"children":3697},{"class":301},[3698],{"type":24,"value":352},{"type":18,"tag":288,"props":3700,"children":3701},{"class":355},[3702],{"type":24,"value":663},{"type":18,"tag":288,"props":3704,"children":3705},{"class":301},[3706],{"type":24,"value":1718},{"type":18,"tag":288,"props":3708,"children":3709},{"class":290,"line":465},[3710,3715,3719,3723,3727,3732,3736,3740,3744,3748,3752,3757,3761],{"type":18,"tag":288,"props":3711,"children":3712},{"class":301},[3713],{"type":24,"value":3714},"        sol_u ",{"type":18,"tag":288,"props":3716,"children":3717},{"class":295},[3718],{"type":24,"value":347},{"type":18,"tag":288,"props":3720,"children":3721},{"class":301},[3722],{"type":24,"value":3645},{"type":18,"tag":288,"props":3724,"children":3725},{"class":1710},[3726],{"type":24,"value":3650},{"type":18,"tag":288,"props":3728,"children":3729},{"class":301},[3730],{"type":24,"value":3731},"][num_states ",{"type":18,"tag":288,"props":3733,"children":3734},{"class":295},[3735],{"type":24,"value":602},{"type":18,"tag":288,"props":3737,"children":3738},{"class":301},[3739],{"type":24,"value":2437},{"type":18,"tag":288,"props":3741,"children":3742},{"class":295},[3743],{"type":24,"value":759},{"type":18,"tag":288,"props":3745,"children":3746},{"class":301},[3747],{"type":24,"value":352},{"type":18,"tag":288,"props":3749,"children":3750},{"class":355},[3751],{"type":24,"value":663},{"type":18,"tag":288,"props":3753,"children":3754},{"class":301},[3755],{"type":24,"value":3756},"):], ",{"type":18,"tag":288,"props":3758,"children":3759},{"class":355},[3760],{"type":24,"value":612},{"type":18,"tag":288,"props":3762,"children":3763},{"class":301},[3764],{"type":24,"value":3765},", prediction_horizons)",{"type":18,"tag":19,"props":3767,"children":3769},{"id":3768},"result",[3770],{"type":24,"value":3771},"Result",{"type":18,"tag":3773,"props":3774,"children":3779},"figure",{"className":3775},[3776,3777,3778],"mb-4","inline-block","max-w-sm",[3780,3782],{"type":24,"value":3781},"\n  ",{"type":18,"tag":43,"props":3783,"children":3786},{"className":3784,"src":3785,"width":47,"height":48},[46],"/topics/robotics/nmpc/diff_mpc.png",[],{"type":18,"tag":56,"props":3788,"children":3790},{"className":3789},[59,60,61,62],[3791],{"type":24,"value":3792},"\n    Plot of differential drive robot follow the circle trajectory !!!.\n",{"type":18,"tag":19,"props":3794,"children":3796},{"id":3795},"in-conclusion",[3797],{"type":24,"value":3798},"In conclusion",{"type":18,"tag":27,"props":3800,"children":3801},{},[3802],{"type":24,"value":3803},"In my opinion, I think MPC is suitable for the control system, since it can provide the significant control input that was predicted over the finite future of time. This can ensure the safety of the system and also can provide a quick look or reaction to the control action of the system too.",{"type":18,"tag":19,"props":3805,"children":3807},{"id":3806},"reference",[3808],{"type":24,"value":3809},"Reference",{"type":18,"tag":3811,"props":3812,"children":3813},"ol",{},[3814,3827],{"type":18,"tag":117,"props":3815,"children":3816},{},[3817,3819],{"type":24,"value":3818},"MPC-and-MHE-implementation-in-MATLAB-using-Casadi: ",{"type":18,"tag":3820,"props":3821,"children":3825},"a",{"href":3822,"rel":3823},"https://github.com/MMehrez/MPC-and-MHE-implementation-in-MATLAB-using-Casadi",[3824],"nofollow",[3826],{"type":24,"value":3822},{"type":18,"tag":117,"props":3828,"children":3829},{},[3830,3832],{"type":24,"value":3831},"CasAdi: ",{"type":18,"tag":3820,"props":3833,"children":3836},{"href":3834,"rel":3835},"https://web.casadi.org",[3824],[3837],{"type":24,"value":3834},{"type":18,"tag":3839,"children":3840},"style",[3841],{"type":24,"value":3842},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-326375{color:#6A737D;}\n.ct-533739{color:#79B8FF;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":317,"depth":317,"links":3844},[3845,3846,3847,3848,3849,3850,3851,3852,3853],{"id":21,"depth":317,"text":25},{"id":68,"depth":317,"text":71},{"id":219,"depth":317,"text":222},{"id":1518,"depth":317,"text":1521},{"id":1561,"depth":317,"text":1564},{"id":1601,"depth":317,"text":1604},{"id":3768,"depth":317,"text":3771},{"id":3795,"depth":317,"text":3798},{"id":3806,"depth":317,"text":3809},"markdown","content:topics:robotics:nonlinear-mpc.md","content","topics/robotics/nonlinear-mpc.md","md",{"_path":3860,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":3861,"description":3862,"author":3863,"slug":3864,"tag":3864,"img":3865,"body":3866,"_type":3854,"_id":5785,"_source":3856,"_file":5786,"_extension":3858},"/topics/robotics/pid-controller","Introduction to PID Controller in Python","PID Control is a feedback control","DIN SOKHENG","pid","/topics/robotics/nmpc/PID.png",{"type":15,"children":3867,"toc":5771},[3868,3874,3885,3891,3896,3902,3906,3945,3954,3960,3966,3976,3982,3987,4021,4027,4032,4037,4047,4053,4058,4062,4067,4071,4076,4489,4506,5054,5059,5065,5072,5090,5176,5181,5243,5248,5332,5344,5633,5639,5658,5672,5676,5686,5692,5702,5708,5713,5718,5724,5767],{"type":18,"tag":19,"props":3869,"children":3871},{"id":3870},"what-is-pid-controller",[3872],{"type":24,"value":3873},"What is PID Controller ?",{"type":18,"tag":27,"props":3875,"children":3876},{},[3877,3879,3883],{"type":24,"value":3878},"The Proportional Integral Derivative (PID) controller is a traditional method in control systems that has found widespread use in control system engineering and industrial applications since its emergence in the 1940s. A PID controller is considered a feedback controller, aiming to minimize the error between the system's feedback and the desired setpoint by manually or automatically fine-tuning the coefficients ",{"type":18,"tag":92,"props":3880,"children":3882},{"latex-express":3881,"styles":123},"K_{P}, K_{I}, K_{D}",[],{"type":24,"value":3884},".",{"type":18,"tag":19,"props":3886,"children":3888},{"id":3887},"how-it-works",[3889],{"type":24,"value":3890},"How it works ?",{"type":18,"tag":27,"props":3892,"children":3893},{},[3894],{"type":24,"value":3895},"Imagine you want to control the speed of a DC motor to reach 300 RPM, but due to the natural response of the DC motor, it cannot reach the desired angular speed. PID offers a solution to this natural response by adjusting the system's time response using its three components, as shown in the formula below.",{"type":18,"tag":19,"props":3897,"children":3899},{"id":3898},"formulation",[3900],{"type":24,"value":3901},"Formulation",{"type":18,"tag":92,"props":3903,"children":3905},{"latex-express":3904,"styles":59},"u(t) = K_{p}e(t) + K_{I} \\int_{0}^{t} e(t) dt + K_{D} \\frac{d e(t)}{dt} ",[],{"type":18,"tag":113,"props":3907,"children":3908},{},[3909,3918,3927,3936],{"type":18,"tag":117,"props":3910,"children":3911},{},[3912,3916],{"type":18,"tag":92,"props":3913,"children":3915},{"latex-express":3914,"styles":123},"K_{P}",[],{"type":24,"value":3917}," represents the proportional gain.",{"type":18,"tag":117,"props":3919,"children":3920},{},[3921,3925],{"type":18,"tag":92,"props":3922,"children":3924},{"latex-express":3923,"styles":123},"K_{I}",[],{"type":24,"value":3926}," represents the integral gain.",{"type":18,"tag":117,"props":3928,"children":3929},{},[3930,3934],{"type":18,"tag":92,"props":3931,"children":3933},{"latex-express":3932,"styles":123},"K_{D}",[],{"type":24,"value":3935}," represents the derivative gain.",{"type":18,"tag":117,"props":3937,"children":3938},{},[3939,3943],{"type":18,"tag":92,"props":3940,"children":3942},{"latex-express":3941,"styles":123},"e(t)=target-feedback",[],{"type":24,"value":3944}," is the error between target point and feedback of the system",{"type":18,"tag":3773,"props":3946,"children":3948},{"className":3947},[3776,3777,3778],[3949,3950],{"type":24,"value":3781},{"type":18,"tag":43,"props":3951,"children":3953},{"className":3952,"src":3865},[46],[],{"type":18,"tag":56,"props":3955,"children":3957},{"className":3956},[59,60,61,62],[3958],{"type":24,"value":3959},"\n    The Block diagram of PID Controller\n",{"type":18,"tag":19,"props":3961,"children":3963},{"id":3962},"response-time",[3964],{"type":24,"value":3965},"Response Time",{"type":18,"tag":3773,"props":3967,"children":3969},{"className":3968},[3776,3777,3778],[3970,3971],{"type":24,"value":3781},{"type":18,"tag":43,"props":3972,"children":3975},{"className":3973,"src":3974},[46],"/topics/robotics/nmpc/response_timepid.png",[],{"type":18,"tag":56,"props":3977,"children":3979},{"className":3978},[59,60,61,62],[3980],{"type":24,"value":3981},"\n    The response time of the system with each K_P, K_I, K_D\n",{"type":18,"tag":27,"props":3983,"children":3984},{},[3985],{"type":24,"value":3986},"As you can see in the figure above, the response time of the system is difference.",{"type":18,"tag":113,"props":3988,"children":3989},{},[3990,4001,4011],{"type":18,"tag":117,"props":3991,"children":3992},{},[3993,3995,3999],{"type":24,"value":3994},"The response time with ",{"type":18,"tag":92,"props":3996,"children":3998},{"latex-express":3997,"styles":123},"K_{I}=2",[],{"type":24,"value":4000}," the system is likely to overshoot before reaching the steady-state, which may not be suitable for applications like controlling a DC motor.",{"type":18,"tag":117,"props":4002,"children":4003},{},[4004,4005,4009],{"type":24,"value":3994},{"type":18,"tag":92,"props":4006,"children":4008},{"latex-express":4007,"styles":123},"K_{i}=0.5, ",[],{"type":24,"value":4010},"  the response does not overshoot but has a slower response to reach the steady-state.",{"type":18,"tag":117,"props":4012,"children":4013},{},[4014,4015,4019],{"type":24,"value":3994},{"type":18,"tag":92,"props":4016,"children":4018},{"latex-express":4017,"styles":123},"K_{p}=1, K_{i}=1, K_{d}=1",[],{"type":24,"value":4020},"  there is a slight overshoot, but the steady-state is reached faster.",{"type":18,"tag":19,"props":4022,"children":4024},{"id":4023},"how-can-we-write-pid-code-in-python",[4025],{"type":24,"value":4026},"How can we write PID code in Python ?",{"type":18,"tag":27,"props":4028,"children":4029},{},[4030],{"type":24,"value":4031},"Let's use a differential drive robot as a case study system. A differential drive robot is commonly used in robotics and automation, making it an ideal choice for a demonstration.",{"type":18,"tag":27,"props":4033,"children":4034},{},[4035],{"type":24,"value":4036},"The configuration of Differential Drive Robot in axes OXY.",{"type":18,"tag":3773,"props":4038,"children":4040},{"className":4039},[3776,3777,3778],[4041,4042],{"type":24,"value":3781},{"type":18,"tag":43,"props":4043,"children":4046},{"className":4044,"src":4045},[46],"/topics/robotics/nmpc/diff_drive.png",[],{"type":18,"tag":56,"props":4048,"children":4050},{"className":4049},[59,60,61,62],[4051],{"type":24,"value":4052},"\n    The configuration of Differential Drive Robot in axes OXY.\n",{"type":18,"tag":27,"props":4054,"children":4055},{},[4056],{"type":24,"value":4057},"The forward kinematic equation",{"type":18,"tag":92,"props":4059,"children":4061},{"latex-express":4060,"styles":59},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{\\theta} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":4063,"children":4064},{},[4065],{"type":24,"value":4066},"So, if we discretize the forward kinematic with a certain sampling time, we will get",{"type":18,"tag":92,"props":4068,"children":4070},{"latex-express":4069,"styles":59},"\n\\begin{bmatrix} x_{t+1} \\\\ y_{t+1} \\\\ \\theta_{t+1} \\end{bmatrix} = \\begin{bmatrix} x_{t} \\\\ y_{t} \\\\ \\theta_{t} \\end{bmatrix} +\\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix} \\times \\Delta t\n ",[],{"type":18,"tag":27,"props":4072,"children":4073},{},[4074],{"type":24,"value":4075},"In Python,",{"type":18,"tag":273,"props":4077,"children":4080},{"className":4078,"code":4079,"language":278,"meta":8},[276],"class DifferentialDrive:\n    def __init__(self):\n        self.r = 0.05\n        self.L = 0.25\n    def forward_kinematic(self, v, omega, yaw):\n        vx = v*np.cos(yaw)\n        vy = v*np.sin(yaw)\n        vyaw = omega\n\n        return vx, vy, vyaw\n    def discrete_state(self, x, y, yaw, v, omega, dt):\n        dx, dy, dyaw = self.forward_kinematic(v, omega, yaw)\n        x_next = x + dx * dt\n        y_next = y + dy * dt\n        yaw_next = yaw + dyaw * dt\n\n        return x_next, y_next, yaw_next\n",[4081],{"type":18,"tag":281,"props":4082,"children":4083},{},[4084],{"type":18,"tag":273,"props":4085,"children":4086},{"__ignoreMap":8},[4087,4110,4136,4167,4196,4221,4247,4272,4289,4296,4313,4338,4363,4398,4432,4466,4473],{"type":18,"tag":288,"props":4088,"children":4089},{"class":290,"line":291},[4090,4095,4099,4105],{"type":18,"tag":288,"props":4091,"children":4092},{"class":295},[4093],{"type":24,"value":4094},"class",{"type":18,"tag":288,"props":4096,"children":4097},{"class":301},[4098],{"type":24,"value":352},{"type":18,"tag":288,"props":4100,"children":4102},{"class":4101},"ct-806137",[4103],{"type":24,"value":4104},"DifferentialDrive",{"type":18,"tag":288,"props":4106,"children":4107},{"class":301},[4108],{"type":24,"value":4109},":\n",{"type":18,"tag":288,"props":4111,"children":4112},{"class":290,"line":317},[4113,4117,4122,4126,4131],{"type":18,"tag":288,"props":4114,"children":4115},{"class":301},[4116],{"type":24,"value":1128},{"type":18,"tag":288,"props":4118,"children":4119},{"class":295},[4120],{"type":24,"value":4121},"def",{"type":18,"tag":288,"props":4123,"children":4124},{"class":301},[4125],{"type":24,"value":352},{"type":18,"tag":288,"props":4127,"children":4128},{"class":355},[4129],{"type":24,"value":4130},"__init__",{"type":18,"tag":288,"props":4132,"children":4133},{"class":301},[4134],{"type":24,"value":4135},"(self):\n",{"type":18,"tag":288,"props":4137,"children":4138},{"class":290,"line":326},[4139,4144,4149,4154,4158,4162],{"type":18,"tag":288,"props":4140,"children":4141},{"class":301},[4142],{"type":24,"value":4143},"        ",{"type":18,"tag":288,"props":4145,"children":4146},{"class":355},[4147],{"type":24,"value":4148},"self",{"type":18,"tag":288,"props":4150,"children":4151},{"class":301},[4152],{"type":24,"value":4153},".r ",{"type":18,"tag":288,"props":4155,"children":4156},{"class":295},[4157],{"type":24,"value":347},{"type":18,"tag":288,"props":4159,"children":4160},{"class":301},[4161],{"type":24,"value":352},{"type":18,"tag":288,"props":4163,"children":4164},{"class":355},[4165],{"type":24,"value":4166},"0.05\n",{"type":18,"tag":288,"props":4168,"children":4169},{"class":290,"line":336},[4170,4174,4178,4183,4187,4191],{"type":18,"tag":288,"props":4171,"children":4172},{"class":301},[4173],{"type":24,"value":4143},{"type":18,"tag":288,"props":4175,"children":4176},{"class":355},[4177],{"type":24,"value":4148},{"type":18,"tag":288,"props":4179,"children":4180},{"class":301},[4181],{"type":24,"value":4182},".L ",{"type":18,"tag":288,"props":4184,"children":4185},{"class":295},[4186],{"type":24,"value":347},{"type":18,"tag":288,"props":4188,"children":4189},{"class":301},[4190],{"type":24,"value":352},{"type":18,"tag":288,"props":4192,"children":4193},{"class":355},[4194],{"type":24,"value":4195},"0.25\n",{"type":18,"tag":288,"props":4197,"children":4198},{"class":290,"line":361},[4199,4203,4207,4211,4216],{"type":18,"tag":288,"props":4200,"children":4201},{"class":301},[4202],{"type":24,"value":1128},{"type":18,"tag":288,"props":4204,"children":4205},{"class":295},[4206],{"type":24,"value":4121},{"type":18,"tag":288,"props":4208,"children":4209},{"class":301},[4210],{"type":24,"value":352},{"type":18,"tag":288,"props":4212,"children":4213},{"class":4101},[4214],{"type":24,"value":4215},"forward_kinematic",{"type":18,"tag":288,"props":4217,"children":4218},{"class":301},[4219],{"type":24,"value":4220},"(self, v, omega, yaw):\n",{"type":18,"tag":288,"props":4222,"children":4223},{"class":290,"line":370},[4224,4229,4233,4238,4242],{"type":18,"tag":288,"props":4225,"children":4226},{"class":301},[4227],{"type":24,"value":4228},"        vx ",{"type":18,"tag":288,"props":4230,"children":4231},{"class":295},[4232],{"type":24,"value":347},{"type":18,"tag":288,"props":4234,"children":4235},{"class":301},[4236],{"type":24,"value":4237}," v",{"type":18,"tag":288,"props":4239,"children":4240},{"class":295},[4241],{"type":24,"value":602},{"type":18,"tag":288,"props":4243,"children":4244},{"class":301},[4245],{"type":24,"value":4246},"np.cos(yaw)\n",{"type":18,"tag":288,"props":4248,"children":4249},{"class":290,"line":392},[4250,4255,4259,4263,4267],{"type":18,"tag":288,"props":4251,"children":4252},{"class":301},[4253],{"type":24,"value":4254},"        vy ",{"type":18,"tag":288,"props":4256,"children":4257},{"class":295},[4258],{"type":24,"value":347},{"type":18,"tag":288,"props":4260,"children":4261},{"class":301},[4262],{"type":24,"value":4237},{"type":18,"tag":288,"props":4264,"children":4265},{"class":295},[4266],{"type":24,"value":602},{"type":18,"tag":288,"props":4268,"children":4269},{"class":301},[4270],{"type":24,"value":4271},"np.sin(yaw)\n",{"type":18,"tag":288,"props":4273,"children":4274},{"class":290,"line":401},[4275,4280,4284],{"type":18,"tag":288,"props":4276,"children":4277},{"class":301},[4278],{"type":24,"value":4279},"        vyaw ",{"type":18,"tag":288,"props":4281,"children":4282},{"class":295},[4283],{"type":24,"value":347},{"type":18,"tag":288,"props":4285,"children":4286},{"class":301},[4287],{"type":24,"value":4288}," omega\n",{"type":18,"tag":288,"props":4290,"children":4291},{"class":290,"line":423},[4292],{"type":18,"tag":288,"props":4293,"children":4294},{},[4295],{"type":24,"value":323},{"type":18,"tag":288,"props":4297,"children":4298},{"class":290,"line":444},[4299,4303,4308],{"type":18,"tag":288,"props":4300,"children":4301},{"class":301},[4302],{"type":24,"value":4143},{"type":18,"tag":288,"props":4304,"children":4305},{"class":295},[4306],{"type":24,"value":4307},"return",{"type":18,"tag":288,"props":4309,"children":4310},{"class":301},[4311],{"type":24,"value":4312}," vx, vy, vyaw\n",{"type":18,"tag":288,"props":4314,"children":4315},{"class":290,"line":465},[4316,4320,4324,4328,4333],{"type":18,"tag":288,"props":4317,"children":4318},{"class":301},[4319],{"type":24,"value":1128},{"type":18,"tag":288,"props":4321,"children":4322},{"class":295},[4323],{"type":24,"value":4121},{"type":18,"tag":288,"props":4325,"children":4326},{"class":301},[4327],{"type":24,"value":352},{"type":18,"tag":288,"props":4329,"children":4330},{"class":4101},[4331],{"type":24,"value":4332},"discrete_state",{"type":18,"tag":288,"props":4334,"children":4335},{"class":301},[4336],{"type":24,"value":4337},"(self, x, y, yaw, v, omega, dt):\n",{"type":18,"tag":288,"props":4339,"children":4340},{"class":290,"line":474},[4341,4346,4350,4354,4358],{"type":18,"tag":288,"props":4342,"children":4343},{"class":301},[4344],{"type":24,"value":4345},"        dx, dy, dyaw ",{"type":18,"tag":288,"props":4347,"children":4348},{"class":295},[4349],{"type":24,"value":347},{"type":18,"tag":288,"props":4351,"children":4352},{"class":301},[4353],{"type":24,"value":352},{"type":18,"tag":288,"props":4355,"children":4356},{"class":355},[4357],{"type":24,"value":4148},{"type":18,"tag":288,"props":4359,"children":4360},{"class":301},[4361],{"type":24,"value":4362},".forward_kinematic(v, omega, yaw)\n",{"type":18,"tag":288,"props":4364,"children":4365},{"class":290,"line":505},[4366,4371,4375,4380,4384,4389,4393],{"type":18,"tag":288,"props":4367,"children":4368},{"class":301},[4369],{"type":24,"value":4370},"        x_next ",{"type":18,"tag":288,"props":4372,"children":4373},{"class":295},[4374],{"type":24,"value":347},{"type":18,"tag":288,"props":4376,"children":4377},{"class":301},[4378],{"type":24,"value":4379}," x ",{"type":18,"tag":288,"props":4381,"children":4382},{"class":295},[4383],{"type":24,"value":759},{"type":18,"tag":288,"props":4385,"children":4386},{"class":301},[4387],{"type":24,"value":4388}," dx ",{"type":18,"tag":288,"props":4390,"children":4391},{"class":295},[4392],{"type":24,"value":602},{"type":18,"tag":288,"props":4394,"children":4395},{"class":301},[4396],{"type":24,"value":4397}," dt\n",{"type":18,"tag":288,"props":4399,"children":4400},{"class":290,"line":536},[4401,4406,4410,4415,4419,4424,4428],{"type":18,"tag":288,"props":4402,"children":4403},{"class":301},[4404],{"type":24,"value":4405},"        y_next ",{"type":18,"tag":288,"props":4407,"children":4408},{"class":295},[4409],{"type":24,"value":347},{"type":18,"tag":288,"props":4411,"children":4412},{"class":301},[4413],{"type":24,"value":4414}," y ",{"type":18,"tag":288,"props":4416,"children":4417},{"class":295},[4418],{"type":24,"value":759},{"type":18,"tag":288,"props":4420,"children":4421},{"class":301},[4422],{"type":24,"value":4423}," dy ",{"type":18,"tag":288,"props":4425,"children":4426},{"class":295},[4427],{"type":24,"value":602},{"type":18,"tag":288,"props":4429,"children":4430},{"class":301},[4431],{"type":24,"value":4397},{"type":18,"tag":288,"props":4433,"children":4434},{"class":290,"line":545},[4435,4440,4444,4449,4453,4458,4462],{"type":18,"tag":288,"props":4436,"children":4437},{"class":301},[4438],{"type":24,"value":4439},"        yaw_next ",{"type":18,"tag":288,"props":4441,"children":4442},{"class":295},[4443],{"type":24,"value":347},{"type":18,"tag":288,"props":4445,"children":4446},{"class":301},[4447],{"type":24,"value":4448}," yaw ",{"type":18,"tag":288,"props":4450,"children":4451},{"class":295},[4452],{"type":24,"value":759},{"type":18,"tag":288,"props":4454,"children":4455},{"class":301},[4456],{"type":24,"value":4457}," dyaw ",{"type":18,"tag":288,"props":4459,"children":4460},{"class":295},[4461],{"type":24,"value":602},{"type":18,"tag":288,"props":4463,"children":4464},{"class":301},[4465],{"type":24,"value":4397},{"type":18,"tag":288,"props":4467,"children":4468},{"class":290,"line":554},[4469],{"type":18,"tag":288,"props":4470,"children":4471},{},[4472],{"type":24,"value":323},{"type":18,"tag":288,"props":4474,"children":4475},{"class":290,"line":581},[4476,4480,4484],{"type":18,"tag":288,"props":4477,"children":4478},{"class":301},[4479],{"type":24,"value":4143},{"type":18,"tag":288,"props":4481,"children":4482},{"class":295},[4483],{"type":24,"value":4307},{"type":18,"tag":288,"props":4485,"children":4486},{"class":301},[4487],{"type":24,"value":4488}," x_next, y_next, yaw_next",{"type":18,"tag":27,"props":4490,"children":4491},{},[4492,4494,4498,4500,4505],{"type":24,"value":4493},"The ",{"type":18,"tag":229,"props":4495,"children":4496},{},[4497],{"type":24,"value":233},{"type":24,"value":4499}," class that we defined, has all the need attribute to use for PID control !!. We just need to write another class for our ",{"type":18,"tag":229,"props":4501,"children":4502},{},[4503],{"type":24,"value":4504}," PID Controller ",{"type":24,"value":3884},{"type":18,"tag":273,"props":4507,"children":4510},{"className":4508,"code":4509,"language":278,"meta":8},[276],"class PIDController:\n    def __init__(self, kp, ki, kd, dt):\n\n        self.kp = kp\n        self.ki = ki\n        self.kd = kd\n        self.dt = dt\n        self.integral = 0\n\n    def calculate_pid(self, errors):\n        # Calculate proportional error\n        proportional = self.kp * errors[-1]\n        # Calculate integration error\n        integral = self.integral + self.ki * (errors[-1]) * self.dt\n        self.integral = integral\n        # Calculate derivative error\n        derivative = self.kd * (errors[-1] - errors[-2])/self.dt\n\n        output = proportional + integral + derivative\n\n        return output\n",[4511],{"type":18,"tag":281,"props":4512,"children":4513},{},[4514],{"type":18,"tag":273,"props":4515,"children":4516},{"__ignoreMap":8},[4517,4537,4561,4568,4593,4618,4643,4667,4696,4703,4728,4740,4786,4798,4876,4900,4912,4989,4996,5031,5038],{"type":18,"tag":288,"props":4518,"children":4519},{"class":290,"line":291},[4520,4524,4528,4533],{"type":18,"tag":288,"props":4521,"children":4522},{"class":295},[4523],{"type":24,"value":4094},{"type":18,"tag":288,"props":4525,"children":4526},{"class":301},[4527],{"type":24,"value":352},{"type":18,"tag":288,"props":4529,"children":4530},{"class":4101},[4531],{"type":24,"value":4532},"PIDController",{"type":18,"tag":288,"props":4534,"children":4535},{"class":301},[4536],{"type":24,"value":4109},{"type":18,"tag":288,"props":4538,"children":4539},{"class":290,"line":317},[4540,4544,4548,4552,4556],{"type":18,"tag":288,"props":4541,"children":4542},{"class":301},[4543],{"type":24,"value":1128},{"type":18,"tag":288,"props":4545,"children":4546},{"class":295},[4547],{"type":24,"value":4121},{"type":18,"tag":288,"props":4549,"children":4550},{"class":301},[4551],{"type":24,"value":352},{"type":18,"tag":288,"props":4553,"children":4554},{"class":355},[4555],{"type":24,"value":4130},{"type":18,"tag":288,"props":4557,"children":4558},{"class":301},[4559],{"type":24,"value":4560},"(self, kp, ki, kd, dt):\n",{"type":18,"tag":288,"props":4562,"children":4563},{"class":290,"line":326},[4564],{"type":18,"tag":288,"props":4565,"children":4566},{},[4567],{"type":24,"value":323},{"type":18,"tag":288,"props":4569,"children":4570},{"class":290,"line":336},[4571,4575,4579,4584,4588],{"type":18,"tag":288,"props":4572,"children":4573},{"class":301},[4574],{"type":24,"value":4143},{"type":18,"tag":288,"props":4576,"children":4577},{"class":355},[4578],{"type":24,"value":4148},{"type":18,"tag":288,"props":4580,"children":4581},{"class":301},[4582],{"type":24,"value":4583},".kp ",{"type":18,"tag":288,"props":4585,"children":4586},{"class":295},[4587],{"type":24,"value":347},{"type":18,"tag":288,"props":4589,"children":4590},{"class":301},[4591],{"type":24,"value":4592}," kp\n",{"type":18,"tag":288,"props":4594,"children":4595},{"class":290,"line":361},[4596,4600,4604,4609,4613],{"type":18,"tag":288,"props":4597,"children":4598},{"class":301},[4599],{"type":24,"value":4143},{"type":18,"tag":288,"props":4601,"children":4602},{"class":355},[4603],{"type":24,"value":4148},{"type":18,"tag":288,"props":4605,"children":4606},{"class":301},[4607],{"type":24,"value":4608},".ki ",{"type":18,"tag":288,"props":4610,"children":4611},{"class":295},[4612],{"type":24,"value":347},{"type":18,"tag":288,"props":4614,"children":4615},{"class":301},[4616],{"type":24,"value":4617}," ki\n",{"type":18,"tag":288,"props":4619,"children":4620},{"class":290,"line":370},[4621,4625,4629,4634,4638],{"type":18,"tag":288,"props":4622,"children":4623},{"class":301},[4624],{"type":24,"value":4143},{"type":18,"tag":288,"props":4626,"children":4627},{"class":355},[4628],{"type":24,"value":4148},{"type":18,"tag":288,"props":4630,"children":4631},{"class":301},[4632],{"type":24,"value":4633},".kd ",{"type":18,"tag":288,"props":4635,"children":4636},{"class":295},[4637],{"type":24,"value":347},{"type":18,"tag":288,"props":4639,"children":4640},{"class":301},[4641],{"type":24,"value":4642}," kd\n",{"type":18,"tag":288,"props":4644,"children":4645},{"class":290,"line":392},[4646,4650,4654,4659,4663],{"type":18,"tag":288,"props":4647,"children":4648},{"class":301},[4649],{"type":24,"value":4143},{"type":18,"tag":288,"props":4651,"children":4652},{"class":355},[4653],{"type":24,"value":4148},{"type":18,"tag":288,"props":4655,"children":4656},{"class":301},[4657],{"type":24,"value":4658},".dt ",{"type":18,"tag":288,"props":4660,"children":4661},{"class":295},[4662],{"type":24,"value":347},{"type":18,"tag":288,"props":4664,"children":4665},{"class":301},[4666],{"type":24,"value":4397},{"type":18,"tag":288,"props":4668,"children":4669},{"class":290,"line":401},[4670,4674,4678,4683,4687,4691],{"type":18,"tag":288,"props":4671,"children":4672},{"class":301},[4673],{"type":24,"value":4143},{"type":18,"tag":288,"props":4675,"children":4676},{"class":355},[4677],{"type":24,"value":4148},{"type":18,"tag":288,"props":4679,"children":4680},{"class":301},[4681],{"type":24,"value":4682},".integral ",{"type":18,"tag":288,"props":4684,"children":4685},{"class":295},[4686],{"type":24,"value":347},{"type":18,"tag":288,"props":4688,"children":4689},{"class":301},[4690],{"type":24,"value":352},{"type":18,"tag":288,"props":4692,"children":4693},{"class":355},[4694],{"type":24,"value":4695},"0\n",{"type":18,"tag":288,"props":4697,"children":4698},{"class":290,"line":423},[4699],{"type":18,"tag":288,"props":4700,"children":4701},{},[4702],{"type":24,"value":323},{"type":18,"tag":288,"props":4704,"children":4705},{"class":290,"line":444},[4706,4710,4714,4718,4723],{"type":18,"tag":288,"props":4707,"children":4708},{"class":301},[4709],{"type":24,"value":1128},{"type":18,"tag":288,"props":4711,"children":4712},{"class":295},[4713],{"type":24,"value":4121},{"type":18,"tag":288,"props":4715,"children":4716},{"class":301},[4717],{"type":24,"value":352},{"type":18,"tag":288,"props":4719,"children":4720},{"class":4101},[4721],{"type":24,"value":4722},"calculate_pid",{"type":18,"tag":288,"props":4724,"children":4725},{"class":301},[4726],{"type":24,"value":4727},"(self, errors):\n",{"type":18,"tag":288,"props":4729,"children":4730},{"class":290,"line":465},[4731,4735],{"type":18,"tag":288,"props":4732,"children":4733},{"class":301},[4734],{"type":24,"value":4143},{"type":18,"tag":288,"props":4736,"children":4737},{"class":330},[4738],{"type":24,"value":4739},"# Calculate proportional error\n",{"type":18,"tag":288,"props":4741,"children":4742},{"class":290,"line":474},[4743,4748,4752,4756,4760,4764,4768,4773,4777,4781],{"type":18,"tag":288,"props":4744,"children":4745},{"class":301},[4746],{"type":24,"value":4747},"        proportional ",{"type":18,"tag":288,"props":4749,"children":4750},{"class":295},[4751],{"type":24,"value":347},{"type":18,"tag":288,"props":4753,"children":4754},{"class":301},[4755],{"type":24,"value":352},{"type":18,"tag":288,"props":4757,"children":4758},{"class":355},[4759],{"type":24,"value":4148},{"type":18,"tag":288,"props":4761,"children":4762},{"class":301},[4763],{"type":24,"value":4583},{"type":18,"tag":288,"props":4765,"children":4766},{"class":295},[4767],{"type":24,"value":602},{"type":18,"tag":288,"props":4769,"children":4770},{"class":301},[4771],{"type":24,"value":4772}," errors[",{"type":18,"tag":288,"props":4774,"children":4775},{"class":295},[4776],{"type":24,"value":2002},{"type":18,"tag":288,"props":4778,"children":4779},{"class":355},[4780],{"type":24,"value":663},{"type":18,"tag":288,"props":4782,"children":4783},{"class":301},[4784],{"type":24,"value":4785},"]\n",{"type":18,"tag":288,"props":4787,"children":4788},{"class":290,"line":505},[4789,4793],{"type":18,"tag":288,"props":4790,"children":4791},{"class":301},[4792],{"type":24,"value":4143},{"type":18,"tag":288,"props":4794,"children":4795},{"class":330},[4796],{"type":24,"value":4797},"# Calculate integration error\n",{"type":18,"tag":288,"props":4799,"children":4800},{"class":290,"line":536},[4801,4806,4810,4814,4818,4822,4826,4830,4834,4838,4842,4847,4851,4855,4859,4863,4867,4871],{"type":18,"tag":288,"props":4802,"children":4803},{"class":301},[4804],{"type":24,"value":4805},"        integral ",{"type":18,"tag":288,"props":4807,"children":4808},{"class":295},[4809],{"type":24,"value":347},{"type":18,"tag":288,"props":4811,"children":4812},{"class":301},[4813],{"type":24,"value":352},{"type":18,"tag":288,"props":4815,"children":4816},{"class":355},[4817],{"type":24,"value":4148},{"type":18,"tag":288,"props":4819,"children":4820},{"class":301},[4821],{"type":24,"value":4682},{"type":18,"tag":288,"props":4823,"children":4824},{"class":295},[4825],{"type":24,"value":759},{"type":18,"tag":288,"props":4827,"children":4828},{"class":301},[4829],{"type":24,"value":352},{"type":18,"tag":288,"props":4831,"children":4832},{"class":355},[4833],{"type":24,"value":4148},{"type":18,"tag":288,"props":4835,"children":4836},{"class":301},[4837],{"type":24,"value":4608},{"type":18,"tag":288,"props":4839,"children":4840},{"class":295},[4841],{"type":24,"value":602},{"type":18,"tag":288,"props":4843,"children":4844},{"class":301},[4845],{"type":24,"value":4846}," (errors[",{"type":18,"tag":288,"props":4848,"children":4849},{"class":295},[4850],{"type":24,"value":2002},{"type":18,"tag":288,"props":4852,"children":4853},{"class":355},[4854],{"type":24,"value":663},{"type":18,"tag":288,"props":4856,"children":4857},{"class":301},[4858],{"type":24,"value":1243},{"type":18,"tag":288,"props":4860,"children":4861},{"class":295},[4862],{"type":24,"value":602},{"type":18,"tag":288,"props":4864,"children":4865},{"class":301},[4866],{"type":24,"value":352},{"type":18,"tag":288,"props":4868,"children":4869},{"class":355},[4870],{"type":24,"value":4148},{"type":18,"tag":288,"props":4872,"children":4873},{"class":301},[4874],{"type":24,"value":4875},".dt\n",{"type":18,"tag":288,"props":4877,"children":4878},{"class":290,"line":545},[4879,4883,4887,4891,4895],{"type":18,"tag":288,"props":4880,"children":4881},{"class":301},[4882],{"type":24,"value":4143},{"type":18,"tag":288,"props":4884,"children":4885},{"class":355},[4886],{"type":24,"value":4148},{"type":18,"tag":288,"props":4888,"children":4889},{"class":301},[4890],{"type":24,"value":4682},{"type":18,"tag":288,"props":4892,"children":4893},{"class":295},[4894],{"type":24,"value":347},{"type":18,"tag":288,"props":4896,"children":4897},{"class":301},[4898],{"type":24,"value":4899}," integral\n",{"type":18,"tag":288,"props":4901,"children":4902},{"class":290,"line":554},[4903,4907],{"type":18,"tag":288,"props":4904,"children":4905},{"class":301},[4906],{"type":24,"value":4143},{"type":18,"tag":288,"props":4908,"children":4909},{"class":330},[4910],{"type":24,"value":4911},"# Calculate derivative error\n",{"type":18,"tag":288,"props":4913,"children":4914},{"class":290,"line":581},[4915,4920,4924,4928,4932,4936,4940,4944,4948,4952,4956,4960,4964,4968,4972,4977,4981,4985],{"type":18,"tag":288,"props":4916,"children":4917},{"class":301},[4918],{"type":24,"value":4919},"        derivative ",{"type":18,"tag":288,"props":4921,"children":4922},{"class":295},[4923],{"type":24,"value":347},{"type":18,"tag":288,"props":4925,"children":4926},{"class":301},[4927],{"type":24,"value":352},{"type":18,"tag":288,"props":4929,"children":4930},{"class":355},[4931],{"type":24,"value":4148},{"type":18,"tag":288,"props":4933,"children":4934},{"class":301},[4935],{"type":24,"value":4633},{"type":18,"tag":288,"props":4937,"children":4938},{"class":295},[4939],{"type":24,"value":602},{"type":18,"tag":288,"props":4941,"children":4942},{"class":301},[4943],{"type":24,"value":4846},{"type":18,"tag":288,"props":4945,"children":4946},{"class":295},[4947],{"type":24,"value":2002},{"type":18,"tag":288,"props":4949,"children":4950},{"class":355},[4951],{"type":24,"value":663},{"type":18,"tag":288,"props":4953,"children":4954},{"class":301},[4955],{"type":24,"value":1161},{"type":18,"tag":288,"props":4957,"children":4958},{"class":295},[4959],{"type":24,"value":2002},{"type":18,"tag":288,"props":4961,"children":4962},{"class":301},[4963],{"type":24,"value":4772},{"type":18,"tag":288,"props":4965,"children":4966},{"class":295},[4967],{"type":24,"value":2002},{"type":18,"tag":288,"props":4969,"children":4970},{"class":355},[4971],{"type":24,"value":612},{"type":18,"tag":288,"props":4973,"children":4974},{"class":301},[4975],{"type":24,"value":4976},"])",{"type":18,"tag":288,"props":4978,"children":4979},{"class":295},[4980],{"type":24,"value":769},{"type":18,"tag":288,"props":4982,"children":4983},{"class":355},[4984],{"type":24,"value":4148},{"type":18,"tag":288,"props":4986,"children":4987},{"class":301},[4988],{"type":24,"value":4875},{"type":18,"tag":288,"props":4990,"children":4991},{"class":290,"line":620},[4992],{"type":18,"tag":288,"props":4993,"children":4994},{},[4995],{"type":24,"value":323},{"type":18,"tag":288,"props":4997,"children":4998},{"class":290,"line":653},[4999,5004,5008,5013,5017,5022,5026],{"type":18,"tag":288,"props":5000,"children":5001},{"class":301},[5002],{"type":24,"value":5003},"        output ",{"type":18,"tag":288,"props":5005,"children":5006},{"class":295},[5007],{"type":24,"value":347},{"type":18,"tag":288,"props":5009,"children":5010},{"class":301},[5011],{"type":24,"value":5012}," proportional ",{"type":18,"tag":288,"props":5014,"children":5015},{"class":295},[5016],{"type":24,"value":759},{"type":18,"tag":288,"props":5018,"children":5019},{"class":301},[5020],{"type":24,"value":5021}," integral ",{"type":18,"tag":288,"props":5023,"children":5024},{"class":295},[5025],{"type":24,"value":759},{"type":18,"tag":288,"props":5027,"children":5028},{"class":301},[5029],{"type":24,"value":5030}," derivative\n",{"type":18,"tag":288,"props":5032,"children":5033},{"class":290,"line":671},[5034],{"type":18,"tag":288,"props":5035,"children":5036},{},[5037],{"type":24,"value":323},{"type":18,"tag":288,"props":5039,"children":5040},{"class":290,"line":680},[5041,5045,5049],{"type":18,"tag":288,"props":5042,"children":5043},{"class":301},[5044],{"type":24,"value":4143},{"type":18,"tag":288,"props":5046,"children":5047},{"class":295},[5048],{"type":24,"value":4307},{"type":18,"tag":288,"props":5050,"children":5051},{"class":301},[5052],{"type":24,"value":5053}," output",{"type":18,"tag":27,"props":5055,"children":5056},{},[5057],{"type":24,"value":5058},"Don't worry, this class just defined as the PID formula. So, by doing this, we will be able to use all the characteristic of our PID controller.",{"type":18,"tag":19,"props":5060,"children":5062},{"id":5061},"experiment",[5063],{"type":24,"value":5064},"Experiment",{"type":18,"tag":5066,"props":5067,"children":5069},"h3",{"id":5068},"pid-for-point-control",[5070],{"type":24,"value":5071},"PID for point control",{"type":18,"tag":27,"props":5073,"children":5074},{},[5075,5077,5081,5083,5088],{"type":24,"value":5076},"If I want my DifferentialDrive robot go to point ",{"type":18,"tag":92,"props":5078,"children":5080},{"latex-express":5079,"styles":123},"x_{ref}, y_{ref}, \\theta_{ref}",[],{"type":24,"value":5082},", Then I can calculate the error between the reference point and the feedback position of the robot. I simulated my robot in the  ",{"type":18,"tag":1611,"props":5084,"children":5085},{},[5086],{"type":24,"value":5087},"for loop",{"type":24,"value":5089}," and calculate this error recursively.",{"type":18,"tag":273,"props":5091,"children":5094},{"className":5092,"code":5093,"language":278,"meta":8},[276],"error_x.append(ref_path[0]-current_x)\nerror_y.append(ref_path[1]-current_y)\nerror_yaw.append(ref_path[2]-current_yaw)\n",[5095],{"type":18,"tag":281,"props":5096,"children":5097},{},[5098],{"type":18,"tag":273,"props":5099,"children":5100},{"__ignoreMap":8},[5101,5126,5151],{"type":18,"tag":288,"props":5102,"children":5103},{"class":290,"line":291},[5104,5109,5113,5117,5121],{"type":18,"tag":288,"props":5105,"children":5106},{"class":301},[5107],{"type":24,"value":5108},"error_x.append(ref_path[",{"type":18,"tag":288,"props":5110,"children":5111},{"class":355},[5112],{"type":24,"value":592},{"type":18,"tag":288,"props":5114,"children":5115},{"class":301},[5116],{"type":24,"value":597},{"type":18,"tag":288,"props":5118,"children":5119},{"class":295},[5120],{"type":24,"value":2002},{"type":18,"tag":288,"props":5122,"children":5123},{"class":301},[5124],{"type":24,"value":5125},"current_x)\n",{"type":18,"tag":288,"props":5127,"children":5128},{"class":290,"line":317},[5129,5134,5138,5142,5146],{"type":18,"tag":288,"props":5130,"children":5131},{"class":301},[5132],{"type":24,"value":5133},"error_y.append(ref_path[",{"type":18,"tag":288,"props":5135,"children":5136},{"class":355},[5137],{"type":24,"value":663},{"type":18,"tag":288,"props":5139,"children":5140},{"class":301},[5141],{"type":24,"value":597},{"type":18,"tag":288,"props":5143,"children":5144},{"class":295},[5145],{"type":24,"value":2002},{"type":18,"tag":288,"props":5147,"children":5148},{"class":301},[5149],{"type":24,"value":5150},"current_y)\n",{"type":18,"tag":288,"props":5152,"children":5153},{"class":290,"line":326},[5154,5159,5163,5167,5171],{"type":18,"tag":288,"props":5155,"children":5156},{"class":301},[5157],{"type":24,"value":5158},"error_yaw.append(ref_path[",{"type":18,"tag":288,"props":5160,"children":5161},{"class":355},[5162],{"type":24,"value":612},{"type":18,"tag":288,"props":5164,"children":5165},{"class":301},[5166],{"type":24,"value":597},{"type":18,"tag":288,"props":5168,"children":5169},{"class":295},[5170],{"type":24,"value":2002},{"type":18,"tag":288,"props":5172,"children":5173},{"class":301},[5174],{"type":24,"value":5175},"current_yaw)",{"type":18,"tag":27,"props":5177,"children":5178},{},[5179],{"type":24,"value":5180},"Then, let's apply PID",{"type":18,"tag":273,"props":5182,"children":5185},{"className":5183,"code":5184,"language":278,"meta":8},[276],"output_vx = pid_controller_x.calculate_pid(error_x)\noutput_vy = pid_controller_y.calculate_pid(error_y)\noutput_omega = pid_controller_yaw.calculate_pid(error_yaw)\n",[5186],{"type":18,"tag":281,"props":5187,"children":5188},{},[5189],{"type":18,"tag":273,"props":5190,"children":5191},{"__ignoreMap":8},[5192,5209,5226],{"type":18,"tag":288,"props":5193,"children":5194},{"class":290,"line":291},[5195,5200,5204],{"type":18,"tag":288,"props":5196,"children":5197},{"class":301},[5198],{"type":24,"value":5199},"output_vx ",{"type":18,"tag":288,"props":5201,"children":5202},{"class":295},[5203],{"type":24,"value":347},{"type":18,"tag":288,"props":5205,"children":5206},{"class":301},[5207],{"type":24,"value":5208}," pid_controller_x.calculate_pid(error_x)\n",{"type":18,"tag":288,"props":5210,"children":5211},{"class":290,"line":317},[5212,5217,5221],{"type":18,"tag":288,"props":5213,"children":5214},{"class":301},[5215],{"type":24,"value":5216},"output_vy ",{"type":18,"tag":288,"props":5218,"children":5219},{"class":295},[5220],{"type":24,"value":347},{"type":18,"tag":288,"props":5222,"children":5223},{"class":301},[5224],{"type":24,"value":5225}," pid_controller_y.calculate_pid(error_y)\n",{"type":18,"tag":288,"props":5227,"children":5228},{"class":290,"line":326},[5229,5234,5238],{"type":18,"tag":288,"props":5230,"children":5231},{"class":301},[5232],{"type":24,"value":5233},"output_omega ",{"type":18,"tag":288,"props":5235,"children":5236},{"class":295},[5237],{"type":24,"value":347},{"type":18,"tag":288,"props":5239,"children":5240},{"class":301},[5241],{"type":24,"value":5242}," pid_controller_yaw.calculate_pid(error_yaw)",{"type":18,"tag":27,"props":5244,"children":5245},{},[5246],{"type":24,"value":5247},"We will also need to update current position of the robot with the given optimal value from the PID controller.",{"type":18,"tag":273,"props":5249,"children":5252},{"className":5250,"code":5251,"language":278,"meta":8},[276],"x_next, y_next, yaw_next = diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) # Skip for omega we only look for x, y\ncurrent_x = x_next\ncurrent_y = y_next\ncurrent_yaw = yaw_next\n",[5253],{"type":18,"tag":281,"props":5254,"children":5255},{},[5256],{"type":18,"tag":273,"props":5257,"children":5258},{"__ignoreMap":8},[5259,5281,5298,5315],{"type":18,"tag":288,"props":5260,"children":5261},{"class":290,"line":291},[5262,5267,5271,5276],{"type":18,"tag":288,"props":5263,"children":5264},{"class":301},[5265],{"type":24,"value":5266},"x_next, y_next, yaw_next ",{"type":18,"tag":288,"props":5268,"children":5269},{"class":295},[5270],{"type":24,"value":347},{"type":18,"tag":288,"props":5272,"children":5273},{"class":301},[5274],{"type":24,"value":5275}," diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) ",{"type":18,"tag":288,"props":5277,"children":5278},{"class":330},[5279],{"type":24,"value":5280},"# Skip for omega we only look for x, y\n",{"type":18,"tag":288,"props":5282,"children":5283},{"class":290,"line":317},[5284,5289,5293],{"type":18,"tag":288,"props":5285,"children":5286},{"class":301},[5287],{"type":24,"value":5288},"current_x ",{"type":18,"tag":288,"props":5290,"children":5291},{"class":295},[5292],{"type":24,"value":347},{"type":18,"tag":288,"props":5294,"children":5295},{"class":301},[5296],{"type":24,"value":5297}," x_next\n",{"type":18,"tag":288,"props":5299,"children":5300},{"class":290,"line":326},[5301,5306,5310],{"type":18,"tag":288,"props":5302,"children":5303},{"class":301},[5304],{"type":24,"value":5305},"current_y ",{"type":18,"tag":288,"props":5307,"children":5308},{"class":295},[5309],{"type":24,"value":347},{"type":18,"tag":288,"props":5311,"children":5312},{"class":301},[5313],{"type":24,"value":5314}," y_next\n",{"type":18,"tag":288,"props":5316,"children":5317},{"class":290,"line":336},[5318,5323,5327],{"type":18,"tag":288,"props":5319,"children":5320},{"class":301},[5321],{"type":24,"value":5322},"current_yaw ",{"type":18,"tag":288,"props":5324,"children":5325},{"class":295},[5326],{"type":24,"value":347},{"type":18,"tag":288,"props":5328,"children":5329},{"class":301},[5330],{"type":24,"value":5331}," yaw_next",{"type":18,"tag":27,"props":5333,"children":5334},{},[5335,5337,5342],{"type":24,"value":5336},"I use ",{"type":18,"tag":1611,"props":5338,"children":5339},{},[5340],{"type":24,"value":5341},"matplotlib",{"type":24,"value":5343}," library to simulate my robot.",{"type":18,"tag":273,"props":5345,"children":5348},{"className":5346,"code":5347,"language":278,"meta":8},[276],"plt.clf()\nplt.gcf().canvas.mpl_connect('key_release_event',\n            lambda event: [exit(0) if event.key == 'escape' else None])\nplot_arrow(current_x, current_y, current_yaw)\nplt.plot(5, 5)\nplt.plot(ref_path[0], ref_path[1], marker=\"x\", color=\"blue\", label=\"Input Trajectory\")\nplt.axis(\"equal\")\nplt.grid(True)\nplt.legend()\nplt.pause(0.0001)\n",[5349],{"type":18,"tag":281,"props":5350,"children":5351},{},[5352],{"type":18,"tag":273,"props":5353,"children":5354},{"__ignoreMap":8},[5355,5363,5381,5461,5469,5494,5573,5590,5607,5615],{"type":18,"tag":288,"props":5356,"children":5357},{"class":290,"line":291},[5358],{"type":18,"tag":288,"props":5359,"children":5360},{"class":301},[5361],{"type":24,"value":5362},"plt.clf()\n",{"type":18,"tag":288,"props":5364,"children":5365},{"class":290,"line":317},[5366,5371,5376],{"type":18,"tag":288,"props":5367,"children":5368},{"class":301},[5369],{"type":24,"value":5370},"plt.gcf().canvas.mpl_connect(",{"type":18,"tag":288,"props":5372,"children":5373},{"class":1710},[5374],{"type":24,"value":5375},"'key_release_event'",{"type":18,"tag":288,"props":5377,"children":5378},{"class":301},[5379],{"type":24,"value":5380},",\n",{"type":18,"tag":288,"props":5382,"children":5383},{"class":290,"line":326},[5384,5388,5392,5397,5402,5407,5411,5415,5420,5425,5430,5434,5439,5443,5448,5452,5457],{"type":18,"tag":288,"props":5385,"children":5386},{"class":301},[5387],{"type":24,"value":3448},{"type":18,"tag":288,"props":5389,"children":5390},{"class":295},[5391],{"type":24,"value":573},{"type":18,"tag":288,"props":5393,"children":5394},{"class":301},[5395],{"type":24,"value":5396}," event: [",{"type":18,"tag":288,"props":5398,"children":5399},{"class":355},[5400],{"type":24,"value":5401},"exit",{"type":18,"tag":288,"props":5403,"children":5404},{"class":301},[5405],{"type":24,"value":5406},"(",{"type":18,"tag":288,"props":5408,"children":5409},{"class":355},[5410],{"type":24,"value":592},{"type":18,"tag":288,"props":5412,"children":5413},{"class":301},[5414],{"type":24,"value":782},{"type":18,"tag":288,"props":5416,"children":5417},{"class":295},[5418],{"type":24,"value":5419},"if",{"type":18,"tag":288,"props":5421,"children":5422},{"class":301},[5423],{"type":24,"value":5424}," event.key ",{"type":18,"tag":288,"props":5426,"children":5427},{"class":295},[5428],{"type":24,"value":5429},"==",{"type":18,"tag":288,"props":5431,"children":5432},{"class":301},[5433],{"type":24,"value":352},{"type":18,"tag":288,"props":5435,"children":5436},{"class":1710},[5437],{"type":24,"value":5438},"'escape'",{"type":18,"tag":288,"props":5440,"children":5441},{"class":301},[5442],{"type":24,"value":352},{"type":18,"tag":288,"props":5444,"children":5445},{"class":295},[5446],{"type":24,"value":5447},"else",{"type":18,"tag":288,"props":5449,"children":5450},{"class":301},[5451],{"type":24,"value":352},{"type":18,"tag":288,"props":5453,"children":5454},{"class":355},[5455],{"type":24,"value":5456},"None",{"type":18,"tag":288,"props":5458,"children":5459},{"class":301},[5460],{"type":24,"value":677},{"type":18,"tag":288,"props":5462,"children":5463},{"class":290,"line":336},[5464],{"type":18,"tag":288,"props":5465,"children":5466},{"class":301},[5467],{"type":24,"value":5468},"plot_arrow(current_x, current_y, current_yaw)\n",{"type":18,"tag":288,"props":5470,"children":5471},{"class":290,"line":361},[5472,5477,5482,5486,5490],{"type":18,"tag":288,"props":5473,"children":5474},{"class":301},[5475],{"type":24,"value":5476},"plt.plot(",{"type":18,"tag":288,"props":5478,"children":5479},{"class":355},[5480],{"type":24,"value":5481},"5",{"type":18,"tag":288,"props":5483,"children":5484},{"class":301},[5485],{"type":24,"value":2031},{"type":18,"tag":288,"props":5487,"children":5488},{"class":355},[5489],{"type":24,"value":5481},{"type":18,"tag":288,"props":5491,"children":5492},{"class":301},[5493],{"type":24,"value":1718},{"type":18,"tag":288,"props":5495,"children":5496},{"class":290,"line":370},[5497,5502,5506,5511,5515,5520,5525,5529,5533,5537,5542,5546,5551,5555,5560,5564,5569],{"type":18,"tag":288,"props":5498,"children":5499},{"class":301},[5500],{"type":24,"value":5501},"plt.plot(ref_path[",{"type":18,"tag":288,"props":5503,"children":5504},{"class":355},[5505],{"type":24,"value":592},{"type":18,"tag":288,"props":5507,"children":5508},{"class":301},[5509],{"type":24,"value":5510},"], ref_path[",{"type":18,"tag":288,"props":5512,"children":5513},{"class":355},[5514],{"type":24,"value":663},{"type":18,"tag":288,"props":5516,"children":5517},{"class":301},[5518],{"type":24,"value":5519},"], ",{"type":18,"tag":288,"props":5521,"children":5522},{"class":3451},[5523],{"type":24,"value":5524},"marker",{"type":18,"tag":288,"props":5526,"children":5527},{"class":295},[5528],{"type":24,"value":347},{"type":18,"tag":288,"props":5530,"children":5531},{"class":1710},[5532],{"type":24,"value":1713},{"type":18,"tag":288,"props":5534,"children":5535},{"class":301},[5536],{"type":24,"value":2031},{"type":18,"tag":288,"props":5538,"children":5539},{"class":3451},[5540],{"type":24,"value":5541},"color",{"type":18,"tag":288,"props":5543,"children":5544},{"class":295},[5545],{"type":24,"value":347},{"type":18,"tag":288,"props":5547,"children":5548},{"class":1710},[5549],{"type":24,"value":5550},"\"blue\"",{"type":18,"tag":288,"props":5552,"children":5553},{"class":301},[5554],{"type":24,"value":2031},{"type":18,"tag":288,"props":5556,"children":5557},{"class":3451},[5558],{"type":24,"value":5559},"label",{"type":18,"tag":288,"props":5561,"children":5562},{"class":295},[5563],{"type":24,"value":347},{"type":18,"tag":288,"props":5565,"children":5566},{"class":1710},[5567],{"type":24,"value":5568},"\"Input Trajectory\"",{"type":18,"tag":288,"props":5570,"children":5571},{"class":301},[5572],{"type":24,"value":1718},{"type":18,"tag":288,"props":5574,"children":5575},{"class":290,"line":392},[5576,5581,5586],{"type":18,"tag":288,"props":5577,"children":5578},{"class":301},[5579],{"type":24,"value":5580},"plt.axis(",{"type":18,"tag":288,"props":5582,"children":5583},{"class":1710},[5584],{"type":24,"value":5585},"\"equal\"",{"type":18,"tag":288,"props":5587,"children":5588},{"class":301},[5589],{"type":24,"value":1718},{"type":18,"tag":288,"props":5591,"children":5592},{"class":290,"line":401},[5593,5598,5603],{"type":18,"tag":288,"props":5594,"children":5595},{"class":301},[5596],{"type":24,"value":5597},"plt.grid(",{"type":18,"tag":288,"props":5599,"children":5600},{"class":355},[5601],{"type":24,"value":5602},"True",{"type":18,"tag":288,"props":5604,"children":5605},{"class":301},[5606],{"type":24,"value":1718},{"type":18,"tag":288,"props":5608,"children":5609},{"class":290,"line":423},[5610],{"type":18,"tag":288,"props":5611,"children":5612},{"class":301},[5613],{"type":24,"value":5614},"plt.legend()\n",{"type":18,"tag":288,"props":5616,"children":5617},{"class":290,"line":444},[5618,5623,5628],{"type":18,"tag":288,"props":5619,"children":5620},{"class":301},[5621],{"type":24,"value":5622},"plt.pause(",{"type":18,"tag":288,"props":5624,"children":5625},{"class":355},[5626],{"type":24,"value":5627},"0.0001",{"type":18,"tag":288,"props":5629,"children":5630},{"class":301},[5631],{"type":24,"value":5632},")",{"type":18,"tag":5066,"props":5634,"children":5636},{"id":5635},"path-tracking",[5637],{"type":24,"value":5638},"Path Tracking",{"type":18,"tag":27,"props":5640,"children":5641},{},[5642,5644,5649,5651,5656],{"type":24,"value":5643},"The code is all way the same. The different is that, I fit the continuous point into the robot instead of fixed goal point. I use ",{"type":18,"tag":1611,"props":5645,"children":5646},{},[5647],{"type":24,"value":5648},"BeizerCurve",{"type":24,"value":5650}," function to generate ",{"type":18,"tag":229,"props":5652,"children":5653},{},[5654],{"type":24,"value":5655}," Spline Trajectory ",{"type":24,"value":5657}," for the robot.",{"type":18,"tag":27,"props":5659,"children":5660},{},[5661,5663,5670],{"type":24,"value":5662},"The full code is published open-source on my Github. Link here ",{"type":18,"tag":3820,"props":5664,"children":5667},{"href":5665,"rel":5666},"https://github.com/SokhengDin/PathTracking/tree/main/PID",[3824],[5668],{"type":24,"value":5669},"Github",{"type":24,"value":5671},". Hit the star for me if you like my work .",{"type":18,"tag":5066,"props":5673,"children":5674},{"id":3768},[5675],{"type":24,"value":3771},{"type":18,"tag":3773,"props":5677,"children":5679},{"className":5678},[3776,3777,3778],[5680,5681],{"type":24,"value":3781},{"type":18,"tag":43,"props":5682,"children":5685},{"className":5683,"src":5684},[46],"/topics/robotics/nmpc/Figure_pid_p.png",[],{"type":18,"tag":56,"props":5687,"children":5689},{"className":5688},[59,60,61,62],[5690],{"type":24,"value":5691},"\n    PID Controller with position control on Differential Drive Robot\n",{"type":18,"tag":3773,"props":5693,"children":5695},{"className":5694},[3776,3777,3778],[5696,5697],{"type":24,"value":3781},{"type":18,"tag":43,"props":5698,"children":5701},{"className":5699,"src":5700},[46],"/topics/robotics/nmpc/Figure_pid_t.png",[],{"type":18,"tag":56,"props":5703,"children":5705},{"className":5704},[59,60,61,62],[5706],{"type":24,"value":5707},"\n    PID Controller with path tracking control on Differential Drive Robot\n",{"type":18,"tag":19,"props":5709,"children":5710},{"id":3795},[5711],{"type":24,"value":5712},"In Conclusion",{"type":18,"tag":27,"props":5714,"children":5715},{},[5716],{"type":24,"value":5717},"In my opinion, the PID Controller is an excellent choice for most control system applications due to its simplicity and powerful capabilities in handling complex control challenges arising from various systems.",{"type":18,"tag":19,"props":5719,"children":5721},{"id":5720},"references",[5722],{"type":24,"value":5723},"References",{"type":18,"tag":3811,"props":5725,"children":5726},{},[5727,5740,5745,5756],{"type":18,"tag":117,"props":5728,"children":5729},{},[5730,5732,5739],{"type":24,"value":5731},"BeizerCurve: ",{"type":18,"tag":3820,"props":5733,"children":5736},{"href":5734,"rel":5735},"https://en.wikipedia.org/wiki/B%C3%A9zier_curve",[3824],[5737],{"type":24,"value":5738},"https://en.wikipedia.org/wiki/Bzier_curve",{"type":24,"value":3884},{"type":18,"tag":117,"props":5741,"children":5742},{},[5743],{"type":24,"value":5744},"PID Controller: Control Systems Engineering by Normal S. Nise.",{"type":18,"tag":117,"props":5746,"children":5747},{},[5748,5750],{"type":24,"value":5749},"Beizer Path : ",{"type":18,"tag":3820,"props":5751,"children":5754},{"href":5752,"rel":5753},"https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning/BezierPath",[3824],[5755],{"type":24,"value":5752},{"type":18,"tag":117,"props":5757,"children":5758},{},[5759,5761],{"type":24,"value":5760},"PID Lecture : ",{"type":18,"tag":3820,"props":5762,"children":5765},{"href":5763,"rel":5764},"https://www.cds.caltech.edu/~murray/courses/cds101/fa02/caltech/astrom-ch6.pdf",[3824],[5766],{"type":24,"value":5763},{"type":18,"tag":3839,"children":5768},[5769],{"type":24,"value":5770},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-806137{color:#B392F0;}\n.ct-533739{color:#79B8FF;}\n.ct-326375{color:#6A737D;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":317,"depth":317,"links":5772},[5773,5774,5775,5776,5777,5778,5783,5784],{"id":3870,"depth":317,"text":3873},{"id":3887,"depth":317,"text":3890},{"id":3898,"depth":317,"text":3901},{"id":3962,"depth":317,"text":3965},{"id":4023,"depth":317,"text":4026},{"id":5061,"depth":317,"text":5064,"children":5779},[5780,5781,5782],{"id":5068,"depth":326,"text":5071},{"id":5635,"depth":326,"text":5638},{"id":3768,"depth":326,"text":3771},{"id":3795,"depth":317,"text":5712},{"id":5720,"depth":317,"text":5723},"content:topics:robotics:pid-controller.md","topics/robotics/pid-controller.md",{"_path":5788,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":5789,"description":5790,"slug":5791,"tag":5791,"img":5792,"body":5793,"_type":3854,"_id":5983,"_source":3856,"_file":5984,"_extension":3858},"/topics/robotics/pure-pursuit","Pure Pursuit Controller","Introduction to Pure Pursuit Controller","pure-pursuit","/topics/robotics/nmpc/pure_pursuit.png",{"type":15,"children":5794,"toc":5976},[5795,5800,5810,5816,5821,5874,5880,5885,5937,5943,5948,5971],{"type":18,"tag":19,"props":5796,"children":5798},{"id":5797},"pure-pursuit-controller",[5799],{"type":24,"value":5789},{"type":18,"tag":27,"props":5801,"children":5802},{},[5803,5804,5808],{"type":24,"value":4493},{"type":18,"tag":229,"props":5805,"children":5806},{},[5807],{"type":24,"value":5789},{"type":24,"value":5809}," is a widely-used path-tracking algorithm in robotics and autonomous vehicle navigation. Its primary objective is to guide a vehicle or robot along a predefined path while ensuring precise path-following.",{"type":18,"tag":5066,"props":5811,"children":5813},{"id":5812},"principle-of-operation",[5814],{"type":24,"value":5815},"Principle of Operation",{"type":18,"tag":27,"props":5817,"children":5818},{},[5819],{"type":24,"value":5820},"The operation of the Pure Pursuit Controller is based on a straightforward concept:",{"type":18,"tag":3811,"props":5822,"children":5823},{},[5824,5834,5844,5854,5864],{"type":18,"tag":117,"props":5825,"children":5826},{},[5827,5832],{"type":18,"tag":229,"props":5828,"children":5829},{},[5830],{"type":24,"value":5831},"Path Definition",{"type":24,"value":5833},": The controller works with a defined path, often represented as a series of waypoints or a continuous curve, each associated with specific coordinates (x, y) and curvature information.",{"type":18,"tag":117,"props":5835,"children":5836},{},[5837,5842],{"type":18,"tag":229,"props":5838,"children":5839},{},[5840],{"type":24,"value":5841},"Target Point Selection",{"type":24,"value":5843},": The controller continuously selects a target point ahead of the vehicle. This target point is typically chosen as the point on the path that is a certain fixed distance (known as the \"lookahead distance\") in front of the vehicle.",{"type":18,"tag":117,"props":5845,"children":5846},{},[5847,5852],{"type":18,"tag":229,"props":5848,"children":5849},{},[5850],{"type":24,"value":5851},"Steering Command Calculation",{"type":24,"value":5853},": To navigate toward the target point, the controller calculates the steering command, often represented as the desired steering angle or curvature, required to reach the target point. Commonly, this involves computing the angle between the vehicle's current heading and the vector pointing from the current position to the target point.",{"type":18,"tag":117,"props":5855,"children":5856},{},[5857,5862],{"type":18,"tag":229,"props":5858,"children":5859},{},[5860],{"type":24,"value":5861},"Vehicle Control",{"type":24,"value":5863},": The calculated steering command is used to control the vehicle's steering mechanism (e.g., steering wheel or wheel angles) to guide it toward the target point.",{"type":18,"tag":117,"props":5865,"children":5866},{},[5867,5872],{"type":18,"tag":229,"props":5868,"children":5869},{},[5870],{"type":24,"value":5871},"Iterative Process",{"type":24,"value":5873},": The process is iterative, with the controller continuously selecting new target points ahead as the vehicle advances along the path and adjusting its steering to reach them.",{"type":18,"tag":5066,"props":5875,"children":5877},{"id":5876},"advantages",[5878],{"type":24,"value":5879},"Advantages",{"type":18,"tag":27,"props":5881,"children":5882},{},[5883],{"type":24,"value":5884},"The Pure Pursuit Controller offers several advantages:",{"type":18,"tag":113,"props":5886,"children":5887},{},[5888,5898,5907,5917,5927],{"type":18,"tag":117,"props":5889,"children":5890},{},[5891,5896],{"type":18,"tag":229,"props":5892,"children":5893},{},[5894],{"type":24,"value":5895},"Simplicity",{"type":24,"value":5897},": It is conceptually simple and easy to implement, making it suitable for a wide range of robotic and vehicle navigation applications.",{"type":18,"tag":117,"props":5899,"children":5900},{},[5901,5905],{"type":18,"tag":229,"props":5902,"children":5903},{},[5904],{"type":24,"value":5638},{"type":24,"value":5906},": The controller excels at accurate path tracking, even in complex environments with curves and turns.",{"type":18,"tag":117,"props":5908,"children":5909},{},[5910,5915],{"type":18,"tag":229,"props":5911,"children":5912},{},[5913],{"type":24,"value":5914},"Real-Time Operation",{"type":24,"value":5916},": It can operate in real-time, making it well-suited for dynamic environments where quick decision-making is crucial.",{"type":18,"tag":117,"props":5918,"children":5919},{},[5920,5925],{"type":18,"tag":229,"props":5921,"children":5922},{},[5923],{"type":24,"value":5924},"Adaptability",{"type":24,"value":5926},": The controller can adapt to changes in the path, such as deviations caused by obstacles or unexpected conditions, by continuously updating the target point.",{"type":18,"tag":117,"props":5928,"children":5929},{},[5930,5935],{"type":18,"tag":229,"props":5931,"children":5932},{},[5933],{"type":24,"value":5934},"Low Computational Overhead",{"type":24,"value":5936},": Compared to some other control algorithms, the Pure Pursuit Controller often has low computational requirements, which is advantageous for resource-constrained systems.",{"type":18,"tag":5066,"props":5938,"children":5940},{"id":5939},"limitations",[5941],{"type":24,"value":5942},"Limitations",{"type":18,"tag":27,"props":5944,"children":5945},{},[5946],{"type":24,"value":5947},"Despite its advantages, the Pure Pursuit Controller has some limitations:",{"type":18,"tag":113,"props":5949,"children":5950},{},[5951,5961],{"type":18,"tag":117,"props":5952,"children":5953},{},[5954,5959],{"type":18,"tag":229,"props":5955,"children":5956},{},[5957],{"type":24,"value":5958},"Lookahead Distance Sensitivity",{"type":24,"value":5960},": Its performance can be sensitive to the choice of the lookahead distance, which requires careful tuning for optimal path tracking.",{"type":18,"tag":117,"props":5962,"children":5963},{},[5964,5969],{"type":18,"tag":229,"props":5965,"children":5966},{},[5967],{"type":24,"value":5968},"Non-Holonomic Assumption",{"type":24,"value":5970},": The controller assumes that the vehicle is non-holonomic, meaning it cannot move sideways. This assumption may not hold for certain types of vehicles, such as omnidirectional robots.",{"type":18,"tag":27,"props":5972,"children":5973},{},[5974],{"type":24,"value":5975},"In summary, the Pure Pursuit Controller is a straightforward yet effective algorithm for path tracking and navigation. Its ability to calculate a steering command based on a selected target point ahead of the vehicle makes it a valuable tool for applications ranging from autonomous cars to mobile robots.",{"title":8,"searchDepth":317,"depth":317,"links":5977},[5978],{"id":5797,"depth":317,"text":5789,"children":5979},[5980,5981,5982],{"id":5812,"depth":326,"text":5815},{"id":5876,"depth":326,"text":5879},{"id":5939,"depth":326,"text":5942},"content:topics:robotics:pure-pursuit.md","topics/robotics/pure-pursuit.md",{"_path":5986,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":5987,"description":5988,"slug":5989,"tag":5989,"body":5990,"_type":3854,"_id":6191,"_source":3856,"_file":6192,"_extension":3858},"/topics/robotics/stanley-controller","Stanley Controller","Introduction to Stanley Controller","stanley",{"type":15,"children":5991,"toc":6184},[5992,5997,6007,6011,6016,6077,6081,6086,6137,6141,6146,6179],{"type":18,"tag":19,"props":5993,"children":5995},{"id":5994},"stanley-controller",[5996],{"type":24,"value":5987},{"type":18,"tag":27,"props":5998,"children":5999},{},[6000,6001,6005],{"type":24,"value":4493},{"type":18,"tag":229,"props":6002,"children":6003},{},[6004],{"type":24,"value":5987},{"type":24,"value":6006}," is an advanced path-tracking algorithm primarily used in the field of autonomous vehicle navigation. It is named after its creator, Professor John K. Hedrick, who developed it at Stanford University. The Stanley Controller is designed to enable a vehicle to follow a predefined path with high accuracy and stability.",{"type":18,"tag":5066,"props":6008,"children":6009},{"id":5812},[6010],{"type":24,"value":5815},{"type":18,"tag":27,"props":6012,"children":6013},{},[6014],{"type":24,"value":6015},"The Stanley Controller operates based on a combination of control and feedback mechanisms:",{"type":18,"tag":3811,"props":6017,"children":6018},{},[6019,6028,6038,6048,6058,6067],{"type":18,"tag":117,"props":6020,"children":6021},{},[6022,6026],{"type":18,"tag":229,"props":6023,"children":6024},{},[6025],{"type":24,"value":5831},{"type":24,"value":6027},": A predefined path is represented as a series of waypoints or a continuous curve. Each waypoint is associated with specific coordinates (x, y) and often includes additional information like desired speed and curvature.",{"type":18,"tag":117,"props":6029,"children":6030},{},[6031,6036],{"type":18,"tag":229,"props":6032,"children":6033},{},[6034],{"type":24,"value":6035},"Cross-Track Error (CTE) Calculation",{"type":24,"value":6037},": The controller calculates the cross-track error, which is the perpendicular distance between the vehicle's current position and the desired path. This error represents how far the vehicle has deviated from the path.",{"type":18,"tag":117,"props":6039,"children":6040},{},[6041,6046],{"type":18,"tag":229,"props":6042,"children":6043},{},[6044],{"type":24,"value":6045},"Heading Error Calculation",{"type":24,"value":6047},": The heading error, which is the difference between the vehicle's current heading (yaw angle) and the desired path's tangent angle at the nearest waypoint, is also computed.",{"type":18,"tag":117,"props":6049,"children":6050},{},[6051,6056],{"type":18,"tag":229,"props":6052,"children":6053},{},[6054],{"type":24,"value":6055},"Control Command Generation",{"type":24,"value":6057},": Using the calculated cross-track error and heading error, the Stanley Controller generates control commands. These commands typically include steering angle adjustments and throttle/brake control to minimize both errors.",{"type":18,"tag":117,"props":6059,"children":6060},{},[6061,6065],{"type":18,"tag":229,"props":6062,"children":6063},{},[6064],{"type":24,"value":5861},{"type":24,"value":6066},": The generated control commands are applied to the vehicle's steering and throttle/brake systems to guide it back to the desired path.",{"type":18,"tag":117,"props":6068,"children":6069},{},[6070,6075],{"type":18,"tag":229,"props":6071,"children":6072},{},[6073],{"type":24,"value":6074},"Iterative Feedback",{"type":24,"value":6076},": The process is iterative, with the controller continuously recalculating the cross-track and heading errors and adjusting the control commands to keep the vehicle on track.",{"type":18,"tag":5066,"props":6078,"children":6079},{"id":5876},[6080],{"type":24,"value":5879},{"type":18,"tag":27,"props":6082,"children":6083},{},[6084],{"type":24,"value":6085},"The Stanley Controller offers several advantages:",{"type":18,"tag":113,"props":6087,"children":6088},{},[6089,6099,6109,6118,6127],{"type":18,"tag":117,"props":6090,"children":6091},{},[6092,6097],{"type":18,"tag":229,"props":6093,"children":6094},{},[6095],{"type":24,"value":6096},"High Accuracy",{"type":24,"value":6098},": It is known for its ability to achieve precise path-following, even in challenging conditions and complex road geometries.",{"type":18,"tag":117,"props":6100,"children":6101},{},[6102,6107],{"type":18,"tag":229,"props":6103,"children":6104},{},[6105],{"type":24,"value":6106},"Stability",{"type":24,"value":6108},": The controller's feedback mechanisms contribute to stable and smooth vehicle motion, reducing the risk of overshooting or oscillations.",{"type":18,"tag":117,"props":6110,"children":6111},{},[6112,6116],{"type":18,"tag":229,"props":6113,"children":6114},{},[6115],{"type":24,"value":5924},{"type":24,"value":6117},": The Stanley Controller can adapt to changes in the path, such as deviations caused by obstacles or dynamic road conditions.",{"type":18,"tag":117,"props":6119,"children":6120},{},[6121,6125],{"type":18,"tag":229,"props":6122,"children":6123},{},[6124],{"type":24,"value":5914},{"type":24,"value":6126},": It can operate in real-time, making it suitable for autonomous vehicle navigation in dynamic environments.",{"type":18,"tag":117,"props":6128,"children":6129},{},[6130,6135],{"type":18,"tag":229,"props":6131,"children":6132},{},[6133],{"type":24,"value":6134},"Versatility",{"type":24,"value":6136},": While primarily used in autonomous vehicles, the Stanley Controller's principles can be applied to various path-tracking tasks.",{"type":18,"tag":5066,"props":6138,"children":6139},{"id":5939},[6140],{"type":24,"value":5942},{"type":18,"tag":27,"props":6142,"children":6143},{},[6144],{"type":24,"value":6145},"Despite its advantages, the Stanley Controller has some limitations:",{"type":18,"tag":113,"props":6147,"children":6148},{},[6149,6159,6169],{"type":18,"tag":117,"props":6150,"children":6151},{},[6152,6157],{"type":18,"tag":229,"props":6153,"children":6154},{},[6155],{"type":24,"value":6156},"Complexity",{"type":24,"value":6158},": Implementing the Stanley Controller can be more complex than some other control algorithms due to its mathematical calculations and tuning requirements.",{"type":18,"tag":117,"props":6160,"children":6161},{},[6162,6167],{"type":18,"tag":229,"props":6163,"children":6164},{},[6165],{"type":24,"value":6166},"Initialization",{"type":24,"value":6168},": It relies on accurate initialization, including knowledge of the vehicle's initial position and heading relative to the path.",{"type":18,"tag":117,"props":6170,"children":6171},{},[6172,6177],{"type":18,"tag":229,"props":6173,"children":6174},{},[6175],{"type":24,"value":6176},"Sensitivity to Noise",{"type":24,"value":6178},": Like many feedback-based controllers, the Stanley Controller can be sensitive to noisy sensor data and require robust sensor fusion techniques.",{"type":18,"tag":27,"props":6180,"children":6181},{},[6182],{"type":24,"value":6183},"In summary, the Stanley Controller is an advanced path-tracking algorithm known for its accuracy and stability, making it a valuable tool in the field of autonomous vehicle navigation. Proper implementation and tuning are essential to harness its full potential.",{"title":8,"searchDepth":317,"depth":317,"links":6185},[6186],{"id":5994,"depth":317,"text":5987,"children":6187},[6188,6189,6190],{"id":5812,"depth":326,"text":5815},{"id":5876,"depth":326,"text":5879},{"id":5939,"depth":326,"text":5942},"content:topics:robotics:stanley-controller.md","topics/robotics/stanley-controller.md",1694082074491]