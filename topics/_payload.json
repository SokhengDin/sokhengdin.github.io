[{"data":1,"prerenderedAt":6447},["Reactive",2],{"topics/robotics":3},[4,4090,5998,6239],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":9,"description":10,"author":11,"slug":12,"tag":12,"img":13,"body":14,"_type":4085,"_id":4086,"_source":4087,"_file":4088,"_extension":4089},"/topics/robotics/nonlinear-mpc","robotics",false,"","Nonlinear Model Predictive Control","Introduction to Nonlinear Model Predictive Control","Din Sokheng","nonlinear-mpc","/topics/robotics/nmpc/predict_horizon.png",{"type":15,"children":16,"toc":4074},"root",[17,26,32,58,69,75,89,94,99,104,109,114,157,162,166,171,219,225,238,242,247,252,257,262,266,270,275,1519,1525,1530,1534,1538,1543,1547,1553,1558,1562,1578,1582,1586,1590,1596,1609,1641,1646,2179,2184,2362,2371,2627,2632,3646,3651,4002,4008,4013,4027,4033,4039,4044,4050,4069],{"type":18,"tag":19,"props":20,"children":22},"element","h2",{"id":21},"what-is-model-predictive-control",[23],{"type":24,"value":25},"text","What is Model Predictive Control ?",{"type":18,"tag":27,"props":28,"children":29},"p",{},[30],{"type":24,"value":31},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":18,"tag":33,"props":34,"children":41},"div",{"className":35},[36,37,38,39,40],"grid","grid-cols-2","space-x-10","justify-center","items-center",[42,44,52,53],{"type":24,"value":43},"\n  ",{"type":18,"tag":45,"props":46,"children":51},"img",{"className":47,"src":13,"width":49,"height":50},[48],"mx-auto",600,300,[],{"type":24,"value":43},{"type":18,"tag":45,"props":54,"children":57},{"className":55,"src":56,"width":49,"height":50},[48],"/topics/robotics/nmpc/set_points.png",[],{"type":18,"tag":59,"props":60,"children":66},"figcaption",{"className":61},[62,63,64,65],"text-center","text-sm","text-neutral-600","dark:text-neutral-400",[67],{"type":24,"value":68},"\n  A car with finite horizons prediction and set point prediction over finite horizons.\n",{"type":18,"tag":19,"props":70,"children":72},{"id":71},"nonlinear-model-predictive-control",[73],{"type":24,"value":74},"Nonlinear Model Predictive Control ?",{"type":18,"tag":27,"props":76,"children":77},{},[78,80,84,86],{"type":24,"value":79},"Nonlinear Model Predictive Control has the same basic core of its control algorithms. The different is about the mathematical solving over the system. ",{"type":18,"tag":81,"props":82,"children":83},"br",{},[],{"type":24,"value":85},"\nIn the real-life application, most of the system certainly nonlinear and it's more complex than linear model. Linear systems are mostly time-invariant, meaning that the response of the system input is time-independent. Nonlinear systems are time-varying meaning that the response of the system to any input is time-dependent.",{"type":18,"tag":81,"props":87,"children":88},{},[],{"type":18,"tag":27,"props":90,"children":91},{},[92],{"type":24,"value":93},"The system model can be represent as state-space model",{"type":18,"tag":27,"props":95,"children":96},{},[97],{"type":24,"value":98},"$$ \\dot{X} = f(X,U) $$",{"type":18,"tag":27,"props":100,"children":101},{},[102],{"type":24,"value":103},"Nonlinear Model Predictive Control also works by solving the quardratic cost subject to the nonlinear function over a future finite horizons. The quadractic cost can be define as",{"type":18,"tag":105,"props":106,"children":108},"math-render-b",{"latex-express":107,"styles":62},"J(x,u) = \\displaystyle\\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})",[],{"type":18,"tag":27,"props":110,"children":111},{},[112],{"type":24,"value":113},"Notation",{"type":18,"tag":115,"props":116,"children":117},"ul",{},[118,130,139,148],{"type":18,"tag":119,"props":120,"children":121},"li",{},[122,128],{"type":18,"tag":123,"props":124,"children":127},"math-render",{"latex-express":125,"styles":126},"X","inline-flex",[],{"type":24,"value":129}," is the state of the system. This shall be obtained from the optimiztion problem.",{"type":18,"tag":119,"props":131,"children":132},{},[133,137],{"type":18,"tag":123,"props":134,"children":136},{"latex-express":135,"styles":126},"X_{ref}",[],{"type":24,"value":138}," is the reference state of the system or desired input state.",{"type":18,"tag":119,"props":140,"children":141},{},[142,146],{"type":18,"tag":123,"props":143,"children":145},{"latex-express":144,"styles":126},"U",[],{"type":24,"value":147}," is the input control of the system. This is a solution obtained from the optimization problem.",{"type":18,"tag":119,"props":149,"children":150},{},[151,155],{"type":18,"tag":123,"props":152,"children":154},{"latex-express":153,"styles":126},"U_{ref}",[],{"type":24,"value":156}," is the reference control of the system or desired input control.",{"type":18,"tag":27,"props":158,"children":159},{},[160],{"type":24,"value":161},"Rewrite the optimization of NMPC problem.",{"type":18,"tag":105,"props":163,"children":165},{"latex-express":164,"styles":62},"\n      \\begin{align*}\n            \\min_{u_{0}, u_{1}, ..., u_{N-1} } \\quad \\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}&Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})\\\\\n            \\text{subject to} \\quad & x_{k+1} = f(x_k, u_k) \\quad \\text{(System dynamics)} \\\\\n            & g(x_k, x_k) \\leq 0 \\quad \\text{(State constraints)} \\\\\n            & h(x_k, x_k) \\leq 0 \\quad \\text{(Input constraints)} \\\\\n            & p(x_k) \\leq 0 \\quad \\text{(Path constraints)} \\\\\n            & x_0=x(0)  \\quad \\text{(Initial condition)}\n      \\end{align*}\n            ",[],{"type":18,"tag":27,"props":167,"children":168},{},[169],{"type":24,"value":170},"Which,",{"type":18,"tag":115,"props":172,"children":173},{},[174,183,192,201,209],{"type":18,"tag":119,"props":175,"children":176},{},[177,181],{"type":18,"tag":123,"props":178,"children":180},{"latex-express":179,"styles":126},"f",[],{"type":24,"value":182}," is the system dynamics model.",{"type":18,"tag":119,"props":184,"children":185},{},[186,190],{"type":18,"tag":123,"props":187,"children":189},{"latex-express":188,"styles":126},"g",[],{"type":24,"value":191}," is the state constraints of the system.",{"type":18,"tag":119,"props":193,"children":194},{},[195,199],{"type":18,"tag":123,"props":196,"children":198},{"latex-express":197,"styles":126},"h",[],{"type":24,"value":200}," is the input constraints of the system.",{"type":18,"tag":119,"props":202,"children":203},{},[204,207],{"type":18,"tag":123,"props":205,"children":206},{"latex-express":27,"styles":126},[],{"type":24,"value":208}," is the path constraint, it help to ensure the safety following path of our system.",{"type":18,"tag":119,"props":210,"children":211},{},[212,217],{"type":18,"tag":123,"props":213,"children":216},{"latex-express":214,"styles":126,"dist-cond":215},"\\phi(X_{N})","false",[],{"type":24,"value":218}," is the terminal cost of the system.",{"type":18,"tag":19,"props":220,"children":222},{"id":221},"discretize-the-system-model-with-runge-kutta-4th-order",[223],{"type":24,"value":224},"Discretize the system model with Runge-Kutta 4th order",{"type":18,"tag":27,"props":226,"children":227},{},[228,230,236],{"type":24,"value":229},"I will choose a simple system mode robot ",{"type":18,"tag":231,"props":232,"children":233},"strong",{},[234],{"type":24,"value":235}," DifferentialDrive ",{"type":24,"value":237},".\nThe forward kinematic equation",{"type":18,"tag":105,"props":239,"children":241},{"latex-express":240,"styles":62},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":243,"children":244},{},[245],{"type":24,"value":246},"State constraints are the restriction imposed on the state variable of the system. It helps our optimizer not to obtain the solution that is outside the boundary region and also ensure the system to always perform the minimal action control in any critical condition.",{"type":18,"tag":27,"props":248,"children":249},{},[250],{"type":24,"value":251},"We, then can do the approximation",{"type":18,"tag":105,"props":253,"children":256},{"latex-express":254,"styles":62,"dist-cond":255},"\n    \\begin{align*}\n        k_{1} &= f(x^{*}, u^{*}) \\\\\n        k_{2} &= f(x^{*}+k_{1}\\frac{dt}{2}, u^{*}) \\\\ \n        k_{3} &= f(x^{*}+k_{2}\\frac{dt}{2}, u^{*}) \\\\\n        k_{4} &= f(x^{*}+k_{3}dt, u^{*}) \\\\ \n        \\Rightarrow{x_{k+1} } &= x_{k} + (k_{1}+2k_{2}+2k_{3}+k_{4})\\frac{dt}{6}\n    \\end{align*}\n","true",[],{"type":18,"tag":27,"props":258,"children":259},{},[260],{"type":24,"value":261},"Let's evaluate it with our model.",{"type":18,"tag":105,"props":263,"children":265},{"latex-express":264,"styles":62},"\n      \\begin{align*}\n        k_{1} &= \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n        k_{2} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{3} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{4} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n    \\end{align*}\n      ",[],{"type":18,"tag":105,"props":267,"children":269},{"latex-express":268,"styles":62},"\n      \\Rightarrow{x_{k+1} } = x_{k} + \\left( \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} + \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix}   \\right) \\frac{dt}{6}\n",[],{"type":18,"tag":27,"props":271,"children":272},{},[273],{"type":24,"value":274},"How to implement it in Python ???",{"type":18,"tag":276,"props":277,"children":282},"code",{"className":278,"code":280,"language":281,"meta":8},[279],"language-python","import numpy as np\n\n## Define sampling time dt 100Hz\ndt = 0.01\n## Define the num steps for function approximation \nnum_steps = 100\n## Define initial states\nx = 0.0\ny = 0.0\nyaw = 0.0\n## Define input control\nv = 1.5 #m/s\nomega = 1.57 #rad/s\n## Define state represent model\n### define lambda function take variable x\nf = lambda x, u :  np.array([\n      [u[0]*np.cos(x[2])],\n      [u[0]*np.sin(x[2])],\n      [u[1]]\n])\n\nfor _ in range(num_steps):\n    k1 = f([x, y, yaw], [v, omega])\n    k2 = f([x + (dt / 2) * k1[0], y + (dt / 2) * k1[1], yaw + (dt / 2) * k1[2]], [v, omega])\n    k3 = f([x + (dt / 2) * k2[0], y + (dt / 2) * k2[1], yaw + (dt / 2) * k2[2]], [v, omega])\n    k4 = f([x + dt * k3[0], y + dt * k3[1], yaw + dt * k3[2]], [v, omega])\n\n    # Update state of the robot\n    x += (k1[0] + 2 * k2[0] + 2 * k3[0] + k4[0]) * dt / 6\n    y += (k1[1] + 2 * k2[1] + 2 * k3[1] + k4[1]) * dt / 6\n    yaw += (k1[2] + 2 * k2[2] + 2 * k3[2] + k4[2]) * dt / 6\n","python",[283],{"type":18,"tag":284,"props":285,"children":286},"pre",{},[287],{"type":18,"tag":276,"props":288,"children":289},{"__ignoreMap":8},[290,318,327,337,362,371,393,402,424,445,466,475,506,537,546,555,582,621,654,672,681,689,722,740,886,1024,1115,1123,1137,1268,1393],{"type":18,"tag":291,"props":292,"children":295},"span",{"class":293,"line":294},"line",1,[296,302,308,313],{"type":18,"tag":291,"props":297,"children":299},{"class":298},"ct-857441",[300],{"type":24,"value":301},"import",{"type":18,"tag":291,"props":303,"children":305},{"class":304},"ct-767297",[306],{"type":24,"value":307}," numpy ",{"type":18,"tag":291,"props":309,"children":310},{"class":298},[311],{"type":24,"value":312},"as",{"type":18,"tag":291,"props":314,"children":315},{"class":304},[316],{"type":24,"value":317}," np\n",{"type":18,"tag":291,"props":319,"children":321},{"class":293,"line":320},2,[322],{"type":18,"tag":291,"props":323,"children":324},{},[325],{"type":24,"value":326},"\n",{"type":18,"tag":291,"props":328,"children":330},{"class":293,"line":329},3,[331],{"type":18,"tag":291,"props":332,"children":334},{"class":333},"ct-326375",[335],{"type":24,"value":336},"## Define sampling time dt 100Hz\n",{"type":18,"tag":291,"props":338,"children":340},{"class":293,"line":339},4,[341,346,351,356],{"type":18,"tag":291,"props":342,"children":343},{"class":304},[344],{"type":24,"value":345},"dt ",{"type":18,"tag":291,"props":347,"children":348},{"class":298},[349],{"type":24,"value":350},"=",{"type":18,"tag":291,"props":352,"children":353},{"class":304},[354],{"type":24,"value":355}," ",{"type":18,"tag":291,"props":357,"children":359},{"class":358},"ct-533739",[360],{"type":24,"value":361},"0.01\n",{"type":18,"tag":291,"props":363,"children":365},{"class":293,"line":364},5,[366],{"type":18,"tag":291,"props":367,"children":368},{"class":333},[369],{"type":24,"value":370},"## Define the num steps for function approximation \n",{"type":18,"tag":291,"props":372,"children":374},{"class":293,"line":373},6,[375,380,384,388],{"type":18,"tag":291,"props":376,"children":377},{"class":304},[378],{"type":24,"value":379},"num_steps ",{"type":18,"tag":291,"props":381,"children":382},{"class":298},[383],{"type":24,"value":350},{"type":18,"tag":291,"props":385,"children":386},{"class":304},[387],{"type":24,"value":355},{"type":18,"tag":291,"props":389,"children":390},{"class":358},[391],{"type":24,"value":392},"100\n",{"type":18,"tag":291,"props":394,"children":396},{"class":293,"line":395},7,[397],{"type":18,"tag":291,"props":398,"children":399},{"class":333},[400],{"type":24,"value":401},"## Define initial states\n",{"type":18,"tag":291,"props":403,"children":405},{"class":293,"line":404},8,[406,411,415,419],{"type":18,"tag":291,"props":407,"children":408},{"class":304},[409],{"type":24,"value":410},"x ",{"type":18,"tag":291,"props":412,"children":413},{"class":298},[414],{"type":24,"value":350},{"type":18,"tag":291,"props":416,"children":417},{"class":304},[418],{"type":24,"value":355},{"type":18,"tag":291,"props":420,"children":421},{"class":358},[422],{"type":24,"value":423},"0.0\n",{"type":18,"tag":291,"props":425,"children":427},{"class":293,"line":426},9,[428,433,437,441],{"type":18,"tag":291,"props":429,"children":430},{"class":304},[431],{"type":24,"value":432},"y ",{"type":18,"tag":291,"props":434,"children":435},{"class":298},[436],{"type":24,"value":350},{"type":18,"tag":291,"props":438,"children":439},{"class":304},[440],{"type":24,"value":355},{"type":18,"tag":291,"props":442,"children":443},{"class":358},[444],{"type":24,"value":423},{"type":18,"tag":291,"props":446,"children":448},{"class":293,"line":447},10,[449,454,458,462],{"type":18,"tag":291,"props":450,"children":451},{"class":304},[452],{"type":24,"value":453},"yaw ",{"type":18,"tag":291,"props":455,"children":456},{"class":298},[457],{"type":24,"value":350},{"type":18,"tag":291,"props":459,"children":460},{"class":304},[461],{"type":24,"value":355},{"type":18,"tag":291,"props":463,"children":464},{"class":358},[465],{"type":24,"value":423},{"type":18,"tag":291,"props":467,"children":469},{"class":293,"line":468},11,[470],{"type":18,"tag":291,"props":471,"children":472},{"class":333},[473],{"type":24,"value":474},"## Define input control\n",{"type":18,"tag":291,"props":476,"children":478},{"class":293,"line":477},12,[479,484,488,492,497,501],{"type":18,"tag":291,"props":480,"children":481},{"class":304},[482],{"type":24,"value":483},"v ",{"type":18,"tag":291,"props":485,"children":486},{"class":298},[487],{"type":24,"value":350},{"type":18,"tag":291,"props":489,"children":490},{"class":304},[491],{"type":24,"value":355},{"type":18,"tag":291,"props":493,"children":494},{"class":358},[495],{"type":24,"value":496},"1.5",{"type":18,"tag":291,"props":498,"children":499},{"class":304},[500],{"type":24,"value":355},{"type":18,"tag":291,"props":502,"children":503},{"class":333},[504],{"type":24,"value":505},"#m/s\n",{"type":18,"tag":291,"props":507,"children":509},{"class":293,"line":508},13,[510,515,519,523,528,532],{"type":18,"tag":291,"props":511,"children":512},{"class":304},[513],{"type":24,"value":514},"omega ",{"type":18,"tag":291,"props":516,"children":517},{"class":298},[518],{"type":24,"value":350},{"type":18,"tag":291,"props":520,"children":521},{"class":304},[522],{"type":24,"value":355},{"type":18,"tag":291,"props":524,"children":525},{"class":358},[526],{"type":24,"value":527},"1.57",{"type":18,"tag":291,"props":529,"children":530},{"class":304},[531],{"type":24,"value":355},{"type":18,"tag":291,"props":533,"children":534},{"class":333},[535],{"type":24,"value":536},"#rad/s\n",{"type":18,"tag":291,"props":538,"children":540},{"class":293,"line":539},14,[541],{"type":18,"tag":291,"props":542,"children":543},{"class":333},[544],{"type":24,"value":545},"## Define state represent model\n",{"type":18,"tag":291,"props":547,"children":549},{"class":293,"line":548},15,[550],{"type":18,"tag":291,"props":551,"children":552},{"class":333},[553],{"type":24,"value":554},"### define lambda function take variable x\n",{"type":18,"tag":291,"props":556,"children":558},{"class":293,"line":557},16,[559,564,568,572,577],{"type":18,"tag":291,"props":560,"children":561},{"class":304},[562],{"type":24,"value":563},"f ",{"type":18,"tag":291,"props":565,"children":566},{"class":298},[567],{"type":24,"value":350},{"type":18,"tag":291,"props":569,"children":570},{"class":304},[571],{"type":24,"value":355},{"type":18,"tag":291,"props":573,"children":574},{"class":298},[575],{"type":24,"value":576},"lambda",{"type":18,"tag":291,"props":578,"children":579},{"class":304},[580],{"type":24,"value":581}," x, u :  np.array([\n",{"type":18,"tag":291,"props":583,"children":585},{"class":293,"line":584},17,[586,591,596,601,606,611,616],{"type":18,"tag":291,"props":587,"children":588},{"class":304},[589],{"type":24,"value":590},"      [u[",{"type":18,"tag":291,"props":592,"children":593},{"class":358},[594],{"type":24,"value":595},"0",{"type":18,"tag":291,"props":597,"children":598},{"class":304},[599],{"type":24,"value":600},"]",{"type":18,"tag":291,"props":602,"children":603},{"class":298},[604],{"type":24,"value":605},"*",{"type":18,"tag":291,"props":607,"children":608},{"class":304},[609],{"type":24,"value":610},"np.cos(x[",{"type":18,"tag":291,"props":612,"children":613},{"class":358},[614],{"type":24,"value":615},"2",{"type":18,"tag":291,"props":617,"children":618},{"class":304},[619],{"type":24,"value":620},"])],\n",{"type":18,"tag":291,"props":622,"children":624},{"class":293,"line":623},18,[625,629,633,637,641,646,650],{"type":18,"tag":291,"props":626,"children":627},{"class":304},[628],{"type":24,"value":590},{"type":18,"tag":291,"props":630,"children":631},{"class":358},[632],{"type":24,"value":595},{"type":18,"tag":291,"props":634,"children":635},{"class":304},[636],{"type":24,"value":600},{"type":18,"tag":291,"props":638,"children":639},{"class":298},[640],{"type":24,"value":605},{"type":18,"tag":291,"props":642,"children":643},{"class":304},[644],{"type":24,"value":645},"np.sin(x[",{"type":18,"tag":291,"props":647,"children":648},{"class":358},[649],{"type":24,"value":615},{"type":18,"tag":291,"props":651,"children":652},{"class":304},[653],{"type":24,"value":620},{"type":18,"tag":291,"props":655,"children":657},{"class":293,"line":656},19,[658,662,667],{"type":18,"tag":291,"props":659,"children":660},{"class":304},[661],{"type":24,"value":590},{"type":18,"tag":291,"props":663,"children":664},{"class":358},[665],{"type":24,"value":666},"1",{"type":18,"tag":291,"props":668,"children":669},{"class":304},[670],{"type":24,"value":671},"]]\n",{"type":18,"tag":291,"props":673,"children":675},{"class":293,"line":674},20,[676],{"type":18,"tag":291,"props":677,"children":678},{"class":304},[679],{"type":24,"value":680},"])\n",{"type":18,"tag":291,"props":682,"children":684},{"class":293,"line":683},21,[685],{"type":18,"tag":291,"props":686,"children":687},{},[688],{"type":24,"value":326},{"type":18,"tag":291,"props":690,"children":692},{"class":293,"line":691},22,[693,698,703,708,712,717],{"type":18,"tag":291,"props":694,"children":695},{"class":298},[696],{"type":24,"value":697},"for",{"type":18,"tag":291,"props":699,"children":700},{"class":304},[701],{"type":24,"value":702}," _ ",{"type":18,"tag":291,"props":704,"children":705},{"class":298},[706],{"type":24,"value":707},"in",{"type":18,"tag":291,"props":709,"children":710},{"class":304},[711],{"type":24,"value":355},{"type":18,"tag":291,"props":713,"children":714},{"class":358},[715],{"type":24,"value":716},"range",{"type":18,"tag":291,"props":718,"children":719},{"class":304},[720],{"type":24,"value":721},"(num_steps):\n",{"type":18,"tag":291,"props":723,"children":725},{"class":293,"line":724},23,[726,731,735],{"type":18,"tag":291,"props":727,"children":728},{"class":304},[729],{"type":24,"value":730},"    k1 ",{"type":18,"tag":291,"props":732,"children":733},{"class":298},[734],{"type":24,"value":350},{"type":18,"tag":291,"props":736,"children":737},{"class":304},[738],{"type":24,"value":739}," f([x, y, yaw], [v, omega])\n",{"type":18,"tag":291,"props":741,"children":743},{"class":293,"line":742},24,[744,749,753,758,763,768,773,777,781,786,790,795,799,804,808,812,816,820,824,828,832,836,840,845,849,853,857,861,865,869,873,877,881],{"type":18,"tag":291,"props":745,"children":746},{"class":304},[747],{"type":24,"value":748},"    k2 ",{"type":18,"tag":291,"props":750,"children":751},{"class":298},[752],{"type":24,"value":350},{"type":18,"tag":291,"props":754,"children":755},{"class":304},[756],{"type":24,"value":757}," f([x ",{"type":18,"tag":291,"props":759,"children":760},{"class":298},[761],{"type":24,"value":762},"+",{"type":18,"tag":291,"props":764,"children":765},{"class":304},[766],{"type":24,"value":767}," (dt ",{"type":18,"tag":291,"props":769,"children":770},{"class":298},[771],{"type":24,"value":772},"/",{"type":18,"tag":291,"props":774,"children":775},{"class":304},[776],{"type":24,"value":355},{"type":18,"tag":291,"props":778,"children":779},{"class":358},[780],{"type":24,"value":615},{"type":18,"tag":291,"props":782,"children":783},{"class":304},[784],{"type":24,"value":785},") ",{"type":18,"tag":291,"props":787,"children":788},{"class":298},[789],{"type":24,"value":605},{"type":18,"tag":291,"props":791,"children":792},{"class":304},[793],{"type":24,"value":794}," k1[",{"type":18,"tag":291,"props":796,"children":797},{"class":358},[798],{"type":24,"value":595},{"type":18,"tag":291,"props":800,"children":801},{"class":304},[802],{"type":24,"value":803},"], y ",{"type":18,"tag":291,"props":805,"children":806},{"class":298},[807],{"type":24,"value":762},{"type":18,"tag":291,"props":809,"children":810},{"class":304},[811],{"type":24,"value":767},{"type":18,"tag":291,"props":813,"children":814},{"class":298},[815],{"type":24,"value":772},{"type":18,"tag":291,"props":817,"children":818},{"class":304},[819],{"type":24,"value":355},{"type":18,"tag":291,"props":821,"children":822},{"class":358},[823],{"type":24,"value":615},{"type":18,"tag":291,"props":825,"children":826},{"class":304},[827],{"type":24,"value":785},{"type":18,"tag":291,"props":829,"children":830},{"class":298},[831],{"type":24,"value":605},{"type":18,"tag":291,"props":833,"children":834},{"class":304},[835],{"type":24,"value":794},{"type":18,"tag":291,"props":837,"children":838},{"class":358},[839],{"type":24,"value":666},{"type":18,"tag":291,"props":841,"children":842},{"class":304},[843],{"type":24,"value":844},"], yaw ",{"type":18,"tag":291,"props":846,"children":847},{"class":298},[848],{"type":24,"value":762},{"type":18,"tag":291,"props":850,"children":851},{"class":304},[852],{"type":24,"value":767},{"type":18,"tag":291,"props":854,"children":855},{"class":298},[856],{"type":24,"value":772},{"type":18,"tag":291,"props":858,"children":859},{"class":304},[860],{"type":24,"value":355},{"type":18,"tag":291,"props":862,"children":863},{"class":358},[864],{"type":24,"value":615},{"type":18,"tag":291,"props":866,"children":867},{"class":304},[868],{"type":24,"value":785},{"type":18,"tag":291,"props":870,"children":871},{"class":298},[872],{"type":24,"value":605},{"type":18,"tag":291,"props":874,"children":875},{"class":304},[876],{"type":24,"value":794},{"type":18,"tag":291,"props":878,"children":879},{"class":358},[880],{"type":24,"value":615},{"type":18,"tag":291,"props":882,"children":883},{"class":304},[884],{"type":24,"value":885},"]], [v, omega])\n",{"type":18,"tag":291,"props":887,"children":889},{"class":293,"line":888},25,[890,895,899,903,907,911,915,919,923,927,931,936,940,944,948,952,956,960,964,968,972,976,980,984,988,992,996,1000,1004,1008,1012,1016,1020],{"type":18,"tag":291,"props":891,"children":892},{"class":304},[893],{"type":24,"value":894},"    k3 ",{"type":18,"tag":291,"props":896,"children":897},{"class":298},[898],{"type":24,"value":350},{"type":18,"tag":291,"props":900,"children":901},{"class":304},[902],{"type":24,"value":757},{"type":18,"tag":291,"props":904,"children":905},{"class":298},[906],{"type":24,"value":762},{"type":18,"tag":291,"props":908,"children":909},{"class":304},[910],{"type":24,"value":767},{"type":18,"tag":291,"props":912,"children":913},{"class":298},[914],{"type":24,"value":772},{"type":18,"tag":291,"props":916,"children":917},{"class":304},[918],{"type":24,"value":355},{"type":18,"tag":291,"props":920,"children":921},{"class":358},[922],{"type":24,"value":615},{"type":18,"tag":291,"props":924,"children":925},{"class":304},[926],{"type":24,"value":785},{"type":18,"tag":291,"props":928,"children":929},{"class":298},[930],{"type":24,"value":605},{"type":18,"tag":291,"props":932,"children":933},{"class":304},[934],{"type":24,"value":935}," k2[",{"type":18,"tag":291,"props":937,"children":938},{"class":358},[939],{"type":24,"value":595},{"type":18,"tag":291,"props":941,"children":942},{"class":304},[943],{"type":24,"value":803},{"type":18,"tag":291,"props":945,"children":946},{"class":298},[947],{"type":24,"value":762},{"type":18,"tag":291,"props":949,"children":950},{"class":304},[951],{"type":24,"value":767},{"type":18,"tag":291,"props":953,"children":954},{"class":298},[955],{"type":24,"value":772},{"type":18,"tag":291,"props":957,"children":958},{"class":304},[959],{"type":24,"value":355},{"type":18,"tag":291,"props":961,"children":962},{"class":358},[963],{"type":24,"value":615},{"type":18,"tag":291,"props":965,"children":966},{"class":304},[967],{"type":24,"value":785},{"type":18,"tag":291,"props":969,"children":970},{"class":298},[971],{"type":24,"value":605},{"type":18,"tag":291,"props":973,"children":974},{"class":304},[975],{"type":24,"value":935},{"type":18,"tag":291,"props":977,"children":978},{"class":358},[979],{"type":24,"value":666},{"type":18,"tag":291,"props":981,"children":982},{"class":304},[983],{"type":24,"value":844},{"type":18,"tag":291,"props":985,"children":986},{"class":298},[987],{"type":24,"value":762},{"type":18,"tag":291,"props":989,"children":990},{"class":304},[991],{"type":24,"value":767},{"type":18,"tag":291,"props":993,"children":994},{"class":298},[995],{"type":24,"value":772},{"type":18,"tag":291,"props":997,"children":998},{"class":304},[999],{"type":24,"value":355},{"type":18,"tag":291,"props":1001,"children":1002},{"class":358},[1003],{"type":24,"value":615},{"type":18,"tag":291,"props":1005,"children":1006},{"class":304},[1007],{"type":24,"value":785},{"type":18,"tag":291,"props":1009,"children":1010},{"class":298},[1011],{"type":24,"value":605},{"type":18,"tag":291,"props":1013,"children":1014},{"class":304},[1015],{"type":24,"value":935},{"type":18,"tag":291,"props":1017,"children":1018},{"class":358},[1019],{"type":24,"value":615},{"type":18,"tag":291,"props":1021,"children":1022},{"class":304},[1023],{"type":24,"value":885},{"type":18,"tag":291,"props":1025,"children":1027},{"class":293,"line":1026},26,[1028,1033,1037,1041,1045,1050,1054,1059,1063,1067,1071,1075,1079,1083,1087,1091,1095,1099,1103,1107,1111],{"type":18,"tag":291,"props":1029,"children":1030},{"class":304},[1031],{"type":24,"value":1032},"    k4 ",{"type":18,"tag":291,"props":1034,"children":1035},{"class":298},[1036],{"type":24,"value":350},{"type":18,"tag":291,"props":1038,"children":1039},{"class":304},[1040],{"type":24,"value":757},{"type":18,"tag":291,"props":1042,"children":1043},{"class":298},[1044],{"type":24,"value":762},{"type":18,"tag":291,"props":1046,"children":1047},{"class":304},[1048],{"type":24,"value":1049}," dt ",{"type":18,"tag":291,"props":1051,"children":1052},{"class":298},[1053],{"type":24,"value":605},{"type":18,"tag":291,"props":1055,"children":1056},{"class":304},[1057],{"type":24,"value":1058}," k3[",{"type":18,"tag":291,"props":1060,"children":1061},{"class":358},[1062],{"type":24,"value":595},{"type":18,"tag":291,"props":1064,"children":1065},{"class":304},[1066],{"type":24,"value":803},{"type":18,"tag":291,"props":1068,"children":1069},{"class":298},[1070],{"type":24,"value":762},{"type":18,"tag":291,"props":1072,"children":1073},{"class":304},[1074],{"type":24,"value":1049},{"type":18,"tag":291,"props":1076,"children":1077},{"class":298},[1078],{"type":24,"value":605},{"type":18,"tag":291,"props":1080,"children":1081},{"class":304},[1082],{"type":24,"value":1058},{"type":18,"tag":291,"props":1084,"children":1085},{"class":358},[1086],{"type":24,"value":666},{"type":18,"tag":291,"props":1088,"children":1089},{"class":304},[1090],{"type":24,"value":844},{"type":18,"tag":291,"props":1092,"children":1093},{"class":298},[1094],{"type":24,"value":762},{"type":18,"tag":291,"props":1096,"children":1097},{"class":304},[1098],{"type":24,"value":1049},{"type":18,"tag":291,"props":1100,"children":1101},{"class":298},[1102],{"type":24,"value":605},{"type":18,"tag":291,"props":1104,"children":1105},{"class":304},[1106],{"type":24,"value":1058},{"type":18,"tag":291,"props":1108,"children":1109},{"class":358},[1110],{"type":24,"value":615},{"type":18,"tag":291,"props":1112,"children":1113},{"class":304},[1114],{"type":24,"value":885},{"type":18,"tag":291,"props":1116,"children":1118},{"class":293,"line":1117},27,[1119],{"type":18,"tag":291,"props":1120,"children":1121},{},[1122],{"type":24,"value":326},{"type":18,"tag":291,"props":1124,"children":1126},{"class":293,"line":1125},28,[1127,1132],{"type":18,"tag":291,"props":1128,"children":1129},{"class":304},[1130],{"type":24,"value":1131},"    ",{"type":18,"tag":291,"props":1133,"children":1134},{"class":333},[1135],{"type":24,"value":1136},"# Update state of the robot\n",{"type":18,"tag":291,"props":1138,"children":1140},{"class":293,"line":1139},29,[1141,1146,1151,1156,1160,1165,1169,1173,1177,1181,1185,1189,1193,1197,1201,1205,1209,1213,1217,1221,1225,1229,1233,1238,1242,1247,1251,1255,1259,1263],{"type":18,"tag":291,"props":1142,"children":1143},{"class":304},[1144],{"type":24,"value":1145},"    x ",{"type":18,"tag":291,"props":1147,"children":1148},{"class":298},[1149],{"type":24,"value":1150},"+=",{"type":18,"tag":291,"props":1152,"children":1153},{"class":304},[1154],{"type":24,"value":1155}," (k1[",{"type":18,"tag":291,"props":1157,"children":1158},{"class":358},[1159],{"type":24,"value":595},{"type":18,"tag":291,"props":1161,"children":1162},{"class":304},[1163],{"type":24,"value":1164},"] ",{"type":18,"tag":291,"props":1166,"children":1167},{"class":298},[1168],{"type":24,"value":762},{"type":18,"tag":291,"props":1170,"children":1171},{"class":304},[1172],{"type":24,"value":355},{"type":18,"tag":291,"props":1174,"children":1175},{"class":358},[1176],{"type":24,"value":615},{"type":18,"tag":291,"props":1178,"children":1179},{"class":304},[1180],{"type":24,"value":355},{"type":18,"tag":291,"props":1182,"children":1183},{"class":298},[1184],{"type":24,"value":605},{"type":18,"tag":291,"props":1186,"children":1187},{"class":304},[1188],{"type":24,"value":935},{"type":18,"tag":291,"props":1190,"children":1191},{"class":358},[1192],{"type":24,"value":595},{"type":18,"tag":291,"props":1194,"children":1195},{"class":304},[1196],{"type":24,"value":1164},{"type":18,"tag":291,"props":1198,"children":1199},{"class":298},[1200],{"type":24,"value":762},{"type":18,"tag":291,"props":1202,"children":1203},{"class":304},[1204],{"type":24,"value":355},{"type":18,"tag":291,"props":1206,"children":1207},{"class":358},[1208],{"type":24,"value":615},{"type":18,"tag":291,"props":1210,"children":1211},{"class":304},[1212],{"type":24,"value":355},{"type":18,"tag":291,"props":1214,"children":1215},{"class":298},[1216],{"type":24,"value":605},{"type":18,"tag":291,"props":1218,"children":1219},{"class":304},[1220],{"type":24,"value":1058},{"type":18,"tag":291,"props":1222,"children":1223},{"class":358},[1224],{"type":24,"value":595},{"type":18,"tag":291,"props":1226,"children":1227},{"class":304},[1228],{"type":24,"value":1164},{"type":18,"tag":291,"props":1230,"children":1231},{"class":298},[1232],{"type":24,"value":762},{"type":18,"tag":291,"props":1234,"children":1235},{"class":304},[1236],{"type":24,"value":1237}," k4[",{"type":18,"tag":291,"props":1239,"children":1240},{"class":358},[1241],{"type":24,"value":595},{"type":18,"tag":291,"props":1243,"children":1244},{"class":304},[1245],{"type":24,"value":1246},"]) ",{"type":18,"tag":291,"props":1248,"children":1249},{"class":298},[1250],{"type":24,"value":605},{"type":18,"tag":291,"props":1252,"children":1253},{"class":304},[1254],{"type":24,"value":1049},{"type":18,"tag":291,"props":1256,"children":1257},{"class":298},[1258],{"type":24,"value":772},{"type":18,"tag":291,"props":1260,"children":1261},{"class":304},[1262],{"type":24,"value":355},{"type":18,"tag":291,"props":1264,"children":1265},{"class":358},[1266],{"type":24,"value":1267},"6\n",{"type":18,"tag":291,"props":1269,"children":1271},{"class":293,"line":1270},30,[1272,1277,1281,1285,1289,1293,1297,1301,1305,1309,1313,1317,1321,1325,1329,1333,1337,1341,1345,1349,1353,1357,1361,1365,1369,1373,1377,1381,1385,1389],{"type":18,"tag":291,"props":1273,"children":1274},{"class":304},[1275],{"type":24,"value":1276},"    y ",{"type":18,"tag":291,"props":1278,"children":1279},{"class":298},[1280],{"type":24,"value":1150},{"type":18,"tag":291,"props":1282,"children":1283},{"class":304},[1284],{"type":24,"value":1155},{"type":18,"tag":291,"props":1286,"children":1287},{"class":358},[1288],{"type":24,"value":666},{"type":18,"tag":291,"props":1290,"children":1291},{"class":304},[1292],{"type":24,"value":1164},{"type":18,"tag":291,"props":1294,"children":1295},{"class":298},[1296],{"type":24,"value":762},{"type":18,"tag":291,"props":1298,"children":1299},{"class":304},[1300],{"type":24,"value":355},{"type":18,"tag":291,"props":1302,"children":1303},{"class":358},[1304],{"type":24,"value":615},{"type":18,"tag":291,"props":1306,"children":1307},{"class":304},[1308],{"type":24,"value":355},{"type":18,"tag":291,"props":1310,"children":1311},{"class":298},[1312],{"type":24,"value":605},{"type":18,"tag":291,"props":1314,"children":1315},{"class":304},[1316],{"type":24,"value":935},{"type":18,"tag":291,"props":1318,"children":1319},{"class":358},[1320],{"type":24,"value":666},{"type":18,"tag":291,"props":1322,"children":1323},{"class":304},[1324],{"type":24,"value":1164},{"type":18,"tag":291,"props":1326,"children":1327},{"class":298},[1328],{"type":24,"value":762},{"type":18,"tag":291,"props":1330,"children":1331},{"class":304},[1332],{"type":24,"value":355},{"type":18,"tag":291,"props":1334,"children":1335},{"class":358},[1336],{"type":24,"value":615},{"type":18,"tag":291,"props":1338,"children":1339},{"class":304},[1340],{"type":24,"value":355},{"type":18,"tag":291,"props":1342,"children":1343},{"class":298},[1344],{"type":24,"value":605},{"type":18,"tag":291,"props":1346,"children":1347},{"class":304},[1348],{"type":24,"value":1058},{"type":18,"tag":291,"props":1350,"children":1351},{"class":358},[1352],{"type":24,"value":666},{"type":18,"tag":291,"props":1354,"children":1355},{"class":304},[1356],{"type":24,"value":1164},{"type":18,"tag":291,"props":1358,"children":1359},{"class":298},[1360],{"type":24,"value":762},{"type":18,"tag":291,"props":1362,"children":1363},{"class":304},[1364],{"type":24,"value":1237},{"type":18,"tag":291,"props":1366,"children":1367},{"class":358},[1368],{"type":24,"value":666},{"type":18,"tag":291,"props":1370,"children":1371},{"class":304},[1372],{"type":24,"value":1246},{"type":18,"tag":291,"props":1374,"children":1375},{"class":298},[1376],{"type":24,"value":605},{"type":18,"tag":291,"props":1378,"children":1379},{"class":304},[1380],{"type":24,"value":1049},{"type":18,"tag":291,"props":1382,"children":1383},{"class":298},[1384],{"type":24,"value":772},{"type":18,"tag":291,"props":1386,"children":1387},{"class":304},[1388],{"type":24,"value":355},{"type":18,"tag":291,"props":1390,"children":1391},{"class":358},[1392],{"type":24,"value":1267},{"type":18,"tag":291,"props":1394,"children":1396},{"class":293,"line":1395},31,[1397,1402,1406,1410,1414,1418,1422,1426,1430,1434,1438,1442,1446,1450,1454,1458,1462,1466,1470,1474,1478,1482,1486,1490,1494,1498,1502,1506,1510,1514],{"type":18,"tag":291,"props":1398,"children":1399},{"class":304},[1400],{"type":24,"value":1401},"    yaw ",{"type":18,"tag":291,"props":1403,"children":1404},{"class":298},[1405],{"type":24,"value":1150},{"type":18,"tag":291,"props":1407,"children":1408},{"class":304},[1409],{"type":24,"value":1155},{"type":18,"tag":291,"props":1411,"children":1412},{"class":358},[1413],{"type":24,"value":615},{"type":18,"tag":291,"props":1415,"children":1416},{"class":304},[1417],{"type":24,"value":1164},{"type":18,"tag":291,"props":1419,"children":1420},{"class":298},[1421],{"type":24,"value":762},{"type":18,"tag":291,"props":1423,"children":1424},{"class":304},[1425],{"type":24,"value":355},{"type":18,"tag":291,"props":1427,"children":1428},{"class":358},[1429],{"type":24,"value":615},{"type":18,"tag":291,"props":1431,"children":1432},{"class":304},[1433],{"type":24,"value":355},{"type":18,"tag":291,"props":1435,"children":1436},{"class":298},[1437],{"type":24,"value":605},{"type":18,"tag":291,"props":1439,"children":1440},{"class":304},[1441],{"type":24,"value":935},{"type":18,"tag":291,"props":1443,"children":1444},{"class":358},[1445],{"type":24,"value":615},{"type":18,"tag":291,"props":1447,"children":1448},{"class":304},[1449],{"type":24,"value":1164},{"type":18,"tag":291,"props":1451,"children":1452},{"class":298},[1453],{"type":24,"value":762},{"type":18,"tag":291,"props":1455,"children":1456},{"class":304},[1457],{"type":24,"value":355},{"type":18,"tag":291,"props":1459,"children":1460},{"class":358},[1461],{"type":24,"value":615},{"type":18,"tag":291,"props":1463,"children":1464},{"class":304},[1465],{"type":24,"value":355},{"type":18,"tag":291,"props":1467,"children":1468},{"class":298},[1469],{"type":24,"value":605},{"type":18,"tag":291,"props":1471,"children":1472},{"class":304},[1473],{"type":24,"value":1058},{"type":18,"tag":291,"props":1475,"children":1476},{"class":358},[1477],{"type":24,"value":615},{"type":18,"tag":291,"props":1479,"children":1480},{"class":304},[1481],{"type":24,"value":1164},{"type":18,"tag":291,"props":1483,"children":1484},{"class":298},[1485],{"type":24,"value":762},{"type":18,"tag":291,"props":1487,"children":1488},{"class":304},[1489],{"type":24,"value":1237},{"type":18,"tag":291,"props":1491,"children":1492},{"class":358},[1493],{"type":24,"value":615},{"type":18,"tag":291,"props":1495,"children":1496},{"class":304},[1497],{"type":24,"value":1246},{"type":18,"tag":291,"props":1499,"children":1500},{"class":298},[1501],{"type":24,"value":605},{"type":18,"tag":291,"props":1503,"children":1504},{"class":304},[1505],{"type":24,"value":1049},{"type":18,"tag":291,"props":1507,"children":1508},{"class":298},[1509],{"type":24,"value":772},{"type":18,"tag":291,"props":1511,"children":1512},{"class":304},[1513],{"type":24,"value":355},{"type":18,"tag":291,"props":1515,"children":1516},{"class":358},[1517],{"type":24,"value":1518},"6",{"type":18,"tag":19,"props":1520,"children":1522},{"id":1521},"single-shooting-method",[1523],{"type":24,"value":1524},"Single Shooting Method",{"type":18,"tag":27,"props":1526,"children":1527},{},[1528],{"type":24,"value":1529},"Single Shooting Method is a method that we transform the optimal control problem to the nonlinear programming problem with just one decision variable.",{"type":18,"tag":105,"props":1531,"children":1533},{"latex-express":1532,"styles":62},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":105,"props":1535,"children":1537},{"latex-express":1536,"styles":62},"\n      \\begin{align*}\n            x_{u} &= F(w,x_{0},t_{k}) \\\\\n            F(w,x_{0},t_{0}) &= x_{0} \\\\\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":1539,"children":1540},{},[1541],{"type":24,"value":1542},"Then solve the NLP",{"type":18,"tag":105,"props":1544,"children":1546},{"latex-express":1545,"styles":62},"\n      \\begin{align*}\n            \\min_{w}\\Phi(F(w,x_{0},t_{k}), w) \\\\ \n            \\text{Subject to} \\hspace{1cm}  g_{1}(F(w,x_{0},t_{k}),w) \\leq{0}\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1548,"children":1550},{"id":1549},"multiple-shooting-method",[1551],{"type":24,"value":1552},"Multiple Shooting Method",{"type":18,"tag":27,"props":1554,"children":1555},{},[1556],{"type":24,"value":1557},"Multiple Shooting Method is a method that consist of transforming of optimal control problem to the nonlinear programming problem with multiple decision variables.",{"type":18,"tag":105,"props":1559,"children":1561},{"latex-express":1560,"styles":62},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}, x_{0}, ..., x_{N}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":115,"props":1563,"children":1564},{},[1565,1573],{"type":18,"tag":119,"props":1566,"children":1567},{},[1568,1571],{"type":18,"tag":123,"props":1569,"children":1570},{"latex-express":125,"styles":126},[],{"type":24,"value":1572}," becoming decision variable in the opimization problem as well as u",{"type":18,"tag":119,"props":1574,"children":1575},{},[1576],{"type":24,"value":1577},"We apply path constraint at each iteration step",{"type":18,"tag":105,"props":1579,"children":1581},{"latex-express":1580,"styles":62},"\n      \\begin{equation*}\n                x_{k+1}-f(x_{k},u_{k}) = 0\n            \\end{equation*}\n",[],{"type":18,"tag":27,"props":1583,"children":1584},{},[1585],{"type":24,"value":1542},{"type":18,"tag":105,"props":1587,"children":1589},{"latex-express":1588,"styles":62},"\n      \\begin{align*}\n            \\min_{w}  \\Phi(F(w,x_{0},t_{k}),& w) \\\\ \n            \\text{s.t}\\hspace{0.5cm}  g_{1}(F(w,x_{0},t_{k}),w) &\\leq{0} \\\\ \n                               g_{2}(w) = \\begin{bmatrix}\n                                  \\bar{x}_{0}-x_{0} \\\\\n                                  f(x_{0},u_{0})-x_{1} \\\\ \n                                  \\vdots \\\\\n                                  f(x_{N-1}, u_{N-1}-x_{N})\n                              \\end{bmatrix} &= 0\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1591,"children":1593},{"id":1592},"full-implement-in-python",[1594],{"type":24,"value":1595},"Full Implement in Python",{"type":18,"tag":27,"props":1597,"children":1598},{},[1599,1601,1607],{"type":24,"value":1600},"We will use ",{"type":18,"tag":1602,"props":1603,"children":1604},"code-inline",{},[1605],{"type":24,"value":1606},"Casadi",{"type":24,"value":1608}," as a numerical optimization framework.",{"type":18,"tag":276,"props":1610,"children":1613},{"className":1611,"code":1612,"language":281,"meta":8},[279],"import casadi as ca\n",[1614],{"type":18,"tag":284,"props":1615,"children":1616},{},[1617],{"type":18,"tag":276,"props":1618,"children":1619},{"__ignoreMap":8},[1620],{"type":18,"tag":291,"props":1621,"children":1622},{"class":293,"line":294},[1623,1627,1632,1636],{"type":18,"tag":291,"props":1624,"children":1625},{"class":298},[1626],{"type":24,"value":301},{"type":18,"tag":291,"props":1628,"children":1629},{"class":304},[1630],{"type":24,"value":1631}," casadi ",{"type":18,"tag":291,"props":1633,"children":1634},{"class":298},[1635],{"type":24,"value":312},{"type":18,"tag":291,"props":1637,"children":1638},{"class":304},[1639],{"type":24,"value":1640}," ca",{"type":18,"tag":27,"props":1642,"children":1643},{},[1644],{"type":24,"value":1645},"Define state representation and input control of our nonlinear model.",{"type":18,"tag":276,"props":1647,"children":1650},{"className":1648,"code":1649,"language":281,"meta":8},[279],"# Symbolic Variables\n## States\nx = ca.SX.sym(\"x\")\ny = ca.SX.sym(\"y\")\ntheta = ca.SX.sym(\"theta\")\nstates = ca.vertcat(x, y, theta)\nnum_states = states.numel()\n\n## Control\nu1 = ca.SX.sym(\"u1\")\nu2 = ca.SX.sym(\"u2\")\ncontrols = ca.vertcat(u1, u2)\nnum_controls = controls.numel()\n\n# Define Nonlinear model\n## Rotation Matrix\nrot_mat = ca.vertcat(\n    ca.horzcat(ca.cos(theta), ca.sin(theta), 0),\n    ca.horzcat(-ca.sin(theta), ca.cos(theta), 0),\n    ca.horzcat(0, 0, 1)\n)\n\nvx = u1 * ca.cos(theta)\nvy = u1 * ca.sin(theta)\nvyaw = u2\n\nrhs = ca.vertcat(vx, vy, vyaw)\n## Define mapped nonlinear function f(x,u) -> rhs\nf = ca.Function('f', [states, controls], [rhs])\n",[1651],{"type":18,"tag":284,"props":1652,"children":1653},{},[1654],{"type":18,"tag":276,"props":1655,"children":1656},{"__ignoreMap":8},[1657,1665,1673,1710,1742,1775,1792,1809,1816,1824,1857,1890,1907,1924,1931,1939,1947,1964,1981,2007,2039,2046,2053,2079,2104,2121,2128,2145,2153],{"type":18,"tag":291,"props":1658,"children":1659},{"class":293,"line":294},[1660],{"type":18,"tag":291,"props":1661,"children":1662},{"class":333},[1663],{"type":24,"value":1664},"# Symbolic Variables\n",{"type":18,"tag":291,"props":1666,"children":1667},{"class":293,"line":320},[1668],{"type":18,"tag":291,"props":1669,"children":1670},{"class":333},[1671],{"type":24,"value":1672},"## States\n",{"type":18,"tag":291,"props":1674,"children":1675},{"class":293,"line":329},[1676,1680,1684,1689,1694,1699,1705],{"type":18,"tag":291,"props":1677,"children":1678},{"class":304},[1679],{"type":24,"value":410},{"type":18,"tag":291,"props":1681,"children":1682},{"class":298},[1683],{"type":24,"value":350},{"type":18,"tag":291,"props":1685,"children":1686},{"class":304},[1687],{"type":24,"value":1688}," ca.",{"type":18,"tag":291,"props":1690,"children":1691},{"class":358},[1692],{"type":24,"value":1693},"SX",{"type":18,"tag":291,"props":1695,"children":1696},{"class":304},[1697],{"type":24,"value":1698},".sym(",{"type":18,"tag":291,"props":1700,"children":1702},{"class":1701},"ct-244866",[1703],{"type":24,"value":1704},"\"x\"",{"type":18,"tag":291,"props":1706,"children":1707},{"class":304},[1708],{"type":24,"value":1709},")\n",{"type":18,"tag":291,"props":1711,"children":1712},{"class":293,"line":339},[1713,1717,1721,1725,1729,1733,1738],{"type":18,"tag":291,"props":1714,"children":1715},{"class":304},[1716],{"type":24,"value":432},{"type":18,"tag":291,"props":1718,"children":1719},{"class":298},[1720],{"type":24,"value":350},{"type":18,"tag":291,"props":1722,"children":1723},{"class":304},[1724],{"type":24,"value":1688},{"type":18,"tag":291,"props":1726,"children":1727},{"class":358},[1728],{"type":24,"value":1693},{"type":18,"tag":291,"props":1730,"children":1731},{"class":304},[1732],{"type":24,"value":1698},{"type":18,"tag":291,"props":1734,"children":1735},{"class":1701},[1736],{"type":24,"value":1737},"\"y\"",{"type":18,"tag":291,"props":1739,"children":1740},{"class":304},[1741],{"type":24,"value":1709},{"type":18,"tag":291,"props":1743,"children":1744},{"class":293,"line":364},[1745,1750,1754,1758,1762,1766,1771],{"type":18,"tag":291,"props":1746,"children":1747},{"class":304},[1748],{"type":24,"value":1749},"theta ",{"type":18,"tag":291,"props":1751,"children":1752},{"class":298},[1753],{"type":24,"value":350},{"type":18,"tag":291,"props":1755,"children":1756},{"class":304},[1757],{"type":24,"value":1688},{"type":18,"tag":291,"props":1759,"children":1760},{"class":358},[1761],{"type":24,"value":1693},{"type":18,"tag":291,"props":1763,"children":1764},{"class":304},[1765],{"type":24,"value":1698},{"type":18,"tag":291,"props":1767,"children":1768},{"class":1701},[1769],{"type":24,"value":1770},"\"theta\"",{"type":18,"tag":291,"props":1772,"children":1773},{"class":304},[1774],{"type":24,"value":1709},{"type":18,"tag":291,"props":1776,"children":1777},{"class":293,"line":373},[1778,1783,1787],{"type":18,"tag":291,"props":1779,"children":1780},{"class":304},[1781],{"type":24,"value":1782},"states ",{"type":18,"tag":291,"props":1784,"children":1785},{"class":298},[1786],{"type":24,"value":350},{"type":18,"tag":291,"props":1788,"children":1789},{"class":304},[1790],{"type":24,"value":1791}," ca.vertcat(x, y, theta)\n",{"type":18,"tag":291,"props":1793,"children":1794},{"class":293,"line":395},[1795,1800,1804],{"type":18,"tag":291,"props":1796,"children":1797},{"class":304},[1798],{"type":24,"value":1799},"num_states ",{"type":18,"tag":291,"props":1801,"children":1802},{"class":298},[1803],{"type":24,"value":350},{"type":18,"tag":291,"props":1805,"children":1806},{"class":304},[1807],{"type":24,"value":1808}," states.numel()\n",{"type":18,"tag":291,"props":1810,"children":1811},{"class":293,"line":404},[1812],{"type":18,"tag":291,"props":1813,"children":1814},{},[1815],{"type":24,"value":326},{"type":18,"tag":291,"props":1817,"children":1818},{"class":293,"line":426},[1819],{"type":18,"tag":291,"props":1820,"children":1821},{"class":333},[1822],{"type":24,"value":1823},"## Control\n",{"type":18,"tag":291,"props":1825,"children":1826},{"class":293,"line":447},[1827,1832,1836,1840,1844,1848,1853],{"type":18,"tag":291,"props":1828,"children":1829},{"class":304},[1830],{"type":24,"value":1831},"u1 ",{"type":18,"tag":291,"props":1833,"children":1834},{"class":298},[1835],{"type":24,"value":350},{"type":18,"tag":291,"props":1837,"children":1838},{"class":304},[1839],{"type":24,"value":1688},{"type":18,"tag":291,"props":1841,"children":1842},{"class":358},[1843],{"type":24,"value":1693},{"type":18,"tag":291,"props":1845,"children":1846},{"class":304},[1847],{"type":24,"value":1698},{"type":18,"tag":291,"props":1849,"children":1850},{"class":1701},[1851],{"type":24,"value":1852},"\"u1\"",{"type":18,"tag":291,"props":1854,"children":1855},{"class":304},[1856],{"type":24,"value":1709},{"type":18,"tag":291,"props":1858,"children":1859},{"class":293,"line":468},[1860,1865,1869,1873,1877,1881,1886],{"type":18,"tag":291,"props":1861,"children":1862},{"class":304},[1863],{"type":24,"value":1864},"u2 ",{"type":18,"tag":291,"props":1866,"children":1867},{"class":298},[1868],{"type":24,"value":350},{"type":18,"tag":291,"props":1870,"children":1871},{"class":304},[1872],{"type":24,"value":1688},{"type":18,"tag":291,"props":1874,"children":1875},{"class":358},[1876],{"type":24,"value":1693},{"type":18,"tag":291,"props":1878,"children":1879},{"class":304},[1880],{"type":24,"value":1698},{"type":18,"tag":291,"props":1882,"children":1883},{"class":1701},[1884],{"type":24,"value":1885},"\"u2\"",{"type":18,"tag":291,"props":1887,"children":1888},{"class":304},[1889],{"type":24,"value":1709},{"type":18,"tag":291,"props":1891,"children":1892},{"class":293,"line":477},[1893,1898,1902],{"type":18,"tag":291,"props":1894,"children":1895},{"class":304},[1896],{"type":24,"value":1897},"controls ",{"type":18,"tag":291,"props":1899,"children":1900},{"class":298},[1901],{"type":24,"value":350},{"type":18,"tag":291,"props":1903,"children":1904},{"class":304},[1905],{"type":24,"value":1906}," ca.vertcat(u1, u2)\n",{"type":18,"tag":291,"props":1908,"children":1909},{"class":293,"line":508},[1910,1915,1919],{"type":18,"tag":291,"props":1911,"children":1912},{"class":304},[1913],{"type":24,"value":1914},"num_controls ",{"type":18,"tag":291,"props":1916,"children":1917},{"class":298},[1918],{"type":24,"value":350},{"type":18,"tag":291,"props":1920,"children":1921},{"class":304},[1922],{"type":24,"value":1923}," controls.numel()\n",{"type":18,"tag":291,"props":1925,"children":1926},{"class":293,"line":539},[1927],{"type":18,"tag":291,"props":1928,"children":1929},{},[1930],{"type":24,"value":326},{"type":18,"tag":291,"props":1932,"children":1933},{"class":293,"line":548},[1934],{"type":18,"tag":291,"props":1935,"children":1936},{"class":333},[1937],{"type":24,"value":1938},"# Define Nonlinear model\n",{"type":18,"tag":291,"props":1940,"children":1941},{"class":293,"line":557},[1942],{"type":18,"tag":291,"props":1943,"children":1944},{"class":333},[1945],{"type":24,"value":1946},"## Rotation Matrix\n",{"type":18,"tag":291,"props":1948,"children":1949},{"class":293,"line":584},[1950,1955,1959],{"type":18,"tag":291,"props":1951,"children":1952},{"class":304},[1953],{"type":24,"value":1954},"rot_mat ",{"type":18,"tag":291,"props":1956,"children":1957},{"class":298},[1958],{"type":24,"value":350},{"type":18,"tag":291,"props":1960,"children":1961},{"class":304},[1962],{"type":24,"value":1963}," ca.vertcat(\n",{"type":18,"tag":291,"props":1965,"children":1966},{"class":293,"line":623},[1967,1972,1976],{"type":18,"tag":291,"props":1968,"children":1969},{"class":304},[1970],{"type":24,"value":1971},"    ca.horzcat(ca.cos(theta), ca.sin(theta), ",{"type":18,"tag":291,"props":1973,"children":1974},{"class":358},[1975],{"type":24,"value":595},{"type":18,"tag":291,"props":1977,"children":1978},{"class":304},[1979],{"type":24,"value":1980},"),\n",{"type":18,"tag":291,"props":1982,"children":1983},{"class":293,"line":656},[1984,1989,1994,1999,2003],{"type":18,"tag":291,"props":1985,"children":1986},{"class":304},[1987],{"type":24,"value":1988},"    ca.horzcat(",{"type":18,"tag":291,"props":1990,"children":1991},{"class":298},[1992],{"type":24,"value":1993},"-",{"type":18,"tag":291,"props":1995,"children":1996},{"class":304},[1997],{"type":24,"value":1998},"ca.sin(theta), ca.cos(theta), ",{"type":18,"tag":291,"props":2000,"children":2001},{"class":358},[2002],{"type":24,"value":595},{"type":18,"tag":291,"props":2004,"children":2005},{"class":304},[2006],{"type":24,"value":1980},{"type":18,"tag":291,"props":2008,"children":2009},{"class":293,"line":674},[2010,2014,2018,2023,2027,2031,2035],{"type":18,"tag":291,"props":2011,"children":2012},{"class":304},[2013],{"type":24,"value":1988},{"type":18,"tag":291,"props":2015,"children":2016},{"class":358},[2017],{"type":24,"value":595},{"type":18,"tag":291,"props":2019,"children":2020},{"class":304},[2021],{"type":24,"value":2022},", ",{"type":18,"tag":291,"props":2024,"children":2025},{"class":358},[2026],{"type":24,"value":595},{"type":18,"tag":291,"props":2028,"children":2029},{"class":304},[2030],{"type":24,"value":2022},{"type":18,"tag":291,"props":2032,"children":2033},{"class":358},[2034],{"type":24,"value":666},{"type":18,"tag":291,"props":2036,"children":2037},{"class":304},[2038],{"type":24,"value":1709},{"type":18,"tag":291,"props":2040,"children":2041},{"class":293,"line":683},[2042],{"type":18,"tag":291,"props":2043,"children":2044},{"class":304},[2045],{"type":24,"value":1709},{"type":18,"tag":291,"props":2047,"children":2048},{"class":293,"line":691},[2049],{"type":18,"tag":291,"props":2050,"children":2051},{},[2052],{"type":24,"value":326},{"type":18,"tag":291,"props":2054,"children":2055},{"class":293,"line":724},[2056,2061,2065,2070,2074],{"type":18,"tag":291,"props":2057,"children":2058},{"class":304},[2059],{"type":24,"value":2060},"vx ",{"type":18,"tag":291,"props":2062,"children":2063},{"class":298},[2064],{"type":24,"value":350},{"type":18,"tag":291,"props":2066,"children":2067},{"class":304},[2068],{"type":24,"value":2069}," u1 ",{"type":18,"tag":291,"props":2071,"children":2072},{"class":298},[2073],{"type":24,"value":605},{"type":18,"tag":291,"props":2075,"children":2076},{"class":304},[2077],{"type":24,"value":2078}," ca.cos(theta)\n",{"type":18,"tag":291,"props":2080,"children":2081},{"class":293,"line":742},[2082,2087,2091,2095,2099],{"type":18,"tag":291,"props":2083,"children":2084},{"class":304},[2085],{"type":24,"value":2086},"vy ",{"type":18,"tag":291,"props":2088,"children":2089},{"class":298},[2090],{"type":24,"value":350},{"type":18,"tag":291,"props":2092,"children":2093},{"class":304},[2094],{"type":24,"value":2069},{"type":18,"tag":291,"props":2096,"children":2097},{"class":298},[2098],{"type":24,"value":605},{"type":18,"tag":291,"props":2100,"children":2101},{"class":304},[2102],{"type":24,"value":2103}," ca.sin(theta)\n",{"type":18,"tag":291,"props":2105,"children":2106},{"class":293,"line":888},[2107,2112,2116],{"type":18,"tag":291,"props":2108,"children":2109},{"class":304},[2110],{"type":24,"value":2111},"vyaw ",{"type":18,"tag":291,"props":2113,"children":2114},{"class":298},[2115],{"type":24,"value":350},{"type":18,"tag":291,"props":2117,"children":2118},{"class":304},[2119],{"type":24,"value":2120}," u2\n",{"type":18,"tag":291,"props":2122,"children":2123},{"class":293,"line":1026},[2124],{"type":18,"tag":291,"props":2125,"children":2126},{},[2127],{"type":24,"value":326},{"type":18,"tag":291,"props":2129,"children":2130},{"class":293,"line":1117},[2131,2136,2140],{"type":18,"tag":291,"props":2132,"children":2133},{"class":304},[2134],{"type":24,"value":2135},"rhs ",{"type":18,"tag":291,"props":2137,"children":2138},{"class":298},[2139],{"type":24,"value":350},{"type":18,"tag":291,"props":2141,"children":2142},{"class":304},[2143],{"type":24,"value":2144}," ca.vertcat(vx, vy, vyaw)\n",{"type":18,"tag":291,"props":2146,"children":2147},{"class":293,"line":1125},[2148],{"type":18,"tag":291,"props":2149,"children":2150},{"class":333},[2151],{"type":24,"value":2152},"## Define mapped nonlinear function f(x,u) -> rhs\n",{"type":18,"tag":291,"props":2154,"children":2155},{"class":293,"line":1139},[2156,2160,2164,2169,2174],{"type":18,"tag":291,"props":2157,"children":2158},{"class":304},[2159],{"type":24,"value":563},{"type":18,"tag":291,"props":2161,"children":2162},{"class":298},[2163],{"type":24,"value":350},{"type":18,"tag":291,"props":2165,"children":2166},{"class":304},[2167],{"type":24,"value":2168}," ca.Function(",{"type":18,"tag":291,"props":2170,"children":2171},{"class":1701},[2172],{"type":24,"value":2173},"'f'",{"type":18,"tag":291,"props":2175,"children":2176},{"class":304},[2177],{"type":24,"value":2178},", [states, controls], [rhs])",{"type":18,"tag":27,"props":2180,"children":2181},{},[2182],{"type":24,"value":2183},"Declare symbolic matrix",{"type":18,"tag":276,"props":2185,"children":2188},{"className":2186,"code":2187,"language":281,"meta":8},[279],"X = ca.SX.sym('X', num_states, prediction_horizons + 1)\nX_ref = ca.SX.sym('X_ref', num_states, prediction_horizons + 1)\nU = ca.SX.sym('U', num_controls, prediction_horizons)\nU_ref = ca.SX.sym('U_ref', num_controls, prediction_horizons)\n",[2189],{"type":18,"tag":284,"props":2190,"children":2191},{},[2192],{"type":18,"tag":276,"props":2193,"children":2194},{"__ignoreMap":8},[2195,2245,2294,2328],{"type":18,"tag":291,"props":2196,"children":2197},{"class":293,"line":294},[2198,2203,2207,2211,2215,2219,2224,2229,2233,2237,2241],{"type":18,"tag":291,"props":2199,"children":2200},{"class":304},[2201],{"type":24,"value":2202},"X ",{"type":18,"tag":291,"props":2204,"children":2205},{"class":298},[2206],{"type":24,"value":350},{"type":18,"tag":291,"props":2208,"children":2209},{"class":304},[2210],{"type":24,"value":1688},{"type":18,"tag":291,"props":2212,"children":2213},{"class":358},[2214],{"type":24,"value":1693},{"type":18,"tag":291,"props":2216,"children":2217},{"class":304},[2218],{"type":24,"value":1698},{"type":18,"tag":291,"props":2220,"children":2221},{"class":1701},[2222],{"type":24,"value":2223},"'X'",{"type":18,"tag":291,"props":2225,"children":2226},{"class":304},[2227],{"type":24,"value":2228},", num_states, prediction_horizons ",{"type":18,"tag":291,"props":2230,"children":2231},{"class":298},[2232],{"type":24,"value":762},{"type":18,"tag":291,"props":2234,"children":2235},{"class":304},[2236],{"type":24,"value":355},{"type":18,"tag":291,"props":2238,"children":2239},{"class":358},[2240],{"type":24,"value":666},{"type":18,"tag":291,"props":2242,"children":2243},{"class":304},[2244],{"type":24,"value":1709},{"type":18,"tag":291,"props":2246,"children":2247},{"class":293,"line":320},[2248,2253,2257,2261,2265,2269,2274,2278,2282,2286,2290],{"type":18,"tag":291,"props":2249,"children":2250},{"class":304},[2251],{"type":24,"value":2252},"X_ref ",{"type":18,"tag":291,"props":2254,"children":2255},{"class":298},[2256],{"type":24,"value":350},{"type":18,"tag":291,"props":2258,"children":2259},{"class":304},[2260],{"type":24,"value":1688},{"type":18,"tag":291,"props":2262,"children":2263},{"class":358},[2264],{"type":24,"value":1693},{"type":18,"tag":291,"props":2266,"children":2267},{"class":304},[2268],{"type":24,"value":1698},{"type":18,"tag":291,"props":2270,"children":2271},{"class":1701},[2272],{"type":24,"value":2273},"'X_ref'",{"type":18,"tag":291,"props":2275,"children":2276},{"class":304},[2277],{"type":24,"value":2228},{"type":18,"tag":291,"props":2279,"children":2280},{"class":298},[2281],{"type":24,"value":762},{"type":18,"tag":291,"props":2283,"children":2284},{"class":304},[2285],{"type":24,"value":355},{"type":18,"tag":291,"props":2287,"children":2288},{"class":358},[2289],{"type":24,"value":666},{"type":18,"tag":291,"props":2291,"children":2292},{"class":304},[2293],{"type":24,"value":1709},{"type":18,"tag":291,"props":2295,"children":2296},{"class":293,"line":329},[2297,2302,2306,2310,2314,2318,2323],{"type":18,"tag":291,"props":2298,"children":2299},{"class":304},[2300],{"type":24,"value":2301},"U ",{"type":18,"tag":291,"props":2303,"children":2304},{"class":298},[2305],{"type":24,"value":350},{"type":18,"tag":291,"props":2307,"children":2308},{"class":304},[2309],{"type":24,"value":1688},{"type":18,"tag":291,"props":2311,"children":2312},{"class":358},[2313],{"type":24,"value":1693},{"type":18,"tag":291,"props":2315,"children":2316},{"class":304},[2317],{"type":24,"value":1698},{"type":18,"tag":291,"props":2319,"children":2320},{"class":1701},[2321],{"type":24,"value":2322},"'U'",{"type":18,"tag":291,"props":2324,"children":2325},{"class":304},[2326],{"type":24,"value":2327},", num_controls, prediction_horizons)\n",{"type":18,"tag":291,"props":2329,"children":2330},{"class":293,"line":339},[2331,2336,2340,2344,2348,2352,2357],{"type":18,"tag":291,"props":2332,"children":2333},{"class":304},[2334],{"type":24,"value":2335},"U_ref ",{"type":18,"tag":291,"props":2337,"children":2338},{"class":298},[2339],{"type":24,"value":350},{"type":18,"tag":291,"props":2341,"children":2342},{"class":304},[2343],{"type":24,"value":1688},{"type":18,"tag":291,"props":2345,"children":2346},{"class":358},[2347],{"type":24,"value":1693},{"type":18,"tag":291,"props":2349,"children":2350},{"class":304},[2351],{"type":24,"value":1698},{"type":18,"tag":291,"props":2353,"children":2354},{"class":1701},[2355],{"type":24,"value":2356},"'U_ref'",{"type":18,"tag":291,"props":2358,"children":2359},{"class":304},[2360],{"type":24,"value":2361},", num_controls, prediction_horizons)",{"type":18,"tag":27,"props":2363,"children":2364},{},[2365,2367],{"type":24,"value":2366},"Define nonlinear programming and options for ",{"type":18,"tag":1602,"props":2368,"children":2369},{},[2370],{"type":24,"value":1606},{"type":18,"tag":276,"props":2372,"children":2375},{"className":2373,"code":2374,"language":281,"meta":8},[279],"nlp_prob = {\n    'f': cost_fn,\n    'x': opt_var,\n    'p': opt_dec,\n    'g': g\n}\n\nnlp_opts = {\n    'ipopt.max_iter': 5000,\n    'ipopt.print_level': 0,\n    'ipopt.acceptable_tol': 1e-6,\n    'ipopt.acceptable_obj_change_tol': 1e-4,\n    'print_time': 0\n}\n",[2376],{"type":18,"tag":284,"props":2377,"children":2378},{},[2379],{"type":18,"tag":276,"props":2380,"children":2381},{"__ignoreMap":8},[2382,2399,2415,2432,2449,2466,2474,2481,2497,2524,2548,2573,2598,2619],{"type":18,"tag":291,"props":2383,"children":2384},{"class":293,"line":294},[2385,2390,2394],{"type":18,"tag":291,"props":2386,"children":2387},{"class":304},[2388],{"type":24,"value":2389},"nlp_prob ",{"type":18,"tag":291,"props":2391,"children":2392},{"class":298},[2393],{"type":24,"value":350},{"type":18,"tag":291,"props":2395,"children":2396},{"class":304},[2397],{"type":24,"value":2398}," {\n",{"type":18,"tag":291,"props":2400,"children":2401},{"class":293,"line":320},[2402,2406,2410],{"type":18,"tag":291,"props":2403,"children":2404},{"class":304},[2405],{"type":24,"value":1131},{"type":18,"tag":291,"props":2407,"children":2408},{"class":1701},[2409],{"type":24,"value":2173},{"type":18,"tag":291,"props":2411,"children":2412},{"class":304},[2413],{"type":24,"value":2414},": cost_fn,\n",{"type":18,"tag":291,"props":2416,"children":2417},{"class":293,"line":329},[2418,2422,2427],{"type":18,"tag":291,"props":2419,"children":2420},{"class":304},[2421],{"type":24,"value":1131},{"type":18,"tag":291,"props":2423,"children":2424},{"class":1701},[2425],{"type":24,"value":2426},"'x'",{"type":18,"tag":291,"props":2428,"children":2429},{"class":304},[2430],{"type":24,"value":2431},": opt_var,\n",{"type":18,"tag":291,"props":2433,"children":2434},{"class":293,"line":339},[2435,2439,2444],{"type":18,"tag":291,"props":2436,"children":2437},{"class":304},[2438],{"type":24,"value":1131},{"type":18,"tag":291,"props":2440,"children":2441},{"class":1701},[2442],{"type":24,"value":2443},"'p'",{"type":18,"tag":291,"props":2445,"children":2446},{"class":304},[2447],{"type":24,"value":2448},": opt_dec,\n",{"type":18,"tag":291,"props":2450,"children":2451},{"class":293,"line":364},[2452,2456,2461],{"type":18,"tag":291,"props":2453,"children":2454},{"class":304},[2455],{"type":24,"value":1131},{"type":18,"tag":291,"props":2457,"children":2458},{"class":1701},[2459],{"type":24,"value":2460},"'g'",{"type":18,"tag":291,"props":2462,"children":2463},{"class":304},[2464],{"type":24,"value":2465},": g\n",{"type":18,"tag":291,"props":2467,"children":2468},{"class":293,"line":373},[2469],{"type":18,"tag":291,"props":2470,"children":2471},{"class":304},[2472],{"type":24,"value":2473},"}\n",{"type":18,"tag":291,"props":2475,"children":2476},{"class":293,"line":395},[2477],{"type":18,"tag":291,"props":2478,"children":2479},{},[2480],{"type":24,"value":326},{"type":18,"tag":291,"props":2482,"children":2483},{"class":293,"line":404},[2484,2489,2493],{"type":18,"tag":291,"props":2485,"children":2486},{"class":304},[2487],{"type":24,"value":2488},"nlp_opts ",{"type":18,"tag":291,"props":2490,"children":2491},{"class":298},[2492],{"type":24,"value":350},{"type":18,"tag":291,"props":2494,"children":2495},{"class":304},[2496],{"type":24,"value":2398},{"type":18,"tag":291,"props":2498,"children":2499},{"class":293,"line":426},[2500,2504,2509,2514,2519],{"type":18,"tag":291,"props":2501,"children":2502},{"class":304},[2503],{"type":24,"value":1131},{"type":18,"tag":291,"props":2505,"children":2506},{"class":1701},[2507],{"type":24,"value":2508},"'ipopt.max_iter'",{"type":18,"tag":291,"props":2510,"children":2511},{"class":304},[2512],{"type":24,"value":2513},": ",{"type":18,"tag":291,"props":2515,"children":2516},{"class":358},[2517],{"type":24,"value":2518},"5000",{"type":18,"tag":291,"props":2520,"children":2521},{"class":304},[2522],{"type":24,"value":2523},",\n",{"type":18,"tag":291,"props":2525,"children":2526},{"class":293,"line":447},[2527,2531,2536,2540,2544],{"type":18,"tag":291,"props":2528,"children":2529},{"class":304},[2530],{"type":24,"value":1131},{"type":18,"tag":291,"props":2532,"children":2533},{"class":1701},[2534],{"type":24,"value":2535},"'ipopt.print_level'",{"type":18,"tag":291,"props":2537,"children":2538},{"class":304},[2539],{"type":24,"value":2513},{"type":18,"tag":291,"props":2541,"children":2542},{"class":358},[2543],{"type":24,"value":595},{"type":18,"tag":291,"props":2545,"children":2546},{"class":304},[2547],{"type":24,"value":2523},{"type":18,"tag":291,"props":2549,"children":2550},{"class":293,"line":468},[2551,2555,2560,2564,2569],{"type":18,"tag":291,"props":2552,"children":2553},{"class":304},[2554],{"type":24,"value":1131},{"type":18,"tag":291,"props":2556,"children":2557},{"class":1701},[2558],{"type":24,"value":2559},"'ipopt.acceptable_tol'",{"type":18,"tag":291,"props":2561,"children":2562},{"class":304},[2563],{"type":24,"value":2513},{"type":18,"tag":291,"props":2565,"children":2566},{"class":358},[2567],{"type":24,"value":2568},"1e-6",{"type":18,"tag":291,"props":2570,"children":2571},{"class":304},[2572],{"type":24,"value":2523},{"type":18,"tag":291,"props":2574,"children":2575},{"class":293,"line":477},[2576,2580,2585,2589,2594],{"type":18,"tag":291,"props":2577,"children":2578},{"class":304},[2579],{"type":24,"value":1131},{"type":18,"tag":291,"props":2581,"children":2582},{"class":1701},[2583],{"type":24,"value":2584},"'ipopt.acceptable_obj_change_tol'",{"type":18,"tag":291,"props":2586,"children":2587},{"class":304},[2588],{"type":24,"value":2513},{"type":18,"tag":291,"props":2590,"children":2591},{"class":358},[2592],{"type":24,"value":2593},"1e-4",{"type":18,"tag":291,"props":2595,"children":2596},{"class":304},[2597],{"type":24,"value":2523},{"type":18,"tag":291,"props":2599,"children":2600},{"class":293,"line":508},[2601,2605,2610,2614],{"type":18,"tag":291,"props":2602,"children":2603},{"class":304},[2604],{"type":24,"value":1131},{"type":18,"tag":291,"props":2606,"children":2607},{"class":1701},[2608],{"type":24,"value":2609},"'print_time'",{"type":18,"tag":291,"props":2611,"children":2612},{"class":304},[2613],{"type":24,"value":2513},{"type":18,"tag":291,"props":2615,"children":2616},{"class":358},[2617],{"type":24,"value":2618},"0\n",{"type":18,"tag":291,"props":2620,"children":2621},{"class":293,"line":539},[2622],{"type":18,"tag":291,"props":2623,"children":2624},{"class":304},[2625],{"type":24,"value":2626},"}",{"type":18,"tag":27,"props":2628,"children":2629},{},[2630],{"type":24,"value":2631},"Determine boundary and constraint for our optimizer",{"type":18,"tag":276,"props":2633,"children":2636},{"className":2634,"code":2635,"language":281,"meta":8},[279],"lbx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\nubx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\n\nlbx[0: num_states * (prediction_horizons + 1): num_states] = x_min\nlbx[1: num_states * (prediction_horizons + 1): num_states] = y_min\nlbx[2: num_states * (prediction_horizons + 1): num_states] = theta_min\n\nubx[0: num_states * (prediction_horizons + 1): num_states] = x_max\nubx[1: num_states * (prediction_horizons + 1): num_states] = y_max\nubx[2: num_states * (prediction_horizons + 1): num_states] = theta_max\n\nlbx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\nlbx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\n\nubx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\nubx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\n\nargs = {\n    'lbg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'ubg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'lbx': lbx,\n    'ubx': ubx\n}\n",[2637],{"type":18,"tag":284,"props":2638,"children":2639},{},[2640],{"type":18,"tag":276,"props":2641,"children":2642},{"__ignoreMap":8},[2643,2721,2793,2800,2851,2899,2947,2954,3003,3051,3099,3106,3189,3284,3291,3372,3467,3474,3490,3549,3605,3622,3639],{"type":18,"tag":291,"props":2644,"children":2645},{"class":293,"line":294},[2646,2651,2655,2659,2664,2669,2673,2678,2682,2686,2690,2694,2698,2703,2707,2712,2716],{"type":18,"tag":291,"props":2647,"children":2648},{"class":304},[2649],{"type":24,"value":2650},"lbx ",{"type":18,"tag":291,"props":2652,"children":2653},{"class":298},[2654],{"type":24,"value":350},{"type":18,"tag":291,"props":2656,"children":2657},{"class":304},[2658],{"type":24,"value":1688},{"type":18,"tag":291,"props":2660,"children":2661},{"class":358},[2662],{"type":24,"value":2663},"DM",{"type":18,"tag":291,"props":2665,"children":2666},{"class":304},[2667],{"type":24,"value":2668},".zeros((num_states ",{"type":18,"tag":291,"props":2670,"children":2671},{"class":298},[2672],{"type":24,"value":605},{"type":18,"tag":291,"props":2674,"children":2675},{"class":304},[2676],{"type":24,"value":2677}," (prediction_horizons ",{"type":18,"tag":291,"props":2679,"children":2680},{"class":298},[2681],{"type":24,"value":762},{"type":18,"tag":291,"props":2683,"children":2684},{"class":304},[2685],{"type":24,"value":355},{"type":18,"tag":291,"props":2687,"children":2688},{"class":358},[2689],{"type":24,"value":666},{"type":18,"tag":291,"props":2691,"children":2692},{"class":304},[2693],{"type":24,"value":785},{"type":18,"tag":291,"props":2695,"children":2696},{"class":298},[2697],{"type":24,"value":762},{"type":18,"tag":291,"props":2699,"children":2700},{"class":304},[2701],{"type":24,"value":2702}," num_controls ",{"type":18,"tag":291,"props":2704,"children":2705},{"class":298},[2706],{"type":24,"value":605},{"type":18,"tag":291,"props":2708,"children":2709},{"class":304},[2710],{"type":24,"value":2711}," prediction_horizons, ",{"type":18,"tag":291,"props":2713,"children":2714},{"class":358},[2715],{"type":24,"value":666},{"type":18,"tag":291,"props":2717,"children":2718},{"class":304},[2719],{"type":24,"value":2720},"))\n",{"type":18,"tag":291,"props":2722,"children":2723},{"class":293,"line":320},[2724,2729,2733,2737,2741,2745,2749,2753,2757,2761,2765,2769,2773,2777,2781,2785,2789],{"type":18,"tag":291,"props":2725,"children":2726},{"class":304},[2727],{"type":24,"value":2728},"ubx ",{"type":18,"tag":291,"props":2730,"children":2731},{"class":298},[2732],{"type":24,"value":350},{"type":18,"tag":291,"props":2734,"children":2735},{"class":304},[2736],{"type":24,"value":1688},{"type":18,"tag":291,"props":2738,"children":2739},{"class":358},[2740],{"type":24,"value":2663},{"type":18,"tag":291,"props":2742,"children":2743},{"class":304},[2744],{"type":24,"value":2668},{"type":18,"tag":291,"props":2746,"children":2747},{"class":298},[2748],{"type":24,"value":605},{"type":18,"tag":291,"props":2750,"children":2751},{"class":304},[2752],{"type":24,"value":2677},{"type":18,"tag":291,"props":2754,"children":2755},{"class":298},[2756],{"type":24,"value":762},{"type":18,"tag":291,"props":2758,"children":2759},{"class":304},[2760],{"type":24,"value":355},{"type":18,"tag":291,"props":2762,"children":2763},{"class":358},[2764],{"type":24,"value":666},{"type":18,"tag":291,"props":2766,"children":2767},{"class":304},[2768],{"type":24,"value":785},{"type":18,"tag":291,"props":2770,"children":2771},{"class":298},[2772],{"type":24,"value":762},{"type":18,"tag":291,"props":2774,"children":2775},{"class":304},[2776],{"type":24,"value":2702},{"type":18,"tag":291,"props":2778,"children":2779},{"class":298},[2780],{"type":24,"value":605},{"type":18,"tag":291,"props":2782,"children":2783},{"class":304},[2784],{"type":24,"value":2711},{"type":18,"tag":291,"props":2786,"children":2787},{"class":358},[2788],{"type":24,"value":666},{"type":18,"tag":291,"props":2790,"children":2791},{"class":304},[2792],{"type":24,"value":2720},{"type":18,"tag":291,"props":2794,"children":2795},{"class":293,"line":329},[2796],{"type":18,"tag":291,"props":2797,"children":2798},{},[2799],{"type":24,"value":326},{"type":18,"tag":291,"props":2801,"children":2802},{"class":293,"line":339},[2803,2808,2812,2817,2821,2825,2829,2833,2837,2842,2846],{"type":18,"tag":291,"props":2804,"children":2805},{"class":304},[2806],{"type":24,"value":2807},"lbx[",{"type":18,"tag":291,"props":2809,"children":2810},{"class":358},[2811],{"type":24,"value":595},{"type":18,"tag":291,"props":2813,"children":2814},{"class":304},[2815],{"type":24,"value":2816},": num_states ",{"type":18,"tag":291,"props":2818,"children":2819},{"class":298},[2820],{"type":24,"value":605},{"type":18,"tag":291,"props":2822,"children":2823},{"class":304},[2824],{"type":24,"value":2677},{"type":18,"tag":291,"props":2826,"children":2827},{"class":298},[2828],{"type":24,"value":762},{"type":18,"tag":291,"props":2830,"children":2831},{"class":304},[2832],{"type":24,"value":355},{"type":18,"tag":291,"props":2834,"children":2835},{"class":358},[2836],{"type":24,"value":666},{"type":18,"tag":291,"props":2838,"children":2839},{"class":304},[2840],{"type":24,"value":2841},"): num_states] ",{"type":18,"tag":291,"props":2843,"children":2844},{"class":298},[2845],{"type":24,"value":350},{"type":18,"tag":291,"props":2847,"children":2848},{"class":304},[2849],{"type":24,"value":2850}," x_min\n",{"type":18,"tag":291,"props":2852,"children":2853},{"class":293,"line":364},[2854,2858,2862,2866,2870,2874,2878,2882,2886,2890,2894],{"type":18,"tag":291,"props":2855,"children":2856},{"class":304},[2857],{"type":24,"value":2807},{"type":18,"tag":291,"props":2859,"children":2860},{"class":358},[2861],{"type":24,"value":666},{"type":18,"tag":291,"props":2863,"children":2864},{"class":304},[2865],{"type":24,"value":2816},{"type":18,"tag":291,"props":2867,"children":2868},{"class":298},[2869],{"type":24,"value":605},{"type":18,"tag":291,"props":2871,"children":2872},{"class":304},[2873],{"type":24,"value":2677},{"type":18,"tag":291,"props":2875,"children":2876},{"class":298},[2877],{"type":24,"value":762},{"type":18,"tag":291,"props":2879,"children":2880},{"class":304},[2881],{"type":24,"value":355},{"type":18,"tag":291,"props":2883,"children":2884},{"class":358},[2885],{"type":24,"value":666},{"type":18,"tag":291,"props":2887,"children":2888},{"class":304},[2889],{"type":24,"value":2841},{"type":18,"tag":291,"props":2891,"children":2892},{"class":298},[2893],{"type":24,"value":350},{"type":18,"tag":291,"props":2895,"children":2896},{"class":304},[2897],{"type":24,"value":2898}," y_min\n",{"type":18,"tag":291,"props":2900,"children":2901},{"class":293,"line":373},[2902,2906,2910,2914,2918,2922,2926,2930,2934,2938,2942],{"type":18,"tag":291,"props":2903,"children":2904},{"class":304},[2905],{"type":24,"value":2807},{"type":18,"tag":291,"props":2907,"children":2908},{"class":358},[2909],{"type":24,"value":615},{"type":18,"tag":291,"props":2911,"children":2912},{"class":304},[2913],{"type":24,"value":2816},{"type":18,"tag":291,"props":2915,"children":2916},{"class":298},[2917],{"type":24,"value":605},{"type":18,"tag":291,"props":2919,"children":2920},{"class":304},[2921],{"type":24,"value":2677},{"type":18,"tag":291,"props":2923,"children":2924},{"class":298},[2925],{"type":24,"value":762},{"type":18,"tag":291,"props":2927,"children":2928},{"class":304},[2929],{"type":24,"value":355},{"type":18,"tag":291,"props":2931,"children":2932},{"class":358},[2933],{"type":24,"value":666},{"type":18,"tag":291,"props":2935,"children":2936},{"class":304},[2937],{"type":24,"value":2841},{"type":18,"tag":291,"props":2939,"children":2940},{"class":298},[2941],{"type":24,"value":350},{"type":18,"tag":291,"props":2943,"children":2944},{"class":304},[2945],{"type":24,"value":2946}," theta_min\n",{"type":18,"tag":291,"props":2948,"children":2949},{"class":293,"line":395},[2950],{"type":18,"tag":291,"props":2951,"children":2952},{},[2953],{"type":24,"value":326},{"type":18,"tag":291,"props":2955,"children":2956},{"class":293,"line":404},[2957,2962,2966,2970,2974,2978,2982,2986,2990,2994,2998],{"type":18,"tag":291,"props":2958,"children":2959},{"class":304},[2960],{"type":24,"value":2961},"ubx[",{"type":18,"tag":291,"props":2963,"children":2964},{"class":358},[2965],{"type":24,"value":595},{"type":18,"tag":291,"props":2967,"children":2968},{"class":304},[2969],{"type":24,"value":2816},{"type":18,"tag":291,"props":2971,"children":2972},{"class":298},[2973],{"type":24,"value":605},{"type":18,"tag":291,"props":2975,"children":2976},{"class":304},[2977],{"type":24,"value":2677},{"type":18,"tag":291,"props":2979,"children":2980},{"class":298},[2981],{"type":24,"value":762},{"type":18,"tag":291,"props":2983,"children":2984},{"class":304},[2985],{"type":24,"value":355},{"type":18,"tag":291,"props":2987,"children":2988},{"class":358},[2989],{"type":24,"value":666},{"type":18,"tag":291,"props":2991,"children":2992},{"class":304},[2993],{"type":24,"value":2841},{"type":18,"tag":291,"props":2995,"children":2996},{"class":298},[2997],{"type":24,"value":350},{"type":18,"tag":291,"props":2999,"children":3000},{"class":304},[3001],{"type":24,"value":3002}," x_max\n",{"type":18,"tag":291,"props":3004,"children":3005},{"class":293,"line":426},[3006,3010,3014,3018,3022,3026,3030,3034,3038,3042,3046],{"type":18,"tag":291,"props":3007,"children":3008},{"class":304},[3009],{"type":24,"value":2961},{"type":18,"tag":291,"props":3011,"children":3012},{"class":358},[3013],{"type":24,"value":666},{"type":18,"tag":291,"props":3015,"children":3016},{"class":304},[3017],{"type":24,"value":2816},{"type":18,"tag":291,"props":3019,"children":3020},{"class":298},[3021],{"type":24,"value":605},{"type":18,"tag":291,"props":3023,"children":3024},{"class":304},[3025],{"type":24,"value":2677},{"type":18,"tag":291,"props":3027,"children":3028},{"class":298},[3029],{"type":24,"value":762},{"type":18,"tag":291,"props":3031,"children":3032},{"class":304},[3033],{"type":24,"value":355},{"type":18,"tag":291,"props":3035,"children":3036},{"class":358},[3037],{"type":24,"value":666},{"type":18,"tag":291,"props":3039,"children":3040},{"class":304},[3041],{"type":24,"value":2841},{"type":18,"tag":291,"props":3043,"children":3044},{"class":298},[3045],{"type":24,"value":350},{"type":18,"tag":291,"props":3047,"children":3048},{"class":304},[3049],{"type":24,"value":3050}," y_max\n",{"type":18,"tag":291,"props":3052,"children":3053},{"class":293,"line":447},[3054,3058,3062,3066,3070,3074,3078,3082,3086,3090,3094],{"type":18,"tag":291,"props":3055,"children":3056},{"class":304},[3057],{"type":24,"value":2961},{"type":18,"tag":291,"props":3059,"children":3060},{"class":358},[3061],{"type":24,"value":615},{"type":18,"tag":291,"props":3063,"children":3064},{"class":304},[3065],{"type":24,"value":2816},{"type":18,"tag":291,"props":3067,"children":3068},{"class":298},[3069],{"type":24,"value":605},{"type":18,"tag":291,"props":3071,"children":3072},{"class":304},[3073],{"type":24,"value":2677},{"type":18,"tag":291,"props":3075,"children":3076},{"class":298},[3077],{"type":24,"value":762},{"type":18,"tag":291,"props":3079,"children":3080},{"class":304},[3081],{"type":24,"value":355},{"type":18,"tag":291,"props":3083,"children":3084},{"class":358},[3085],{"type":24,"value":666},{"type":18,"tag":291,"props":3087,"children":3088},{"class":304},[3089],{"type":24,"value":2841},{"type":18,"tag":291,"props":3091,"children":3092},{"class":298},[3093],{"type":24,"value":350},{"type":18,"tag":291,"props":3095,"children":3096},{"class":304},[3097],{"type":24,"value":3098}," theta_max\n",{"type":18,"tag":291,"props":3100,"children":3101},{"class":293,"line":468},[3102],{"type":18,"tag":291,"props":3103,"children":3104},{},[3105],{"type":24,"value":326},{"type":18,"tag":291,"props":3107,"children":3108},{"class":293,"line":477},[3109,3114,3118,3122,3126,3130,3134,3139,3143,3147,3151,3155,3159,3163,3167,3171,3175,3180,3184],{"type":18,"tag":291,"props":3110,"children":3111},{"class":304},[3112],{"type":24,"value":3113},"lbx[num_states ",{"type":18,"tag":291,"props":3115,"children":3116},{"class":298},[3117],{"type":24,"value":605},{"type":18,"tag":291,"props":3119,"children":3120},{"class":304},[3121],{"type":24,"value":2677},{"type":18,"tag":291,"props":3123,"children":3124},{"class":298},[3125],{"type":24,"value":762},{"type":18,"tag":291,"props":3127,"children":3128},{"class":304},[3129],{"type":24,"value":355},{"type":18,"tag":291,"props":3131,"children":3132},{"class":358},[3133],{"type":24,"value":666},{"type":18,"tag":291,"props":3135,"children":3136},{"class":304},[3137],{"type":24,"value":3138},"): num_states ",{"type":18,"tag":291,"props":3140,"children":3141},{"class":298},[3142],{"type":24,"value":605},{"type":18,"tag":291,"props":3144,"children":3145},{"class":304},[3146],{"type":24,"value":2677},{"type":18,"tag":291,"props":3148,"children":3149},{"class":298},[3150],{"type":24,"value":762},{"type":18,"tag":291,"props":3152,"children":3153},{"class":304},[3154],{"type":24,"value":355},{"type":18,"tag":291,"props":3156,"children":3157},{"class":358},[3158],{"type":24,"value":666},{"type":18,"tag":291,"props":3160,"children":3161},{"class":304},[3162],{"type":24,"value":785},{"type":18,"tag":291,"props":3164,"children":3165},{"class":298},[3166],{"type":24,"value":762},{"type":18,"tag":291,"props":3168,"children":3169},{"class":304},[3170],{"type":24,"value":2702},{"type":18,"tag":291,"props":3172,"children":3173},{"class":298},[3174],{"type":24,"value":605},{"type":18,"tag":291,"props":3176,"children":3177},{"class":304},[3178],{"type":24,"value":3179}," prediction_horizons: num_controls] ",{"type":18,"tag":291,"props":3181,"children":3182},{"class":298},[3183],{"type":24,"value":350},{"type":18,"tag":291,"props":3185,"children":3186},{"class":304},[3187],{"type":24,"value":3188}," u_min\n",{"type":18,"tag":291,"props":3190,"children":3191},{"class":293,"line":508},[3192,3196,3200,3204,3208,3212,3216,3220,3224,3228,3232,3236,3240,3244,3248,3252,3256,3260,3264,3268,3272,3276,3280],{"type":18,"tag":291,"props":3193,"children":3194},{"class":304},[3195],{"type":24,"value":3113},{"type":18,"tag":291,"props":3197,"children":3198},{"class":298},[3199],{"type":24,"value":605},{"type":18,"tag":291,"props":3201,"children":3202},{"class":304},[3203],{"type":24,"value":2677},{"type":18,"tag":291,"props":3205,"children":3206},{"class":298},[3207],{"type":24,"value":762},{"type":18,"tag":291,"props":3209,"children":3210},{"class":304},[3211],{"type":24,"value":355},{"type":18,"tag":291,"props":3213,"children":3214},{"class":358},[3215],{"type":24,"value":666},{"type":18,"tag":291,"props":3217,"children":3218},{"class":304},[3219],{"type":24,"value":785},{"type":18,"tag":291,"props":3221,"children":3222},{"class":298},[3223],{"type":24,"value":762},{"type":18,"tag":291,"props":3225,"children":3226},{"class":304},[3227],{"type":24,"value":355},{"type":18,"tag":291,"props":3229,"children":3230},{"class":358},[3231],{"type":24,"value":666},{"type":18,"tag":291,"props":3233,"children":3234},{"class":304},[3235],{"type":24,"value":2816},{"type":18,"tag":291,"props":3237,"children":3238},{"class":298},[3239],{"type":24,"value":605},{"type":18,"tag":291,"props":3241,"children":3242},{"class":304},[3243],{"type":24,"value":2677},{"type":18,"tag":291,"props":3245,"children":3246},{"class":298},[3247],{"type":24,"value":762},{"type":18,"tag":291,"props":3249,"children":3250},{"class":304},[3251],{"type":24,"value":355},{"type":18,"tag":291,"props":3253,"children":3254},{"class":358},[3255],{"type":24,"value":666},{"type":18,"tag":291,"props":3257,"children":3258},{"class":304},[3259],{"type":24,"value":785},{"type":18,"tag":291,"props":3261,"children":3262},{"class":298},[3263],{"type":24,"value":762},{"type":18,"tag":291,"props":3265,"children":3266},{"class":304},[3267],{"type":24,"value":2702},{"type":18,"tag":291,"props":3269,"children":3270},{"class":298},[3271],{"type":24,"value":605},{"type":18,"tag":291,"props":3273,"children":3274},{"class":304},[3275],{"type":24,"value":3179},{"type":18,"tag":291,"props":3277,"children":3278},{"class":298},[3279],{"type":24,"value":350},{"type":18,"tag":291,"props":3281,"children":3282},{"class":304},[3283],{"type":24,"value":3188},{"type":18,"tag":291,"props":3285,"children":3286},{"class":293,"line":539},[3287],{"type":18,"tag":291,"props":3288,"children":3289},{},[3290],{"type":24,"value":326},{"type":18,"tag":291,"props":3292,"children":3293},{"class":293,"line":548},[3294,3299,3303,3307,3311,3315,3319,3323,3327,3331,3335,3339,3343,3347,3351,3355,3359,3363,3367],{"type":18,"tag":291,"props":3295,"children":3296},{"class":304},[3297],{"type":24,"value":3298},"ubx[num_states ",{"type":18,"tag":291,"props":3300,"children":3301},{"class":298},[3302],{"type":24,"value":605},{"type":18,"tag":291,"props":3304,"children":3305},{"class":304},[3306],{"type":24,"value":2677},{"type":18,"tag":291,"props":3308,"children":3309},{"class":298},[3310],{"type":24,"value":762},{"type":18,"tag":291,"props":3312,"children":3313},{"class":304},[3314],{"type":24,"value":355},{"type":18,"tag":291,"props":3316,"children":3317},{"class":358},[3318],{"type":24,"value":666},{"type":18,"tag":291,"props":3320,"children":3321},{"class":304},[3322],{"type":24,"value":3138},{"type":18,"tag":291,"props":3324,"children":3325},{"class":298},[3326],{"type":24,"value":605},{"type":18,"tag":291,"props":3328,"children":3329},{"class":304},[3330],{"type":24,"value":2677},{"type":18,"tag":291,"props":3332,"children":3333},{"class":298},[3334],{"type":24,"value":762},{"type":18,"tag":291,"props":3336,"children":3337},{"class":304},[3338],{"type":24,"value":355},{"type":18,"tag":291,"props":3340,"children":3341},{"class":358},[3342],{"type":24,"value":666},{"type":18,"tag":291,"props":3344,"children":3345},{"class":304},[3346],{"type":24,"value":785},{"type":18,"tag":291,"props":3348,"children":3349},{"class":298},[3350],{"type":24,"value":762},{"type":18,"tag":291,"props":3352,"children":3353},{"class":304},[3354],{"type":24,"value":2702},{"type":18,"tag":291,"props":3356,"children":3357},{"class":298},[3358],{"type":24,"value":605},{"type":18,"tag":291,"props":3360,"children":3361},{"class":304},[3362],{"type":24,"value":3179},{"type":18,"tag":291,"props":3364,"children":3365},{"class":298},[3366],{"type":24,"value":350},{"type":18,"tag":291,"props":3368,"children":3369},{"class":304},[3370],{"type":24,"value":3371}," u_max\n",{"type":18,"tag":291,"props":3373,"children":3374},{"class":293,"line":557},[3375,3379,3383,3387,3391,3395,3399,3403,3407,3411,3415,3419,3423,3427,3431,3435,3439,3443,3447,3451,3455,3459,3463],{"type":18,"tag":291,"props":3376,"children":3377},{"class":304},[3378],{"type":24,"value":3298},{"type":18,"tag":291,"props":3380,"children":3381},{"class":298},[3382],{"type":24,"value":605},{"type":18,"tag":291,"props":3384,"children":3385},{"class":304},[3386],{"type":24,"value":2677},{"type":18,"tag":291,"props":3388,"children":3389},{"class":298},[3390],{"type":24,"value":762},{"type":18,"tag":291,"props":3392,"children":3393},{"class":304},[3394],{"type":24,"value":355},{"type":18,"tag":291,"props":3396,"children":3397},{"class":358},[3398],{"type":24,"value":666},{"type":18,"tag":291,"props":3400,"children":3401},{"class":304},[3402],{"type":24,"value":785},{"type":18,"tag":291,"props":3404,"children":3405},{"class":298},[3406],{"type":24,"value":762},{"type":18,"tag":291,"props":3408,"children":3409},{"class":304},[3410],{"type":24,"value":355},{"type":18,"tag":291,"props":3412,"children":3413},{"class":358},[3414],{"type":24,"value":666},{"type":18,"tag":291,"props":3416,"children":3417},{"class":304},[3418],{"type":24,"value":2816},{"type":18,"tag":291,"props":3420,"children":3421},{"class":298},[3422],{"type":24,"value":605},{"type":18,"tag":291,"props":3424,"children":3425},{"class":304},[3426],{"type":24,"value":2677},{"type":18,"tag":291,"props":3428,"children":3429},{"class":298},[3430],{"type":24,"value":762},{"type":18,"tag":291,"props":3432,"children":3433},{"class":304},[3434],{"type":24,"value":355},{"type":18,"tag":291,"props":3436,"children":3437},{"class":358},[3438],{"type":24,"value":666},{"type":18,"tag":291,"props":3440,"children":3441},{"class":304},[3442],{"type":24,"value":785},{"type":18,"tag":291,"props":3444,"children":3445},{"class":298},[3446],{"type":24,"value":762},{"type":18,"tag":291,"props":3448,"children":3449},{"class":304},[3450],{"type":24,"value":2702},{"type":18,"tag":291,"props":3452,"children":3453},{"class":298},[3454],{"type":24,"value":605},{"type":18,"tag":291,"props":3456,"children":3457},{"class":304},[3458],{"type":24,"value":3179},{"type":18,"tag":291,"props":3460,"children":3461},{"class":298},[3462],{"type":24,"value":350},{"type":18,"tag":291,"props":3464,"children":3465},{"class":304},[3466],{"type":24,"value":3371},{"type":18,"tag":291,"props":3468,"children":3469},{"class":293,"line":584},[3470],{"type":18,"tag":291,"props":3471,"children":3472},{},[3473],{"type":24,"value":326},{"type":18,"tag":291,"props":3475,"children":3476},{"class":293,"line":623},[3477,3482,3486],{"type":18,"tag":291,"props":3478,"children":3479},{"class":304},[3480],{"type":24,"value":3481},"args ",{"type":18,"tag":291,"props":3483,"children":3484},{"class":298},[3485],{"type":24,"value":350},{"type":18,"tag":291,"props":3487,"children":3488},{"class":304},[3489],{"type":24,"value":2398},{"type":18,"tag":291,"props":3491,"children":3492},{"class":293,"line":656},[3493,3497,3502,3507,3511,3515,3519,3523,3527,3531,3535,3540,3544],{"type":18,"tag":291,"props":3494,"children":3495},{"class":304},[3496],{"type":24,"value":1131},{"type":18,"tag":291,"props":3498,"children":3499},{"class":1701},[3500],{"type":24,"value":3501},"'lbg'",{"type":18,"tag":291,"props":3503,"children":3504},{"class":304},[3505],{"type":24,"value":3506},": ca.",{"type":18,"tag":291,"props":3508,"children":3509},{"class":358},[3510],{"type":24,"value":2663},{"type":18,"tag":291,"props":3512,"children":3513},{"class":304},[3514],{"type":24,"value":2668},{"type":18,"tag":291,"props":3516,"children":3517},{"class":298},[3518],{"type":24,"value":605},{"type":18,"tag":291,"props":3520,"children":3521},{"class":304},[3522],{"type":24,"value":2677},{"type":18,"tag":291,"props":3524,"children":3525},{"class":298},[3526],{"type":24,"value":762},{"type":18,"tag":291,"props":3528,"children":3529},{"class":304},[3530],{"type":24,"value":355},{"type":18,"tag":291,"props":3532,"children":3533},{"class":358},[3534],{"type":24,"value":666},{"type":18,"tag":291,"props":3536,"children":3537},{"class":304},[3538],{"type":24,"value":3539},"), ",{"type":18,"tag":291,"props":3541,"children":3542},{"class":358},[3543],{"type":24,"value":666},{"type":18,"tag":291,"props":3545,"children":3546},{"class":304},[3547],{"type":24,"value":3548},")),\n",{"type":18,"tag":291,"props":3550,"children":3551},{"class":293,"line":674},[3552,3556,3561,3565,3569,3573,3577,3581,3585,3589,3593,3597,3601],{"type":18,"tag":291,"props":3553,"children":3554},{"class":304},[3555],{"type":24,"value":1131},{"type":18,"tag":291,"props":3557,"children":3558},{"class":1701},[3559],{"type":24,"value":3560},"'ubg'",{"type":18,"tag":291,"props":3562,"children":3563},{"class":304},[3564],{"type":24,"value":3506},{"type":18,"tag":291,"props":3566,"children":3567},{"class":358},[3568],{"type":24,"value":2663},{"type":18,"tag":291,"props":3570,"children":3571},{"class":304},[3572],{"type":24,"value":2668},{"type":18,"tag":291,"props":3574,"children":3575},{"class":298},[3576],{"type":24,"value":605},{"type":18,"tag":291,"props":3578,"children":3579},{"class":304},[3580],{"type":24,"value":2677},{"type":18,"tag":291,"props":3582,"children":3583},{"class":298},[3584],{"type":24,"value":762},{"type":18,"tag":291,"props":3586,"children":3587},{"class":304},[3588],{"type":24,"value":355},{"type":18,"tag":291,"props":3590,"children":3591},{"class":358},[3592],{"type":24,"value":666},{"type":18,"tag":291,"props":3594,"children":3595},{"class":304},[3596],{"type":24,"value":3539},{"type":18,"tag":291,"props":3598,"children":3599},{"class":358},[3600],{"type":24,"value":666},{"type":18,"tag":291,"props":3602,"children":3603},{"class":304},[3604],{"type":24,"value":3548},{"type":18,"tag":291,"props":3606,"children":3607},{"class":293,"line":683},[3608,3612,3617],{"type":18,"tag":291,"props":3609,"children":3610},{"class":304},[3611],{"type":24,"value":1131},{"type":18,"tag":291,"props":3613,"children":3614},{"class":1701},[3615],{"type":24,"value":3616},"'lbx'",{"type":18,"tag":291,"props":3618,"children":3619},{"class":304},[3620],{"type":24,"value":3621},": lbx,\n",{"type":18,"tag":291,"props":3623,"children":3624},{"class":293,"line":691},[3625,3629,3634],{"type":18,"tag":291,"props":3626,"children":3627},{"class":304},[3628],{"type":24,"value":1131},{"type":18,"tag":291,"props":3630,"children":3631},{"class":1701},[3632],{"type":24,"value":3633},"'ubx'",{"type":18,"tag":291,"props":3635,"children":3636},{"class":304},[3637],{"type":24,"value":3638},": ubx\n",{"type":18,"tag":291,"props":3640,"children":3641},{"class":293,"line":724},[3642],{"type":18,"tag":291,"props":3643,"children":3644},{"class":304},[3645],{"type":24,"value":2626},{"type":18,"tag":27,"props":3647,"children":3648},{},[3649],{"type":24,"value":3650},"Obtain the solution from the solver at each iteration",{"type":18,"tag":276,"props":3652,"children":3655},{"className":3653,"code":3654,"language":281,"meta":8},[279],"sol = solver(\n            x0=args['x0'],\n            p=args['p'],\n            lbx=args['lbx'],\n            ubx=args['ubx'],\n            lbg=args['lbg'],\n            ubg=args['ubg'],\n        )\n\n        sol_x = ca.reshape(sol['x'][:num_states * (prediction_horizons + 1)], 3, prediction_horizons + 1)\n        sol_u = ca.reshape(sol['x'][num_states * (prediction_horizons + 1):], 2, prediction_horizons)\n",[3656],{"type":18,"tag":284,"props":3657,"children":3658},{},[3659],{"type":18,"tag":276,"props":3660,"children":3661},{"__ignoreMap":8},[3662,3679,3712,3739,3767,3795,3823,3851,3859,3866,3943],{"type":18,"tag":291,"props":3663,"children":3664},{"class":293,"line":294},[3665,3670,3674],{"type":18,"tag":291,"props":3666,"children":3667},{"class":304},[3668],{"type":24,"value":3669},"sol ",{"type":18,"tag":291,"props":3671,"children":3672},{"class":298},[3673],{"type":24,"value":350},{"type":18,"tag":291,"props":3675,"children":3676},{"class":304},[3677],{"type":24,"value":3678}," solver(\n",{"type":18,"tag":291,"props":3680,"children":3681},{"class":293,"line":320},[3682,3687,3693,3697,3702,3707],{"type":18,"tag":291,"props":3683,"children":3684},{"class":304},[3685],{"type":24,"value":3686},"            ",{"type":18,"tag":291,"props":3688,"children":3690},{"class":3689},"ct-657843",[3691],{"type":24,"value":3692},"x0",{"type":18,"tag":291,"props":3694,"children":3695},{"class":298},[3696],{"type":24,"value":350},{"type":18,"tag":291,"props":3698,"children":3699},{"class":304},[3700],{"type":24,"value":3701},"args[",{"type":18,"tag":291,"props":3703,"children":3704},{"class":1701},[3705],{"type":24,"value":3706},"'x0'",{"type":18,"tag":291,"props":3708,"children":3709},{"class":304},[3710],{"type":24,"value":3711},"],\n",{"type":18,"tag":291,"props":3713,"children":3714},{"class":293,"line":329},[3715,3719,3723,3727,3731,3735],{"type":18,"tag":291,"props":3716,"children":3717},{"class":304},[3718],{"type":24,"value":3686},{"type":18,"tag":291,"props":3720,"children":3721},{"class":3689},[3722],{"type":24,"value":27},{"type":18,"tag":291,"props":3724,"children":3725},{"class":298},[3726],{"type":24,"value":350},{"type":18,"tag":291,"props":3728,"children":3729},{"class":304},[3730],{"type":24,"value":3701},{"type":18,"tag":291,"props":3732,"children":3733},{"class":1701},[3734],{"type":24,"value":2443},{"type":18,"tag":291,"props":3736,"children":3737},{"class":304},[3738],{"type":24,"value":3711},{"type":18,"tag":291,"props":3740,"children":3741},{"class":293,"line":339},[3742,3746,3751,3755,3759,3763],{"type":18,"tag":291,"props":3743,"children":3744},{"class":304},[3745],{"type":24,"value":3686},{"type":18,"tag":291,"props":3747,"children":3748},{"class":3689},[3749],{"type":24,"value":3750},"lbx",{"type":18,"tag":291,"props":3752,"children":3753},{"class":298},[3754],{"type":24,"value":350},{"type":18,"tag":291,"props":3756,"children":3757},{"class":304},[3758],{"type":24,"value":3701},{"type":18,"tag":291,"props":3760,"children":3761},{"class":1701},[3762],{"type":24,"value":3616},{"type":18,"tag":291,"props":3764,"children":3765},{"class":304},[3766],{"type":24,"value":3711},{"type":18,"tag":291,"props":3768,"children":3769},{"class":293,"line":364},[3770,3774,3779,3783,3787,3791],{"type":18,"tag":291,"props":3771,"children":3772},{"class":304},[3773],{"type":24,"value":3686},{"type":18,"tag":291,"props":3775,"children":3776},{"class":3689},[3777],{"type":24,"value":3778},"ubx",{"type":18,"tag":291,"props":3780,"children":3781},{"class":298},[3782],{"type":24,"value":350},{"type":18,"tag":291,"props":3784,"children":3785},{"class":304},[3786],{"type":24,"value":3701},{"type":18,"tag":291,"props":3788,"children":3789},{"class":1701},[3790],{"type":24,"value":3633},{"type":18,"tag":291,"props":3792,"children":3793},{"class":304},[3794],{"type":24,"value":3711},{"type":18,"tag":291,"props":3796,"children":3797},{"class":293,"line":373},[3798,3802,3807,3811,3815,3819],{"type":18,"tag":291,"props":3799,"children":3800},{"class":304},[3801],{"type":24,"value":3686},{"type":18,"tag":291,"props":3803,"children":3804},{"class":3689},[3805],{"type":24,"value":3806},"lbg",{"type":18,"tag":291,"props":3808,"children":3809},{"class":298},[3810],{"type":24,"value":350},{"type":18,"tag":291,"props":3812,"children":3813},{"class":304},[3814],{"type":24,"value":3701},{"type":18,"tag":291,"props":3816,"children":3817},{"class":1701},[3818],{"type":24,"value":3501},{"type":18,"tag":291,"props":3820,"children":3821},{"class":304},[3822],{"type":24,"value":3711},{"type":18,"tag":291,"props":3824,"children":3825},{"class":293,"line":395},[3826,3830,3835,3839,3843,3847],{"type":18,"tag":291,"props":3827,"children":3828},{"class":304},[3829],{"type":24,"value":3686},{"type":18,"tag":291,"props":3831,"children":3832},{"class":3689},[3833],{"type":24,"value":3834},"ubg",{"type":18,"tag":291,"props":3836,"children":3837},{"class":298},[3838],{"type":24,"value":350},{"type":18,"tag":291,"props":3840,"children":3841},{"class":304},[3842],{"type":24,"value":3701},{"type":18,"tag":291,"props":3844,"children":3845},{"class":1701},[3846],{"type":24,"value":3560},{"type":18,"tag":291,"props":3848,"children":3849},{"class":304},[3850],{"type":24,"value":3711},{"type":18,"tag":291,"props":3852,"children":3853},{"class":293,"line":404},[3854],{"type":18,"tag":291,"props":3855,"children":3856},{"class":304},[3857],{"type":24,"value":3858},"        )\n",{"type":18,"tag":291,"props":3860,"children":3861},{"class":293,"line":426},[3862],{"type":18,"tag":291,"props":3863,"children":3864},{},[3865],{"type":24,"value":326},{"type":18,"tag":291,"props":3867,"children":3868},{"class":293,"line":447},[3869,3874,3878,3883,3887,3892,3896,3900,3904,3908,3912,3917,3922,3927,3931,3935,3939],{"type":18,"tag":291,"props":3870,"children":3871},{"class":304},[3872],{"type":24,"value":3873},"        sol_x ",{"type":18,"tag":291,"props":3875,"children":3876},{"class":298},[3877],{"type":24,"value":350},{"type":18,"tag":291,"props":3879,"children":3880},{"class":304},[3881],{"type":24,"value":3882}," ca.reshape(sol[",{"type":18,"tag":291,"props":3884,"children":3885},{"class":1701},[3886],{"type":24,"value":2426},{"type":18,"tag":291,"props":3888,"children":3889},{"class":304},[3890],{"type":24,"value":3891},"][:num_states ",{"type":18,"tag":291,"props":3893,"children":3894},{"class":298},[3895],{"type":24,"value":605},{"type":18,"tag":291,"props":3897,"children":3898},{"class":304},[3899],{"type":24,"value":2677},{"type":18,"tag":291,"props":3901,"children":3902},{"class":298},[3903],{"type":24,"value":762},{"type":18,"tag":291,"props":3905,"children":3906},{"class":304},[3907],{"type":24,"value":355},{"type":18,"tag":291,"props":3909,"children":3910},{"class":358},[3911],{"type":24,"value":666},{"type":18,"tag":291,"props":3913,"children":3914},{"class":304},[3915],{"type":24,"value":3916},")], ",{"type":18,"tag":291,"props":3918,"children":3919},{"class":358},[3920],{"type":24,"value":3921},"3",{"type":18,"tag":291,"props":3923,"children":3924},{"class":304},[3925],{"type":24,"value":3926},", prediction_horizons ",{"type":18,"tag":291,"props":3928,"children":3929},{"class":298},[3930],{"type":24,"value":762},{"type":18,"tag":291,"props":3932,"children":3933},{"class":304},[3934],{"type":24,"value":355},{"type":18,"tag":291,"props":3936,"children":3937},{"class":358},[3938],{"type":24,"value":666},{"type":18,"tag":291,"props":3940,"children":3941},{"class":304},[3942],{"type":24,"value":1709},{"type":18,"tag":291,"props":3944,"children":3945},{"class":293,"line":468},[3946,3951,3955,3959,3963,3968,3972,3976,3980,3984,3988,3993,3997],{"type":18,"tag":291,"props":3947,"children":3948},{"class":304},[3949],{"type":24,"value":3950},"        sol_u ",{"type":18,"tag":291,"props":3952,"children":3953},{"class":298},[3954],{"type":24,"value":350},{"type":18,"tag":291,"props":3956,"children":3957},{"class":304},[3958],{"type":24,"value":3882},{"type":18,"tag":291,"props":3960,"children":3961},{"class":1701},[3962],{"type":24,"value":2426},{"type":18,"tag":291,"props":3964,"children":3965},{"class":304},[3966],{"type":24,"value":3967},"][num_states ",{"type":18,"tag":291,"props":3969,"children":3970},{"class":298},[3971],{"type":24,"value":605},{"type":18,"tag":291,"props":3973,"children":3974},{"class":304},[3975],{"type":24,"value":2677},{"type":18,"tag":291,"props":3977,"children":3978},{"class":298},[3979],{"type":24,"value":762},{"type":18,"tag":291,"props":3981,"children":3982},{"class":304},[3983],{"type":24,"value":355},{"type":18,"tag":291,"props":3985,"children":3986},{"class":358},[3987],{"type":24,"value":666},{"type":18,"tag":291,"props":3989,"children":3990},{"class":304},[3991],{"type":24,"value":3992},"):], ",{"type":18,"tag":291,"props":3994,"children":3995},{"class":358},[3996],{"type":24,"value":615},{"type":18,"tag":291,"props":3998,"children":3999},{"class":304},[4000],{"type":24,"value":4001},", prediction_horizons)",{"type":18,"tag":19,"props":4003,"children":4005},{"id":4004},"result",[4006],{"type":24,"value":4007},"Result",{"type":18,"tag":27,"props":4009,"children":4010},{},[4011],{"type":24,"value":4012},"I use MPC to control the differential drive robot to move from it zero position the the desired postion that I want to follow !.\nI generate a circle trajectory and I fit this curve into my beautiful and robustness cost and then volia !!!.",{"type":18,"tag":4014,"props":4015,"children":4020},"figure",{"className":4016},[4017,4018,4019],"mb-4","inline-block","max-w-sm",[4021,4022],{"type":24,"value":43},{"type":18,"tag":45,"props":4023,"children":4026},{"className":4024,"src":4025,"width":49,"height":50},[48],"/topics/robotics/nmpc/diff_mpc.png",[],{"type":18,"tag":59,"props":4028,"children":4030},{"className":4029},[62,63,64,65],[4031],{"type":24,"value":4032},"\n    Plot of differential drive robot follow the circle trajectory !!!.\n",{"type":18,"tag":19,"props":4034,"children":4036},{"id":4035},"in-conclusion",[4037],{"type":24,"value":4038},"In conclusion",{"type":18,"tag":27,"props":4040,"children":4041},{},[4042],{"type":24,"value":4043},"In my opinion, I think MPC is suitable for the control system, since it can provide the significant control input that was predicted over the finite future of time. This can ensure the safety of the system and also can provide a quick look or reaction to the control action of the system too.",{"type":18,"tag":19,"props":4045,"children":4047},{"id":4046},"reference",[4048],{"type":24,"value":4049},"Reference",{"type":18,"tag":4051,"props":4052,"children":4053},"ol",{},[4054,4059,4064],{"type":18,"tag":119,"props":4055,"children":4056},{},[4057],{"type":24,"value":4058},"MPC-and-MHE-implementation-in-MATLAB-using-Casadi: https://github.com/MMehrez/MPC-and-MHE-implementation-in-MATLAB-using-Casadi",{"type":18,"tag":119,"props":4060,"children":4061},{},[4062],{"type":24,"value":4063},"CasAdi: https://web.casadi.org",{"type":18,"tag":119,"props":4065,"children":4066},{},[4067],{"type":24,"value":4068},"PathTracking: https://github.com/SokhengDin/PathTracking",{"type":18,"tag":4070,"children":4071},"style",[4072],{"type":24,"value":4073},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-326375{color:#6A737D;}\n.ct-533739{color:#79B8FF;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":320,"depth":320,"links":4075},[4076,4077,4078,4079,4080,4081,4082,4083,4084],{"id":21,"depth":320,"text":25},{"id":71,"depth":320,"text":74},{"id":221,"depth":320,"text":224},{"id":1521,"depth":320,"text":1524},{"id":1549,"depth":320,"text":1552},{"id":1592,"depth":320,"text":1595},{"id":4004,"depth":320,"text":4007},{"id":4035,"depth":320,"text":4038},{"id":4046,"depth":320,"text":4049},"markdown","content:topics:robotics:nonlinear-mpc.md","content","topics/robotics/nonlinear-mpc.md","md",{"_path":4091,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":4092,"description":4093,"author":4094,"slug":4095,"tag":4095,"img":4096,"body":4097,"_type":4085,"_id":5996,"_source":4087,"_file":5997,"_extension":4089},"/topics/robotics/pid-controller","Introduction to PID Controller in Python","PID Control is a feedback control","DIN SOKHENG","pid","/topics/robotics/nmpc/PID.png",{"type":15,"children":4098,"toc":5982},[4099,4105,4116,4122,4127,4133,4137,4176,4185,4191,4197,4207,4213,4218,4252,4258,4263,4268,4278,4284,4289,4293,4298,4302,4307,4720,4737,5284,5289,5295,5302,5320,5406,5411,5473,5478,5562,5574,5862,5868,5887,5903,5907,5917,5923,5933,5939,5944,5949,5955,5978],{"type":18,"tag":19,"props":4100,"children":4102},{"id":4101},"what-is-pid-controller",[4103],{"type":24,"value":4104},"What is PID Controller ?",{"type":18,"tag":27,"props":4106,"children":4107},{},[4108,4110,4114],{"type":24,"value":4109},"The Proportional Integral Derivative (PID) controller is a traditional method in control systems that has found widespread use in control system engineering and industrial applications since its emergence in the 1940s. A PID controller is considered a feedback controller, aiming to minimize the error between the system's feedback and the desired setpoint by manually or automatically fine-tuning the coefficients ",{"type":18,"tag":123,"props":4111,"children":4113},{"latex-express":4112,"styles":126},"K_{P}, K_{I}, K_{D}",[],{"type":24,"value":4115},".",{"type":18,"tag":19,"props":4117,"children":4119},{"id":4118},"how-it-works",[4120],{"type":24,"value":4121},"How it works ?",{"type":18,"tag":27,"props":4123,"children":4124},{},[4125],{"type":24,"value":4126},"Imagine you want to control the speed of a DC motor to reach 300 RPM, but due to the natural response of the DC motor, it cannot reach the desired angular speed. PID offers a solution to this natural response by adjusting the system's time response using its three components, as shown in the formula below.",{"type":18,"tag":19,"props":4128,"children":4130},{"id":4129},"formulation",[4131],{"type":24,"value":4132},"Formulation",{"type":18,"tag":105,"props":4134,"children":4136},{"latex-express":4135,"styles":62},"u(t) = K_{p}e(t) + K_{I} \\int_{0}^{t} e(t) dt + K_{D} \\frac{d e(t)}{dt} ",[],{"type":18,"tag":115,"props":4138,"children":4139},{},[4140,4149,4158,4167],{"type":18,"tag":119,"props":4141,"children":4142},{},[4143,4147],{"type":18,"tag":123,"props":4144,"children":4146},{"latex-express":4145,"styles":126},"K_{P}",[],{"type":24,"value":4148}," represents the proportional gain.",{"type":18,"tag":119,"props":4150,"children":4151},{},[4152,4156],{"type":18,"tag":123,"props":4153,"children":4155},{"latex-express":4154,"styles":126},"K_{I}",[],{"type":24,"value":4157}," represents the integral gain.",{"type":18,"tag":119,"props":4159,"children":4160},{},[4161,4165],{"type":18,"tag":123,"props":4162,"children":4164},{"latex-express":4163,"styles":126},"K_{D}",[],{"type":24,"value":4166}," represents the derivative gain.",{"type":18,"tag":119,"props":4168,"children":4169},{},[4170,4174],{"type":18,"tag":123,"props":4171,"children":4173},{"latex-express":4172,"styles":126},"e(t)=target-feedback",[],{"type":24,"value":4175}," is the error between target point and feedback of the system",{"type":18,"tag":4014,"props":4177,"children":4179},{"className":4178},[4017,4018,4019],[4180,4181],{"type":24,"value":43},{"type":18,"tag":45,"props":4182,"children":4184},{"className":4183,"src":4096},[48],[],{"type":18,"tag":59,"props":4186,"children":4188},{"className":4187},[62,63,64,65],[4189],{"type":24,"value":4190},"\n    The Block diagram of PID Controller\n",{"type":18,"tag":19,"props":4192,"children":4194},{"id":4193},"response-time",[4195],{"type":24,"value":4196},"Response Time",{"type":18,"tag":4014,"props":4198,"children":4200},{"className":4199},[4017,4018,4019],[4201,4202],{"type":24,"value":43},{"type":18,"tag":45,"props":4203,"children":4206},{"className":4204,"src":4205},[48],"/topics/robotics/nmpc/response_timepid.png",[],{"type":18,"tag":59,"props":4208,"children":4210},{"className":4209},[62,63,64,65],[4211],{"type":24,"value":4212},"\n    The response time of the system with each K_P, K_I, K_D\n",{"type":18,"tag":27,"props":4214,"children":4215},{},[4216],{"type":24,"value":4217},"As you can see in the figure above, the response time of the system is difference.",{"type":18,"tag":115,"props":4219,"children":4220},{},[4221,4232,4242],{"type":18,"tag":119,"props":4222,"children":4223},{},[4224,4226,4230],{"type":24,"value":4225},"The response time with ",{"type":18,"tag":123,"props":4227,"children":4229},{"latex-express":4228,"styles":126},"K_{I}=2",[],{"type":24,"value":4231}," the system is likely to overshoot before reaching the steady-state, which may not be suitable for applications like controlling a DC motor.",{"type":18,"tag":119,"props":4233,"children":4234},{},[4235,4236,4240],{"type":24,"value":4225},{"type":18,"tag":123,"props":4237,"children":4239},{"latex-express":4238,"styles":126},"K_{i}=0.5, ",[],{"type":24,"value":4241},"  the response does not overshoot but has a slower response to reach the steady-state.",{"type":18,"tag":119,"props":4243,"children":4244},{},[4245,4246,4250],{"type":24,"value":4225},{"type":18,"tag":123,"props":4247,"children":4249},{"latex-express":4248,"styles":126},"K_{p}=1, K_{i}=1, K_{d}=1",[],{"type":24,"value":4251},"  there is a slight overshoot, but the steady-state is reached faster.",{"type":18,"tag":19,"props":4253,"children":4255},{"id":4254},"how-can-we-write-pid-code-in-python",[4256],{"type":24,"value":4257},"How can we write PID code in Python ?",{"type":18,"tag":27,"props":4259,"children":4260},{},[4261],{"type":24,"value":4262},"Let's use a differential drive robot as a case study system. A differential drive robot is commonly used in robotics and automation, making it an ideal choice for a demonstration.",{"type":18,"tag":27,"props":4264,"children":4265},{},[4266],{"type":24,"value":4267},"The configuration of Differential Drive Robot in axes OXY.",{"type":18,"tag":4014,"props":4269,"children":4271},{"className":4270},[4017,4018,4019],[4272,4273],{"type":24,"value":43},{"type":18,"tag":45,"props":4274,"children":4277},{"className":4275,"src":4276},[48],"/topics/robotics/nmpc/diff_drive.png",[],{"type":18,"tag":59,"props":4279,"children":4281},{"className":4280},[62,63,64,65],[4282],{"type":24,"value":4283},"\n    The configuration of Differential Drive Robot in axes OXY.\n",{"type":18,"tag":27,"props":4285,"children":4286},{},[4287],{"type":24,"value":4288},"The forward kinematic equation",{"type":18,"tag":105,"props":4290,"children":4292},{"latex-express":4291,"styles":62},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{\\theta} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":4294,"children":4295},{},[4296],{"type":24,"value":4297},"So, if we discretize the forward kinematic with a certain sampling time, we will get",{"type":18,"tag":123,"props":4299,"children":4301},{"latex-express":4300,"styles":62},"\n\\begin{bmatrix} x_{t+1} \\\\ y_{t+1} \\\\ \\theta_{t+1} \\end{bmatrix} = \\begin{bmatrix} x_{t} \\\\ y_{t} \\\\ \\theta_{t} \\end{bmatrix} +\\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix} \\times \\Delta t\n ",[],{"type":18,"tag":27,"props":4303,"children":4304},{},[4305],{"type":24,"value":4306},"In Python,",{"type":18,"tag":276,"props":4308,"children":4311},{"className":4309,"code":4310,"language":281,"meta":8},[279],"class DifferentialDrive:\n    def __init__(self):\n        self.r = 0.05\n        self.L = 0.25\n    def forward_kinematic(self, v, omega, yaw):\n        vx = v*np.cos(yaw)\n        vy = v*np.sin(yaw)\n        vyaw = omega\n\n        return vx, vy, vyaw\n    def discrete_state(self, x, y, yaw, v, omega, dt):\n        dx, dy, dyaw = self.forward_kinematic(v, omega, yaw)\n        x_next = x + dx * dt\n        y_next = y + dy * dt\n        yaw_next = yaw + dyaw * dt\n\n        return x_next, y_next, yaw_next\n",[4312],{"type":18,"tag":284,"props":4313,"children":4314},{},[4315],{"type":18,"tag":276,"props":4316,"children":4317},{"__ignoreMap":8},[4318,4341,4367,4398,4427,4452,4478,4503,4520,4527,4544,4569,4594,4629,4663,4697,4704],{"type":18,"tag":291,"props":4319,"children":4320},{"class":293,"line":294},[4321,4326,4330,4336],{"type":18,"tag":291,"props":4322,"children":4323},{"class":298},[4324],{"type":24,"value":4325},"class",{"type":18,"tag":291,"props":4327,"children":4328},{"class":304},[4329],{"type":24,"value":355},{"type":18,"tag":291,"props":4331,"children":4333},{"class":4332},"ct-806137",[4334],{"type":24,"value":4335},"DifferentialDrive",{"type":18,"tag":291,"props":4337,"children":4338},{"class":304},[4339],{"type":24,"value":4340},":\n",{"type":18,"tag":291,"props":4342,"children":4343},{"class":293,"line":320},[4344,4348,4353,4357,4362],{"type":18,"tag":291,"props":4345,"children":4346},{"class":304},[4347],{"type":24,"value":1131},{"type":18,"tag":291,"props":4349,"children":4350},{"class":298},[4351],{"type":24,"value":4352},"def",{"type":18,"tag":291,"props":4354,"children":4355},{"class":304},[4356],{"type":24,"value":355},{"type":18,"tag":291,"props":4358,"children":4359},{"class":358},[4360],{"type":24,"value":4361},"__init__",{"type":18,"tag":291,"props":4363,"children":4364},{"class":304},[4365],{"type":24,"value":4366},"(self):\n",{"type":18,"tag":291,"props":4368,"children":4369},{"class":293,"line":329},[4370,4375,4380,4385,4389,4393],{"type":18,"tag":291,"props":4371,"children":4372},{"class":304},[4373],{"type":24,"value":4374},"        ",{"type":18,"tag":291,"props":4376,"children":4377},{"class":358},[4378],{"type":24,"value":4379},"self",{"type":18,"tag":291,"props":4381,"children":4382},{"class":304},[4383],{"type":24,"value":4384},".r ",{"type":18,"tag":291,"props":4386,"children":4387},{"class":298},[4388],{"type":24,"value":350},{"type":18,"tag":291,"props":4390,"children":4391},{"class":304},[4392],{"type":24,"value":355},{"type":18,"tag":291,"props":4394,"children":4395},{"class":358},[4396],{"type":24,"value":4397},"0.05\n",{"type":18,"tag":291,"props":4399,"children":4400},{"class":293,"line":339},[4401,4405,4409,4414,4418,4422],{"type":18,"tag":291,"props":4402,"children":4403},{"class":304},[4404],{"type":24,"value":4374},{"type":18,"tag":291,"props":4406,"children":4407},{"class":358},[4408],{"type":24,"value":4379},{"type":18,"tag":291,"props":4410,"children":4411},{"class":304},[4412],{"type":24,"value":4413},".L ",{"type":18,"tag":291,"props":4415,"children":4416},{"class":298},[4417],{"type":24,"value":350},{"type":18,"tag":291,"props":4419,"children":4420},{"class":304},[4421],{"type":24,"value":355},{"type":18,"tag":291,"props":4423,"children":4424},{"class":358},[4425],{"type":24,"value":4426},"0.25\n",{"type":18,"tag":291,"props":4428,"children":4429},{"class":293,"line":364},[4430,4434,4438,4442,4447],{"type":18,"tag":291,"props":4431,"children":4432},{"class":304},[4433],{"type":24,"value":1131},{"type":18,"tag":291,"props":4435,"children":4436},{"class":298},[4437],{"type":24,"value":4352},{"type":18,"tag":291,"props":4439,"children":4440},{"class":304},[4441],{"type":24,"value":355},{"type":18,"tag":291,"props":4443,"children":4444},{"class":4332},[4445],{"type":24,"value":4446},"forward_kinematic",{"type":18,"tag":291,"props":4448,"children":4449},{"class":304},[4450],{"type":24,"value":4451},"(self, v, omega, yaw):\n",{"type":18,"tag":291,"props":4453,"children":4454},{"class":293,"line":373},[4455,4460,4464,4469,4473],{"type":18,"tag":291,"props":4456,"children":4457},{"class":304},[4458],{"type":24,"value":4459},"        vx ",{"type":18,"tag":291,"props":4461,"children":4462},{"class":298},[4463],{"type":24,"value":350},{"type":18,"tag":291,"props":4465,"children":4466},{"class":304},[4467],{"type":24,"value":4468}," v",{"type":18,"tag":291,"props":4470,"children":4471},{"class":298},[4472],{"type":24,"value":605},{"type":18,"tag":291,"props":4474,"children":4475},{"class":304},[4476],{"type":24,"value":4477},"np.cos(yaw)\n",{"type":18,"tag":291,"props":4479,"children":4480},{"class":293,"line":395},[4481,4486,4490,4494,4498],{"type":18,"tag":291,"props":4482,"children":4483},{"class":304},[4484],{"type":24,"value":4485},"        vy ",{"type":18,"tag":291,"props":4487,"children":4488},{"class":298},[4489],{"type":24,"value":350},{"type":18,"tag":291,"props":4491,"children":4492},{"class":304},[4493],{"type":24,"value":4468},{"type":18,"tag":291,"props":4495,"children":4496},{"class":298},[4497],{"type":24,"value":605},{"type":18,"tag":291,"props":4499,"children":4500},{"class":304},[4501],{"type":24,"value":4502},"np.sin(yaw)\n",{"type":18,"tag":291,"props":4504,"children":4505},{"class":293,"line":404},[4506,4511,4515],{"type":18,"tag":291,"props":4507,"children":4508},{"class":304},[4509],{"type":24,"value":4510},"        vyaw ",{"type":18,"tag":291,"props":4512,"children":4513},{"class":298},[4514],{"type":24,"value":350},{"type":18,"tag":291,"props":4516,"children":4517},{"class":304},[4518],{"type":24,"value":4519}," omega\n",{"type":18,"tag":291,"props":4521,"children":4522},{"class":293,"line":426},[4523],{"type":18,"tag":291,"props":4524,"children":4525},{},[4526],{"type":24,"value":326},{"type":18,"tag":291,"props":4528,"children":4529},{"class":293,"line":447},[4530,4534,4539],{"type":18,"tag":291,"props":4531,"children":4532},{"class":304},[4533],{"type":24,"value":4374},{"type":18,"tag":291,"props":4535,"children":4536},{"class":298},[4537],{"type":24,"value":4538},"return",{"type":18,"tag":291,"props":4540,"children":4541},{"class":304},[4542],{"type":24,"value":4543}," vx, vy, vyaw\n",{"type":18,"tag":291,"props":4545,"children":4546},{"class":293,"line":468},[4547,4551,4555,4559,4564],{"type":18,"tag":291,"props":4548,"children":4549},{"class":304},[4550],{"type":24,"value":1131},{"type":18,"tag":291,"props":4552,"children":4553},{"class":298},[4554],{"type":24,"value":4352},{"type":18,"tag":291,"props":4556,"children":4557},{"class":304},[4558],{"type":24,"value":355},{"type":18,"tag":291,"props":4560,"children":4561},{"class":4332},[4562],{"type":24,"value":4563},"discrete_state",{"type":18,"tag":291,"props":4565,"children":4566},{"class":304},[4567],{"type":24,"value":4568},"(self, x, y, yaw, v, omega, dt):\n",{"type":18,"tag":291,"props":4570,"children":4571},{"class":293,"line":477},[4572,4577,4581,4585,4589],{"type":18,"tag":291,"props":4573,"children":4574},{"class":304},[4575],{"type":24,"value":4576},"        dx, dy, dyaw ",{"type":18,"tag":291,"props":4578,"children":4579},{"class":298},[4580],{"type":24,"value":350},{"type":18,"tag":291,"props":4582,"children":4583},{"class":304},[4584],{"type":24,"value":355},{"type":18,"tag":291,"props":4586,"children":4587},{"class":358},[4588],{"type":24,"value":4379},{"type":18,"tag":291,"props":4590,"children":4591},{"class":304},[4592],{"type":24,"value":4593},".forward_kinematic(v, omega, yaw)\n",{"type":18,"tag":291,"props":4595,"children":4596},{"class":293,"line":508},[4597,4602,4606,4611,4615,4620,4624],{"type":18,"tag":291,"props":4598,"children":4599},{"class":304},[4600],{"type":24,"value":4601},"        x_next ",{"type":18,"tag":291,"props":4603,"children":4604},{"class":298},[4605],{"type":24,"value":350},{"type":18,"tag":291,"props":4607,"children":4608},{"class":304},[4609],{"type":24,"value":4610}," x ",{"type":18,"tag":291,"props":4612,"children":4613},{"class":298},[4614],{"type":24,"value":762},{"type":18,"tag":291,"props":4616,"children":4617},{"class":304},[4618],{"type":24,"value":4619}," dx ",{"type":18,"tag":291,"props":4621,"children":4622},{"class":298},[4623],{"type":24,"value":605},{"type":18,"tag":291,"props":4625,"children":4626},{"class":304},[4627],{"type":24,"value":4628}," dt\n",{"type":18,"tag":291,"props":4630,"children":4631},{"class":293,"line":539},[4632,4637,4641,4646,4650,4655,4659],{"type":18,"tag":291,"props":4633,"children":4634},{"class":304},[4635],{"type":24,"value":4636},"        y_next ",{"type":18,"tag":291,"props":4638,"children":4639},{"class":298},[4640],{"type":24,"value":350},{"type":18,"tag":291,"props":4642,"children":4643},{"class":304},[4644],{"type":24,"value":4645}," y ",{"type":18,"tag":291,"props":4647,"children":4648},{"class":298},[4649],{"type":24,"value":762},{"type":18,"tag":291,"props":4651,"children":4652},{"class":304},[4653],{"type":24,"value":4654}," dy ",{"type":18,"tag":291,"props":4656,"children":4657},{"class":298},[4658],{"type":24,"value":605},{"type":18,"tag":291,"props":4660,"children":4661},{"class":304},[4662],{"type":24,"value":4628},{"type":18,"tag":291,"props":4664,"children":4665},{"class":293,"line":548},[4666,4671,4675,4680,4684,4689,4693],{"type":18,"tag":291,"props":4667,"children":4668},{"class":304},[4669],{"type":24,"value":4670},"        yaw_next ",{"type":18,"tag":291,"props":4672,"children":4673},{"class":298},[4674],{"type":24,"value":350},{"type":18,"tag":291,"props":4676,"children":4677},{"class":304},[4678],{"type":24,"value":4679}," yaw ",{"type":18,"tag":291,"props":4681,"children":4682},{"class":298},[4683],{"type":24,"value":762},{"type":18,"tag":291,"props":4685,"children":4686},{"class":304},[4687],{"type":24,"value":4688}," dyaw ",{"type":18,"tag":291,"props":4690,"children":4691},{"class":298},[4692],{"type":24,"value":605},{"type":18,"tag":291,"props":4694,"children":4695},{"class":304},[4696],{"type":24,"value":4628},{"type":18,"tag":291,"props":4698,"children":4699},{"class":293,"line":557},[4700],{"type":18,"tag":291,"props":4701,"children":4702},{},[4703],{"type":24,"value":326},{"type":18,"tag":291,"props":4705,"children":4706},{"class":293,"line":584},[4707,4711,4715],{"type":18,"tag":291,"props":4708,"children":4709},{"class":304},[4710],{"type":24,"value":4374},{"type":18,"tag":291,"props":4712,"children":4713},{"class":298},[4714],{"type":24,"value":4538},{"type":18,"tag":291,"props":4716,"children":4717},{"class":304},[4718],{"type":24,"value":4719}," x_next, y_next, yaw_next",{"type":18,"tag":27,"props":4721,"children":4722},{},[4723,4725,4729,4731,4736],{"type":24,"value":4724},"The ",{"type":18,"tag":231,"props":4726,"children":4727},{},[4728],{"type":24,"value":235},{"type":24,"value":4730}," class that we defined, has all the need attribute to use for PID control !!. We just need to write another class for our ",{"type":18,"tag":231,"props":4732,"children":4733},{},[4734],{"type":24,"value":4735}," PID Controller ",{"type":24,"value":4115},{"type":18,"tag":276,"props":4738,"children":4741},{"className":4739,"code":4740,"language":281,"meta":8},[279],"class PIDController:\n    def __init__(self, kp, ki, kd, dt):\n\n        self.kp = kp\n        self.ki = ki\n        self.kd = kd\n        self.dt = dt\n        self.integral = 0\n\n    def calculate_pid(self, errors):\n        # Calculate proportional error\n        proportional = self.kp * errors[-1]\n        # Calculate integration error\n        integral = self.integral + self.ki * (errors[-1]) * self.dt\n        self.integral = integral\n        # Calculate derivative error\n        derivative = self.kd * (errors[-1] - errors[-2])/self.dt\n\n        output = proportional + integral + derivative\n\n        return output\n",[4742],{"type":18,"tag":284,"props":4743,"children":4744},{},[4745],{"type":18,"tag":276,"props":4746,"children":4747},{"__ignoreMap":8},[4748,4768,4792,4799,4824,4849,4874,4898,4926,4933,4958,4970,5016,5028,5106,5130,5142,5219,5226,5261,5268],{"type":18,"tag":291,"props":4749,"children":4750},{"class":293,"line":294},[4751,4755,4759,4764],{"type":18,"tag":291,"props":4752,"children":4753},{"class":298},[4754],{"type":24,"value":4325},{"type":18,"tag":291,"props":4756,"children":4757},{"class":304},[4758],{"type":24,"value":355},{"type":18,"tag":291,"props":4760,"children":4761},{"class":4332},[4762],{"type":24,"value":4763},"PIDController",{"type":18,"tag":291,"props":4765,"children":4766},{"class":304},[4767],{"type":24,"value":4340},{"type":18,"tag":291,"props":4769,"children":4770},{"class":293,"line":320},[4771,4775,4779,4783,4787],{"type":18,"tag":291,"props":4772,"children":4773},{"class":304},[4774],{"type":24,"value":1131},{"type":18,"tag":291,"props":4776,"children":4777},{"class":298},[4778],{"type":24,"value":4352},{"type":18,"tag":291,"props":4780,"children":4781},{"class":304},[4782],{"type":24,"value":355},{"type":18,"tag":291,"props":4784,"children":4785},{"class":358},[4786],{"type":24,"value":4361},{"type":18,"tag":291,"props":4788,"children":4789},{"class":304},[4790],{"type":24,"value":4791},"(self, kp, ki, kd, dt):\n",{"type":18,"tag":291,"props":4793,"children":4794},{"class":293,"line":329},[4795],{"type":18,"tag":291,"props":4796,"children":4797},{},[4798],{"type":24,"value":326},{"type":18,"tag":291,"props":4800,"children":4801},{"class":293,"line":339},[4802,4806,4810,4815,4819],{"type":18,"tag":291,"props":4803,"children":4804},{"class":304},[4805],{"type":24,"value":4374},{"type":18,"tag":291,"props":4807,"children":4808},{"class":358},[4809],{"type":24,"value":4379},{"type":18,"tag":291,"props":4811,"children":4812},{"class":304},[4813],{"type":24,"value":4814},".kp ",{"type":18,"tag":291,"props":4816,"children":4817},{"class":298},[4818],{"type":24,"value":350},{"type":18,"tag":291,"props":4820,"children":4821},{"class":304},[4822],{"type":24,"value":4823}," kp\n",{"type":18,"tag":291,"props":4825,"children":4826},{"class":293,"line":364},[4827,4831,4835,4840,4844],{"type":18,"tag":291,"props":4828,"children":4829},{"class":304},[4830],{"type":24,"value":4374},{"type":18,"tag":291,"props":4832,"children":4833},{"class":358},[4834],{"type":24,"value":4379},{"type":18,"tag":291,"props":4836,"children":4837},{"class":304},[4838],{"type":24,"value":4839},".ki ",{"type":18,"tag":291,"props":4841,"children":4842},{"class":298},[4843],{"type":24,"value":350},{"type":18,"tag":291,"props":4845,"children":4846},{"class":304},[4847],{"type":24,"value":4848}," ki\n",{"type":18,"tag":291,"props":4850,"children":4851},{"class":293,"line":373},[4852,4856,4860,4865,4869],{"type":18,"tag":291,"props":4853,"children":4854},{"class":304},[4855],{"type":24,"value":4374},{"type":18,"tag":291,"props":4857,"children":4858},{"class":358},[4859],{"type":24,"value":4379},{"type":18,"tag":291,"props":4861,"children":4862},{"class":304},[4863],{"type":24,"value":4864},".kd ",{"type":18,"tag":291,"props":4866,"children":4867},{"class":298},[4868],{"type":24,"value":350},{"type":18,"tag":291,"props":4870,"children":4871},{"class":304},[4872],{"type":24,"value":4873}," kd\n",{"type":18,"tag":291,"props":4875,"children":4876},{"class":293,"line":395},[4877,4881,4885,4890,4894],{"type":18,"tag":291,"props":4878,"children":4879},{"class":304},[4880],{"type":24,"value":4374},{"type":18,"tag":291,"props":4882,"children":4883},{"class":358},[4884],{"type":24,"value":4379},{"type":18,"tag":291,"props":4886,"children":4887},{"class":304},[4888],{"type":24,"value":4889},".dt ",{"type":18,"tag":291,"props":4891,"children":4892},{"class":298},[4893],{"type":24,"value":350},{"type":18,"tag":291,"props":4895,"children":4896},{"class":304},[4897],{"type":24,"value":4628},{"type":18,"tag":291,"props":4899,"children":4900},{"class":293,"line":404},[4901,4905,4909,4914,4918,4922],{"type":18,"tag":291,"props":4902,"children":4903},{"class":304},[4904],{"type":24,"value":4374},{"type":18,"tag":291,"props":4906,"children":4907},{"class":358},[4908],{"type":24,"value":4379},{"type":18,"tag":291,"props":4910,"children":4911},{"class":304},[4912],{"type":24,"value":4913},".integral ",{"type":18,"tag":291,"props":4915,"children":4916},{"class":298},[4917],{"type":24,"value":350},{"type":18,"tag":291,"props":4919,"children":4920},{"class":304},[4921],{"type":24,"value":355},{"type":18,"tag":291,"props":4923,"children":4924},{"class":358},[4925],{"type":24,"value":2618},{"type":18,"tag":291,"props":4927,"children":4928},{"class":293,"line":426},[4929],{"type":18,"tag":291,"props":4930,"children":4931},{},[4932],{"type":24,"value":326},{"type":18,"tag":291,"props":4934,"children":4935},{"class":293,"line":447},[4936,4940,4944,4948,4953],{"type":18,"tag":291,"props":4937,"children":4938},{"class":304},[4939],{"type":24,"value":1131},{"type":18,"tag":291,"props":4941,"children":4942},{"class":298},[4943],{"type":24,"value":4352},{"type":18,"tag":291,"props":4945,"children":4946},{"class":304},[4947],{"type":24,"value":355},{"type":18,"tag":291,"props":4949,"children":4950},{"class":4332},[4951],{"type":24,"value":4952},"calculate_pid",{"type":18,"tag":291,"props":4954,"children":4955},{"class":304},[4956],{"type":24,"value":4957},"(self, errors):\n",{"type":18,"tag":291,"props":4959,"children":4960},{"class":293,"line":468},[4961,4965],{"type":18,"tag":291,"props":4962,"children":4963},{"class":304},[4964],{"type":24,"value":4374},{"type":18,"tag":291,"props":4966,"children":4967},{"class":333},[4968],{"type":24,"value":4969},"# Calculate proportional error\n",{"type":18,"tag":291,"props":4971,"children":4972},{"class":293,"line":477},[4973,4978,4982,4986,4990,4994,4998,5003,5007,5011],{"type":18,"tag":291,"props":4974,"children":4975},{"class":304},[4976],{"type":24,"value":4977},"        proportional ",{"type":18,"tag":291,"props":4979,"children":4980},{"class":298},[4981],{"type":24,"value":350},{"type":18,"tag":291,"props":4983,"children":4984},{"class":304},[4985],{"type":24,"value":355},{"type":18,"tag":291,"props":4987,"children":4988},{"class":358},[4989],{"type":24,"value":4379},{"type":18,"tag":291,"props":4991,"children":4992},{"class":304},[4993],{"type":24,"value":4814},{"type":18,"tag":291,"props":4995,"children":4996},{"class":298},[4997],{"type":24,"value":605},{"type":18,"tag":291,"props":4999,"children":5000},{"class":304},[5001],{"type":24,"value":5002}," errors[",{"type":18,"tag":291,"props":5004,"children":5005},{"class":298},[5006],{"type":24,"value":1993},{"type":18,"tag":291,"props":5008,"children":5009},{"class":358},[5010],{"type":24,"value":666},{"type":18,"tag":291,"props":5012,"children":5013},{"class":304},[5014],{"type":24,"value":5015},"]\n",{"type":18,"tag":291,"props":5017,"children":5018},{"class":293,"line":508},[5019,5023],{"type":18,"tag":291,"props":5020,"children":5021},{"class":304},[5022],{"type":24,"value":4374},{"type":18,"tag":291,"props":5024,"children":5025},{"class":333},[5026],{"type":24,"value":5027},"# Calculate integration error\n",{"type":18,"tag":291,"props":5029,"children":5030},{"class":293,"line":539},[5031,5036,5040,5044,5048,5052,5056,5060,5064,5068,5072,5077,5081,5085,5089,5093,5097,5101],{"type":18,"tag":291,"props":5032,"children":5033},{"class":304},[5034],{"type":24,"value":5035},"        integral ",{"type":18,"tag":291,"props":5037,"children":5038},{"class":298},[5039],{"type":24,"value":350},{"type":18,"tag":291,"props":5041,"children":5042},{"class":304},[5043],{"type":24,"value":355},{"type":18,"tag":291,"props":5045,"children":5046},{"class":358},[5047],{"type":24,"value":4379},{"type":18,"tag":291,"props":5049,"children":5050},{"class":304},[5051],{"type":24,"value":4913},{"type":18,"tag":291,"props":5053,"children":5054},{"class":298},[5055],{"type":24,"value":762},{"type":18,"tag":291,"props":5057,"children":5058},{"class":304},[5059],{"type":24,"value":355},{"type":18,"tag":291,"props":5061,"children":5062},{"class":358},[5063],{"type":24,"value":4379},{"type":18,"tag":291,"props":5065,"children":5066},{"class":304},[5067],{"type":24,"value":4839},{"type":18,"tag":291,"props":5069,"children":5070},{"class":298},[5071],{"type":24,"value":605},{"type":18,"tag":291,"props":5073,"children":5074},{"class":304},[5075],{"type":24,"value":5076}," (errors[",{"type":18,"tag":291,"props":5078,"children":5079},{"class":298},[5080],{"type":24,"value":1993},{"type":18,"tag":291,"props":5082,"children":5083},{"class":358},[5084],{"type":24,"value":666},{"type":18,"tag":291,"props":5086,"children":5087},{"class":304},[5088],{"type":24,"value":1246},{"type":18,"tag":291,"props":5090,"children":5091},{"class":298},[5092],{"type":24,"value":605},{"type":18,"tag":291,"props":5094,"children":5095},{"class":304},[5096],{"type":24,"value":355},{"type":18,"tag":291,"props":5098,"children":5099},{"class":358},[5100],{"type":24,"value":4379},{"type":18,"tag":291,"props":5102,"children":5103},{"class":304},[5104],{"type":24,"value":5105},".dt\n",{"type":18,"tag":291,"props":5107,"children":5108},{"class":293,"line":548},[5109,5113,5117,5121,5125],{"type":18,"tag":291,"props":5110,"children":5111},{"class":304},[5112],{"type":24,"value":4374},{"type":18,"tag":291,"props":5114,"children":5115},{"class":358},[5116],{"type":24,"value":4379},{"type":18,"tag":291,"props":5118,"children":5119},{"class":304},[5120],{"type":24,"value":4913},{"type":18,"tag":291,"props":5122,"children":5123},{"class":298},[5124],{"type":24,"value":350},{"type":18,"tag":291,"props":5126,"children":5127},{"class":304},[5128],{"type":24,"value":5129}," integral\n",{"type":18,"tag":291,"props":5131,"children":5132},{"class":293,"line":557},[5133,5137],{"type":18,"tag":291,"props":5134,"children":5135},{"class":304},[5136],{"type":24,"value":4374},{"type":18,"tag":291,"props":5138,"children":5139},{"class":333},[5140],{"type":24,"value":5141},"# Calculate derivative error\n",{"type":18,"tag":291,"props":5143,"children":5144},{"class":293,"line":584},[5145,5150,5154,5158,5162,5166,5170,5174,5178,5182,5186,5190,5194,5198,5202,5207,5211,5215],{"type":18,"tag":291,"props":5146,"children":5147},{"class":304},[5148],{"type":24,"value":5149},"        derivative ",{"type":18,"tag":291,"props":5151,"children":5152},{"class":298},[5153],{"type":24,"value":350},{"type":18,"tag":291,"props":5155,"children":5156},{"class":304},[5157],{"type":24,"value":355},{"type":18,"tag":291,"props":5159,"children":5160},{"class":358},[5161],{"type":24,"value":4379},{"type":18,"tag":291,"props":5163,"children":5164},{"class":304},[5165],{"type":24,"value":4864},{"type":18,"tag":291,"props":5167,"children":5168},{"class":298},[5169],{"type":24,"value":605},{"type":18,"tag":291,"props":5171,"children":5172},{"class":304},[5173],{"type":24,"value":5076},{"type":18,"tag":291,"props":5175,"children":5176},{"class":298},[5177],{"type":24,"value":1993},{"type":18,"tag":291,"props":5179,"children":5180},{"class":358},[5181],{"type":24,"value":666},{"type":18,"tag":291,"props":5183,"children":5184},{"class":304},[5185],{"type":24,"value":1164},{"type":18,"tag":291,"props":5187,"children":5188},{"class":298},[5189],{"type":24,"value":1993},{"type":18,"tag":291,"props":5191,"children":5192},{"class":304},[5193],{"type":24,"value":5002},{"type":18,"tag":291,"props":5195,"children":5196},{"class":298},[5197],{"type":24,"value":1993},{"type":18,"tag":291,"props":5199,"children":5200},{"class":358},[5201],{"type":24,"value":615},{"type":18,"tag":291,"props":5203,"children":5204},{"class":304},[5205],{"type":24,"value":5206},"])",{"type":18,"tag":291,"props":5208,"children":5209},{"class":298},[5210],{"type":24,"value":772},{"type":18,"tag":291,"props":5212,"children":5213},{"class":358},[5214],{"type":24,"value":4379},{"type":18,"tag":291,"props":5216,"children":5217},{"class":304},[5218],{"type":24,"value":5105},{"type":18,"tag":291,"props":5220,"children":5221},{"class":293,"line":623},[5222],{"type":18,"tag":291,"props":5223,"children":5224},{},[5225],{"type":24,"value":326},{"type":18,"tag":291,"props":5227,"children":5228},{"class":293,"line":656},[5229,5234,5238,5243,5247,5252,5256],{"type":18,"tag":291,"props":5230,"children":5231},{"class":304},[5232],{"type":24,"value":5233},"        output ",{"type":18,"tag":291,"props":5235,"children":5236},{"class":298},[5237],{"type":24,"value":350},{"type":18,"tag":291,"props":5239,"children":5240},{"class":304},[5241],{"type":24,"value":5242}," proportional ",{"type":18,"tag":291,"props":5244,"children":5245},{"class":298},[5246],{"type":24,"value":762},{"type":18,"tag":291,"props":5248,"children":5249},{"class":304},[5250],{"type":24,"value":5251}," integral ",{"type":18,"tag":291,"props":5253,"children":5254},{"class":298},[5255],{"type":24,"value":762},{"type":18,"tag":291,"props":5257,"children":5258},{"class":304},[5259],{"type":24,"value":5260}," derivative\n",{"type":18,"tag":291,"props":5262,"children":5263},{"class":293,"line":674},[5264],{"type":18,"tag":291,"props":5265,"children":5266},{},[5267],{"type":24,"value":326},{"type":18,"tag":291,"props":5269,"children":5270},{"class":293,"line":683},[5271,5275,5279],{"type":18,"tag":291,"props":5272,"children":5273},{"class":304},[5274],{"type":24,"value":4374},{"type":18,"tag":291,"props":5276,"children":5277},{"class":298},[5278],{"type":24,"value":4538},{"type":18,"tag":291,"props":5280,"children":5281},{"class":304},[5282],{"type":24,"value":5283}," output",{"type":18,"tag":27,"props":5285,"children":5286},{},[5287],{"type":24,"value":5288},"Don't worry, this class just defined as the PID formula. So, by doing this, we will be able to use all the characteristic of our PID controller.",{"type":18,"tag":19,"props":5290,"children":5292},{"id":5291},"experiment",[5293],{"type":24,"value":5294},"Experiment",{"type":18,"tag":5296,"props":5297,"children":5299},"h3",{"id":5298},"pid-for-point-control",[5300],{"type":24,"value":5301},"PID for point control",{"type":18,"tag":27,"props":5303,"children":5304},{},[5305,5307,5311,5313,5318],{"type":24,"value":5306},"If I want my DifferentialDrive robot go to point ",{"type":18,"tag":123,"props":5308,"children":5310},{"latex-express":5309,"styles":126},"x_{ref}, y_{ref}, \\theta_{ref}",[],{"type":24,"value":5312},", Then I can calculate the error between the reference point and the feedback position of the robot. I simulated my robot in the  ",{"type":18,"tag":1602,"props":5314,"children":5315},{},[5316],{"type":24,"value":5317},"for loop",{"type":24,"value":5319}," and calculate this error recursively.",{"type":18,"tag":276,"props":5321,"children":5324},{"className":5322,"code":5323,"language":281,"meta":8},[279],"error_x.append(ref_path[0]-current_x)\nerror_y.append(ref_path[1]-current_y)\nerror_yaw.append(ref_path[2]-current_yaw)\n",[5325],{"type":18,"tag":284,"props":5326,"children":5327},{},[5328],{"type":18,"tag":276,"props":5329,"children":5330},{"__ignoreMap":8},[5331,5356,5381],{"type":18,"tag":291,"props":5332,"children":5333},{"class":293,"line":294},[5334,5339,5343,5347,5351],{"type":18,"tag":291,"props":5335,"children":5336},{"class":304},[5337],{"type":24,"value":5338},"error_x.append(ref_path[",{"type":18,"tag":291,"props":5340,"children":5341},{"class":358},[5342],{"type":24,"value":595},{"type":18,"tag":291,"props":5344,"children":5345},{"class":304},[5346],{"type":24,"value":600},{"type":18,"tag":291,"props":5348,"children":5349},{"class":298},[5350],{"type":24,"value":1993},{"type":18,"tag":291,"props":5352,"children":5353},{"class":304},[5354],{"type":24,"value":5355},"current_x)\n",{"type":18,"tag":291,"props":5357,"children":5358},{"class":293,"line":320},[5359,5364,5368,5372,5376],{"type":18,"tag":291,"props":5360,"children":5361},{"class":304},[5362],{"type":24,"value":5363},"error_y.append(ref_path[",{"type":18,"tag":291,"props":5365,"children":5366},{"class":358},[5367],{"type":24,"value":666},{"type":18,"tag":291,"props":5369,"children":5370},{"class":304},[5371],{"type":24,"value":600},{"type":18,"tag":291,"props":5373,"children":5374},{"class":298},[5375],{"type":24,"value":1993},{"type":18,"tag":291,"props":5377,"children":5378},{"class":304},[5379],{"type":24,"value":5380},"current_y)\n",{"type":18,"tag":291,"props":5382,"children":5383},{"class":293,"line":329},[5384,5389,5393,5397,5401],{"type":18,"tag":291,"props":5385,"children":5386},{"class":304},[5387],{"type":24,"value":5388},"error_yaw.append(ref_path[",{"type":18,"tag":291,"props":5390,"children":5391},{"class":358},[5392],{"type":24,"value":615},{"type":18,"tag":291,"props":5394,"children":5395},{"class":304},[5396],{"type":24,"value":600},{"type":18,"tag":291,"props":5398,"children":5399},{"class":298},[5400],{"type":24,"value":1993},{"type":18,"tag":291,"props":5402,"children":5403},{"class":304},[5404],{"type":24,"value":5405},"current_yaw)",{"type":18,"tag":27,"props":5407,"children":5408},{},[5409],{"type":24,"value":5410},"Then, let's apply PID",{"type":18,"tag":276,"props":5412,"children":5415},{"className":5413,"code":5414,"language":281,"meta":8},[279],"output_vx = pid_controller_x.calculate_pid(error_x)\noutput_vy = pid_controller_y.calculate_pid(error_y)\noutput_omega = pid_controller_yaw.calculate_pid(error_yaw)\n",[5416],{"type":18,"tag":284,"props":5417,"children":5418},{},[5419],{"type":18,"tag":276,"props":5420,"children":5421},{"__ignoreMap":8},[5422,5439,5456],{"type":18,"tag":291,"props":5423,"children":5424},{"class":293,"line":294},[5425,5430,5434],{"type":18,"tag":291,"props":5426,"children":5427},{"class":304},[5428],{"type":24,"value":5429},"output_vx ",{"type":18,"tag":291,"props":5431,"children":5432},{"class":298},[5433],{"type":24,"value":350},{"type":18,"tag":291,"props":5435,"children":5436},{"class":304},[5437],{"type":24,"value":5438}," pid_controller_x.calculate_pid(error_x)\n",{"type":18,"tag":291,"props":5440,"children":5441},{"class":293,"line":320},[5442,5447,5451],{"type":18,"tag":291,"props":5443,"children":5444},{"class":304},[5445],{"type":24,"value":5446},"output_vy ",{"type":18,"tag":291,"props":5448,"children":5449},{"class":298},[5450],{"type":24,"value":350},{"type":18,"tag":291,"props":5452,"children":5453},{"class":304},[5454],{"type":24,"value":5455}," pid_controller_y.calculate_pid(error_y)\n",{"type":18,"tag":291,"props":5457,"children":5458},{"class":293,"line":329},[5459,5464,5468],{"type":18,"tag":291,"props":5460,"children":5461},{"class":304},[5462],{"type":24,"value":5463},"output_omega ",{"type":18,"tag":291,"props":5465,"children":5466},{"class":298},[5467],{"type":24,"value":350},{"type":18,"tag":291,"props":5469,"children":5470},{"class":304},[5471],{"type":24,"value":5472}," pid_controller_yaw.calculate_pid(error_yaw)",{"type":18,"tag":27,"props":5474,"children":5475},{},[5476],{"type":24,"value":5477},"We will also need to update current position of the robot with the given optimal value from the PID controller.",{"type":18,"tag":276,"props":5479,"children":5482},{"className":5480,"code":5481,"language":281,"meta":8},[279],"x_next, y_next, yaw_next = diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) # Skip for omega we only look for x, y\ncurrent_x = x_next\ncurrent_y = y_next\ncurrent_yaw = yaw_next\n",[5483],{"type":18,"tag":284,"props":5484,"children":5485},{},[5486],{"type":18,"tag":276,"props":5487,"children":5488},{"__ignoreMap":8},[5489,5511,5528,5545],{"type":18,"tag":291,"props":5490,"children":5491},{"class":293,"line":294},[5492,5497,5501,5506],{"type":18,"tag":291,"props":5493,"children":5494},{"class":304},[5495],{"type":24,"value":5496},"x_next, y_next, yaw_next ",{"type":18,"tag":291,"props":5498,"children":5499},{"class":298},[5500],{"type":24,"value":350},{"type":18,"tag":291,"props":5502,"children":5503},{"class":304},[5504],{"type":24,"value":5505}," diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) ",{"type":18,"tag":291,"props":5507,"children":5508},{"class":333},[5509],{"type":24,"value":5510},"# Skip for omega we only look for x, y\n",{"type":18,"tag":291,"props":5512,"children":5513},{"class":293,"line":320},[5514,5519,5523],{"type":18,"tag":291,"props":5515,"children":5516},{"class":304},[5517],{"type":24,"value":5518},"current_x ",{"type":18,"tag":291,"props":5520,"children":5521},{"class":298},[5522],{"type":24,"value":350},{"type":18,"tag":291,"props":5524,"children":5525},{"class":304},[5526],{"type":24,"value":5527}," x_next\n",{"type":18,"tag":291,"props":5529,"children":5530},{"class":293,"line":329},[5531,5536,5540],{"type":18,"tag":291,"props":5532,"children":5533},{"class":304},[5534],{"type":24,"value":5535},"current_y ",{"type":18,"tag":291,"props":5537,"children":5538},{"class":298},[5539],{"type":24,"value":350},{"type":18,"tag":291,"props":5541,"children":5542},{"class":304},[5543],{"type":24,"value":5544}," y_next\n",{"type":18,"tag":291,"props":5546,"children":5547},{"class":293,"line":339},[5548,5553,5557],{"type":18,"tag":291,"props":5549,"children":5550},{"class":304},[5551],{"type":24,"value":5552},"current_yaw ",{"type":18,"tag":291,"props":5554,"children":5555},{"class":298},[5556],{"type":24,"value":350},{"type":18,"tag":291,"props":5558,"children":5559},{"class":304},[5560],{"type":24,"value":5561}," yaw_next",{"type":18,"tag":27,"props":5563,"children":5564},{},[5565,5567,5572],{"type":24,"value":5566},"I use ",{"type":18,"tag":1602,"props":5568,"children":5569},{},[5570],{"type":24,"value":5571},"matplotlib",{"type":24,"value":5573}," library to simulate my robot.",{"type":18,"tag":276,"props":5575,"children":5578},{"className":5576,"code":5577,"language":281,"meta":8},[279],"plt.clf()\nplt.gcf().canvas.mpl_connect('key_release_event',\n            lambda event: [exit(0) if event.key == 'escape' else None])\nplot_arrow(current_x, current_y, current_yaw)\nplt.plot(5, 5)\nplt.plot(ref_path[0], ref_path[1], marker=\"x\", color=\"blue\", label=\"Input Trajectory\")\nplt.axis(\"equal\")\nplt.grid(True)\nplt.legend()\nplt.pause(0.0001)\n",[5579],{"type":18,"tag":284,"props":5580,"children":5581},{},[5582],{"type":18,"tag":276,"props":5583,"children":5584},{"__ignoreMap":8},[5585,5593,5610,5690,5698,5723,5802,5819,5836,5844],{"type":18,"tag":291,"props":5586,"children":5587},{"class":293,"line":294},[5588],{"type":18,"tag":291,"props":5589,"children":5590},{"class":304},[5591],{"type":24,"value":5592},"plt.clf()\n",{"type":18,"tag":291,"props":5594,"children":5595},{"class":293,"line":320},[5596,5601,5606],{"type":18,"tag":291,"props":5597,"children":5598},{"class":304},[5599],{"type":24,"value":5600},"plt.gcf().canvas.mpl_connect(",{"type":18,"tag":291,"props":5602,"children":5603},{"class":1701},[5604],{"type":24,"value":5605},"'key_release_event'",{"type":18,"tag":291,"props":5607,"children":5608},{"class":304},[5609],{"type":24,"value":2523},{"type":18,"tag":291,"props":5611,"children":5612},{"class":293,"line":329},[5613,5617,5621,5626,5631,5636,5640,5644,5649,5654,5659,5663,5668,5672,5677,5681,5686],{"type":18,"tag":291,"props":5614,"children":5615},{"class":304},[5616],{"type":24,"value":3686},{"type":18,"tag":291,"props":5618,"children":5619},{"class":298},[5620],{"type":24,"value":576},{"type":18,"tag":291,"props":5622,"children":5623},{"class":304},[5624],{"type":24,"value":5625}," event: [",{"type":18,"tag":291,"props":5627,"children":5628},{"class":358},[5629],{"type":24,"value":5630},"exit",{"type":18,"tag":291,"props":5632,"children":5633},{"class":304},[5634],{"type":24,"value":5635},"(",{"type":18,"tag":291,"props":5637,"children":5638},{"class":358},[5639],{"type":24,"value":595},{"type":18,"tag":291,"props":5641,"children":5642},{"class":304},[5643],{"type":24,"value":785},{"type":18,"tag":291,"props":5645,"children":5646},{"class":298},[5647],{"type":24,"value":5648},"if",{"type":18,"tag":291,"props":5650,"children":5651},{"class":304},[5652],{"type":24,"value":5653}," event.key ",{"type":18,"tag":291,"props":5655,"children":5656},{"class":298},[5657],{"type":24,"value":5658},"==",{"type":18,"tag":291,"props":5660,"children":5661},{"class":304},[5662],{"type":24,"value":355},{"type":18,"tag":291,"props":5664,"children":5665},{"class":1701},[5666],{"type":24,"value":5667},"'escape'",{"type":18,"tag":291,"props":5669,"children":5670},{"class":304},[5671],{"type":24,"value":355},{"type":18,"tag":291,"props":5673,"children":5674},{"class":298},[5675],{"type":24,"value":5676},"else",{"type":18,"tag":291,"props":5678,"children":5679},{"class":304},[5680],{"type":24,"value":355},{"type":18,"tag":291,"props":5682,"children":5683},{"class":358},[5684],{"type":24,"value":5685},"None",{"type":18,"tag":291,"props":5687,"children":5688},{"class":304},[5689],{"type":24,"value":680},{"type":18,"tag":291,"props":5691,"children":5692},{"class":293,"line":339},[5693],{"type":18,"tag":291,"props":5694,"children":5695},{"class":304},[5696],{"type":24,"value":5697},"plot_arrow(current_x, current_y, current_yaw)\n",{"type":18,"tag":291,"props":5699,"children":5700},{"class":293,"line":364},[5701,5706,5711,5715,5719],{"type":18,"tag":291,"props":5702,"children":5703},{"class":304},[5704],{"type":24,"value":5705},"plt.plot(",{"type":18,"tag":291,"props":5707,"children":5708},{"class":358},[5709],{"type":24,"value":5710},"5",{"type":18,"tag":291,"props":5712,"children":5713},{"class":304},[5714],{"type":24,"value":2022},{"type":18,"tag":291,"props":5716,"children":5717},{"class":358},[5718],{"type":24,"value":5710},{"type":18,"tag":291,"props":5720,"children":5721},{"class":304},[5722],{"type":24,"value":1709},{"type":18,"tag":291,"props":5724,"children":5725},{"class":293,"line":373},[5726,5731,5735,5740,5744,5749,5754,5758,5762,5766,5771,5775,5780,5784,5789,5793,5798],{"type":18,"tag":291,"props":5727,"children":5728},{"class":304},[5729],{"type":24,"value":5730},"plt.plot(ref_path[",{"type":18,"tag":291,"props":5732,"children":5733},{"class":358},[5734],{"type":24,"value":595},{"type":18,"tag":291,"props":5736,"children":5737},{"class":304},[5738],{"type":24,"value":5739},"], ref_path[",{"type":18,"tag":291,"props":5741,"children":5742},{"class":358},[5743],{"type":24,"value":666},{"type":18,"tag":291,"props":5745,"children":5746},{"class":304},[5747],{"type":24,"value":5748},"], ",{"type":18,"tag":291,"props":5750,"children":5751},{"class":3689},[5752],{"type":24,"value":5753},"marker",{"type":18,"tag":291,"props":5755,"children":5756},{"class":298},[5757],{"type":24,"value":350},{"type":18,"tag":291,"props":5759,"children":5760},{"class":1701},[5761],{"type":24,"value":1704},{"type":18,"tag":291,"props":5763,"children":5764},{"class":304},[5765],{"type":24,"value":2022},{"type":18,"tag":291,"props":5767,"children":5768},{"class":3689},[5769],{"type":24,"value":5770},"color",{"type":18,"tag":291,"props":5772,"children":5773},{"class":298},[5774],{"type":24,"value":350},{"type":18,"tag":291,"props":5776,"children":5777},{"class":1701},[5778],{"type":24,"value":5779},"\"blue\"",{"type":18,"tag":291,"props":5781,"children":5782},{"class":304},[5783],{"type":24,"value":2022},{"type":18,"tag":291,"props":5785,"children":5786},{"class":3689},[5787],{"type":24,"value":5788},"label",{"type":18,"tag":291,"props":5790,"children":5791},{"class":298},[5792],{"type":24,"value":350},{"type":18,"tag":291,"props":5794,"children":5795},{"class":1701},[5796],{"type":24,"value":5797},"\"Input Trajectory\"",{"type":18,"tag":291,"props":5799,"children":5800},{"class":304},[5801],{"type":24,"value":1709},{"type":18,"tag":291,"props":5803,"children":5804},{"class":293,"line":395},[5805,5810,5815],{"type":18,"tag":291,"props":5806,"children":5807},{"class":304},[5808],{"type":24,"value":5809},"plt.axis(",{"type":18,"tag":291,"props":5811,"children":5812},{"class":1701},[5813],{"type":24,"value":5814},"\"equal\"",{"type":18,"tag":291,"props":5816,"children":5817},{"class":304},[5818],{"type":24,"value":1709},{"type":18,"tag":291,"props":5820,"children":5821},{"class":293,"line":404},[5822,5827,5832],{"type":18,"tag":291,"props":5823,"children":5824},{"class":304},[5825],{"type":24,"value":5826},"plt.grid(",{"type":18,"tag":291,"props":5828,"children":5829},{"class":358},[5830],{"type":24,"value":5831},"True",{"type":18,"tag":291,"props":5833,"children":5834},{"class":304},[5835],{"type":24,"value":1709},{"type":18,"tag":291,"props":5837,"children":5838},{"class":293,"line":426},[5839],{"type":18,"tag":291,"props":5840,"children":5841},{"class":304},[5842],{"type":24,"value":5843},"plt.legend()\n",{"type":18,"tag":291,"props":5845,"children":5846},{"class":293,"line":447},[5847,5852,5857],{"type":18,"tag":291,"props":5848,"children":5849},{"class":304},[5850],{"type":24,"value":5851},"plt.pause(",{"type":18,"tag":291,"props":5853,"children":5854},{"class":358},[5855],{"type":24,"value":5856},"0.0001",{"type":18,"tag":291,"props":5858,"children":5859},{"class":304},[5860],{"type":24,"value":5861},")",{"type":18,"tag":5296,"props":5863,"children":5865},{"id":5864},"path-tracking",[5866],{"type":24,"value":5867},"Path Tracking",{"type":18,"tag":27,"props":5869,"children":5870},{},[5871,5873,5878,5880,5885],{"type":24,"value":5872},"The code is all way the same. The different is that, I fit the continuous point into the robot instead of fixed goal point. I use ",{"type":18,"tag":1602,"props":5874,"children":5875},{},[5876],{"type":24,"value":5877},"BeizerCurve",{"type":24,"value":5879}," function to generate ",{"type":18,"tag":231,"props":5881,"children":5882},{},[5883],{"type":24,"value":5884}," Spline Trajectory ",{"type":24,"value":5886}," for the robot.",{"type":18,"tag":27,"props":5888,"children":5889},{},[5890,5892,5901],{"type":24,"value":5891},"The full code is published open-source on my Github. Link here ",{"type":18,"tag":5893,"props":5894,"children":5898},"a",{"href":5895,"rel":5896},"https://github.com/SokhengDin/PathTracking/tree/main/PID",[5897],"nofollow",[5899],{"type":24,"value":5900},"Github",{"type":24,"value":5902},". Hit the star for me if you like my work 🙂.",{"type":18,"tag":5296,"props":5904,"children":5905},{"id":4004},[5906],{"type":24,"value":4007},{"type":18,"tag":4014,"props":5908,"children":5910},{"className":5909},[4017,4018,4019],[5911,5912],{"type":24,"value":43},{"type":18,"tag":45,"props":5913,"children":5916},{"className":5914,"src":5915},[48],"/topics/robotics/nmpc/Figure_pid_p.png",[],{"type":18,"tag":59,"props":5918,"children":5920},{"className":5919},[62,63,64,65],[5921],{"type":24,"value":5922},"\n    PID Controller with position control on Differential Drive Robot\n",{"type":18,"tag":4014,"props":5924,"children":5926},{"className":5925},[4017,4018,4019],[5927,5928],{"type":24,"value":43},{"type":18,"tag":45,"props":5929,"children":5932},{"className":5930,"src":5931},[48],"/topics/robotics/nmpc/Figure_pid_t.png",[],{"type":18,"tag":59,"props":5934,"children":5936},{"className":5935},[62,63,64,65],[5937],{"type":24,"value":5938},"\n    PID Controller with path tracking control on Differential Drive Robot\n",{"type":18,"tag":19,"props":5940,"children":5941},{"id":4035},[5942],{"type":24,"value":5943},"In Conclusion",{"type":18,"tag":27,"props":5945,"children":5946},{},[5947],{"type":24,"value":5948},"In my opinion, the PID Controller is an excellent choice for most control system applications due to its simplicity and powerful capabilities in handling complex control challenges arising from various systems.",{"type":18,"tag":19,"props":5950,"children":5952},{"id":5951},"references",[5953],{"type":24,"value":5954},"References",{"type":18,"tag":4051,"props":5956,"children":5957},{},[5958,5963,5968,5973],{"type":18,"tag":119,"props":5959,"children":5960},{},[5961],{"type":24,"value":5962},"BeizerCurve: https://en.wikipedia.org/wiki/Bézier_curve.",{"type":18,"tag":119,"props":5964,"children":5965},{},[5966],{"type":24,"value":5967},"PID Controller: Control Systems Engineering by Normal S. Nise.",{"type":18,"tag":119,"props":5969,"children":5970},{},[5971],{"type":24,"value":5972},"Beizer Path : https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning/BezierPath",{"type":18,"tag":119,"props":5974,"children":5975},{},[5976],{"type":24,"value":5977},"PID Lecture : https://www.cds.caltech.edu/~murray/courses/cds101/fa02/caltech/astrom-ch6.pdf",{"type":18,"tag":4070,"children":5979},[5980],{"type":24,"value":5981},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-806137{color:#B392F0;}\n.ct-533739{color:#79B8FF;}\n.ct-326375{color:#6A737D;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":320,"depth":320,"links":5983},[5984,5985,5986,5987,5988,5989,5994,5995],{"id":4101,"depth":320,"text":4104},{"id":4118,"depth":320,"text":4121},{"id":4129,"depth":320,"text":4132},{"id":4193,"depth":320,"text":4196},{"id":4254,"depth":320,"text":4257},{"id":5291,"depth":320,"text":5294,"children":5990},[5991,5992,5993],{"id":5298,"depth":329,"text":5301},{"id":5864,"depth":329,"text":5867},{"id":4004,"depth":329,"text":4007},{"id":4035,"depth":320,"text":5943},{"id":5951,"depth":320,"text":5954},"content:topics:robotics:pid-controller.md","topics/robotics/pid-controller.md",{"_path":5999,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6000,"description":6001,"slug":6002,"tag":6002,"img":6003,"body":6004,"_type":4085,"_id":6237,"_source":4087,"_file":6238,"_extension":4089},"/topics/robotics/pure-pursuit","Pure Pursuit Controller","Introduction to Pure Pursuit Controller","pure-pursuit","/topics/robotics/nmpc/pure_pursuit.png",{"type":15,"children":6005,"toc":6230},[6006,6011,6021,6027,6032,6085,6091,6096,6148,6154,6159,6182,6187,6226],{"type":18,"tag":19,"props":6007,"children":6009},{"id":6008},"pure-pursuit-controller",[6010],{"type":24,"value":6000},{"type":18,"tag":27,"props":6012,"children":6013},{},[6014,6015,6019],{"type":24,"value":4724},{"type":18,"tag":231,"props":6016,"children":6017},{},[6018],{"type":24,"value":6000},{"type":24,"value":6020}," is a widely-used path-tracking algorithm in robotics and autonomous vehicle navigation. Its primary objective is to guide a vehicle or robot along a predefined path while ensuring precise path-following.",{"type":18,"tag":5296,"props":6022,"children":6024},{"id":6023},"principle-of-operation",[6025],{"type":24,"value":6026},"Principle of Operation",{"type":18,"tag":27,"props":6028,"children":6029},{},[6030],{"type":24,"value":6031},"The operation of the Pure Pursuit Controller is based on a straightforward concept:",{"type":18,"tag":4051,"props":6033,"children":6034},{},[6035,6045,6055,6065,6075],{"type":18,"tag":119,"props":6036,"children":6037},{},[6038,6043],{"type":18,"tag":231,"props":6039,"children":6040},{},[6041],{"type":24,"value":6042},"Path Definition",{"type":24,"value":6044},": The controller works with a defined path, often represented as a series of waypoints or a continuous curve, each associated with specific coordinates (x, y) and curvature information.",{"type":18,"tag":119,"props":6046,"children":6047},{},[6048,6053],{"type":18,"tag":231,"props":6049,"children":6050},{},[6051],{"type":24,"value":6052},"Target Point Selection",{"type":24,"value":6054},": The controller continuously selects a target point ahead of the vehicle. This target point is typically chosen as the point on the path that is a certain fixed distance (known as the \"lookahead distance\") in front of the vehicle.",{"type":18,"tag":119,"props":6056,"children":6057},{},[6058,6063],{"type":18,"tag":231,"props":6059,"children":6060},{},[6061],{"type":24,"value":6062},"Steering Command Calculation",{"type":24,"value":6064},": To navigate toward the target point, the controller calculates the steering command, often represented as the desired steering angle or curvature, required to reach the target point. Commonly, this involves computing the angle between the vehicle's current heading and the vector pointing from the current position to the target point.",{"type":18,"tag":119,"props":6066,"children":6067},{},[6068,6073],{"type":18,"tag":231,"props":6069,"children":6070},{},[6071],{"type":24,"value":6072},"Vehicle Control",{"type":24,"value":6074},": The calculated steering command is used to control the vehicle's steering mechanism (e.g., steering wheel or wheel angles) to guide it toward the target point.",{"type":18,"tag":119,"props":6076,"children":6077},{},[6078,6083],{"type":18,"tag":231,"props":6079,"children":6080},{},[6081],{"type":24,"value":6082},"Iterative Process",{"type":24,"value":6084},": The process is iterative, with the controller continuously selecting new target points ahead as the vehicle advances along the path and adjusting its steering to reach them.",{"type":18,"tag":5296,"props":6086,"children":6088},{"id":6087},"advantages",[6089],{"type":24,"value":6090},"Advantages",{"type":18,"tag":27,"props":6092,"children":6093},{},[6094],{"type":24,"value":6095},"The Pure Pursuit Controller offers several advantages:",{"type":18,"tag":115,"props":6097,"children":6098},{},[6099,6109,6118,6128,6138],{"type":18,"tag":119,"props":6100,"children":6101},{},[6102,6107],{"type":18,"tag":231,"props":6103,"children":6104},{},[6105],{"type":24,"value":6106},"Simplicity",{"type":24,"value":6108},": It is conceptually simple and easy to implement, making it suitable for a wide range of robotic and vehicle navigation applications.",{"type":18,"tag":119,"props":6110,"children":6111},{},[6112,6116],{"type":18,"tag":231,"props":6113,"children":6114},{},[6115],{"type":24,"value":5867},{"type":24,"value":6117},": The controller excels at accurate path tracking, even in complex environments with curves and turns.",{"type":18,"tag":119,"props":6119,"children":6120},{},[6121,6126],{"type":18,"tag":231,"props":6122,"children":6123},{},[6124],{"type":24,"value":6125},"Real-Time Operation",{"type":24,"value":6127},": It can operate in real-time, making it well-suited for dynamic environments where quick decision-making is crucial.",{"type":18,"tag":119,"props":6129,"children":6130},{},[6131,6136],{"type":18,"tag":231,"props":6132,"children":6133},{},[6134],{"type":24,"value":6135},"Adaptability",{"type":24,"value":6137},": The controller can adapt to changes in the path, such as deviations caused by obstacles or unexpected conditions, by continuously updating the target point.",{"type":18,"tag":119,"props":6139,"children":6140},{},[6141,6146],{"type":18,"tag":231,"props":6142,"children":6143},{},[6144],{"type":24,"value":6145},"Low Computational Overhead",{"type":24,"value":6147},": Compared to some other control algorithms, the Pure Pursuit Controller often has low computational requirements, which is advantageous for resource-constrained systems.",{"type":18,"tag":5296,"props":6149,"children":6151},{"id":6150},"limitations",[6152],{"type":24,"value":6153},"Limitations",{"type":18,"tag":27,"props":6155,"children":6156},{},[6157],{"type":24,"value":6158},"Despite its advantages, the Pure Pursuit Controller has some limitations:",{"type":18,"tag":115,"props":6160,"children":6161},{},[6162,6172],{"type":18,"tag":119,"props":6163,"children":6164},{},[6165,6170],{"type":18,"tag":231,"props":6166,"children":6167},{},[6168],{"type":24,"value":6169},"Lookahead Distance Sensitivity",{"type":24,"value":6171},": Its performance can be sensitive to the choice of the lookahead distance, which requires careful tuning for optimal path tracking.",{"type":18,"tag":119,"props":6173,"children":6174},{},[6175,6180],{"type":18,"tag":231,"props":6176,"children":6177},{},[6178],{"type":24,"value":6179},"Non-Holonomic Assumption",{"type":24,"value":6181},": The controller assumes that the vehicle is non-holonomic, meaning it cannot move sideways. This assumption may not hold for certain types of vehicles, such as omnidirectional robots.",{"type":18,"tag":27,"props":6183,"children":6184},{},[6185],{"type":24,"value":6186},"In summary, the Pure Pursuit Controller is a straightforward yet effective algorithm for path tracking and navigation. Its ability to calculate a steering command based on a selected target point ahead of the vehicle makes it a valuable tool for applications ranging from autonomous cars to mobile robots.",{"type":18,"tag":276,"props":6188,"children":6193},{"className":6189,"code":6191,"language":6192,"meta":8},[6190],"language-js","console.log(\"Hello world\")\n\n","js",[6194],{"type":18,"tag":284,"props":6195,"children":6196},{},[6197],{"type":18,"tag":276,"props":6198,"children":6199},{"__ignoreMap":8},[6200],{"type":18,"tag":291,"props":6201,"children":6202},{"class":293,"line":294},[6203,6208,6213,6217,6222],{"type":18,"tag":291,"props":6204,"children":6205},{"class":304},[6206],{"type":24,"value":6207},"console.",{"type":18,"tag":291,"props":6209,"children":6210},{"class":4332},[6211],{"type":24,"value":6212},"log",{"type":18,"tag":291,"props":6214,"children":6215},{"class":304},[6216],{"type":24,"value":5635},{"type":18,"tag":291,"props":6218,"children":6219},{"class":1701},[6220],{"type":24,"value":6221},"\"Hello world\"",{"type":18,"tag":291,"props":6223,"children":6224},{"class":304},[6225],{"type":24,"value":5861},{"type":18,"tag":4070,"children":6227},[6228],{"type":24,"value":6229},".ct-767297{color:#E1E4E8;}\n.ct-806137{color:#B392F0;}\n.ct-244866{color:#9ECBFF;}",{"title":8,"searchDepth":320,"depth":320,"links":6231},[6232],{"id":6008,"depth":320,"text":6000,"children":6233},[6234,6235,6236],{"id":6023,"depth":329,"text":6026},{"id":6087,"depth":329,"text":6090},{"id":6150,"depth":329,"text":6153},"content:topics:robotics:pure-pursuit.md","topics/robotics/pure-pursuit.md",{"_path":6240,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6241,"description":6242,"slug":6243,"tag":6243,"body":6244,"_type":4085,"_id":6445,"_source":4087,"_file":6446,"_extension":4089},"/topics/robotics/stanley-controller","Stanley Controller","Introduction to Stanley Controller","stanley",{"type":15,"children":6245,"toc":6438},[6246,6251,6261,6265,6270,6331,6335,6340,6391,6395,6400,6433],{"type":18,"tag":19,"props":6247,"children":6249},{"id":6248},"stanley-controller",[6250],{"type":24,"value":6241},{"type":18,"tag":27,"props":6252,"children":6253},{},[6254,6255,6259],{"type":24,"value":4724},{"type":18,"tag":231,"props":6256,"children":6257},{},[6258],{"type":24,"value":6241},{"type":24,"value":6260}," is an advanced path-tracking algorithm primarily used in the field of autonomous vehicle navigation. It is named after its creator, Professor John K. Hedrick, who developed it at Stanford University. The Stanley Controller is designed to enable a vehicle to follow a predefined path with high accuracy and stability.",{"type":18,"tag":5296,"props":6262,"children":6263},{"id":6023},[6264],{"type":24,"value":6026},{"type":18,"tag":27,"props":6266,"children":6267},{},[6268],{"type":24,"value":6269},"The Stanley Controller operates based on a combination of control and feedback mechanisms:",{"type":18,"tag":4051,"props":6271,"children":6272},{},[6273,6282,6292,6302,6312,6321],{"type":18,"tag":119,"props":6274,"children":6275},{},[6276,6280],{"type":18,"tag":231,"props":6277,"children":6278},{},[6279],{"type":24,"value":6042},{"type":24,"value":6281},": A predefined path is represented as a series of waypoints or a continuous curve. Each waypoint is associated with specific coordinates (x, y) and often includes additional information like desired speed and curvature.",{"type":18,"tag":119,"props":6283,"children":6284},{},[6285,6290],{"type":18,"tag":231,"props":6286,"children":6287},{},[6288],{"type":24,"value":6289},"Cross-Track Error (CTE) Calculation",{"type":24,"value":6291},": The controller calculates the cross-track error, which is the perpendicular distance between the vehicle's current position and the desired path. This error represents how far the vehicle has deviated from the path.",{"type":18,"tag":119,"props":6293,"children":6294},{},[6295,6300],{"type":18,"tag":231,"props":6296,"children":6297},{},[6298],{"type":24,"value":6299},"Heading Error Calculation",{"type":24,"value":6301},": The heading error, which is the difference between the vehicle's current heading (yaw angle) and the desired path's tangent angle at the nearest waypoint, is also computed.",{"type":18,"tag":119,"props":6303,"children":6304},{},[6305,6310],{"type":18,"tag":231,"props":6306,"children":6307},{},[6308],{"type":24,"value":6309},"Control Command Generation",{"type":24,"value":6311},": Using the calculated cross-track error and heading error, the Stanley Controller generates control commands. These commands typically include steering angle adjustments and throttle/brake control to minimize both errors.",{"type":18,"tag":119,"props":6313,"children":6314},{},[6315,6319],{"type":18,"tag":231,"props":6316,"children":6317},{},[6318],{"type":24,"value":6072},{"type":24,"value":6320},": The generated control commands are applied to the vehicle's steering and throttle/brake systems to guide it back to the desired path.",{"type":18,"tag":119,"props":6322,"children":6323},{},[6324,6329],{"type":18,"tag":231,"props":6325,"children":6326},{},[6327],{"type":24,"value":6328},"Iterative Feedback",{"type":24,"value":6330},": The process is iterative, with the controller continuously recalculating the cross-track and heading errors and adjusting the control commands to keep the vehicle on track.",{"type":18,"tag":5296,"props":6332,"children":6333},{"id":6087},[6334],{"type":24,"value":6090},{"type":18,"tag":27,"props":6336,"children":6337},{},[6338],{"type":24,"value":6339},"The Stanley Controller offers several advantages:",{"type":18,"tag":115,"props":6341,"children":6342},{},[6343,6353,6363,6372,6381],{"type":18,"tag":119,"props":6344,"children":6345},{},[6346,6351],{"type":18,"tag":231,"props":6347,"children":6348},{},[6349],{"type":24,"value":6350},"High Accuracy",{"type":24,"value":6352},": It is known for its ability to achieve precise path-following, even in challenging conditions and complex road geometries.",{"type":18,"tag":119,"props":6354,"children":6355},{},[6356,6361],{"type":18,"tag":231,"props":6357,"children":6358},{},[6359],{"type":24,"value":6360},"Stability",{"type":24,"value":6362},": The controller's feedback mechanisms contribute to stable and smooth vehicle motion, reducing the risk of overshooting or oscillations.",{"type":18,"tag":119,"props":6364,"children":6365},{},[6366,6370],{"type":18,"tag":231,"props":6367,"children":6368},{},[6369],{"type":24,"value":6135},{"type":24,"value":6371},": The Stanley Controller can adapt to changes in the path, such as deviations caused by obstacles or dynamic road conditions.",{"type":18,"tag":119,"props":6373,"children":6374},{},[6375,6379],{"type":18,"tag":231,"props":6376,"children":6377},{},[6378],{"type":24,"value":6125},{"type":24,"value":6380},": It can operate in real-time, making it suitable for autonomous vehicle navigation in dynamic environments.",{"type":18,"tag":119,"props":6382,"children":6383},{},[6384,6389],{"type":18,"tag":231,"props":6385,"children":6386},{},[6387],{"type":24,"value":6388},"Versatility",{"type":24,"value":6390},": While primarily used in autonomous vehicles, the Stanley Controller's principles can be applied to various path-tracking tasks.",{"type":18,"tag":5296,"props":6392,"children":6393},{"id":6150},[6394],{"type":24,"value":6153},{"type":18,"tag":27,"props":6396,"children":6397},{},[6398],{"type":24,"value":6399},"Despite its advantages, the Stanley Controller has some limitations:",{"type":18,"tag":115,"props":6401,"children":6402},{},[6403,6413,6423],{"type":18,"tag":119,"props":6404,"children":6405},{},[6406,6411],{"type":18,"tag":231,"props":6407,"children":6408},{},[6409],{"type":24,"value":6410},"Complexity",{"type":24,"value":6412},": Implementing the Stanley Controller can be more complex than some other control algorithms due to its mathematical calculations and tuning requirements.",{"type":18,"tag":119,"props":6414,"children":6415},{},[6416,6421],{"type":18,"tag":231,"props":6417,"children":6418},{},[6419],{"type":24,"value":6420},"Initialization",{"type":24,"value":6422},": It relies on accurate initialization, including knowledge of the vehicle's initial position and heading relative to the path.",{"type":18,"tag":119,"props":6424,"children":6425},{},[6426,6431],{"type":18,"tag":231,"props":6427,"children":6428},{},[6429],{"type":24,"value":6430},"Sensitivity to Noise",{"type":24,"value":6432},": Like many feedback-based controllers, the Stanley Controller can be sensitive to noisy sensor data and require robust sensor fusion techniques.",{"type":18,"tag":27,"props":6434,"children":6435},{},[6436],{"type":24,"value":6437},"In summary, the Stanley Controller is an advanced path-tracking algorithm known for its accuracy and stability, making it a valuable tool in the field of autonomous vehicle navigation. Proper implementation and tuning are essential to harness its full potential.",{"title":8,"searchDepth":320,"depth":320,"links":6439},[6440],{"id":6248,"depth":320,"text":6241,"children":6441},[6442,6443,6444],{"id":6023,"depth":329,"text":6026},{"id":6087,"depth":329,"text":6090},{"id":6150,"depth":329,"text":6153},"content:topics:robotics:stanley-controller.md","topics/robotics/stanley-controller.md",1695894603250]