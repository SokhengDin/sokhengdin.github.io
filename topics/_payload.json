[{"data":1,"prerenderedAt":6209},["Reactive",2],{"topics/robotics":3},[4,3875,5803,6001],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":9,"description":10,"author":11,"slug":12,"tag":12,"img":13,"body":14,"_type":3870,"_id":3871,"_source":3872,"_file":3873,"_extension":3874},"/topics/robotics/nonlinear-mpc","robotics",false,"","Nonlinear Model Predictive Control","Introduction to Nonlinear Model Predictive Control","Din Sokheng","nonlinear-mpc","/topics/robotics/nmpc/predict_horizon.png",{"type":15,"children":16,"toc":3859},"root",[17,26,32,55,66,72,105,110,116,121,126,131,173,178,184,189,236,242,254,258,263,268,272,277,281,285,290,1534,1540,1545,1549,1564,1568,1573,1577,1583,1588,1592,1605,1609,1613,1617,1623,1636,1668,1673,2206,2211,2389,2400,2405,2410,3426,3431,3784,3790,3805,3811,3817,3822,3828,3854],{"type":18,"tag":19,"props":20,"children":22},"element","h2",{"id":21},"what-is-model-predictive-control",[23],{"type":24,"value":25},"text","What is Model Predictive Control ?",{"type":18,"tag":27,"props":28,"children":29},"p",{},[30],{"type":24,"value":31},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":18,"tag":33,"props":34,"children":41},"div",{"className":35},[36,37,38,39,40],"grid","grid-cols-2","space-x-10","justify-center","items-center",[42,50],{"type":18,"tag":43,"props":44,"children":49},"img",{"className":45,"src":13,"width":47,"height":48},[46],"mx-auto","600px","300px",[],{"type":18,"tag":43,"props":51,"children":54},{"className":52,"src":53,"width":47,"height":48},[46],"/topics/robotics/nmpc/set_points.png",[],{"type":18,"tag":56,"props":57,"children":63},"figcaption",{"className":58},[59,60,61,62],"text-center","text-sm","text-neutral-600","dark:text-neutral-400",[64],{"type":24,"value":65},"\n      A car with finite horizons prediction and set point prediction over finite horizons.\n",{"type":18,"tag":19,"props":67,"children":69},{"id":68},"nonlinear-model-predictive-control",[70],{"type":24,"value":71},"Nonlinear Model Predictive Control ?",{"type":18,"tag":27,"props":73,"children":74},{},[75,77,83,85,94,96,100,102],{"type":24,"value":76},"We already done ",{"type":18,"tag":78,"props":79,"children":80},"strong",{},[81],{"type":24,"value":82}," Linear Model Predictive Control ",{"type":24,"value":84},", you can read it here ",{"type":18,"tag":86,"props":87,"children":91},"a",{"href":88,"rel":89},"https://sokhengdin.github.io/topics/robotics/linear-mpc",[90],"nofollow",[92],{"type":24,"value":93},"linear-mpc",{"type":24,"value":95},". Nonlinear Model Predictive Control has the same basic core of its control algorithms. The different is about the mathematical solving over the system. ",{"type":18,"tag":97,"props":98,"children":99},"br",{},[],{"type":24,"value":101},"\nIn the real-life application, most of the system certainly nonlinear and it's more complex than linear model. Linear systems are mostly time-invariant, meaning that the response of the system input is time-independent. Nonlinear systems are time-varying meaning that the response of the system to any input is time-dependent.",{"type":18,"tag":97,"props":103,"children":104},{},[],{"type":18,"tag":27,"props":106,"children":107},{},[108],{"type":24,"value":109},"The system model can be represent as state-space model",{"type":18,"tag":111,"props":112,"children":115},"math-render",{"latex-express":113,"styles":59,"dist-cond":114}," \\dot{X} = f(X,U) ","true",[],{"type":18,"tag":27,"props":117,"children":118},{},[119],{"type":24,"value":120},"Nonlinear Model Predictive Control also works by solving the quardratic cost subject to the nonlinear function over a future finite horizons. The quadractic cost can be define as",{"type":18,"tag":111,"props":122,"children":125},{"latex-express":123,"styles":59,"dist-cond":124},"J(x,u) = \\displaystyle\\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})","false",[],{"type":18,"tag":27,"props":127,"children":128},{},[129],{"type":24,"value":130},"Notation",{"type":18,"tag":132,"props":133,"children":134},"ul",{},[135,146,155,164],{"type":18,"tag":136,"props":137,"children":138},"li",{},[139,144],{"type":18,"tag":111,"props":140,"children":143},{"latex-express":141,"styles":142,"dist-cond":124},"X","inline-flex",[],{"type":24,"value":145}," is the state of the system. This shall be obtained from the optimiztion problem.",{"type":18,"tag":136,"props":147,"children":148},{},[149,153],{"type":18,"tag":111,"props":150,"children":152},{"latex-express":151,"styles":142,"dist-cond":124},"X_{ref}",[],{"type":24,"value":154}," is the reference state of the system or desired input state.",{"type":18,"tag":136,"props":156,"children":157},{},[158,162],{"type":18,"tag":111,"props":159,"children":161},{"latex-express":160,"styles":142,"dist-cond":124},"U",[],{"type":24,"value":163}," is the input control of the system. This is a solution obtained from the optimization problem.",{"type":18,"tag":136,"props":165,"children":166},{},[167,171],{"type":18,"tag":111,"props":168,"children":170},{"latex-express":169,"styles":142,"dist-cond":124},"U_{ref}",[],{"type":24,"value":172}," is the reference control of the system or desired input control.",{"type":18,"tag":27,"props":174,"children":175},{},[176],{"type":24,"value":177},"Rewrite the optimization of NMPC problem.",{"type":18,"tag":179,"props":180,"children":183},"math-render-b",{"latex-express":181,"styles":182,"dist-cond":114},"\n      \\begin{align*}\n            \\min_{u_{0}, u_{1}, ..., u_{N-1} } \\quad \\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}&Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})\\\\\n            \\text{subject to} \\quad & x_{k+1} = f(x_k, u_k) \\quad \\text{(System dynamics)} \\\\\n            & g(x_k, x_k) \\leq 0 \\quad \\text{(State constraints)} \\\\\n            & h(x_k, x_k) \\leq 0 \\quad \\text{(Input constraints)} \\\\\n            & p(x_k) \\leq 0 \\quad \\text{(Path constraints)} \\\\\n            & x_0=x(0)  \\quad \\text{(Initial condition)}\n      \\end{align*}\n            ","text-center -sm:mx-auto -md:mx-auto -sm:max-w-sm -md:max-w-md",[],{"type":18,"tag":27,"props":185,"children":186},{},[187],{"type":24,"value":188},"Which,",{"type":18,"tag":132,"props":190,"children":191},{},[192,201,210,219,227],{"type":18,"tag":136,"props":193,"children":194},{},[195,199],{"type":18,"tag":111,"props":196,"children":198},{"latex-express":197,"styles":142,"dist-cond":124},"f",[],{"type":24,"value":200}," is the system dynamics model.",{"type":18,"tag":136,"props":202,"children":203},{},[204,208],{"type":18,"tag":111,"props":205,"children":207},{"latex-express":206,"styles":142,"dist-cond":124},"g",[],{"type":24,"value":209}," is the state constraints of the system.",{"type":18,"tag":136,"props":211,"children":212},{},[213,217],{"type":18,"tag":111,"props":214,"children":216},{"latex-express":215,"styles":142,"dist-cond":124},"h",[],{"type":24,"value":218}," is the input constraints of the system.",{"type":18,"tag":136,"props":220,"children":221},{},[222,225],{"type":18,"tag":111,"props":223,"children":224},{"latex-express":27,"styles":142,"dist-cond":124},[],{"type":24,"value":226}," is the path constraint, it help to ensure the safety following path of our system.",{"type":18,"tag":136,"props":228,"children":229},{},[230,234],{"type":18,"tag":111,"props":231,"children":233},{"latex-express":232,"styles":142,"dist-cond":124},"\\phi(X_{N})",[],{"type":24,"value":235}," is the terminal cost of the system.",{"type":18,"tag":19,"props":237,"children":239},{"id":238},"discretize-the-system-model-with-runge-kutta-4th-order",[240],{"type":24,"value":241},"Discretize the system model with Runge-Kutta 4th order",{"type":18,"tag":27,"props":243,"children":244},{},[245,247,252],{"type":24,"value":246},"I will choose a simple system mode robot ",{"type":18,"tag":78,"props":248,"children":249},{},[250],{"type":24,"value":251}," DifferentialDrive ",{"type":24,"value":253},".\nThe forward kinematic equation",{"type":18,"tag":111,"props":255,"children":257},{"latex-express":256,"styles":59},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":259,"children":260},{},[261],{"type":24,"value":262},"State constraints are the restriction imposed on the state variable of the system. It helps our optimizer not to obtain the solution that is outside the boundary region and also ensure the system to always perform the minimal action control in any critical condition.",{"type":18,"tag":27,"props":264,"children":265},{},[266],{"type":24,"value":267},"We, then can do the approximation",{"type":18,"tag":179,"props":269,"children":271},{"latex-express":270,"styles":59,"dist-cond":114},"\n    \\begin{align*}\n        k_{1} &= f(x^{*}, u^{*}) \\\\\n        k_{2} &= f(x^{*}+k_{1}\\frac{dt}{2}, u^{*}) \\\\ \n        k_{3} &= f(x^{*}+k_{2}\\frac{dt}{2}, u^{*}) \\\\\n        k_{4} &= f(x^{*}+k_{3}dt, u^{*}) \\\\ \n        \\Rightarrow{x_{k+1} } &= x_{k} + (k_{1}+2k_{2}+2k_{3}+k_{4})\\frac{dt}{6}\n    \\end{align*}\n",[],{"type":18,"tag":27,"props":273,"children":274},{},[275],{"type":24,"value":276},"Let's evaluate it with our model.",{"type":18,"tag":179,"props":278,"children":280},{"latex-express":279,"styles":59},"\n      \\begin{align*}\n        k_{1} &= \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n        k_{2} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{3} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{4} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n    \\end{align*}\n      ",[],{"type":18,"tag":179,"props":282,"children":284},{"latex-express":283,"styles":59},"\n      \\Rightarrow{x_{k+1} } = x_{k} + \\left( \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} + \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix}   \\right) \\frac{dt}{6}\n",[],{"type":18,"tag":27,"props":286,"children":287},{},[288],{"type":24,"value":289},"How to implement it in Python ???",{"type":18,"tag":291,"props":292,"children":297},"code",{"className":293,"code":295,"language":296,"meta":8},[294],"language-python","import numpy as np\n\n## Define sampling time dt 100Hz\ndt = 0.01\n## Define the num steps for function approximation \nnum_steps = 100\n## Define initial states\nx = 0.0\ny = 0.0\nyaw = 0.0\n## Define input control\nv = 1.5 #m/s\nomega = 1.57 #rad/s\n## Define state represent model\n### define lambda function take variable x\nf = lambda x, u :  np.array([\n      [u[0]*np.cos(x[2])],\n      [u[0]*np.sin(x[2])],\n      [u[1]]\n])\n\nfor _ in range(num_steps):\n    k1 = f([x, y, yaw], [v, omega])\n    k2 = f([x + (dt / 2) * k1[0], y + (dt / 2) * k1[1], yaw + (dt / 2) * k1[2]], [v, omega])\n    k3 = f([x + (dt / 2) * k2[0], y + (dt / 2) * k2[1], yaw + (dt / 2) * k2[2]], [v, omega])\n    k4 = f([x + dt * k3[0], y + dt * k3[1], yaw + dt * k3[2]], [v, omega])\n\n    # Update state of the robot\n    x += (k1[0] + 2 * k2[0] + 2 * k3[0] + k4[0]) * dt / 6\n    y += (k1[1] + 2 * k2[1] + 2 * k3[1] + k4[1]) * dt / 6\n    yaw += (k1[2] + 2 * k2[2] + 2 * k3[2] + k4[2]) * dt / 6\n","python",[298],{"type":18,"tag":299,"props":300,"children":301},"pre",{},[302],{"type":18,"tag":291,"props":303,"children":304},{"__ignoreMap":8},[305,333,342,352,377,386,408,417,439,460,481,490,521,552,561,570,597,636,669,687,696,704,737,755,901,1039,1130,1138,1152,1283,1408],{"type":18,"tag":306,"props":307,"children":310},"span",{"class":308,"line":309},"line",1,[311,317,323,328],{"type":18,"tag":306,"props":312,"children":314},{"class":313},"ct-857441",[315],{"type":24,"value":316},"import",{"type":18,"tag":306,"props":318,"children":320},{"class":319},"ct-767297",[321],{"type":24,"value":322}," numpy ",{"type":18,"tag":306,"props":324,"children":325},{"class":313},[326],{"type":24,"value":327},"as",{"type":18,"tag":306,"props":329,"children":330},{"class":319},[331],{"type":24,"value":332}," np\n",{"type":18,"tag":306,"props":334,"children":336},{"class":308,"line":335},2,[337],{"type":18,"tag":306,"props":338,"children":339},{},[340],{"type":24,"value":341},"\n",{"type":18,"tag":306,"props":343,"children":345},{"class":308,"line":344},3,[346],{"type":18,"tag":306,"props":347,"children":349},{"class":348},"ct-326375",[350],{"type":24,"value":351},"## Define sampling time dt 100Hz\n",{"type":18,"tag":306,"props":353,"children":355},{"class":308,"line":354},4,[356,361,366,371],{"type":18,"tag":306,"props":357,"children":358},{"class":319},[359],{"type":24,"value":360},"dt ",{"type":18,"tag":306,"props":362,"children":363},{"class":313},[364],{"type":24,"value":365},"=",{"type":18,"tag":306,"props":367,"children":368},{"class":319},[369],{"type":24,"value":370}," ",{"type":18,"tag":306,"props":372,"children":374},{"class":373},"ct-533739",[375],{"type":24,"value":376},"0.01\n",{"type":18,"tag":306,"props":378,"children":380},{"class":308,"line":379},5,[381],{"type":18,"tag":306,"props":382,"children":383},{"class":348},[384],{"type":24,"value":385},"## Define the num steps for function approximation \n",{"type":18,"tag":306,"props":387,"children":389},{"class":308,"line":388},6,[390,395,399,403],{"type":18,"tag":306,"props":391,"children":392},{"class":319},[393],{"type":24,"value":394},"num_steps ",{"type":18,"tag":306,"props":396,"children":397},{"class":313},[398],{"type":24,"value":365},{"type":18,"tag":306,"props":400,"children":401},{"class":319},[402],{"type":24,"value":370},{"type":18,"tag":306,"props":404,"children":405},{"class":373},[406],{"type":24,"value":407},"100\n",{"type":18,"tag":306,"props":409,"children":411},{"class":308,"line":410},7,[412],{"type":18,"tag":306,"props":413,"children":414},{"class":348},[415],{"type":24,"value":416},"## Define initial states\n",{"type":18,"tag":306,"props":418,"children":420},{"class":308,"line":419},8,[421,426,430,434],{"type":18,"tag":306,"props":422,"children":423},{"class":319},[424],{"type":24,"value":425},"x ",{"type":18,"tag":306,"props":427,"children":428},{"class":313},[429],{"type":24,"value":365},{"type":18,"tag":306,"props":431,"children":432},{"class":319},[433],{"type":24,"value":370},{"type":18,"tag":306,"props":435,"children":436},{"class":373},[437],{"type":24,"value":438},"0.0\n",{"type":18,"tag":306,"props":440,"children":442},{"class":308,"line":441},9,[443,448,452,456],{"type":18,"tag":306,"props":444,"children":445},{"class":319},[446],{"type":24,"value":447},"y ",{"type":18,"tag":306,"props":449,"children":450},{"class":313},[451],{"type":24,"value":365},{"type":18,"tag":306,"props":453,"children":454},{"class":319},[455],{"type":24,"value":370},{"type":18,"tag":306,"props":457,"children":458},{"class":373},[459],{"type":24,"value":438},{"type":18,"tag":306,"props":461,"children":463},{"class":308,"line":462},10,[464,469,473,477],{"type":18,"tag":306,"props":465,"children":466},{"class":319},[467],{"type":24,"value":468},"yaw ",{"type":18,"tag":306,"props":470,"children":471},{"class":313},[472],{"type":24,"value":365},{"type":18,"tag":306,"props":474,"children":475},{"class":319},[476],{"type":24,"value":370},{"type":18,"tag":306,"props":478,"children":479},{"class":373},[480],{"type":24,"value":438},{"type":18,"tag":306,"props":482,"children":484},{"class":308,"line":483},11,[485],{"type":18,"tag":306,"props":486,"children":487},{"class":348},[488],{"type":24,"value":489},"## Define input control\n",{"type":18,"tag":306,"props":491,"children":493},{"class":308,"line":492},12,[494,499,503,507,512,516],{"type":18,"tag":306,"props":495,"children":496},{"class":319},[497],{"type":24,"value":498},"v ",{"type":18,"tag":306,"props":500,"children":501},{"class":313},[502],{"type":24,"value":365},{"type":18,"tag":306,"props":504,"children":505},{"class":319},[506],{"type":24,"value":370},{"type":18,"tag":306,"props":508,"children":509},{"class":373},[510],{"type":24,"value":511},"1.5",{"type":18,"tag":306,"props":513,"children":514},{"class":319},[515],{"type":24,"value":370},{"type":18,"tag":306,"props":517,"children":518},{"class":348},[519],{"type":24,"value":520},"#m/s\n",{"type":18,"tag":306,"props":522,"children":524},{"class":308,"line":523},13,[525,530,534,538,543,547],{"type":18,"tag":306,"props":526,"children":527},{"class":319},[528],{"type":24,"value":529},"omega ",{"type":18,"tag":306,"props":531,"children":532},{"class":313},[533],{"type":24,"value":365},{"type":18,"tag":306,"props":535,"children":536},{"class":319},[537],{"type":24,"value":370},{"type":18,"tag":306,"props":539,"children":540},{"class":373},[541],{"type":24,"value":542},"1.57",{"type":18,"tag":306,"props":544,"children":545},{"class":319},[546],{"type":24,"value":370},{"type":18,"tag":306,"props":548,"children":549},{"class":348},[550],{"type":24,"value":551},"#rad/s\n",{"type":18,"tag":306,"props":553,"children":555},{"class":308,"line":554},14,[556],{"type":18,"tag":306,"props":557,"children":558},{"class":348},[559],{"type":24,"value":560},"## Define state represent model\n",{"type":18,"tag":306,"props":562,"children":564},{"class":308,"line":563},15,[565],{"type":18,"tag":306,"props":566,"children":567},{"class":348},[568],{"type":24,"value":569},"### define lambda function take variable x\n",{"type":18,"tag":306,"props":571,"children":573},{"class":308,"line":572},16,[574,579,583,587,592],{"type":18,"tag":306,"props":575,"children":576},{"class":319},[577],{"type":24,"value":578},"f ",{"type":18,"tag":306,"props":580,"children":581},{"class":313},[582],{"type":24,"value":365},{"type":18,"tag":306,"props":584,"children":585},{"class":319},[586],{"type":24,"value":370},{"type":18,"tag":306,"props":588,"children":589},{"class":313},[590],{"type":24,"value":591},"lambda",{"type":18,"tag":306,"props":593,"children":594},{"class":319},[595],{"type":24,"value":596}," x, u :  np.array([\n",{"type":18,"tag":306,"props":598,"children":600},{"class":308,"line":599},17,[601,606,611,616,621,626,631],{"type":18,"tag":306,"props":602,"children":603},{"class":319},[604],{"type":24,"value":605},"      [u[",{"type":18,"tag":306,"props":607,"children":608},{"class":373},[609],{"type":24,"value":610},"0",{"type":18,"tag":306,"props":612,"children":613},{"class":319},[614],{"type":24,"value":615},"]",{"type":18,"tag":306,"props":617,"children":618},{"class":313},[619],{"type":24,"value":620},"*",{"type":18,"tag":306,"props":622,"children":623},{"class":319},[624],{"type":24,"value":625},"np.cos(x[",{"type":18,"tag":306,"props":627,"children":628},{"class":373},[629],{"type":24,"value":630},"2",{"type":18,"tag":306,"props":632,"children":633},{"class":319},[634],{"type":24,"value":635},"])],\n",{"type":18,"tag":306,"props":637,"children":639},{"class":308,"line":638},18,[640,644,648,652,656,661,665],{"type":18,"tag":306,"props":641,"children":642},{"class":319},[643],{"type":24,"value":605},{"type":18,"tag":306,"props":645,"children":646},{"class":373},[647],{"type":24,"value":610},{"type":18,"tag":306,"props":649,"children":650},{"class":319},[651],{"type":24,"value":615},{"type":18,"tag":306,"props":653,"children":654},{"class":313},[655],{"type":24,"value":620},{"type":18,"tag":306,"props":657,"children":658},{"class":319},[659],{"type":24,"value":660},"np.sin(x[",{"type":18,"tag":306,"props":662,"children":663},{"class":373},[664],{"type":24,"value":630},{"type":18,"tag":306,"props":666,"children":667},{"class":319},[668],{"type":24,"value":635},{"type":18,"tag":306,"props":670,"children":672},{"class":308,"line":671},19,[673,677,682],{"type":18,"tag":306,"props":674,"children":675},{"class":319},[676],{"type":24,"value":605},{"type":18,"tag":306,"props":678,"children":679},{"class":373},[680],{"type":24,"value":681},"1",{"type":18,"tag":306,"props":683,"children":684},{"class":319},[685],{"type":24,"value":686},"]]\n",{"type":18,"tag":306,"props":688,"children":690},{"class":308,"line":689},20,[691],{"type":18,"tag":306,"props":692,"children":693},{"class":319},[694],{"type":24,"value":695},"])\n",{"type":18,"tag":306,"props":697,"children":699},{"class":308,"line":698},21,[700],{"type":18,"tag":306,"props":701,"children":702},{},[703],{"type":24,"value":341},{"type":18,"tag":306,"props":705,"children":707},{"class":308,"line":706},22,[708,713,718,723,727,732],{"type":18,"tag":306,"props":709,"children":710},{"class":313},[711],{"type":24,"value":712},"for",{"type":18,"tag":306,"props":714,"children":715},{"class":319},[716],{"type":24,"value":717}," _ ",{"type":18,"tag":306,"props":719,"children":720},{"class":313},[721],{"type":24,"value":722},"in",{"type":18,"tag":306,"props":724,"children":725},{"class":319},[726],{"type":24,"value":370},{"type":18,"tag":306,"props":728,"children":729},{"class":373},[730],{"type":24,"value":731},"range",{"type":18,"tag":306,"props":733,"children":734},{"class":319},[735],{"type":24,"value":736},"(num_steps):\n",{"type":18,"tag":306,"props":738,"children":740},{"class":308,"line":739},23,[741,746,750],{"type":18,"tag":306,"props":742,"children":743},{"class":319},[744],{"type":24,"value":745},"    k1 ",{"type":18,"tag":306,"props":747,"children":748},{"class":313},[749],{"type":24,"value":365},{"type":18,"tag":306,"props":751,"children":752},{"class":319},[753],{"type":24,"value":754}," f([x, y, yaw], [v, omega])\n",{"type":18,"tag":306,"props":756,"children":758},{"class":308,"line":757},24,[759,764,768,773,778,783,788,792,796,801,805,810,814,819,823,827,831,835,839,843,847,851,855,860,864,868,872,876,880,884,888,892,896],{"type":18,"tag":306,"props":760,"children":761},{"class":319},[762],{"type":24,"value":763},"    k2 ",{"type":18,"tag":306,"props":765,"children":766},{"class":313},[767],{"type":24,"value":365},{"type":18,"tag":306,"props":769,"children":770},{"class":319},[771],{"type":24,"value":772}," f([x ",{"type":18,"tag":306,"props":774,"children":775},{"class":313},[776],{"type":24,"value":777},"+",{"type":18,"tag":306,"props":779,"children":780},{"class":319},[781],{"type":24,"value":782}," (dt ",{"type":18,"tag":306,"props":784,"children":785},{"class":313},[786],{"type":24,"value":787},"/",{"type":18,"tag":306,"props":789,"children":790},{"class":319},[791],{"type":24,"value":370},{"type":18,"tag":306,"props":793,"children":794},{"class":373},[795],{"type":24,"value":630},{"type":18,"tag":306,"props":797,"children":798},{"class":319},[799],{"type":24,"value":800},") ",{"type":18,"tag":306,"props":802,"children":803},{"class":313},[804],{"type":24,"value":620},{"type":18,"tag":306,"props":806,"children":807},{"class":319},[808],{"type":24,"value":809}," k1[",{"type":18,"tag":306,"props":811,"children":812},{"class":373},[813],{"type":24,"value":610},{"type":18,"tag":306,"props":815,"children":816},{"class":319},[817],{"type":24,"value":818},"], y ",{"type":18,"tag":306,"props":820,"children":821},{"class":313},[822],{"type":24,"value":777},{"type":18,"tag":306,"props":824,"children":825},{"class":319},[826],{"type":24,"value":782},{"type":18,"tag":306,"props":828,"children":829},{"class":313},[830],{"type":24,"value":787},{"type":18,"tag":306,"props":832,"children":833},{"class":319},[834],{"type":24,"value":370},{"type":18,"tag":306,"props":836,"children":837},{"class":373},[838],{"type":24,"value":630},{"type":18,"tag":306,"props":840,"children":841},{"class":319},[842],{"type":24,"value":800},{"type":18,"tag":306,"props":844,"children":845},{"class":313},[846],{"type":24,"value":620},{"type":18,"tag":306,"props":848,"children":849},{"class":319},[850],{"type":24,"value":809},{"type":18,"tag":306,"props":852,"children":853},{"class":373},[854],{"type":24,"value":681},{"type":18,"tag":306,"props":856,"children":857},{"class":319},[858],{"type":24,"value":859},"], yaw ",{"type":18,"tag":306,"props":861,"children":862},{"class":313},[863],{"type":24,"value":777},{"type":18,"tag":306,"props":865,"children":866},{"class":319},[867],{"type":24,"value":782},{"type":18,"tag":306,"props":869,"children":870},{"class":313},[871],{"type":24,"value":787},{"type":18,"tag":306,"props":873,"children":874},{"class":319},[875],{"type":24,"value":370},{"type":18,"tag":306,"props":877,"children":878},{"class":373},[879],{"type":24,"value":630},{"type":18,"tag":306,"props":881,"children":882},{"class":319},[883],{"type":24,"value":800},{"type":18,"tag":306,"props":885,"children":886},{"class":313},[887],{"type":24,"value":620},{"type":18,"tag":306,"props":889,"children":890},{"class":319},[891],{"type":24,"value":809},{"type":18,"tag":306,"props":893,"children":894},{"class":373},[895],{"type":24,"value":630},{"type":18,"tag":306,"props":897,"children":898},{"class":319},[899],{"type":24,"value":900},"]], [v, omega])\n",{"type":18,"tag":306,"props":902,"children":904},{"class":308,"line":903},25,[905,910,914,918,922,926,930,934,938,942,946,951,955,959,963,967,971,975,979,983,987,991,995,999,1003,1007,1011,1015,1019,1023,1027,1031,1035],{"type":18,"tag":306,"props":906,"children":907},{"class":319},[908],{"type":24,"value":909},"    k3 ",{"type":18,"tag":306,"props":911,"children":912},{"class":313},[913],{"type":24,"value":365},{"type":18,"tag":306,"props":915,"children":916},{"class":319},[917],{"type":24,"value":772},{"type":18,"tag":306,"props":919,"children":920},{"class":313},[921],{"type":24,"value":777},{"type":18,"tag":306,"props":923,"children":924},{"class":319},[925],{"type":24,"value":782},{"type":18,"tag":306,"props":927,"children":928},{"class":313},[929],{"type":24,"value":787},{"type":18,"tag":306,"props":931,"children":932},{"class":319},[933],{"type":24,"value":370},{"type":18,"tag":306,"props":935,"children":936},{"class":373},[937],{"type":24,"value":630},{"type":18,"tag":306,"props":939,"children":940},{"class":319},[941],{"type":24,"value":800},{"type":18,"tag":306,"props":943,"children":944},{"class":313},[945],{"type":24,"value":620},{"type":18,"tag":306,"props":947,"children":948},{"class":319},[949],{"type":24,"value":950}," k2[",{"type":18,"tag":306,"props":952,"children":953},{"class":373},[954],{"type":24,"value":610},{"type":18,"tag":306,"props":956,"children":957},{"class":319},[958],{"type":24,"value":818},{"type":18,"tag":306,"props":960,"children":961},{"class":313},[962],{"type":24,"value":777},{"type":18,"tag":306,"props":964,"children":965},{"class":319},[966],{"type":24,"value":782},{"type":18,"tag":306,"props":968,"children":969},{"class":313},[970],{"type":24,"value":787},{"type":18,"tag":306,"props":972,"children":973},{"class":319},[974],{"type":24,"value":370},{"type":18,"tag":306,"props":976,"children":977},{"class":373},[978],{"type":24,"value":630},{"type":18,"tag":306,"props":980,"children":981},{"class":319},[982],{"type":24,"value":800},{"type":18,"tag":306,"props":984,"children":985},{"class":313},[986],{"type":24,"value":620},{"type":18,"tag":306,"props":988,"children":989},{"class":319},[990],{"type":24,"value":950},{"type":18,"tag":306,"props":992,"children":993},{"class":373},[994],{"type":24,"value":681},{"type":18,"tag":306,"props":996,"children":997},{"class":319},[998],{"type":24,"value":859},{"type":18,"tag":306,"props":1000,"children":1001},{"class":313},[1002],{"type":24,"value":777},{"type":18,"tag":306,"props":1004,"children":1005},{"class":319},[1006],{"type":24,"value":782},{"type":18,"tag":306,"props":1008,"children":1009},{"class":313},[1010],{"type":24,"value":787},{"type":18,"tag":306,"props":1012,"children":1013},{"class":319},[1014],{"type":24,"value":370},{"type":18,"tag":306,"props":1016,"children":1017},{"class":373},[1018],{"type":24,"value":630},{"type":18,"tag":306,"props":1020,"children":1021},{"class":319},[1022],{"type":24,"value":800},{"type":18,"tag":306,"props":1024,"children":1025},{"class":313},[1026],{"type":24,"value":620},{"type":18,"tag":306,"props":1028,"children":1029},{"class":319},[1030],{"type":24,"value":950},{"type":18,"tag":306,"props":1032,"children":1033},{"class":373},[1034],{"type":24,"value":630},{"type":18,"tag":306,"props":1036,"children":1037},{"class":319},[1038],{"type":24,"value":900},{"type":18,"tag":306,"props":1040,"children":1042},{"class":308,"line":1041},26,[1043,1048,1052,1056,1060,1065,1069,1074,1078,1082,1086,1090,1094,1098,1102,1106,1110,1114,1118,1122,1126],{"type":18,"tag":306,"props":1044,"children":1045},{"class":319},[1046],{"type":24,"value":1047},"    k4 ",{"type":18,"tag":306,"props":1049,"children":1050},{"class":313},[1051],{"type":24,"value":365},{"type":18,"tag":306,"props":1053,"children":1054},{"class":319},[1055],{"type":24,"value":772},{"type":18,"tag":306,"props":1057,"children":1058},{"class":313},[1059],{"type":24,"value":777},{"type":18,"tag":306,"props":1061,"children":1062},{"class":319},[1063],{"type":24,"value":1064}," dt ",{"type":18,"tag":306,"props":1066,"children":1067},{"class":313},[1068],{"type":24,"value":620},{"type":18,"tag":306,"props":1070,"children":1071},{"class":319},[1072],{"type":24,"value":1073}," k3[",{"type":18,"tag":306,"props":1075,"children":1076},{"class":373},[1077],{"type":24,"value":610},{"type":18,"tag":306,"props":1079,"children":1080},{"class":319},[1081],{"type":24,"value":818},{"type":18,"tag":306,"props":1083,"children":1084},{"class":313},[1085],{"type":24,"value":777},{"type":18,"tag":306,"props":1087,"children":1088},{"class":319},[1089],{"type":24,"value":1064},{"type":18,"tag":306,"props":1091,"children":1092},{"class":313},[1093],{"type":24,"value":620},{"type":18,"tag":306,"props":1095,"children":1096},{"class":319},[1097],{"type":24,"value":1073},{"type":18,"tag":306,"props":1099,"children":1100},{"class":373},[1101],{"type":24,"value":681},{"type":18,"tag":306,"props":1103,"children":1104},{"class":319},[1105],{"type":24,"value":859},{"type":18,"tag":306,"props":1107,"children":1108},{"class":313},[1109],{"type":24,"value":777},{"type":18,"tag":306,"props":1111,"children":1112},{"class":319},[1113],{"type":24,"value":1064},{"type":18,"tag":306,"props":1115,"children":1116},{"class":313},[1117],{"type":24,"value":620},{"type":18,"tag":306,"props":1119,"children":1120},{"class":319},[1121],{"type":24,"value":1073},{"type":18,"tag":306,"props":1123,"children":1124},{"class":373},[1125],{"type":24,"value":630},{"type":18,"tag":306,"props":1127,"children":1128},{"class":319},[1129],{"type":24,"value":900},{"type":18,"tag":306,"props":1131,"children":1133},{"class":308,"line":1132},27,[1134],{"type":18,"tag":306,"props":1135,"children":1136},{},[1137],{"type":24,"value":341},{"type":18,"tag":306,"props":1139,"children":1141},{"class":308,"line":1140},28,[1142,1147],{"type":18,"tag":306,"props":1143,"children":1144},{"class":319},[1145],{"type":24,"value":1146},"    ",{"type":18,"tag":306,"props":1148,"children":1149},{"class":348},[1150],{"type":24,"value":1151},"# Update state of the robot\n",{"type":18,"tag":306,"props":1153,"children":1155},{"class":308,"line":1154},29,[1156,1161,1166,1171,1175,1180,1184,1188,1192,1196,1200,1204,1208,1212,1216,1220,1224,1228,1232,1236,1240,1244,1248,1253,1257,1262,1266,1270,1274,1278],{"type":18,"tag":306,"props":1157,"children":1158},{"class":319},[1159],{"type":24,"value":1160},"    x ",{"type":18,"tag":306,"props":1162,"children":1163},{"class":313},[1164],{"type":24,"value":1165},"+=",{"type":18,"tag":306,"props":1167,"children":1168},{"class":319},[1169],{"type":24,"value":1170}," (k1[",{"type":18,"tag":306,"props":1172,"children":1173},{"class":373},[1174],{"type":24,"value":610},{"type":18,"tag":306,"props":1176,"children":1177},{"class":319},[1178],{"type":24,"value":1179},"] ",{"type":18,"tag":306,"props":1181,"children":1182},{"class":313},[1183],{"type":24,"value":777},{"type":18,"tag":306,"props":1185,"children":1186},{"class":319},[1187],{"type":24,"value":370},{"type":18,"tag":306,"props":1189,"children":1190},{"class":373},[1191],{"type":24,"value":630},{"type":18,"tag":306,"props":1193,"children":1194},{"class":319},[1195],{"type":24,"value":370},{"type":18,"tag":306,"props":1197,"children":1198},{"class":313},[1199],{"type":24,"value":620},{"type":18,"tag":306,"props":1201,"children":1202},{"class":319},[1203],{"type":24,"value":950},{"type":18,"tag":306,"props":1205,"children":1206},{"class":373},[1207],{"type":24,"value":610},{"type":18,"tag":306,"props":1209,"children":1210},{"class":319},[1211],{"type":24,"value":1179},{"type":18,"tag":306,"props":1213,"children":1214},{"class":313},[1215],{"type":24,"value":777},{"type":18,"tag":306,"props":1217,"children":1218},{"class":319},[1219],{"type":24,"value":370},{"type":18,"tag":306,"props":1221,"children":1222},{"class":373},[1223],{"type":24,"value":630},{"type":18,"tag":306,"props":1225,"children":1226},{"class":319},[1227],{"type":24,"value":370},{"type":18,"tag":306,"props":1229,"children":1230},{"class":313},[1231],{"type":24,"value":620},{"type":18,"tag":306,"props":1233,"children":1234},{"class":319},[1235],{"type":24,"value":1073},{"type":18,"tag":306,"props":1237,"children":1238},{"class":373},[1239],{"type":24,"value":610},{"type":18,"tag":306,"props":1241,"children":1242},{"class":319},[1243],{"type":24,"value":1179},{"type":18,"tag":306,"props":1245,"children":1246},{"class":313},[1247],{"type":24,"value":777},{"type":18,"tag":306,"props":1249,"children":1250},{"class":319},[1251],{"type":24,"value":1252}," k4[",{"type":18,"tag":306,"props":1254,"children":1255},{"class":373},[1256],{"type":24,"value":610},{"type":18,"tag":306,"props":1258,"children":1259},{"class":319},[1260],{"type":24,"value":1261},"]) ",{"type":18,"tag":306,"props":1263,"children":1264},{"class":313},[1265],{"type":24,"value":620},{"type":18,"tag":306,"props":1267,"children":1268},{"class":319},[1269],{"type":24,"value":1064},{"type":18,"tag":306,"props":1271,"children":1272},{"class":313},[1273],{"type":24,"value":787},{"type":18,"tag":306,"props":1275,"children":1276},{"class":319},[1277],{"type":24,"value":370},{"type":18,"tag":306,"props":1279,"children":1280},{"class":373},[1281],{"type":24,"value":1282},"6\n",{"type":18,"tag":306,"props":1284,"children":1286},{"class":308,"line":1285},30,[1287,1292,1296,1300,1304,1308,1312,1316,1320,1324,1328,1332,1336,1340,1344,1348,1352,1356,1360,1364,1368,1372,1376,1380,1384,1388,1392,1396,1400,1404],{"type":18,"tag":306,"props":1288,"children":1289},{"class":319},[1290],{"type":24,"value":1291},"    y ",{"type":18,"tag":306,"props":1293,"children":1294},{"class":313},[1295],{"type":24,"value":1165},{"type":18,"tag":306,"props":1297,"children":1298},{"class":319},[1299],{"type":24,"value":1170},{"type":18,"tag":306,"props":1301,"children":1302},{"class":373},[1303],{"type":24,"value":681},{"type":18,"tag":306,"props":1305,"children":1306},{"class":319},[1307],{"type":24,"value":1179},{"type":18,"tag":306,"props":1309,"children":1310},{"class":313},[1311],{"type":24,"value":777},{"type":18,"tag":306,"props":1313,"children":1314},{"class":319},[1315],{"type":24,"value":370},{"type":18,"tag":306,"props":1317,"children":1318},{"class":373},[1319],{"type":24,"value":630},{"type":18,"tag":306,"props":1321,"children":1322},{"class":319},[1323],{"type":24,"value":370},{"type":18,"tag":306,"props":1325,"children":1326},{"class":313},[1327],{"type":24,"value":620},{"type":18,"tag":306,"props":1329,"children":1330},{"class":319},[1331],{"type":24,"value":950},{"type":18,"tag":306,"props":1333,"children":1334},{"class":373},[1335],{"type":24,"value":681},{"type":18,"tag":306,"props":1337,"children":1338},{"class":319},[1339],{"type":24,"value":1179},{"type":18,"tag":306,"props":1341,"children":1342},{"class":313},[1343],{"type":24,"value":777},{"type":18,"tag":306,"props":1345,"children":1346},{"class":319},[1347],{"type":24,"value":370},{"type":18,"tag":306,"props":1349,"children":1350},{"class":373},[1351],{"type":24,"value":630},{"type":18,"tag":306,"props":1353,"children":1354},{"class":319},[1355],{"type":24,"value":370},{"type":18,"tag":306,"props":1357,"children":1358},{"class":313},[1359],{"type":24,"value":620},{"type":18,"tag":306,"props":1361,"children":1362},{"class":319},[1363],{"type":24,"value":1073},{"type":18,"tag":306,"props":1365,"children":1366},{"class":373},[1367],{"type":24,"value":681},{"type":18,"tag":306,"props":1369,"children":1370},{"class":319},[1371],{"type":24,"value":1179},{"type":18,"tag":306,"props":1373,"children":1374},{"class":313},[1375],{"type":24,"value":777},{"type":18,"tag":306,"props":1377,"children":1378},{"class":319},[1379],{"type":24,"value":1252},{"type":18,"tag":306,"props":1381,"children":1382},{"class":373},[1383],{"type":24,"value":681},{"type":18,"tag":306,"props":1385,"children":1386},{"class":319},[1387],{"type":24,"value":1261},{"type":18,"tag":306,"props":1389,"children":1390},{"class":313},[1391],{"type":24,"value":620},{"type":18,"tag":306,"props":1393,"children":1394},{"class":319},[1395],{"type":24,"value":1064},{"type":18,"tag":306,"props":1397,"children":1398},{"class":313},[1399],{"type":24,"value":787},{"type":18,"tag":306,"props":1401,"children":1402},{"class":319},[1403],{"type":24,"value":370},{"type":18,"tag":306,"props":1405,"children":1406},{"class":373},[1407],{"type":24,"value":1282},{"type":18,"tag":306,"props":1409,"children":1411},{"class":308,"line":1410},31,[1412,1417,1421,1425,1429,1433,1437,1441,1445,1449,1453,1457,1461,1465,1469,1473,1477,1481,1485,1489,1493,1497,1501,1505,1509,1513,1517,1521,1525,1529],{"type":18,"tag":306,"props":1413,"children":1414},{"class":319},[1415],{"type":24,"value":1416},"    yaw ",{"type":18,"tag":306,"props":1418,"children":1419},{"class":313},[1420],{"type":24,"value":1165},{"type":18,"tag":306,"props":1422,"children":1423},{"class":319},[1424],{"type":24,"value":1170},{"type":18,"tag":306,"props":1426,"children":1427},{"class":373},[1428],{"type":24,"value":630},{"type":18,"tag":306,"props":1430,"children":1431},{"class":319},[1432],{"type":24,"value":1179},{"type":18,"tag":306,"props":1434,"children":1435},{"class":313},[1436],{"type":24,"value":777},{"type":18,"tag":306,"props":1438,"children":1439},{"class":319},[1440],{"type":24,"value":370},{"type":18,"tag":306,"props":1442,"children":1443},{"class":373},[1444],{"type":24,"value":630},{"type":18,"tag":306,"props":1446,"children":1447},{"class":319},[1448],{"type":24,"value":370},{"type":18,"tag":306,"props":1450,"children":1451},{"class":313},[1452],{"type":24,"value":620},{"type":18,"tag":306,"props":1454,"children":1455},{"class":319},[1456],{"type":24,"value":950},{"type":18,"tag":306,"props":1458,"children":1459},{"class":373},[1460],{"type":24,"value":630},{"type":18,"tag":306,"props":1462,"children":1463},{"class":319},[1464],{"type":24,"value":1179},{"type":18,"tag":306,"props":1466,"children":1467},{"class":313},[1468],{"type":24,"value":777},{"type":18,"tag":306,"props":1470,"children":1471},{"class":319},[1472],{"type":24,"value":370},{"type":18,"tag":306,"props":1474,"children":1475},{"class":373},[1476],{"type":24,"value":630},{"type":18,"tag":306,"props":1478,"children":1479},{"class":319},[1480],{"type":24,"value":370},{"type":18,"tag":306,"props":1482,"children":1483},{"class":313},[1484],{"type":24,"value":620},{"type":18,"tag":306,"props":1486,"children":1487},{"class":319},[1488],{"type":24,"value":1073},{"type":18,"tag":306,"props":1490,"children":1491},{"class":373},[1492],{"type":24,"value":630},{"type":18,"tag":306,"props":1494,"children":1495},{"class":319},[1496],{"type":24,"value":1179},{"type":18,"tag":306,"props":1498,"children":1499},{"class":313},[1500],{"type":24,"value":777},{"type":18,"tag":306,"props":1502,"children":1503},{"class":319},[1504],{"type":24,"value":1252},{"type":18,"tag":306,"props":1506,"children":1507},{"class":373},[1508],{"type":24,"value":630},{"type":18,"tag":306,"props":1510,"children":1511},{"class":319},[1512],{"type":24,"value":1261},{"type":18,"tag":306,"props":1514,"children":1515},{"class":313},[1516],{"type":24,"value":620},{"type":18,"tag":306,"props":1518,"children":1519},{"class":319},[1520],{"type":24,"value":1064},{"type":18,"tag":306,"props":1522,"children":1523},{"class":313},[1524],{"type":24,"value":787},{"type":18,"tag":306,"props":1526,"children":1527},{"class":319},[1528],{"type":24,"value":370},{"type":18,"tag":306,"props":1530,"children":1531},{"class":373},[1532],{"type":24,"value":1533},"6",{"type":18,"tag":19,"props":1535,"children":1537},{"id":1536},"single-shooting-method",[1538],{"type":24,"value":1539},"Single Shooting Method",{"type":18,"tag":27,"props":1541,"children":1542},{},[1543],{"type":24,"value":1544},"Single Shooting Method is a method that we transform the optimal control problem to the nonlinear programming problem with just one decision variable.",{"type":18,"tag":179,"props":1546,"children":1548},{"latex-express":1547,"styles":59},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":1550,"children":1551},{},[1552,1554,1558,1560],{"type":24,"value":1553},"Get ",{"type":18,"tag":111,"props":1555,"children":1557},{"latex-express":1556,"styles":142},"x_{u}",[],{"type":24,"value":1559}," as a function of ",{"type":18,"tag":111,"props":1561,"children":1563},{"latex-express":1562,"styles":142},"w, x, t_{k}",[],{"type":18,"tag":179,"props":1565,"children":1567},{"latex-express":1566,"styles":59},"\n      \\begin{align*}\n            x_{u} &= F(w,x_{0},t_{k}) \\\\\n            F(w,x_{0},t_{0}) &= x_{0} \\\\\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":1569,"children":1570},{},[1571],{"type":24,"value":1572},"Then solve the NLP",{"type":18,"tag":179,"props":1574,"children":1576},{"latex-express":1575,"styles":59},"\n      \\begin{align*}\n            \\min_{w}\\Phi(F(w,x_{0},t_{k}), w) \\\\ \n            \\text{Subject to} \\hspace{1cm}  g_{1}(F(w,x_{0},t_{k}),w) \\leq{0}\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1578,"children":1580},{"id":1579},"multiple-shooting",[1581],{"type":24,"value":1582},"Multiple Shooting",{"type":18,"tag":27,"props":1584,"children":1585},{},[1586],{"type":24,"value":1587},"Multiple Shooting Method is a method that consist of transforming of optimal control problem to the nonlinear programming problem with multiple decision variables.",{"type":18,"tag":179,"props":1589,"children":1591},{"latex-express":1590,"styles":59},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}, x_{0}, ..., x_{N}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":132,"props":1593,"children":1594},{},[1595,1600],{"type":18,"tag":136,"props":1596,"children":1597},{},[1598],{"type":24,"value":1599},"X becoming decision variable in the opimization problem as well as u",{"type":18,"tag":136,"props":1601,"children":1602},{},[1603],{"type":24,"value":1604},"We apply path constraint at each iteration step",{"type":18,"tag":179,"props":1606,"children":1608},{"latex-express":1607,"styles":59},"\n      \\begin{equation*}\n                x_{k+1}-f(x_{k},u_{k}) = 0\n            \\end{equation*}\n",[],{"type":18,"tag":27,"props":1610,"children":1611},{},[1612],{"type":24,"value":1572},{"type":18,"tag":179,"props":1614,"children":1616},{"latex-express":1615,"styles":59},"\n      \\begin{align*}\n            \\min_{w}  \\Phi(F(w,x_{0},t_{k}),& w) \\\\ \n            \\text{s.t}\\hspace{0.5cm}  g_{1}(F(w,x_{0},t_{k}),w) &\\leq{0} \\\\ \n                               g_{2}(w) = \\begin{bmatrix}\n                                  \\bar{x}_{0}-x_{0} \\\\\n                                  f(x_{0},u_{0})-x_{1} \\\\ \n                                  \\vdots \\\\\n                                  f(x_{N-1}, u_{N-1}-x_{N})\n                              \\end{bmatrix} &= 0\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1618,"children":1620},{"id":1619},"implement-in-python",[1621],{"type":24,"value":1622},"Implement in Python",{"type":18,"tag":27,"props":1624,"children":1625},{},[1626,1628,1634],{"type":24,"value":1627},"We will use ",{"type":18,"tag":1629,"props":1630,"children":1631},"code-inline",{},[1632],{"type":24,"value":1633},"Casadi",{"type":24,"value":1635}," as a numerical optimization framework.",{"type":18,"tag":291,"props":1637,"children":1640},{"className":1638,"code":1639,"language":296,"meta":8},[294],"import casadi as ca\n",[1641],{"type":18,"tag":299,"props":1642,"children":1643},{},[1644],{"type":18,"tag":291,"props":1645,"children":1646},{"__ignoreMap":8},[1647],{"type":18,"tag":306,"props":1648,"children":1649},{"class":308,"line":309},[1650,1654,1659,1663],{"type":18,"tag":306,"props":1651,"children":1652},{"class":313},[1653],{"type":24,"value":316},{"type":18,"tag":306,"props":1655,"children":1656},{"class":319},[1657],{"type":24,"value":1658}," casadi ",{"type":18,"tag":306,"props":1660,"children":1661},{"class":313},[1662],{"type":24,"value":327},{"type":18,"tag":306,"props":1664,"children":1665},{"class":319},[1666],{"type":24,"value":1667}," ca",{"type":18,"tag":27,"props":1669,"children":1670},{},[1671],{"type":24,"value":1672},"Define state representation and input control of our nonlinear model.",{"type":18,"tag":291,"props":1674,"children":1677},{"className":1675,"code":1676,"language":296,"meta":8},[294],"# Symbolic Variables\n## States\nx = ca.SX.sym(\"x\")\ny = ca.SX.sym(\"y\")\ntheta = ca.SX.sym(\"theta\")\nstates = ca.vertcat(x, y, theta)\nnum_states = states.numel()\n\n## Control\nu1 = ca.SX.sym(\"u1\")\nu2 = ca.SX.sym(\"u2\")\ncontrols = ca.vertcat(u1, u2)\nnum_controls = controls.numel()\n\n# Define Nonlinear model\n## Rotation Matrix\nrot_mat = ca.vertcat(\n    ca.horzcat(ca.cos(theta), ca.sin(theta), 0),\n    ca.horzcat(-ca.sin(theta), ca.cos(theta), 0),\n    ca.horzcat(0, 0, 1)\n)\n\nvx = u1 * ca.cos(theta)\nvy = u1 * ca.sin(theta)\nvyaw = u2\n\nrhs = ca.vertcat(vx, vy, vyaw)\n## Define mapped nonlinear function f(x,u) -> rhs\nf = ca.Function('f', [states, controls], [rhs])\n",[1678],{"type":18,"tag":299,"props":1679,"children":1680},{},[1681],{"type":18,"tag":291,"props":1682,"children":1683},{"__ignoreMap":8},[1684,1692,1700,1737,1769,1802,1819,1836,1843,1851,1884,1917,1934,1951,1958,1966,1974,1991,2008,2034,2066,2073,2080,2106,2131,2148,2155,2172,2180],{"type":18,"tag":306,"props":1685,"children":1686},{"class":308,"line":309},[1687],{"type":18,"tag":306,"props":1688,"children":1689},{"class":348},[1690],{"type":24,"value":1691},"# Symbolic Variables\n",{"type":18,"tag":306,"props":1693,"children":1694},{"class":308,"line":335},[1695],{"type":18,"tag":306,"props":1696,"children":1697},{"class":348},[1698],{"type":24,"value":1699},"## States\n",{"type":18,"tag":306,"props":1701,"children":1702},{"class":308,"line":344},[1703,1707,1711,1716,1721,1726,1732],{"type":18,"tag":306,"props":1704,"children":1705},{"class":319},[1706],{"type":24,"value":425},{"type":18,"tag":306,"props":1708,"children":1709},{"class":313},[1710],{"type":24,"value":365},{"type":18,"tag":306,"props":1712,"children":1713},{"class":319},[1714],{"type":24,"value":1715}," ca.",{"type":18,"tag":306,"props":1717,"children":1718},{"class":373},[1719],{"type":24,"value":1720},"SX",{"type":18,"tag":306,"props":1722,"children":1723},{"class":319},[1724],{"type":24,"value":1725},".sym(",{"type":18,"tag":306,"props":1727,"children":1729},{"class":1728},"ct-244866",[1730],{"type":24,"value":1731},"\"x\"",{"type":18,"tag":306,"props":1733,"children":1734},{"class":319},[1735],{"type":24,"value":1736},")\n",{"type":18,"tag":306,"props":1738,"children":1739},{"class":308,"line":354},[1740,1744,1748,1752,1756,1760,1765],{"type":18,"tag":306,"props":1741,"children":1742},{"class":319},[1743],{"type":24,"value":447},{"type":18,"tag":306,"props":1745,"children":1746},{"class":313},[1747],{"type":24,"value":365},{"type":18,"tag":306,"props":1749,"children":1750},{"class":319},[1751],{"type":24,"value":1715},{"type":18,"tag":306,"props":1753,"children":1754},{"class":373},[1755],{"type":24,"value":1720},{"type":18,"tag":306,"props":1757,"children":1758},{"class":319},[1759],{"type":24,"value":1725},{"type":18,"tag":306,"props":1761,"children":1762},{"class":1728},[1763],{"type":24,"value":1764},"\"y\"",{"type":18,"tag":306,"props":1766,"children":1767},{"class":319},[1768],{"type":24,"value":1736},{"type":18,"tag":306,"props":1770,"children":1771},{"class":308,"line":379},[1772,1777,1781,1785,1789,1793,1798],{"type":18,"tag":306,"props":1773,"children":1774},{"class":319},[1775],{"type":24,"value":1776},"theta ",{"type":18,"tag":306,"props":1778,"children":1779},{"class":313},[1780],{"type":24,"value":365},{"type":18,"tag":306,"props":1782,"children":1783},{"class":319},[1784],{"type":24,"value":1715},{"type":18,"tag":306,"props":1786,"children":1787},{"class":373},[1788],{"type":24,"value":1720},{"type":18,"tag":306,"props":1790,"children":1791},{"class":319},[1792],{"type":24,"value":1725},{"type":18,"tag":306,"props":1794,"children":1795},{"class":1728},[1796],{"type":24,"value":1797},"\"theta\"",{"type":18,"tag":306,"props":1799,"children":1800},{"class":319},[1801],{"type":24,"value":1736},{"type":18,"tag":306,"props":1803,"children":1804},{"class":308,"line":388},[1805,1810,1814],{"type":18,"tag":306,"props":1806,"children":1807},{"class":319},[1808],{"type":24,"value":1809},"states ",{"type":18,"tag":306,"props":1811,"children":1812},{"class":313},[1813],{"type":24,"value":365},{"type":18,"tag":306,"props":1815,"children":1816},{"class":319},[1817],{"type":24,"value":1818}," ca.vertcat(x, y, theta)\n",{"type":18,"tag":306,"props":1820,"children":1821},{"class":308,"line":410},[1822,1827,1831],{"type":18,"tag":306,"props":1823,"children":1824},{"class":319},[1825],{"type":24,"value":1826},"num_states ",{"type":18,"tag":306,"props":1828,"children":1829},{"class":313},[1830],{"type":24,"value":365},{"type":18,"tag":306,"props":1832,"children":1833},{"class":319},[1834],{"type":24,"value":1835}," states.numel()\n",{"type":18,"tag":306,"props":1837,"children":1838},{"class":308,"line":419},[1839],{"type":18,"tag":306,"props":1840,"children":1841},{},[1842],{"type":24,"value":341},{"type":18,"tag":306,"props":1844,"children":1845},{"class":308,"line":441},[1846],{"type":18,"tag":306,"props":1847,"children":1848},{"class":348},[1849],{"type":24,"value":1850},"## Control\n",{"type":18,"tag":306,"props":1852,"children":1853},{"class":308,"line":462},[1854,1859,1863,1867,1871,1875,1880],{"type":18,"tag":306,"props":1855,"children":1856},{"class":319},[1857],{"type":24,"value":1858},"u1 ",{"type":18,"tag":306,"props":1860,"children":1861},{"class":313},[1862],{"type":24,"value":365},{"type":18,"tag":306,"props":1864,"children":1865},{"class":319},[1866],{"type":24,"value":1715},{"type":18,"tag":306,"props":1868,"children":1869},{"class":373},[1870],{"type":24,"value":1720},{"type":18,"tag":306,"props":1872,"children":1873},{"class":319},[1874],{"type":24,"value":1725},{"type":18,"tag":306,"props":1876,"children":1877},{"class":1728},[1878],{"type":24,"value":1879},"\"u1\"",{"type":18,"tag":306,"props":1881,"children":1882},{"class":319},[1883],{"type":24,"value":1736},{"type":18,"tag":306,"props":1885,"children":1886},{"class":308,"line":483},[1887,1892,1896,1900,1904,1908,1913],{"type":18,"tag":306,"props":1888,"children":1889},{"class":319},[1890],{"type":24,"value":1891},"u2 ",{"type":18,"tag":306,"props":1893,"children":1894},{"class":313},[1895],{"type":24,"value":365},{"type":18,"tag":306,"props":1897,"children":1898},{"class":319},[1899],{"type":24,"value":1715},{"type":18,"tag":306,"props":1901,"children":1902},{"class":373},[1903],{"type":24,"value":1720},{"type":18,"tag":306,"props":1905,"children":1906},{"class":319},[1907],{"type":24,"value":1725},{"type":18,"tag":306,"props":1909,"children":1910},{"class":1728},[1911],{"type":24,"value":1912},"\"u2\"",{"type":18,"tag":306,"props":1914,"children":1915},{"class":319},[1916],{"type":24,"value":1736},{"type":18,"tag":306,"props":1918,"children":1919},{"class":308,"line":492},[1920,1925,1929],{"type":18,"tag":306,"props":1921,"children":1922},{"class":319},[1923],{"type":24,"value":1924},"controls ",{"type":18,"tag":306,"props":1926,"children":1927},{"class":313},[1928],{"type":24,"value":365},{"type":18,"tag":306,"props":1930,"children":1931},{"class":319},[1932],{"type":24,"value":1933}," ca.vertcat(u1, u2)\n",{"type":18,"tag":306,"props":1935,"children":1936},{"class":308,"line":523},[1937,1942,1946],{"type":18,"tag":306,"props":1938,"children":1939},{"class":319},[1940],{"type":24,"value":1941},"num_controls ",{"type":18,"tag":306,"props":1943,"children":1944},{"class":313},[1945],{"type":24,"value":365},{"type":18,"tag":306,"props":1947,"children":1948},{"class":319},[1949],{"type":24,"value":1950}," controls.numel()\n",{"type":18,"tag":306,"props":1952,"children":1953},{"class":308,"line":554},[1954],{"type":18,"tag":306,"props":1955,"children":1956},{},[1957],{"type":24,"value":341},{"type":18,"tag":306,"props":1959,"children":1960},{"class":308,"line":563},[1961],{"type":18,"tag":306,"props":1962,"children":1963},{"class":348},[1964],{"type":24,"value":1965},"# Define Nonlinear model\n",{"type":18,"tag":306,"props":1967,"children":1968},{"class":308,"line":572},[1969],{"type":18,"tag":306,"props":1970,"children":1971},{"class":348},[1972],{"type":24,"value":1973},"## Rotation Matrix\n",{"type":18,"tag":306,"props":1975,"children":1976},{"class":308,"line":599},[1977,1982,1986],{"type":18,"tag":306,"props":1978,"children":1979},{"class":319},[1980],{"type":24,"value":1981},"rot_mat ",{"type":18,"tag":306,"props":1983,"children":1984},{"class":313},[1985],{"type":24,"value":365},{"type":18,"tag":306,"props":1987,"children":1988},{"class":319},[1989],{"type":24,"value":1990}," ca.vertcat(\n",{"type":18,"tag":306,"props":1992,"children":1993},{"class":308,"line":638},[1994,1999,2003],{"type":18,"tag":306,"props":1995,"children":1996},{"class":319},[1997],{"type":24,"value":1998},"    ca.horzcat(ca.cos(theta), ca.sin(theta), ",{"type":18,"tag":306,"props":2000,"children":2001},{"class":373},[2002],{"type":24,"value":610},{"type":18,"tag":306,"props":2004,"children":2005},{"class":319},[2006],{"type":24,"value":2007},"),\n",{"type":18,"tag":306,"props":2009,"children":2010},{"class":308,"line":671},[2011,2016,2021,2026,2030],{"type":18,"tag":306,"props":2012,"children":2013},{"class":319},[2014],{"type":24,"value":2015},"    ca.horzcat(",{"type":18,"tag":306,"props":2017,"children":2018},{"class":313},[2019],{"type":24,"value":2020},"-",{"type":18,"tag":306,"props":2022,"children":2023},{"class":319},[2024],{"type":24,"value":2025},"ca.sin(theta), ca.cos(theta), ",{"type":18,"tag":306,"props":2027,"children":2028},{"class":373},[2029],{"type":24,"value":610},{"type":18,"tag":306,"props":2031,"children":2032},{"class":319},[2033],{"type":24,"value":2007},{"type":18,"tag":306,"props":2035,"children":2036},{"class":308,"line":689},[2037,2041,2045,2050,2054,2058,2062],{"type":18,"tag":306,"props":2038,"children":2039},{"class":319},[2040],{"type":24,"value":2015},{"type":18,"tag":306,"props":2042,"children":2043},{"class":373},[2044],{"type":24,"value":610},{"type":18,"tag":306,"props":2046,"children":2047},{"class":319},[2048],{"type":24,"value":2049},", ",{"type":18,"tag":306,"props":2051,"children":2052},{"class":373},[2053],{"type":24,"value":610},{"type":18,"tag":306,"props":2055,"children":2056},{"class":319},[2057],{"type":24,"value":2049},{"type":18,"tag":306,"props":2059,"children":2060},{"class":373},[2061],{"type":24,"value":681},{"type":18,"tag":306,"props":2063,"children":2064},{"class":319},[2065],{"type":24,"value":1736},{"type":18,"tag":306,"props":2067,"children":2068},{"class":308,"line":698},[2069],{"type":18,"tag":306,"props":2070,"children":2071},{"class":319},[2072],{"type":24,"value":1736},{"type":18,"tag":306,"props":2074,"children":2075},{"class":308,"line":706},[2076],{"type":18,"tag":306,"props":2077,"children":2078},{},[2079],{"type":24,"value":341},{"type":18,"tag":306,"props":2081,"children":2082},{"class":308,"line":739},[2083,2088,2092,2097,2101],{"type":18,"tag":306,"props":2084,"children":2085},{"class":319},[2086],{"type":24,"value":2087},"vx ",{"type":18,"tag":306,"props":2089,"children":2090},{"class":313},[2091],{"type":24,"value":365},{"type":18,"tag":306,"props":2093,"children":2094},{"class":319},[2095],{"type":24,"value":2096}," u1 ",{"type":18,"tag":306,"props":2098,"children":2099},{"class":313},[2100],{"type":24,"value":620},{"type":18,"tag":306,"props":2102,"children":2103},{"class":319},[2104],{"type":24,"value":2105}," ca.cos(theta)\n",{"type":18,"tag":306,"props":2107,"children":2108},{"class":308,"line":757},[2109,2114,2118,2122,2126],{"type":18,"tag":306,"props":2110,"children":2111},{"class":319},[2112],{"type":24,"value":2113},"vy ",{"type":18,"tag":306,"props":2115,"children":2116},{"class":313},[2117],{"type":24,"value":365},{"type":18,"tag":306,"props":2119,"children":2120},{"class":319},[2121],{"type":24,"value":2096},{"type":18,"tag":306,"props":2123,"children":2124},{"class":313},[2125],{"type":24,"value":620},{"type":18,"tag":306,"props":2127,"children":2128},{"class":319},[2129],{"type":24,"value":2130}," ca.sin(theta)\n",{"type":18,"tag":306,"props":2132,"children":2133},{"class":308,"line":903},[2134,2139,2143],{"type":18,"tag":306,"props":2135,"children":2136},{"class":319},[2137],{"type":24,"value":2138},"vyaw ",{"type":18,"tag":306,"props":2140,"children":2141},{"class":313},[2142],{"type":24,"value":365},{"type":18,"tag":306,"props":2144,"children":2145},{"class":319},[2146],{"type":24,"value":2147}," u2\n",{"type":18,"tag":306,"props":2149,"children":2150},{"class":308,"line":1041},[2151],{"type":18,"tag":306,"props":2152,"children":2153},{},[2154],{"type":24,"value":341},{"type":18,"tag":306,"props":2156,"children":2157},{"class":308,"line":1132},[2158,2163,2167],{"type":18,"tag":306,"props":2159,"children":2160},{"class":319},[2161],{"type":24,"value":2162},"rhs ",{"type":18,"tag":306,"props":2164,"children":2165},{"class":313},[2166],{"type":24,"value":365},{"type":18,"tag":306,"props":2168,"children":2169},{"class":319},[2170],{"type":24,"value":2171}," ca.vertcat(vx, vy, vyaw)\n",{"type":18,"tag":306,"props":2173,"children":2174},{"class":308,"line":1140},[2175],{"type":18,"tag":306,"props":2176,"children":2177},{"class":348},[2178],{"type":24,"value":2179},"## Define mapped nonlinear function f(x,u) -> rhs\n",{"type":18,"tag":306,"props":2181,"children":2182},{"class":308,"line":1154},[2183,2187,2191,2196,2201],{"type":18,"tag":306,"props":2184,"children":2185},{"class":319},[2186],{"type":24,"value":578},{"type":18,"tag":306,"props":2188,"children":2189},{"class":313},[2190],{"type":24,"value":365},{"type":18,"tag":306,"props":2192,"children":2193},{"class":319},[2194],{"type":24,"value":2195}," ca.Function(",{"type":18,"tag":306,"props":2197,"children":2198},{"class":1728},[2199],{"type":24,"value":2200},"'f'",{"type":18,"tag":306,"props":2202,"children":2203},{"class":319},[2204],{"type":24,"value":2205},", [states, controls], [rhs])",{"type":18,"tag":27,"props":2207,"children":2208},{},[2209],{"type":24,"value":2210},"Declare symbolic matrix",{"type":18,"tag":291,"props":2212,"children":2215},{"className":2213,"code":2214,"language":296,"meta":8},[294],"X = ca.SX.sym('X', num_states, prediction_horizons + 1)\nX_ref = ca.SX.sym('X_ref', num_states, prediction_horizons + 1)\nU = ca.SX.sym('U', num_controls, prediction_horizons)\nU_ref = ca.SX.sym('U_ref', num_controls, prediction_horizons)\n",[2216],{"type":18,"tag":299,"props":2217,"children":2218},{},[2219],{"type":18,"tag":291,"props":2220,"children":2221},{"__ignoreMap":8},[2222,2272,2321,2355],{"type":18,"tag":306,"props":2223,"children":2224},{"class":308,"line":309},[2225,2230,2234,2238,2242,2246,2251,2256,2260,2264,2268],{"type":18,"tag":306,"props":2226,"children":2227},{"class":319},[2228],{"type":24,"value":2229},"X ",{"type":18,"tag":306,"props":2231,"children":2232},{"class":313},[2233],{"type":24,"value":365},{"type":18,"tag":306,"props":2235,"children":2236},{"class":319},[2237],{"type":24,"value":1715},{"type":18,"tag":306,"props":2239,"children":2240},{"class":373},[2241],{"type":24,"value":1720},{"type":18,"tag":306,"props":2243,"children":2244},{"class":319},[2245],{"type":24,"value":1725},{"type":18,"tag":306,"props":2247,"children":2248},{"class":1728},[2249],{"type":24,"value":2250},"'X'",{"type":18,"tag":306,"props":2252,"children":2253},{"class":319},[2254],{"type":24,"value":2255},", num_states, prediction_horizons ",{"type":18,"tag":306,"props":2257,"children":2258},{"class":313},[2259],{"type":24,"value":777},{"type":18,"tag":306,"props":2261,"children":2262},{"class":319},[2263],{"type":24,"value":370},{"type":18,"tag":306,"props":2265,"children":2266},{"class":373},[2267],{"type":24,"value":681},{"type":18,"tag":306,"props":2269,"children":2270},{"class":319},[2271],{"type":24,"value":1736},{"type":18,"tag":306,"props":2273,"children":2274},{"class":308,"line":335},[2275,2280,2284,2288,2292,2296,2301,2305,2309,2313,2317],{"type":18,"tag":306,"props":2276,"children":2277},{"class":319},[2278],{"type":24,"value":2279},"X_ref ",{"type":18,"tag":306,"props":2281,"children":2282},{"class":313},[2283],{"type":24,"value":365},{"type":18,"tag":306,"props":2285,"children":2286},{"class":319},[2287],{"type":24,"value":1715},{"type":18,"tag":306,"props":2289,"children":2290},{"class":373},[2291],{"type":24,"value":1720},{"type":18,"tag":306,"props":2293,"children":2294},{"class":319},[2295],{"type":24,"value":1725},{"type":18,"tag":306,"props":2297,"children":2298},{"class":1728},[2299],{"type":24,"value":2300},"'X_ref'",{"type":18,"tag":306,"props":2302,"children":2303},{"class":319},[2304],{"type":24,"value":2255},{"type":18,"tag":306,"props":2306,"children":2307},{"class":313},[2308],{"type":24,"value":777},{"type":18,"tag":306,"props":2310,"children":2311},{"class":319},[2312],{"type":24,"value":370},{"type":18,"tag":306,"props":2314,"children":2315},{"class":373},[2316],{"type":24,"value":681},{"type":18,"tag":306,"props":2318,"children":2319},{"class":319},[2320],{"type":24,"value":1736},{"type":18,"tag":306,"props":2322,"children":2323},{"class":308,"line":344},[2324,2329,2333,2337,2341,2345,2350],{"type":18,"tag":306,"props":2325,"children":2326},{"class":319},[2327],{"type":24,"value":2328},"U ",{"type":18,"tag":306,"props":2330,"children":2331},{"class":313},[2332],{"type":24,"value":365},{"type":18,"tag":306,"props":2334,"children":2335},{"class":319},[2336],{"type":24,"value":1715},{"type":18,"tag":306,"props":2338,"children":2339},{"class":373},[2340],{"type":24,"value":1720},{"type":18,"tag":306,"props":2342,"children":2343},{"class":319},[2344],{"type":24,"value":1725},{"type":18,"tag":306,"props":2346,"children":2347},{"class":1728},[2348],{"type":24,"value":2349},"'U'",{"type":18,"tag":306,"props":2351,"children":2352},{"class":319},[2353],{"type":24,"value":2354},", num_controls, prediction_horizons)\n",{"type":18,"tag":306,"props":2356,"children":2357},{"class":308,"line":354},[2358,2363,2367,2371,2375,2379,2384],{"type":18,"tag":306,"props":2359,"children":2360},{"class":319},[2361],{"type":24,"value":2362},"U_ref ",{"type":18,"tag":306,"props":2364,"children":2365},{"class":313},[2366],{"type":24,"value":365},{"type":18,"tag":306,"props":2368,"children":2369},{"class":319},[2370],{"type":24,"value":1715},{"type":18,"tag":306,"props":2372,"children":2373},{"class":373},[2374],{"type":24,"value":1720},{"type":18,"tag":306,"props":2376,"children":2377},{"class":319},[2378],{"type":24,"value":1725},{"type":18,"tag":306,"props":2380,"children":2381},{"class":1728},[2382],{"type":24,"value":2383},"'U_ref'",{"type":18,"tag":306,"props":2385,"children":2386},{"class":319},[2387],{"type":24,"value":2388},", num_controls, prediction_horizons)",{"type":18,"tag":27,"props":2390,"children":2391},{},[2392,2394,2398],{"type":24,"value":2393},"Define nonlinear programming and options for ",{"type":18,"tag":1629,"props":2395,"children":2396},{},[2397],{"type":24,"value":1633},{"type":24,"value":2399},"\nnlp_prob = {\n'f': cost_fn,\n'x': opt_var,\n'p': opt_dec,\n'g': g\n}",{"type":18,"tag":27,"props":2401,"children":2402},{},[2403],{"type":24,"value":2404},"nlp_opts = {\n'ipopt.max_iter': 5000,\n'ipopt.print_level': 0,\n'ipopt.acceptable_tol': 1e-6,\n'ipopt.acceptable_obj_change_tol': 1e-4,\n'print_time': 0\n}",{"type":18,"tag":27,"props":2406,"children":2407},{},[2408],{"type":24,"value":2409},"Determine boundary and constraint for our optimizer",{"type":18,"tag":291,"props":2411,"children":2414},{"className":2412,"code":2413,"language":296,"meta":8},[294],"lbx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\nubx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\n\nlbx[0: num_states * (prediction_horizons + 1): num_states] = x_min\nlbx[1: num_states * (prediction_horizons + 1): num_states] = y_min\nlbx[2: num_states * (prediction_horizons + 1): num_states] = theta_min\n\nubx[0: num_states * (prediction_horizons + 1): num_states] = x_max\nubx[1: num_states * (prediction_horizons + 1): num_states] = y_max\nubx[2: num_states * (prediction_horizons + 1): num_states] = theta_max\n\nlbx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\nlbx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\n\nubx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\nubx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\n\nargs = {\n    'lbg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'ubg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'lbx': lbx,\n    'ubx': ubx\n}\n",[2415],{"type":18,"tag":299,"props":2416,"children":2417},{},[2418],{"type":18,"tag":291,"props":2419,"children":2420},{"__ignoreMap":8},[2421,2499,2571,2578,2629,2677,2725,2732,2781,2829,2877,2884,2967,3062,3069,3150,3245,3252,3269,3328,3384,3401,3418],{"type":18,"tag":306,"props":2422,"children":2423},{"class":308,"line":309},[2424,2429,2433,2437,2442,2447,2451,2456,2460,2464,2468,2472,2476,2481,2485,2490,2494],{"type":18,"tag":306,"props":2425,"children":2426},{"class":319},[2427],{"type":24,"value":2428},"lbx ",{"type":18,"tag":306,"props":2430,"children":2431},{"class":313},[2432],{"type":24,"value":365},{"type":18,"tag":306,"props":2434,"children":2435},{"class":319},[2436],{"type":24,"value":1715},{"type":18,"tag":306,"props":2438,"children":2439},{"class":373},[2440],{"type":24,"value":2441},"DM",{"type":18,"tag":306,"props":2443,"children":2444},{"class":319},[2445],{"type":24,"value":2446},".zeros((num_states ",{"type":18,"tag":306,"props":2448,"children":2449},{"class":313},[2450],{"type":24,"value":620},{"type":18,"tag":306,"props":2452,"children":2453},{"class":319},[2454],{"type":24,"value":2455}," (prediction_horizons ",{"type":18,"tag":306,"props":2457,"children":2458},{"class":313},[2459],{"type":24,"value":777},{"type":18,"tag":306,"props":2461,"children":2462},{"class":319},[2463],{"type":24,"value":370},{"type":18,"tag":306,"props":2465,"children":2466},{"class":373},[2467],{"type":24,"value":681},{"type":18,"tag":306,"props":2469,"children":2470},{"class":319},[2471],{"type":24,"value":800},{"type":18,"tag":306,"props":2473,"children":2474},{"class":313},[2475],{"type":24,"value":777},{"type":18,"tag":306,"props":2477,"children":2478},{"class":319},[2479],{"type":24,"value":2480}," num_controls ",{"type":18,"tag":306,"props":2482,"children":2483},{"class":313},[2484],{"type":24,"value":620},{"type":18,"tag":306,"props":2486,"children":2487},{"class":319},[2488],{"type":24,"value":2489}," prediction_horizons, ",{"type":18,"tag":306,"props":2491,"children":2492},{"class":373},[2493],{"type":24,"value":681},{"type":18,"tag":306,"props":2495,"children":2496},{"class":319},[2497],{"type":24,"value":2498},"))\n",{"type":18,"tag":306,"props":2500,"children":2501},{"class":308,"line":335},[2502,2507,2511,2515,2519,2523,2527,2531,2535,2539,2543,2547,2551,2555,2559,2563,2567],{"type":18,"tag":306,"props":2503,"children":2504},{"class":319},[2505],{"type":24,"value":2506},"ubx ",{"type":18,"tag":306,"props":2508,"children":2509},{"class":313},[2510],{"type":24,"value":365},{"type":18,"tag":306,"props":2512,"children":2513},{"class":319},[2514],{"type":24,"value":1715},{"type":18,"tag":306,"props":2516,"children":2517},{"class":373},[2518],{"type":24,"value":2441},{"type":18,"tag":306,"props":2520,"children":2521},{"class":319},[2522],{"type":24,"value":2446},{"type":18,"tag":306,"props":2524,"children":2525},{"class":313},[2526],{"type":24,"value":620},{"type":18,"tag":306,"props":2528,"children":2529},{"class":319},[2530],{"type":24,"value":2455},{"type":18,"tag":306,"props":2532,"children":2533},{"class":313},[2534],{"type":24,"value":777},{"type":18,"tag":306,"props":2536,"children":2537},{"class":319},[2538],{"type":24,"value":370},{"type":18,"tag":306,"props":2540,"children":2541},{"class":373},[2542],{"type":24,"value":681},{"type":18,"tag":306,"props":2544,"children":2545},{"class":319},[2546],{"type":24,"value":800},{"type":18,"tag":306,"props":2548,"children":2549},{"class":313},[2550],{"type":24,"value":777},{"type":18,"tag":306,"props":2552,"children":2553},{"class":319},[2554],{"type":24,"value":2480},{"type":18,"tag":306,"props":2556,"children":2557},{"class":313},[2558],{"type":24,"value":620},{"type":18,"tag":306,"props":2560,"children":2561},{"class":319},[2562],{"type":24,"value":2489},{"type":18,"tag":306,"props":2564,"children":2565},{"class":373},[2566],{"type":24,"value":681},{"type":18,"tag":306,"props":2568,"children":2569},{"class":319},[2570],{"type":24,"value":2498},{"type":18,"tag":306,"props":2572,"children":2573},{"class":308,"line":344},[2574],{"type":18,"tag":306,"props":2575,"children":2576},{},[2577],{"type":24,"value":341},{"type":18,"tag":306,"props":2579,"children":2580},{"class":308,"line":354},[2581,2586,2590,2595,2599,2603,2607,2611,2615,2620,2624],{"type":18,"tag":306,"props":2582,"children":2583},{"class":319},[2584],{"type":24,"value":2585},"lbx[",{"type":18,"tag":306,"props":2587,"children":2588},{"class":373},[2589],{"type":24,"value":610},{"type":18,"tag":306,"props":2591,"children":2592},{"class":319},[2593],{"type":24,"value":2594},": num_states ",{"type":18,"tag":306,"props":2596,"children":2597},{"class":313},[2598],{"type":24,"value":620},{"type":18,"tag":306,"props":2600,"children":2601},{"class":319},[2602],{"type":24,"value":2455},{"type":18,"tag":306,"props":2604,"children":2605},{"class":313},[2606],{"type":24,"value":777},{"type":18,"tag":306,"props":2608,"children":2609},{"class":319},[2610],{"type":24,"value":370},{"type":18,"tag":306,"props":2612,"children":2613},{"class":373},[2614],{"type":24,"value":681},{"type":18,"tag":306,"props":2616,"children":2617},{"class":319},[2618],{"type":24,"value":2619},"): num_states] ",{"type":18,"tag":306,"props":2621,"children":2622},{"class":313},[2623],{"type":24,"value":365},{"type":18,"tag":306,"props":2625,"children":2626},{"class":319},[2627],{"type":24,"value":2628}," x_min\n",{"type":18,"tag":306,"props":2630,"children":2631},{"class":308,"line":379},[2632,2636,2640,2644,2648,2652,2656,2660,2664,2668,2672],{"type":18,"tag":306,"props":2633,"children":2634},{"class":319},[2635],{"type":24,"value":2585},{"type":18,"tag":306,"props":2637,"children":2638},{"class":373},[2639],{"type":24,"value":681},{"type":18,"tag":306,"props":2641,"children":2642},{"class":319},[2643],{"type":24,"value":2594},{"type":18,"tag":306,"props":2645,"children":2646},{"class":313},[2647],{"type":24,"value":620},{"type":18,"tag":306,"props":2649,"children":2650},{"class":319},[2651],{"type":24,"value":2455},{"type":18,"tag":306,"props":2653,"children":2654},{"class":313},[2655],{"type":24,"value":777},{"type":18,"tag":306,"props":2657,"children":2658},{"class":319},[2659],{"type":24,"value":370},{"type":18,"tag":306,"props":2661,"children":2662},{"class":373},[2663],{"type":24,"value":681},{"type":18,"tag":306,"props":2665,"children":2666},{"class":319},[2667],{"type":24,"value":2619},{"type":18,"tag":306,"props":2669,"children":2670},{"class":313},[2671],{"type":24,"value":365},{"type":18,"tag":306,"props":2673,"children":2674},{"class":319},[2675],{"type":24,"value":2676}," y_min\n",{"type":18,"tag":306,"props":2678,"children":2679},{"class":308,"line":388},[2680,2684,2688,2692,2696,2700,2704,2708,2712,2716,2720],{"type":18,"tag":306,"props":2681,"children":2682},{"class":319},[2683],{"type":24,"value":2585},{"type":18,"tag":306,"props":2685,"children":2686},{"class":373},[2687],{"type":24,"value":630},{"type":18,"tag":306,"props":2689,"children":2690},{"class":319},[2691],{"type":24,"value":2594},{"type":18,"tag":306,"props":2693,"children":2694},{"class":313},[2695],{"type":24,"value":620},{"type":18,"tag":306,"props":2697,"children":2698},{"class":319},[2699],{"type":24,"value":2455},{"type":18,"tag":306,"props":2701,"children":2702},{"class":313},[2703],{"type":24,"value":777},{"type":18,"tag":306,"props":2705,"children":2706},{"class":319},[2707],{"type":24,"value":370},{"type":18,"tag":306,"props":2709,"children":2710},{"class":373},[2711],{"type":24,"value":681},{"type":18,"tag":306,"props":2713,"children":2714},{"class":319},[2715],{"type":24,"value":2619},{"type":18,"tag":306,"props":2717,"children":2718},{"class":313},[2719],{"type":24,"value":365},{"type":18,"tag":306,"props":2721,"children":2722},{"class":319},[2723],{"type":24,"value":2724}," theta_min\n",{"type":18,"tag":306,"props":2726,"children":2727},{"class":308,"line":410},[2728],{"type":18,"tag":306,"props":2729,"children":2730},{},[2731],{"type":24,"value":341},{"type":18,"tag":306,"props":2733,"children":2734},{"class":308,"line":419},[2735,2740,2744,2748,2752,2756,2760,2764,2768,2772,2776],{"type":18,"tag":306,"props":2736,"children":2737},{"class":319},[2738],{"type":24,"value":2739},"ubx[",{"type":18,"tag":306,"props":2741,"children":2742},{"class":373},[2743],{"type":24,"value":610},{"type":18,"tag":306,"props":2745,"children":2746},{"class":319},[2747],{"type":24,"value":2594},{"type":18,"tag":306,"props":2749,"children":2750},{"class":313},[2751],{"type":24,"value":620},{"type":18,"tag":306,"props":2753,"children":2754},{"class":319},[2755],{"type":24,"value":2455},{"type":18,"tag":306,"props":2757,"children":2758},{"class":313},[2759],{"type":24,"value":777},{"type":18,"tag":306,"props":2761,"children":2762},{"class":319},[2763],{"type":24,"value":370},{"type":18,"tag":306,"props":2765,"children":2766},{"class":373},[2767],{"type":24,"value":681},{"type":18,"tag":306,"props":2769,"children":2770},{"class":319},[2771],{"type":24,"value":2619},{"type":18,"tag":306,"props":2773,"children":2774},{"class":313},[2775],{"type":24,"value":365},{"type":18,"tag":306,"props":2777,"children":2778},{"class":319},[2779],{"type":24,"value":2780}," x_max\n",{"type":18,"tag":306,"props":2782,"children":2783},{"class":308,"line":441},[2784,2788,2792,2796,2800,2804,2808,2812,2816,2820,2824],{"type":18,"tag":306,"props":2785,"children":2786},{"class":319},[2787],{"type":24,"value":2739},{"type":18,"tag":306,"props":2789,"children":2790},{"class":373},[2791],{"type":24,"value":681},{"type":18,"tag":306,"props":2793,"children":2794},{"class":319},[2795],{"type":24,"value":2594},{"type":18,"tag":306,"props":2797,"children":2798},{"class":313},[2799],{"type":24,"value":620},{"type":18,"tag":306,"props":2801,"children":2802},{"class":319},[2803],{"type":24,"value":2455},{"type":18,"tag":306,"props":2805,"children":2806},{"class":313},[2807],{"type":24,"value":777},{"type":18,"tag":306,"props":2809,"children":2810},{"class":319},[2811],{"type":24,"value":370},{"type":18,"tag":306,"props":2813,"children":2814},{"class":373},[2815],{"type":24,"value":681},{"type":18,"tag":306,"props":2817,"children":2818},{"class":319},[2819],{"type":24,"value":2619},{"type":18,"tag":306,"props":2821,"children":2822},{"class":313},[2823],{"type":24,"value":365},{"type":18,"tag":306,"props":2825,"children":2826},{"class":319},[2827],{"type":24,"value":2828}," y_max\n",{"type":18,"tag":306,"props":2830,"children":2831},{"class":308,"line":462},[2832,2836,2840,2844,2848,2852,2856,2860,2864,2868,2872],{"type":18,"tag":306,"props":2833,"children":2834},{"class":319},[2835],{"type":24,"value":2739},{"type":18,"tag":306,"props":2837,"children":2838},{"class":373},[2839],{"type":24,"value":630},{"type":18,"tag":306,"props":2841,"children":2842},{"class":319},[2843],{"type":24,"value":2594},{"type":18,"tag":306,"props":2845,"children":2846},{"class":313},[2847],{"type":24,"value":620},{"type":18,"tag":306,"props":2849,"children":2850},{"class":319},[2851],{"type":24,"value":2455},{"type":18,"tag":306,"props":2853,"children":2854},{"class":313},[2855],{"type":24,"value":777},{"type":18,"tag":306,"props":2857,"children":2858},{"class":319},[2859],{"type":24,"value":370},{"type":18,"tag":306,"props":2861,"children":2862},{"class":373},[2863],{"type":24,"value":681},{"type":18,"tag":306,"props":2865,"children":2866},{"class":319},[2867],{"type":24,"value":2619},{"type":18,"tag":306,"props":2869,"children":2870},{"class":313},[2871],{"type":24,"value":365},{"type":18,"tag":306,"props":2873,"children":2874},{"class":319},[2875],{"type":24,"value":2876}," theta_max\n",{"type":18,"tag":306,"props":2878,"children":2879},{"class":308,"line":483},[2880],{"type":18,"tag":306,"props":2881,"children":2882},{},[2883],{"type":24,"value":341},{"type":18,"tag":306,"props":2885,"children":2886},{"class":308,"line":492},[2887,2892,2896,2900,2904,2908,2912,2917,2921,2925,2929,2933,2937,2941,2945,2949,2953,2958,2962],{"type":18,"tag":306,"props":2888,"children":2889},{"class":319},[2890],{"type":24,"value":2891},"lbx[num_states ",{"type":18,"tag":306,"props":2893,"children":2894},{"class":313},[2895],{"type":24,"value":620},{"type":18,"tag":306,"props":2897,"children":2898},{"class":319},[2899],{"type":24,"value":2455},{"type":18,"tag":306,"props":2901,"children":2902},{"class":313},[2903],{"type":24,"value":777},{"type":18,"tag":306,"props":2905,"children":2906},{"class":319},[2907],{"type":24,"value":370},{"type":18,"tag":306,"props":2909,"children":2910},{"class":373},[2911],{"type":24,"value":681},{"type":18,"tag":306,"props":2913,"children":2914},{"class":319},[2915],{"type":24,"value":2916},"): num_states ",{"type":18,"tag":306,"props":2918,"children":2919},{"class":313},[2920],{"type":24,"value":620},{"type":18,"tag":306,"props":2922,"children":2923},{"class":319},[2924],{"type":24,"value":2455},{"type":18,"tag":306,"props":2926,"children":2927},{"class":313},[2928],{"type":24,"value":777},{"type":18,"tag":306,"props":2930,"children":2931},{"class":319},[2932],{"type":24,"value":370},{"type":18,"tag":306,"props":2934,"children":2935},{"class":373},[2936],{"type":24,"value":681},{"type":18,"tag":306,"props":2938,"children":2939},{"class":319},[2940],{"type":24,"value":800},{"type":18,"tag":306,"props":2942,"children":2943},{"class":313},[2944],{"type":24,"value":777},{"type":18,"tag":306,"props":2946,"children":2947},{"class":319},[2948],{"type":24,"value":2480},{"type":18,"tag":306,"props":2950,"children":2951},{"class":313},[2952],{"type":24,"value":620},{"type":18,"tag":306,"props":2954,"children":2955},{"class":319},[2956],{"type":24,"value":2957}," prediction_horizons: num_controls] ",{"type":18,"tag":306,"props":2959,"children":2960},{"class":313},[2961],{"type":24,"value":365},{"type":18,"tag":306,"props":2963,"children":2964},{"class":319},[2965],{"type":24,"value":2966}," u_min\n",{"type":18,"tag":306,"props":2968,"children":2969},{"class":308,"line":523},[2970,2974,2978,2982,2986,2990,2994,2998,3002,3006,3010,3014,3018,3022,3026,3030,3034,3038,3042,3046,3050,3054,3058],{"type":18,"tag":306,"props":2971,"children":2972},{"class":319},[2973],{"type":24,"value":2891},{"type":18,"tag":306,"props":2975,"children":2976},{"class":313},[2977],{"type":24,"value":620},{"type":18,"tag":306,"props":2979,"children":2980},{"class":319},[2981],{"type":24,"value":2455},{"type":18,"tag":306,"props":2983,"children":2984},{"class":313},[2985],{"type":24,"value":777},{"type":18,"tag":306,"props":2987,"children":2988},{"class":319},[2989],{"type":24,"value":370},{"type":18,"tag":306,"props":2991,"children":2992},{"class":373},[2993],{"type":24,"value":681},{"type":18,"tag":306,"props":2995,"children":2996},{"class":319},[2997],{"type":24,"value":800},{"type":18,"tag":306,"props":2999,"children":3000},{"class":313},[3001],{"type":24,"value":777},{"type":18,"tag":306,"props":3003,"children":3004},{"class":319},[3005],{"type":24,"value":370},{"type":18,"tag":306,"props":3007,"children":3008},{"class":373},[3009],{"type":24,"value":681},{"type":18,"tag":306,"props":3011,"children":3012},{"class":319},[3013],{"type":24,"value":2594},{"type":18,"tag":306,"props":3015,"children":3016},{"class":313},[3017],{"type":24,"value":620},{"type":18,"tag":306,"props":3019,"children":3020},{"class":319},[3021],{"type":24,"value":2455},{"type":18,"tag":306,"props":3023,"children":3024},{"class":313},[3025],{"type":24,"value":777},{"type":18,"tag":306,"props":3027,"children":3028},{"class":319},[3029],{"type":24,"value":370},{"type":18,"tag":306,"props":3031,"children":3032},{"class":373},[3033],{"type":24,"value":681},{"type":18,"tag":306,"props":3035,"children":3036},{"class":319},[3037],{"type":24,"value":800},{"type":18,"tag":306,"props":3039,"children":3040},{"class":313},[3041],{"type":24,"value":777},{"type":18,"tag":306,"props":3043,"children":3044},{"class":319},[3045],{"type":24,"value":2480},{"type":18,"tag":306,"props":3047,"children":3048},{"class":313},[3049],{"type":24,"value":620},{"type":18,"tag":306,"props":3051,"children":3052},{"class":319},[3053],{"type":24,"value":2957},{"type":18,"tag":306,"props":3055,"children":3056},{"class":313},[3057],{"type":24,"value":365},{"type":18,"tag":306,"props":3059,"children":3060},{"class":319},[3061],{"type":24,"value":2966},{"type":18,"tag":306,"props":3063,"children":3064},{"class":308,"line":554},[3065],{"type":18,"tag":306,"props":3066,"children":3067},{},[3068],{"type":24,"value":341},{"type":18,"tag":306,"props":3070,"children":3071},{"class":308,"line":563},[3072,3077,3081,3085,3089,3093,3097,3101,3105,3109,3113,3117,3121,3125,3129,3133,3137,3141,3145],{"type":18,"tag":306,"props":3073,"children":3074},{"class":319},[3075],{"type":24,"value":3076},"ubx[num_states ",{"type":18,"tag":306,"props":3078,"children":3079},{"class":313},[3080],{"type":24,"value":620},{"type":18,"tag":306,"props":3082,"children":3083},{"class":319},[3084],{"type":24,"value":2455},{"type":18,"tag":306,"props":3086,"children":3087},{"class":313},[3088],{"type":24,"value":777},{"type":18,"tag":306,"props":3090,"children":3091},{"class":319},[3092],{"type":24,"value":370},{"type":18,"tag":306,"props":3094,"children":3095},{"class":373},[3096],{"type":24,"value":681},{"type":18,"tag":306,"props":3098,"children":3099},{"class":319},[3100],{"type":24,"value":2916},{"type":18,"tag":306,"props":3102,"children":3103},{"class":313},[3104],{"type":24,"value":620},{"type":18,"tag":306,"props":3106,"children":3107},{"class":319},[3108],{"type":24,"value":2455},{"type":18,"tag":306,"props":3110,"children":3111},{"class":313},[3112],{"type":24,"value":777},{"type":18,"tag":306,"props":3114,"children":3115},{"class":319},[3116],{"type":24,"value":370},{"type":18,"tag":306,"props":3118,"children":3119},{"class":373},[3120],{"type":24,"value":681},{"type":18,"tag":306,"props":3122,"children":3123},{"class":319},[3124],{"type":24,"value":800},{"type":18,"tag":306,"props":3126,"children":3127},{"class":313},[3128],{"type":24,"value":777},{"type":18,"tag":306,"props":3130,"children":3131},{"class":319},[3132],{"type":24,"value":2480},{"type":18,"tag":306,"props":3134,"children":3135},{"class":313},[3136],{"type":24,"value":620},{"type":18,"tag":306,"props":3138,"children":3139},{"class":319},[3140],{"type":24,"value":2957},{"type":18,"tag":306,"props":3142,"children":3143},{"class":313},[3144],{"type":24,"value":365},{"type":18,"tag":306,"props":3146,"children":3147},{"class":319},[3148],{"type":24,"value":3149}," u_max\n",{"type":18,"tag":306,"props":3151,"children":3152},{"class":308,"line":572},[3153,3157,3161,3165,3169,3173,3177,3181,3185,3189,3193,3197,3201,3205,3209,3213,3217,3221,3225,3229,3233,3237,3241],{"type":18,"tag":306,"props":3154,"children":3155},{"class":319},[3156],{"type":24,"value":3076},{"type":18,"tag":306,"props":3158,"children":3159},{"class":313},[3160],{"type":24,"value":620},{"type":18,"tag":306,"props":3162,"children":3163},{"class":319},[3164],{"type":24,"value":2455},{"type":18,"tag":306,"props":3166,"children":3167},{"class":313},[3168],{"type":24,"value":777},{"type":18,"tag":306,"props":3170,"children":3171},{"class":319},[3172],{"type":24,"value":370},{"type":18,"tag":306,"props":3174,"children":3175},{"class":373},[3176],{"type":24,"value":681},{"type":18,"tag":306,"props":3178,"children":3179},{"class":319},[3180],{"type":24,"value":800},{"type":18,"tag":306,"props":3182,"children":3183},{"class":313},[3184],{"type":24,"value":777},{"type":18,"tag":306,"props":3186,"children":3187},{"class":319},[3188],{"type":24,"value":370},{"type":18,"tag":306,"props":3190,"children":3191},{"class":373},[3192],{"type":24,"value":681},{"type":18,"tag":306,"props":3194,"children":3195},{"class":319},[3196],{"type":24,"value":2594},{"type":18,"tag":306,"props":3198,"children":3199},{"class":313},[3200],{"type":24,"value":620},{"type":18,"tag":306,"props":3202,"children":3203},{"class":319},[3204],{"type":24,"value":2455},{"type":18,"tag":306,"props":3206,"children":3207},{"class":313},[3208],{"type":24,"value":777},{"type":18,"tag":306,"props":3210,"children":3211},{"class":319},[3212],{"type":24,"value":370},{"type":18,"tag":306,"props":3214,"children":3215},{"class":373},[3216],{"type":24,"value":681},{"type":18,"tag":306,"props":3218,"children":3219},{"class":319},[3220],{"type":24,"value":800},{"type":18,"tag":306,"props":3222,"children":3223},{"class":313},[3224],{"type":24,"value":777},{"type":18,"tag":306,"props":3226,"children":3227},{"class":319},[3228],{"type":24,"value":2480},{"type":18,"tag":306,"props":3230,"children":3231},{"class":313},[3232],{"type":24,"value":620},{"type":18,"tag":306,"props":3234,"children":3235},{"class":319},[3236],{"type":24,"value":2957},{"type":18,"tag":306,"props":3238,"children":3239},{"class":313},[3240],{"type":24,"value":365},{"type":18,"tag":306,"props":3242,"children":3243},{"class":319},[3244],{"type":24,"value":3149},{"type":18,"tag":306,"props":3246,"children":3247},{"class":308,"line":599},[3248],{"type":18,"tag":306,"props":3249,"children":3250},{},[3251],{"type":24,"value":341},{"type":18,"tag":306,"props":3253,"children":3254},{"class":308,"line":638},[3255,3260,3264],{"type":18,"tag":306,"props":3256,"children":3257},{"class":319},[3258],{"type":24,"value":3259},"args ",{"type":18,"tag":306,"props":3261,"children":3262},{"class":313},[3263],{"type":24,"value":365},{"type":18,"tag":306,"props":3265,"children":3266},{"class":319},[3267],{"type":24,"value":3268}," {\n",{"type":18,"tag":306,"props":3270,"children":3271},{"class":308,"line":671},[3272,3276,3281,3286,3290,3294,3298,3302,3306,3310,3314,3319,3323],{"type":18,"tag":306,"props":3273,"children":3274},{"class":319},[3275],{"type":24,"value":1146},{"type":18,"tag":306,"props":3277,"children":3278},{"class":1728},[3279],{"type":24,"value":3280},"'lbg'",{"type":18,"tag":306,"props":3282,"children":3283},{"class":319},[3284],{"type":24,"value":3285},": ca.",{"type":18,"tag":306,"props":3287,"children":3288},{"class":373},[3289],{"type":24,"value":2441},{"type":18,"tag":306,"props":3291,"children":3292},{"class":319},[3293],{"type":24,"value":2446},{"type":18,"tag":306,"props":3295,"children":3296},{"class":313},[3297],{"type":24,"value":620},{"type":18,"tag":306,"props":3299,"children":3300},{"class":319},[3301],{"type":24,"value":2455},{"type":18,"tag":306,"props":3303,"children":3304},{"class":313},[3305],{"type":24,"value":777},{"type":18,"tag":306,"props":3307,"children":3308},{"class":319},[3309],{"type":24,"value":370},{"type":18,"tag":306,"props":3311,"children":3312},{"class":373},[3313],{"type":24,"value":681},{"type":18,"tag":306,"props":3315,"children":3316},{"class":319},[3317],{"type":24,"value":3318},"), ",{"type":18,"tag":306,"props":3320,"children":3321},{"class":373},[3322],{"type":24,"value":681},{"type":18,"tag":306,"props":3324,"children":3325},{"class":319},[3326],{"type":24,"value":3327},")),\n",{"type":18,"tag":306,"props":3329,"children":3330},{"class":308,"line":689},[3331,3335,3340,3344,3348,3352,3356,3360,3364,3368,3372,3376,3380],{"type":18,"tag":306,"props":3332,"children":3333},{"class":319},[3334],{"type":24,"value":1146},{"type":18,"tag":306,"props":3336,"children":3337},{"class":1728},[3338],{"type":24,"value":3339},"'ubg'",{"type":18,"tag":306,"props":3341,"children":3342},{"class":319},[3343],{"type":24,"value":3285},{"type":18,"tag":306,"props":3345,"children":3346},{"class":373},[3347],{"type":24,"value":2441},{"type":18,"tag":306,"props":3349,"children":3350},{"class":319},[3351],{"type":24,"value":2446},{"type":18,"tag":306,"props":3353,"children":3354},{"class":313},[3355],{"type":24,"value":620},{"type":18,"tag":306,"props":3357,"children":3358},{"class":319},[3359],{"type":24,"value":2455},{"type":18,"tag":306,"props":3361,"children":3362},{"class":313},[3363],{"type":24,"value":777},{"type":18,"tag":306,"props":3365,"children":3366},{"class":319},[3367],{"type":24,"value":370},{"type":18,"tag":306,"props":3369,"children":3370},{"class":373},[3371],{"type":24,"value":681},{"type":18,"tag":306,"props":3373,"children":3374},{"class":319},[3375],{"type":24,"value":3318},{"type":18,"tag":306,"props":3377,"children":3378},{"class":373},[3379],{"type":24,"value":681},{"type":18,"tag":306,"props":3381,"children":3382},{"class":319},[3383],{"type":24,"value":3327},{"type":18,"tag":306,"props":3385,"children":3386},{"class":308,"line":698},[3387,3391,3396],{"type":18,"tag":306,"props":3388,"children":3389},{"class":319},[3390],{"type":24,"value":1146},{"type":18,"tag":306,"props":3392,"children":3393},{"class":1728},[3394],{"type":24,"value":3395},"'lbx'",{"type":18,"tag":306,"props":3397,"children":3398},{"class":319},[3399],{"type":24,"value":3400},": lbx,\n",{"type":18,"tag":306,"props":3402,"children":3403},{"class":308,"line":706},[3404,3408,3413],{"type":18,"tag":306,"props":3405,"children":3406},{"class":319},[3407],{"type":24,"value":1146},{"type":18,"tag":306,"props":3409,"children":3410},{"class":1728},[3411],{"type":24,"value":3412},"'ubx'",{"type":18,"tag":306,"props":3414,"children":3415},{"class":319},[3416],{"type":24,"value":3417},": ubx\n",{"type":18,"tag":306,"props":3419,"children":3420},{"class":308,"line":739},[3421],{"type":18,"tag":306,"props":3422,"children":3423},{"class":319},[3424],{"type":24,"value":3425},"}",{"type":18,"tag":27,"props":3427,"children":3428},{},[3429],{"type":24,"value":3430},"Obtain the solution from the solver at eact iteration",{"type":18,"tag":291,"props":3432,"children":3435},{"className":3433,"code":3434,"language":296,"meta":8},[294],"sol = solver(\n            x0=args['x0'],\n            p=args['p'],\n            lbx=args['lbx'],\n            ubx=args['ubx'],\n            lbg=args['lbg'],\n            ubg=args['ubg'],\n        )\n\n        sol_x = ca.reshape(sol['x'][:num_states * (prediction_horizons + 1)], 3, prediction_horizons + 1)\n        sol_u = ca.reshape(sol['x'][num_states * (prediction_horizons + 1):], 2, prediction_horizons)\n",[3436],{"type":18,"tag":299,"props":3437,"children":3438},{},[3439],{"type":18,"tag":291,"props":3440,"children":3441},{"__ignoreMap":8},[3442,3459,3492,3520,3548,3576,3604,3632,3640,3647,3725],{"type":18,"tag":306,"props":3443,"children":3444},{"class":308,"line":309},[3445,3450,3454],{"type":18,"tag":306,"props":3446,"children":3447},{"class":319},[3448],{"type":24,"value":3449},"sol ",{"type":18,"tag":306,"props":3451,"children":3452},{"class":313},[3453],{"type":24,"value":365},{"type":18,"tag":306,"props":3455,"children":3456},{"class":319},[3457],{"type":24,"value":3458}," solver(\n",{"type":18,"tag":306,"props":3460,"children":3461},{"class":308,"line":335},[3462,3467,3473,3477,3482,3487],{"type":18,"tag":306,"props":3463,"children":3464},{"class":319},[3465],{"type":24,"value":3466},"            ",{"type":18,"tag":306,"props":3468,"children":3470},{"class":3469},"ct-657843",[3471],{"type":24,"value":3472},"x0",{"type":18,"tag":306,"props":3474,"children":3475},{"class":313},[3476],{"type":24,"value":365},{"type":18,"tag":306,"props":3478,"children":3479},{"class":319},[3480],{"type":24,"value":3481},"args[",{"type":18,"tag":306,"props":3483,"children":3484},{"class":1728},[3485],{"type":24,"value":3486},"'x0'",{"type":18,"tag":306,"props":3488,"children":3489},{"class":319},[3490],{"type":24,"value":3491},"],\n",{"type":18,"tag":306,"props":3493,"children":3494},{"class":308,"line":344},[3495,3499,3503,3507,3511,3516],{"type":18,"tag":306,"props":3496,"children":3497},{"class":319},[3498],{"type":24,"value":3466},{"type":18,"tag":306,"props":3500,"children":3501},{"class":3469},[3502],{"type":24,"value":27},{"type":18,"tag":306,"props":3504,"children":3505},{"class":313},[3506],{"type":24,"value":365},{"type":18,"tag":306,"props":3508,"children":3509},{"class":319},[3510],{"type":24,"value":3481},{"type":18,"tag":306,"props":3512,"children":3513},{"class":1728},[3514],{"type":24,"value":3515},"'p'",{"type":18,"tag":306,"props":3517,"children":3518},{"class":319},[3519],{"type":24,"value":3491},{"type":18,"tag":306,"props":3521,"children":3522},{"class":308,"line":354},[3523,3527,3532,3536,3540,3544],{"type":18,"tag":306,"props":3524,"children":3525},{"class":319},[3526],{"type":24,"value":3466},{"type":18,"tag":306,"props":3528,"children":3529},{"class":3469},[3530],{"type":24,"value":3531},"lbx",{"type":18,"tag":306,"props":3533,"children":3534},{"class":313},[3535],{"type":24,"value":365},{"type":18,"tag":306,"props":3537,"children":3538},{"class":319},[3539],{"type":24,"value":3481},{"type":18,"tag":306,"props":3541,"children":3542},{"class":1728},[3543],{"type":24,"value":3395},{"type":18,"tag":306,"props":3545,"children":3546},{"class":319},[3547],{"type":24,"value":3491},{"type":18,"tag":306,"props":3549,"children":3550},{"class":308,"line":379},[3551,3555,3560,3564,3568,3572],{"type":18,"tag":306,"props":3552,"children":3553},{"class":319},[3554],{"type":24,"value":3466},{"type":18,"tag":306,"props":3556,"children":3557},{"class":3469},[3558],{"type":24,"value":3559},"ubx",{"type":18,"tag":306,"props":3561,"children":3562},{"class":313},[3563],{"type":24,"value":365},{"type":18,"tag":306,"props":3565,"children":3566},{"class":319},[3567],{"type":24,"value":3481},{"type":18,"tag":306,"props":3569,"children":3570},{"class":1728},[3571],{"type":24,"value":3412},{"type":18,"tag":306,"props":3573,"children":3574},{"class":319},[3575],{"type":24,"value":3491},{"type":18,"tag":306,"props":3577,"children":3578},{"class":308,"line":388},[3579,3583,3588,3592,3596,3600],{"type":18,"tag":306,"props":3580,"children":3581},{"class":319},[3582],{"type":24,"value":3466},{"type":18,"tag":306,"props":3584,"children":3585},{"class":3469},[3586],{"type":24,"value":3587},"lbg",{"type":18,"tag":306,"props":3589,"children":3590},{"class":313},[3591],{"type":24,"value":365},{"type":18,"tag":306,"props":3593,"children":3594},{"class":319},[3595],{"type":24,"value":3481},{"type":18,"tag":306,"props":3597,"children":3598},{"class":1728},[3599],{"type":24,"value":3280},{"type":18,"tag":306,"props":3601,"children":3602},{"class":319},[3603],{"type":24,"value":3491},{"type":18,"tag":306,"props":3605,"children":3606},{"class":308,"line":410},[3607,3611,3616,3620,3624,3628],{"type":18,"tag":306,"props":3608,"children":3609},{"class":319},[3610],{"type":24,"value":3466},{"type":18,"tag":306,"props":3612,"children":3613},{"class":3469},[3614],{"type":24,"value":3615},"ubg",{"type":18,"tag":306,"props":3617,"children":3618},{"class":313},[3619],{"type":24,"value":365},{"type":18,"tag":306,"props":3621,"children":3622},{"class":319},[3623],{"type":24,"value":3481},{"type":18,"tag":306,"props":3625,"children":3626},{"class":1728},[3627],{"type":24,"value":3339},{"type":18,"tag":306,"props":3629,"children":3630},{"class":319},[3631],{"type":24,"value":3491},{"type":18,"tag":306,"props":3633,"children":3634},{"class":308,"line":419},[3635],{"type":18,"tag":306,"props":3636,"children":3637},{"class":319},[3638],{"type":24,"value":3639},"        )\n",{"type":18,"tag":306,"props":3641,"children":3642},{"class":308,"line":441},[3643],{"type":18,"tag":306,"props":3644,"children":3645},{},[3646],{"type":24,"value":341},{"type":18,"tag":306,"props":3648,"children":3649},{"class":308,"line":462},[3650,3655,3659,3664,3669,3674,3678,3682,3686,3690,3694,3699,3704,3709,3713,3717,3721],{"type":18,"tag":306,"props":3651,"children":3652},{"class":319},[3653],{"type":24,"value":3654},"        sol_x ",{"type":18,"tag":306,"props":3656,"children":3657},{"class":313},[3658],{"type":24,"value":365},{"type":18,"tag":306,"props":3660,"children":3661},{"class":319},[3662],{"type":24,"value":3663}," ca.reshape(sol[",{"type":18,"tag":306,"props":3665,"children":3666},{"class":1728},[3667],{"type":24,"value":3668},"'x'",{"type":18,"tag":306,"props":3670,"children":3671},{"class":319},[3672],{"type":24,"value":3673},"][:num_states ",{"type":18,"tag":306,"props":3675,"children":3676},{"class":313},[3677],{"type":24,"value":620},{"type":18,"tag":306,"props":3679,"children":3680},{"class":319},[3681],{"type":24,"value":2455},{"type":18,"tag":306,"props":3683,"children":3684},{"class":313},[3685],{"type":24,"value":777},{"type":18,"tag":306,"props":3687,"children":3688},{"class":319},[3689],{"type":24,"value":370},{"type":18,"tag":306,"props":3691,"children":3692},{"class":373},[3693],{"type":24,"value":681},{"type":18,"tag":306,"props":3695,"children":3696},{"class":319},[3697],{"type":24,"value":3698},")], ",{"type":18,"tag":306,"props":3700,"children":3701},{"class":373},[3702],{"type":24,"value":3703},"3",{"type":18,"tag":306,"props":3705,"children":3706},{"class":319},[3707],{"type":24,"value":3708},", prediction_horizons ",{"type":18,"tag":306,"props":3710,"children":3711},{"class":313},[3712],{"type":24,"value":777},{"type":18,"tag":306,"props":3714,"children":3715},{"class":319},[3716],{"type":24,"value":370},{"type":18,"tag":306,"props":3718,"children":3719},{"class":373},[3720],{"type":24,"value":681},{"type":18,"tag":306,"props":3722,"children":3723},{"class":319},[3724],{"type":24,"value":1736},{"type":18,"tag":306,"props":3726,"children":3727},{"class":308,"line":483},[3728,3733,3737,3741,3745,3750,3754,3758,3762,3766,3770,3775,3779],{"type":18,"tag":306,"props":3729,"children":3730},{"class":319},[3731],{"type":24,"value":3732},"        sol_u ",{"type":18,"tag":306,"props":3734,"children":3735},{"class":313},[3736],{"type":24,"value":365},{"type":18,"tag":306,"props":3738,"children":3739},{"class":319},[3740],{"type":24,"value":3663},{"type":18,"tag":306,"props":3742,"children":3743},{"class":1728},[3744],{"type":24,"value":3668},{"type":18,"tag":306,"props":3746,"children":3747},{"class":319},[3748],{"type":24,"value":3749},"][num_states ",{"type":18,"tag":306,"props":3751,"children":3752},{"class":313},[3753],{"type":24,"value":620},{"type":18,"tag":306,"props":3755,"children":3756},{"class":319},[3757],{"type":24,"value":2455},{"type":18,"tag":306,"props":3759,"children":3760},{"class":313},[3761],{"type":24,"value":777},{"type":18,"tag":306,"props":3763,"children":3764},{"class":319},[3765],{"type":24,"value":370},{"type":18,"tag":306,"props":3767,"children":3768},{"class":373},[3769],{"type":24,"value":681},{"type":18,"tag":306,"props":3771,"children":3772},{"class":319},[3773],{"type":24,"value":3774},"):], ",{"type":18,"tag":306,"props":3776,"children":3777},{"class":373},[3778],{"type":24,"value":630},{"type":18,"tag":306,"props":3780,"children":3781},{"class":319},[3782],{"type":24,"value":3783},", prediction_horizons)",{"type":18,"tag":19,"props":3785,"children":3787},{"id":3786},"result",[3788],{"type":24,"value":3789},"Result",{"type":18,"tag":3791,"props":3792,"children":3797},"figure",{"className":3793},[3794,3795,3796],"mb-4","inline-block","max-w-sm",[3798,3800],{"type":24,"value":3799},"\n  ",{"type":18,"tag":43,"props":3801,"children":3804},{"className":3802,"src":3803,"width":47,"height":48},[46],"/topics/robotics/nmpc/diff_mpc.png",[],{"type":18,"tag":56,"props":3806,"children":3808},{"className":3807},[59,60,61,62],[3809],{"type":24,"value":3810},"\n    Plot of differential drive robot follow the circle trajectory !!!.\n",{"type":18,"tag":19,"props":3812,"children":3814},{"id":3813},"in-conclusion",[3815],{"type":24,"value":3816},"In conclusion",{"type":18,"tag":27,"props":3818,"children":3819},{},[3820],{"type":24,"value":3821},"In my opinion, I think MPC is suitable for the control system, since it can provide the significant control input that was predicted over the finite future of time. This can ensure the safety of the system and also can provide a quick look or reaction to the control action of the system too. Next post, I will explain about Nonlinear Model Predictive Control by using Casadi framework for mathematical optimization.",{"type":18,"tag":19,"props":3823,"children":3825},{"id":3824},"reference",[3826],{"type":24,"value":3827},"Reference",{"type":18,"tag":3829,"props":3830,"children":3831},"ol",{},[3832,3843],{"type":18,"tag":136,"props":3833,"children":3834},{},[3835,3837],{"type":24,"value":3836},"MPC-and-MHE-implementation-in-MATLAB-using-Casadi: ",{"type":18,"tag":86,"props":3838,"children":3841},{"href":3839,"rel":3840},"https://github.com/MMehrez/MPC-and-MHE-implementation-in-MATLAB-using-Casadi",[90],[3842],{"type":24,"value":3839},{"type":18,"tag":136,"props":3844,"children":3845},{},[3846,3848],{"type":24,"value":3847},"CasAdi: ",{"type":18,"tag":86,"props":3849,"children":3852},{"href":3850,"rel":3851},"https://web.casadi.org",[90],[3853],{"type":24,"value":3850},{"type":18,"tag":3855,"children":3856},"style",[3857],{"type":24,"value":3858},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-326375{color:#6A737D;}\n.ct-533739{color:#79B8FF;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":335,"depth":335,"links":3860},[3861,3862,3863,3864,3865,3866,3867,3868,3869],{"id":21,"depth":335,"text":25},{"id":68,"depth":335,"text":71},{"id":238,"depth":335,"text":241},{"id":1536,"depth":335,"text":1539},{"id":1579,"depth":335,"text":1582},{"id":1619,"depth":335,"text":1622},{"id":3786,"depth":335,"text":3789},{"id":3813,"depth":335,"text":3816},{"id":3824,"depth":335,"text":3827},"markdown","content:topics:robotics:nonlinear-mpc.md","content","topics/robotics/nonlinear-mpc.md","md",{"_path":3876,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":3877,"description":3878,"author":3879,"slug":3880,"tag":3880,"img":3881,"body":3882,"_type":3870,"_id":5801,"_source":3872,"_file":5802,"_extension":3874},"/topics/robotics/pid-controller","Introduction to PID Controller in Python","PID Control is a feedback control","DIN SOKHENG","pid","/topics/robotics/nmpc/PID.png",{"type":15,"children":3883,"toc":5787},[3884,3890,3901,3907,3912,3918,3922,3961,3970,3976,3982,3992,3998,4003,4037,4043,4048,4053,4063,4069,4074,4078,4083,4087,4092,4505,4522,5070,5075,5081,5088,5106,5192,5197,5259,5264,5348,5360,5649,5655,5674,5688,5692,5702,5708,5718,5724,5729,5734,5740,5783],{"type":18,"tag":19,"props":3885,"children":3887},{"id":3886},"what-is-pid-controller",[3888],{"type":24,"value":3889},"What is PID Controller ?",{"type":18,"tag":27,"props":3891,"children":3892},{},[3893,3895,3899],{"type":24,"value":3894},"The Proportional Integral Derivative (PID) controller is a traditional method in control systems that has found widespread use in control system engineering and industrial applications since its emergence in the 1940s. A PID controller is considered a feedback controller, aiming to minimize the error between the system's feedback and the desired setpoint by manually or automatically fine-tuning the coefficients ",{"type":18,"tag":111,"props":3896,"children":3898},{"latex-express":3897,"styles":142},"K_{P}, K_{I}, K_{D}",[],{"type":24,"value":3900},".",{"type":18,"tag":19,"props":3902,"children":3904},{"id":3903},"how-it-works",[3905],{"type":24,"value":3906},"How it works ?",{"type":18,"tag":27,"props":3908,"children":3909},{},[3910],{"type":24,"value":3911},"Imagine you want to control the speed of a DC motor to reach 300 RPM, but due to the natural response of the DC motor, it cannot reach the desired angular speed. PID offers a solution to this natural response by adjusting the system's time response using its three components, as shown in the formula below.",{"type":18,"tag":19,"props":3913,"children":3915},{"id":3914},"formulation",[3916],{"type":24,"value":3917},"Formulation",{"type":18,"tag":111,"props":3919,"children":3921},{"latex-express":3920,"styles":59},"u(t) = K_{p}e(t) + K_{I} \\int_{0}^{t} e(t) dt + K_{D} \\frac{d e(t)}{dt} ",[],{"type":18,"tag":132,"props":3923,"children":3924},{},[3925,3934,3943,3952],{"type":18,"tag":136,"props":3926,"children":3927},{},[3928,3932],{"type":18,"tag":111,"props":3929,"children":3931},{"latex-express":3930,"styles":142},"K_{P}",[],{"type":24,"value":3933}," represents the proportional gain.",{"type":18,"tag":136,"props":3935,"children":3936},{},[3937,3941],{"type":18,"tag":111,"props":3938,"children":3940},{"latex-express":3939,"styles":142},"K_{I}",[],{"type":24,"value":3942}," represents the integral gain.",{"type":18,"tag":136,"props":3944,"children":3945},{},[3946,3950],{"type":18,"tag":111,"props":3947,"children":3949},{"latex-express":3948,"styles":142},"K_{D}",[],{"type":24,"value":3951}," represents the derivative gain.",{"type":18,"tag":136,"props":3953,"children":3954},{},[3955,3959],{"type":18,"tag":111,"props":3956,"children":3958},{"latex-express":3957,"styles":142},"e(t)=target-feedback",[],{"type":24,"value":3960}," is the error between target point and feedback of the system",{"type":18,"tag":3791,"props":3962,"children":3964},{"className":3963},[3794,3795,3796],[3965,3966],{"type":24,"value":3799},{"type":18,"tag":43,"props":3967,"children":3969},{"className":3968,"src":3881},[46],[],{"type":18,"tag":56,"props":3971,"children":3973},{"className":3972},[59,60,61,62],[3974],{"type":24,"value":3975},"\n    The Block diagram of PID Controller\n",{"type":18,"tag":19,"props":3977,"children":3979},{"id":3978},"response-time",[3980],{"type":24,"value":3981},"Response Time",{"type":18,"tag":3791,"props":3983,"children":3985},{"className":3984},[3794,3795,3796],[3986,3987],{"type":24,"value":3799},{"type":18,"tag":43,"props":3988,"children":3991},{"className":3989,"src":3990},[46],"/topics/robotics/nmpc/response_timepid.png",[],{"type":18,"tag":56,"props":3993,"children":3995},{"className":3994},[59,60,61,62],[3996],{"type":24,"value":3997},"\n    The response time of the system with each K_P, K_I, K_D\n",{"type":18,"tag":27,"props":3999,"children":4000},{},[4001],{"type":24,"value":4002},"As you can see in the figure above, the response time of the system is difference.",{"type":18,"tag":132,"props":4004,"children":4005},{},[4006,4017,4027],{"type":18,"tag":136,"props":4007,"children":4008},{},[4009,4011,4015],{"type":24,"value":4010},"The response time with ",{"type":18,"tag":111,"props":4012,"children":4014},{"latex-express":4013,"styles":142},"K_{I}=2",[],{"type":24,"value":4016}," the system is likely to overshoot before reaching the steady-state, which may not be suitable for applications like controlling a DC motor.",{"type":18,"tag":136,"props":4018,"children":4019},{},[4020,4021,4025],{"type":24,"value":4010},{"type":18,"tag":111,"props":4022,"children":4024},{"latex-express":4023,"styles":142},"K_{i}=0.5, ",[],{"type":24,"value":4026},"  the response does not overshoot but has a slower response to reach the steady-state.",{"type":18,"tag":136,"props":4028,"children":4029},{},[4030,4031,4035],{"type":24,"value":4010},{"type":18,"tag":111,"props":4032,"children":4034},{"latex-express":4033,"styles":142},"K_{p}=1, K_{i}=1, K_{d}=1",[],{"type":24,"value":4036},"  there is a slight overshoot, but the steady-state is reached faster.",{"type":18,"tag":19,"props":4038,"children":4040},{"id":4039},"how-can-we-write-pid-code-in-python",[4041],{"type":24,"value":4042},"How can we write PID code in Python ?",{"type":18,"tag":27,"props":4044,"children":4045},{},[4046],{"type":24,"value":4047},"Let's use a differential drive robot as a case study system. A differential drive robot is commonly used in robotics and automation, making it an ideal choice for a demonstration.",{"type":18,"tag":27,"props":4049,"children":4050},{},[4051],{"type":24,"value":4052},"The configuration of Differential Drive Robot in axes OXY.",{"type":18,"tag":3791,"props":4054,"children":4056},{"className":4055},[3794,3795,3796],[4057,4058],{"type":24,"value":3799},{"type":18,"tag":43,"props":4059,"children":4062},{"className":4060,"src":4061},[46],"/topics/robotics/nmpc/diff_drive.png",[],{"type":18,"tag":56,"props":4064,"children":4066},{"className":4065},[59,60,61,62],[4067],{"type":24,"value":4068},"\n    The configuration of Differential Drive Robot in axes OXY.\n",{"type":18,"tag":27,"props":4070,"children":4071},{},[4072],{"type":24,"value":4073},"The forward kinematic equation",{"type":18,"tag":111,"props":4075,"children":4077},{"latex-express":4076,"styles":59},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{\\theta} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":4079,"children":4080},{},[4081],{"type":24,"value":4082},"So, if we discretize the forward kinematic with a certain sampling time, we will get",{"type":18,"tag":111,"props":4084,"children":4086},{"latex-express":4085,"styles":59},"\n\\begin{bmatrix} x_{t+1} \\\\ y_{t+1} \\\\ \\theta_{t+1} \\end{bmatrix} = \\begin{bmatrix} x_{t} \\\\ y_{t} \\\\ \\theta_{t} \\end{bmatrix} +\\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix} \\times \\Delta t\n ",[],{"type":18,"tag":27,"props":4088,"children":4089},{},[4090],{"type":24,"value":4091},"In Python,",{"type":18,"tag":291,"props":4093,"children":4096},{"className":4094,"code":4095,"language":296,"meta":8},[294],"class DifferentialDrive:\n    def __init__(self):\n        self.r = 0.05\n        self.L = 0.25\n    def forward_kinematic(self, v, omega, yaw):\n        vx = v*np.cos(yaw)\n        vy = v*np.sin(yaw)\n        vyaw = omega\n\n        return vx, vy, vyaw\n    def discrete_state(self, x, y, yaw, v, omega, dt):\n        dx, dy, dyaw = self.forward_kinematic(v, omega, yaw)\n        x_next = x + dx * dt\n        y_next = y + dy * dt\n        yaw_next = yaw + dyaw * dt\n\n        return x_next, y_next, yaw_next\n",[4097],{"type":18,"tag":299,"props":4098,"children":4099},{},[4100],{"type":18,"tag":291,"props":4101,"children":4102},{"__ignoreMap":8},[4103,4126,4152,4183,4212,4237,4263,4288,4305,4312,4329,4354,4379,4414,4448,4482,4489],{"type":18,"tag":306,"props":4104,"children":4105},{"class":308,"line":309},[4106,4111,4115,4121],{"type":18,"tag":306,"props":4107,"children":4108},{"class":313},[4109],{"type":24,"value":4110},"class",{"type":18,"tag":306,"props":4112,"children":4113},{"class":319},[4114],{"type":24,"value":370},{"type":18,"tag":306,"props":4116,"children":4118},{"class":4117},"ct-806137",[4119],{"type":24,"value":4120},"DifferentialDrive",{"type":18,"tag":306,"props":4122,"children":4123},{"class":319},[4124],{"type":24,"value":4125},":\n",{"type":18,"tag":306,"props":4127,"children":4128},{"class":308,"line":335},[4129,4133,4138,4142,4147],{"type":18,"tag":306,"props":4130,"children":4131},{"class":319},[4132],{"type":24,"value":1146},{"type":18,"tag":306,"props":4134,"children":4135},{"class":313},[4136],{"type":24,"value":4137},"def",{"type":18,"tag":306,"props":4139,"children":4140},{"class":319},[4141],{"type":24,"value":370},{"type":18,"tag":306,"props":4143,"children":4144},{"class":373},[4145],{"type":24,"value":4146},"__init__",{"type":18,"tag":306,"props":4148,"children":4149},{"class":319},[4150],{"type":24,"value":4151},"(self):\n",{"type":18,"tag":306,"props":4153,"children":4154},{"class":308,"line":344},[4155,4160,4165,4170,4174,4178],{"type":18,"tag":306,"props":4156,"children":4157},{"class":319},[4158],{"type":24,"value":4159},"        ",{"type":18,"tag":306,"props":4161,"children":4162},{"class":373},[4163],{"type":24,"value":4164},"self",{"type":18,"tag":306,"props":4166,"children":4167},{"class":319},[4168],{"type":24,"value":4169},".r ",{"type":18,"tag":306,"props":4171,"children":4172},{"class":313},[4173],{"type":24,"value":365},{"type":18,"tag":306,"props":4175,"children":4176},{"class":319},[4177],{"type":24,"value":370},{"type":18,"tag":306,"props":4179,"children":4180},{"class":373},[4181],{"type":24,"value":4182},"0.05\n",{"type":18,"tag":306,"props":4184,"children":4185},{"class":308,"line":354},[4186,4190,4194,4199,4203,4207],{"type":18,"tag":306,"props":4187,"children":4188},{"class":319},[4189],{"type":24,"value":4159},{"type":18,"tag":306,"props":4191,"children":4192},{"class":373},[4193],{"type":24,"value":4164},{"type":18,"tag":306,"props":4195,"children":4196},{"class":319},[4197],{"type":24,"value":4198},".L ",{"type":18,"tag":306,"props":4200,"children":4201},{"class":313},[4202],{"type":24,"value":365},{"type":18,"tag":306,"props":4204,"children":4205},{"class":319},[4206],{"type":24,"value":370},{"type":18,"tag":306,"props":4208,"children":4209},{"class":373},[4210],{"type":24,"value":4211},"0.25\n",{"type":18,"tag":306,"props":4213,"children":4214},{"class":308,"line":379},[4215,4219,4223,4227,4232],{"type":18,"tag":306,"props":4216,"children":4217},{"class":319},[4218],{"type":24,"value":1146},{"type":18,"tag":306,"props":4220,"children":4221},{"class":313},[4222],{"type":24,"value":4137},{"type":18,"tag":306,"props":4224,"children":4225},{"class":319},[4226],{"type":24,"value":370},{"type":18,"tag":306,"props":4228,"children":4229},{"class":4117},[4230],{"type":24,"value":4231},"forward_kinematic",{"type":18,"tag":306,"props":4233,"children":4234},{"class":319},[4235],{"type":24,"value":4236},"(self, v, omega, yaw):\n",{"type":18,"tag":306,"props":4238,"children":4239},{"class":308,"line":388},[4240,4245,4249,4254,4258],{"type":18,"tag":306,"props":4241,"children":4242},{"class":319},[4243],{"type":24,"value":4244},"        vx ",{"type":18,"tag":306,"props":4246,"children":4247},{"class":313},[4248],{"type":24,"value":365},{"type":18,"tag":306,"props":4250,"children":4251},{"class":319},[4252],{"type":24,"value":4253}," v",{"type":18,"tag":306,"props":4255,"children":4256},{"class":313},[4257],{"type":24,"value":620},{"type":18,"tag":306,"props":4259,"children":4260},{"class":319},[4261],{"type":24,"value":4262},"np.cos(yaw)\n",{"type":18,"tag":306,"props":4264,"children":4265},{"class":308,"line":410},[4266,4271,4275,4279,4283],{"type":18,"tag":306,"props":4267,"children":4268},{"class":319},[4269],{"type":24,"value":4270},"        vy ",{"type":18,"tag":306,"props":4272,"children":4273},{"class":313},[4274],{"type":24,"value":365},{"type":18,"tag":306,"props":4276,"children":4277},{"class":319},[4278],{"type":24,"value":4253},{"type":18,"tag":306,"props":4280,"children":4281},{"class":313},[4282],{"type":24,"value":620},{"type":18,"tag":306,"props":4284,"children":4285},{"class":319},[4286],{"type":24,"value":4287},"np.sin(yaw)\n",{"type":18,"tag":306,"props":4289,"children":4290},{"class":308,"line":419},[4291,4296,4300],{"type":18,"tag":306,"props":4292,"children":4293},{"class":319},[4294],{"type":24,"value":4295},"        vyaw ",{"type":18,"tag":306,"props":4297,"children":4298},{"class":313},[4299],{"type":24,"value":365},{"type":18,"tag":306,"props":4301,"children":4302},{"class":319},[4303],{"type":24,"value":4304}," omega\n",{"type":18,"tag":306,"props":4306,"children":4307},{"class":308,"line":441},[4308],{"type":18,"tag":306,"props":4309,"children":4310},{},[4311],{"type":24,"value":341},{"type":18,"tag":306,"props":4313,"children":4314},{"class":308,"line":462},[4315,4319,4324],{"type":18,"tag":306,"props":4316,"children":4317},{"class":319},[4318],{"type":24,"value":4159},{"type":18,"tag":306,"props":4320,"children":4321},{"class":313},[4322],{"type":24,"value":4323},"return",{"type":18,"tag":306,"props":4325,"children":4326},{"class":319},[4327],{"type":24,"value":4328}," vx, vy, vyaw\n",{"type":18,"tag":306,"props":4330,"children":4331},{"class":308,"line":483},[4332,4336,4340,4344,4349],{"type":18,"tag":306,"props":4333,"children":4334},{"class":319},[4335],{"type":24,"value":1146},{"type":18,"tag":306,"props":4337,"children":4338},{"class":313},[4339],{"type":24,"value":4137},{"type":18,"tag":306,"props":4341,"children":4342},{"class":319},[4343],{"type":24,"value":370},{"type":18,"tag":306,"props":4345,"children":4346},{"class":4117},[4347],{"type":24,"value":4348},"discrete_state",{"type":18,"tag":306,"props":4350,"children":4351},{"class":319},[4352],{"type":24,"value":4353},"(self, x, y, yaw, v, omega, dt):\n",{"type":18,"tag":306,"props":4355,"children":4356},{"class":308,"line":492},[4357,4362,4366,4370,4374],{"type":18,"tag":306,"props":4358,"children":4359},{"class":319},[4360],{"type":24,"value":4361},"        dx, dy, dyaw ",{"type":18,"tag":306,"props":4363,"children":4364},{"class":313},[4365],{"type":24,"value":365},{"type":18,"tag":306,"props":4367,"children":4368},{"class":319},[4369],{"type":24,"value":370},{"type":18,"tag":306,"props":4371,"children":4372},{"class":373},[4373],{"type":24,"value":4164},{"type":18,"tag":306,"props":4375,"children":4376},{"class":319},[4377],{"type":24,"value":4378},".forward_kinematic(v, omega, yaw)\n",{"type":18,"tag":306,"props":4380,"children":4381},{"class":308,"line":523},[4382,4387,4391,4396,4400,4405,4409],{"type":18,"tag":306,"props":4383,"children":4384},{"class":319},[4385],{"type":24,"value":4386},"        x_next ",{"type":18,"tag":306,"props":4388,"children":4389},{"class":313},[4390],{"type":24,"value":365},{"type":18,"tag":306,"props":4392,"children":4393},{"class":319},[4394],{"type":24,"value":4395}," x ",{"type":18,"tag":306,"props":4397,"children":4398},{"class":313},[4399],{"type":24,"value":777},{"type":18,"tag":306,"props":4401,"children":4402},{"class":319},[4403],{"type":24,"value":4404}," dx ",{"type":18,"tag":306,"props":4406,"children":4407},{"class":313},[4408],{"type":24,"value":620},{"type":18,"tag":306,"props":4410,"children":4411},{"class":319},[4412],{"type":24,"value":4413}," dt\n",{"type":18,"tag":306,"props":4415,"children":4416},{"class":308,"line":554},[4417,4422,4426,4431,4435,4440,4444],{"type":18,"tag":306,"props":4418,"children":4419},{"class":319},[4420],{"type":24,"value":4421},"        y_next ",{"type":18,"tag":306,"props":4423,"children":4424},{"class":313},[4425],{"type":24,"value":365},{"type":18,"tag":306,"props":4427,"children":4428},{"class":319},[4429],{"type":24,"value":4430}," y ",{"type":18,"tag":306,"props":4432,"children":4433},{"class":313},[4434],{"type":24,"value":777},{"type":18,"tag":306,"props":4436,"children":4437},{"class":319},[4438],{"type":24,"value":4439}," dy ",{"type":18,"tag":306,"props":4441,"children":4442},{"class":313},[4443],{"type":24,"value":620},{"type":18,"tag":306,"props":4445,"children":4446},{"class":319},[4447],{"type":24,"value":4413},{"type":18,"tag":306,"props":4449,"children":4450},{"class":308,"line":563},[4451,4456,4460,4465,4469,4474,4478],{"type":18,"tag":306,"props":4452,"children":4453},{"class":319},[4454],{"type":24,"value":4455},"        yaw_next ",{"type":18,"tag":306,"props":4457,"children":4458},{"class":313},[4459],{"type":24,"value":365},{"type":18,"tag":306,"props":4461,"children":4462},{"class":319},[4463],{"type":24,"value":4464}," yaw ",{"type":18,"tag":306,"props":4466,"children":4467},{"class":313},[4468],{"type":24,"value":777},{"type":18,"tag":306,"props":4470,"children":4471},{"class":319},[4472],{"type":24,"value":4473}," dyaw ",{"type":18,"tag":306,"props":4475,"children":4476},{"class":313},[4477],{"type":24,"value":620},{"type":18,"tag":306,"props":4479,"children":4480},{"class":319},[4481],{"type":24,"value":4413},{"type":18,"tag":306,"props":4483,"children":4484},{"class":308,"line":572},[4485],{"type":18,"tag":306,"props":4486,"children":4487},{},[4488],{"type":24,"value":341},{"type":18,"tag":306,"props":4490,"children":4491},{"class":308,"line":599},[4492,4496,4500],{"type":18,"tag":306,"props":4493,"children":4494},{"class":319},[4495],{"type":24,"value":4159},{"type":18,"tag":306,"props":4497,"children":4498},{"class":313},[4499],{"type":24,"value":4323},{"type":18,"tag":306,"props":4501,"children":4502},{"class":319},[4503],{"type":24,"value":4504}," x_next, y_next, yaw_next",{"type":18,"tag":27,"props":4506,"children":4507},{},[4508,4510,4514,4516,4521],{"type":24,"value":4509},"The ",{"type":18,"tag":78,"props":4511,"children":4512},{},[4513],{"type":24,"value":251},{"type":24,"value":4515}," class that we defined, has all the need attribute to use for PID control !!. We just need to write another class for our ",{"type":18,"tag":78,"props":4517,"children":4518},{},[4519],{"type":24,"value":4520}," PID Controller ",{"type":24,"value":3900},{"type":18,"tag":291,"props":4523,"children":4526},{"className":4524,"code":4525,"language":296,"meta":8},[294],"class PIDController:\n    def __init__(self, kp, ki, kd, dt):\n\n        self.kp = kp\n        self.ki = ki\n        self.kd = kd\n        self.dt = dt\n        self.integral = 0\n\n    def calculate_pid(self, errors):\n        # Calculate proportional error\n        proportional = self.kp * errors[-1]\n        # Calculate integration error\n        integral = self.integral + self.ki * (errors[-1]) * self.dt\n        self.integral = integral\n        # Calculate derivative error\n        derivative = self.kd * (errors[-1] - errors[-2])/self.dt\n\n        output = proportional + integral + derivative\n\n        return output\n",[4527],{"type":18,"tag":299,"props":4528,"children":4529},{},[4530],{"type":18,"tag":291,"props":4531,"children":4532},{"__ignoreMap":8},[4533,4553,4577,4584,4609,4634,4659,4683,4712,4719,4744,4756,4802,4814,4892,4916,4928,5005,5012,5047,5054],{"type":18,"tag":306,"props":4534,"children":4535},{"class":308,"line":309},[4536,4540,4544,4549],{"type":18,"tag":306,"props":4537,"children":4538},{"class":313},[4539],{"type":24,"value":4110},{"type":18,"tag":306,"props":4541,"children":4542},{"class":319},[4543],{"type":24,"value":370},{"type":18,"tag":306,"props":4545,"children":4546},{"class":4117},[4547],{"type":24,"value":4548},"PIDController",{"type":18,"tag":306,"props":4550,"children":4551},{"class":319},[4552],{"type":24,"value":4125},{"type":18,"tag":306,"props":4554,"children":4555},{"class":308,"line":335},[4556,4560,4564,4568,4572],{"type":18,"tag":306,"props":4557,"children":4558},{"class":319},[4559],{"type":24,"value":1146},{"type":18,"tag":306,"props":4561,"children":4562},{"class":313},[4563],{"type":24,"value":4137},{"type":18,"tag":306,"props":4565,"children":4566},{"class":319},[4567],{"type":24,"value":370},{"type":18,"tag":306,"props":4569,"children":4570},{"class":373},[4571],{"type":24,"value":4146},{"type":18,"tag":306,"props":4573,"children":4574},{"class":319},[4575],{"type":24,"value":4576},"(self, kp, ki, kd, dt):\n",{"type":18,"tag":306,"props":4578,"children":4579},{"class":308,"line":344},[4580],{"type":18,"tag":306,"props":4581,"children":4582},{},[4583],{"type":24,"value":341},{"type":18,"tag":306,"props":4585,"children":4586},{"class":308,"line":354},[4587,4591,4595,4600,4604],{"type":18,"tag":306,"props":4588,"children":4589},{"class":319},[4590],{"type":24,"value":4159},{"type":18,"tag":306,"props":4592,"children":4593},{"class":373},[4594],{"type":24,"value":4164},{"type":18,"tag":306,"props":4596,"children":4597},{"class":319},[4598],{"type":24,"value":4599},".kp ",{"type":18,"tag":306,"props":4601,"children":4602},{"class":313},[4603],{"type":24,"value":365},{"type":18,"tag":306,"props":4605,"children":4606},{"class":319},[4607],{"type":24,"value":4608}," kp\n",{"type":18,"tag":306,"props":4610,"children":4611},{"class":308,"line":379},[4612,4616,4620,4625,4629],{"type":18,"tag":306,"props":4613,"children":4614},{"class":319},[4615],{"type":24,"value":4159},{"type":18,"tag":306,"props":4617,"children":4618},{"class":373},[4619],{"type":24,"value":4164},{"type":18,"tag":306,"props":4621,"children":4622},{"class":319},[4623],{"type":24,"value":4624},".ki ",{"type":18,"tag":306,"props":4626,"children":4627},{"class":313},[4628],{"type":24,"value":365},{"type":18,"tag":306,"props":4630,"children":4631},{"class":319},[4632],{"type":24,"value":4633}," ki\n",{"type":18,"tag":306,"props":4635,"children":4636},{"class":308,"line":388},[4637,4641,4645,4650,4654],{"type":18,"tag":306,"props":4638,"children":4639},{"class":319},[4640],{"type":24,"value":4159},{"type":18,"tag":306,"props":4642,"children":4643},{"class":373},[4644],{"type":24,"value":4164},{"type":18,"tag":306,"props":4646,"children":4647},{"class":319},[4648],{"type":24,"value":4649},".kd ",{"type":18,"tag":306,"props":4651,"children":4652},{"class":313},[4653],{"type":24,"value":365},{"type":18,"tag":306,"props":4655,"children":4656},{"class":319},[4657],{"type":24,"value":4658}," kd\n",{"type":18,"tag":306,"props":4660,"children":4661},{"class":308,"line":410},[4662,4666,4670,4675,4679],{"type":18,"tag":306,"props":4663,"children":4664},{"class":319},[4665],{"type":24,"value":4159},{"type":18,"tag":306,"props":4667,"children":4668},{"class":373},[4669],{"type":24,"value":4164},{"type":18,"tag":306,"props":4671,"children":4672},{"class":319},[4673],{"type":24,"value":4674},".dt ",{"type":18,"tag":306,"props":4676,"children":4677},{"class":313},[4678],{"type":24,"value":365},{"type":18,"tag":306,"props":4680,"children":4681},{"class":319},[4682],{"type":24,"value":4413},{"type":18,"tag":306,"props":4684,"children":4685},{"class":308,"line":419},[4686,4690,4694,4699,4703,4707],{"type":18,"tag":306,"props":4687,"children":4688},{"class":319},[4689],{"type":24,"value":4159},{"type":18,"tag":306,"props":4691,"children":4692},{"class":373},[4693],{"type":24,"value":4164},{"type":18,"tag":306,"props":4695,"children":4696},{"class":319},[4697],{"type":24,"value":4698},".integral ",{"type":18,"tag":306,"props":4700,"children":4701},{"class":313},[4702],{"type":24,"value":365},{"type":18,"tag":306,"props":4704,"children":4705},{"class":319},[4706],{"type":24,"value":370},{"type":18,"tag":306,"props":4708,"children":4709},{"class":373},[4710],{"type":24,"value":4711},"0\n",{"type":18,"tag":306,"props":4713,"children":4714},{"class":308,"line":441},[4715],{"type":18,"tag":306,"props":4716,"children":4717},{},[4718],{"type":24,"value":341},{"type":18,"tag":306,"props":4720,"children":4721},{"class":308,"line":462},[4722,4726,4730,4734,4739],{"type":18,"tag":306,"props":4723,"children":4724},{"class":319},[4725],{"type":24,"value":1146},{"type":18,"tag":306,"props":4727,"children":4728},{"class":313},[4729],{"type":24,"value":4137},{"type":18,"tag":306,"props":4731,"children":4732},{"class":319},[4733],{"type":24,"value":370},{"type":18,"tag":306,"props":4735,"children":4736},{"class":4117},[4737],{"type":24,"value":4738},"calculate_pid",{"type":18,"tag":306,"props":4740,"children":4741},{"class":319},[4742],{"type":24,"value":4743},"(self, errors):\n",{"type":18,"tag":306,"props":4745,"children":4746},{"class":308,"line":483},[4747,4751],{"type":18,"tag":306,"props":4748,"children":4749},{"class":319},[4750],{"type":24,"value":4159},{"type":18,"tag":306,"props":4752,"children":4753},{"class":348},[4754],{"type":24,"value":4755},"# Calculate proportional error\n",{"type":18,"tag":306,"props":4757,"children":4758},{"class":308,"line":492},[4759,4764,4768,4772,4776,4780,4784,4789,4793,4797],{"type":18,"tag":306,"props":4760,"children":4761},{"class":319},[4762],{"type":24,"value":4763},"        proportional ",{"type":18,"tag":306,"props":4765,"children":4766},{"class":313},[4767],{"type":24,"value":365},{"type":18,"tag":306,"props":4769,"children":4770},{"class":319},[4771],{"type":24,"value":370},{"type":18,"tag":306,"props":4773,"children":4774},{"class":373},[4775],{"type":24,"value":4164},{"type":18,"tag":306,"props":4777,"children":4778},{"class":319},[4779],{"type":24,"value":4599},{"type":18,"tag":306,"props":4781,"children":4782},{"class":313},[4783],{"type":24,"value":620},{"type":18,"tag":306,"props":4785,"children":4786},{"class":319},[4787],{"type":24,"value":4788}," errors[",{"type":18,"tag":306,"props":4790,"children":4791},{"class":313},[4792],{"type":24,"value":2020},{"type":18,"tag":306,"props":4794,"children":4795},{"class":373},[4796],{"type":24,"value":681},{"type":18,"tag":306,"props":4798,"children":4799},{"class":319},[4800],{"type":24,"value":4801},"]\n",{"type":18,"tag":306,"props":4803,"children":4804},{"class":308,"line":523},[4805,4809],{"type":18,"tag":306,"props":4806,"children":4807},{"class":319},[4808],{"type":24,"value":4159},{"type":18,"tag":306,"props":4810,"children":4811},{"class":348},[4812],{"type":24,"value":4813},"# Calculate integration error\n",{"type":18,"tag":306,"props":4815,"children":4816},{"class":308,"line":554},[4817,4822,4826,4830,4834,4838,4842,4846,4850,4854,4858,4863,4867,4871,4875,4879,4883,4887],{"type":18,"tag":306,"props":4818,"children":4819},{"class":319},[4820],{"type":24,"value":4821},"        integral ",{"type":18,"tag":306,"props":4823,"children":4824},{"class":313},[4825],{"type":24,"value":365},{"type":18,"tag":306,"props":4827,"children":4828},{"class":319},[4829],{"type":24,"value":370},{"type":18,"tag":306,"props":4831,"children":4832},{"class":373},[4833],{"type":24,"value":4164},{"type":18,"tag":306,"props":4835,"children":4836},{"class":319},[4837],{"type":24,"value":4698},{"type":18,"tag":306,"props":4839,"children":4840},{"class":313},[4841],{"type":24,"value":777},{"type":18,"tag":306,"props":4843,"children":4844},{"class":319},[4845],{"type":24,"value":370},{"type":18,"tag":306,"props":4847,"children":4848},{"class":373},[4849],{"type":24,"value":4164},{"type":18,"tag":306,"props":4851,"children":4852},{"class":319},[4853],{"type":24,"value":4624},{"type":18,"tag":306,"props":4855,"children":4856},{"class":313},[4857],{"type":24,"value":620},{"type":18,"tag":306,"props":4859,"children":4860},{"class":319},[4861],{"type":24,"value":4862}," (errors[",{"type":18,"tag":306,"props":4864,"children":4865},{"class":313},[4866],{"type":24,"value":2020},{"type":18,"tag":306,"props":4868,"children":4869},{"class":373},[4870],{"type":24,"value":681},{"type":18,"tag":306,"props":4872,"children":4873},{"class":319},[4874],{"type":24,"value":1261},{"type":18,"tag":306,"props":4876,"children":4877},{"class":313},[4878],{"type":24,"value":620},{"type":18,"tag":306,"props":4880,"children":4881},{"class":319},[4882],{"type":24,"value":370},{"type":18,"tag":306,"props":4884,"children":4885},{"class":373},[4886],{"type":24,"value":4164},{"type":18,"tag":306,"props":4888,"children":4889},{"class":319},[4890],{"type":24,"value":4891},".dt\n",{"type":18,"tag":306,"props":4893,"children":4894},{"class":308,"line":563},[4895,4899,4903,4907,4911],{"type":18,"tag":306,"props":4896,"children":4897},{"class":319},[4898],{"type":24,"value":4159},{"type":18,"tag":306,"props":4900,"children":4901},{"class":373},[4902],{"type":24,"value":4164},{"type":18,"tag":306,"props":4904,"children":4905},{"class":319},[4906],{"type":24,"value":4698},{"type":18,"tag":306,"props":4908,"children":4909},{"class":313},[4910],{"type":24,"value":365},{"type":18,"tag":306,"props":4912,"children":4913},{"class":319},[4914],{"type":24,"value":4915}," integral\n",{"type":18,"tag":306,"props":4917,"children":4918},{"class":308,"line":572},[4919,4923],{"type":18,"tag":306,"props":4920,"children":4921},{"class":319},[4922],{"type":24,"value":4159},{"type":18,"tag":306,"props":4924,"children":4925},{"class":348},[4926],{"type":24,"value":4927},"# Calculate derivative error\n",{"type":18,"tag":306,"props":4929,"children":4930},{"class":308,"line":599},[4931,4936,4940,4944,4948,4952,4956,4960,4964,4968,4972,4976,4980,4984,4988,4993,4997,5001],{"type":18,"tag":306,"props":4932,"children":4933},{"class":319},[4934],{"type":24,"value":4935},"        derivative ",{"type":18,"tag":306,"props":4937,"children":4938},{"class":313},[4939],{"type":24,"value":365},{"type":18,"tag":306,"props":4941,"children":4942},{"class":319},[4943],{"type":24,"value":370},{"type":18,"tag":306,"props":4945,"children":4946},{"class":373},[4947],{"type":24,"value":4164},{"type":18,"tag":306,"props":4949,"children":4950},{"class":319},[4951],{"type":24,"value":4649},{"type":18,"tag":306,"props":4953,"children":4954},{"class":313},[4955],{"type":24,"value":620},{"type":18,"tag":306,"props":4957,"children":4958},{"class":319},[4959],{"type":24,"value":4862},{"type":18,"tag":306,"props":4961,"children":4962},{"class":313},[4963],{"type":24,"value":2020},{"type":18,"tag":306,"props":4965,"children":4966},{"class":373},[4967],{"type":24,"value":681},{"type":18,"tag":306,"props":4969,"children":4970},{"class":319},[4971],{"type":24,"value":1179},{"type":18,"tag":306,"props":4973,"children":4974},{"class":313},[4975],{"type":24,"value":2020},{"type":18,"tag":306,"props":4977,"children":4978},{"class":319},[4979],{"type":24,"value":4788},{"type":18,"tag":306,"props":4981,"children":4982},{"class":313},[4983],{"type":24,"value":2020},{"type":18,"tag":306,"props":4985,"children":4986},{"class":373},[4987],{"type":24,"value":630},{"type":18,"tag":306,"props":4989,"children":4990},{"class":319},[4991],{"type":24,"value":4992},"])",{"type":18,"tag":306,"props":4994,"children":4995},{"class":313},[4996],{"type":24,"value":787},{"type":18,"tag":306,"props":4998,"children":4999},{"class":373},[5000],{"type":24,"value":4164},{"type":18,"tag":306,"props":5002,"children":5003},{"class":319},[5004],{"type":24,"value":4891},{"type":18,"tag":306,"props":5006,"children":5007},{"class":308,"line":638},[5008],{"type":18,"tag":306,"props":5009,"children":5010},{},[5011],{"type":24,"value":341},{"type":18,"tag":306,"props":5013,"children":5014},{"class":308,"line":671},[5015,5020,5024,5029,5033,5038,5042],{"type":18,"tag":306,"props":5016,"children":5017},{"class":319},[5018],{"type":24,"value":5019},"        output ",{"type":18,"tag":306,"props":5021,"children":5022},{"class":313},[5023],{"type":24,"value":365},{"type":18,"tag":306,"props":5025,"children":5026},{"class":319},[5027],{"type":24,"value":5028}," proportional ",{"type":18,"tag":306,"props":5030,"children":5031},{"class":313},[5032],{"type":24,"value":777},{"type":18,"tag":306,"props":5034,"children":5035},{"class":319},[5036],{"type":24,"value":5037}," integral ",{"type":18,"tag":306,"props":5039,"children":5040},{"class":313},[5041],{"type":24,"value":777},{"type":18,"tag":306,"props":5043,"children":5044},{"class":319},[5045],{"type":24,"value":5046}," derivative\n",{"type":18,"tag":306,"props":5048,"children":5049},{"class":308,"line":689},[5050],{"type":18,"tag":306,"props":5051,"children":5052},{},[5053],{"type":24,"value":341},{"type":18,"tag":306,"props":5055,"children":5056},{"class":308,"line":698},[5057,5061,5065],{"type":18,"tag":306,"props":5058,"children":5059},{"class":319},[5060],{"type":24,"value":4159},{"type":18,"tag":306,"props":5062,"children":5063},{"class":313},[5064],{"type":24,"value":4323},{"type":18,"tag":306,"props":5066,"children":5067},{"class":319},[5068],{"type":24,"value":5069}," output",{"type":18,"tag":27,"props":5071,"children":5072},{},[5073],{"type":24,"value":5074},"Don't worry, this class just defined as the PID formula. So, by doing this, we will be able to use all the characteristic of our PID controller.",{"type":18,"tag":19,"props":5076,"children":5078},{"id":5077},"experiment",[5079],{"type":24,"value":5080},"Experiment",{"type":18,"tag":5082,"props":5083,"children":5085},"h3",{"id":5084},"pid-for-point-control",[5086],{"type":24,"value":5087},"PID for point control",{"type":18,"tag":27,"props":5089,"children":5090},{},[5091,5093,5097,5099,5104],{"type":24,"value":5092},"If I want my DifferentialDrive robot go to point ",{"type":18,"tag":111,"props":5094,"children":5096},{"latex-express":5095,"styles":142},"x_{ref}, y_{ref}, \\theta_{ref}",[],{"type":24,"value":5098},", Then I can calculate the error between the reference point and the feedback position of the robot. I simulated my robot in the  ",{"type":18,"tag":1629,"props":5100,"children":5101},{},[5102],{"type":24,"value":5103},"for loop",{"type":24,"value":5105}," and calculate this error recursively.",{"type":18,"tag":291,"props":5107,"children":5110},{"className":5108,"code":5109,"language":296,"meta":8},[294],"error_x.append(ref_path[0]-current_x)\nerror_y.append(ref_path[1]-current_y)\nerror_yaw.append(ref_path[2]-current_yaw)\n",[5111],{"type":18,"tag":299,"props":5112,"children":5113},{},[5114],{"type":18,"tag":291,"props":5115,"children":5116},{"__ignoreMap":8},[5117,5142,5167],{"type":18,"tag":306,"props":5118,"children":5119},{"class":308,"line":309},[5120,5125,5129,5133,5137],{"type":18,"tag":306,"props":5121,"children":5122},{"class":319},[5123],{"type":24,"value":5124},"error_x.append(ref_path[",{"type":18,"tag":306,"props":5126,"children":5127},{"class":373},[5128],{"type":24,"value":610},{"type":18,"tag":306,"props":5130,"children":5131},{"class":319},[5132],{"type":24,"value":615},{"type":18,"tag":306,"props":5134,"children":5135},{"class":313},[5136],{"type":24,"value":2020},{"type":18,"tag":306,"props":5138,"children":5139},{"class":319},[5140],{"type":24,"value":5141},"current_x)\n",{"type":18,"tag":306,"props":5143,"children":5144},{"class":308,"line":335},[5145,5150,5154,5158,5162],{"type":18,"tag":306,"props":5146,"children":5147},{"class":319},[5148],{"type":24,"value":5149},"error_y.append(ref_path[",{"type":18,"tag":306,"props":5151,"children":5152},{"class":373},[5153],{"type":24,"value":681},{"type":18,"tag":306,"props":5155,"children":5156},{"class":319},[5157],{"type":24,"value":615},{"type":18,"tag":306,"props":5159,"children":5160},{"class":313},[5161],{"type":24,"value":2020},{"type":18,"tag":306,"props":5163,"children":5164},{"class":319},[5165],{"type":24,"value":5166},"current_y)\n",{"type":18,"tag":306,"props":5168,"children":5169},{"class":308,"line":344},[5170,5175,5179,5183,5187],{"type":18,"tag":306,"props":5171,"children":5172},{"class":319},[5173],{"type":24,"value":5174},"error_yaw.append(ref_path[",{"type":18,"tag":306,"props":5176,"children":5177},{"class":373},[5178],{"type":24,"value":630},{"type":18,"tag":306,"props":5180,"children":5181},{"class":319},[5182],{"type":24,"value":615},{"type":18,"tag":306,"props":5184,"children":5185},{"class":313},[5186],{"type":24,"value":2020},{"type":18,"tag":306,"props":5188,"children":5189},{"class":319},[5190],{"type":24,"value":5191},"current_yaw)",{"type":18,"tag":27,"props":5193,"children":5194},{},[5195],{"type":24,"value":5196},"Then, let's apply PID",{"type":18,"tag":291,"props":5198,"children":5201},{"className":5199,"code":5200,"language":296,"meta":8},[294],"output_vx = pid_controller_x.calculate_pid(error_x)\noutput_vy = pid_controller_y.calculate_pid(error_y)\noutput_omega = pid_controller_yaw.calculate_pid(error_yaw)\n",[5202],{"type":18,"tag":299,"props":5203,"children":5204},{},[5205],{"type":18,"tag":291,"props":5206,"children":5207},{"__ignoreMap":8},[5208,5225,5242],{"type":18,"tag":306,"props":5209,"children":5210},{"class":308,"line":309},[5211,5216,5220],{"type":18,"tag":306,"props":5212,"children":5213},{"class":319},[5214],{"type":24,"value":5215},"output_vx ",{"type":18,"tag":306,"props":5217,"children":5218},{"class":313},[5219],{"type":24,"value":365},{"type":18,"tag":306,"props":5221,"children":5222},{"class":319},[5223],{"type":24,"value":5224}," pid_controller_x.calculate_pid(error_x)\n",{"type":18,"tag":306,"props":5226,"children":5227},{"class":308,"line":335},[5228,5233,5237],{"type":18,"tag":306,"props":5229,"children":5230},{"class":319},[5231],{"type":24,"value":5232},"output_vy ",{"type":18,"tag":306,"props":5234,"children":5235},{"class":313},[5236],{"type":24,"value":365},{"type":18,"tag":306,"props":5238,"children":5239},{"class":319},[5240],{"type":24,"value":5241}," pid_controller_y.calculate_pid(error_y)\n",{"type":18,"tag":306,"props":5243,"children":5244},{"class":308,"line":344},[5245,5250,5254],{"type":18,"tag":306,"props":5246,"children":5247},{"class":319},[5248],{"type":24,"value":5249},"output_omega ",{"type":18,"tag":306,"props":5251,"children":5252},{"class":313},[5253],{"type":24,"value":365},{"type":18,"tag":306,"props":5255,"children":5256},{"class":319},[5257],{"type":24,"value":5258}," pid_controller_yaw.calculate_pid(error_yaw)",{"type":18,"tag":27,"props":5260,"children":5261},{},[5262],{"type":24,"value":5263},"We will also need to update current position of the robot with the given optimal value from the PID controller.",{"type":18,"tag":291,"props":5265,"children":5268},{"className":5266,"code":5267,"language":296,"meta":8},[294],"x_next, y_next, yaw_next = diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) # Skip for omega we only look for x, y\ncurrent_x = x_next\ncurrent_y = y_next\ncurrent_yaw = yaw_next\n",[5269],{"type":18,"tag":299,"props":5270,"children":5271},{},[5272],{"type":18,"tag":291,"props":5273,"children":5274},{"__ignoreMap":8},[5275,5297,5314,5331],{"type":18,"tag":306,"props":5276,"children":5277},{"class":308,"line":309},[5278,5283,5287,5292],{"type":18,"tag":306,"props":5279,"children":5280},{"class":319},[5281],{"type":24,"value":5282},"x_next, y_next, yaw_next ",{"type":18,"tag":306,"props":5284,"children":5285},{"class":313},[5286],{"type":24,"value":365},{"type":18,"tag":306,"props":5288,"children":5289},{"class":319},[5290],{"type":24,"value":5291}," diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) ",{"type":18,"tag":306,"props":5293,"children":5294},{"class":348},[5295],{"type":24,"value":5296},"# Skip for omega we only look for x, y\n",{"type":18,"tag":306,"props":5298,"children":5299},{"class":308,"line":335},[5300,5305,5309],{"type":18,"tag":306,"props":5301,"children":5302},{"class":319},[5303],{"type":24,"value":5304},"current_x ",{"type":18,"tag":306,"props":5306,"children":5307},{"class":313},[5308],{"type":24,"value":365},{"type":18,"tag":306,"props":5310,"children":5311},{"class":319},[5312],{"type":24,"value":5313}," x_next\n",{"type":18,"tag":306,"props":5315,"children":5316},{"class":308,"line":344},[5317,5322,5326],{"type":18,"tag":306,"props":5318,"children":5319},{"class":319},[5320],{"type":24,"value":5321},"current_y ",{"type":18,"tag":306,"props":5323,"children":5324},{"class":313},[5325],{"type":24,"value":365},{"type":18,"tag":306,"props":5327,"children":5328},{"class":319},[5329],{"type":24,"value":5330}," y_next\n",{"type":18,"tag":306,"props":5332,"children":5333},{"class":308,"line":354},[5334,5339,5343],{"type":18,"tag":306,"props":5335,"children":5336},{"class":319},[5337],{"type":24,"value":5338},"current_yaw ",{"type":18,"tag":306,"props":5340,"children":5341},{"class":313},[5342],{"type":24,"value":365},{"type":18,"tag":306,"props":5344,"children":5345},{"class":319},[5346],{"type":24,"value":5347}," yaw_next",{"type":18,"tag":27,"props":5349,"children":5350},{},[5351,5353,5358],{"type":24,"value":5352},"I use ",{"type":18,"tag":1629,"props":5354,"children":5355},{},[5356],{"type":24,"value":5357},"matplotlib",{"type":24,"value":5359}," library to simulate my robot.",{"type":18,"tag":291,"props":5361,"children":5364},{"className":5362,"code":5363,"language":296,"meta":8},[294],"plt.clf()\nplt.gcf().canvas.mpl_connect('key_release_event',\n            lambda event: [exit(0) if event.key == 'escape' else None])\nplot_arrow(current_x, current_y, current_yaw)\nplt.plot(5, 5)\nplt.plot(ref_path[0], ref_path[1], marker=\"x\", color=\"blue\", label=\"Input Trajectory\")\nplt.axis(\"equal\")\nplt.grid(True)\nplt.legend()\nplt.pause(0.0001)\n",[5365],{"type":18,"tag":299,"props":5366,"children":5367},{},[5368],{"type":18,"tag":291,"props":5369,"children":5370},{"__ignoreMap":8},[5371,5379,5397,5477,5485,5510,5589,5606,5623,5631],{"type":18,"tag":306,"props":5372,"children":5373},{"class":308,"line":309},[5374],{"type":18,"tag":306,"props":5375,"children":5376},{"class":319},[5377],{"type":24,"value":5378},"plt.clf()\n",{"type":18,"tag":306,"props":5380,"children":5381},{"class":308,"line":335},[5382,5387,5392],{"type":18,"tag":306,"props":5383,"children":5384},{"class":319},[5385],{"type":24,"value":5386},"plt.gcf().canvas.mpl_connect(",{"type":18,"tag":306,"props":5388,"children":5389},{"class":1728},[5390],{"type":24,"value":5391},"'key_release_event'",{"type":18,"tag":306,"props":5393,"children":5394},{"class":319},[5395],{"type":24,"value":5396},",\n",{"type":18,"tag":306,"props":5398,"children":5399},{"class":308,"line":344},[5400,5404,5408,5413,5418,5423,5427,5431,5436,5441,5446,5450,5455,5459,5464,5468,5473],{"type":18,"tag":306,"props":5401,"children":5402},{"class":319},[5403],{"type":24,"value":3466},{"type":18,"tag":306,"props":5405,"children":5406},{"class":313},[5407],{"type":24,"value":591},{"type":18,"tag":306,"props":5409,"children":5410},{"class":319},[5411],{"type":24,"value":5412}," event: [",{"type":18,"tag":306,"props":5414,"children":5415},{"class":373},[5416],{"type":24,"value":5417},"exit",{"type":18,"tag":306,"props":5419,"children":5420},{"class":319},[5421],{"type":24,"value":5422},"(",{"type":18,"tag":306,"props":5424,"children":5425},{"class":373},[5426],{"type":24,"value":610},{"type":18,"tag":306,"props":5428,"children":5429},{"class":319},[5430],{"type":24,"value":800},{"type":18,"tag":306,"props":5432,"children":5433},{"class":313},[5434],{"type":24,"value":5435},"if",{"type":18,"tag":306,"props":5437,"children":5438},{"class":319},[5439],{"type":24,"value":5440}," event.key ",{"type":18,"tag":306,"props":5442,"children":5443},{"class":313},[5444],{"type":24,"value":5445},"==",{"type":18,"tag":306,"props":5447,"children":5448},{"class":319},[5449],{"type":24,"value":370},{"type":18,"tag":306,"props":5451,"children":5452},{"class":1728},[5453],{"type":24,"value":5454},"'escape'",{"type":18,"tag":306,"props":5456,"children":5457},{"class":319},[5458],{"type":24,"value":370},{"type":18,"tag":306,"props":5460,"children":5461},{"class":313},[5462],{"type":24,"value":5463},"else",{"type":18,"tag":306,"props":5465,"children":5466},{"class":319},[5467],{"type":24,"value":370},{"type":18,"tag":306,"props":5469,"children":5470},{"class":373},[5471],{"type":24,"value":5472},"None",{"type":18,"tag":306,"props":5474,"children":5475},{"class":319},[5476],{"type":24,"value":695},{"type":18,"tag":306,"props":5478,"children":5479},{"class":308,"line":354},[5480],{"type":18,"tag":306,"props":5481,"children":5482},{"class":319},[5483],{"type":24,"value":5484},"plot_arrow(current_x, current_y, current_yaw)\n",{"type":18,"tag":306,"props":5486,"children":5487},{"class":308,"line":379},[5488,5493,5498,5502,5506],{"type":18,"tag":306,"props":5489,"children":5490},{"class":319},[5491],{"type":24,"value":5492},"plt.plot(",{"type":18,"tag":306,"props":5494,"children":5495},{"class":373},[5496],{"type":24,"value":5497},"5",{"type":18,"tag":306,"props":5499,"children":5500},{"class":319},[5501],{"type":24,"value":2049},{"type":18,"tag":306,"props":5503,"children":5504},{"class":373},[5505],{"type":24,"value":5497},{"type":18,"tag":306,"props":5507,"children":5508},{"class":319},[5509],{"type":24,"value":1736},{"type":18,"tag":306,"props":5511,"children":5512},{"class":308,"line":388},[5513,5518,5522,5527,5531,5536,5541,5545,5549,5553,5558,5562,5567,5571,5576,5580,5585],{"type":18,"tag":306,"props":5514,"children":5515},{"class":319},[5516],{"type":24,"value":5517},"plt.plot(ref_path[",{"type":18,"tag":306,"props":5519,"children":5520},{"class":373},[5521],{"type":24,"value":610},{"type":18,"tag":306,"props":5523,"children":5524},{"class":319},[5525],{"type":24,"value":5526},"], ref_path[",{"type":18,"tag":306,"props":5528,"children":5529},{"class":373},[5530],{"type":24,"value":681},{"type":18,"tag":306,"props":5532,"children":5533},{"class":319},[5534],{"type":24,"value":5535},"], ",{"type":18,"tag":306,"props":5537,"children":5538},{"class":3469},[5539],{"type":24,"value":5540},"marker",{"type":18,"tag":306,"props":5542,"children":5543},{"class":313},[5544],{"type":24,"value":365},{"type":18,"tag":306,"props":5546,"children":5547},{"class":1728},[5548],{"type":24,"value":1731},{"type":18,"tag":306,"props":5550,"children":5551},{"class":319},[5552],{"type":24,"value":2049},{"type":18,"tag":306,"props":5554,"children":5555},{"class":3469},[5556],{"type":24,"value":5557},"color",{"type":18,"tag":306,"props":5559,"children":5560},{"class":313},[5561],{"type":24,"value":365},{"type":18,"tag":306,"props":5563,"children":5564},{"class":1728},[5565],{"type":24,"value":5566},"\"blue\"",{"type":18,"tag":306,"props":5568,"children":5569},{"class":319},[5570],{"type":24,"value":2049},{"type":18,"tag":306,"props":5572,"children":5573},{"class":3469},[5574],{"type":24,"value":5575},"label",{"type":18,"tag":306,"props":5577,"children":5578},{"class":313},[5579],{"type":24,"value":365},{"type":18,"tag":306,"props":5581,"children":5582},{"class":1728},[5583],{"type":24,"value":5584},"\"Input Trajectory\"",{"type":18,"tag":306,"props":5586,"children":5587},{"class":319},[5588],{"type":24,"value":1736},{"type":18,"tag":306,"props":5590,"children":5591},{"class":308,"line":410},[5592,5597,5602],{"type":18,"tag":306,"props":5593,"children":5594},{"class":319},[5595],{"type":24,"value":5596},"plt.axis(",{"type":18,"tag":306,"props":5598,"children":5599},{"class":1728},[5600],{"type":24,"value":5601},"\"equal\"",{"type":18,"tag":306,"props":5603,"children":5604},{"class":319},[5605],{"type":24,"value":1736},{"type":18,"tag":306,"props":5607,"children":5608},{"class":308,"line":419},[5609,5614,5619],{"type":18,"tag":306,"props":5610,"children":5611},{"class":319},[5612],{"type":24,"value":5613},"plt.grid(",{"type":18,"tag":306,"props":5615,"children":5616},{"class":373},[5617],{"type":24,"value":5618},"True",{"type":18,"tag":306,"props":5620,"children":5621},{"class":319},[5622],{"type":24,"value":1736},{"type":18,"tag":306,"props":5624,"children":5625},{"class":308,"line":441},[5626],{"type":18,"tag":306,"props":5627,"children":5628},{"class":319},[5629],{"type":24,"value":5630},"plt.legend()\n",{"type":18,"tag":306,"props":5632,"children":5633},{"class":308,"line":462},[5634,5639,5644],{"type":18,"tag":306,"props":5635,"children":5636},{"class":319},[5637],{"type":24,"value":5638},"plt.pause(",{"type":18,"tag":306,"props":5640,"children":5641},{"class":373},[5642],{"type":24,"value":5643},"0.0001",{"type":18,"tag":306,"props":5645,"children":5646},{"class":319},[5647],{"type":24,"value":5648},")",{"type":18,"tag":5082,"props":5650,"children":5652},{"id":5651},"path-tracking",[5653],{"type":24,"value":5654},"Path Tracking",{"type":18,"tag":27,"props":5656,"children":5657},{},[5658,5660,5665,5667,5672],{"type":24,"value":5659},"The code is all way the same. The different is that, I fit the continuous point into the robot instead of fixed goal point. I use ",{"type":18,"tag":1629,"props":5661,"children":5662},{},[5663],{"type":24,"value":5664},"BeizerCurve",{"type":24,"value":5666}," function to generate ",{"type":18,"tag":78,"props":5668,"children":5669},{},[5670],{"type":24,"value":5671}," Spline Trajectory ",{"type":24,"value":5673}," for the robot.",{"type":18,"tag":27,"props":5675,"children":5676},{},[5677,5679,5686],{"type":24,"value":5678},"The full code is published open-source on my Github. Link here ",{"type":18,"tag":86,"props":5680,"children":5683},{"href":5681,"rel":5682},"https://github.com/SokhengDin/PathTracking/tree/main/PID",[90],[5684],{"type":24,"value":5685},"Github",{"type":24,"value":5687},". Hit the star for me if you like my work .",{"type":18,"tag":5082,"props":5689,"children":5690},{"id":3786},[5691],{"type":24,"value":3789},{"type":18,"tag":3791,"props":5693,"children":5695},{"className":5694},[3794,3795,3796],[5696,5697],{"type":24,"value":3799},{"type":18,"tag":43,"props":5698,"children":5701},{"className":5699,"src":5700},[46],"/topics/robotics/nmpc/Figure_pid_p.png",[],{"type":18,"tag":56,"props":5703,"children":5705},{"className":5704},[59,60,61,62],[5706],{"type":24,"value":5707},"\n    PID Controller with position control on Differential Drive Robot\n",{"type":18,"tag":3791,"props":5709,"children":5711},{"className":5710},[3794,3795,3796],[5712,5713],{"type":24,"value":3799},{"type":18,"tag":43,"props":5714,"children":5717},{"className":5715,"src":5716},[46],"/topics/robotics/nmpc/Figure_pid_t.png",[],{"type":18,"tag":56,"props":5719,"children":5721},{"className":5720},[59,60,61,62],[5722],{"type":24,"value":5723},"\n    PID Controller with path tracking control on Differential Drive Robot\n",{"type":18,"tag":19,"props":5725,"children":5726},{"id":3813},[5727],{"type":24,"value":5728},"In Conclusion",{"type":18,"tag":27,"props":5730,"children":5731},{},[5732],{"type":24,"value":5733},"In my opinion, the PID Controller is an excellent choice for most control system applications due to its simplicity and powerful capabilities in handling complex control challenges arising from various systems.",{"type":18,"tag":19,"props":5735,"children":5737},{"id":5736},"references",[5738],{"type":24,"value":5739},"References",{"type":18,"tag":3829,"props":5741,"children":5742},{},[5743,5756,5761,5772],{"type":18,"tag":136,"props":5744,"children":5745},{},[5746,5748,5755],{"type":24,"value":5747},"BeizerCurve: ",{"type":18,"tag":86,"props":5749,"children":5752},{"href":5750,"rel":5751},"https://en.wikipedia.org/wiki/B%C3%A9zier_curve",[90],[5753],{"type":24,"value":5754},"https://en.wikipedia.org/wiki/Bzier_curve",{"type":24,"value":3900},{"type":18,"tag":136,"props":5757,"children":5758},{},[5759],{"type":24,"value":5760},"PID Controller: Control Systems Engineering by Normal S. Nise.",{"type":18,"tag":136,"props":5762,"children":5763},{},[5764,5766],{"type":24,"value":5765},"Beizer Path : ",{"type":18,"tag":86,"props":5767,"children":5770},{"href":5768,"rel":5769},"https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning/BezierPath",[90],[5771],{"type":24,"value":5768},{"type":18,"tag":136,"props":5773,"children":5774},{},[5775,5777],{"type":24,"value":5776},"PID Lecture : ",{"type":18,"tag":86,"props":5778,"children":5781},{"href":5779,"rel":5780},"https://www.cds.caltech.edu/~murray/courses/cds101/fa02/caltech/astrom-ch6.pdf",[90],[5782],{"type":24,"value":5779},{"type":18,"tag":3855,"children":5784},[5785],{"type":24,"value":5786},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-806137{color:#B392F0;}\n.ct-533739{color:#79B8FF;}\n.ct-326375{color:#6A737D;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":335,"depth":335,"links":5788},[5789,5790,5791,5792,5793,5794,5799,5800],{"id":3886,"depth":335,"text":3889},{"id":3903,"depth":335,"text":3906},{"id":3914,"depth":335,"text":3917},{"id":3978,"depth":335,"text":3981},{"id":4039,"depth":335,"text":4042},{"id":5077,"depth":335,"text":5080,"children":5795},[5796,5797,5798],{"id":5084,"depth":344,"text":5087},{"id":5651,"depth":344,"text":5654},{"id":3786,"depth":344,"text":3789},{"id":3813,"depth":335,"text":5728},{"id":5736,"depth":335,"text":5739},"content:topics:robotics:pid-controller.md","topics/robotics/pid-controller.md",{"_path":5804,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":5805,"description":5806,"slug":5807,"tag":5807,"img":5808,"body":5809,"_type":3870,"_id":5999,"_source":3872,"_file":6000,"_extension":3874},"/topics/robotics/pure-pursuit","Pure Pursuit Controller","Introduction to Pure Pursuit Controller","pure-pursuit","/topics/robotics/nmpc/pure_pursuit.png",{"type":15,"children":5810,"toc":5992},[5811,5816,5826,5832,5837,5890,5896,5901,5953,5959,5964,5987],{"type":18,"tag":19,"props":5812,"children":5814},{"id":5813},"pure-pursuit-controller",[5815],{"type":24,"value":5805},{"type":18,"tag":27,"props":5817,"children":5818},{},[5819,5820,5824],{"type":24,"value":4509},{"type":18,"tag":78,"props":5821,"children":5822},{},[5823],{"type":24,"value":5805},{"type":24,"value":5825}," is a widely-used path-tracking algorithm in robotics and autonomous vehicle navigation. Its primary objective is to guide a vehicle or robot along a predefined path while ensuring precise path-following.",{"type":18,"tag":5082,"props":5827,"children":5829},{"id":5828},"principle-of-operation",[5830],{"type":24,"value":5831},"Principle of Operation",{"type":18,"tag":27,"props":5833,"children":5834},{},[5835],{"type":24,"value":5836},"The operation of the Pure Pursuit Controller is based on a straightforward concept:",{"type":18,"tag":3829,"props":5838,"children":5839},{},[5840,5850,5860,5870,5880],{"type":18,"tag":136,"props":5841,"children":5842},{},[5843,5848],{"type":18,"tag":78,"props":5844,"children":5845},{},[5846],{"type":24,"value":5847},"Path Definition",{"type":24,"value":5849},": The controller works with a defined path, often represented as a series of waypoints or a continuous curve, each associated with specific coordinates (x, y) and curvature information.",{"type":18,"tag":136,"props":5851,"children":5852},{},[5853,5858],{"type":18,"tag":78,"props":5854,"children":5855},{},[5856],{"type":24,"value":5857},"Target Point Selection",{"type":24,"value":5859},": The controller continuously selects a target point ahead of the vehicle. This target point is typically chosen as the point on the path that is a certain fixed distance (known as the \"lookahead distance\") in front of the vehicle.",{"type":18,"tag":136,"props":5861,"children":5862},{},[5863,5868],{"type":18,"tag":78,"props":5864,"children":5865},{},[5866],{"type":24,"value":5867},"Steering Command Calculation",{"type":24,"value":5869},": To navigate toward the target point, the controller calculates the steering command, often represented as the desired steering angle or curvature, required to reach the target point. Commonly, this involves computing the angle between the vehicle's current heading and the vector pointing from the current position to the target point.",{"type":18,"tag":136,"props":5871,"children":5872},{},[5873,5878],{"type":18,"tag":78,"props":5874,"children":5875},{},[5876],{"type":24,"value":5877},"Vehicle Control",{"type":24,"value":5879},": The calculated steering command is used to control the vehicle's steering mechanism (e.g., steering wheel or wheel angles) to guide it toward the target point.",{"type":18,"tag":136,"props":5881,"children":5882},{},[5883,5888],{"type":18,"tag":78,"props":5884,"children":5885},{},[5886],{"type":24,"value":5887},"Iterative Process",{"type":24,"value":5889},": The process is iterative, with the controller continuously selecting new target points ahead as the vehicle advances along the path and adjusting its steering to reach them.",{"type":18,"tag":5082,"props":5891,"children":5893},{"id":5892},"advantages",[5894],{"type":24,"value":5895},"Advantages",{"type":18,"tag":27,"props":5897,"children":5898},{},[5899],{"type":24,"value":5900},"The Pure Pursuit Controller offers several advantages:",{"type":18,"tag":132,"props":5902,"children":5903},{},[5904,5914,5923,5933,5943],{"type":18,"tag":136,"props":5905,"children":5906},{},[5907,5912],{"type":18,"tag":78,"props":5908,"children":5909},{},[5910],{"type":24,"value":5911},"Simplicity",{"type":24,"value":5913},": It is conceptually simple and easy to implement, making it suitable for a wide range of robotic and vehicle navigation applications.",{"type":18,"tag":136,"props":5915,"children":5916},{},[5917,5921],{"type":18,"tag":78,"props":5918,"children":5919},{},[5920],{"type":24,"value":5654},{"type":24,"value":5922},": The controller excels at accurate path tracking, even in complex environments with curves and turns.",{"type":18,"tag":136,"props":5924,"children":5925},{},[5926,5931],{"type":18,"tag":78,"props":5927,"children":5928},{},[5929],{"type":24,"value":5930},"Real-Time Operation",{"type":24,"value":5932},": It can operate in real-time, making it well-suited for dynamic environments where quick decision-making is crucial.",{"type":18,"tag":136,"props":5934,"children":5935},{},[5936,5941],{"type":18,"tag":78,"props":5937,"children":5938},{},[5939],{"type":24,"value":5940},"Adaptability",{"type":24,"value":5942},": The controller can adapt to changes in the path, such as deviations caused by obstacles or unexpected conditions, by continuously updating the target point.",{"type":18,"tag":136,"props":5944,"children":5945},{},[5946,5951],{"type":18,"tag":78,"props":5947,"children":5948},{},[5949],{"type":24,"value":5950},"Low Computational Overhead",{"type":24,"value":5952},": Compared to some other control algorithms, the Pure Pursuit Controller often has low computational requirements, which is advantageous for resource-constrained systems.",{"type":18,"tag":5082,"props":5954,"children":5956},{"id":5955},"limitations",[5957],{"type":24,"value":5958},"Limitations",{"type":18,"tag":27,"props":5960,"children":5961},{},[5962],{"type":24,"value":5963},"Despite its advantages, the Pure Pursuit Controller has some limitations:",{"type":18,"tag":132,"props":5965,"children":5966},{},[5967,5977],{"type":18,"tag":136,"props":5968,"children":5969},{},[5970,5975],{"type":18,"tag":78,"props":5971,"children":5972},{},[5973],{"type":24,"value":5974},"Lookahead Distance Sensitivity",{"type":24,"value":5976},": Its performance can be sensitive to the choice of the lookahead distance, which requires careful tuning for optimal path tracking.",{"type":18,"tag":136,"props":5978,"children":5979},{},[5980,5985],{"type":18,"tag":78,"props":5981,"children":5982},{},[5983],{"type":24,"value":5984},"Non-Holonomic Assumption",{"type":24,"value":5986},": The controller assumes that the vehicle is non-holonomic, meaning it cannot move sideways. This assumption may not hold for certain types of vehicles, such as omnidirectional robots.",{"type":18,"tag":27,"props":5988,"children":5989},{},[5990],{"type":24,"value":5991},"In summary, the Pure Pursuit Controller is a straightforward yet effective algorithm for path tracking and navigation. Its ability to calculate a steering command based on a selected target point ahead of the vehicle makes it a valuable tool for applications ranging from autonomous cars to mobile robots.",{"title":8,"searchDepth":335,"depth":335,"links":5993},[5994],{"id":5813,"depth":335,"text":5805,"children":5995},[5996,5997,5998],{"id":5828,"depth":344,"text":5831},{"id":5892,"depth":344,"text":5895},{"id":5955,"depth":344,"text":5958},"content:topics:robotics:pure-pursuit.md","topics/robotics/pure-pursuit.md",{"_path":6002,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6003,"description":6004,"slug":6005,"tag":6005,"body":6006,"_type":3870,"_id":6207,"_source":3872,"_file":6208,"_extension":3874},"/topics/robotics/stanley-controller","Stanley Controller","Introduction to Stanley Controller","stanley",{"type":15,"children":6007,"toc":6200},[6008,6013,6023,6027,6032,6093,6097,6102,6153,6157,6162,6195],{"type":18,"tag":19,"props":6009,"children":6011},{"id":6010},"stanley-controller",[6012],{"type":24,"value":6003},{"type":18,"tag":27,"props":6014,"children":6015},{},[6016,6017,6021],{"type":24,"value":4509},{"type":18,"tag":78,"props":6018,"children":6019},{},[6020],{"type":24,"value":6003},{"type":24,"value":6022}," is an advanced path-tracking algorithm primarily used in the field of autonomous vehicle navigation. It is named after its creator, Professor John K. Hedrick, who developed it at Stanford University. The Stanley Controller is designed to enable a vehicle to follow a predefined path with high accuracy and stability.",{"type":18,"tag":5082,"props":6024,"children":6025},{"id":5828},[6026],{"type":24,"value":5831},{"type":18,"tag":27,"props":6028,"children":6029},{},[6030],{"type":24,"value":6031},"The Stanley Controller operates based on a combination of control and feedback mechanisms:",{"type":18,"tag":3829,"props":6033,"children":6034},{},[6035,6044,6054,6064,6074,6083],{"type":18,"tag":136,"props":6036,"children":6037},{},[6038,6042],{"type":18,"tag":78,"props":6039,"children":6040},{},[6041],{"type":24,"value":5847},{"type":24,"value":6043},": A predefined path is represented as a series of waypoints or a continuous curve. Each waypoint is associated with specific coordinates (x, y) and often includes additional information like desired speed and curvature.",{"type":18,"tag":136,"props":6045,"children":6046},{},[6047,6052],{"type":18,"tag":78,"props":6048,"children":6049},{},[6050],{"type":24,"value":6051},"Cross-Track Error (CTE) Calculation",{"type":24,"value":6053},": The controller calculates the cross-track error, which is the perpendicular distance between the vehicle's current position and the desired path. This error represents how far the vehicle has deviated from the path.",{"type":18,"tag":136,"props":6055,"children":6056},{},[6057,6062],{"type":18,"tag":78,"props":6058,"children":6059},{},[6060],{"type":24,"value":6061},"Heading Error Calculation",{"type":24,"value":6063},": The heading error, which is the difference between the vehicle's current heading (yaw angle) and the desired path's tangent angle at the nearest waypoint, is also computed.",{"type":18,"tag":136,"props":6065,"children":6066},{},[6067,6072],{"type":18,"tag":78,"props":6068,"children":6069},{},[6070],{"type":24,"value":6071},"Control Command Generation",{"type":24,"value":6073},": Using the calculated cross-track error and heading error, the Stanley Controller generates control commands. These commands typically include steering angle adjustments and throttle/brake control to minimize both errors.",{"type":18,"tag":136,"props":6075,"children":6076},{},[6077,6081],{"type":18,"tag":78,"props":6078,"children":6079},{},[6080],{"type":24,"value":5877},{"type":24,"value":6082},": The generated control commands are applied to the vehicle's steering and throttle/brake systems to guide it back to the desired path.",{"type":18,"tag":136,"props":6084,"children":6085},{},[6086,6091],{"type":18,"tag":78,"props":6087,"children":6088},{},[6089],{"type":24,"value":6090},"Iterative Feedback",{"type":24,"value":6092},": The process is iterative, with the controller continuously recalculating the cross-track and heading errors and adjusting the control commands to keep the vehicle on track.",{"type":18,"tag":5082,"props":6094,"children":6095},{"id":5892},[6096],{"type":24,"value":5895},{"type":18,"tag":27,"props":6098,"children":6099},{},[6100],{"type":24,"value":6101},"The Stanley Controller offers several advantages:",{"type":18,"tag":132,"props":6103,"children":6104},{},[6105,6115,6125,6134,6143],{"type":18,"tag":136,"props":6106,"children":6107},{},[6108,6113],{"type":18,"tag":78,"props":6109,"children":6110},{},[6111],{"type":24,"value":6112},"High Accuracy",{"type":24,"value":6114},": It is known for its ability to achieve precise path-following, even in challenging conditions and complex road geometries.",{"type":18,"tag":136,"props":6116,"children":6117},{},[6118,6123],{"type":18,"tag":78,"props":6119,"children":6120},{},[6121],{"type":24,"value":6122},"Stability",{"type":24,"value":6124},": The controller's feedback mechanisms contribute to stable and smooth vehicle motion, reducing the risk of overshooting or oscillations.",{"type":18,"tag":136,"props":6126,"children":6127},{},[6128,6132],{"type":18,"tag":78,"props":6129,"children":6130},{},[6131],{"type":24,"value":5940},{"type":24,"value":6133},": The Stanley Controller can adapt to changes in the path, such as deviations caused by obstacles or dynamic road conditions.",{"type":18,"tag":136,"props":6135,"children":6136},{},[6137,6141],{"type":18,"tag":78,"props":6138,"children":6139},{},[6140],{"type":24,"value":5930},{"type":24,"value":6142},": It can operate in real-time, making it suitable for autonomous vehicle navigation in dynamic environments.",{"type":18,"tag":136,"props":6144,"children":6145},{},[6146,6151],{"type":18,"tag":78,"props":6147,"children":6148},{},[6149],{"type":24,"value":6150},"Versatility",{"type":24,"value":6152},": While primarily used in autonomous vehicles, the Stanley Controller's principles can be applied to various path-tracking tasks.",{"type":18,"tag":5082,"props":6154,"children":6155},{"id":5955},[6156],{"type":24,"value":5958},{"type":18,"tag":27,"props":6158,"children":6159},{},[6160],{"type":24,"value":6161},"Despite its advantages, the Stanley Controller has some limitations:",{"type":18,"tag":132,"props":6163,"children":6164},{},[6165,6175,6185],{"type":18,"tag":136,"props":6166,"children":6167},{},[6168,6173],{"type":18,"tag":78,"props":6169,"children":6170},{},[6171],{"type":24,"value":6172},"Complexity",{"type":24,"value":6174},": Implementing the Stanley Controller can be more complex than some other control algorithms due to its mathematical calculations and tuning requirements.",{"type":18,"tag":136,"props":6176,"children":6177},{},[6178,6183],{"type":18,"tag":78,"props":6179,"children":6180},{},[6181],{"type":24,"value":6182},"Initialization",{"type":24,"value":6184},": It relies on accurate initialization, including knowledge of the vehicle's initial position and heading relative to the path.",{"type":18,"tag":136,"props":6186,"children":6187},{},[6188,6193],{"type":18,"tag":78,"props":6189,"children":6190},{},[6191],{"type":24,"value":6192},"Sensitivity to Noise",{"type":24,"value":6194},": Like many feedback-based controllers, the Stanley Controller can be sensitive to noisy sensor data and require robust sensor fusion techniques.",{"type":18,"tag":27,"props":6196,"children":6197},{},[6198],{"type":24,"value":6199},"In summary, the Stanley Controller is an advanced path-tracking algorithm known for its accuracy and stability, making it a valuable tool in the field of autonomous vehicle navigation. Proper implementation and tuning are essential to harness its full potential.",{"title":8,"searchDepth":335,"depth":335,"links":6201},[6202],{"id":6010,"depth":335,"text":6003,"children":6203},[6204,6205,6206],{"id":5828,"depth":344,"text":5831},{"id":5892,"depth":344,"text":5895},{"id":5955,"depth":344,"text":5958},"content:topics:robotics:stanley-controller.md","topics/robotics/stanley-controller.md",1694081774322]