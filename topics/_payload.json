[{"data":1,"prerenderedAt":6451},["Reactive",2],{"topics/robotics":3},[4,4119,6045,6243],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":9,"description":10,"author":11,"slug":12,"tag":12,"img":13,"body":14,"_type":4114,"_id":4115,"_source":4116,"_file":4117,"_extension":4118},"/topics/robotics/nonlinear-mpc","robotics",false,"","Nonlinear Model Predictive Control","Introduction to Nonlinear Model Predictive Control","Din Sokheng","nonlinear-mpc","/topics/robotics/nmpc/predict_horizon.png",{"type":15,"children":16,"toc":4103},"root",[17,26,32,55,66,72,86,91,96,101,105,110,154,159,163,168,215,221,234,238,243,248,253,258,262,266,272,277,292,298,303,1547,1553,1558,1562,1577,1581,1586,1590,1596,1601,1605,1618,1622,1626,1630,1636,1649,1681,1686,2219,2224,2402,2411,2667,2672,3686,3691,4042,4048,4053,4059,4098],{"type":18,"tag":19,"props":20,"children":22},"element","h2",{"id":21},"what-is-model-predictive-control",[23],{"type":24,"value":25},"text","What is Model Predictive Control ?",{"type":18,"tag":27,"props":28,"children":29},"p",{},[30],{"type":24,"value":31},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":18,"tag":33,"props":34,"children":41},"div",{"className":35},[36,37,38,39,40],"grid","grid-cols-2","space-x-10","justify-center","items-center",[42,50],{"type":18,"tag":43,"props":44,"children":49},"img",{"className":45,"src":13,"width":47,"height":48},[46],"mx-auto","600px","300px",[],{"type":18,"tag":43,"props":51,"children":54},{"className":52,"src":53,"width":47,"height":48},[46],"/topics/robotics/nmpc/set_points.png",[],{"type":18,"tag":56,"props":57,"children":63},"figcaption",{"className":58},[59,60,61,62],"text-center","text-sm","text-neutral-600","dark:text-neutral-400",[64],{"type":24,"value":65},"\n      A car with finite horizons prediction and set point prediction over finite horizons.\n",{"type":18,"tag":19,"props":67,"children":69},{"id":68},"nonlinear-model-predictive-control",[70],{"type":24,"value":71},"Nonlinear Model Predictive Control ?",{"type":18,"tag":27,"props":73,"children":74},{},[75,77,81,83],{"type":24,"value":76},"Nonlinear Model Predictive Control has the same basic core of its control algorithms. The different is about the mathematical solving over the system. ",{"type":18,"tag":78,"props":79,"children":80},"br",{},[],{"type":24,"value":82},"\nIn the real-life application, most of the system certainly nonlinear and it's more complex than linear model. Linear systems are mostly time-invariant, meaning that the response of the system input is time-independent. Nonlinear systems are time-varying meaning that the response of the system to any input is time-dependent.",{"type":18,"tag":78,"props":84,"children":85},{},[],{"type":18,"tag":27,"props":87,"children":88},{},[89],{"type":24,"value":90},"The system model can be represent as state-space model",{"type":18,"tag":92,"props":93,"children":95},"math-render-b",{"latex-express":94,"styles":59}," \\dot{X} = f(X,U) ",[],{"type":18,"tag":27,"props":97,"children":98},{},[99],{"type":24,"value":100},"Nonlinear Model Predictive Control also works by solving the quardratic cost subject to the nonlinear function over a future finite horizons. The quadractic cost can be define as",{"type":18,"tag":92,"props":102,"children":104},{"latex-express":103,"styles":59},"J(x,u) = \\displaystyle\\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})",[],{"type":18,"tag":27,"props":106,"children":107},{},[108],{"type":24,"value":109},"Notation",{"type":18,"tag":111,"props":112,"children":113},"ul",{},[114,127,136,145],{"type":18,"tag":115,"props":116,"children":117},"li",{},[118,125],{"type":18,"tag":119,"props":120,"children":124},"math-render",{"latex-express":121,"styles":122,"dist-cond":123},"X","inline-flex","false",[],{"type":24,"value":126}," is the state of the system. This shall be obtained from the optimiztion problem.",{"type":18,"tag":115,"props":128,"children":129},{},[130,134],{"type":18,"tag":119,"props":131,"children":133},{"latex-express":132,"styles":122,"dist-cond":123},"X_{ref}",[],{"type":24,"value":135}," is the reference state of the system or desired input state.",{"type":18,"tag":115,"props":137,"children":138},{},[139,143],{"type":18,"tag":119,"props":140,"children":142},{"latex-express":141,"styles":122,"dist-cond":123},"U",[],{"type":24,"value":144}," is the input control of the system. This is a solution obtained from the optimization problem.",{"type":18,"tag":115,"props":146,"children":147},{},[148,152],{"type":18,"tag":119,"props":149,"children":151},{"latex-express":150,"styles":122,"dist-cond":123},"U_{ref}",[],{"type":24,"value":153}," is the reference control of the system or desired input control.",{"type":18,"tag":27,"props":155,"children":156},{},[157],{"type":24,"value":158},"Rewrite the optimization of NMPC problem.",{"type":18,"tag":92,"props":160,"children":162},{"latex-express":161,"styles":59},"\n      \\begin{align*}\n            \\min_{u_{0}, u_{1}, ..., u_{N-1} } \\quad \\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}&Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})\\\\\n            \\text{subject to} \\quad & x_{k+1} = f(x_k, u_k) \\quad \\text{(System dynamics)} \\\\\n            & g(x_k, x_k) \\leq 0 \\quad \\text{(State constraints)} \\\\\n            & h(x_k, x_k) \\leq 0 \\quad \\text{(Input constraints)} \\\\\n            & p(x_k) \\leq 0 \\quad \\text{(Path constraints)} \\\\\n            & x_0=x(0)  \\quad \\text{(Initial condition)}\n      \\end{align*}\n            ",[],{"type":18,"tag":27,"props":164,"children":165},{},[166],{"type":24,"value":167},"Which,",{"type":18,"tag":111,"props":169,"children":170},{},[171,180,189,198,206],{"type":18,"tag":115,"props":172,"children":173},{},[174,178],{"type":18,"tag":119,"props":175,"children":177},{"latex-express":176,"styles":122,"dist-cond":123},"f",[],{"type":24,"value":179}," is the system dynamics model.",{"type":18,"tag":115,"props":181,"children":182},{},[183,187],{"type":18,"tag":119,"props":184,"children":186},{"latex-express":185,"styles":122,"dist-cond":123},"g",[],{"type":24,"value":188}," is the state constraints of the system.",{"type":18,"tag":115,"props":190,"children":191},{},[192,196],{"type":18,"tag":119,"props":193,"children":195},{"latex-express":194,"styles":122,"dist-cond":123},"h",[],{"type":24,"value":197}," is the input constraints of the system.",{"type":18,"tag":115,"props":199,"children":200},{},[201,204],{"type":18,"tag":119,"props":202,"children":203},{"latex-express":27,"styles":122,"dist-cond":123},[],{"type":24,"value":205}," is the path constraint, it help to ensure the safety following path of our system.",{"type":18,"tag":115,"props":207,"children":208},{},[209,213],{"type":18,"tag":119,"props":210,"children":212},{"latex-express":211,"styles":122,"dist-cond":123},"\\phi(X_{N})",[],{"type":24,"value":214}," is the terminal cost of the system.",{"type":18,"tag":19,"props":216,"children":218},{"id":217},"discretize-the-system-model-with-runge-kutta-4th-order",[219],{"type":24,"value":220},"Discretize the system model with Runge-Kutta 4th order",{"type":18,"tag":27,"props":222,"children":223},{},[224,226,232],{"type":24,"value":225},"I will choose a simple system mode robot ",{"type":18,"tag":227,"props":228,"children":229},"strong",{},[230],{"type":24,"value":231}," DifferentialDrive ",{"type":24,"value":233},".\nThe forward kinematic equation",{"type":18,"tag":92,"props":235,"children":237},{"latex-express":236,"styles":59},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":239,"children":240},{},[241],{"type":24,"value":242},"State constraints are the restriction imposed on the state variable of the system. It helps our optimizer not to obtain the solution that is outside the boundary region and also ensure the system to always perform the minimal action control in any critical condition.",{"type":18,"tag":27,"props":244,"children":245},{},[246],{"type":24,"value":247},"We, then can do the approximation",{"type":18,"tag":92,"props":249,"children":252},{"latex-express":250,"styles":59,"dist-cond":251},"\n    \\begin{align*}\n        k_{1} &= f(x^{*}, u^{*}) \\\\\n        k_{2} &= f(x^{*}+k_{1}\\frac{dt}{2}, u^{*}) \\\\ \n        k_{3} &= f(x^{*}+k_{2}\\frac{dt}{2}, u^{*}) \\\\\n        k_{4} &= f(x^{*}+k_{3}dt, u^{*}) \\\\ \n        \\Rightarrow{x_{k+1} } &= x_{k} + (k_{1}+2k_{2}+2k_{3}+k_{4})\\frac{dt}{6}\n    \\end{align*}\n","true",[],{"type":18,"tag":27,"props":254,"children":255},{},[256],{"type":24,"value":257},"Let's evaluate it with our model.",{"type":18,"tag":92,"props":259,"children":261},{"latex-express":260,"styles":59},"\n      \\begin{align*}\n        k_{1} &= \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n        k_{2} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{3} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{4} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n    \\end{align*}\n      ",[],{"type":18,"tag":92,"props":263,"children":265},{"latex-express":264,"styles":59},"\n      \\Rightarrow{x_{k+1} } = x_{k} + \\left( \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} + \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix}   \\right) \\frac{dt}{6}\n",[],{"type":18,"tag":19,"props":267,"children":269},{"id":268},"result",[270],{"type":24,"value":271},"Result",{"type":18,"tag":27,"props":273,"children":274},{},[275],{"type":24,"value":276},"I use MPC to control the differential drive robot to move from it zero position the the desired postion that I want to follow !.\nI generate a circle trajectory and I fit this curve into my beautiful and robustness cost and then volia !!!.",{"type":18,"tag":278,"props":279,"children":284},"figure",{"className":280},[281,282,283],"mb-4","inline-block","max-w-sm",[285,287],{"type":24,"value":286},"\n  ",{"type":18,"tag":43,"props":288,"children":291},{"className":289,"src":290,"width":47,"height":48},[46],"/topics/robotics/nmpc/diff_mpc.png",[],{"type":18,"tag":56,"props":293,"children":295},{"className":294},[59,60,61,62],[296],{"type":24,"value":297},"\n    Plot of differential drive robot follow the circle trajectory !!!.\n",{"type":18,"tag":27,"props":299,"children":300},{},[301],{"type":24,"value":302},"How to implement it in Python ???",{"type":18,"tag":304,"props":305,"children":310},"code",{"className":306,"code":308,"language":309,"meta":8},[307],"language-python","import numpy as np\n\n## Define sampling time dt 100Hz\ndt = 0.01\n## Define the num steps for function approximation \nnum_steps = 100\n## Define initial states\nx = 0.0\ny = 0.0\nyaw = 0.0\n## Define input control\nv = 1.5 #m/s\nomega = 1.57 #rad/s\n## Define state represent model\n### define lambda function take variable x\nf = lambda x, u :  np.array([\n      [u[0]*np.cos(x[2])],\n      [u[0]*np.sin(x[2])],\n      [u[1]]\n])\n\nfor _ in range(num_steps):\n    k1 = f([x, y, yaw], [v, omega])\n    k2 = f([x + (dt / 2) * k1[0], y + (dt / 2) * k1[1], yaw + (dt / 2) * k1[2]], [v, omega])\n    k3 = f([x + (dt / 2) * k2[0], y + (dt / 2) * k2[1], yaw + (dt / 2) * k2[2]], [v, omega])\n    k4 = f([x + dt * k3[0], y + dt * k3[1], yaw + dt * k3[2]], [v, omega])\n\n    # Update state of the robot\n    x += (k1[0] + 2 * k2[0] + 2 * k3[0] + k4[0]) * dt / 6\n    y += (k1[1] + 2 * k2[1] + 2 * k3[1] + k4[1]) * dt / 6\n    yaw += (k1[2] + 2 * k2[2] + 2 * k3[2] + k4[2]) * dt / 6\n","python",[311],{"type":18,"tag":312,"props":313,"children":314},"pre",{},[315],{"type":18,"tag":304,"props":316,"children":317},{"__ignoreMap":8},[318,346,355,365,390,399,421,430,452,473,494,503,534,565,574,583,610,649,682,700,709,717,750,768,914,1052,1143,1151,1165,1296,1421],{"type":18,"tag":319,"props":320,"children":323},"span",{"class":321,"line":322},"line",1,[324,330,336,341],{"type":18,"tag":319,"props":325,"children":327},{"class":326},"ct-857441",[328],{"type":24,"value":329},"import",{"type":18,"tag":319,"props":331,"children":333},{"class":332},"ct-767297",[334],{"type":24,"value":335}," numpy ",{"type":18,"tag":319,"props":337,"children":338},{"class":326},[339],{"type":24,"value":340},"as",{"type":18,"tag":319,"props":342,"children":343},{"class":332},[344],{"type":24,"value":345}," np\n",{"type":18,"tag":319,"props":347,"children":349},{"class":321,"line":348},2,[350],{"type":18,"tag":319,"props":351,"children":352},{},[353],{"type":24,"value":354},"\n",{"type":18,"tag":319,"props":356,"children":358},{"class":321,"line":357},3,[359],{"type":18,"tag":319,"props":360,"children":362},{"class":361},"ct-326375",[363],{"type":24,"value":364},"## Define sampling time dt 100Hz\n",{"type":18,"tag":319,"props":366,"children":368},{"class":321,"line":367},4,[369,374,379,384],{"type":18,"tag":319,"props":370,"children":371},{"class":332},[372],{"type":24,"value":373},"dt ",{"type":18,"tag":319,"props":375,"children":376},{"class":326},[377],{"type":24,"value":378},"=",{"type":18,"tag":319,"props":380,"children":381},{"class":332},[382],{"type":24,"value":383}," ",{"type":18,"tag":319,"props":385,"children":387},{"class":386},"ct-533739",[388],{"type":24,"value":389},"0.01\n",{"type":18,"tag":319,"props":391,"children":393},{"class":321,"line":392},5,[394],{"type":18,"tag":319,"props":395,"children":396},{"class":361},[397],{"type":24,"value":398},"## Define the num steps for function approximation \n",{"type":18,"tag":319,"props":400,"children":402},{"class":321,"line":401},6,[403,408,412,416],{"type":18,"tag":319,"props":404,"children":405},{"class":332},[406],{"type":24,"value":407},"num_steps ",{"type":18,"tag":319,"props":409,"children":410},{"class":326},[411],{"type":24,"value":378},{"type":18,"tag":319,"props":413,"children":414},{"class":332},[415],{"type":24,"value":383},{"type":18,"tag":319,"props":417,"children":418},{"class":386},[419],{"type":24,"value":420},"100\n",{"type":18,"tag":319,"props":422,"children":424},{"class":321,"line":423},7,[425],{"type":18,"tag":319,"props":426,"children":427},{"class":361},[428],{"type":24,"value":429},"## Define initial states\n",{"type":18,"tag":319,"props":431,"children":433},{"class":321,"line":432},8,[434,439,443,447],{"type":18,"tag":319,"props":435,"children":436},{"class":332},[437],{"type":24,"value":438},"x ",{"type":18,"tag":319,"props":440,"children":441},{"class":326},[442],{"type":24,"value":378},{"type":18,"tag":319,"props":444,"children":445},{"class":332},[446],{"type":24,"value":383},{"type":18,"tag":319,"props":448,"children":449},{"class":386},[450],{"type":24,"value":451},"0.0\n",{"type":18,"tag":319,"props":453,"children":455},{"class":321,"line":454},9,[456,461,465,469],{"type":18,"tag":319,"props":457,"children":458},{"class":332},[459],{"type":24,"value":460},"y ",{"type":18,"tag":319,"props":462,"children":463},{"class":326},[464],{"type":24,"value":378},{"type":18,"tag":319,"props":466,"children":467},{"class":332},[468],{"type":24,"value":383},{"type":18,"tag":319,"props":470,"children":471},{"class":386},[472],{"type":24,"value":451},{"type":18,"tag":319,"props":474,"children":476},{"class":321,"line":475},10,[477,482,486,490],{"type":18,"tag":319,"props":478,"children":479},{"class":332},[480],{"type":24,"value":481},"yaw ",{"type":18,"tag":319,"props":483,"children":484},{"class":326},[485],{"type":24,"value":378},{"type":18,"tag":319,"props":487,"children":488},{"class":332},[489],{"type":24,"value":383},{"type":18,"tag":319,"props":491,"children":492},{"class":386},[493],{"type":24,"value":451},{"type":18,"tag":319,"props":495,"children":497},{"class":321,"line":496},11,[498],{"type":18,"tag":319,"props":499,"children":500},{"class":361},[501],{"type":24,"value":502},"## Define input control\n",{"type":18,"tag":319,"props":504,"children":506},{"class":321,"line":505},12,[507,512,516,520,525,529],{"type":18,"tag":319,"props":508,"children":509},{"class":332},[510],{"type":24,"value":511},"v ",{"type":18,"tag":319,"props":513,"children":514},{"class":326},[515],{"type":24,"value":378},{"type":18,"tag":319,"props":517,"children":518},{"class":332},[519],{"type":24,"value":383},{"type":18,"tag":319,"props":521,"children":522},{"class":386},[523],{"type":24,"value":524},"1.5",{"type":18,"tag":319,"props":526,"children":527},{"class":332},[528],{"type":24,"value":383},{"type":18,"tag":319,"props":530,"children":531},{"class":361},[532],{"type":24,"value":533},"#m/s\n",{"type":18,"tag":319,"props":535,"children":537},{"class":321,"line":536},13,[538,543,547,551,556,560],{"type":18,"tag":319,"props":539,"children":540},{"class":332},[541],{"type":24,"value":542},"omega ",{"type":18,"tag":319,"props":544,"children":545},{"class":326},[546],{"type":24,"value":378},{"type":18,"tag":319,"props":548,"children":549},{"class":332},[550],{"type":24,"value":383},{"type":18,"tag":319,"props":552,"children":553},{"class":386},[554],{"type":24,"value":555},"1.57",{"type":18,"tag":319,"props":557,"children":558},{"class":332},[559],{"type":24,"value":383},{"type":18,"tag":319,"props":561,"children":562},{"class":361},[563],{"type":24,"value":564},"#rad/s\n",{"type":18,"tag":319,"props":566,"children":568},{"class":321,"line":567},14,[569],{"type":18,"tag":319,"props":570,"children":571},{"class":361},[572],{"type":24,"value":573},"## Define state represent model\n",{"type":18,"tag":319,"props":575,"children":577},{"class":321,"line":576},15,[578],{"type":18,"tag":319,"props":579,"children":580},{"class":361},[581],{"type":24,"value":582},"### define lambda function take variable x\n",{"type":18,"tag":319,"props":584,"children":586},{"class":321,"line":585},16,[587,592,596,600,605],{"type":18,"tag":319,"props":588,"children":589},{"class":332},[590],{"type":24,"value":591},"f ",{"type":18,"tag":319,"props":593,"children":594},{"class":326},[595],{"type":24,"value":378},{"type":18,"tag":319,"props":597,"children":598},{"class":332},[599],{"type":24,"value":383},{"type":18,"tag":319,"props":601,"children":602},{"class":326},[603],{"type":24,"value":604},"lambda",{"type":18,"tag":319,"props":606,"children":607},{"class":332},[608],{"type":24,"value":609}," x, u :  np.array([\n",{"type":18,"tag":319,"props":611,"children":613},{"class":321,"line":612},17,[614,619,624,629,634,639,644],{"type":18,"tag":319,"props":615,"children":616},{"class":332},[617],{"type":24,"value":618},"      [u[",{"type":18,"tag":319,"props":620,"children":621},{"class":386},[622],{"type":24,"value":623},"0",{"type":18,"tag":319,"props":625,"children":626},{"class":332},[627],{"type":24,"value":628},"]",{"type":18,"tag":319,"props":630,"children":631},{"class":326},[632],{"type":24,"value":633},"*",{"type":18,"tag":319,"props":635,"children":636},{"class":332},[637],{"type":24,"value":638},"np.cos(x[",{"type":18,"tag":319,"props":640,"children":641},{"class":386},[642],{"type":24,"value":643},"2",{"type":18,"tag":319,"props":645,"children":646},{"class":332},[647],{"type":24,"value":648},"])],\n",{"type":18,"tag":319,"props":650,"children":652},{"class":321,"line":651},18,[653,657,661,665,669,674,678],{"type":18,"tag":319,"props":654,"children":655},{"class":332},[656],{"type":24,"value":618},{"type":18,"tag":319,"props":658,"children":659},{"class":386},[660],{"type":24,"value":623},{"type":18,"tag":319,"props":662,"children":663},{"class":332},[664],{"type":24,"value":628},{"type":18,"tag":319,"props":666,"children":667},{"class":326},[668],{"type":24,"value":633},{"type":18,"tag":319,"props":670,"children":671},{"class":332},[672],{"type":24,"value":673},"np.sin(x[",{"type":18,"tag":319,"props":675,"children":676},{"class":386},[677],{"type":24,"value":643},{"type":18,"tag":319,"props":679,"children":680},{"class":332},[681],{"type":24,"value":648},{"type":18,"tag":319,"props":683,"children":685},{"class":321,"line":684},19,[686,690,695],{"type":18,"tag":319,"props":687,"children":688},{"class":332},[689],{"type":24,"value":618},{"type":18,"tag":319,"props":691,"children":692},{"class":386},[693],{"type":24,"value":694},"1",{"type":18,"tag":319,"props":696,"children":697},{"class":332},[698],{"type":24,"value":699},"]]\n",{"type":18,"tag":319,"props":701,"children":703},{"class":321,"line":702},20,[704],{"type":18,"tag":319,"props":705,"children":706},{"class":332},[707],{"type":24,"value":708},"])\n",{"type":18,"tag":319,"props":710,"children":712},{"class":321,"line":711},21,[713],{"type":18,"tag":319,"props":714,"children":715},{},[716],{"type":24,"value":354},{"type":18,"tag":319,"props":718,"children":720},{"class":321,"line":719},22,[721,726,731,736,740,745],{"type":18,"tag":319,"props":722,"children":723},{"class":326},[724],{"type":24,"value":725},"for",{"type":18,"tag":319,"props":727,"children":728},{"class":332},[729],{"type":24,"value":730}," _ ",{"type":18,"tag":319,"props":732,"children":733},{"class":326},[734],{"type":24,"value":735},"in",{"type":18,"tag":319,"props":737,"children":738},{"class":332},[739],{"type":24,"value":383},{"type":18,"tag":319,"props":741,"children":742},{"class":386},[743],{"type":24,"value":744},"range",{"type":18,"tag":319,"props":746,"children":747},{"class":332},[748],{"type":24,"value":749},"(num_steps):\n",{"type":18,"tag":319,"props":751,"children":753},{"class":321,"line":752},23,[754,759,763],{"type":18,"tag":319,"props":755,"children":756},{"class":332},[757],{"type":24,"value":758},"    k1 ",{"type":18,"tag":319,"props":760,"children":761},{"class":326},[762],{"type":24,"value":378},{"type":18,"tag":319,"props":764,"children":765},{"class":332},[766],{"type":24,"value":767}," f([x, y, yaw], [v, omega])\n",{"type":18,"tag":319,"props":769,"children":771},{"class":321,"line":770},24,[772,777,781,786,791,796,801,805,809,814,818,823,827,832,836,840,844,848,852,856,860,864,868,873,877,881,885,889,893,897,901,905,909],{"type":18,"tag":319,"props":773,"children":774},{"class":332},[775],{"type":24,"value":776},"    k2 ",{"type":18,"tag":319,"props":778,"children":779},{"class":326},[780],{"type":24,"value":378},{"type":18,"tag":319,"props":782,"children":783},{"class":332},[784],{"type":24,"value":785}," f([x ",{"type":18,"tag":319,"props":787,"children":788},{"class":326},[789],{"type":24,"value":790},"+",{"type":18,"tag":319,"props":792,"children":793},{"class":332},[794],{"type":24,"value":795}," (dt ",{"type":18,"tag":319,"props":797,"children":798},{"class":326},[799],{"type":24,"value":800},"/",{"type":18,"tag":319,"props":802,"children":803},{"class":332},[804],{"type":24,"value":383},{"type":18,"tag":319,"props":806,"children":807},{"class":386},[808],{"type":24,"value":643},{"type":18,"tag":319,"props":810,"children":811},{"class":332},[812],{"type":24,"value":813},") ",{"type":18,"tag":319,"props":815,"children":816},{"class":326},[817],{"type":24,"value":633},{"type":18,"tag":319,"props":819,"children":820},{"class":332},[821],{"type":24,"value":822}," k1[",{"type":18,"tag":319,"props":824,"children":825},{"class":386},[826],{"type":24,"value":623},{"type":18,"tag":319,"props":828,"children":829},{"class":332},[830],{"type":24,"value":831},"], y ",{"type":18,"tag":319,"props":833,"children":834},{"class":326},[835],{"type":24,"value":790},{"type":18,"tag":319,"props":837,"children":838},{"class":332},[839],{"type":24,"value":795},{"type":18,"tag":319,"props":841,"children":842},{"class":326},[843],{"type":24,"value":800},{"type":18,"tag":319,"props":845,"children":846},{"class":332},[847],{"type":24,"value":383},{"type":18,"tag":319,"props":849,"children":850},{"class":386},[851],{"type":24,"value":643},{"type":18,"tag":319,"props":853,"children":854},{"class":332},[855],{"type":24,"value":813},{"type":18,"tag":319,"props":857,"children":858},{"class":326},[859],{"type":24,"value":633},{"type":18,"tag":319,"props":861,"children":862},{"class":332},[863],{"type":24,"value":822},{"type":18,"tag":319,"props":865,"children":866},{"class":386},[867],{"type":24,"value":694},{"type":18,"tag":319,"props":869,"children":870},{"class":332},[871],{"type":24,"value":872},"], yaw ",{"type":18,"tag":319,"props":874,"children":875},{"class":326},[876],{"type":24,"value":790},{"type":18,"tag":319,"props":878,"children":879},{"class":332},[880],{"type":24,"value":795},{"type":18,"tag":319,"props":882,"children":883},{"class":326},[884],{"type":24,"value":800},{"type":18,"tag":319,"props":886,"children":887},{"class":332},[888],{"type":24,"value":383},{"type":18,"tag":319,"props":890,"children":891},{"class":386},[892],{"type":24,"value":643},{"type":18,"tag":319,"props":894,"children":895},{"class":332},[896],{"type":24,"value":813},{"type":18,"tag":319,"props":898,"children":899},{"class":326},[900],{"type":24,"value":633},{"type":18,"tag":319,"props":902,"children":903},{"class":332},[904],{"type":24,"value":822},{"type":18,"tag":319,"props":906,"children":907},{"class":386},[908],{"type":24,"value":643},{"type":18,"tag":319,"props":910,"children":911},{"class":332},[912],{"type":24,"value":913},"]], [v, omega])\n",{"type":18,"tag":319,"props":915,"children":917},{"class":321,"line":916},25,[918,923,927,931,935,939,943,947,951,955,959,964,968,972,976,980,984,988,992,996,1000,1004,1008,1012,1016,1020,1024,1028,1032,1036,1040,1044,1048],{"type":18,"tag":319,"props":919,"children":920},{"class":332},[921],{"type":24,"value":922},"    k3 ",{"type":18,"tag":319,"props":924,"children":925},{"class":326},[926],{"type":24,"value":378},{"type":18,"tag":319,"props":928,"children":929},{"class":332},[930],{"type":24,"value":785},{"type":18,"tag":319,"props":932,"children":933},{"class":326},[934],{"type":24,"value":790},{"type":18,"tag":319,"props":936,"children":937},{"class":332},[938],{"type":24,"value":795},{"type":18,"tag":319,"props":940,"children":941},{"class":326},[942],{"type":24,"value":800},{"type":18,"tag":319,"props":944,"children":945},{"class":332},[946],{"type":24,"value":383},{"type":18,"tag":319,"props":948,"children":949},{"class":386},[950],{"type":24,"value":643},{"type":18,"tag":319,"props":952,"children":953},{"class":332},[954],{"type":24,"value":813},{"type":18,"tag":319,"props":956,"children":957},{"class":326},[958],{"type":24,"value":633},{"type":18,"tag":319,"props":960,"children":961},{"class":332},[962],{"type":24,"value":963}," k2[",{"type":18,"tag":319,"props":965,"children":966},{"class":386},[967],{"type":24,"value":623},{"type":18,"tag":319,"props":969,"children":970},{"class":332},[971],{"type":24,"value":831},{"type":18,"tag":319,"props":973,"children":974},{"class":326},[975],{"type":24,"value":790},{"type":18,"tag":319,"props":977,"children":978},{"class":332},[979],{"type":24,"value":795},{"type":18,"tag":319,"props":981,"children":982},{"class":326},[983],{"type":24,"value":800},{"type":18,"tag":319,"props":985,"children":986},{"class":332},[987],{"type":24,"value":383},{"type":18,"tag":319,"props":989,"children":990},{"class":386},[991],{"type":24,"value":643},{"type":18,"tag":319,"props":993,"children":994},{"class":332},[995],{"type":24,"value":813},{"type":18,"tag":319,"props":997,"children":998},{"class":326},[999],{"type":24,"value":633},{"type":18,"tag":319,"props":1001,"children":1002},{"class":332},[1003],{"type":24,"value":963},{"type":18,"tag":319,"props":1005,"children":1006},{"class":386},[1007],{"type":24,"value":694},{"type":18,"tag":319,"props":1009,"children":1010},{"class":332},[1011],{"type":24,"value":872},{"type":18,"tag":319,"props":1013,"children":1014},{"class":326},[1015],{"type":24,"value":790},{"type":18,"tag":319,"props":1017,"children":1018},{"class":332},[1019],{"type":24,"value":795},{"type":18,"tag":319,"props":1021,"children":1022},{"class":326},[1023],{"type":24,"value":800},{"type":18,"tag":319,"props":1025,"children":1026},{"class":332},[1027],{"type":24,"value":383},{"type":18,"tag":319,"props":1029,"children":1030},{"class":386},[1031],{"type":24,"value":643},{"type":18,"tag":319,"props":1033,"children":1034},{"class":332},[1035],{"type":24,"value":813},{"type":18,"tag":319,"props":1037,"children":1038},{"class":326},[1039],{"type":24,"value":633},{"type":18,"tag":319,"props":1041,"children":1042},{"class":332},[1043],{"type":24,"value":963},{"type":18,"tag":319,"props":1045,"children":1046},{"class":386},[1047],{"type":24,"value":643},{"type":18,"tag":319,"props":1049,"children":1050},{"class":332},[1051],{"type":24,"value":913},{"type":18,"tag":319,"props":1053,"children":1055},{"class":321,"line":1054},26,[1056,1061,1065,1069,1073,1078,1082,1087,1091,1095,1099,1103,1107,1111,1115,1119,1123,1127,1131,1135,1139],{"type":18,"tag":319,"props":1057,"children":1058},{"class":332},[1059],{"type":24,"value":1060},"    k4 ",{"type":18,"tag":319,"props":1062,"children":1063},{"class":326},[1064],{"type":24,"value":378},{"type":18,"tag":319,"props":1066,"children":1067},{"class":332},[1068],{"type":24,"value":785},{"type":18,"tag":319,"props":1070,"children":1071},{"class":326},[1072],{"type":24,"value":790},{"type":18,"tag":319,"props":1074,"children":1075},{"class":332},[1076],{"type":24,"value":1077}," dt ",{"type":18,"tag":319,"props":1079,"children":1080},{"class":326},[1081],{"type":24,"value":633},{"type":18,"tag":319,"props":1083,"children":1084},{"class":332},[1085],{"type":24,"value":1086}," k3[",{"type":18,"tag":319,"props":1088,"children":1089},{"class":386},[1090],{"type":24,"value":623},{"type":18,"tag":319,"props":1092,"children":1093},{"class":332},[1094],{"type":24,"value":831},{"type":18,"tag":319,"props":1096,"children":1097},{"class":326},[1098],{"type":24,"value":790},{"type":18,"tag":319,"props":1100,"children":1101},{"class":332},[1102],{"type":24,"value":1077},{"type":18,"tag":319,"props":1104,"children":1105},{"class":326},[1106],{"type":24,"value":633},{"type":18,"tag":319,"props":1108,"children":1109},{"class":332},[1110],{"type":24,"value":1086},{"type":18,"tag":319,"props":1112,"children":1113},{"class":386},[1114],{"type":24,"value":694},{"type":18,"tag":319,"props":1116,"children":1117},{"class":332},[1118],{"type":24,"value":872},{"type":18,"tag":319,"props":1120,"children":1121},{"class":326},[1122],{"type":24,"value":790},{"type":18,"tag":319,"props":1124,"children":1125},{"class":332},[1126],{"type":24,"value":1077},{"type":18,"tag":319,"props":1128,"children":1129},{"class":326},[1130],{"type":24,"value":633},{"type":18,"tag":319,"props":1132,"children":1133},{"class":332},[1134],{"type":24,"value":1086},{"type":18,"tag":319,"props":1136,"children":1137},{"class":386},[1138],{"type":24,"value":643},{"type":18,"tag":319,"props":1140,"children":1141},{"class":332},[1142],{"type":24,"value":913},{"type":18,"tag":319,"props":1144,"children":1146},{"class":321,"line":1145},27,[1147],{"type":18,"tag":319,"props":1148,"children":1149},{},[1150],{"type":24,"value":354},{"type":18,"tag":319,"props":1152,"children":1154},{"class":321,"line":1153},28,[1155,1160],{"type":18,"tag":319,"props":1156,"children":1157},{"class":332},[1158],{"type":24,"value":1159},"    ",{"type":18,"tag":319,"props":1161,"children":1162},{"class":361},[1163],{"type":24,"value":1164},"# Update state of the robot\n",{"type":18,"tag":319,"props":1166,"children":1168},{"class":321,"line":1167},29,[1169,1174,1179,1184,1188,1193,1197,1201,1205,1209,1213,1217,1221,1225,1229,1233,1237,1241,1245,1249,1253,1257,1261,1266,1270,1275,1279,1283,1287,1291],{"type":18,"tag":319,"props":1170,"children":1171},{"class":332},[1172],{"type":24,"value":1173},"    x ",{"type":18,"tag":319,"props":1175,"children":1176},{"class":326},[1177],{"type":24,"value":1178},"+=",{"type":18,"tag":319,"props":1180,"children":1181},{"class":332},[1182],{"type":24,"value":1183}," (k1[",{"type":18,"tag":319,"props":1185,"children":1186},{"class":386},[1187],{"type":24,"value":623},{"type":18,"tag":319,"props":1189,"children":1190},{"class":332},[1191],{"type":24,"value":1192},"] ",{"type":18,"tag":319,"props":1194,"children":1195},{"class":326},[1196],{"type":24,"value":790},{"type":18,"tag":319,"props":1198,"children":1199},{"class":332},[1200],{"type":24,"value":383},{"type":18,"tag":319,"props":1202,"children":1203},{"class":386},[1204],{"type":24,"value":643},{"type":18,"tag":319,"props":1206,"children":1207},{"class":332},[1208],{"type":24,"value":383},{"type":18,"tag":319,"props":1210,"children":1211},{"class":326},[1212],{"type":24,"value":633},{"type":18,"tag":319,"props":1214,"children":1215},{"class":332},[1216],{"type":24,"value":963},{"type":18,"tag":319,"props":1218,"children":1219},{"class":386},[1220],{"type":24,"value":623},{"type":18,"tag":319,"props":1222,"children":1223},{"class":332},[1224],{"type":24,"value":1192},{"type":18,"tag":319,"props":1226,"children":1227},{"class":326},[1228],{"type":24,"value":790},{"type":18,"tag":319,"props":1230,"children":1231},{"class":332},[1232],{"type":24,"value":383},{"type":18,"tag":319,"props":1234,"children":1235},{"class":386},[1236],{"type":24,"value":643},{"type":18,"tag":319,"props":1238,"children":1239},{"class":332},[1240],{"type":24,"value":383},{"type":18,"tag":319,"props":1242,"children":1243},{"class":326},[1244],{"type":24,"value":633},{"type":18,"tag":319,"props":1246,"children":1247},{"class":332},[1248],{"type":24,"value":1086},{"type":18,"tag":319,"props":1250,"children":1251},{"class":386},[1252],{"type":24,"value":623},{"type":18,"tag":319,"props":1254,"children":1255},{"class":332},[1256],{"type":24,"value":1192},{"type":18,"tag":319,"props":1258,"children":1259},{"class":326},[1260],{"type":24,"value":790},{"type":18,"tag":319,"props":1262,"children":1263},{"class":332},[1264],{"type":24,"value":1265}," k4[",{"type":18,"tag":319,"props":1267,"children":1268},{"class":386},[1269],{"type":24,"value":623},{"type":18,"tag":319,"props":1271,"children":1272},{"class":332},[1273],{"type":24,"value":1274},"]) ",{"type":18,"tag":319,"props":1276,"children":1277},{"class":326},[1278],{"type":24,"value":633},{"type":18,"tag":319,"props":1280,"children":1281},{"class":332},[1282],{"type":24,"value":1077},{"type":18,"tag":319,"props":1284,"children":1285},{"class":326},[1286],{"type":24,"value":800},{"type":18,"tag":319,"props":1288,"children":1289},{"class":332},[1290],{"type":24,"value":383},{"type":18,"tag":319,"props":1292,"children":1293},{"class":386},[1294],{"type":24,"value":1295},"6\n",{"type":18,"tag":319,"props":1297,"children":1299},{"class":321,"line":1298},30,[1300,1305,1309,1313,1317,1321,1325,1329,1333,1337,1341,1345,1349,1353,1357,1361,1365,1369,1373,1377,1381,1385,1389,1393,1397,1401,1405,1409,1413,1417],{"type":18,"tag":319,"props":1301,"children":1302},{"class":332},[1303],{"type":24,"value":1304},"    y ",{"type":18,"tag":319,"props":1306,"children":1307},{"class":326},[1308],{"type":24,"value":1178},{"type":18,"tag":319,"props":1310,"children":1311},{"class":332},[1312],{"type":24,"value":1183},{"type":18,"tag":319,"props":1314,"children":1315},{"class":386},[1316],{"type":24,"value":694},{"type":18,"tag":319,"props":1318,"children":1319},{"class":332},[1320],{"type":24,"value":1192},{"type":18,"tag":319,"props":1322,"children":1323},{"class":326},[1324],{"type":24,"value":790},{"type":18,"tag":319,"props":1326,"children":1327},{"class":332},[1328],{"type":24,"value":383},{"type":18,"tag":319,"props":1330,"children":1331},{"class":386},[1332],{"type":24,"value":643},{"type":18,"tag":319,"props":1334,"children":1335},{"class":332},[1336],{"type":24,"value":383},{"type":18,"tag":319,"props":1338,"children":1339},{"class":326},[1340],{"type":24,"value":633},{"type":18,"tag":319,"props":1342,"children":1343},{"class":332},[1344],{"type":24,"value":963},{"type":18,"tag":319,"props":1346,"children":1347},{"class":386},[1348],{"type":24,"value":694},{"type":18,"tag":319,"props":1350,"children":1351},{"class":332},[1352],{"type":24,"value":1192},{"type":18,"tag":319,"props":1354,"children":1355},{"class":326},[1356],{"type":24,"value":790},{"type":18,"tag":319,"props":1358,"children":1359},{"class":332},[1360],{"type":24,"value":383},{"type":18,"tag":319,"props":1362,"children":1363},{"class":386},[1364],{"type":24,"value":643},{"type":18,"tag":319,"props":1366,"children":1367},{"class":332},[1368],{"type":24,"value":383},{"type":18,"tag":319,"props":1370,"children":1371},{"class":326},[1372],{"type":24,"value":633},{"type":18,"tag":319,"props":1374,"children":1375},{"class":332},[1376],{"type":24,"value":1086},{"type":18,"tag":319,"props":1378,"children":1379},{"class":386},[1380],{"type":24,"value":694},{"type":18,"tag":319,"props":1382,"children":1383},{"class":332},[1384],{"type":24,"value":1192},{"type":18,"tag":319,"props":1386,"children":1387},{"class":326},[1388],{"type":24,"value":790},{"type":18,"tag":319,"props":1390,"children":1391},{"class":332},[1392],{"type":24,"value":1265},{"type":18,"tag":319,"props":1394,"children":1395},{"class":386},[1396],{"type":24,"value":694},{"type":18,"tag":319,"props":1398,"children":1399},{"class":332},[1400],{"type":24,"value":1274},{"type":18,"tag":319,"props":1402,"children":1403},{"class":326},[1404],{"type":24,"value":633},{"type":18,"tag":319,"props":1406,"children":1407},{"class":332},[1408],{"type":24,"value":1077},{"type":18,"tag":319,"props":1410,"children":1411},{"class":326},[1412],{"type":24,"value":800},{"type":18,"tag":319,"props":1414,"children":1415},{"class":332},[1416],{"type":24,"value":383},{"type":18,"tag":319,"props":1418,"children":1419},{"class":386},[1420],{"type":24,"value":1295},{"type":18,"tag":319,"props":1422,"children":1424},{"class":321,"line":1423},31,[1425,1430,1434,1438,1442,1446,1450,1454,1458,1462,1466,1470,1474,1478,1482,1486,1490,1494,1498,1502,1506,1510,1514,1518,1522,1526,1530,1534,1538,1542],{"type":18,"tag":319,"props":1426,"children":1427},{"class":332},[1428],{"type":24,"value":1429},"    yaw ",{"type":18,"tag":319,"props":1431,"children":1432},{"class":326},[1433],{"type":24,"value":1178},{"type":18,"tag":319,"props":1435,"children":1436},{"class":332},[1437],{"type":24,"value":1183},{"type":18,"tag":319,"props":1439,"children":1440},{"class":386},[1441],{"type":24,"value":643},{"type":18,"tag":319,"props":1443,"children":1444},{"class":332},[1445],{"type":24,"value":1192},{"type":18,"tag":319,"props":1447,"children":1448},{"class":326},[1449],{"type":24,"value":790},{"type":18,"tag":319,"props":1451,"children":1452},{"class":332},[1453],{"type":24,"value":383},{"type":18,"tag":319,"props":1455,"children":1456},{"class":386},[1457],{"type":24,"value":643},{"type":18,"tag":319,"props":1459,"children":1460},{"class":332},[1461],{"type":24,"value":383},{"type":18,"tag":319,"props":1463,"children":1464},{"class":326},[1465],{"type":24,"value":633},{"type":18,"tag":319,"props":1467,"children":1468},{"class":332},[1469],{"type":24,"value":963},{"type":18,"tag":319,"props":1471,"children":1472},{"class":386},[1473],{"type":24,"value":643},{"type":18,"tag":319,"props":1475,"children":1476},{"class":332},[1477],{"type":24,"value":1192},{"type":18,"tag":319,"props":1479,"children":1480},{"class":326},[1481],{"type":24,"value":790},{"type":18,"tag":319,"props":1483,"children":1484},{"class":332},[1485],{"type":24,"value":383},{"type":18,"tag":319,"props":1487,"children":1488},{"class":386},[1489],{"type":24,"value":643},{"type":18,"tag":319,"props":1491,"children":1492},{"class":332},[1493],{"type":24,"value":383},{"type":18,"tag":319,"props":1495,"children":1496},{"class":326},[1497],{"type":24,"value":633},{"type":18,"tag":319,"props":1499,"children":1500},{"class":332},[1501],{"type":24,"value":1086},{"type":18,"tag":319,"props":1503,"children":1504},{"class":386},[1505],{"type":24,"value":643},{"type":18,"tag":319,"props":1507,"children":1508},{"class":332},[1509],{"type":24,"value":1192},{"type":18,"tag":319,"props":1511,"children":1512},{"class":326},[1513],{"type":24,"value":790},{"type":18,"tag":319,"props":1515,"children":1516},{"class":332},[1517],{"type":24,"value":1265},{"type":18,"tag":319,"props":1519,"children":1520},{"class":386},[1521],{"type":24,"value":643},{"type":18,"tag":319,"props":1523,"children":1524},{"class":332},[1525],{"type":24,"value":1274},{"type":18,"tag":319,"props":1527,"children":1528},{"class":326},[1529],{"type":24,"value":633},{"type":18,"tag":319,"props":1531,"children":1532},{"class":332},[1533],{"type":24,"value":1077},{"type":18,"tag":319,"props":1535,"children":1536},{"class":326},[1537],{"type":24,"value":800},{"type":18,"tag":319,"props":1539,"children":1540},{"class":332},[1541],{"type":24,"value":383},{"type":18,"tag":319,"props":1543,"children":1544},{"class":386},[1545],{"type":24,"value":1546},"6",{"type":18,"tag":19,"props":1548,"children":1550},{"id":1549},"single-shooting-method",[1551],{"type":24,"value":1552},"Single Shooting Method",{"type":18,"tag":27,"props":1554,"children":1555},{},[1556],{"type":24,"value":1557},"Single Shooting Method is a method that we transform the optimal control problem to the nonlinear programming problem with just one decision variable.",{"type":18,"tag":92,"props":1559,"children":1561},{"latex-express":1560,"styles":59},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":1563,"children":1564},{},[1565,1567,1571,1573],{"type":24,"value":1566},"Get ",{"type":18,"tag":119,"props":1568,"children":1570},{"latex-express":1569,"styles":122},"x_{u}",[],{"type":24,"value":1572}," as a function of ",{"type":18,"tag":119,"props":1574,"children":1576},{"latex-express":1575,"styles":122},"w, x, t_{k}",[],{"type":18,"tag":92,"props":1578,"children":1580},{"latex-express":1579,"styles":59},"\n      \\begin{align*}\n            x_{u} &= F(w,x_{0},t_{k}) \\\\\n            F(w,x_{0},t_{0}) &= x_{0} \\\\\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":1582,"children":1583},{},[1584],{"type":24,"value":1585},"Then solve the NLP",{"type":18,"tag":92,"props":1587,"children":1589},{"latex-express":1588,"styles":59},"\n      \\begin{align*}\n            \\min_{w}\\Phi(F(w,x_{0},t_{k}), w) \\\\ \n            \\text{Subject to} \\hspace{1cm}  g_{1}(F(w,x_{0},t_{k}),w) \\leq{0}\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1591,"children":1593},{"id":1592},"multiple-shooting",[1594],{"type":24,"value":1595},"Multiple Shooting",{"type":18,"tag":27,"props":1597,"children":1598},{},[1599],{"type":24,"value":1600},"Multiple Shooting Method is a method that consist of transforming of optimal control problem to the nonlinear programming problem with multiple decision variables.",{"type":18,"tag":92,"props":1602,"children":1604},{"latex-express":1603,"styles":59},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}, x_{0}, ..., x_{N}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":111,"props":1606,"children":1607},{},[1608,1613],{"type":18,"tag":115,"props":1609,"children":1610},{},[1611],{"type":24,"value":1612},"X becoming decision variable in the opimization problem as well as u",{"type":18,"tag":115,"props":1614,"children":1615},{},[1616],{"type":24,"value":1617},"We apply path constraint at each iteration step",{"type":18,"tag":92,"props":1619,"children":1621},{"latex-express":1620,"styles":59},"\n      \\begin{equation*}\n                x_{k+1}-f(x_{k},u_{k}) = 0\n            \\end{equation*}\n",[],{"type":18,"tag":27,"props":1623,"children":1624},{},[1625],{"type":24,"value":1585},{"type":18,"tag":92,"props":1627,"children":1629},{"latex-express":1628,"styles":59},"\n      \\begin{align*}\n            \\min_{w}  \\Phi(F(w,x_{0},t_{k}),& w) \\\\ \n            \\text{s.t}\\hspace{0.5cm}  g_{1}(F(w,x_{0},t_{k}),w) &\\leq{0} \\\\ \n                               g_{2}(w) = \\begin{bmatrix}\n                                  \\bar{x}_{0}-x_{0} \\\\\n                                  f(x_{0},u_{0})-x_{1} \\\\ \n                                  \\vdots \\\\\n                                  f(x_{N-1}, u_{N-1}-x_{N})\n                              \\end{bmatrix} &= 0\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1631,"children":1633},{"id":1632},"implement-in-python",[1634],{"type":24,"value":1635},"Implement in Python",{"type":18,"tag":27,"props":1637,"children":1638},{},[1639,1641,1647],{"type":24,"value":1640},"We will use ",{"type":18,"tag":1642,"props":1643,"children":1644},"code-inline",{},[1645],{"type":24,"value":1646},"Casadi",{"type":24,"value":1648}," as a numerical optimization framework.",{"type":18,"tag":304,"props":1650,"children":1653},{"className":1651,"code":1652,"language":309,"meta":8},[307],"import casadi as ca\n",[1654],{"type":18,"tag":312,"props":1655,"children":1656},{},[1657],{"type":18,"tag":304,"props":1658,"children":1659},{"__ignoreMap":8},[1660],{"type":18,"tag":319,"props":1661,"children":1662},{"class":321,"line":322},[1663,1667,1672,1676],{"type":18,"tag":319,"props":1664,"children":1665},{"class":326},[1666],{"type":24,"value":329},{"type":18,"tag":319,"props":1668,"children":1669},{"class":332},[1670],{"type":24,"value":1671}," casadi ",{"type":18,"tag":319,"props":1673,"children":1674},{"class":326},[1675],{"type":24,"value":340},{"type":18,"tag":319,"props":1677,"children":1678},{"class":332},[1679],{"type":24,"value":1680}," ca",{"type":18,"tag":27,"props":1682,"children":1683},{},[1684],{"type":24,"value":1685},"Define state representation and input control of our nonlinear model.",{"type":18,"tag":304,"props":1687,"children":1690},{"className":1688,"code":1689,"language":309,"meta":8},[307],"# Symbolic Variables\n## States\nx = ca.SX.sym(\"x\")\ny = ca.SX.sym(\"y\")\ntheta = ca.SX.sym(\"theta\")\nstates = ca.vertcat(x, y, theta)\nnum_states = states.numel()\n\n## Control\nu1 = ca.SX.sym(\"u1\")\nu2 = ca.SX.sym(\"u2\")\ncontrols = ca.vertcat(u1, u2)\nnum_controls = controls.numel()\n\n# Define Nonlinear model\n## Rotation Matrix\nrot_mat = ca.vertcat(\n    ca.horzcat(ca.cos(theta), ca.sin(theta), 0),\n    ca.horzcat(-ca.sin(theta), ca.cos(theta), 0),\n    ca.horzcat(0, 0, 1)\n)\n\nvx = u1 * ca.cos(theta)\nvy = u1 * ca.sin(theta)\nvyaw = u2\n\nrhs = ca.vertcat(vx, vy, vyaw)\n## Define mapped nonlinear function f(x,u) -> rhs\nf = ca.Function('f', [states, controls], [rhs])\n",[1691],{"type":18,"tag":312,"props":1692,"children":1693},{},[1694],{"type":18,"tag":304,"props":1695,"children":1696},{"__ignoreMap":8},[1697,1705,1713,1750,1782,1815,1832,1849,1856,1864,1897,1930,1947,1964,1971,1979,1987,2004,2021,2047,2079,2086,2093,2119,2144,2161,2168,2185,2193],{"type":18,"tag":319,"props":1698,"children":1699},{"class":321,"line":322},[1700],{"type":18,"tag":319,"props":1701,"children":1702},{"class":361},[1703],{"type":24,"value":1704},"# Symbolic Variables\n",{"type":18,"tag":319,"props":1706,"children":1707},{"class":321,"line":348},[1708],{"type":18,"tag":319,"props":1709,"children":1710},{"class":361},[1711],{"type":24,"value":1712},"## States\n",{"type":18,"tag":319,"props":1714,"children":1715},{"class":321,"line":357},[1716,1720,1724,1729,1734,1739,1745],{"type":18,"tag":319,"props":1717,"children":1718},{"class":332},[1719],{"type":24,"value":438},{"type":18,"tag":319,"props":1721,"children":1722},{"class":326},[1723],{"type":24,"value":378},{"type":18,"tag":319,"props":1725,"children":1726},{"class":332},[1727],{"type":24,"value":1728}," ca.",{"type":18,"tag":319,"props":1730,"children":1731},{"class":386},[1732],{"type":24,"value":1733},"SX",{"type":18,"tag":319,"props":1735,"children":1736},{"class":332},[1737],{"type":24,"value":1738},".sym(",{"type":18,"tag":319,"props":1740,"children":1742},{"class":1741},"ct-244866",[1743],{"type":24,"value":1744},"\"x\"",{"type":18,"tag":319,"props":1746,"children":1747},{"class":332},[1748],{"type":24,"value":1749},")\n",{"type":18,"tag":319,"props":1751,"children":1752},{"class":321,"line":367},[1753,1757,1761,1765,1769,1773,1778],{"type":18,"tag":319,"props":1754,"children":1755},{"class":332},[1756],{"type":24,"value":460},{"type":18,"tag":319,"props":1758,"children":1759},{"class":326},[1760],{"type":24,"value":378},{"type":18,"tag":319,"props":1762,"children":1763},{"class":332},[1764],{"type":24,"value":1728},{"type":18,"tag":319,"props":1766,"children":1767},{"class":386},[1768],{"type":24,"value":1733},{"type":18,"tag":319,"props":1770,"children":1771},{"class":332},[1772],{"type":24,"value":1738},{"type":18,"tag":319,"props":1774,"children":1775},{"class":1741},[1776],{"type":24,"value":1777},"\"y\"",{"type":18,"tag":319,"props":1779,"children":1780},{"class":332},[1781],{"type":24,"value":1749},{"type":18,"tag":319,"props":1783,"children":1784},{"class":321,"line":392},[1785,1790,1794,1798,1802,1806,1811],{"type":18,"tag":319,"props":1786,"children":1787},{"class":332},[1788],{"type":24,"value":1789},"theta ",{"type":18,"tag":319,"props":1791,"children":1792},{"class":326},[1793],{"type":24,"value":378},{"type":18,"tag":319,"props":1795,"children":1796},{"class":332},[1797],{"type":24,"value":1728},{"type":18,"tag":319,"props":1799,"children":1800},{"class":386},[1801],{"type":24,"value":1733},{"type":18,"tag":319,"props":1803,"children":1804},{"class":332},[1805],{"type":24,"value":1738},{"type":18,"tag":319,"props":1807,"children":1808},{"class":1741},[1809],{"type":24,"value":1810},"\"theta\"",{"type":18,"tag":319,"props":1812,"children":1813},{"class":332},[1814],{"type":24,"value":1749},{"type":18,"tag":319,"props":1816,"children":1817},{"class":321,"line":401},[1818,1823,1827],{"type":18,"tag":319,"props":1819,"children":1820},{"class":332},[1821],{"type":24,"value":1822},"states ",{"type":18,"tag":319,"props":1824,"children":1825},{"class":326},[1826],{"type":24,"value":378},{"type":18,"tag":319,"props":1828,"children":1829},{"class":332},[1830],{"type":24,"value":1831}," ca.vertcat(x, y, theta)\n",{"type":18,"tag":319,"props":1833,"children":1834},{"class":321,"line":423},[1835,1840,1844],{"type":18,"tag":319,"props":1836,"children":1837},{"class":332},[1838],{"type":24,"value":1839},"num_states ",{"type":18,"tag":319,"props":1841,"children":1842},{"class":326},[1843],{"type":24,"value":378},{"type":18,"tag":319,"props":1845,"children":1846},{"class":332},[1847],{"type":24,"value":1848}," states.numel()\n",{"type":18,"tag":319,"props":1850,"children":1851},{"class":321,"line":432},[1852],{"type":18,"tag":319,"props":1853,"children":1854},{},[1855],{"type":24,"value":354},{"type":18,"tag":319,"props":1857,"children":1858},{"class":321,"line":454},[1859],{"type":18,"tag":319,"props":1860,"children":1861},{"class":361},[1862],{"type":24,"value":1863},"## Control\n",{"type":18,"tag":319,"props":1865,"children":1866},{"class":321,"line":475},[1867,1872,1876,1880,1884,1888,1893],{"type":18,"tag":319,"props":1868,"children":1869},{"class":332},[1870],{"type":24,"value":1871},"u1 ",{"type":18,"tag":319,"props":1873,"children":1874},{"class":326},[1875],{"type":24,"value":378},{"type":18,"tag":319,"props":1877,"children":1878},{"class":332},[1879],{"type":24,"value":1728},{"type":18,"tag":319,"props":1881,"children":1882},{"class":386},[1883],{"type":24,"value":1733},{"type":18,"tag":319,"props":1885,"children":1886},{"class":332},[1887],{"type":24,"value":1738},{"type":18,"tag":319,"props":1889,"children":1890},{"class":1741},[1891],{"type":24,"value":1892},"\"u1\"",{"type":18,"tag":319,"props":1894,"children":1895},{"class":332},[1896],{"type":24,"value":1749},{"type":18,"tag":319,"props":1898,"children":1899},{"class":321,"line":496},[1900,1905,1909,1913,1917,1921,1926],{"type":18,"tag":319,"props":1901,"children":1902},{"class":332},[1903],{"type":24,"value":1904},"u2 ",{"type":18,"tag":319,"props":1906,"children":1907},{"class":326},[1908],{"type":24,"value":378},{"type":18,"tag":319,"props":1910,"children":1911},{"class":332},[1912],{"type":24,"value":1728},{"type":18,"tag":319,"props":1914,"children":1915},{"class":386},[1916],{"type":24,"value":1733},{"type":18,"tag":319,"props":1918,"children":1919},{"class":332},[1920],{"type":24,"value":1738},{"type":18,"tag":319,"props":1922,"children":1923},{"class":1741},[1924],{"type":24,"value":1925},"\"u2\"",{"type":18,"tag":319,"props":1927,"children":1928},{"class":332},[1929],{"type":24,"value":1749},{"type":18,"tag":319,"props":1931,"children":1932},{"class":321,"line":505},[1933,1938,1942],{"type":18,"tag":319,"props":1934,"children":1935},{"class":332},[1936],{"type":24,"value":1937},"controls ",{"type":18,"tag":319,"props":1939,"children":1940},{"class":326},[1941],{"type":24,"value":378},{"type":18,"tag":319,"props":1943,"children":1944},{"class":332},[1945],{"type":24,"value":1946}," ca.vertcat(u1, u2)\n",{"type":18,"tag":319,"props":1948,"children":1949},{"class":321,"line":536},[1950,1955,1959],{"type":18,"tag":319,"props":1951,"children":1952},{"class":332},[1953],{"type":24,"value":1954},"num_controls ",{"type":18,"tag":319,"props":1956,"children":1957},{"class":326},[1958],{"type":24,"value":378},{"type":18,"tag":319,"props":1960,"children":1961},{"class":332},[1962],{"type":24,"value":1963}," controls.numel()\n",{"type":18,"tag":319,"props":1965,"children":1966},{"class":321,"line":567},[1967],{"type":18,"tag":319,"props":1968,"children":1969},{},[1970],{"type":24,"value":354},{"type":18,"tag":319,"props":1972,"children":1973},{"class":321,"line":576},[1974],{"type":18,"tag":319,"props":1975,"children":1976},{"class":361},[1977],{"type":24,"value":1978},"# Define Nonlinear model\n",{"type":18,"tag":319,"props":1980,"children":1981},{"class":321,"line":585},[1982],{"type":18,"tag":319,"props":1983,"children":1984},{"class":361},[1985],{"type":24,"value":1986},"## Rotation Matrix\n",{"type":18,"tag":319,"props":1988,"children":1989},{"class":321,"line":612},[1990,1995,1999],{"type":18,"tag":319,"props":1991,"children":1992},{"class":332},[1993],{"type":24,"value":1994},"rot_mat ",{"type":18,"tag":319,"props":1996,"children":1997},{"class":326},[1998],{"type":24,"value":378},{"type":18,"tag":319,"props":2000,"children":2001},{"class":332},[2002],{"type":24,"value":2003}," ca.vertcat(\n",{"type":18,"tag":319,"props":2005,"children":2006},{"class":321,"line":651},[2007,2012,2016],{"type":18,"tag":319,"props":2008,"children":2009},{"class":332},[2010],{"type":24,"value":2011},"    ca.horzcat(ca.cos(theta), ca.sin(theta), ",{"type":18,"tag":319,"props":2013,"children":2014},{"class":386},[2015],{"type":24,"value":623},{"type":18,"tag":319,"props":2017,"children":2018},{"class":332},[2019],{"type":24,"value":2020},"),\n",{"type":18,"tag":319,"props":2022,"children":2023},{"class":321,"line":684},[2024,2029,2034,2039,2043],{"type":18,"tag":319,"props":2025,"children":2026},{"class":332},[2027],{"type":24,"value":2028},"    ca.horzcat(",{"type":18,"tag":319,"props":2030,"children":2031},{"class":326},[2032],{"type":24,"value":2033},"-",{"type":18,"tag":319,"props":2035,"children":2036},{"class":332},[2037],{"type":24,"value":2038},"ca.sin(theta), ca.cos(theta), ",{"type":18,"tag":319,"props":2040,"children":2041},{"class":386},[2042],{"type":24,"value":623},{"type":18,"tag":319,"props":2044,"children":2045},{"class":332},[2046],{"type":24,"value":2020},{"type":18,"tag":319,"props":2048,"children":2049},{"class":321,"line":702},[2050,2054,2058,2063,2067,2071,2075],{"type":18,"tag":319,"props":2051,"children":2052},{"class":332},[2053],{"type":24,"value":2028},{"type":18,"tag":319,"props":2055,"children":2056},{"class":386},[2057],{"type":24,"value":623},{"type":18,"tag":319,"props":2059,"children":2060},{"class":332},[2061],{"type":24,"value":2062},", ",{"type":18,"tag":319,"props":2064,"children":2065},{"class":386},[2066],{"type":24,"value":623},{"type":18,"tag":319,"props":2068,"children":2069},{"class":332},[2070],{"type":24,"value":2062},{"type":18,"tag":319,"props":2072,"children":2073},{"class":386},[2074],{"type":24,"value":694},{"type":18,"tag":319,"props":2076,"children":2077},{"class":332},[2078],{"type":24,"value":1749},{"type":18,"tag":319,"props":2080,"children":2081},{"class":321,"line":711},[2082],{"type":18,"tag":319,"props":2083,"children":2084},{"class":332},[2085],{"type":24,"value":1749},{"type":18,"tag":319,"props":2087,"children":2088},{"class":321,"line":719},[2089],{"type":18,"tag":319,"props":2090,"children":2091},{},[2092],{"type":24,"value":354},{"type":18,"tag":319,"props":2094,"children":2095},{"class":321,"line":752},[2096,2101,2105,2110,2114],{"type":18,"tag":319,"props":2097,"children":2098},{"class":332},[2099],{"type":24,"value":2100},"vx ",{"type":18,"tag":319,"props":2102,"children":2103},{"class":326},[2104],{"type":24,"value":378},{"type":18,"tag":319,"props":2106,"children":2107},{"class":332},[2108],{"type":24,"value":2109}," u1 ",{"type":18,"tag":319,"props":2111,"children":2112},{"class":326},[2113],{"type":24,"value":633},{"type":18,"tag":319,"props":2115,"children":2116},{"class":332},[2117],{"type":24,"value":2118}," ca.cos(theta)\n",{"type":18,"tag":319,"props":2120,"children":2121},{"class":321,"line":770},[2122,2127,2131,2135,2139],{"type":18,"tag":319,"props":2123,"children":2124},{"class":332},[2125],{"type":24,"value":2126},"vy ",{"type":18,"tag":319,"props":2128,"children":2129},{"class":326},[2130],{"type":24,"value":378},{"type":18,"tag":319,"props":2132,"children":2133},{"class":332},[2134],{"type":24,"value":2109},{"type":18,"tag":319,"props":2136,"children":2137},{"class":326},[2138],{"type":24,"value":633},{"type":18,"tag":319,"props":2140,"children":2141},{"class":332},[2142],{"type":24,"value":2143}," ca.sin(theta)\n",{"type":18,"tag":319,"props":2145,"children":2146},{"class":321,"line":916},[2147,2152,2156],{"type":18,"tag":319,"props":2148,"children":2149},{"class":332},[2150],{"type":24,"value":2151},"vyaw ",{"type":18,"tag":319,"props":2153,"children":2154},{"class":326},[2155],{"type":24,"value":378},{"type":18,"tag":319,"props":2157,"children":2158},{"class":332},[2159],{"type":24,"value":2160}," u2\n",{"type":18,"tag":319,"props":2162,"children":2163},{"class":321,"line":1054},[2164],{"type":18,"tag":319,"props":2165,"children":2166},{},[2167],{"type":24,"value":354},{"type":18,"tag":319,"props":2169,"children":2170},{"class":321,"line":1145},[2171,2176,2180],{"type":18,"tag":319,"props":2172,"children":2173},{"class":332},[2174],{"type":24,"value":2175},"rhs ",{"type":18,"tag":319,"props":2177,"children":2178},{"class":326},[2179],{"type":24,"value":378},{"type":18,"tag":319,"props":2181,"children":2182},{"class":332},[2183],{"type":24,"value":2184}," ca.vertcat(vx, vy, vyaw)\n",{"type":18,"tag":319,"props":2186,"children":2187},{"class":321,"line":1153},[2188],{"type":18,"tag":319,"props":2189,"children":2190},{"class":361},[2191],{"type":24,"value":2192},"## Define mapped nonlinear function f(x,u) -> rhs\n",{"type":18,"tag":319,"props":2194,"children":2195},{"class":321,"line":1167},[2196,2200,2204,2209,2214],{"type":18,"tag":319,"props":2197,"children":2198},{"class":332},[2199],{"type":24,"value":591},{"type":18,"tag":319,"props":2201,"children":2202},{"class":326},[2203],{"type":24,"value":378},{"type":18,"tag":319,"props":2205,"children":2206},{"class":332},[2207],{"type":24,"value":2208}," ca.Function(",{"type":18,"tag":319,"props":2210,"children":2211},{"class":1741},[2212],{"type":24,"value":2213},"'f'",{"type":18,"tag":319,"props":2215,"children":2216},{"class":332},[2217],{"type":24,"value":2218},", [states, controls], [rhs])",{"type":18,"tag":27,"props":2220,"children":2221},{},[2222],{"type":24,"value":2223},"Declare symbolic matrix",{"type":18,"tag":304,"props":2225,"children":2228},{"className":2226,"code":2227,"language":309,"meta":8},[307],"X = ca.SX.sym('X', num_states, prediction_horizons + 1)\nX_ref = ca.SX.sym('X_ref', num_states, prediction_horizons + 1)\nU = ca.SX.sym('U', num_controls, prediction_horizons)\nU_ref = ca.SX.sym('U_ref', num_controls, prediction_horizons)\n",[2229],{"type":18,"tag":312,"props":2230,"children":2231},{},[2232],{"type":18,"tag":304,"props":2233,"children":2234},{"__ignoreMap":8},[2235,2285,2334,2368],{"type":18,"tag":319,"props":2236,"children":2237},{"class":321,"line":322},[2238,2243,2247,2251,2255,2259,2264,2269,2273,2277,2281],{"type":18,"tag":319,"props":2239,"children":2240},{"class":332},[2241],{"type":24,"value":2242},"X ",{"type":18,"tag":319,"props":2244,"children":2245},{"class":326},[2246],{"type":24,"value":378},{"type":18,"tag":319,"props":2248,"children":2249},{"class":332},[2250],{"type":24,"value":1728},{"type":18,"tag":319,"props":2252,"children":2253},{"class":386},[2254],{"type":24,"value":1733},{"type":18,"tag":319,"props":2256,"children":2257},{"class":332},[2258],{"type":24,"value":1738},{"type":18,"tag":319,"props":2260,"children":2261},{"class":1741},[2262],{"type":24,"value":2263},"'X'",{"type":18,"tag":319,"props":2265,"children":2266},{"class":332},[2267],{"type":24,"value":2268},", num_states, prediction_horizons ",{"type":18,"tag":319,"props":2270,"children":2271},{"class":326},[2272],{"type":24,"value":790},{"type":18,"tag":319,"props":2274,"children":2275},{"class":332},[2276],{"type":24,"value":383},{"type":18,"tag":319,"props":2278,"children":2279},{"class":386},[2280],{"type":24,"value":694},{"type":18,"tag":319,"props":2282,"children":2283},{"class":332},[2284],{"type":24,"value":1749},{"type":18,"tag":319,"props":2286,"children":2287},{"class":321,"line":348},[2288,2293,2297,2301,2305,2309,2314,2318,2322,2326,2330],{"type":18,"tag":319,"props":2289,"children":2290},{"class":332},[2291],{"type":24,"value":2292},"X_ref ",{"type":18,"tag":319,"props":2294,"children":2295},{"class":326},[2296],{"type":24,"value":378},{"type":18,"tag":319,"props":2298,"children":2299},{"class":332},[2300],{"type":24,"value":1728},{"type":18,"tag":319,"props":2302,"children":2303},{"class":386},[2304],{"type":24,"value":1733},{"type":18,"tag":319,"props":2306,"children":2307},{"class":332},[2308],{"type":24,"value":1738},{"type":18,"tag":319,"props":2310,"children":2311},{"class":1741},[2312],{"type":24,"value":2313},"'X_ref'",{"type":18,"tag":319,"props":2315,"children":2316},{"class":332},[2317],{"type":24,"value":2268},{"type":18,"tag":319,"props":2319,"children":2320},{"class":326},[2321],{"type":24,"value":790},{"type":18,"tag":319,"props":2323,"children":2324},{"class":332},[2325],{"type":24,"value":383},{"type":18,"tag":319,"props":2327,"children":2328},{"class":386},[2329],{"type":24,"value":694},{"type":18,"tag":319,"props":2331,"children":2332},{"class":332},[2333],{"type":24,"value":1749},{"type":18,"tag":319,"props":2335,"children":2336},{"class":321,"line":357},[2337,2342,2346,2350,2354,2358,2363],{"type":18,"tag":319,"props":2338,"children":2339},{"class":332},[2340],{"type":24,"value":2341},"U ",{"type":18,"tag":319,"props":2343,"children":2344},{"class":326},[2345],{"type":24,"value":378},{"type":18,"tag":319,"props":2347,"children":2348},{"class":332},[2349],{"type":24,"value":1728},{"type":18,"tag":319,"props":2351,"children":2352},{"class":386},[2353],{"type":24,"value":1733},{"type":18,"tag":319,"props":2355,"children":2356},{"class":332},[2357],{"type":24,"value":1738},{"type":18,"tag":319,"props":2359,"children":2360},{"class":1741},[2361],{"type":24,"value":2362},"'U'",{"type":18,"tag":319,"props":2364,"children":2365},{"class":332},[2366],{"type":24,"value":2367},", num_controls, prediction_horizons)\n",{"type":18,"tag":319,"props":2369,"children":2370},{"class":321,"line":367},[2371,2376,2380,2384,2388,2392,2397],{"type":18,"tag":319,"props":2372,"children":2373},{"class":332},[2374],{"type":24,"value":2375},"U_ref ",{"type":18,"tag":319,"props":2377,"children":2378},{"class":326},[2379],{"type":24,"value":378},{"type":18,"tag":319,"props":2381,"children":2382},{"class":332},[2383],{"type":24,"value":1728},{"type":18,"tag":319,"props":2385,"children":2386},{"class":386},[2387],{"type":24,"value":1733},{"type":18,"tag":319,"props":2389,"children":2390},{"class":332},[2391],{"type":24,"value":1738},{"type":18,"tag":319,"props":2393,"children":2394},{"class":1741},[2395],{"type":24,"value":2396},"'U_ref'",{"type":18,"tag":319,"props":2398,"children":2399},{"class":332},[2400],{"type":24,"value":2401},", num_controls, prediction_horizons)",{"type":18,"tag":27,"props":2403,"children":2404},{},[2405,2407],{"type":24,"value":2406},"Define nonlinear programming and options for ",{"type":18,"tag":1642,"props":2408,"children":2409},{},[2410],{"type":24,"value":1646},{"type":18,"tag":304,"props":2412,"children":2415},{"className":2413,"code":2414,"language":309,"meta":8},[307],"nlp_prob = {\n    'f': cost_fn,\n    'x': opt_var,\n    'p': opt_dec,\n    'g': g\n}\n\nnlp_opts = {\n    'ipopt.max_iter': 5000,\n    'ipopt.print_level': 0,\n    'ipopt.acceptable_tol': 1e-6,\n    'ipopt.acceptable_obj_change_tol': 1e-4,\n    'print_time': 0\n}\n",[2416],{"type":18,"tag":312,"props":2417,"children":2418},{},[2419],{"type":18,"tag":304,"props":2420,"children":2421},{"__ignoreMap":8},[2422,2439,2455,2472,2489,2506,2514,2521,2537,2564,2588,2613,2638,2659],{"type":18,"tag":319,"props":2423,"children":2424},{"class":321,"line":322},[2425,2430,2434],{"type":18,"tag":319,"props":2426,"children":2427},{"class":332},[2428],{"type":24,"value":2429},"nlp_prob ",{"type":18,"tag":319,"props":2431,"children":2432},{"class":326},[2433],{"type":24,"value":378},{"type":18,"tag":319,"props":2435,"children":2436},{"class":332},[2437],{"type":24,"value":2438}," {\n",{"type":18,"tag":319,"props":2440,"children":2441},{"class":321,"line":348},[2442,2446,2450],{"type":18,"tag":319,"props":2443,"children":2444},{"class":332},[2445],{"type":24,"value":1159},{"type":18,"tag":319,"props":2447,"children":2448},{"class":1741},[2449],{"type":24,"value":2213},{"type":18,"tag":319,"props":2451,"children":2452},{"class":332},[2453],{"type":24,"value":2454},": cost_fn,\n",{"type":18,"tag":319,"props":2456,"children":2457},{"class":321,"line":357},[2458,2462,2467],{"type":18,"tag":319,"props":2459,"children":2460},{"class":332},[2461],{"type":24,"value":1159},{"type":18,"tag":319,"props":2463,"children":2464},{"class":1741},[2465],{"type":24,"value":2466},"'x'",{"type":18,"tag":319,"props":2468,"children":2469},{"class":332},[2470],{"type":24,"value":2471},": opt_var,\n",{"type":18,"tag":319,"props":2473,"children":2474},{"class":321,"line":367},[2475,2479,2484],{"type":18,"tag":319,"props":2476,"children":2477},{"class":332},[2478],{"type":24,"value":1159},{"type":18,"tag":319,"props":2480,"children":2481},{"class":1741},[2482],{"type":24,"value":2483},"'p'",{"type":18,"tag":319,"props":2485,"children":2486},{"class":332},[2487],{"type":24,"value":2488},": opt_dec,\n",{"type":18,"tag":319,"props":2490,"children":2491},{"class":321,"line":392},[2492,2496,2501],{"type":18,"tag":319,"props":2493,"children":2494},{"class":332},[2495],{"type":24,"value":1159},{"type":18,"tag":319,"props":2497,"children":2498},{"class":1741},[2499],{"type":24,"value":2500},"'g'",{"type":18,"tag":319,"props":2502,"children":2503},{"class":332},[2504],{"type":24,"value":2505},": g\n",{"type":18,"tag":319,"props":2507,"children":2508},{"class":321,"line":401},[2509],{"type":18,"tag":319,"props":2510,"children":2511},{"class":332},[2512],{"type":24,"value":2513},"}\n",{"type":18,"tag":319,"props":2515,"children":2516},{"class":321,"line":423},[2517],{"type":18,"tag":319,"props":2518,"children":2519},{},[2520],{"type":24,"value":354},{"type":18,"tag":319,"props":2522,"children":2523},{"class":321,"line":432},[2524,2529,2533],{"type":18,"tag":319,"props":2525,"children":2526},{"class":332},[2527],{"type":24,"value":2528},"nlp_opts ",{"type":18,"tag":319,"props":2530,"children":2531},{"class":326},[2532],{"type":24,"value":378},{"type":18,"tag":319,"props":2534,"children":2535},{"class":332},[2536],{"type":24,"value":2438},{"type":18,"tag":319,"props":2538,"children":2539},{"class":321,"line":454},[2540,2544,2549,2554,2559],{"type":18,"tag":319,"props":2541,"children":2542},{"class":332},[2543],{"type":24,"value":1159},{"type":18,"tag":319,"props":2545,"children":2546},{"class":1741},[2547],{"type":24,"value":2548},"'ipopt.max_iter'",{"type":18,"tag":319,"props":2550,"children":2551},{"class":332},[2552],{"type":24,"value":2553},": ",{"type":18,"tag":319,"props":2555,"children":2556},{"class":386},[2557],{"type":24,"value":2558},"5000",{"type":18,"tag":319,"props":2560,"children":2561},{"class":332},[2562],{"type":24,"value":2563},",\n",{"type":18,"tag":319,"props":2565,"children":2566},{"class":321,"line":475},[2567,2571,2576,2580,2584],{"type":18,"tag":319,"props":2568,"children":2569},{"class":332},[2570],{"type":24,"value":1159},{"type":18,"tag":319,"props":2572,"children":2573},{"class":1741},[2574],{"type":24,"value":2575},"'ipopt.print_level'",{"type":18,"tag":319,"props":2577,"children":2578},{"class":332},[2579],{"type":24,"value":2553},{"type":18,"tag":319,"props":2581,"children":2582},{"class":386},[2583],{"type":24,"value":623},{"type":18,"tag":319,"props":2585,"children":2586},{"class":332},[2587],{"type":24,"value":2563},{"type":18,"tag":319,"props":2589,"children":2590},{"class":321,"line":496},[2591,2595,2600,2604,2609],{"type":18,"tag":319,"props":2592,"children":2593},{"class":332},[2594],{"type":24,"value":1159},{"type":18,"tag":319,"props":2596,"children":2597},{"class":1741},[2598],{"type":24,"value":2599},"'ipopt.acceptable_tol'",{"type":18,"tag":319,"props":2601,"children":2602},{"class":332},[2603],{"type":24,"value":2553},{"type":18,"tag":319,"props":2605,"children":2606},{"class":386},[2607],{"type":24,"value":2608},"1e-6",{"type":18,"tag":319,"props":2610,"children":2611},{"class":332},[2612],{"type":24,"value":2563},{"type":18,"tag":319,"props":2614,"children":2615},{"class":321,"line":505},[2616,2620,2625,2629,2634],{"type":18,"tag":319,"props":2617,"children":2618},{"class":332},[2619],{"type":24,"value":1159},{"type":18,"tag":319,"props":2621,"children":2622},{"class":1741},[2623],{"type":24,"value":2624},"'ipopt.acceptable_obj_change_tol'",{"type":18,"tag":319,"props":2626,"children":2627},{"class":332},[2628],{"type":24,"value":2553},{"type":18,"tag":319,"props":2630,"children":2631},{"class":386},[2632],{"type":24,"value":2633},"1e-4",{"type":18,"tag":319,"props":2635,"children":2636},{"class":332},[2637],{"type":24,"value":2563},{"type":18,"tag":319,"props":2639,"children":2640},{"class":321,"line":536},[2641,2645,2650,2654],{"type":18,"tag":319,"props":2642,"children":2643},{"class":332},[2644],{"type":24,"value":1159},{"type":18,"tag":319,"props":2646,"children":2647},{"class":1741},[2648],{"type":24,"value":2649},"'print_time'",{"type":18,"tag":319,"props":2651,"children":2652},{"class":332},[2653],{"type":24,"value":2553},{"type":18,"tag":319,"props":2655,"children":2656},{"class":386},[2657],{"type":24,"value":2658},"0\n",{"type":18,"tag":319,"props":2660,"children":2661},{"class":321,"line":567},[2662],{"type":18,"tag":319,"props":2663,"children":2664},{"class":332},[2665],{"type":24,"value":2666},"}",{"type":18,"tag":27,"props":2668,"children":2669},{},[2670],{"type":24,"value":2671},"Determine boundary and constraint for our optimizer",{"type":18,"tag":304,"props":2673,"children":2676},{"className":2674,"code":2675,"language":309,"meta":8},[307],"lbx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\nubx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\n\nlbx[0: num_states * (prediction_horizons + 1): num_states] = x_min\nlbx[1: num_states * (prediction_horizons + 1): num_states] = y_min\nlbx[2: num_states * (prediction_horizons + 1): num_states] = theta_min\n\nubx[0: num_states * (prediction_horizons + 1): num_states] = x_max\nubx[1: num_states * (prediction_horizons + 1): num_states] = y_max\nubx[2: num_states * (prediction_horizons + 1): num_states] = theta_max\n\nlbx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\nlbx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\n\nubx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\nubx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\n\nargs = {\n    'lbg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'ubg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'lbx': lbx,\n    'ubx': ubx\n}\n",[2677],{"type":18,"tag":312,"props":2678,"children":2679},{},[2680],{"type":18,"tag":304,"props":2681,"children":2682},{"__ignoreMap":8},[2683,2761,2833,2840,2891,2939,2987,2994,3043,3091,3139,3146,3229,3324,3331,3412,3507,3514,3530,3589,3645,3662,3679],{"type":18,"tag":319,"props":2684,"children":2685},{"class":321,"line":322},[2686,2691,2695,2699,2704,2709,2713,2718,2722,2726,2730,2734,2738,2743,2747,2752,2756],{"type":18,"tag":319,"props":2687,"children":2688},{"class":332},[2689],{"type":24,"value":2690},"lbx ",{"type":18,"tag":319,"props":2692,"children":2693},{"class":326},[2694],{"type":24,"value":378},{"type":18,"tag":319,"props":2696,"children":2697},{"class":332},[2698],{"type":24,"value":1728},{"type":18,"tag":319,"props":2700,"children":2701},{"class":386},[2702],{"type":24,"value":2703},"DM",{"type":18,"tag":319,"props":2705,"children":2706},{"class":332},[2707],{"type":24,"value":2708},".zeros((num_states ",{"type":18,"tag":319,"props":2710,"children":2711},{"class":326},[2712],{"type":24,"value":633},{"type":18,"tag":319,"props":2714,"children":2715},{"class":332},[2716],{"type":24,"value":2717}," (prediction_horizons ",{"type":18,"tag":319,"props":2719,"children":2720},{"class":326},[2721],{"type":24,"value":790},{"type":18,"tag":319,"props":2723,"children":2724},{"class":332},[2725],{"type":24,"value":383},{"type":18,"tag":319,"props":2727,"children":2728},{"class":386},[2729],{"type":24,"value":694},{"type":18,"tag":319,"props":2731,"children":2732},{"class":332},[2733],{"type":24,"value":813},{"type":18,"tag":319,"props":2735,"children":2736},{"class":326},[2737],{"type":24,"value":790},{"type":18,"tag":319,"props":2739,"children":2740},{"class":332},[2741],{"type":24,"value":2742}," num_controls ",{"type":18,"tag":319,"props":2744,"children":2745},{"class":326},[2746],{"type":24,"value":633},{"type":18,"tag":319,"props":2748,"children":2749},{"class":332},[2750],{"type":24,"value":2751}," prediction_horizons, ",{"type":18,"tag":319,"props":2753,"children":2754},{"class":386},[2755],{"type":24,"value":694},{"type":18,"tag":319,"props":2757,"children":2758},{"class":332},[2759],{"type":24,"value":2760},"))\n",{"type":18,"tag":319,"props":2762,"children":2763},{"class":321,"line":348},[2764,2769,2773,2777,2781,2785,2789,2793,2797,2801,2805,2809,2813,2817,2821,2825,2829],{"type":18,"tag":319,"props":2765,"children":2766},{"class":332},[2767],{"type":24,"value":2768},"ubx ",{"type":18,"tag":319,"props":2770,"children":2771},{"class":326},[2772],{"type":24,"value":378},{"type":18,"tag":319,"props":2774,"children":2775},{"class":332},[2776],{"type":24,"value":1728},{"type":18,"tag":319,"props":2778,"children":2779},{"class":386},[2780],{"type":24,"value":2703},{"type":18,"tag":319,"props":2782,"children":2783},{"class":332},[2784],{"type":24,"value":2708},{"type":18,"tag":319,"props":2786,"children":2787},{"class":326},[2788],{"type":24,"value":633},{"type":18,"tag":319,"props":2790,"children":2791},{"class":332},[2792],{"type":24,"value":2717},{"type":18,"tag":319,"props":2794,"children":2795},{"class":326},[2796],{"type":24,"value":790},{"type":18,"tag":319,"props":2798,"children":2799},{"class":332},[2800],{"type":24,"value":383},{"type":18,"tag":319,"props":2802,"children":2803},{"class":386},[2804],{"type":24,"value":694},{"type":18,"tag":319,"props":2806,"children":2807},{"class":332},[2808],{"type":24,"value":813},{"type":18,"tag":319,"props":2810,"children":2811},{"class":326},[2812],{"type":24,"value":790},{"type":18,"tag":319,"props":2814,"children":2815},{"class":332},[2816],{"type":24,"value":2742},{"type":18,"tag":319,"props":2818,"children":2819},{"class":326},[2820],{"type":24,"value":633},{"type":18,"tag":319,"props":2822,"children":2823},{"class":332},[2824],{"type":24,"value":2751},{"type":18,"tag":319,"props":2826,"children":2827},{"class":386},[2828],{"type":24,"value":694},{"type":18,"tag":319,"props":2830,"children":2831},{"class":332},[2832],{"type":24,"value":2760},{"type":18,"tag":319,"props":2834,"children":2835},{"class":321,"line":357},[2836],{"type":18,"tag":319,"props":2837,"children":2838},{},[2839],{"type":24,"value":354},{"type":18,"tag":319,"props":2841,"children":2842},{"class":321,"line":367},[2843,2848,2852,2857,2861,2865,2869,2873,2877,2882,2886],{"type":18,"tag":319,"props":2844,"children":2845},{"class":332},[2846],{"type":24,"value":2847},"lbx[",{"type":18,"tag":319,"props":2849,"children":2850},{"class":386},[2851],{"type":24,"value":623},{"type":18,"tag":319,"props":2853,"children":2854},{"class":332},[2855],{"type":24,"value":2856},": num_states ",{"type":18,"tag":319,"props":2858,"children":2859},{"class":326},[2860],{"type":24,"value":633},{"type":18,"tag":319,"props":2862,"children":2863},{"class":332},[2864],{"type":24,"value":2717},{"type":18,"tag":319,"props":2866,"children":2867},{"class":326},[2868],{"type":24,"value":790},{"type":18,"tag":319,"props":2870,"children":2871},{"class":332},[2872],{"type":24,"value":383},{"type":18,"tag":319,"props":2874,"children":2875},{"class":386},[2876],{"type":24,"value":694},{"type":18,"tag":319,"props":2878,"children":2879},{"class":332},[2880],{"type":24,"value":2881},"): num_states] ",{"type":18,"tag":319,"props":2883,"children":2884},{"class":326},[2885],{"type":24,"value":378},{"type":18,"tag":319,"props":2887,"children":2888},{"class":332},[2889],{"type":24,"value":2890}," x_min\n",{"type":18,"tag":319,"props":2892,"children":2893},{"class":321,"line":392},[2894,2898,2902,2906,2910,2914,2918,2922,2926,2930,2934],{"type":18,"tag":319,"props":2895,"children":2896},{"class":332},[2897],{"type":24,"value":2847},{"type":18,"tag":319,"props":2899,"children":2900},{"class":386},[2901],{"type":24,"value":694},{"type":18,"tag":319,"props":2903,"children":2904},{"class":332},[2905],{"type":24,"value":2856},{"type":18,"tag":319,"props":2907,"children":2908},{"class":326},[2909],{"type":24,"value":633},{"type":18,"tag":319,"props":2911,"children":2912},{"class":332},[2913],{"type":24,"value":2717},{"type":18,"tag":319,"props":2915,"children":2916},{"class":326},[2917],{"type":24,"value":790},{"type":18,"tag":319,"props":2919,"children":2920},{"class":332},[2921],{"type":24,"value":383},{"type":18,"tag":319,"props":2923,"children":2924},{"class":386},[2925],{"type":24,"value":694},{"type":18,"tag":319,"props":2927,"children":2928},{"class":332},[2929],{"type":24,"value":2881},{"type":18,"tag":319,"props":2931,"children":2932},{"class":326},[2933],{"type":24,"value":378},{"type":18,"tag":319,"props":2935,"children":2936},{"class":332},[2937],{"type":24,"value":2938}," y_min\n",{"type":18,"tag":319,"props":2940,"children":2941},{"class":321,"line":401},[2942,2946,2950,2954,2958,2962,2966,2970,2974,2978,2982],{"type":18,"tag":319,"props":2943,"children":2944},{"class":332},[2945],{"type":24,"value":2847},{"type":18,"tag":319,"props":2947,"children":2948},{"class":386},[2949],{"type":24,"value":643},{"type":18,"tag":319,"props":2951,"children":2952},{"class":332},[2953],{"type":24,"value":2856},{"type":18,"tag":319,"props":2955,"children":2956},{"class":326},[2957],{"type":24,"value":633},{"type":18,"tag":319,"props":2959,"children":2960},{"class":332},[2961],{"type":24,"value":2717},{"type":18,"tag":319,"props":2963,"children":2964},{"class":326},[2965],{"type":24,"value":790},{"type":18,"tag":319,"props":2967,"children":2968},{"class":332},[2969],{"type":24,"value":383},{"type":18,"tag":319,"props":2971,"children":2972},{"class":386},[2973],{"type":24,"value":694},{"type":18,"tag":319,"props":2975,"children":2976},{"class":332},[2977],{"type":24,"value":2881},{"type":18,"tag":319,"props":2979,"children":2980},{"class":326},[2981],{"type":24,"value":378},{"type":18,"tag":319,"props":2983,"children":2984},{"class":332},[2985],{"type":24,"value":2986}," theta_min\n",{"type":18,"tag":319,"props":2988,"children":2989},{"class":321,"line":423},[2990],{"type":18,"tag":319,"props":2991,"children":2992},{},[2993],{"type":24,"value":354},{"type":18,"tag":319,"props":2995,"children":2996},{"class":321,"line":432},[2997,3002,3006,3010,3014,3018,3022,3026,3030,3034,3038],{"type":18,"tag":319,"props":2998,"children":2999},{"class":332},[3000],{"type":24,"value":3001},"ubx[",{"type":18,"tag":319,"props":3003,"children":3004},{"class":386},[3005],{"type":24,"value":623},{"type":18,"tag":319,"props":3007,"children":3008},{"class":332},[3009],{"type":24,"value":2856},{"type":18,"tag":319,"props":3011,"children":3012},{"class":326},[3013],{"type":24,"value":633},{"type":18,"tag":319,"props":3015,"children":3016},{"class":332},[3017],{"type":24,"value":2717},{"type":18,"tag":319,"props":3019,"children":3020},{"class":326},[3021],{"type":24,"value":790},{"type":18,"tag":319,"props":3023,"children":3024},{"class":332},[3025],{"type":24,"value":383},{"type":18,"tag":319,"props":3027,"children":3028},{"class":386},[3029],{"type":24,"value":694},{"type":18,"tag":319,"props":3031,"children":3032},{"class":332},[3033],{"type":24,"value":2881},{"type":18,"tag":319,"props":3035,"children":3036},{"class":326},[3037],{"type":24,"value":378},{"type":18,"tag":319,"props":3039,"children":3040},{"class":332},[3041],{"type":24,"value":3042}," x_max\n",{"type":18,"tag":319,"props":3044,"children":3045},{"class":321,"line":454},[3046,3050,3054,3058,3062,3066,3070,3074,3078,3082,3086],{"type":18,"tag":319,"props":3047,"children":3048},{"class":332},[3049],{"type":24,"value":3001},{"type":18,"tag":319,"props":3051,"children":3052},{"class":386},[3053],{"type":24,"value":694},{"type":18,"tag":319,"props":3055,"children":3056},{"class":332},[3057],{"type":24,"value":2856},{"type":18,"tag":319,"props":3059,"children":3060},{"class":326},[3061],{"type":24,"value":633},{"type":18,"tag":319,"props":3063,"children":3064},{"class":332},[3065],{"type":24,"value":2717},{"type":18,"tag":319,"props":3067,"children":3068},{"class":326},[3069],{"type":24,"value":790},{"type":18,"tag":319,"props":3071,"children":3072},{"class":332},[3073],{"type":24,"value":383},{"type":18,"tag":319,"props":3075,"children":3076},{"class":386},[3077],{"type":24,"value":694},{"type":18,"tag":319,"props":3079,"children":3080},{"class":332},[3081],{"type":24,"value":2881},{"type":18,"tag":319,"props":3083,"children":3084},{"class":326},[3085],{"type":24,"value":378},{"type":18,"tag":319,"props":3087,"children":3088},{"class":332},[3089],{"type":24,"value":3090}," y_max\n",{"type":18,"tag":319,"props":3092,"children":3093},{"class":321,"line":475},[3094,3098,3102,3106,3110,3114,3118,3122,3126,3130,3134],{"type":18,"tag":319,"props":3095,"children":3096},{"class":332},[3097],{"type":24,"value":3001},{"type":18,"tag":319,"props":3099,"children":3100},{"class":386},[3101],{"type":24,"value":643},{"type":18,"tag":319,"props":3103,"children":3104},{"class":332},[3105],{"type":24,"value":2856},{"type":18,"tag":319,"props":3107,"children":3108},{"class":326},[3109],{"type":24,"value":633},{"type":18,"tag":319,"props":3111,"children":3112},{"class":332},[3113],{"type":24,"value":2717},{"type":18,"tag":319,"props":3115,"children":3116},{"class":326},[3117],{"type":24,"value":790},{"type":18,"tag":319,"props":3119,"children":3120},{"class":332},[3121],{"type":24,"value":383},{"type":18,"tag":319,"props":3123,"children":3124},{"class":386},[3125],{"type":24,"value":694},{"type":18,"tag":319,"props":3127,"children":3128},{"class":332},[3129],{"type":24,"value":2881},{"type":18,"tag":319,"props":3131,"children":3132},{"class":326},[3133],{"type":24,"value":378},{"type":18,"tag":319,"props":3135,"children":3136},{"class":332},[3137],{"type":24,"value":3138}," theta_max\n",{"type":18,"tag":319,"props":3140,"children":3141},{"class":321,"line":496},[3142],{"type":18,"tag":319,"props":3143,"children":3144},{},[3145],{"type":24,"value":354},{"type":18,"tag":319,"props":3147,"children":3148},{"class":321,"line":505},[3149,3154,3158,3162,3166,3170,3174,3179,3183,3187,3191,3195,3199,3203,3207,3211,3215,3220,3224],{"type":18,"tag":319,"props":3150,"children":3151},{"class":332},[3152],{"type":24,"value":3153},"lbx[num_states ",{"type":18,"tag":319,"props":3155,"children":3156},{"class":326},[3157],{"type":24,"value":633},{"type":18,"tag":319,"props":3159,"children":3160},{"class":332},[3161],{"type":24,"value":2717},{"type":18,"tag":319,"props":3163,"children":3164},{"class":326},[3165],{"type":24,"value":790},{"type":18,"tag":319,"props":3167,"children":3168},{"class":332},[3169],{"type":24,"value":383},{"type":18,"tag":319,"props":3171,"children":3172},{"class":386},[3173],{"type":24,"value":694},{"type":18,"tag":319,"props":3175,"children":3176},{"class":332},[3177],{"type":24,"value":3178},"): num_states ",{"type":18,"tag":319,"props":3180,"children":3181},{"class":326},[3182],{"type":24,"value":633},{"type":18,"tag":319,"props":3184,"children":3185},{"class":332},[3186],{"type":24,"value":2717},{"type":18,"tag":319,"props":3188,"children":3189},{"class":326},[3190],{"type":24,"value":790},{"type":18,"tag":319,"props":3192,"children":3193},{"class":332},[3194],{"type":24,"value":383},{"type":18,"tag":319,"props":3196,"children":3197},{"class":386},[3198],{"type":24,"value":694},{"type":18,"tag":319,"props":3200,"children":3201},{"class":332},[3202],{"type":24,"value":813},{"type":18,"tag":319,"props":3204,"children":3205},{"class":326},[3206],{"type":24,"value":790},{"type":18,"tag":319,"props":3208,"children":3209},{"class":332},[3210],{"type":24,"value":2742},{"type":18,"tag":319,"props":3212,"children":3213},{"class":326},[3214],{"type":24,"value":633},{"type":18,"tag":319,"props":3216,"children":3217},{"class":332},[3218],{"type":24,"value":3219}," prediction_horizons: num_controls] ",{"type":18,"tag":319,"props":3221,"children":3222},{"class":326},[3223],{"type":24,"value":378},{"type":18,"tag":319,"props":3225,"children":3226},{"class":332},[3227],{"type":24,"value":3228}," u_min\n",{"type":18,"tag":319,"props":3230,"children":3231},{"class":321,"line":536},[3232,3236,3240,3244,3248,3252,3256,3260,3264,3268,3272,3276,3280,3284,3288,3292,3296,3300,3304,3308,3312,3316,3320],{"type":18,"tag":319,"props":3233,"children":3234},{"class":332},[3235],{"type":24,"value":3153},{"type":18,"tag":319,"props":3237,"children":3238},{"class":326},[3239],{"type":24,"value":633},{"type":18,"tag":319,"props":3241,"children":3242},{"class":332},[3243],{"type":24,"value":2717},{"type":18,"tag":319,"props":3245,"children":3246},{"class":326},[3247],{"type":24,"value":790},{"type":18,"tag":319,"props":3249,"children":3250},{"class":332},[3251],{"type":24,"value":383},{"type":18,"tag":319,"props":3253,"children":3254},{"class":386},[3255],{"type":24,"value":694},{"type":18,"tag":319,"props":3257,"children":3258},{"class":332},[3259],{"type":24,"value":813},{"type":18,"tag":319,"props":3261,"children":3262},{"class":326},[3263],{"type":24,"value":790},{"type":18,"tag":319,"props":3265,"children":3266},{"class":332},[3267],{"type":24,"value":383},{"type":18,"tag":319,"props":3269,"children":3270},{"class":386},[3271],{"type":24,"value":694},{"type":18,"tag":319,"props":3273,"children":3274},{"class":332},[3275],{"type":24,"value":2856},{"type":18,"tag":319,"props":3277,"children":3278},{"class":326},[3279],{"type":24,"value":633},{"type":18,"tag":319,"props":3281,"children":3282},{"class":332},[3283],{"type":24,"value":2717},{"type":18,"tag":319,"props":3285,"children":3286},{"class":326},[3287],{"type":24,"value":790},{"type":18,"tag":319,"props":3289,"children":3290},{"class":332},[3291],{"type":24,"value":383},{"type":18,"tag":319,"props":3293,"children":3294},{"class":386},[3295],{"type":24,"value":694},{"type":18,"tag":319,"props":3297,"children":3298},{"class":332},[3299],{"type":24,"value":813},{"type":18,"tag":319,"props":3301,"children":3302},{"class":326},[3303],{"type":24,"value":790},{"type":18,"tag":319,"props":3305,"children":3306},{"class":332},[3307],{"type":24,"value":2742},{"type":18,"tag":319,"props":3309,"children":3310},{"class":326},[3311],{"type":24,"value":633},{"type":18,"tag":319,"props":3313,"children":3314},{"class":332},[3315],{"type":24,"value":3219},{"type":18,"tag":319,"props":3317,"children":3318},{"class":326},[3319],{"type":24,"value":378},{"type":18,"tag":319,"props":3321,"children":3322},{"class":332},[3323],{"type":24,"value":3228},{"type":18,"tag":319,"props":3325,"children":3326},{"class":321,"line":567},[3327],{"type":18,"tag":319,"props":3328,"children":3329},{},[3330],{"type":24,"value":354},{"type":18,"tag":319,"props":3332,"children":3333},{"class":321,"line":576},[3334,3339,3343,3347,3351,3355,3359,3363,3367,3371,3375,3379,3383,3387,3391,3395,3399,3403,3407],{"type":18,"tag":319,"props":3335,"children":3336},{"class":332},[3337],{"type":24,"value":3338},"ubx[num_states ",{"type":18,"tag":319,"props":3340,"children":3341},{"class":326},[3342],{"type":24,"value":633},{"type":18,"tag":319,"props":3344,"children":3345},{"class":332},[3346],{"type":24,"value":2717},{"type":18,"tag":319,"props":3348,"children":3349},{"class":326},[3350],{"type":24,"value":790},{"type":18,"tag":319,"props":3352,"children":3353},{"class":332},[3354],{"type":24,"value":383},{"type":18,"tag":319,"props":3356,"children":3357},{"class":386},[3358],{"type":24,"value":694},{"type":18,"tag":319,"props":3360,"children":3361},{"class":332},[3362],{"type":24,"value":3178},{"type":18,"tag":319,"props":3364,"children":3365},{"class":326},[3366],{"type":24,"value":633},{"type":18,"tag":319,"props":3368,"children":3369},{"class":332},[3370],{"type":24,"value":2717},{"type":18,"tag":319,"props":3372,"children":3373},{"class":326},[3374],{"type":24,"value":790},{"type":18,"tag":319,"props":3376,"children":3377},{"class":332},[3378],{"type":24,"value":383},{"type":18,"tag":319,"props":3380,"children":3381},{"class":386},[3382],{"type":24,"value":694},{"type":18,"tag":319,"props":3384,"children":3385},{"class":332},[3386],{"type":24,"value":813},{"type":18,"tag":319,"props":3388,"children":3389},{"class":326},[3390],{"type":24,"value":790},{"type":18,"tag":319,"props":3392,"children":3393},{"class":332},[3394],{"type":24,"value":2742},{"type":18,"tag":319,"props":3396,"children":3397},{"class":326},[3398],{"type":24,"value":633},{"type":18,"tag":319,"props":3400,"children":3401},{"class":332},[3402],{"type":24,"value":3219},{"type":18,"tag":319,"props":3404,"children":3405},{"class":326},[3406],{"type":24,"value":378},{"type":18,"tag":319,"props":3408,"children":3409},{"class":332},[3410],{"type":24,"value":3411}," u_max\n",{"type":18,"tag":319,"props":3413,"children":3414},{"class":321,"line":585},[3415,3419,3423,3427,3431,3435,3439,3443,3447,3451,3455,3459,3463,3467,3471,3475,3479,3483,3487,3491,3495,3499,3503],{"type":18,"tag":319,"props":3416,"children":3417},{"class":332},[3418],{"type":24,"value":3338},{"type":18,"tag":319,"props":3420,"children":3421},{"class":326},[3422],{"type":24,"value":633},{"type":18,"tag":319,"props":3424,"children":3425},{"class":332},[3426],{"type":24,"value":2717},{"type":18,"tag":319,"props":3428,"children":3429},{"class":326},[3430],{"type":24,"value":790},{"type":18,"tag":319,"props":3432,"children":3433},{"class":332},[3434],{"type":24,"value":383},{"type":18,"tag":319,"props":3436,"children":3437},{"class":386},[3438],{"type":24,"value":694},{"type":18,"tag":319,"props":3440,"children":3441},{"class":332},[3442],{"type":24,"value":813},{"type":18,"tag":319,"props":3444,"children":3445},{"class":326},[3446],{"type":24,"value":790},{"type":18,"tag":319,"props":3448,"children":3449},{"class":332},[3450],{"type":24,"value":383},{"type":18,"tag":319,"props":3452,"children":3453},{"class":386},[3454],{"type":24,"value":694},{"type":18,"tag":319,"props":3456,"children":3457},{"class":332},[3458],{"type":24,"value":2856},{"type":18,"tag":319,"props":3460,"children":3461},{"class":326},[3462],{"type":24,"value":633},{"type":18,"tag":319,"props":3464,"children":3465},{"class":332},[3466],{"type":24,"value":2717},{"type":18,"tag":319,"props":3468,"children":3469},{"class":326},[3470],{"type":24,"value":790},{"type":18,"tag":319,"props":3472,"children":3473},{"class":332},[3474],{"type":24,"value":383},{"type":18,"tag":319,"props":3476,"children":3477},{"class":386},[3478],{"type":24,"value":694},{"type":18,"tag":319,"props":3480,"children":3481},{"class":332},[3482],{"type":24,"value":813},{"type":18,"tag":319,"props":3484,"children":3485},{"class":326},[3486],{"type":24,"value":790},{"type":18,"tag":319,"props":3488,"children":3489},{"class":332},[3490],{"type":24,"value":2742},{"type":18,"tag":319,"props":3492,"children":3493},{"class":326},[3494],{"type":24,"value":633},{"type":18,"tag":319,"props":3496,"children":3497},{"class":332},[3498],{"type":24,"value":3219},{"type":18,"tag":319,"props":3500,"children":3501},{"class":326},[3502],{"type":24,"value":378},{"type":18,"tag":319,"props":3504,"children":3505},{"class":332},[3506],{"type":24,"value":3411},{"type":18,"tag":319,"props":3508,"children":3509},{"class":321,"line":612},[3510],{"type":18,"tag":319,"props":3511,"children":3512},{},[3513],{"type":24,"value":354},{"type":18,"tag":319,"props":3515,"children":3516},{"class":321,"line":651},[3517,3522,3526],{"type":18,"tag":319,"props":3518,"children":3519},{"class":332},[3520],{"type":24,"value":3521},"args ",{"type":18,"tag":319,"props":3523,"children":3524},{"class":326},[3525],{"type":24,"value":378},{"type":18,"tag":319,"props":3527,"children":3528},{"class":332},[3529],{"type":24,"value":2438},{"type":18,"tag":319,"props":3531,"children":3532},{"class":321,"line":684},[3533,3537,3542,3547,3551,3555,3559,3563,3567,3571,3575,3580,3584],{"type":18,"tag":319,"props":3534,"children":3535},{"class":332},[3536],{"type":24,"value":1159},{"type":18,"tag":319,"props":3538,"children":3539},{"class":1741},[3540],{"type":24,"value":3541},"'lbg'",{"type":18,"tag":319,"props":3543,"children":3544},{"class":332},[3545],{"type":24,"value":3546},": ca.",{"type":18,"tag":319,"props":3548,"children":3549},{"class":386},[3550],{"type":24,"value":2703},{"type":18,"tag":319,"props":3552,"children":3553},{"class":332},[3554],{"type":24,"value":2708},{"type":18,"tag":319,"props":3556,"children":3557},{"class":326},[3558],{"type":24,"value":633},{"type":18,"tag":319,"props":3560,"children":3561},{"class":332},[3562],{"type":24,"value":2717},{"type":18,"tag":319,"props":3564,"children":3565},{"class":326},[3566],{"type":24,"value":790},{"type":18,"tag":319,"props":3568,"children":3569},{"class":332},[3570],{"type":24,"value":383},{"type":18,"tag":319,"props":3572,"children":3573},{"class":386},[3574],{"type":24,"value":694},{"type":18,"tag":319,"props":3576,"children":3577},{"class":332},[3578],{"type":24,"value":3579},"), ",{"type":18,"tag":319,"props":3581,"children":3582},{"class":386},[3583],{"type":24,"value":694},{"type":18,"tag":319,"props":3585,"children":3586},{"class":332},[3587],{"type":24,"value":3588},")),\n",{"type":18,"tag":319,"props":3590,"children":3591},{"class":321,"line":702},[3592,3596,3601,3605,3609,3613,3617,3621,3625,3629,3633,3637,3641],{"type":18,"tag":319,"props":3593,"children":3594},{"class":332},[3595],{"type":24,"value":1159},{"type":18,"tag":319,"props":3597,"children":3598},{"class":1741},[3599],{"type":24,"value":3600},"'ubg'",{"type":18,"tag":319,"props":3602,"children":3603},{"class":332},[3604],{"type":24,"value":3546},{"type":18,"tag":319,"props":3606,"children":3607},{"class":386},[3608],{"type":24,"value":2703},{"type":18,"tag":319,"props":3610,"children":3611},{"class":332},[3612],{"type":24,"value":2708},{"type":18,"tag":319,"props":3614,"children":3615},{"class":326},[3616],{"type":24,"value":633},{"type":18,"tag":319,"props":3618,"children":3619},{"class":332},[3620],{"type":24,"value":2717},{"type":18,"tag":319,"props":3622,"children":3623},{"class":326},[3624],{"type":24,"value":790},{"type":18,"tag":319,"props":3626,"children":3627},{"class":332},[3628],{"type":24,"value":383},{"type":18,"tag":319,"props":3630,"children":3631},{"class":386},[3632],{"type":24,"value":694},{"type":18,"tag":319,"props":3634,"children":3635},{"class":332},[3636],{"type":24,"value":3579},{"type":18,"tag":319,"props":3638,"children":3639},{"class":386},[3640],{"type":24,"value":694},{"type":18,"tag":319,"props":3642,"children":3643},{"class":332},[3644],{"type":24,"value":3588},{"type":18,"tag":319,"props":3646,"children":3647},{"class":321,"line":711},[3648,3652,3657],{"type":18,"tag":319,"props":3649,"children":3650},{"class":332},[3651],{"type":24,"value":1159},{"type":18,"tag":319,"props":3653,"children":3654},{"class":1741},[3655],{"type":24,"value":3656},"'lbx'",{"type":18,"tag":319,"props":3658,"children":3659},{"class":332},[3660],{"type":24,"value":3661},": lbx,\n",{"type":18,"tag":319,"props":3663,"children":3664},{"class":321,"line":719},[3665,3669,3674],{"type":18,"tag":319,"props":3666,"children":3667},{"class":332},[3668],{"type":24,"value":1159},{"type":18,"tag":319,"props":3670,"children":3671},{"class":1741},[3672],{"type":24,"value":3673},"'ubx'",{"type":18,"tag":319,"props":3675,"children":3676},{"class":332},[3677],{"type":24,"value":3678},": ubx\n",{"type":18,"tag":319,"props":3680,"children":3681},{"class":321,"line":752},[3682],{"type":18,"tag":319,"props":3683,"children":3684},{"class":332},[3685],{"type":24,"value":2666},{"type":18,"tag":27,"props":3687,"children":3688},{},[3689],{"type":24,"value":3690},"Obtain the solution from the solver at each iteration",{"type":18,"tag":304,"props":3692,"children":3695},{"className":3693,"code":3694,"language":309,"meta":8},[307],"sol = solver(\n            x0=args['x0'],\n            p=args['p'],\n            lbx=args['lbx'],\n            ubx=args['ubx'],\n            lbg=args['lbg'],\n            ubg=args['ubg'],\n        )\n\n        sol_x = ca.reshape(sol['x'][:num_states * (prediction_horizons + 1)], 3, prediction_horizons + 1)\n        sol_u = ca.reshape(sol['x'][num_states * (prediction_horizons + 1):], 2, prediction_horizons)\n",[3696],{"type":18,"tag":312,"props":3697,"children":3698},{},[3699],{"type":18,"tag":304,"props":3700,"children":3701},{"__ignoreMap":8},[3702,3719,3752,3779,3807,3835,3863,3891,3899,3906,3983],{"type":18,"tag":319,"props":3703,"children":3704},{"class":321,"line":322},[3705,3710,3714],{"type":18,"tag":319,"props":3706,"children":3707},{"class":332},[3708],{"type":24,"value":3709},"sol ",{"type":18,"tag":319,"props":3711,"children":3712},{"class":326},[3713],{"type":24,"value":378},{"type":18,"tag":319,"props":3715,"children":3716},{"class":332},[3717],{"type":24,"value":3718}," solver(\n",{"type":18,"tag":319,"props":3720,"children":3721},{"class":321,"line":348},[3722,3727,3733,3737,3742,3747],{"type":18,"tag":319,"props":3723,"children":3724},{"class":332},[3725],{"type":24,"value":3726},"            ",{"type":18,"tag":319,"props":3728,"children":3730},{"class":3729},"ct-657843",[3731],{"type":24,"value":3732},"x0",{"type":18,"tag":319,"props":3734,"children":3735},{"class":326},[3736],{"type":24,"value":378},{"type":18,"tag":319,"props":3738,"children":3739},{"class":332},[3740],{"type":24,"value":3741},"args[",{"type":18,"tag":319,"props":3743,"children":3744},{"class":1741},[3745],{"type":24,"value":3746},"'x0'",{"type":18,"tag":319,"props":3748,"children":3749},{"class":332},[3750],{"type":24,"value":3751},"],\n",{"type":18,"tag":319,"props":3753,"children":3754},{"class":321,"line":357},[3755,3759,3763,3767,3771,3775],{"type":18,"tag":319,"props":3756,"children":3757},{"class":332},[3758],{"type":24,"value":3726},{"type":18,"tag":319,"props":3760,"children":3761},{"class":3729},[3762],{"type":24,"value":27},{"type":18,"tag":319,"props":3764,"children":3765},{"class":326},[3766],{"type":24,"value":378},{"type":18,"tag":319,"props":3768,"children":3769},{"class":332},[3770],{"type":24,"value":3741},{"type":18,"tag":319,"props":3772,"children":3773},{"class":1741},[3774],{"type":24,"value":2483},{"type":18,"tag":319,"props":3776,"children":3777},{"class":332},[3778],{"type":24,"value":3751},{"type":18,"tag":319,"props":3780,"children":3781},{"class":321,"line":367},[3782,3786,3791,3795,3799,3803],{"type":18,"tag":319,"props":3783,"children":3784},{"class":332},[3785],{"type":24,"value":3726},{"type":18,"tag":319,"props":3787,"children":3788},{"class":3729},[3789],{"type":24,"value":3790},"lbx",{"type":18,"tag":319,"props":3792,"children":3793},{"class":326},[3794],{"type":24,"value":378},{"type":18,"tag":319,"props":3796,"children":3797},{"class":332},[3798],{"type":24,"value":3741},{"type":18,"tag":319,"props":3800,"children":3801},{"class":1741},[3802],{"type":24,"value":3656},{"type":18,"tag":319,"props":3804,"children":3805},{"class":332},[3806],{"type":24,"value":3751},{"type":18,"tag":319,"props":3808,"children":3809},{"class":321,"line":392},[3810,3814,3819,3823,3827,3831],{"type":18,"tag":319,"props":3811,"children":3812},{"class":332},[3813],{"type":24,"value":3726},{"type":18,"tag":319,"props":3815,"children":3816},{"class":3729},[3817],{"type":24,"value":3818},"ubx",{"type":18,"tag":319,"props":3820,"children":3821},{"class":326},[3822],{"type":24,"value":378},{"type":18,"tag":319,"props":3824,"children":3825},{"class":332},[3826],{"type":24,"value":3741},{"type":18,"tag":319,"props":3828,"children":3829},{"class":1741},[3830],{"type":24,"value":3673},{"type":18,"tag":319,"props":3832,"children":3833},{"class":332},[3834],{"type":24,"value":3751},{"type":18,"tag":319,"props":3836,"children":3837},{"class":321,"line":401},[3838,3842,3847,3851,3855,3859],{"type":18,"tag":319,"props":3839,"children":3840},{"class":332},[3841],{"type":24,"value":3726},{"type":18,"tag":319,"props":3843,"children":3844},{"class":3729},[3845],{"type":24,"value":3846},"lbg",{"type":18,"tag":319,"props":3848,"children":3849},{"class":326},[3850],{"type":24,"value":378},{"type":18,"tag":319,"props":3852,"children":3853},{"class":332},[3854],{"type":24,"value":3741},{"type":18,"tag":319,"props":3856,"children":3857},{"class":1741},[3858],{"type":24,"value":3541},{"type":18,"tag":319,"props":3860,"children":3861},{"class":332},[3862],{"type":24,"value":3751},{"type":18,"tag":319,"props":3864,"children":3865},{"class":321,"line":423},[3866,3870,3875,3879,3883,3887],{"type":18,"tag":319,"props":3867,"children":3868},{"class":332},[3869],{"type":24,"value":3726},{"type":18,"tag":319,"props":3871,"children":3872},{"class":3729},[3873],{"type":24,"value":3874},"ubg",{"type":18,"tag":319,"props":3876,"children":3877},{"class":326},[3878],{"type":24,"value":378},{"type":18,"tag":319,"props":3880,"children":3881},{"class":332},[3882],{"type":24,"value":3741},{"type":18,"tag":319,"props":3884,"children":3885},{"class":1741},[3886],{"type":24,"value":3600},{"type":18,"tag":319,"props":3888,"children":3889},{"class":332},[3890],{"type":24,"value":3751},{"type":18,"tag":319,"props":3892,"children":3893},{"class":321,"line":432},[3894],{"type":18,"tag":319,"props":3895,"children":3896},{"class":332},[3897],{"type":24,"value":3898},"        )\n",{"type":18,"tag":319,"props":3900,"children":3901},{"class":321,"line":454},[3902],{"type":18,"tag":319,"props":3903,"children":3904},{},[3905],{"type":24,"value":354},{"type":18,"tag":319,"props":3907,"children":3908},{"class":321,"line":475},[3909,3914,3918,3923,3927,3932,3936,3940,3944,3948,3952,3957,3962,3967,3971,3975,3979],{"type":18,"tag":319,"props":3910,"children":3911},{"class":332},[3912],{"type":24,"value":3913},"        sol_x ",{"type":18,"tag":319,"props":3915,"children":3916},{"class":326},[3917],{"type":24,"value":378},{"type":18,"tag":319,"props":3919,"children":3920},{"class":332},[3921],{"type":24,"value":3922}," ca.reshape(sol[",{"type":18,"tag":319,"props":3924,"children":3925},{"class":1741},[3926],{"type":24,"value":2466},{"type":18,"tag":319,"props":3928,"children":3929},{"class":332},[3930],{"type":24,"value":3931},"][:num_states ",{"type":18,"tag":319,"props":3933,"children":3934},{"class":326},[3935],{"type":24,"value":633},{"type":18,"tag":319,"props":3937,"children":3938},{"class":332},[3939],{"type":24,"value":2717},{"type":18,"tag":319,"props":3941,"children":3942},{"class":326},[3943],{"type":24,"value":790},{"type":18,"tag":319,"props":3945,"children":3946},{"class":332},[3947],{"type":24,"value":383},{"type":18,"tag":319,"props":3949,"children":3950},{"class":386},[3951],{"type":24,"value":694},{"type":18,"tag":319,"props":3953,"children":3954},{"class":332},[3955],{"type":24,"value":3956},")], ",{"type":18,"tag":319,"props":3958,"children":3959},{"class":386},[3960],{"type":24,"value":3961},"3",{"type":18,"tag":319,"props":3963,"children":3964},{"class":332},[3965],{"type":24,"value":3966},", prediction_horizons ",{"type":18,"tag":319,"props":3968,"children":3969},{"class":326},[3970],{"type":24,"value":790},{"type":18,"tag":319,"props":3972,"children":3973},{"class":332},[3974],{"type":24,"value":383},{"type":18,"tag":319,"props":3976,"children":3977},{"class":386},[3978],{"type":24,"value":694},{"type":18,"tag":319,"props":3980,"children":3981},{"class":332},[3982],{"type":24,"value":1749},{"type":18,"tag":319,"props":3984,"children":3985},{"class":321,"line":496},[3986,3991,3995,3999,4003,4008,4012,4016,4020,4024,4028,4033,4037],{"type":18,"tag":319,"props":3987,"children":3988},{"class":332},[3989],{"type":24,"value":3990},"        sol_u ",{"type":18,"tag":319,"props":3992,"children":3993},{"class":326},[3994],{"type":24,"value":378},{"type":18,"tag":319,"props":3996,"children":3997},{"class":332},[3998],{"type":24,"value":3922},{"type":18,"tag":319,"props":4000,"children":4001},{"class":1741},[4002],{"type":24,"value":2466},{"type":18,"tag":319,"props":4004,"children":4005},{"class":332},[4006],{"type":24,"value":4007},"][num_states ",{"type":18,"tag":319,"props":4009,"children":4010},{"class":326},[4011],{"type":24,"value":633},{"type":18,"tag":319,"props":4013,"children":4014},{"class":332},[4015],{"type":24,"value":2717},{"type":18,"tag":319,"props":4017,"children":4018},{"class":326},[4019],{"type":24,"value":790},{"type":18,"tag":319,"props":4021,"children":4022},{"class":332},[4023],{"type":24,"value":383},{"type":18,"tag":319,"props":4025,"children":4026},{"class":386},[4027],{"type":24,"value":694},{"type":18,"tag":319,"props":4029,"children":4030},{"class":332},[4031],{"type":24,"value":4032},"):], ",{"type":18,"tag":319,"props":4034,"children":4035},{"class":386},[4036],{"type":24,"value":643},{"type":18,"tag":319,"props":4038,"children":4039},{"class":332},[4040],{"type":24,"value":4041},", prediction_horizons)",{"type":18,"tag":19,"props":4043,"children":4045},{"id":4044},"in-conclusion",[4046],{"type":24,"value":4047},"In conclusion",{"type":18,"tag":27,"props":4049,"children":4050},{},[4051],{"type":24,"value":4052},"In my opinion, I think MPC is suitable for the control system, since it can provide the significant control input that was predicted over the finite future of time. This can ensure the safety of the system and also can provide a quick look or reaction to the control action of the system too.",{"type":18,"tag":19,"props":4054,"children":4056},{"id":4055},"reference",[4057],{"type":24,"value":4058},"Reference",{"type":18,"tag":4060,"props":4061,"children":4062},"ol",{},[4063,4076,4087],{"type":18,"tag":115,"props":4064,"children":4065},{},[4066,4068],{"type":24,"value":4067},"MPC-and-MHE-implementation-in-MATLAB-using-Casadi: ",{"type":18,"tag":4069,"props":4070,"children":4074},"a",{"href":4071,"rel":4072},"https://github.com/MMehrez/MPC-and-MHE-implementation-in-MATLAB-using-Casadi",[4073],"nofollow",[4075],{"type":24,"value":4071},{"type":18,"tag":115,"props":4077,"children":4078},{},[4079,4081],{"type":24,"value":4080},"CasAdi: ",{"type":18,"tag":4069,"props":4082,"children":4085},{"href":4083,"rel":4084},"https://web.casadi.org",[4073],[4086],{"type":24,"value":4083},{"type":18,"tag":115,"props":4088,"children":4089},{},[4090,4092],{"type":24,"value":4091},"PathTracking: ",{"type":18,"tag":4069,"props":4093,"children":4096},{"href":4094,"rel":4095},"https://github.com/SokhengDin/PathTracking",[4073],[4097],{"type":24,"value":4094},{"type":18,"tag":4099,"children":4100},"style",[4101],{"type":24,"value":4102},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-326375{color:#6A737D;}\n.ct-533739{color:#79B8FF;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":348,"depth":348,"links":4104},[4105,4106,4107,4108,4109,4110,4111,4112,4113],{"id":21,"depth":348,"text":25},{"id":68,"depth":348,"text":71},{"id":217,"depth":348,"text":220},{"id":268,"depth":348,"text":271},{"id":1549,"depth":348,"text":1552},{"id":1592,"depth":348,"text":1595},{"id":1632,"depth":348,"text":1635},{"id":4044,"depth":348,"text":4047},{"id":4055,"depth":348,"text":4058},"markdown","content:topics:robotics:nonlinear-mpc.md","content","topics/robotics/nonlinear-mpc.md","md",{"_path":4120,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":4121,"description":4122,"author":4123,"slug":4124,"tag":4124,"img":4125,"body":4126,"_type":4114,"_id":6043,"_source":4116,"_file":6044,"_extension":4118},"/topics/robotics/pid-controller","Introduction to PID Controller in Python","PID Control is a feedback control","DIN SOKHENG","pid","/topics/robotics/nmpc/PID.png",{"type":15,"children":4127,"toc":6029},[4128,4134,4145,4151,4156,4162,4166,4205,4214,4220,4226,4236,4242,4247,4281,4287,4292,4297,4307,4313,4318,4322,4327,4331,4336,4749,4766,5313,5318,5324,5331,5349,5435,5440,5502,5507,5591,5603,5891,5897,5916,5930,5934,5944,5950,5960,5966,5971,5976,5982,6025],{"type":18,"tag":19,"props":4129,"children":4131},{"id":4130},"what-is-pid-controller",[4132],{"type":24,"value":4133},"What is PID Controller ?",{"type":18,"tag":27,"props":4135,"children":4136},{},[4137,4139,4143],{"type":24,"value":4138},"The Proportional Integral Derivative (PID) controller is a traditional method in control systems that has found widespread use in control system engineering and industrial applications since its emergence in the 1940s. A PID controller is considered a feedback controller, aiming to minimize the error between the system's feedback and the desired setpoint by manually or automatically fine-tuning the coefficients ",{"type":18,"tag":119,"props":4140,"children":4142},{"latex-express":4141,"styles":122},"K_{P}, K_{I}, K_{D}",[],{"type":24,"value":4144},".",{"type":18,"tag":19,"props":4146,"children":4148},{"id":4147},"how-it-works",[4149],{"type":24,"value":4150},"How it works ?",{"type":18,"tag":27,"props":4152,"children":4153},{},[4154],{"type":24,"value":4155},"Imagine you want to control the speed of a DC motor to reach 300 RPM, but due to the natural response of the DC motor, it cannot reach the desired angular speed. PID offers a solution to this natural response by adjusting the system's time response using its three components, as shown in the formula below.",{"type":18,"tag":19,"props":4157,"children":4159},{"id":4158},"formulation",[4160],{"type":24,"value":4161},"Formulation",{"type":18,"tag":119,"props":4163,"children":4165},{"latex-express":4164,"styles":59},"u(t) = K_{p}e(t) + K_{I} \\int_{0}^{t} e(t) dt + K_{D} \\frac{d e(t)}{dt} ",[],{"type":18,"tag":111,"props":4167,"children":4168},{},[4169,4178,4187,4196],{"type":18,"tag":115,"props":4170,"children":4171},{},[4172,4176],{"type":18,"tag":119,"props":4173,"children":4175},{"latex-express":4174,"styles":122},"K_{P}",[],{"type":24,"value":4177}," represents the proportional gain.",{"type":18,"tag":115,"props":4179,"children":4180},{},[4181,4185],{"type":18,"tag":119,"props":4182,"children":4184},{"latex-express":4183,"styles":122},"K_{I}",[],{"type":24,"value":4186}," represents the integral gain.",{"type":18,"tag":115,"props":4188,"children":4189},{},[4190,4194],{"type":18,"tag":119,"props":4191,"children":4193},{"latex-express":4192,"styles":122},"K_{D}",[],{"type":24,"value":4195}," represents the derivative gain.",{"type":18,"tag":115,"props":4197,"children":4198},{},[4199,4203],{"type":18,"tag":119,"props":4200,"children":4202},{"latex-express":4201,"styles":122},"e(t)=target-feedback",[],{"type":24,"value":4204}," is the error between target point and feedback of the system",{"type":18,"tag":278,"props":4206,"children":4208},{"className":4207},[281,282,283],[4209,4210],{"type":24,"value":286},{"type":18,"tag":43,"props":4211,"children":4213},{"className":4212,"src":4125},[46],[],{"type":18,"tag":56,"props":4215,"children":4217},{"className":4216},[59,60,61,62],[4218],{"type":24,"value":4219},"\n    The Block diagram of PID Controller\n",{"type":18,"tag":19,"props":4221,"children":4223},{"id":4222},"response-time",[4224],{"type":24,"value":4225},"Response Time",{"type":18,"tag":278,"props":4227,"children":4229},{"className":4228},[281,282,283],[4230,4231],{"type":24,"value":286},{"type":18,"tag":43,"props":4232,"children":4235},{"className":4233,"src":4234},[46],"/topics/robotics/nmpc/response_timepid.png",[],{"type":18,"tag":56,"props":4237,"children":4239},{"className":4238},[59,60,61,62],[4240],{"type":24,"value":4241},"\n    The response time of the system with each K_P, K_I, K_D\n",{"type":18,"tag":27,"props":4243,"children":4244},{},[4245],{"type":24,"value":4246},"As you can see in the figure above, the response time of the system is difference.",{"type":18,"tag":111,"props":4248,"children":4249},{},[4250,4261,4271],{"type":18,"tag":115,"props":4251,"children":4252},{},[4253,4255,4259],{"type":24,"value":4254},"The response time with ",{"type":18,"tag":119,"props":4256,"children":4258},{"latex-express":4257,"styles":122},"K_{I}=2",[],{"type":24,"value":4260}," the system is likely to overshoot before reaching the steady-state, which may not be suitable for applications like controlling a DC motor.",{"type":18,"tag":115,"props":4262,"children":4263},{},[4264,4265,4269],{"type":24,"value":4254},{"type":18,"tag":119,"props":4266,"children":4268},{"latex-express":4267,"styles":122},"K_{i}=0.5, ",[],{"type":24,"value":4270},"  the response does not overshoot but has a slower response to reach the steady-state.",{"type":18,"tag":115,"props":4272,"children":4273},{},[4274,4275,4279],{"type":24,"value":4254},{"type":18,"tag":119,"props":4276,"children":4278},{"latex-express":4277,"styles":122},"K_{p}=1, K_{i}=1, K_{d}=1",[],{"type":24,"value":4280},"  there is a slight overshoot, but the steady-state is reached faster.",{"type":18,"tag":19,"props":4282,"children":4284},{"id":4283},"how-can-we-write-pid-code-in-python",[4285],{"type":24,"value":4286},"How can we write PID code in Python ?",{"type":18,"tag":27,"props":4288,"children":4289},{},[4290],{"type":24,"value":4291},"Let's use a differential drive robot as a case study system. A differential drive robot is commonly used in robotics and automation, making it an ideal choice for a demonstration.",{"type":18,"tag":27,"props":4293,"children":4294},{},[4295],{"type":24,"value":4296},"The configuration of Differential Drive Robot in axes OXY.",{"type":18,"tag":278,"props":4298,"children":4300},{"className":4299},[281,282,283],[4301,4302],{"type":24,"value":286},{"type":18,"tag":43,"props":4303,"children":4306},{"className":4304,"src":4305},[46],"/topics/robotics/nmpc/diff_drive.png",[],{"type":18,"tag":56,"props":4308,"children":4310},{"className":4309},[59,60,61,62],[4311],{"type":24,"value":4312},"\n    The configuration of Differential Drive Robot in axes OXY.\n",{"type":18,"tag":27,"props":4314,"children":4315},{},[4316],{"type":24,"value":4317},"The forward kinematic equation",{"type":18,"tag":119,"props":4319,"children":4321},{"latex-express":4320,"styles":59},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{\\theta} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":4323,"children":4324},{},[4325],{"type":24,"value":4326},"So, if we discretize the forward kinematic with a certain sampling time, we will get",{"type":18,"tag":119,"props":4328,"children":4330},{"latex-express":4329,"styles":59},"\n\\begin{bmatrix} x_{t+1} \\\\ y_{t+1} \\\\ \\theta_{t+1} \\end{bmatrix} = \\begin{bmatrix} x_{t} \\\\ y_{t} \\\\ \\theta_{t} \\end{bmatrix} +\\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix} \\times \\Delta t\n ",[],{"type":18,"tag":27,"props":4332,"children":4333},{},[4334],{"type":24,"value":4335},"In Python,",{"type":18,"tag":304,"props":4337,"children":4340},{"className":4338,"code":4339,"language":309,"meta":8},[307],"class DifferentialDrive:\n    def __init__(self):\n        self.r = 0.05\n        self.L = 0.25\n    def forward_kinematic(self, v, omega, yaw):\n        vx = v*np.cos(yaw)\n        vy = v*np.sin(yaw)\n        vyaw = omega\n\n        return vx, vy, vyaw\n    def discrete_state(self, x, y, yaw, v, omega, dt):\n        dx, dy, dyaw = self.forward_kinematic(v, omega, yaw)\n        x_next = x + dx * dt\n        y_next = y + dy * dt\n        yaw_next = yaw + dyaw * dt\n\n        return x_next, y_next, yaw_next\n",[4341],{"type":18,"tag":312,"props":4342,"children":4343},{},[4344],{"type":18,"tag":304,"props":4345,"children":4346},{"__ignoreMap":8},[4347,4370,4396,4427,4456,4481,4507,4532,4549,4556,4573,4598,4623,4658,4692,4726,4733],{"type":18,"tag":319,"props":4348,"children":4349},{"class":321,"line":322},[4350,4355,4359,4365],{"type":18,"tag":319,"props":4351,"children":4352},{"class":326},[4353],{"type":24,"value":4354},"class",{"type":18,"tag":319,"props":4356,"children":4357},{"class":332},[4358],{"type":24,"value":383},{"type":18,"tag":319,"props":4360,"children":4362},{"class":4361},"ct-806137",[4363],{"type":24,"value":4364},"DifferentialDrive",{"type":18,"tag":319,"props":4366,"children":4367},{"class":332},[4368],{"type":24,"value":4369},":\n",{"type":18,"tag":319,"props":4371,"children":4372},{"class":321,"line":348},[4373,4377,4382,4386,4391],{"type":18,"tag":319,"props":4374,"children":4375},{"class":332},[4376],{"type":24,"value":1159},{"type":18,"tag":319,"props":4378,"children":4379},{"class":326},[4380],{"type":24,"value":4381},"def",{"type":18,"tag":319,"props":4383,"children":4384},{"class":332},[4385],{"type":24,"value":383},{"type":18,"tag":319,"props":4387,"children":4388},{"class":386},[4389],{"type":24,"value":4390},"__init__",{"type":18,"tag":319,"props":4392,"children":4393},{"class":332},[4394],{"type":24,"value":4395},"(self):\n",{"type":18,"tag":319,"props":4397,"children":4398},{"class":321,"line":357},[4399,4404,4409,4414,4418,4422],{"type":18,"tag":319,"props":4400,"children":4401},{"class":332},[4402],{"type":24,"value":4403},"        ",{"type":18,"tag":319,"props":4405,"children":4406},{"class":386},[4407],{"type":24,"value":4408},"self",{"type":18,"tag":319,"props":4410,"children":4411},{"class":332},[4412],{"type":24,"value":4413},".r ",{"type":18,"tag":319,"props":4415,"children":4416},{"class":326},[4417],{"type":24,"value":378},{"type":18,"tag":319,"props":4419,"children":4420},{"class":332},[4421],{"type":24,"value":383},{"type":18,"tag":319,"props":4423,"children":4424},{"class":386},[4425],{"type":24,"value":4426},"0.05\n",{"type":18,"tag":319,"props":4428,"children":4429},{"class":321,"line":367},[4430,4434,4438,4443,4447,4451],{"type":18,"tag":319,"props":4431,"children":4432},{"class":332},[4433],{"type":24,"value":4403},{"type":18,"tag":319,"props":4435,"children":4436},{"class":386},[4437],{"type":24,"value":4408},{"type":18,"tag":319,"props":4439,"children":4440},{"class":332},[4441],{"type":24,"value":4442},".L ",{"type":18,"tag":319,"props":4444,"children":4445},{"class":326},[4446],{"type":24,"value":378},{"type":18,"tag":319,"props":4448,"children":4449},{"class":332},[4450],{"type":24,"value":383},{"type":18,"tag":319,"props":4452,"children":4453},{"class":386},[4454],{"type":24,"value":4455},"0.25\n",{"type":18,"tag":319,"props":4457,"children":4458},{"class":321,"line":392},[4459,4463,4467,4471,4476],{"type":18,"tag":319,"props":4460,"children":4461},{"class":332},[4462],{"type":24,"value":1159},{"type":18,"tag":319,"props":4464,"children":4465},{"class":326},[4466],{"type":24,"value":4381},{"type":18,"tag":319,"props":4468,"children":4469},{"class":332},[4470],{"type":24,"value":383},{"type":18,"tag":319,"props":4472,"children":4473},{"class":4361},[4474],{"type":24,"value":4475},"forward_kinematic",{"type":18,"tag":319,"props":4477,"children":4478},{"class":332},[4479],{"type":24,"value":4480},"(self, v, omega, yaw):\n",{"type":18,"tag":319,"props":4482,"children":4483},{"class":321,"line":401},[4484,4489,4493,4498,4502],{"type":18,"tag":319,"props":4485,"children":4486},{"class":332},[4487],{"type":24,"value":4488},"        vx ",{"type":18,"tag":319,"props":4490,"children":4491},{"class":326},[4492],{"type":24,"value":378},{"type":18,"tag":319,"props":4494,"children":4495},{"class":332},[4496],{"type":24,"value":4497}," v",{"type":18,"tag":319,"props":4499,"children":4500},{"class":326},[4501],{"type":24,"value":633},{"type":18,"tag":319,"props":4503,"children":4504},{"class":332},[4505],{"type":24,"value":4506},"np.cos(yaw)\n",{"type":18,"tag":319,"props":4508,"children":4509},{"class":321,"line":423},[4510,4515,4519,4523,4527],{"type":18,"tag":319,"props":4511,"children":4512},{"class":332},[4513],{"type":24,"value":4514},"        vy ",{"type":18,"tag":319,"props":4516,"children":4517},{"class":326},[4518],{"type":24,"value":378},{"type":18,"tag":319,"props":4520,"children":4521},{"class":332},[4522],{"type":24,"value":4497},{"type":18,"tag":319,"props":4524,"children":4525},{"class":326},[4526],{"type":24,"value":633},{"type":18,"tag":319,"props":4528,"children":4529},{"class":332},[4530],{"type":24,"value":4531},"np.sin(yaw)\n",{"type":18,"tag":319,"props":4533,"children":4534},{"class":321,"line":432},[4535,4540,4544],{"type":18,"tag":319,"props":4536,"children":4537},{"class":332},[4538],{"type":24,"value":4539},"        vyaw ",{"type":18,"tag":319,"props":4541,"children":4542},{"class":326},[4543],{"type":24,"value":378},{"type":18,"tag":319,"props":4545,"children":4546},{"class":332},[4547],{"type":24,"value":4548}," omega\n",{"type":18,"tag":319,"props":4550,"children":4551},{"class":321,"line":454},[4552],{"type":18,"tag":319,"props":4553,"children":4554},{},[4555],{"type":24,"value":354},{"type":18,"tag":319,"props":4557,"children":4558},{"class":321,"line":475},[4559,4563,4568],{"type":18,"tag":319,"props":4560,"children":4561},{"class":332},[4562],{"type":24,"value":4403},{"type":18,"tag":319,"props":4564,"children":4565},{"class":326},[4566],{"type":24,"value":4567},"return",{"type":18,"tag":319,"props":4569,"children":4570},{"class":332},[4571],{"type":24,"value":4572}," vx, vy, vyaw\n",{"type":18,"tag":319,"props":4574,"children":4575},{"class":321,"line":496},[4576,4580,4584,4588,4593],{"type":18,"tag":319,"props":4577,"children":4578},{"class":332},[4579],{"type":24,"value":1159},{"type":18,"tag":319,"props":4581,"children":4582},{"class":326},[4583],{"type":24,"value":4381},{"type":18,"tag":319,"props":4585,"children":4586},{"class":332},[4587],{"type":24,"value":383},{"type":18,"tag":319,"props":4589,"children":4590},{"class":4361},[4591],{"type":24,"value":4592},"discrete_state",{"type":18,"tag":319,"props":4594,"children":4595},{"class":332},[4596],{"type":24,"value":4597},"(self, x, y, yaw, v, omega, dt):\n",{"type":18,"tag":319,"props":4599,"children":4600},{"class":321,"line":505},[4601,4606,4610,4614,4618],{"type":18,"tag":319,"props":4602,"children":4603},{"class":332},[4604],{"type":24,"value":4605},"        dx, dy, dyaw ",{"type":18,"tag":319,"props":4607,"children":4608},{"class":326},[4609],{"type":24,"value":378},{"type":18,"tag":319,"props":4611,"children":4612},{"class":332},[4613],{"type":24,"value":383},{"type":18,"tag":319,"props":4615,"children":4616},{"class":386},[4617],{"type":24,"value":4408},{"type":18,"tag":319,"props":4619,"children":4620},{"class":332},[4621],{"type":24,"value":4622},".forward_kinematic(v, omega, yaw)\n",{"type":18,"tag":319,"props":4624,"children":4625},{"class":321,"line":536},[4626,4631,4635,4640,4644,4649,4653],{"type":18,"tag":319,"props":4627,"children":4628},{"class":332},[4629],{"type":24,"value":4630},"        x_next ",{"type":18,"tag":319,"props":4632,"children":4633},{"class":326},[4634],{"type":24,"value":378},{"type":18,"tag":319,"props":4636,"children":4637},{"class":332},[4638],{"type":24,"value":4639}," x ",{"type":18,"tag":319,"props":4641,"children":4642},{"class":326},[4643],{"type":24,"value":790},{"type":18,"tag":319,"props":4645,"children":4646},{"class":332},[4647],{"type":24,"value":4648}," dx ",{"type":18,"tag":319,"props":4650,"children":4651},{"class":326},[4652],{"type":24,"value":633},{"type":18,"tag":319,"props":4654,"children":4655},{"class":332},[4656],{"type":24,"value":4657}," dt\n",{"type":18,"tag":319,"props":4659,"children":4660},{"class":321,"line":567},[4661,4666,4670,4675,4679,4684,4688],{"type":18,"tag":319,"props":4662,"children":4663},{"class":332},[4664],{"type":24,"value":4665},"        y_next ",{"type":18,"tag":319,"props":4667,"children":4668},{"class":326},[4669],{"type":24,"value":378},{"type":18,"tag":319,"props":4671,"children":4672},{"class":332},[4673],{"type":24,"value":4674}," y ",{"type":18,"tag":319,"props":4676,"children":4677},{"class":326},[4678],{"type":24,"value":790},{"type":18,"tag":319,"props":4680,"children":4681},{"class":332},[4682],{"type":24,"value":4683}," dy ",{"type":18,"tag":319,"props":4685,"children":4686},{"class":326},[4687],{"type":24,"value":633},{"type":18,"tag":319,"props":4689,"children":4690},{"class":332},[4691],{"type":24,"value":4657},{"type":18,"tag":319,"props":4693,"children":4694},{"class":321,"line":576},[4695,4700,4704,4709,4713,4718,4722],{"type":18,"tag":319,"props":4696,"children":4697},{"class":332},[4698],{"type":24,"value":4699},"        yaw_next ",{"type":18,"tag":319,"props":4701,"children":4702},{"class":326},[4703],{"type":24,"value":378},{"type":18,"tag":319,"props":4705,"children":4706},{"class":332},[4707],{"type":24,"value":4708}," yaw ",{"type":18,"tag":319,"props":4710,"children":4711},{"class":326},[4712],{"type":24,"value":790},{"type":18,"tag":319,"props":4714,"children":4715},{"class":332},[4716],{"type":24,"value":4717}," dyaw ",{"type":18,"tag":319,"props":4719,"children":4720},{"class":326},[4721],{"type":24,"value":633},{"type":18,"tag":319,"props":4723,"children":4724},{"class":332},[4725],{"type":24,"value":4657},{"type":18,"tag":319,"props":4727,"children":4728},{"class":321,"line":585},[4729],{"type":18,"tag":319,"props":4730,"children":4731},{},[4732],{"type":24,"value":354},{"type":18,"tag":319,"props":4734,"children":4735},{"class":321,"line":612},[4736,4740,4744],{"type":18,"tag":319,"props":4737,"children":4738},{"class":332},[4739],{"type":24,"value":4403},{"type":18,"tag":319,"props":4741,"children":4742},{"class":326},[4743],{"type":24,"value":4567},{"type":18,"tag":319,"props":4745,"children":4746},{"class":332},[4747],{"type":24,"value":4748}," x_next, y_next, yaw_next",{"type":18,"tag":27,"props":4750,"children":4751},{},[4752,4754,4758,4760,4765],{"type":24,"value":4753},"The ",{"type":18,"tag":227,"props":4755,"children":4756},{},[4757],{"type":24,"value":231},{"type":24,"value":4759}," class that we defined, has all the need attribute to use for PID control !!. We just need to write another class for our ",{"type":18,"tag":227,"props":4761,"children":4762},{},[4763],{"type":24,"value":4764}," PID Controller ",{"type":24,"value":4144},{"type":18,"tag":304,"props":4767,"children":4770},{"className":4768,"code":4769,"language":309,"meta":8},[307],"class PIDController:\n    def __init__(self, kp, ki, kd, dt):\n\n        self.kp = kp\n        self.ki = ki\n        self.kd = kd\n        self.dt = dt\n        self.integral = 0\n\n    def calculate_pid(self, errors):\n        # Calculate proportional error\n        proportional = self.kp * errors[-1]\n        # Calculate integration error\n        integral = self.integral + self.ki * (errors[-1]) * self.dt\n        self.integral = integral\n        # Calculate derivative error\n        derivative = self.kd * (errors[-1] - errors[-2])/self.dt\n\n        output = proportional + integral + derivative\n\n        return output\n",[4771],{"type":18,"tag":312,"props":4772,"children":4773},{},[4774],{"type":18,"tag":304,"props":4775,"children":4776},{"__ignoreMap":8},[4777,4797,4821,4828,4853,4878,4903,4927,4955,4962,4987,4999,5045,5057,5135,5159,5171,5248,5255,5290,5297],{"type":18,"tag":319,"props":4778,"children":4779},{"class":321,"line":322},[4780,4784,4788,4793],{"type":18,"tag":319,"props":4781,"children":4782},{"class":326},[4783],{"type":24,"value":4354},{"type":18,"tag":319,"props":4785,"children":4786},{"class":332},[4787],{"type":24,"value":383},{"type":18,"tag":319,"props":4789,"children":4790},{"class":4361},[4791],{"type":24,"value":4792},"PIDController",{"type":18,"tag":319,"props":4794,"children":4795},{"class":332},[4796],{"type":24,"value":4369},{"type":18,"tag":319,"props":4798,"children":4799},{"class":321,"line":348},[4800,4804,4808,4812,4816],{"type":18,"tag":319,"props":4801,"children":4802},{"class":332},[4803],{"type":24,"value":1159},{"type":18,"tag":319,"props":4805,"children":4806},{"class":326},[4807],{"type":24,"value":4381},{"type":18,"tag":319,"props":4809,"children":4810},{"class":332},[4811],{"type":24,"value":383},{"type":18,"tag":319,"props":4813,"children":4814},{"class":386},[4815],{"type":24,"value":4390},{"type":18,"tag":319,"props":4817,"children":4818},{"class":332},[4819],{"type":24,"value":4820},"(self, kp, ki, kd, dt):\n",{"type":18,"tag":319,"props":4822,"children":4823},{"class":321,"line":357},[4824],{"type":18,"tag":319,"props":4825,"children":4826},{},[4827],{"type":24,"value":354},{"type":18,"tag":319,"props":4829,"children":4830},{"class":321,"line":367},[4831,4835,4839,4844,4848],{"type":18,"tag":319,"props":4832,"children":4833},{"class":332},[4834],{"type":24,"value":4403},{"type":18,"tag":319,"props":4836,"children":4837},{"class":386},[4838],{"type":24,"value":4408},{"type":18,"tag":319,"props":4840,"children":4841},{"class":332},[4842],{"type":24,"value":4843},".kp ",{"type":18,"tag":319,"props":4845,"children":4846},{"class":326},[4847],{"type":24,"value":378},{"type":18,"tag":319,"props":4849,"children":4850},{"class":332},[4851],{"type":24,"value":4852}," kp\n",{"type":18,"tag":319,"props":4854,"children":4855},{"class":321,"line":392},[4856,4860,4864,4869,4873],{"type":18,"tag":319,"props":4857,"children":4858},{"class":332},[4859],{"type":24,"value":4403},{"type":18,"tag":319,"props":4861,"children":4862},{"class":386},[4863],{"type":24,"value":4408},{"type":18,"tag":319,"props":4865,"children":4866},{"class":332},[4867],{"type":24,"value":4868},".ki ",{"type":18,"tag":319,"props":4870,"children":4871},{"class":326},[4872],{"type":24,"value":378},{"type":18,"tag":319,"props":4874,"children":4875},{"class":332},[4876],{"type":24,"value":4877}," ki\n",{"type":18,"tag":319,"props":4879,"children":4880},{"class":321,"line":401},[4881,4885,4889,4894,4898],{"type":18,"tag":319,"props":4882,"children":4883},{"class":332},[4884],{"type":24,"value":4403},{"type":18,"tag":319,"props":4886,"children":4887},{"class":386},[4888],{"type":24,"value":4408},{"type":18,"tag":319,"props":4890,"children":4891},{"class":332},[4892],{"type":24,"value":4893},".kd ",{"type":18,"tag":319,"props":4895,"children":4896},{"class":326},[4897],{"type":24,"value":378},{"type":18,"tag":319,"props":4899,"children":4900},{"class":332},[4901],{"type":24,"value":4902}," kd\n",{"type":18,"tag":319,"props":4904,"children":4905},{"class":321,"line":423},[4906,4910,4914,4919,4923],{"type":18,"tag":319,"props":4907,"children":4908},{"class":332},[4909],{"type":24,"value":4403},{"type":18,"tag":319,"props":4911,"children":4912},{"class":386},[4913],{"type":24,"value":4408},{"type":18,"tag":319,"props":4915,"children":4916},{"class":332},[4917],{"type":24,"value":4918},".dt ",{"type":18,"tag":319,"props":4920,"children":4921},{"class":326},[4922],{"type":24,"value":378},{"type":18,"tag":319,"props":4924,"children":4925},{"class":332},[4926],{"type":24,"value":4657},{"type":18,"tag":319,"props":4928,"children":4929},{"class":321,"line":432},[4930,4934,4938,4943,4947,4951],{"type":18,"tag":319,"props":4931,"children":4932},{"class":332},[4933],{"type":24,"value":4403},{"type":18,"tag":319,"props":4935,"children":4936},{"class":386},[4937],{"type":24,"value":4408},{"type":18,"tag":319,"props":4939,"children":4940},{"class":332},[4941],{"type":24,"value":4942},".integral ",{"type":18,"tag":319,"props":4944,"children":4945},{"class":326},[4946],{"type":24,"value":378},{"type":18,"tag":319,"props":4948,"children":4949},{"class":332},[4950],{"type":24,"value":383},{"type":18,"tag":319,"props":4952,"children":4953},{"class":386},[4954],{"type":24,"value":2658},{"type":18,"tag":319,"props":4956,"children":4957},{"class":321,"line":454},[4958],{"type":18,"tag":319,"props":4959,"children":4960},{},[4961],{"type":24,"value":354},{"type":18,"tag":319,"props":4963,"children":4964},{"class":321,"line":475},[4965,4969,4973,4977,4982],{"type":18,"tag":319,"props":4966,"children":4967},{"class":332},[4968],{"type":24,"value":1159},{"type":18,"tag":319,"props":4970,"children":4971},{"class":326},[4972],{"type":24,"value":4381},{"type":18,"tag":319,"props":4974,"children":4975},{"class":332},[4976],{"type":24,"value":383},{"type":18,"tag":319,"props":4978,"children":4979},{"class":4361},[4980],{"type":24,"value":4981},"calculate_pid",{"type":18,"tag":319,"props":4983,"children":4984},{"class":332},[4985],{"type":24,"value":4986},"(self, errors):\n",{"type":18,"tag":319,"props":4988,"children":4989},{"class":321,"line":496},[4990,4994],{"type":18,"tag":319,"props":4991,"children":4992},{"class":332},[4993],{"type":24,"value":4403},{"type":18,"tag":319,"props":4995,"children":4996},{"class":361},[4997],{"type":24,"value":4998},"# Calculate proportional error\n",{"type":18,"tag":319,"props":5000,"children":5001},{"class":321,"line":505},[5002,5007,5011,5015,5019,5023,5027,5032,5036,5040],{"type":18,"tag":319,"props":5003,"children":5004},{"class":332},[5005],{"type":24,"value":5006},"        proportional ",{"type":18,"tag":319,"props":5008,"children":5009},{"class":326},[5010],{"type":24,"value":378},{"type":18,"tag":319,"props":5012,"children":5013},{"class":332},[5014],{"type":24,"value":383},{"type":18,"tag":319,"props":5016,"children":5017},{"class":386},[5018],{"type":24,"value":4408},{"type":18,"tag":319,"props":5020,"children":5021},{"class":332},[5022],{"type":24,"value":4843},{"type":18,"tag":319,"props":5024,"children":5025},{"class":326},[5026],{"type":24,"value":633},{"type":18,"tag":319,"props":5028,"children":5029},{"class":332},[5030],{"type":24,"value":5031}," errors[",{"type":18,"tag":319,"props":5033,"children":5034},{"class":326},[5035],{"type":24,"value":2033},{"type":18,"tag":319,"props":5037,"children":5038},{"class":386},[5039],{"type":24,"value":694},{"type":18,"tag":319,"props":5041,"children":5042},{"class":332},[5043],{"type":24,"value":5044},"]\n",{"type":18,"tag":319,"props":5046,"children":5047},{"class":321,"line":536},[5048,5052],{"type":18,"tag":319,"props":5049,"children":5050},{"class":332},[5051],{"type":24,"value":4403},{"type":18,"tag":319,"props":5053,"children":5054},{"class":361},[5055],{"type":24,"value":5056},"# Calculate integration error\n",{"type":18,"tag":319,"props":5058,"children":5059},{"class":321,"line":567},[5060,5065,5069,5073,5077,5081,5085,5089,5093,5097,5101,5106,5110,5114,5118,5122,5126,5130],{"type":18,"tag":319,"props":5061,"children":5062},{"class":332},[5063],{"type":24,"value":5064},"        integral ",{"type":18,"tag":319,"props":5066,"children":5067},{"class":326},[5068],{"type":24,"value":378},{"type":18,"tag":319,"props":5070,"children":5071},{"class":332},[5072],{"type":24,"value":383},{"type":18,"tag":319,"props":5074,"children":5075},{"class":386},[5076],{"type":24,"value":4408},{"type":18,"tag":319,"props":5078,"children":5079},{"class":332},[5080],{"type":24,"value":4942},{"type":18,"tag":319,"props":5082,"children":5083},{"class":326},[5084],{"type":24,"value":790},{"type":18,"tag":319,"props":5086,"children":5087},{"class":332},[5088],{"type":24,"value":383},{"type":18,"tag":319,"props":5090,"children":5091},{"class":386},[5092],{"type":24,"value":4408},{"type":18,"tag":319,"props":5094,"children":5095},{"class":332},[5096],{"type":24,"value":4868},{"type":18,"tag":319,"props":5098,"children":5099},{"class":326},[5100],{"type":24,"value":633},{"type":18,"tag":319,"props":5102,"children":5103},{"class":332},[5104],{"type":24,"value":5105}," (errors[",{"type":18,"tag":319,"props":5107,"children":5108},{"class":326},[5109],{"type":24,"value":2033},{"type":18,"tag":319,"props":5111,"children":5112},{"class":386},[5113],{"type":24,"value":694},{"type":18,"tag":319,"props":5115,"children":5116},{"class":332},[5117],{"type":24,"value":1274},{"type":18,"tag":319,"props":5119,"children":5120},{"class":326},[5121],{"type":24,"value":633},{"type":18,"tag":319,"props":5123,"children":5124},{"class":332},[5125],{"type":24,"value":383},{"type":18,"tag":319,"props":5127,"children":5128},{"class":386},[5129],{"type":24,"value":4408},{"type":18,"tag":319,"props":5131,"children":5132},{"class":332},[5133],{"type":24,"value":5134},".dt\n",{"type":18,"tag":319,"props":5136,"children":5137},{"class":321,"line":576},[5138,5142,5146,5150,5154],{"type":18,"tag":319,"props":5139,"children":5140},{"class":332},[5141],{"type":24,"value":4403},{"type":18,"tag":319,"props":5143,"children":5144},{"class":386},[5145],{"type":24,"value":4408},{"type":18,"tag":319,"props":5147,"children":5148},{"class":332},[5149],{"type":24,"value":4942},{"type":18,"tag":319,"props":5151,"children":5152},{"class":326},[5153],{"type":24,"value":378},{"type":18,"tag":319,"props":5155,"children":5156},{"class":332},[5157],{"type":24,"value":5158}," integral\n",{"type":18,"tag":319,"props":5160,"children":5161},{"class":321,"line":585},[5162,5166],{"type":18,"tag":319,"props":5163,"children":5164},{"class":332},[5165],{"type":24,"value":4403},{"type":18,"tag":319,"props":5167,"children":5168},{"class":361},[5169],{"type":24,"value":5170},"# Calculate derivative error\n",{"type":18,"tag":319,"props":5172,"children":5173},{"class":321,"line":612},[5174,5179,5183,5187,5191,5195,5199,5203,5207,5211,5215,5219,5223,5227,5231,5236,5240,5244],{"type":18,"tag":319,"props":5175,"children":5176},{"class":332},[5177],{"type":24,"value":5178},"        derivative ",{"type":18,"tag":319,"props":5180,"children":5181},{"class":326},[5182],{"type":24,"value":378},{"type":18,"tag":319,"props":5184,"children":5185},{"class":332},[5186],{"type":24,"value":383},{"type":18,"tag":319,"props":5188,"children":5189},{"class":386},[5190],{"type":24,"value":4408},{"type":18,"tag":319,"props":5192,"children":5193},{"class":332},[5194],{"type":24,"value":4893},{"type":18,"tag":319,"props":5196,"children":5197},{"class":326},[5198],{"type":24,"value":633},{"type":18,"tag":319,"props":5200,"children":5201},{"class":332},[5202],{"type":24,"value":5105},{"type":18,"tag":319,"props":5204,"children":5205},{"class":326},[5206],{"type":24,"value":2033},{"type":18,"tag":319,"props":5208,"children":5209},{"class":386},[5210],{"type":24,"value":694},{"type":18,"tag":319,"props":5212,"children":5213},{"class":332},[5214],{"type":24,"value":1192},{"type":18,"tag":319,"props":5216,"children":5217},{"class":326},[5218],{"type":24,"value":2033},{"type":18,"tag":319,"props":5220,"children":5221},{"class":332},[5222],{"type":24,"value":5031},{"type":18,"tag":319,"props":5224,"children":5225},{"class":326},[5226],{"type":24,"value":2033},{"type":18,"tag":319,"props":5228,"children":5229},{"class":386},[5230],{"type":24,"value":643},{"type":18,"tag":319,"props":5232,"children":5233},{"class":332},[5234],{"type":24,"value":5235},"])",{"type":18,"tag":319,"props":5237,"children":5238},{"class":326},[5239],{"type":24,"value":800},{"type":18,"tag":319,"props":5241,"children":5242},{"class":386},[5243],{"type":24,"value":4408},{"type":18,"tag":319,"props":5245,"children":5246},{"class":332},[5247],{"type":24,"value":5134},{"type":18,"tag":319,"props":5249,"children":5250},{"class":321,"line":651},[5251],{"type":18,"tag":319,"props":5252,"children":5253},{},[5254],{"type":24,"value":354},{"type":18,"tag":319,"props":5256,"children":5257},{"class":321,"line":684},[5258,5263,5267,5272,5276,5281,5285],{"type":18,"tag":319,"props":5259,"children":5260},{"class":332},[5261],{"type":24,"value":5262},"        output ",{"type":18,"tag":319,"props":5264,"children":5265},{"class":326},[5266],{"type":24,"value":378},{"type":18,"tag":319,"props":5268,"children":5269},{"class":332},[5270],{"type":24,"value":5271}," proportional ",{"type":18,"tag":319,"props":5273,"children":5274},{"class":326},[5275],{"type":24,"value":790},{"type":18,"tag":319,"props":5277,"children":5278},{"class":332},[5279],{"type":24,"value":5280}," integral ",{"type":18,"tag":319,"props":5282,"children":5283},{"class":326},[5284],{"type":24,"value":790},{"type":18,"tag":319,"props":5286,"children":5287},{"class":332},[5288],{"type":24,"value":5289}," derivative\n",{"type":18,"tag":319,"props":5291,"children":5292},{"class":321,"line":702},[5293],{"type":18,"tag":319,"props":5294,"children":5295},{},[5296],{"type":24,"value":354},{"type":18,"tag":319,"props":5298,"children":5299},{"class":321,"line":711},[5300,5304,5308],{"type":18,"tag":319,"props":5301,"children":5302},{"class":332},[5303],{"type":24,"value":4403},{"type":18,"tag":319,"props":5305,"children":5306},{"class":326},[5307],{"type":24,"value":4567},{"type":18,"tag":319,"props":5309,"children":5310},{"class":332},[5311],{"type":24,"value":5312}," output",{"type":18,"tag":27,"props":5314,"children":5315},{},[5316],{"type":24,"value":5317},"Don't worry, this class just defined as the PID formula. So, by doing this, we will be able to use all the characteristic of our PID controller.",{"type":18,"tag":19,"props":5319,"children":5321},{"id":5320},"experiment",[5322],{"type":24,"value":5323},"Experiment",{"type":18,"tag":5325,"props":5326,"children":5328},"h3",{"id":5327},"pid-for-point-control",[5329],{"type":24,"value":5330},"PID for point control",{"type":18,"tag":27,"props":5332,"children":5333},{},[5334,5336,5340,5342,5347],{"type":24,"value":5335},"If I want my DifferentialDrive robot go to point ",{"type":18,"tag":119,"props":5337,"children":5339},{"latex-express":5338,"styles":122},"x_{ref}, y_{ref}, \\theta_{ref}",[],{"type":24,"value":5341},", Then I can calculate the error between the reference point and the feedback position of the robot. I simulated my robot in the  ",{"type":18,"tag":1642,"props":5343,"children":5344},{},[5345],{"type":24,"value":5346},"for loop",{"type":24,"value":5348}," and calculate this error recursively.",{"type":18,"tag":304,"props":5350,"children":5353},{"className":5351,"code":5352,"language":309,"meta":8},[307],"error_x.append(ref_path[0]-current_x)\nerror_y.append(ref_path[1]-current_y)\nerror_yaw.append(ref_path[2]-current_yaw)\n",[5354],{"type":18,"tag":312,"props":5355,"children":5356},{},[5357],{"type":18,"tag":304,"props":5358,"children":5359},{"__ignoreMap":8},[5360,5385,5410],{"type":18,"tag":319,"props":5361,"children":5362},{"class":321,"line":322},[5363,5368,5372,5376,5380],{"type":18,"tag":319,"props":5364,"children":5365},{"class":332},[5366],{"type":24,"value":5367},"error_x.append(ref_path[",{"type":18,"tag":319,"props":5369,"children":5370},{"class":386},[5371],{"type":24,"value":623},{"type":18,"tag":319,"props":5373,"children":5374},{"class":332},[5375],{"type":24,"value":628},{"type":18,"tag":319,"props":5377,"children":5378},{"class":326},[5379],{"type":24,"value":2033},{"type":18,"tag":319,"props":5381,"children":5382},{"class":332},[5383],{"type":24,"value":5384},"current_x)\n",{"type":18,"tag":319,"props":5386,"children":5387},{"class":321,"line":348},[5388,5393,5397,5401,5405],{"type":18,"tag":319,"props":5389,"children":5390},{"class":332},[5391],{"type":24,"value":5392},"error_y.append(ref_path[",{"type":18,"tag":319,"props":5394,"children":5395},{"class":386},[5396],{"type":24,"value":694},{"type":18,"tag":319,"props":5398,"children":5399},{"class":332},[5400],{"type":24,"value":628},{"type":18,"tag":319,"props":5402,"children":5403},{"class":326},[5404],{"type":24,"value":2033},{"type":18,"tag":319,"props":5406,"children":5407},{"class":332},[5408],{"type":24,"value":5409},"current_y)\n",{"type":18,"tag":319,"props":5411,"children":5412},{"class":321,"line":357},[5413,5418,5422,5426,5430],{"type":18,"tag":319,"props":5414,"children":5415},{"class":332},[5416],{"type":24,"value":5417},"error_yaw.append(ref_path[",{"type":18,"tag":319,"props":5419,"children":5420},{"class":386},[5421],{"type":24,"value":643},{"type":18,"tag":319,"props":5423,"children":5424},{"class":332},[5425],{"type":24,"value":628},{"type":18,"tag":319,"props":5427,"children":5428},{"class":326},[5429],{"type":24,"value":2033},{"type":18,"tag":319,"props":5431,"children":5432},{"class":332},[5433],{"type":24,"value":5434},"current_yaw)",{"type":18,"tag":27,"props":5436,"children":5437},{},[5438],{"type":24,"value":5439},"Then, let's apply PID",{"type":18,"tag":304,"props":5441,"children":5444},{"className":5442,"code":5443,"language":309,"meta":8},[307],"output_vx = pid_controller_x.calculate_pid(error_x)\noutput_vy = pid_controller_y.calculate_pid(error_y)\noutput_omega = pid_controller_yaw.calculate_pid(error_yaw)\n",[5445],{"type":18,"tag":312,"props":5446,"children":5447},{},[5448],{"type":18,"tag":304,"props":5449,"children":5450},{"__ignoreMap":8},[5451,5468,5485],{"type":18,"tag":319,"props":5452,"children":5453},{"class":321,"line":322},[5454,5459,5463],{"type":18,"tag":319,"props":5455,"children":5456},{"class":332},[5457],{"type":24,"value":5458},"output_vx ",{"type":18,"tag":319,"props":5460,"children":5461},{"class":326},[5462],{"type":24,"value":378},{"type":18,"tag":319,"props":5464,"children":5465},{"class":332},[5466],{"type":24,"value":5467}," pid_controller_x.calculate_pid(error_x)\n",{"type":18,"tag":319,"props":5469,"children":5470},{"class":321,"line":348},[5471,5476,5480],{"type":18,"tag":319,"props":5472,"children":5473},{"class":332},[5474],{"type":24,"value":5475},"output_vy ",{"type":18,"tag":319,"props":5477,"children":5478},{"class":326},[5479],{"type":24,"value":378},{"type":18,"tag":319,"props":5481,"children":5482},{"class":332},[5483],{"type":24,"value":5484}," pid_controller_y.calculate_pid(error_y)\n",{"type":18,"tag":319,"props":5486,"children":5487},{"class":321,"line":357},[5488,5493,5497],{"type":18,"tag":319,"props":5489,"children":5490},{"class":332},[5491],{"type":24,"value":5492},"output_omega ",{"type":18,"tag":319,"props":5494,"children":5495},{"class":326},[5496],{"type":24,"value":378},{"type":18,"tag":319,"props":5498,"children":5499},{"class":332},[5500],{"type":24,"value":5501}," pid_controller_yaw.calculate_pid(error_yaw)",{"type":18,"tag":27,"props":5503,"children":5504},{},[5505],{"type":24,"value":5506},"We will also need to update current position of the robot with the given optimal value from the PID controller.",{"type":18,"tag":304,"props":5508,"children":5511},{"className":5509,"code":5510,"language":309,"meta":8},[307],"x_next, y_next, yaw_next = diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) # Skip for omega we only look for x, y\ncurrent_x = x_next\ncurrent_y = y_next\ncurrent_yaw = yaw_next\n",[5512],{"type":18,"tag":312,"props":5513,"children":5514},{},[5515],{"type":18,"tag":304,"props":5516,"children":5517},{"__ignoreMap":8},[5518,5540,5557,5574],{"type":18,"tag":319,"props":5519,"children":5520},{"class":321,"line":322},[5521,5526,5530,5535],{"type":18,"tag":319,"props":5522,"children":5523},{"class":332},[5524],{"type":24,"value":5525},"x_next, y_next, yaw_next ",{"type":18,"tag":319,"props":5527,"children":5528},{"class":326},[5529],{"type":24,"value":378},{"type":18,"tag":319,"props":5531,"children":5532},{"class":332},[5533],{"type":24,"value":5534}," diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) ",{"type":18,"tag":319,"props":5536,"children":5537},{"class":361},[5538],{"type":24,"value":5539},"# Skip for omega we only look for x, y\n",{"type":18,"tag":319,"props":5541,"children":5542},{"class":321,"line":348},[5543,5548,5552],{"type":18,"tag":319,"props":5544,"children":5545},{"class":332},[5546],{"type":24,"value":5547},"current_x ",{"type":18,"tag":319,"props":5549,"children":5550},{"class":326},[5551],{"type":24,"value":378},{"type":18,"tag":319,"props":5553,"children":5554},{"class":332},[5555],{"type":24,"value":5556}," x_next\n",{"type":18,"tag":319,"props":5558,"children":5559},{"class":321,"line":357},[5560,5565,5569],{"type":18,"tag":319,"props":5561,"children":5562},{"class":332},[5563],{"type":24,"value":5564},"current_y ",{"type":18,"tag":319,"props":5566,"children":5567},{"class":326},[5568],{"type":24,"value":378},{"type":18,"tag":319,"props":5570,"children":5571},{"class":332},[5572],{"type":24,"value":5573}," y_next\n",{"type":18,"tag":319,"props":5575,"children":5576},{"class":321,"line":367},[5577,5582,5586],{"type":18,"tag":319,"props":5578,"children":5579},{"class":332},[5580],{"type":24,"value":5581},"current_yaw ",{"type":18,"tag":319,"props":5583,"children":5584},{"class":326},[5585],{"type":24,"value":378},{"type":18,"tag":319,"props":5587,"children":5588},{"class":332},[5589],{"type":24,"value":5590}," yaw_next",{"type":18,"tag":27,"props":5592,"children":5593},{},[5594,5596,5601],{"type":24,"value":5595},"I use ",{"type":18,"tag":1642,"props":5597,"children":5598},{},[5599],{"type":24,"value":5600},"matplotlib",{"type":24,"value":5602}," library to simulate my robot.",{"type":18,"tag":304,"props":5604,"children":5607},{"className":5605,"code":5606,"language":309,"meta":8},[307],"plt.clf()\nplt.gcf().canvas.mpl_connect('key_release_event',\n            lambda event: [exit(0) if event.key == 'escape' else None])\nplot_arrow(current_x, current_y, current_yaw)\nplt.plot(5, 5)\nplt.plot(ref_path[0], ref_path[1], marker=\"x\", color=\"blue\", label=\"Input Trajectory\")\nplt.axis(\"equal\")\nplt.grid(True)\nplt.legend()\nplt.pause(0.0001)\n",[5608],{"type":18,"tag":312,"props":5609,"children":5610},{},[5611],{"type":18,"tag":304,"props":5612,"children":5613},{"__ignoreMap":8},[5614,5622,5639,5719,5727,5752,5831,5848,5865,5873],{"type":18,"tag":319,"props":5615,"children":5616},{"class":321,"line":322},[5617],{"type":18,"tag":319,"props":5618,"children":5619},{"class":332},[5620],{"type":24,"value":5621},"plt.clf()\n",{"type":18,"tag":319,"props":5623,"children":5624},{"class":321,"line":348},[5625,5630,5635],{"type":18,"tag":319,"props":5626,"children":5627},{"class":332},[5628],{"type":24,"value":5629},"plt.gcf().canvas.mpl_connect(",{"type":18,"tag":319,"props":5631,"children":5632},{"class":1741},[5633],{"type":24,"value":5634},"'key_release_event'",{"type":18,"tag":319,"props":5636,"children":5637},{"class":332},[5638],{"type":24,"value":2563},{"type":18,"tag":319,"props":5640,"children":5641},{"class":321,"line":357},[5642,5646,5650,5655,5660,5665,5669,5673,5678,5683,5688,5692,5697,5701,5706,5710,5715],{"type":18,"tag":319,"props":5643,"children":5644},{"class":332},[5645],{"type":24,"value":3726},{"type":18,"tag":319,"props":5647,"children":5648},{"class":326},[5649],{"type":24,"value":604},{"type":18,"tag":319,"props":5651,"children":5652},{"class":332},[5653],{"type":24,"value":5654}," event: [",{"type":18,"tag":319,"props":5656,"children":5657},{"class":386},[5658],{"type":24,"value":5659},"exit",{"type":18,"tag":319,"props":5661,"children":5662},{"class":332},[5663],{"type":24,"value":5664},"(",{"type":18,"tag":319,"props":5666,"children":5667},{"class":386},[5668],{"type":24,"value":623},{"type":18,"tag":319,"props":5670,"children":5671},{"class":332},[5672],{"type":24,"value":813},{"type":18,"tag":319,"props":5674,"children":5675},{"class":326},[5676],{"type":24,"value":5677},"if",{"type":18,"tag":319,"props":5679,"children":5680},{"class":332},[5681],{"type":24,"value":5682}," event.key ",{"type":18,"tag":319,"props":5684,"children":5685},{"class":326},[5686],{"type":24,"value":5687},"==",{"type":18,"tag":319,"props":5689,"children":5690},{"class":332},[5691],{"type":24,"value":383},{"type":18,"tag":319,"props":5693,"children":5694},{"class":1741},[5695],{"type":24,"value":5696},"'escape'",{"type":18,"tag":319,"props":5698,"children":5699},{"class":332},[5700],{"type":24,"value":383},{"type":18,"tag":319,"props":5702,"children":5703},{"class":326},[5704],{"type":24,"value":5705},"else",{"type":18,"tag":319,"props":5707,"children":5708},{"class":332},[5709],{"type":24,"value":383},{"type":18,"tag":319,"props":5711,"children":5712},{"class":386},[5713],{"type":24,"value":5714},"None",{"type":18,"tag":319,"props":5716,"children":5717},{"class":332},[5718],{"type":24,"value":708},{"type":18,"tag":319,"props":5720,"children":5721},{"class":321,"line":367},[5722],{"type":18,"tag":319,"props":5723,"children":5724},{"class":332},[5725],{"type":24,"value":5726},"plot_arrow(current_x, current_y, current_yaw)\n",{"type":18,"tag":319,"props":5728,"children":5729},{"class":321,"line":392},[5730,5735,5740,5744,5748],{"type":18,"tag":319,"props":5731,"children":5732},{"class":332},[5733],{"type":24,"value":5734},"plt.plot(",{"type":18,"tag":319,"props":5736,"children":5737},{"class":386},[5738],{"type":24,"value":5739},"5",{"type":18,"tag":319,"props":5741,"children":5742},{"class":332},[5743],{"type":24,"value":2062},{"type":18,"tag":319,"props":5745,"children":5746},{"class":386},[5747],{"type":24,"value":5739},{"type":18,"tag":319,"props":5749,"children":5750},{"class":332},[5751],{"type":24,"value":1749},{"type":18,"tag":319,"props":5753,"children":5754},{"class":321,"line":401},[5755,5760,5764,5769,5773,5778,5783,5787,5791,5795,5800,5804,5809,5813,5818,5822,5827],{"type":18,"tag":319,"props":5756,"children":5757},{"class":332},[5758],{"type":24,"value":5759},"plt.plot(ref_path[",{"type":18,"tag":319,"props":5761,"children":5762},{"class":386},[5763],{"type":24,"value":623},{"type":18,"tag":319,"props":5765,"children":5766},{"class":332},[5767],{"type":24,"value":5768},"], ref_path[",{"type":18,"tag":319,"props":5770,"children":5771},{"class":386},[5772],{"type":24,"value":694},{"type":18,"tag":319,"props":5774,"children":5775},{"class":332},[5776],{"type":24,"value":5777},"], ",{"type":18,"tag":319,"props":5779,"children":5780},{"class":3729},[5781],{"type":24,"value":5782},"marker",{"type":18,"tag":319,"props":5784,"children":5785},{"class":326},[5786],{"type":24,"value":378},{"type":18,"tag":319,"props":5788,"children":5789},{"class":1741},[5790],{"type":24,"value":1744},{"type":18,"tag":319,"props":5792,"children":5793},{"class":332},[5794],{"type":24,"value":2062},{"type":18,"tag":319,"props":5796,"children":5797},{"class":3729},[5798],{"type":24,"value":5799},"color",{"type":18,"tag":319,"props":5801,"children":5802},{"class":326},[5803],{"type":24,"value":378},{"type":18,"tag":319,"props":5805,"children":5806},{"class":1741},[5807],{"type":24,"value":5808},"\"blue\"",{"type":18,"tag":319,"props":5810,"children":5811},{"class":332},[5812],{"type":24,"value":2062},{"type":18,"tag":319,"props":5814,"children":5815},{"class":3729},[5816],{"type":24,"value":5817},"label",{"type":18,"tag":319,"props":5819,"children":5820},{"class":326},[5821],{"type":24,"value":378},{"type":18,"tag":319,"props":5823,"children":5824},{"class":1741},[5825],{"type":24,"value":5826},"\"Input Trajectory\"",{"type":18,"tag":319,"props":5828,"children":5829},{"class":332},[5830],{"type":24,"value":1749},{"type":18,"tag":319,"props":5832,"children":5833},{"class":321,"line":423},[5834,5839,5844],{"type":18,"tag":319,"props":5835,"children":5836},{"class":332},[5837],{"type":24,"value":5838},"plt.axis(",{"type":18,"tag":319,"props":5840,"children":5841},{"class":1741},[5842],{"type":24,"value":5843},"\"equal\"",{"type":18,"tag":319,"props":5845,"children":5846},{"class":332},[5847],{"type":24,"value":1749},{"type":18,"tag":319,"props":5849,"children":5850},{"class":321,"line":432},[5851,5856,5861],{"type":18,"tag":319,"props":5852,"children":5853},{"class":332},[5854],{"type":24,"value":5855},"plt.grid(",{"type":18,"tag":319,"props":5857,"children":5858},{"class":386},[5859],{"type":24,"value":5860},"True",{"type":18,"tag":319,"props":5862,"children":5863},{"class":332},[5864],{"type":24,"value":1749},{"type":18,"tag":319,"props":5866,"children":5867},{"class":321,"line":454},[5868],{"type":18,"tag":319,"props":5869,"children":5870},{"class":332},[5871],{"type":24,"value":5872},"plt.legend()\n",{"type":18,"tag":319,"props":5874,"children":5875},{"class":321,"line":475},[5876,5881,5886],{"type":18,"tag":319,"props":5877,"children":5878},{"class":332},[5879],{"type":24,"value":5880},"plt.pause(",{"type":18,"tag":319,"props":5882,"children":5883},{"class":386},[5884],{"type":24,"value":5885},"0.0001",{"type":18,"tag":319,"props":5887,"children":5888},{"class":332},[5889],{"type":24,"value":5890},")",{"type":18,"tag":5325,"props":5892,"children":5894},{"id":5893},"path-tracking",[5895],{"type":24,"value":5896},"Path Tracking",{"type":18,"tag":27,"props":5898,"children":5899},{},[5900,5902,5907,5909,5914],{"type":24,"value":5901},"The code is all way the same. The different is that, I fit the continuous point into the robot instead of fixed goal point. I use ",{"type":18,"tag":1642,"props":5903,"children":5904},{},[5905],{"type":24,"value":5906},"BeizerCurve",{"type":24,"value":5908}," function to generate ",{"type":18,"tag":227,"props":5910,"children":5911},{},[5912],{"type":24,"value":5913}," Spline Trajectory ",{"type":24,"value":5915}," for the robot.",{"type":18,"tag":27,"props":5917,"children":5918},{},[5919,5921,5928],{"type":24,"value":5920},"The full code is published open-source on my Github. Link here ",{"type":18,"tag":4069,"props":5922,"children":5925},{"href":5923,"rel":5924},"https://github.com/SokhengDin/PathTracking/tree/main/PID",[4073],[5926],{"type":24,"value":5927},"Github",{"type":24,"value":5929},". Hit the star for me if you like my work .",{"type":18,"tag":5325,"props":5931,"children":5932},{"id":268},[5933],{"type":24,"value":271},{"type":18,"tag":278,"props":5935,"children":5937},{"className":5936},[281,282,283],[5938,5939],{"type":24,"value":286},{"type":18,"tag":43,"props":5940,"children":5943},{"className":5941,"src":5942},[46],"/topics/robotics/nmpc/Figure_pid_p.png",[],{"type":18,"tag":56,"props":5945,"children":5947},{"className":5946},[59,60,61,62],[5948],{"type":24,"value":5949},"\n    PID Controller with position control on Differential Drive Robot\n",{"type":18,"tag":278,"props":5951,"children":5953},{"className":5952},[281,282,283],[5954,5955],{"type":24,"value":286},{"type":18,"tag":43,"props":5956,"children":5959},{"className":5957,"src":5958},[46],"/topics/robotics/nmpc/Figure_pid_t.png",[],{"type":18,"tag":56,"props":5961,"children":5963},{"className":5962},[59,60,61,62],[5964],{"type":24,"value":5965},"\n    PID Controller with path tracking control on Differential Drive Robot\n",{"type":18,"tag":19,"props":5967,"children":5968},{"id":4044},[5969],{"type":24,"value":5970},"In Conclusion",{"type":18,"tag":27,"props":5972,"children":5973},{},[5974],{"type":24,"value":5975},"In my opinion, the PID Controller is an excellent choice for most control system applications due to its simplicity and powerful capabilities in handling complex control challenges arising from various systems.",{"type":18,"tag":19,"props":5977,"children":5979},{"id":5978},"references",[5980],{"type":24,"value":5981},"References",{"type":18,"tag":4060,"props":5983,"children":5984},{},[5985,5998,6003,6014],{"type":18,"tag":115,"props":5986,"children":5987},{},[5988,5990,5997],{"type":24,"value":5989},"BeizerCurve: ",{"type":18,"tag":4069,"props":5991,"children":5994},{"href":5992,"rel":5993},"https://en.wikipedia.org/wiki/B%C3%A9zier_curve",[4073],[5995],{"type":24,"value":5996},"https://en.wikipedia.org/wiki/Bzier_curve",{"type":24,"value":4144},{"type":18,"tag":115,"props":5999,"children":6000},{},[6001],{"type":24,"value":6002},"PID Controller: Control Systems Engineering by Normal S. Nise.",{"type":18,"tag":115,"props":6004,"children":6005},{},[6006,6008],{"type":24,"value":6007},"Beizer Path : ",{"type":18,"tag":4069,"props":6009,"children":6012},{"href":6010,"rel":6011},"https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning/BezierPath",[4073],[6013],{"type":24,"value":6010},{"type":18,"tag":115,"props":6015,"children":6016},{},[6017,6019],{"type":24,"value":6018},"PID Lecture : ",{"type":18,"tag":4069,"props":6020,"children":6023},{"href":6021,"rel":6022},"https://www.cds.caltech.edu/~murray/courses/cds101/fa02/caltech/astrom-ch6.pdf",[4073],[6024],{"type":24,"value":6021},{"type":18,"tag":4099,"children":6026},[6027],{"type":24,"value":6028},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-806137{color:#B392F0;}\n.ct-533739{color:#79B8FF;}\n.ct-326375{color:#6A737D;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":348,"depth":348,"links":6030},[6031,6032,6033,6034,6035,6036,6041,6042],{"id":4130,"depth":348,"text":4133},{"id":4147,"depth":348,"text":4150},{"id":4158,"depth":348,"text":4161},{"id":4222,"depth":348,"text":4225},{"id":4283,"depth":348,"text":4286},{"id":5320,"depth":348,"text":5323,"children":6037},[6038,6039,6040],{"id":5327,"depth":357,"text":5330},{"id":5893,"depth":357,"text":5896},{"id":268,"depth":357,"text":271},{"id":4044,"depth":348,"text":5970},{"id":5978,"depth":348,"text":5981},"content:topics:robotics:pid-controller.md","topics/robotics/pid-controller.md",{"_path":6046,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6047,"description":6048,"slug":6049,"tag":6049,"img":6050,"body":6051,"_type":4114,"_id":6241,"_source":4116,"_file":6242,"_extension":4118},"/topics/robotics/pure-pursuit","Pure Pursuit Controller","Introduction to Pure Pursuit Controller","pure-pursuit","/topics/robotics/nmpc/pure_pursuit.png",{"type":15,"children":6052,"toc":6234},[6053,6058,6068,6074,6079,6132,6138,6143,6195,6201,6206,6229],{"type":18,"tag":19,"props":6054,"children":6056},{"id":6055},"pure-pursuit-controller",[6057],{"type":24,"value":6047},{"type":18,"tag":27,"props":6059,"children":6060},{},[6061,6062,6066],{"type":24,"value":4753},{"type":18,"tag":227,"props":6063,"children":6064},{},[6065],{"type":24,"value":6047},{"type":24,"value":6067}," is a widely-used path-tracking algorithm in robotics and autonomous vehicle navigation. Its primary objective is to guide a vehicle or robot along a predefined path while ensuring precise path-following.",{"type":18,"tag":5325,"props":6069,"children":6071},{"id":6070},"principle-of-operation",[6072],{"type":24,"value":6073},"Principle of Operation",{"type":18,"tag":27,"props":6075,"children":6076},{},[6077],{"type":24,"value":6078},"The operation of the Pure Pursuit Controller is based on a straightforward concept:",{"type":18,"tag":4060,"props":6080,"children":6081},{},[6082,6092,6102,6112,6122],{"type":18,"tag":115,"props":6083,"children":6084},{},[6085,6090],{"type":18,"tag":227,"props":6086,"children":6087},{},[6088],{"type":24,"value":6089},"Path Definition",{"type":24,"value":6091},": The controller works with a defined path, often represented as a series of waypoints or a continuous curve, each associated with specific coordinates (x, y) and curvature information.",{"type":18,"tag":115,"props":6093,"children":6094},{},[6095,6100],{"type":18,"tag":227,"props":6096,"children":6097},{},[6098],{"type":24,"value":6099},"Target Point Selection",{"type":24,"value":6101},": The controller continuously selects a target point ahead of the vehicle. This target point is typically chosen as the point on the path that is a certain fixed distance (known as the \"lookahead distance\") in front of the vehicle.",{"type":18,"tag":115,"props":6103,"children":6104},{},[6105,6110],{"type":18,"tag":227,"props":6106,"children":6107},{},[6108],{"type":24,"value":6109},"Steering Command Calculation",{"type":24,"value":6111},": To navigate toward the target point, the controller calculates the steering command, often represented as the desired steering angle or curvature, required to reach the target point. Commonly, this involves computing the angle between the vehicle's current heading and the vector pointing from the current position to the target point.",{"type":18,"tag":115,"props":6113,"children":6114},{},[6115,6120],{"type":18,"tag":227,"props":6116,"children":6117},{},[6118],{"type":24,"value":6119},"Vehicle Control",{"type":24,"value":6121},": The calculated steering command is used to control the vehicle's steering mechanism (e.g., steering wheel or wheel angles) to guide it toward the target point.",{"type":18,"tag":115,"props":6123,"children":6124},{},[6125,6130],{"type":18,"tag":227,"props":6126,"children":6127},{},[6128],{"type":24,"value":6129},"Iterative Process",{"type":24,"value":6131},": The process is iterative, with the controller continuously selecting new target points ahead as the vehicle advances along the path and adjusting its steering to reach them.",{"type":18,"tag":5325,"props":6133,"children":6135},{"id":6134},"advantages",[6136],{"type":24,"value":6137},"Advantages",{"type":18,"tag":27,"props":6139,"children":6140},{},[6141],{"type":24,"value":6142},"The Pure Pursuit Controller offers several advantages:",{"type":18,"tag":111,"props":6144,"children":6145},{},[6146,6156,6165,6175,6185],{"type":18,"tag":115,"props":6147,"children":6148},{},[6149,6154],{"type":18,"tag":227,"props":6150,"children":6151},{},[6152],{"type":24,"value":6153},"Simplicity",{"type":24,"value":6155},": It is conceptually simple and easy to implement, making it suitable for a wide range of robotic and vehicle navigation applications.",{"type":18,"tag":115,"props":6157,"children":6158},{},[6159,6163],{"type":18,"tag":227,"props":6160,"children":6161},{},[6162],{"type":24,"value":5896},{"type":24,"value":6164},": The controller excels at accurate path tracking, even in complex environments with curves and turns.",{"type":18,"tag":115,"props":6166,"children":6167},{},[6168,6173],{"type":18,"tag":227,"props":6169,"children":6170},{},[6171],{"type":24,"value":6172},"Real-Time Operation",{"type":24,"value":6174},": It can operate in real-time, making it well-suited for dynamic environments where quick decision-making is crucial.",{"type":18,"tag":115,"props":6176,"children":6177},{},[6178,6183],{"type":18,"tag":227,"props":6179,"children":6180},{},[6181],{"type":24,"value":6182},"Adaptability",{"type":24,"value":6184},": The controller can adapt to changes in the path, such as deviations caused by obstacles or unexpected conditions, by continuously updating the target point.",{"type":18,"tag":115,"props":6186,"children":6187},{},[6188,6193],{"type":18,"tag":227,"props":6189,"children":6190},{},[6191],{"type":24,"value":6192},"Low Computational Overhead",{"type":24,"value":6194},": Compared to some other control algorithms, the Pure Pursuit Controller often has low computational requirements, which is advantageous for resource-constrained systems.",{"type":18,"tag":5325,"props":6196,"children":6198},{"id":6197},"limitations",[6199],{"type":24,"value":6200},"Limitations",{"type":18,"tag":27,"props":6202,"children":6203},{},[6204],{"type":24,"value":6205},"Despite its advantages, the Pure Pursuit Controller has some limitations:",{"type":18,"tag":111,"props":6207,"children":6208},{},[6209,6219],{"type":18,"tag":115,"props":6210,"children":6211},{},[6212,6217],{"type":18,"tag":227,"props":6213,"children":6214},{},[6215],{"type":24,"value":6216},"Lookahead Distance Sensitivity",{"type":24,"value":6218},": Its performance can be sensitive to the choice of the lookahead distance, which requires careful tuning for optimal path tracking.",{"type":18,"tag":115,"props":6220,"children":6221},{},[6222,6227],{"type":18,"tag":227,"props":6223,"children":6224},{},[6225],{"type":24,"value":6226},"Non-Holonomic Assumption",{"type":24,"value":6228},": The controller assumes that the vehicle is non-holonomic, meaning it cannot move sideways. This assumption may not hold for certain types of vehicles, such as omnidirectional robots.",{"type":18,"tag":27,"props":6230,"children":6231},{},[6232],{"type":24,"value":6233},"In summary, the Pure Pursuit Controller is a straightforward yet effective algorithm for path tracking and navigation. Its ability to calculate a steering command based on a selected target point ahead of the vehicle makes it a valuable tool for applications ranging from autonomous cars to mobile robots.",{"title":8,"searchDepth":348,"depth":348,"links":6235},[6236],{"id":6055,"depth":348,"text":6047,"children":6237},[6238,6239,6240],{"id":6070,"depth":357,"text":6073},{"id":6134,"depth":357,"text":6137},{"id":6197,"depth":357,"text":6200},"content:topics:robotics:pure-pursuit.md","topics/robotics/pure-pursuit.md",{"_path":6244,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6245,"description":6246,"slug":6247,"tag":6247,"body":6248,"_type":4114,"_id":6449,"_source":4116,"_file":6450,"_extension":4118},"/topics/robotics/stanley-controller","Stanley Controller","Introduction to Stanley Controller","stanley",{"type":15,"children":6249,"toc":6442},[6250,6255,6265,6269,6274,6335,6339,6344,6395,6399,6404,6437],{"type":18,"tag":19,"props":6251,"children":6253},{"id":6252},"stanley-controller",[6254],{"type":24,"value":6245},{"type":18,"tag":27,"props":6256,"children":6257},{},[6258,6259,6263],{"type":24,"value":4753},{"type":18,"tag":227,"props":6260,"children":6261},{},[6262],{"type":24,"value":6245},{"type":24,"value":6264}," is an advanced path-tracking algorithm primarily used in the field of autonomous vehicle navigation. It is named after its creator, Professor John K. Hedrick, who developed it at Stanford University. The Stanley Controller is designed to enable a vehicle to follow a predefined path with high accuracy and stability.",{"type":18,"tag":5325,"props":6266,"children":6267},{"id":6070},[6268],{"type":24,"value":6073},{"type":18,"tag":27,"props":6270,"children":6271},{},[6272],{"type":24,"value":6273},"The Stanley Controller operates based on a combination of control and feedback mechanisms:",{"type":18,"tag":4060,"props":6275,"children":6276},{},[6277,6286,6296,6306,6316,6325],{"type":18,"tag":115,"props":6278,"children":6279},{},[6280,6284],{"type":18,"tag":227,"props":6281,"children":6282},{},[6283],{"type":24,"value":6089},{"type":24,"value":6285},": A predefined path is represented as a series of waypoints or a continuous curve. Each waypoint is associated with specific coordinates (x, y) and often includes additional information like desired speed and curvature.",{"type":18,"tag":115,"props":6287,"children":6288},{},[6289,6294],{"type":18,"tag":227,"props":6290,"children":6291},{},[6292],{"type":24,"value":6293},"Cross-Track Error (CTE) Calculation",{"type":24,"value":6295},": The controller calculates the cross-track error, which is the perpendicular distance between the vehicle's current position and the desired path. This error represents how far the vehicle has deviated from the path.",{"type":18,"tag":115,"props":6297,"children":6298},{},[6299,6304],{"type":18,"tag":227,"props":6300,"children":6301},{},[6302],{"type":24,"value":6303},"Heading Error Calculation",{"type":24,"value":6305},": The heading error, which is the difference between the vehicle's current heading (yaw angle) and the desired path's tangent angle at the nearest waypoint, is also computed.",{"type":18,"tag":115,"props":6307,"children":6308},{},[6309,6314],{"type":18,"tag":227,"props":6310,"children":6311},{},[6312],{"type":24,"value":6313},"Control Command Generation",{"type":24,"value":6315},": Using the calculated cross-track error and heading error, the Stanley Controller generates control commands. These commands typically include steering angle adjustments and throttle/brake control to minimize both errors.",{"type":18,"tag":115,"props":6317,"children":6318},{},[6319,6323],{"type":18,"tag":227,"props":6320,"children":6321},{},[6322],{"type":24,"value":6119},{"type":24,"value":6324},": The generated control commands are applied to the vehicle's steering and throttle/brake systems to guide it back to the desired path.",{"type":18,"tag":115,"props":6326,"children":6327},{},[6328,6333],{"type":18,"tag":227,"props":6329,"children":6330},{},[6331],{"type":24,"value":6332},"Iterative Feedback",{"type":24,"value":6334},": The process is iterative, with the controller continuously recalculating the cross-track and heading errors and adjusting the control commands to keep the vehicle on track.",{"type":18,"tag":5325,"props":6336,"children":6337},{"id":6134},[6338],{"type":24,"value":6137},{"type":18,"tag":27,"props":6340,"children":6341},{},[6342],{"type":24,"value":6343},"The Stanley Controller offers several advantages:",{"type":18,"tag":111,"props":6345,"children":6346},{},[6347,6357,6367,6376,6385],{"type":18,"tag":115,"props":6348,"children":6349},{},[6350,6355],{"type":18,"tag":227,"props":6351,"children":6352},{},[6353],{"type":24,"value":6354},"High Accuracy",{"type":24,"value":6356},": It is known for its ability to achieve precise path-following, even in challenging conditions and complex road geometries.",{"type":18,"tag":115,"props":6358,"children":6359},{},[6360,6365],{"type":18,"tag":227,"props":6361,"children":6362},{},[6363],{"type":24,"value":6364},"Stability",{"type":24,"value":6366},": The controller's feedback mechanisms contribute to stable and smooth vehicle motion, reducing the risk of overshooting or oscillations.",{"type":18,"tag":115,"props":6368,"children":6369},{},[6370,6374],{"type":18,"tag":227,"props":6371,"children":6372},{},[6373],{"type":24,"value":6182},{"type":24,"value":6375},": The Stanley Controller can adapt to changes in the path, such as deviations caused by obstacles or dynamic road conditions.",{"type":18,"tag":115,"props":6377,"children":6378},{},[6379,6383],{"type":18,"tag":227,"props":6380,"children":6381},{},[6382],{"type":24,"value":6172},{"type":24,"value":6384},": It can operate in real-time, making it suitable for autonomous vehicle navigation in dynamic environments.",{"type":18,"tag":115,"props":6386,"children":6387},{},[6388,6393],{"type":18,"tag":227,"props":6389,"children":6390},{},[6391],{"type":24,"value":6392},"Versatility",{"type":24,"value":6394},": While primarily used in autonomous vehicles, the Stanley Controller's principles can be applied to various path-tracking tasks.",{"type":18,"tag":5325,"props":6396,"children":6397},{"id":6197},[6398],{"type":24,"value":6200},{"type":18,"tag":27,"props":6400,"children":6401},{},[6402],{"type":24,"value":6403},"Despite its advantages, the Stanley Controller has some limitations:",{"type":18,"tag":111,"props":6405,"children":6406},{},[6407,6417,6427],{"type":18,"tag":115,"props":6408,"children":6409},{},[6410,6415],{"type":18,"tag":227,"props":6411,"children":6412},{},[6413],{"type":24,"value":6414},"Complexity",{"type":24,"value":6416},": Implementing the Stanley Controller can be more complex than some other control algorithms due to its mathematical calculations and tuning requirements.",{"type":18,"tag":115,"props":6418,"children":6419},{},[6420,6425],{"type":18,"tag":227,"props":6421,"children":6422},{},[6423],{"type":24,"value":6424},"Initialization",{"type":24,"value":6426},": It relies on accurate initialization, including knowledge of the vehicle's initial position and heading relative to the path.",{"type":18,"tag":115,"props":6428,"children":6429},{},[6430,6435],{"type":18,"tag":227,"props":6431,"children":6432},{},[6433],{"type":24,"value":6434},"Sensitivity to Noise",{"type":24,"value":6436},": Like many feedback-based controllers, the Stanley Controller can be sensitive to noisy sensor data and require robust sensor fusion techniques.",{"type":18,"tag":27,"props":6438,"children":6439},{},[6440],{"type":24,"value":6441},"In summary, the Stanley Controller is an advanced path-tracking algorithm known for its accuracy and stability, making it a valuable tool in the field of autonomous vehicle navigation. Proper implementation and tuning are essential to harness its full potential.",{"title":8,"searchDepth":348,"depth":348,"links":6443},[6444],{"id":6252,"depth":348,"text":6245,"children":6445},[6446,6447,6448],{"id":6070,"depth":357,"text":6073},{"id":6134,"depth":357,"text":6137},{"id":6197,"depth":357,"text":6200},"content:topics:robotics:stanley-controller.md","topics/robotics/stanley-controller.md",1694097918862]