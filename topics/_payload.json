[{"data":1,"prerenderedAt":6451},["Reactive",2],{"topics/robotics":3},[4,4119,6045,6243],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":9,"description":10,"author":11,"slug":12,"tag":12,"img":13,"body":14,"_type":4114,"_id":4115,"_source":4116,"_file":4117,"_extension":4118},"/topics/robotics/nonlinear-mpc","robotics",false,"","Nonlinear Model Predictive Control","Introduction to Nonlinear Model Predictive Control","Din Sokheng","nonlinear-mpc","/topics/robotics/nmpc/predict_horizon.png",{"type":15,"children":16,"toc":4103},"root",[17,26,32,55,66,72,86,91,96,101,105,110,154,159,163,168,215,221,234,238,243,248,253,258,262,266,271,1515,1521,1526,1530,1545,1549,1554,1558,1564,1569,1573,1586,1590,1594,1598,1604,1617,1649,1654,2187,2192,2370,2379,2635,2640,3654,3659,4010,4016,4021,4036,4042,4048,4053,4059,4098],{"type":18,"tag":19,"props":20,"children":22},"element","h2",{"id":21},"what-is-model-predictive-control",[23],{"type":24,"value":25},"text","What is Model Predictive Control ?",{"type":18,"tag":27,"props":28,"children":29},"p",{},[30],{"type":24,"value":31},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":18,"tag":33,"props":34,"children":41},"div",{"className":35},[36,37,38,39,40],"grid","grid-cols-2","space-x-10","justify-center","items-center",[42,50],{"type":18,"tag":43,"props":44,"children":49},"img",{"className":45,"src":13,"width":47,"height":48},[46],"mx-auto","600px","300px",[],{"type":18,"tag":43,"props":51,"children":54},{"className":52,"src":53,"width":47,"height":48},[46],"/topics/robotics/nmpc/set_points.png",[],{"type":18,"tag":56,"props":57,"children":63},"figcaption",{"className":58},[59,60,61,62],"text-center","text-sm","text-neutral-600","dark:text-neutral-400",[64],{"type":24,"value":65},"\n      A car with finite horizons prediction and set point prediction over finite horizons.\n",{"type":18,"tag":19,"props":67,"children":69},{"id":68},"nonlinear-model-predictive-control",[70],{"type":24,"value":71},"Nonlinear Model Predictive Control ?",{"type":18,"tag":27,"props":73,"children":74},{},[75,77,81,83],{"type":24,"value":76},"Nonlinear Model Predictive Control has the same basic core of its control algorithms. The different is about the mathematical solving over the system. ",{"type":18,"tag":78,"props":79,"children":80},"br",{},[],{"type":24,"value":82},"\nIn the real-life application, most of the system certainly nonlinear and it's more complex than linear model. Linear systems are mostly time-invariant, meaning that the response of the system input is time-independent. Nonlinear systems are time-varying meaning that the response of the system to any input is time-dependent.",{"type":18,"tag":78,"props":84,"children":85},{},[],{"type":18,"tag":27,"props":87,"children":88},{},[89],{"type":24,"value":90},"The system model can be represent as state-space model",{"type":18,"tag":92,"props":93,"children":95},"math-render-b",{"latex-express":94,"styles":59}," \\dot{X} = f(X,U) ",[],{"type":18,"tag":27,"props":97,"children":98},{},[99],{"type":24,"value":100},"Nonlinear Model Predictive Control also works by solving the quardratic cost subject to the nonlinear function over a future finite horizons. The quadractic cost can be define as",{"type":18,"tag":92,"props":102,"children":104},{"latex-express":103,"styles":59},"J(x,u) = \\displaystyle\\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})",[],{"type":18,"tag":27,"props":106,"children":107},{},[108],{"type":24,"value":109},"Notation",{"type":18,"tag":111,"props":112,"children":113},"ul",{},[114,127,136,145],{"type":18,"tag":115,"props":116,"children":117},"li",{},[118,125],{"type":18,"tag":119,"props":120,"children":124},"math-render",{"latex-express":121,"styles":122,"dist-cond":123},"X","inline-flex","false",[],{"type":24,"value":126}," is the state of the system. This shall be obtained from the optimiztion problem.",{"type":18,"tag":115,"props":128,"children":129},{},[130,134],{"type":18,"tag":119,"props":131,"children":133},{"latex-express":132,"styles":122,"dist-cond":123},"X_{ref}",[],{"type":24,"value":135}," is the reference state of the system or desired input state.",{"type":18,"tag":115,"props":137,"children":138},{},[139,143],{"type":18,"tag":119,"props":140,"children":142},{"latex-express":141,"styles":122,"dist-cond":123},"U",[],{"type":24,"value":144}," is the input control of the system. This is a solution obtained from the optimization problem.",{"type":18,"tag":115,"props":146,"children":147},{},[148,152],{"type":18,"tag":119,"props":149,"children":151},{"latex-express":150,"styles":122,"dist-cond":123},"U_{ref}",[],{"type":24,"value":153}," is the reference control of the system or desired input control.",{"type":18,"tag":27,"props":155,"children":156},{},[157],{"type":24,"value":158},"Rewrite the optimization of NMPC problem.",{"type":18,"tag":92,"props":160,"children":162},{"latex-express":161,"styles":59},"\n      \\begin{align*}\n            \\min_{u_{0}, u_{1}, ..., u_{N-1} } \\quad \\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}&Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})\\\\\n            \\text{subject to} \\quad & x_{k+1} = f(x_k, u_k) \\quad \\text{(System dynamics)} \\\\\n            & g(x_k, x_k) \\leq 0 \\quad \\text{(State constraints)} \\\\\n            & h(x_k, x_k) \\leq 0 \\quad \\text{(Input constraints)} \\\\\n            & p(x_k) \\leq 0 \\quad \\text{(Path constraints)} \\\\\n            & x_0=x(0)  \\quad \\text{(Initial condition)}\n      \\end{align*}\n            ",[],{"type":18,"tag":27,"props":164,"children":165},{},[166],{"type":24,"value":167},"Which,",{"type":18,"tag":111,"props":169,"children":170},{},[171,180,189,198,206],{"type":18,"tag":115,"props":172,"children":173},{},[174,178],{"type":18,"tag":119,"props":175,"children":177},{"latex-express":176,"styles":122,"dist-cond":123},"f",[],{"type":24,"value":179}," is the system dynamics model.",{"type":18,"tag":115,"props":181,"children":182},{},[183,187],{"type":18,"tag":119,"props":184,"children":186},{"latex-express":185,"styles":122,"dist-cond":123},"g",[],{"type":24,"value":188}," is the state constraints of the system.",{"type":18,"tag":115,"props":190,"children":191},{},[192,196],{"type":18,"tag":119,"props":193,"children":195},{"latex-express":194,"styles":122,"dist-cond":123},"h",[],{"type":24,"value":197}," is the input constraints of the system.",{"type":18,"tag":115,"props":199,"children":200},{},[201,204],{"type":18,"tag":119,"props":202,"children":203},{"latex-express":27,"styles":122,"dist-cond":123},[],{"type":24,"value":205}," is the path constraint, it help to ensure the safety following path of our system.",{"type":18,"tag":115,"props":207,"children":208},{},[209,213],{"type":18,"tag":119,"props":210,"children":212},{"latex-express":211,"styles":122,"dist-cond":123},"\\phi(X_{N})",[],{"type":24,"value":214}," is the terminal cost of the system.",{"type":18,"tag":19,"props":216,"children":218},{"id":217},"discretize-the-system-model-with-runge-kutta-4th-order",[219],{"type":24,"value":220},"Discretize the system model with Runge-Kutta 4th order",{"type":18,"tag":27,"props":222,"children":223},{},[224,226,232],{"type":24,"value":225},"I will choose a simple system mode robot ",{"type":18,"tag":227,"props":228,"children":229},"strong",{},[230],{"type":24,"value":231}," DifferentialDrive ",{"type":24,"value":233},".\nThe forward kinematic equation",{"type":18,"tag":92,"props":235,"children":237},{"latex-express":236,"styles":59},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":239,"children":240},{},[241],{"type":24,"value":242},"State constraints are the restriction imposed on the state variable of the system. It helps our optimizer not to obtain the solution that is outside the boundary region and also ensure the system to always perform the minimal action control in any critical condition.",{"type":18,"tag":27,"props":244,"children":245},{},[246],{"type":24,"value":247},"We, then can do the approximation",{"type":18,"tag":92,"props":249,"children":252},{"latex-express":250,"styles":59,"dist-cond":251},"\n    \\begin{align*}\n        k_{1} &= f(x^{*}, u^{*}) \\\\\n        k_{2} &= f(x^{*}+k_{1}\\frac{dt}{2}, u^{*}) \\\\ \n        k_{3} &= f(x^{*}+k_{2}\\frac{dt}{2}, u^{*}) \\\\\n        k_{4} &= f(x^{*}+k_{3}dt, u^{*}) \\\\ \n        \\Rightarrow{x_{k+1} } &= x_{k} + (k_{1}+2k_{2}+2k_{3}+k_{4})\\frac{dt}{6}\n    \\end{align*}\n","true",[],{"type":18,"tag":27,"props":254,"children":255},{},[256],{"type":24,"value":257},"Let's evaluate it with our model.",{"type":18,"tag":92,"props":259,"children":261},{"latex-express":260,"styles":59},"\n      \\begin{align*}\n        k_{1} &= \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n        k_{2} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{3} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{4} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n    \\end{align*}\n      ",[],{"type":18,"tag":92,"props":263,"children":265},{"latex-express":264,"styles":59},"\n      \\Rightarrow{x_{k+1} } = x_{k} + \\left( \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} + \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix}   \\right) \\frac{dt}{6}\n",[],{"type":18,"tag":27,"props":267,"children":268},{},[269],{"type":24,"value":270},"How to implement it in Python ???",{"type":18,"tag":272,"props":273,"children":278},"code",{"className":274,"code":276,"language":277,"meta":8},[275],"language-python","import numpy as np\n\n## Define sampling time dt 100Hz\ndt = 0.01\n## Define the num steps for function approximation \nnum_steps = 100\n## Define initial states\nx = 0.0\ny = 0.0\nyaw = 0.0\n## Define input control\nv = 1.5 #m/s\nomega = 1.57 #rad/s\n## Define state represent model\n### define lambda function take variable x\nf = lambda x, u :  np.array([\n      [u[0]*np.cos(x[2])],\n      [u[0]*np.sin(x[2])],\n      [u[1]]\n])\n\nfor _ in range(num_steps):\n    k1 = f([x, y, yaw], [v, omega])\n    k2 = f([x + (dt / 2) * k1[0], y + (dt / 2) * k1[1], yaw + (dt / 2) * k1[2]], [v, omega])\n    k3 = f([x + (dt / 2) * k2[0], y + (dt / 2) * k2[1], yaw + (dt / 2) * k2[2]], [v, omega])\n    k4 = f([x + dt * k3[0], y + dt * k3[1], yaw + dt * k3[2]], [v, omega])\n\n    # Update state of the robot\n    x += (k1[0] + 2 * k2[0] + 2 * k3[0] + k4[0]) * dt / 6\n    y += (k1[1] + 2 * k2[1] + 2 * k3[1] + k4[1]) * dt / 6\n    yaw += (k1[2] + 2 * k2[2] + 2 * k3[2] + k4[2]) * dt / 6\n","python",[279],{"type":18,"tag":280,"props":281,"children":282},"pre",{},[283],{"type":18,"tag":272,"props":284,"children":285},{"__ignoreMap":8},[286,314,323,333,358,367,389,398,420,441,462,471,502,533,542,551,578,617,650,668,677,685,718,736,882,1020,1111,1119,1133,1264,1389],{"type":18,"tag":287,"props":288,"children":291},"span",{"class":289,"line":290},"line",1,[292,298,304,309],{"type":18,"tag":287,"props":293,"children":295},{"class":294},"ct-857441",[296],{"type":24,"value":297},"import",{"type":18,"tag":287,"props":299,"children":301},{"class":300},"ct-767297",[302],{"type":24,"value":303}," numpy ",{"type":18,"tag":287,"props":305,"children":306},{"class":294},[307],{"type":24,"value":308},"as",{"type":18,"tag":287,"props":310,"children":311},{"class":300},[312],{"type":24,"value":313}," np\n",{"type":18,"tag":287,"props":315,"children":317},{"class":289,"line":316},2,[318],{"type":18,"tag":287,"props":319,"children":320},{},[321],{"type":24,"value":322},"\n",{"type":18,"tag":287,"props":324,"children":326},{"class":289,"line":325},3,[327],{"type":18,"tag":287,"props":328,"children":330},{"class":329},"ct-326375",[331],{"type":24,"value":332},"## Define sampling time dt 100Hz\n",{"type":18,"tag":287,"props":334,"children":336},{"class":289,"line":335},4,[337,342,347,352],{"type":18,"tag":287,"props":338,"children":339},{"class":300},[340],{"type":24,"value":341},"dt ",{"type":18,"tag":287,"props":343,"children":344},{"class":294},[345],{"type":24,"value":346},"=",{"type":18,"tag":287,"props":348,"children":349},{"class":300},[350],{"type":24,"value":351}," ",{"type":18,"tag":287,"props":353,"children":355},{"class":354},"ct-533739",[356],{"type":24,"value":357},"0.01\n",{"type":18,"tag":287,"props":359,"children":361},{"class":289,"line":360},5,[362],{"type":18,"tag":287,"props":363,"children":364},{"class":329},[365],{"type":24,"value":366},"## Define the num steps for function approximation \n",{"type":18,"tag":287,"props":368,"children":370},{"class":289,"line":369},6,[371,376,380,384],{"type":18,"tag":287,"props":372,"children":373},{"class":300},[374],{"type":24,"value":375},"num_steps ",{"type":18,"tag":287,"props":377,"children":378},{"class":294},[379],{"type":24,"value":346},{"type":18,"tag":287,"props":381,"children":382},{"class":300},[383],{"type":24,"value":351},{"type":18,"tag":287,"props":385,"children":386},{"class":354},[387],{"type":24,"value":388},"100\n",{"type":18,"tag":287,"props":390,"children":392},{"class":289,"line":391},7,[393],{"type":18,"tag":287,"props":394,"children":395},{"class":329},[396],{"type":24,"value":397},"## Define initial states\n",{"type":18,"tag":287,"props":399,"children":401},{"class":289,"line":400},8,[402,407,411,415],{"type":18,"tag":287,"props":403,"children":404},{"class":300},[405],{"type":24,"value":406},"x ",{"type":18,"tag":287,"props":408,"children":409},{"class":294},[410],{"type":24,"value":346},{"type":18,"tag":287,"props":412,"children":413},{"class":300},[414],{"type":24,"value":351},{"type":18,"tag":287,"props":416,"children":417},{"class":354},[418],{"type":24,"value":419},"0.0\n",{"type":18,"tag":287,"props":421,"children":423},{"class":289,"line":422},9,[424,429,433,437],{"type":18,"tag":287,"props":425,"children":426},{"class":300},[427],{"type":24,"value":428},"y ",{"type":18,"tag":287,"props":430,"children":431},{"class":294},[432],{"type":24,"value":346},{"type":18,"tag":287,"props":434,"children":435},{"class":300},[436],{"type":24,"value":351},{"type":18,"tag":287,"props":438,"children":439},{"class":354},[440],{"type":24,"value":419},{"type":18,"tag":287,"props":442,"children":444},{"class":289,"line":443},10,[445,450,454,458],{"type":18,"tag":287,"props":446,"children":447},{"class":300},[448],{"type":24,"value":449},"yaw ",{"type":18,"tag":287,"props":451,"children":452},{"class":294},[453],{"type":24,"value":346},{"type":18,"tag":287,"props":455,"children":456},{"class":300},[457],{"type":24,"value":351},{"type":18,"tag":287,"props":459,"children":460},{"class":354},[461],{"type":24,"value":419},{"type":18,"tag":287,"props":463,"children":465},{"class":289,"line":464},11,[466],{"type":18,"tag":287,"props":467,"children":468},{"class":329},[469],{"type":24,"value":470},"## Define input control\n",{"type":18,"tag":287,"props":472,"children":474},{"class":289,"line":473},12,[475,480,484,488,493,497],{"type":18,"tag":287,"props":476,"children":477},{"class":300},[478],{"type":24,"value":479},"v ",{"type":18,"tag":287,"props":481,"children":482},{"class":294},[483],{"type":24,"value":346},{"type":18,"tag":287,"props":485,"children":486},{"class":300},[487],{"type":24,"value":351},{"type":18,"tag":287,"props":489,"children":490},{"class":354},[491],{"type":24,"value":492},"1.5",{"type":18,"tag":287,"props":494,"children":495},{"class":300},[496],{"type":24,"value":351},{"type":18,"tag":287,"props":498,"children":499},{"class":329},[500],{"type":24,"value":501},"#m/s\n",{"type":18,"tag":287,"props":503,"children":505},{"class":289,"line":504},13,[506,511,515,519,524,528],{"type":18,"tag":287,"props":507,"children":508},{"class":300},[509],{"type":24,"value":510},"omega ",{"type":18,"tag":287,"props":512,"children":513},{"class":294},[514],{"type":24,"value":346},{"type":18,"tag":287,"props":516,"children":517},{"class":300},[518],{"type":24,"value":351},{"type":18,"tag":287,"props":520,"children":521},{"class":354},[522],{"type":24,"value":523},"1.57",{"type":18,"tag":287,"props":525,"children":526},{"class":300},[527],{"type":24,"value":351},{"type":18,"tag":287,"props":529,"children":530},{"class":329},[531],{"type":24,"value":532},"#rad/s\n",{"type":18,"tag":287,"props":534,"children":536},{"class":289,"line":535},14,[537],{"type":18,"tag":287,"props":538,"children":539},{"class":329},[540],{"type":24,"value":541},"## Define state represent model\n",{"type":18,"tag":287,"props":543,"children":545},{"class":289,"line":544},15,[546],{"type":18,"tag":287,"props":547,"children":548},{"class":329},[549],{"type":24,"value":550},"### define lambda function take variable x\n",{"type":18,"tag":287,"props":552,"children":554},{"class":289,"line":553},16,[555,560,564,568,573],{"type":18,"tag":287,"props":556,"children":557},{"class":300},[558],{"type":24,"value":559},"f ",{"type":18,"tag":287,"props":561,"children":562},{"class":294},[563],{"type":24,"value":346},{"type":18,"tag":287,"props":565,"children":566},{"class":300},[567],{"type":24,"value":351},{"type":18,"tag":287,"props":569,"children":570},{"class":294},[571],{"type":24,"value":572},"lambda",{"type":18,"tag":287,"props":574,"children":575},{"class":300},[576],{"type":24,"value":577}," x, u :  np.array([\n",{"type":18,"tag":287,"props":579,"children":581},{"class":289,"line":580},17,[582,587,592,597,602,607,612],{"type":18,"tag":287,"props":583,"children":584},{"class":300},[585],{"type":24,"value":586},"      [u[",{"type":18,"tag":287,"props":588,"children":589},{"class":354},[590],{"type":24,"value":591},"0",{"type":18,"tag":287,"props":593,"children":594},{"class":300},[595],{"type":24,"value":596},"]",{"type":18,"tag":287,"props":598,"children":599},{"class":294},[600],{"type":24,"value":601},"*",{"type":18,"tag":287,"props":603,"children":604},{"class":300},[605],{"type":24,"value":606},"np.cos(x[",{"type":18,"tag":287,"props":608,"children":609},{"class":354},[610],{"type":24,"value":611},"2",{"type":18,"tag":287,"props":613,"children":614},{"class":300},[615],{"type":24,"value":616},"])],\n",{"type":18,"tag":287,"props":618,"children":620},{"class":289,"line":619},18,[621,625,629,633,637,642,646],{"type":18,"tag":287,"props":622,"children":623},{"class":300},[624],{"type":24,"value":586},{"type":18,"tag":287,"props":626,"children":627},{"class":354},[628],{"type":24,"value":591},{"type":18,"tag":287,"props":630,"children":631},{"class":300},[632],{"type":24,"value":596},{"type":18,"tag":287,"props":634,"children":635},{"class":294},[636],{"type":24,"value":601},{"type":18,"tag":287,"props":638,"children":639},{"class":300},[640],{"type":24,"value":641},"np.sin(x[",{"type":18,"tag":287,"props":643,"children":644},{"class":354},[645],{"type":24,"value":611},{"type":18,"tag":287,"props":647,"children":648},{"class":300},[649],{"type":24,"value":616},{"type":18,"tag":287,"props":651,"children":653},{"class":289,"line":652},19,[654,658,663],{"type":18,"tag":287,"props":655,"children":656},{"class":300},[657],{"type":24,"value":586},{"type":18,"tag":287,"props":659,"children":660},{"class":354},[661],{"type":24,"value":662},"1",{"type":18,"tag":287,"props":664,"children":665},{"class":300},[666],{"type":24,"value":667},"]]\n",{"type":18,"tag":287,"props":669,"children":671},{"class":289,"line":670},20,[672],{"type":18,"tag":287,"props":673,"children":674},{"class":300},[675],{"type":24,"value":676},"])\n",{"type":18,"tag":287,"props":678,"children":680},{"class":289,"line":679},21,[681],{"type":18,"tag":287,"props":682,"children":683},{},[684],{"type":24,"value":322},{"type":18,"tag":287,"props":686,"children":688},{"class":289,"line":687},22,[689,694,699,704,708,713],{"type":18,"tag":287,"props":690,"children":691},{"class":294},[692],{"type":24,"value":693},"for",{"type":18,"tag":287,"props":695,"children":696},{"class":300},[697],{"type":24,"value":698}," _ ",{"type":18,"tag":287,"props":700,"children":701},{"class":294},[702],{"type":24,"value":703},"in",{"type":18,"tag":287,"props":705,"children":706},{"class":300},[707],{"type":24,"value":351},{"type":18,"tag":287,"props":709,"children":710},{"class":354},[711],{"type":24,"value":712},"range",{"type":18,"tag":287,"props":714,"children":715},{"class":300},[716],{"type":24,"value":717},"(num_steps):\n",{"type":18,"tag":287,"props":719,"children":721},{"class":289,"line":720},23,[722,727,731],{"type":18,"tag":287,"props":723,"children":724},{"class":300},[725],{"type":24,"value":726},"    k1 ",{"type":18,"tag":287,"props":728,"children":729},{"class":294},[730],{"type":24,"value":346},{"type":18,"tag":287,"props":732,"children":733},{"class":300},[734],{"type":24,"value":735}," f([x, y, yaw], [v, omega])\n",{"type":18,"tag":287,"props":737,"children":739},{"class":289,"line":738},24,[740,745,749,754,759,764,769,773,777,782,786,791,795,800,804,808,812,816,820,824,828,832,836,841,845,849,853,857,861,865,869,873,877],{"type":18,"tag":287,"props":741,"children":742},{"class":300},[743],{"type":24,"value":744},"    k2 ",{"type":18,"tag":287,"props":746,"children":747},{"class":294},[748],{"type":24,"value":346},{"type":18,"tag":287,"props":750,"children":751},{"class":300},[752],{"type":24,"value":753}," f([x ",{"type":18,"tag":287,"props":755,"children":756},{"class":294},[757],{"type":24,"value":758},"+",{"type":18,"tag":287,"props":760,"children":761},{"class":300},[762],{"type":24,"value":763}," (dt ",{"type":18,"tag":287,"props":765,"children":766},{"class":294},[767],{"type":24,"value":768},"/",{"type":18,"tag":287,"props":770,"children":771},{"class":300},[772],{"type":24,"value":351},{"type":18,"tag":287,"props":774,"children":775},{"class":354},[776],{"type":24,"value":611},{"type":18,"tag":287,"props":778,"children":779},{"class":300},[780],{"type":24,"value":781},") ",{"type":18,"tag":287,"props":783,"children":784},{"class":294},[785],{"type":24,"value":601},{"type":18,"tag":287,"props":787,"children":788},{"class":300},[789],{"type":24,"value":790}," k1[",{"type":18,"tag":287,"props":792,"children":793},{"class":354},[794],{"type":24,"value":591},{"type":18,"tag":287,"props":796,"children":797},{"class":300},[798],{"type":24,"value":799},"], y ",{"type":18,"tag":287,"props":801,"children":802},{"class":294},[803],{"type":24,"value":758},{"type":18,"tag":287,"props":805,"children":806},{"class":300},[807],{"type":24,"value":763},{"type":18,"tag":287,"props":809,"children":810},{"class":294},[811],{"type":24,"value":768},{"type":18,"tag":287,"props":813,"children":814},{"class":300},[815],{"type":24,"value":351},{"type":18,"tag":287,"props":817,"children":818},{"class":354},[819],{"type":24,"value":611},{"type":18,"tag":287,"props":821,"children":822},{"class":300},[823],{"type":24,"value":781},{"type":18,"tag":287,"props":825,"children":826},{"class":294},[827],{"type":24,"value":601},{"type":18,"tag":287,"props":829,"children":830},{"class":300},[831],{"type":24,"value":790},{"type":18,"tag":287,"props":833,"children":834},{"class":354},[835],{"type":24,"value":662},{"type":18,"tag":287,"props":837,"children":838},{"class":300},[839],{"type":24,"value":840},"], yaw ",{"type":18,"tag":287,"props":842,"children":843},{"class":294},[844],{"type":24,"value":758},{"type":18,"tag":287,"props":846,"children":847},{"class":300},[848],{"type":24,"value":763},{"type":18,"tag":287,"props":850,"children":851},{"class":294},[852],{"type":24,"value":768},{"type":18,"tag":287,"props":854,"children":855},{"class":300},[856],{"type":24,"value":351},{"type":18,"tag":287,"props":858,"children":859},{"class":354},[860],{"type":24,"value":611},{"type":18,"tag":287,"props":862,"children":863},{"class":300},[864],{"type":24,"value":781},{"type":18,"tag":287,"props":866,"children":867},{"class":294},[868],{"type":24,"value":601},{"type":18,"tag":287,"props":870,"children":871},{"class":300},[872],{"type":24,"value":790},{"type":18,"tag":287,"props":874,"children":875},{"class":354},[876],{"type":24,"value":611},{"type":18,"tag":287,"props":878,"children":879},{"class":300},[880],{"type":24,"value":881},"]], [v, omega])\n",{"type":18,"tag":287,"props":883,"children":885},{"class":289,"line":884},25,[886,891,895,899,903,907,911,915,919,923,927,932,936,940,944,948,952,956,960,964,968,972,976,980,984,988,992,996,1000,1004,1008,1012,1016],{"type":18,"tag":287,"props":887,"children":888},{"class":300},[889],{"type":24,"value":890},"    k3 ",{"type":18,"tag":287,"props":892,"children":893},{"class":294},[894],{"type":24,"value":346},{"type":18,"tag":287,"props":896,"children":897},{"class":300},[898],{"type":24,"value":753},{"type":18,"tag":287,"props":900,"children":901},{"class":294},[902],{"type":24,"value":758},{"type":18,"tag":287,"props":904,"children":905},{"class":300},[906],{"type":24,"value":763},{"type":18,"tag":287,"props":908,"children":909},{"class":294},[910],{"type":24,"value":768},{"type":18,"tag":287,"props":912,"children":913},{"class":300},[914],{"type":24,"value":351},{"type":18,"tag":287,"props":916,"children":917},{"class":354},[918],{"type":24,"value":611},{"type":18,"tag":287,"props":920,"children":921},{"class":300},[922],{"type":24,"value":781},{"type":18,"tag":287,"props":924,"children":925},{"class":294},[926],{"type":24,"value":601},{"type":18,"tag":287,"props":928,"children":929},{"class":300},[930],{"type":24,"value":931}," k2[",{"type":18,"tag":287,"props":933,"children":934},{"class":354},[935],{"type":24,"value":591},{"type":18,"tag":287,"props":937,"children":938},{"class":300},[939],{"type":24,"value":799},{"type":18,"tag":287,"props":941,"children":942},{"class":294},[943],{"type":24,"value":758},{"type":18,"tag":287,"props":945,"children":946},{"class":300},[947],{"type":24,"value":763},{"type":18,"tag":287,"props":949,"children":950},{"class":294},[951],{"type":24,"value":768},{"type":18,"tag":287,"props":953,"children":954},{"class":300},[955],{"type":24,"value":351},{"type":18,"tag":287,"props":957,"children":958},{"class":354},[959],{"type":24,"value":611},{"type":18,"tag":287,"props":961,"children":962},{"class":300},[963],{"type":24,"value":781},{"type":18,"tag":287,"props":965,"children":966},{"class":294},[967],{"type":24,"value":601},{"type":18,"tag":287,"props":969,"children":970},{"class":300},[971],{"type":24,"value":931},{"type":18,"tag":287,"props":973,"children":974},{"class":354},[975],{"type":24,"value":662},{"type":18,"tag":287,"props":977,"children":978},{"class":300},[979],{"type":24,"value":840},{"type":18,"tag":287,"props":981,"children":982},{"class":294},[983],{"type":24,"value":758},{"type":18,"tag":287,"props":985,"children":986},{"class":300},[987],{"type":24,"value":763},{"type":18,"tag":287,"props":989,"children":990},{"class":294},[991],{"type":24,"value":768},{"type":18,"tag":287,"props":993,"children":994},{"class":300},[995],{"type":24,"value":351},{"type":18,"tag":287,"props":997,"children":998},{"class":354},[999],{"type":24,"value":611},{"type":18,"tag":287,"props":1001,"children":1002},{"class":300},[1003],{"type":24,"value":781},{"type":18,"tag":287,"props":1005,"children":1006},{"class":294},[1007],{"type":24,"value":601},{"type":18,"tag":287,"props":1009,"children":1010},{"class":300},[1011],{"type":24,"value":931},{"type":18,"tag":287,"props":1013,"children":1014},{"class":354},[1015],{"type":24,"value":611},{"type":18,"tag":287,"props":1017,"children":1018},{"class":300},[1019],{"type":24,"value":881},{"type":18,"tag":287,"props":1021,"children":1023},{"class":289,"line":1022},26,[1024,1029,1033,1037,1041,1046,1050,1055,1059,1063,1067,1071,1075,1079,1083,1087,1091,1095,1099,1103,1107],{"type":18,"tag":287,"props":1025,"children":1026},{"class":300},[1027],{"type":24,"value":1028},"    k4 ",{"type":18,"tag":287,"props":1030,"children":1031},{"class":294},[1032],{"type":24,"value":346},{"type":18,"tag":287,"props":1034,"children":1035},{"class":300},[1036],{"type":24,"value":753},{"type":18,"tag":287,"props":1038,"children":1039},{"class":294},[1040],{"type":24,"value":758},{"type":18,"tag":287,"props":1042,"children":1043},{"class":300},[1044],{"type":24,"value":1045}," dt ",{"type":18,"tag":287,"props":1047,"children":1048},{"class":294},[1049],{"type":24,"value":601},{"type":18,"tag":287,"props":1051,"children":1052},{"class":300},[1053],{"type":24,"value":1054}," k3[",{"type":18,"tag":287,"props":1056,"children":1057},{"class":354},[1058],{"type":24,"value":591},{"type":18,"tag":287,"props":1060,"children":1061},{"class":300},[1062],{"type":24,"value":799},{"type":18,"tag":287,"props":1064,"children":1065},{"class":294},[1066],{"type":24,"value":758},{"type":18,"tag":287,"props":1068,"children":1069},{"class":300},[1070],{"type":24,"value":1045},{"type":18,"tag":287,"props":1072,"children":1073},{"class":294},[1074],{"type":24,"value":601},{"type":18,"tag":287,"props":1076,"children":1077},{"class":300},[1078],{"type":24,"value":1054},{"type":18,"tag":287,"props":1080,"children":1081},{"class":354},[1082],{"type":24,"value":662},{"type":18,"tag":287,"props":1084,"children":1085},{"class":300},[1086],{"type":24,"value":840},{"type":18,"tag":287,"props":1088,"children":1089},{"class":294},[1090],{"type":24,"value":758},{"type":18,"tag":287,"props":1092,"children":1093},{"class":300},[1094],{"type":24,"value":1045},{"type":18,"tag":287,"props":1096,"children":1097},{"class":294},[1098],{"type":24,"value":601},{"type":18,"tag":287,"props":1100,"children":1101},{"class":300},[1102],{"type":24,"value":1054},{"type":18,"tag":287,"props":1104,"children":1105},{"class":354},[1106],{"type":24,"value":611},{"type":18,"tag":287,"props":1108,"children":1109},{"class":300},[1110],{"type":24,"value":881},{"type":18,"tag":287,"props":1112,"children":1114},{"class":289,"line":1113},27,[1115],{"type":18,"tag":287,"props":1116,"children":1117},{},[1118],{"type":24,"value":322},{"type":18,"tag":287,"props":1120,"children":1122},{"class":289,"line":1121},28,[1123,1128],{"type":18,"tag":287,"props":1124,"children":1125},{"class":300},[1126],{"type":24,"value":1127},"    ",{"type":18,"tag":287,"props":1129,"children":1130},{"class":329},[1131],{"type":24,"value":1132},"# Update state of the robot\n",{"type":18,"tag":287,"props":1134,"children":1136},{"class":289,"line":1135},29,[1137,1142,1147,1152,1156,1161,1165,1169,1173,1177,1181,1185,1189,1193,1197,1201,1205,1209,1213,1217,1221,1225,1229,1234,1238,1243,1247,1251,1255,1259],{"type":18,"tag":287,"props":1138,"children":1139},{"class":300},[1140],{"type":24,"value":1141},"    x ",{"type":18,"tag":287,"props":1143,"children":1144},{"class":294},[1145],{"type":24,"value":1146},"+=",{"type":18,"tag":287,"props":1148,"children":1149},{"class":300},[1150],{"type":24,"value":1151}," (k1[",{"type":18,"tag":287,"props":1153,"children":1154},{"class":354},[1155],{"type":24,"value":591},{"type":18,"tag":287,"props":1157,"children":1158},{"class":300},[1159],{"type":24,"value":1160},"] ",{"type":18,"tag":287,"props":1162,"children":1163},{"class":294},[1164],{"type":24,"value":758},{"type":18,"tag":287,"props":1166,"children":1167},{"class":300},[1168],{"type":24,"value":351},{"type":18,"tag":287,"props":1170,"children":1171},{"class":354},[1172],{"type":24,"value":611},{"type":18,"tag":287,"props":1174,"children":1175},{"class":300},[1176],{"type":24,"value":351},{"type":18,"tag":287,"props":1178,"children":1179},{"class":294},[1180],{"type":24,"value":601},{"type":18,"tag":287,"props":1182,"children":1183},{"class":300},[1184],{"type":24,"value":931},{"type":18,"tag":287,"props":1186,"children":1187},{"class":354},[1188],{"type":24,"value":591},{"type":18,"tag":287,"props":1190,"children":1191},{"class":300},[1192],{"type":24,"value":1160},{"type":18,"tag":287,"props":1194,"children":1195},{"class":294},[1196],{"type":24,"value":758},{"type":18,"tag":287,"props":1198,"children":1199},{"class":300},[1200],{"type":24,"value":351},{"type":18,"tag":287,"props":1202,"children":1203},{"class":354},[1204],{"type":24,"value":611},{"type":18,"tag":287,"props":1206,"children":1207},{"class":300},[1208],{"type":24,"value":351},{"type":18,"tag":287,"props":1210,"children":1211},{"class":294},[1212],{"type":24,"value":601},{"type":18,"tag":287,"props":1214,"children":1215},{"class":300},[1216],{"type":24,"value":1054},{"type":18,"tag":287,"props":1218,"children":1219},{"class":354},[1220],{"type":24,"value":591},{"type":18,"tag":287,"props":1222,"children":1223},{"class":300},[1224],{"type":24,"value":1160},{"type":18,"tag":287,"props":1226,"children":1227},{"class":294},[1228],{"type":24,"value":758},{"type":18,"tag":287,"props":1230,"children":1231},{"class":300},[1232],{"type":24,"value":1233}," k4[",{"type":18,"tag":287,"props":1235,"children":1236},{"class":354},[1237],{"type":24,"value":591},{"type":18,"tag":287,"props":1239,"children":1240},{"class":300},[1241],{"type":24,"value":1242},"]) ",{"type":18,"tag":287,"props":1244,"children":1245},{"class":294},[1246],{"type":24,"value":601},{"type":18,"tag":287,"props":1248,"children":1249},{"class":300},[1250],{"type":24,"value":1045},{"type":18,"tag":287,"props":1252,"children":1253},{"class":294},[1254],{"type":24,"value":768},{"type":18,"tag":287,"props":1256,"children":1257},{"class":300},[1258],{"type":24,"value":351},{"type":18,"tag":287,"props":1260,"children":1261},{"class":354},[1262],{"type":24,"value":1263},"6\n",{"type":18,"tag":287,"props":1265,"children":1267},{"class":289,"line":1266},30,[1268,1273,1277,1281,1285,1289,1293,1297,1301,1305,1309,1313,1317,1321,1325,1329,1333,1337,1341,1345,1349,1353,1357,1361,1365,1369,1373,1377,1381,1385],{"type":18,"tag":287,"props":1269,"children":1270},{"class":300},[1271],{"type":24,"value":1272},"    y ",{"type":18,"tag":287,"props":1274,"children":1275},{"class":294},[1276],{"type":24,"value":1146},{"type":18,"tag":287,"props":1278,"children":1279},{"class":300},[1280],{"type":24,"value":1151},{"type":18,"tag":287,"props":1282,"children":1283},{"class":354},[1284],{"type":24,"value":662},{"type":18,"tag":287,"props":1286,"children":1287},{"class":300},[1288],{"type":24,"value":1160},{"type":18,"tag":287,"props":1290,"children":1291},{"class":294},[1292],{"type":24,"value":758},{"type":18,"tag":287,"props":1294,"children":1295},{"class":300},[1296],{"type":24,"value":351},{"type":18,"tag":287,"props":1298,"children":1299},{"class":354},[1300],{"type":24,"value":611},{"type":18,"tag":287,"props":1302,"children":1303},{"class":300},[1304],{"type":24,"value":351},{"type":18,"tag":287,"props":1306,"children":1307},{"class":294},[1308],{"type":24,"value":601},{"type":18,"tag":287,"props":1310,"children":1311},{"class":300},[1312],{"type":24,"value":931},{"type":18,"tag":287,"props":1314,"children":1315},{"class":354},[1316],{"type":24,"value":662},{"type":18,"tag":287,"props":1318,"children":1319},{"class":300},[1320],{"type":24,"value":1160},{"type":18,"tag":287,"props":1322,"children":1323},{"class":294},[1324],{"type":24,"value":758},{"type":18,"tag":287,"props":1326,"children":1327},{"class":300},[1328],{"type":24,"value":351},{"type":18,"tag":287,"props":1330,"children":1331},{"class":354},[1332],{"type":24,"value":611},{"type":18,"tag":287,"props":1334,"children":1335},{"class":300},[1336],{"type":24,"value":351},{"type":18,"tag":287,"props":1338,"children":1339},{"class":294},[1340],{"type":24,"value":601},{"type":18,"tag":287,"props":1342,"children":1343},{"class":300},[1344],{"type":24,"value":1054},{"type":18,"tag":287,"props":1346,"children":1347},{"class":354},[1348],{"type":24,"value":662},{"type":18,"tag":287,"props":1350,"children":1351},{"class":300},[1352],{"type":24,"value":1160},{"type":18,"tag":287,"props":1354,"children":1355},{"class":294},[1356],{"type":24,"value":758},{"type":18,"tag":287,"props":1358,"children":1359},{"class":300},[1360],{"type":24,"value":1233},{"type":18,"tag":287,"props":1362,"children":1363},{"class":354},[1364],{"type":24,"value":662},{"type":18,"tag":287,"props":1366,"children":1367},{"class":300},[1368],{"type":24,"value":1242},{"type":18,"tag":287,"props":1370,"children":1371},{"class":294},[1372],{"type":24,"value":601},{"type":18,"tag":287,"props":1374,"children":1375},{"class":300},[1376],{"type":24,"value":1045},{"type":18,"tag":287,"props":1378,"children":1379},{"class":294},[1380],{"type":24,"value":768},{"type":18,"tag":287,"props":1382,"children":1383},{"class":300},[1384],{"type":24,"value":351},{"type":18,"tag":287,"props":1386,"children":1387},{"class":354},[1388],{"type":24,"value":1263},{"type":18,"tag":287,"props":1390,"children":1392},{"class":289,"line":1391},31,[1393,1398,1402,1406,1410,1414,1418,1422,1426,1430,1434,1438,1442,1446,1450,1454,1458,1462,1466,1470,1474,1478,1482,1486,1490,1494,1498,1502,1506,1510],{"type":18,"tag":287,"props":1394,"children":1395},{"class":300},[1396],{"type":24,"value":1397},"    yaw ",{"type":18,"tag":287,"props":1399,"children":1400},{"class":294},[1401],{"type":24,"value":1146},{"type":18,"tag":287,"props":1403,"children":1404},{"class":300},[1405],{"type":24,"value":1151},{"type":18,"tag":287,"props":1407,"children":1408},{"class":354},[1409],{"type":24,"value":611},{"type":18,"tag":287,"props":1411,"children":1412},{"class":300},[1413],{"type":24,"value":1160},{"type":18,"tag":287,"props":1415,"children":1416},{"class":294},[1417],{"type":24,"value":758},{"type":18,"tag":287,"props":1419,"children":1420},{"class":300},[1421],{"type":24,"value":351},{"type":18,"tag":287,"props":1423,"children":1424},{"class":354},[1425],{"type":24,"value":611},{"type":18,"tag":287,"props":1427,"children":1428},{"class":300},[1429],{"type":24,"value":351},{"type":18,"tag":287,"props":1431,"children":1432},{"class":294},[1433],{"type":24,"value":601},{"type":18,"tag":287,"props":1435,"children":1436},{"class":300},[1437],{"type":24,"value":931},{"type":18,"tag":287,"props":1439,"children":1440},{"class":354},[1441],{"type":24,"value":611},{"type":18,"tag":287,"props":1443,"children":1444},{"class":300},[1445],{"type":24,"value":1160},{"type":18,"tag":287,"props":1447,"children":1448},{"class":294},[1449],{"type":24,"value":758},{"type":18,"tag":287,"props":1451,"children":1452},{"class":300},[1453],{"type":24,"value":351},{"type":18,"tag":287,"props":1455,"children":1456},{"class":354},[1457],{"type":24,"value":611},{"type":18,"tag":287,"props":1459,"children":1460},{"class":300},[1461],{"type":24,"value":351},{"type":18,"tag":287,"props":1463,"children":1464},{"class":294},[1465],{"type":24,"value":601},{"type":18,"tag":287,"props":1467,"children":1468},{"class":300},[1469],{"type":24,"value":1054},{"type":18,"tag":287,"props":1471,"children":1472},{"class":354},[1473],{"type":24,"value":611},{"type":18,"tag":287,"props":1475,"children":1476},{"class":300},[1477],{"type":24,"value":1160},{"type":18,"tag":287,"props":1479,"children":1480},{"class":294},[1481],{"type":24,"value":758},{"type":18,"tag":287,"props":1483,"children":1484},{"class":300},[1485],{"type":24,"value":1233},{"type":18,"tag":287,"props":1487,"children":1488},{"class":354},[1489],{"type":24,"value":611},{"type":18,"tag":287,"props":1491,"children":1492},{"class":300},[1493],{"type":24,"value":1242},{"type":18,"tag":287,"props":1495,"children":1496},{"class":294},[1497],{"type":24,"value":601},{"type":18,"tag":287,"props":1499,"children":1500},{"class":300},[1501],{"type":24,"value":1045},{"type":18,"tag":287,"props":1503,"children":1504},{"class":294},[1505],{"type":24,"value":768},{"type":18,"tag":287,"props":1507,"children":1508},{"class":300},[1509],{"type":24,"value":351},{"type":18,"tag":287,"props":1511,"children":1512},{"class":354},[1513],{"type":24,"value":1514},"6",{"type":18,"tag":19,"props":1516,"children":1518},{"id":1517},"single-shooting-method",[1519],{"type":24,"value":1520},"Single Shooting Method",{"type":18,"tag":27,"props":1522,"children":1523},{},[1524],{"type":24,"value":1525},"Single Shooting Method is a method that we transform the optimal control problem to the nonlinear programming problem with just one decision variable.",{"type":18,"tag":92,"props":1527,"children":1529},{"latex-express":1528,"styles":59},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":1531,"children":1532},{},[1533,1535,1539,1541],{"type":24,"value":1534},"Get ",{"type":18,"tag":119,"props":1536,"children":1538},{"latex-express":1537,"styles":122},"x_{u}",[],{"type":24,"value":1540}," as a function of ",{"type":18,"tag":119,"props":1542,"children":1544},{"latex-express":1543,"styles":122},"w, x, t_{k}",[],{"type":18,"tag":92,"props":1546,"children":1548},{"latex-express":1547,"styles":59},"\n      \\begin{align*}\n            x_{u} &= F(w,x_{0},t_{k}) \\\\\n            F(w,x_{0},t_{0}) &= x_{0} \\\\\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":1550,"children":1551},{},[1552],{"type":24,"value":1553},"Then solve the NLP",{"type":18,"tag":92,"props":1555,"children":1557},{"latex-express":1556,"styles":59},"\n      \\begin{align*}\n            \\min_{w}\\Phi(F(w,x_{0},t_{k}), w) \\\\ \n            \\text{Subject to} \\hspace{1cm}  g_{1}(F(w,x_{0},t_{k}),w) \\leq{0}\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1559,"children":1561},{"id":1560},"multiple-shooting",[1562],{"type":24,"value":1563},"Multiple Shooting",{"type":18,"tag":27,"props":1565,"children":1566},{},[1567],{"type":24,"value":1568},"Multiple Shooting Method is a method that consist of transforming of optimal control problem to the nonlinear programming problem with multiple decision variables.",{"type":18,"tag":92,"props":1570,"children":1572},{"latex-express":1571,"styles":59},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}, x_{0}, ..., x_{N}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":111,"props":1574,"children":1575},{},[1576,1581],{"type":18,"tag":115,"props":1577,"children":1578},{},[1579],{"type":24,"value":1580},"X becoming decision variable in the opimization problem as well as u",{"type":18,"tag":115,"props":1582,"children":1583},{},[1584],{"type":24,"value":1585},"We apply path constraint at each iteration step",{"type":18,"tag":92,"props":1587,"children":1589},{"latex-express":1588,"styles":59},"\n      \\begin{equation*}\n                x_{k+1}-f(x_{k},u_{k}) = 0\n            \\end{equation*}\n",[],{"type":18,"tag":27,"props":1591,"children":1592},{},[1593],{"type":24,"value":1553},{"type":18,"tag":92,"props":1595,"children":1597},{"latex-express":1596,"styles":59},"\n      \\begin{align*}\n            \\min_{w}  \\Phi(F(w,x_{0},t_{k}),& w) \\\\ \n            \\text{s.t}\\hspace{0.5cm}  g_{1}(F(w,x_{0},t_{k}),w) &\\leq{0} \\\\ \n                               g_{2}(w) = \\begin{bmatrix}\n                                  \\bar{x}_{0}-x_{0} \\\\\n                                  f(x_{0},u_{0})-x_{1} \\\\ \n                                  \\vdots \\\\\n                                  f(x_{N-1}, u_{N-1}-x_{N})\n                              \\end{bmatrix} &= 0\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1599,"children":1601},{"id":1600},"implement-in-python",[1602],{"type":24,"value":1603},"Implement in Python",{"type":18,"tag":27,"props":1605,"children":1606},{},[1607,1609,1615],{"type":24,"value":1608},"We will use ",{"type":18,"tag":1610,"props":1611,"children":1612},"code-inline",{},[1613],{"type":24,"value":1614},"Casadi",{"type":24,"value":1616}," as a numerical optimization framework.",{"type":18,"tag":272,"props":1618,"children":1621},{"className":1619,"code":1620,"language":277,"meta":8},[275],"import casadi as ca\n",[1622],{"type":18,"tag":280,"props":1623,"children":1624},{},[1625],{"type":18,"tag":272,"props":1626,"children":1627},{"__ignoreMap":8},[1628],{"type":18,"tag":287,"props":1629,"children":1630},{"class":289,"line":290},[1631,1635,1640,1644],{"type":18,"tag":287,"props":1632,"children":1633},{"class":294},[1634],{"type":24,"value":297},{"type":18,"tag":287,"props":1636,"children":1637},{"class":300},[1638],{"type":24,"value":1639}," casadi ",{"type":18,"tag":287,"props":1641,"children":1642},{"class":294},[1643],{"type":24,"value":308},{"type":18,"tag":287,"props":1645,"children":1646},{"class":300},[1647],{"type":24,"value":1648}," ca",{"type":18,"tag":27,"props":1650,"children":1651},{},[1652],{"type":24,"value":1653},"Define state representation and input control of our nonlinear model.",{"type":18,"tag":272,"props":1655,"children":1658},{"className":1656,"code":1657,"language":277,"meta":8},[275],"# Symbolic Variables\n## States\nx = ca.SX.sym(\"x\")\ny = ca.SX.sym(\"y\")\ntheta = ca.SX.sym(\"theta\")\nstates = ca.vertcat(x, y, theta)\nnum_states = states.numel()\n\n## Control\nu1 = ca.SX.sym(\"u1\")\nu2 = ca.SX.sym(\"u2\")\ncontrols = ca.vertcat(u1, u2)\nnum_controls = controls.numel()\n\n# Define Nonlinear model\n## Rotation Matrix\nrot_mat = ca.vertcat(\n    ca.horzcat(ca.cos(theta), ca.sin(theta), 0),\n    ca.horzcat(-ca.sin(theta), ca.cos(theta), 0),\n    ca.horzcat(0, 0, 1)\n)\n\nvx = u1 * ca.cos(theta)\nvy = u1 * ca.sin(theta)\nvyaw = u2\n\nrhs = ca.vertcat(vx, vy, vyaw)\n## Define mapped nonlinear function f(x,u) -> rhs\nf = ca.Function('f', [states, controls], [rhs])\n",[1659],{"type":18,"tag":280,"props":1660,"children":1661},{},[1662],{"type":18,"tag":272,"props":1663,"children":1664},{"__ignoreMap":8},[1665,1673,1681,1718,1750,1783,1800,1817,1824,1832,1865,1898,1915,1932,1939,1947,1955,1972,1989,2015,2047,2054,2061,2087,2112,2129,2136,2153,2161],{"type":18,"tag":287,"props":1666,"children":1667},{"class":289,"line":290},[1668],{"type":18,"tag":287,"props":1669,"children":1670},{"class":329},[1671],{"type":24,"value":1672},"# Symbolic Variables\n",{"type":18,"tag":287,"props":1674,"children":1675},{"class":289,"line":316},[1676],{"type":18,"tag":287,"props":1677,"children":1678},{"class":329},[1679],{"type":24,"value":1680},"## States\n",{"type":18,"tag":287,"props":1682,"children":1683},{"class":289,"line":325},[1684,1688,1692,1697,1702,1707,1713],{"type":18,"tag":287,"props":1685,"children":1686},{"class":300},[1687],{"type":24,"value":406},{"type":18,"tag":287,"props":1689,"children":1690},{"class":294},[1691],{"type":24,"value":346},{"type":18,"tag":287,"props":1693,"children":1694},{"class":300},[1695],{"type":24,"value":1696}," ca.",{"type":18,"tag":287,"props":1698,"children":1699},{"class":354},[1700],{"type":24,"value":1701},"SX",{"type":18,"tag":287,"props":1703,"children":1704},{"class":300},[1705],{"type":24,"value":1706},".sym(",{"type":18,"tag":287,"props":1708,"children":1710},{"class":1709},"ct-244866",[1711],{"type":24,"value":1712},"\"x\"",{"type":18,"tag":287,"props":1714,"children":1715},{"class":300},[1716],{"type":24,"value":1717},")\n",{"type":18,"tag":287,"props":1719,"children":1720},{"class":289,"line":335},[1721,1725,1729,1733,1737,1741,1746],{"type":18,"tag":287,"props":1722,"children":1723},{"class":300},[1724],{"type":24,"value":428},{"type":18,"tag":287,"props":1726,"children":1727},{"class":294},[1728],{"type":24,"value":346},{"type":18,"tag":287,"props":1730,"children":1731},{"class":300},[1732],{"type":24,"value":1696},{"type":18,"tag":287,"props":1734,"children":1735},{"class":354},[1736],{"type":24,"value":1701},{"type":18,"tag":287,"props":1738,"children":1739},{"class":300},[1740],{"type":24,"value":1706},{"type":18,"tag":287,"props":1742,"children":1743},{"class":1709},[1744],{"type":24,"value":1745},"\"y\"",{"type":18,"tag":287,"props":1747,"children":1748},{"class":300},[1749],{"type":24,"value":1717},{"type":18,"tag":287,"props":1751,"children":1752},{"class":289,"line":360},[1753,1758,1762,1766,1770,1774,1779],{"type":18,"tag":287,"props":1754,"children":1755},{"class":300},[1756],{"type":24,"value":1757},"theta ",{"type":18,"tag":287,"props":1759,"children":1760},{"class":294},[1761],{"type":24,"value":346},{"type":18,"tag":287,"props":1763,"children":1764},{"class":300},[1765],{"type":24,"value":1696},{"type":18,"tag":287,"props":1767,"children":1768},{"class":354},[1769],{"type":24,"value":1701},{"type":18,"tag":287,"props":1771,"children":1772},{"class":300},[1773],{"type":24,"value":1706},{"type":18,"tag":287,"props":1775,"children":1776},{"class":1709},[1777],{"type":24,"value":1778},"\"theta\"",{"type":18,"tag":287,"props":1780,"children":1781},{"class":300},[1782],{"type":24,"value":1717},{"type":18,"tag":287,"props":1784,"children":1785},{"class":289,"line":369},[1786,1791,1795],{"type":18,"tag":287,"props":1787,"children":1788},{"class":300},[1789],{"type":24,"value":1790},"states ",{"type":18,"tag":287,"props":1792,"children":1793},{"class":294},[1794],{"type":24,"value":346},{"type":18,"tag":287,"props":1796,"children":1797},{"class":300},[1798],{"type":24,"value":1799}," ca.vertcat(x, y, theta)\n",{"type":18,"tag":287,"props":1801,"children":1802},{"class":289,"line":391},[1803,1808,1812],{"type":18,"tag":287,"props":1804,"children":1805},{"class":300},[1806],{"type":24,"value":1807},"num_states ",{"type":18,"tag":287,"props":1809,"children":1810},{"class":294},[1811],{"type":24,"value":346},{"type":18,"tag":287,"props":1813,"children":1814},{"class":300},[1815],{"type":24,"value":1816}," states.numel()\n",{"type":18,"tag":287,"props":1818,"children":1819},{"class":289,"line":400},[1820],{"type":18,"tag":287,"props":1821,"children":1822},{},[1823],{"type":24,"value":322},{"type":18,"tag":287,"props":1825,"children":1826},{"class":289,"line":422},[1827],{"type":18,"tag":287,"props":1828,"children":1829},{"class":329},[1830],{"type":24,"value":1831},"## Control\n",{"type":18,"tag":287,"props":1833,"children":1834},{"class":289,"line":443},[1835,1840,1844,1848,1852,1856,1861],{"type":18,"tag":287,"props":1836,"children":1837},{"class":300},[1838],{"type":24,"value":1839},"u1 ",{"type":18,"tag":287,"props":1841,"children":1842},{"class":294},[1843],{"type":24,"value":346},{"type":18,"tag":287,"props":1845,"children":1846},{"class":300},[1847],{"type":24,"value":1696},{"type":18,"tag":287,"props":1849,"children":1850},{"class":354},[1851],{"type":24,"value":1701},{"type":18,"tag":287,"props":1853,"children":1854},{"class":300},[1855],{"type":24,"value":1706},{"type":18,"tag":287,"props":1857,"children":1858},{"class":1709},[1859],{"type":24,"value":1860},"\"u1\"",{"type":18,"tag":287,"props":1862,"children":1863},{"class":300},[1864],{"type":24,"value":1717},{"type":18,"tag":287,"props":1866,"children":1867},{"class":289,"line":464},[1868,1873,1877,1881,1885,1889,1894],{"type":18,"tag":287,"props":1869,"children":1870},{"class":300},[1871],{"type":24,"value":1872},"u2 ",{"type":18,"tag":287,"props":1874,"children":1875},{"class":294},[1876],{"type":24,"value":346},{"type":18,"tag":287,"props":1878,"children":1879},{"class":300},[1880],{"type":24,"value":1696},{"type":18,"tag":287,"props":1882,"children":1883},{"class":354},[1884],{"type":24,"value":1701},{"type":18,"tag":287,"props":1886,"children":1887},{"class":300},[1888],{"type":24,"value":1706},{"type":18,"tag":287,"props":1890,"children":1891},{"class":1709},[1892],{"type":24,"value":1893},"\"u2\"",{"type":18,"tag":287,"props":1895,"children":1896},{"class":300},[1897],{"type":24,"value":1717},{"type":18,"tag":287,"props":1899,"children":1900},{"class":289,"line":473},[1901,1906,1910],{"type":18,"tag":287,"props":1902,"children":1903},{"class":300},[1904],{"type":24,"value":1905},"controls ",{"type":18,"tag":287,"props":1907,"children":1908},{"class":294},[1909],{"type":24,"value":346},{"type":18,"tag":287,"props":1911,"children":1912},{"class":300},[1913],{"type":24,"value":1914}," ca.vertcat(u1, u2)\n",{"type":18,"tag":287,"props":1916,"children":1917},{"class":289,"line":504},[1918,1923,1927],{"type":18,"tag":287,"props":1919,"children":1920},{"class":300},[1921],{"type":24,"value":1922},"num_controls ",{"type":18,"tag":287,"props":1924,"children":1925},{"class":294},[1926],{"type":24,"value":346},{"type":18,"tag":287,"props":1928,"children":1929},{"class":300},[1930],{"type":24,"value":1931}," controls.numel()\n",{"type":18,"tag":287,"props":1933,"children":1934},{"class":289,"line":535},[1935],{"type":18,"tag":287,"props":1936,"children":1937},{},[1938],{"type":24,"value":322},{"type":18,"tag":287,"props":1940,"children":1941},{"class":289,"line":544},[1942],{"type":18,"tag":287,"props":1943,"children":1944},{"class":329},[1945],{"type":24,"value":1946},"# Define Nonlinear model\n",{"type":18,"tag":287,"props":1948,"children":1949},{"class":289,"line":553},[1950],{"type":18,"tag":287,"props":1951,"children":1952},{"class":329},[1953],{"type":24,"value":1954},"## Rotation Matrix\n",{"type":18,"tag":287,"props":1956,"children":1957},{"class":289,"line":580},[1958,1963,1967],{"type":18,"tag":287,"props":1959,"children":1960},{"class":300},[1961],{"type":24,"value":1962},"rot_mat ",{"type":18,"tag":287,"props":1964,"children":1965},{"class":294},[1966],{"type":24,"value":346},{"type":18,"tag":287,"props":1968,"children":1969},{"class":300},[1970],{"type":24,"value":1971}," ca.vertcat(\n",{"type":18,"tag":287,"props":1973,"children":1974},{"class":289,"line":619},[1975,1980,1984],{"type":18,"tag":287,"props":1976,"children":1977},{"class":300},[1978],{"type":24,"value":1979},"    ca.horzcat(ca.cos(theta), ca.sin(theta), ",{"type":18,"tag":287,"props":1981,"children":1982},{"class":354},[1983],{"type":24,"value":591},{"type":18,"tag":287,"props":1985,"children":1986},{"class":300},[1987],{"type":24,"value":1988},"),\n",{"type":18,"tag":287,"props":1990,"children":1991},{"class":289,"line":652},[1992,1997,2002,2007,2011],{"type":18,"tag":287,"props":1993,"children":1994},{"class":300},[1995],{"type":24,"value":1996},"    ca.horzcat(",{"type":18,"tag":287,"props":1998,"children":1999},{"class":294},[2000],{"type":24,"value":2001},"-",{"type":18,"tag":287,"props":2003,"children":2004},{"class":300},[2005],{"type":24,"value":2006},"ca.sin(theta), ca.cos(theta), ",{"type":18,"tag":287,"props":2008,"children":2009},{"class":354},[2010],{"type":24,"value":591},{"type":18,"tag":287,"props":2012,"children":2013},{"class":300},[2014],{"type":24,"value":1988},{"type":18,"tag":287,"props":2016,"children":2017},{"class":289,"line":670},[2018,2022,2026,2031,2035,2039,2043],{"type":18,"tag":287,"props":2019,"children":2020},{"class":300},[2021],{"type":24,"value":1996},{"type":18,"tag":287,"props":2023,"children":2024},{"class":354},[2025],{"type":24,"value":591},{"type":18,"tag":287,"props":2027,"children":2028},{"class":300},[2029],{"type":24,"value":2030},", ",{"type":18,"tag":287,"props":2032,"children":2033},{"class":354},[2034],{"type":24,"value":591},{"type":18,"tag":287,"props":2036,"children":2037},{"class":300},[2038],{"type":24,"value":2030},{"type":18,"tag":287,"props":2040,"children":2041},{"class":354},[2042],{"type":24,"value":662},{"type":18,"tag":287,"props":2044,"children":2045},{"class":300},[2046],{"type":24,"value":1717},{"type":18,"tag":287,"props":2048,"children":2049},{"class":289,"line":679},[2050],{"type":18,"tag":287,"props":2051,"children":2052},{"class":300},[2053],{"type":24,"value":1717},{"type":18,"tag":287,"props":2055,"children":2056},{"class":289,"line":687},[2057],{"type":18,"tag":287,"props":2058,"children":2059},{},[2060],{"type":24,"value":322},{"type":18,"tag":287,"props":2062,"children":2063},{"class":289,"line":720},[2064,2069,2073,2078,2082],{"type":18,"tag":287,"props":2065,"children":2066},{"class":300},[2067],{"type":24,"value":2068},"vx ",{"type":18,"tag":287,"props":2070,"children":2071},{"class":294},[2072],{"type":24,"value":346},{"type":18,"tag":287,"props":2074,"children":2075},{"class":300},[2076],{"type":24,"value":2077}," u1 ",{"type":18,"tag":287,"props":2079,"children":2080},{"class":294},[2081],{"type":24,"value":601},{"type":18,"tag":287,"props":2083,"children":2084},{"class":300},[2085],{"type":24,"value":2086}," ca.cos(theta)\n",{"type":18,"tag":287,"props":2088,"children":2089},{"class":289,"line":738},[2090,2095,2099,2103,2107],{"type":18,"tag":287,"props":2091,"children":2092},{"class":300},[2093],{"type":24,"value":2094},"vy ",{"type":18,"tag":287,"props":2096,"children":2097},{"class":294},[2098],{"type":24,"value":346},{"type":18,"tag":287,"props":2100,"children":2101},{"class":300},[2102],{"type":24,"value":2077},{"type":18,"tag":287,"props":2104,"children":2105},{"class":294},[2106],{"type":24,"value":601},{"type":18,"tag":287,"props":2108,"children":2109},{"class":300},[2110],{"type":24,"value":2111}," ca.sin(theta)\n",{"type":18,"tag":287,"props":2113,"children":2114},{"class":289,"line":884},[2115,2120,2124],{"type":18,"tag":287,"props":2116,"children":2117},{"class":300},[2118],{"type":24,"value":2119},"vyaw ",{"type":18,"tag":287,"props":2121,"children":2122},{"class":294},[2123],{"type":24,"value":346},{"type":18,"tag":287,"props":2125,"children":2126},{"class":300},[2127],{"type":24,"value":2128}," u2\n",{"type":18,"tag":287,"props":2130,"children":2131},{"class":289,"line":1022},[2132],{"type":18,"tag":287,"props":2133,"children":2134},{},[2135],{"type":24,"value":322},{"type":18,"tag":287,"props":2137,"children":2138},{"class":289,"line":1113},[2139,2144,2148],{"type":18,"tag":287,"props":2140,"children":2141},{"class":300},[2142],{"type":24,"value":2143},"rhs ",{"type":18,"tag":287,"props":2145,"children":2146},{"class":294},[2147],{"type":24,"value":346},{"type":18,"tag":287,"props":2149,"children":2150},{"class":300},[2151],{"type":24,"value":2152}," ca.vertcat(vx, vy, vyaw)\n",{"type":18,"tag":287,"props":2154,"children":2155},{"class":289,"line":1121},[2156],{"type":18,"tag":287,"props":2157,"children":2158},{"class":329},[2159],{"type":24,"value":2160},"## Define mapped nonlinear function f(x,u) -> rhs\n",{"type":18,"tag":287,"props":2162,"children":2163},{"class":289,"line":1135},[2164,2168,2172,2177,2182],{"type":18,"tag":287,"props":2165,"children":2166},{"class":300},[2167],{"type":24,"value":559},{"type":18,"tag":287,"props":2169,"children":2170},{"class":294},[2171],{"type":24,"value":346},{"type":18,"tag":287,"props":2173,"children":2174},{"class":300},[2175],{"type":24,"value":2176}," ca.Function(",{"type":18,"tag":287,"props":2178,"children":2179},{"class":1709},[2180],{"type":24,"value":2181},"'f'",{"type":18,"tag":287,"props":2183,"children":2184},{"class":300},[2185],{"type":24,"value":2186},", [states, controls], [rhs])",{"type":18,"tag":27,"props":2188,"children":2189},{},[2190],{"type":24,"value":2191},"Declare symbolic matrix",{"type":18,"tag":272,"props":2193,"children":2196},{"className":2194,"code":2195,"language":277,"meta":8},[275],"X = ca.SX.sym('X', num_states, prediction_horizons + 1)\nX_ref = ca.SX.sym('X_ref', num_states, prediction_horizons + 1)\nU = ca.SX.sym('U', num_controls, prediction_horizons)\nU_ref = ca.SX.sym('U_ref', num_controls, prediction_horizons)\n",[2197],{"type":18,"tag":280,"props":2198,"children":2199},{},[2200],{"type":18,"tag":272,"props":2201,"children":2202},{"__ignoreMap":8},[2203,2253,2302,2336],{"type":18,"tag":287,"props":2204,"children":2205},{"class":289,"line":290},[2206,2211,2215,2219,2223,2227,2232,2237,2241,2245,2249],{"type":18,"tag":287,"props":2207,"children":2208},{"class":300},[2209],{"type":24,"value":2210},"X ",{"type":18,"tag":287,"props":2212,"children":2213},{"class":294},[2214],{"type":24,"value":346},{"type":18,"tag":287,"props":2216,"children":2217},{"class":300},[2218],{"type":24,"value":1696},{"type":18,"tag":287,"props":2220,"children":2221},{"class":354},[2222],{"type":24,"value":1701},{"type":18,"tag":287,"props":2224,"children":2225},{"class":300},[2226],{"type":24,"value":1706},{"type":18,"tag":287,"props":2228,"children":2229},{"class":1709},[2230],{"type":24,"value":2231},"'X'",{"type":18,"tag":287,"props":2233,"children":2234},{"class":300},[2235],{"type":24,"value":2236},", num_states, prediction_horizons ",{"type":18,"tag":287,"props":2238,"children":2239},{"class":294},[2240],{"type":24,"value":758},{"type":18,"tag":287,"props":2242,"children":2243},{"class":300},[2244],{"type":24,"value":351},{"type":18,"tag":287,"props":2246,"children":2247},{"class":354},[2248],{"type":24,"value":662},{"type":18,"tag":287,"props":2250,"children":2251},{"class":300},[2252],{"type":24,"value":1717},{"type":18,"tag":287,"props":2254,"children":2255},{"class":289,"line":316},[2256,2261,2265,2269,2273,2277,2282,2286,2290,2294,2298],{"type":18,"tag":287,"props":2257,"children":2258},{"class":300},[2259],{"type":24,"value":2260},"X_ref ",{"type":18,"tag":287,"props":2262,"children":2263},{"class":294},[2264],{"type":24,"value":346},{"type":18,"tag":287,"props":2266,"children":2267},{"class":300},[2268],{"type":24,"value":1696},{"type":18,"tag":287,"props":2270,"children":2271},{"class":354},[2272],{"type":24,"value":1701},{"type":18,"tag":287,"props":2274,"children":2275},{"class":300},[2276],{"type":24,"value":1706},{"type":18,"tag":287,"props":2278,"children":2279},{"class":1709},[2280],{"type":24,"value":2281},"'X_ref'",{"type":18,"tag":287,"props":2283,"children":2284},{"class":300},[2285],{"type":24,"value":2236},{"type":18,"tag":287,"props":2287,"children":2288},{"class":294},[2289],{"type":24,"value":758},{"type":18,"tag":287,"props":2291,"children":2292},{"class":300},[2293],{"type":24,"value":351},{"type":18,"tag":287,"props":2295,"children":2296},{"class":354},[2297],{"type":24,"value":662},{"type":18,"tag":287,"props":2299,"children":2300},{"class":300},[2301],{"type":24,"value":1717},{"type":18,"tag":287,"props":2303,"children":2304},{"class":289,"line":325},[2305,2310,2314,2318,2322,2326,2331],{"type":18,"tag":287,"props":2306,"children":2307},{"class":300},[2308],{"type":24,"value":2309},"U ",{"type":18,"tag":287,"props":2311,"children":2312},{"class":294},[2313],{"type":24,"value":346},{"type":18,"tag":287,"props":2315,"children":2316},{"class":300},[2317],{"type":24,"value":1696},{"type":18,"tag":287,"props":2319,"children":2320},{"class":354},[2321],{"type":24,"value":1701},{"type":18,"tag":287,"props":2323,"children":2324},{"class":300},[2325],{"type":24,"value":1706},{"type":18,"tag":287,"props":2327,"children":2328},{"class":1709},[2329],{"type":24,"value":2330},"'U'",{"type":18,"tag":287,"props":2332,"children":2333},{"class":300},[2334],{"type":24,"value":2335},", num_controls, prediction_horizons)\n",{"type":18,"tag":287,"props":2337,"children":2338},{"class":289,"line":335},[2339,2344,2348,2352,2356,2360,2365],{"type":18,"tag":287,"props":2340,"children":2341},{"class":300},[2342],{"type":24,"value":2343},"U_ref ",{"type":18,"tag":287,"props":2345,"children":2346},{"class":294},[2347],{"type":24,"value":346},{"type":18,"tag":287,"props":2349,"children":2350},{"class":300},[2351],{"type":24,"value":1696},{"type":18,"tag":287,"props":2353,"children":2354},{"class":354},[2355],{"type":24,"value":1701},{"type":18,"tag":287,"props":2357,"children":2358},{"class":300},[2359],{"type":24,"value":1706},{"type":18,"tag":287,"props":2361,"children":2362},{"class":1709},[2363],{"type":24,"value":2364},"'U_ref'",{"type":18,"tag":287,"props":2366,"children":2367},{"class":300},[2368],{"type":24,"value":2369},", num_controls, prediction_horizons)",{"type":18,"tag":27,"props":2371,"children":2372},{},[2373,2375],{"type":24,"value":2374},"Define nonlinear programming and options for ",{"type":18,"tag":1610,"props":2376,"children":2377},{},[2378],{"type":24,"value":1614},{"type":18,"tag":272,"props":2380,"children":2383},{"className":2381,"code":2382,"language":277,"meta":8},[275],"nlp_prob = {\n    'f': cost_fn,\n    'x': opt_var,\n    'p': opt_dec,\n    'g': g\n}\n\nnlp_opts = {\n    'ipopt.max_iter': 5000,\n    'ipopt.print_level': 0,\n    'ipopt.acceptable_tol': 1e-6,\n    'ipopt.acceptable_obj_change_tol': 1e-4,\n    'print_time': 0\n}\n",[2384],{"type":18,"tag":280,"props":2385,"children":2386},{},[2387],{"type":18,"tag":272,"props":2388,"children":2389},{"__ignoreMap":8},[2390,2407,2423,2440,2457,2474,2482,2489,2505,2532,2556,2581,2606,2627],{"type":18,"tag":287,"props":2391,"children":2392},{"class":289,"line":290},[2393,2398,2402],{"type":18,"tag":287,"props":2394,"children":2395},{"class":300},[2396],{"type":24,"value":2397},"nlp_prob ",{"type":18,"tag":287,"props":2399,"children":2400},{"class":294},[2401],{"type":24,"value":346},{"type":18,"tag":287,"props":2403,"children":2404},{"class":300},[2405],{"type":24,"value":2406}," {\n",{"type":18,"tag":287,"props":2408,"children":2409},{"class":289,"line":316},[2410,2414,2418],{"type":18,"tag":287,"props":2411,"children":2412},{"class":300},[2413],{"type":24,"value":1127},{"type":18,"tag":287,"props":2415,"children":2416},{"class":1709},[2417],{"type":24,"value":2181},{"type":18,"tag":287,"props":2419,"children":2420},{"class":300},[2421],{"type":24,"value":2422},": cost_fn,\n",{"type":18,"tag":287,"props":2424,"children":2425},{"class":289,"line":325},[2426,2430,2435],{"type":18,"tag":287,"props":2427,"children":2428},{"class":300},[2429],{"type":24,"value":1127},{"type":18,"tag":287,"props":2431,"children":2432},{"class":1709},[2433],{"type":24,"value":2434},"'x'",{"type":18,"tag":287,"props":2436,"children":2437},{"class":300},[2438],{"type":24,"value":2439},": opt_var,\n",{"type":18,"tag":287,"props":2441,"children":2442},{"class":289,"line":335},[2443,2447,2452],{"type":18,"tag":287,"props":2444,"children":2445},{"class":300},[2446],{"type":24,"value":1127},{"type":18,"tag":287,"props":2448,"children":2449},{"class":1709},[2450],{"type":24,"value":2451},"'p'",{"type":18,"tag":287,"props":2453,"children":2454},{"class":300},[2455],{"type":24,"value":2456},": opt_dec,\n",{"type":18,"tag":287,"props":2458,"children":2459},{"class":289,"line":360},[2460,2464,2469],{"type":18,"tag":287,"props":2461,"children":2462},{"class":300},[2463],{"type":24,"value":1127},{"type":18,"tag":287,"props":2465,"children":2466},{"class":1709},[2467],{"type":24,"value":2468},"'g'",{"type":18,"tag":287,"props":2470,"children":2471},{"class":300},[2472],{"type":24,"value":2473},": g\n",{"type":18,"tag":287,"props":2475,"children":2476},{"class":289,"line":369},[2477],{"type":18,"tag":287,"props":2478,"children":2479},{"class":300},[2480],{"type":24,"value":2481},"}\n",{"type":18,"tag":287,"props":2483,"children":2484},{"class":289,"line":391},[2485],{"type":18,"tag":287,"props":2486,"children":2487},{},[2488],{"type":24,"value":322},{"type":18,"tag":287,"props":2490,"children":2491},{"class":289,"line":400},[2492,2497,2501],{"type":18,"tag":287,"props":2493,"children":2494},{"class":300},[2495],{"type":24,"value":2496},"nlp_opts ",{"type":18,"tag":287,"props":2498,"children":2499},{"class":294},[2500],{"type":24,"value":346},{"type":18,"tag":287,"props":2502,"children":2503},{"class":300},[2504],{"type":24,"value":2406},{"type":18,"tag":287,"props":2506,"children":2507},{"class":289,"line":422},[2508,2512,2517,2522,2527],{"type":18,"tag":287,"props":2509,"children":2510},{"class":300},[2511],{"type":24,"value":1127},{"type":18,"tag":287,"props":2513,"children":2514},{"class":1709},[2515],{"type":24,"value":2516},"'ipopt.max_iter'",{"type":18,"tag":287,"props":2518,"children":2519},{"class":300},[2520],{"type":24,"value":2521},": ",{"type":18,"tag":287,"props":2523,"children":2524},{"class":354},[2525],{"type":24,"value":2526},"5000",{"type":18,"tag":287,"props":2528,"children":2529},{"class":300},[2530],{"type":24,"value":2531},",\n",{"type":18,"tag":287,"props":2533,"children":2534},{"class":289,"line":443},[2535,2539,2544,2548,2552],{"type":18,"tag":287,"props":2536,"children":2537},{"class":300},[2538],{"type":24,"value":1127},{"type":18,"tag":287,"props":2540,"children":2541},{"class":1709},[2542],{"type":24,"value":2543},"'ipopt.print_level'",{"type":18,"tag":287,"props":2545,"children":2546},{"class":300},[2547],{"type":24,"value":2521},{"type":18,"tag":287,"props":2549,"children":2550},{"class":354},[2551],{"type":24,"value":591},{"type":18,"tag":287,"props":2553,"children":2554},{"class":300},[2555],{"type":24,"value":2531},{"type":18,"tag":287,"props":2557,"children":2558},{"class":289,"line":464},[2559,2563,2568,2572,2577],{"type":18,"tag":287,"props":2560,"children":2561},{"class":300},[2562],{"type":24,"value":1127},{"type":18,"tag":287,"props":2564,"children":2565},{"class":1709},[2566],{"type":24,"value":2567},"'ipopt.acceptable_tol'",{"type":18,"tag":287,"props":2569,"children":2570},{"class":300},[2571],{"type":24,"value":2521},{"type":18,"tag":287,"props":2573,"children":2574},{"class":354},[2575],{"type":24,"value":2576},"1e-6",{"type":18,"tag":287,"props":2578,"children":2579},{"class":300},[2580],{"type":24,"value":2531},{"type":18,"tag":287,"props":2582,"children":2583},{"class":289,"line":473},[2584,2588,2593,2597,2602],{"type":18,"tag":287,"props":2585,"children":2586},{"class":300},[2587],{"type":24,"value":1127},{"type":18,"tag":287,"props":2589,"children":2590},{"class":1709},[2591],{"type":24,"value":2592},"'ipopt.acceptable_obj_change_tol'",{"type":18,"tag":287,"props":2594,"children":2595},{"class":300},[2596],{"type":24,"value":2521},{"type":18,"tag":287,"props":2598,"children":2599},{"class":354},[2600],{"type":24,"value":2601},"1e-4",{"type":18,"tag":287,"props":2603,"children":2604},{"class":300},[2605],{"type":24,"value":2531},{"type":18,"tag":287,"props":2607,"children":2608},{"class":289,"line":504},[2609,2613,2618,2622],{"type":18,"tag":287,"props":2610,"children":2611},{"class":300},[2612],{"type":24,"value":1127},{"type":18,"tag":287,"props":2614,"children":2615},{"class":1709},[2616],{"type":24,"value":2617},"'print_time'",{"type":18,"tag":287,"props":2619,"children":2620},{"class":300},[2621],{"type":24,"value":2521},{"type":18,"tag":287,"props":2623,"children":2624},{"class":354},[2625],{"type":24,"value":2626},"0\n",{"type":18,"tag":287,"props":2628,"children":2629},{"class":289,"line":535},[2630],{"type":18,"tag":287,"props":2631,"children":2632},{"class":300},[2633],{"type":24,"value":2634},"}",{"type":18,"tag":27,"props":2636,"children":2637},{},[2638],{"type":24,"value":2639},"Determine boundary and constraint for our optimizer",{"type":18,"tag":272,"props":2641,"children":2644},{"className":2642,"code":2643,"language":277,"meta":8},[275],"lbx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\nubx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\n\nlbx[0: num_states * (prediction_horizons + 1): num_states] = x_min\nlbx[1: num_states * (prediction_horizons + 1): num_states] = y_min\nlbx[2: num_states * (prediction_horizons + 1): num_states] = theta_min\n\nubx[0: num_states * (prediction_horizons + 1): num_states] = x_max\nubx[1: num_states * (prediction_horizons + 1): num_states] = y_max\nubx[2: num_states * (prediction_horizons + 1): num_states] = theta_max\n\nlbx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\nlbx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\n\nubx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\nubx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\n\nargs = {\n    'lbg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'ubg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'lbx': lbx,\n    'ubx': ubx\n}\n",[2645],{"type":18,"tag":280,"props":2646,"children":2647},{},[2648],{"type":18,"tag":272,"props":2649,"children":2650},{"__ignoreMap":8},[2651,2729,2801,2808,2859,2907,2955,2962,3011,3059,3107,3114,3197,3292,3299,3380,3475,3482,3498,3557,3613,3630,3647],{"type":18,"tag":287,"props":2652,"children":2653},{"class":289,"line":290},[2654,2659,2663,2667,2672,2677,2681,2686,2690,2694,2698,2702,2706,2711,2715,2720,2724],{"type":18,"tag":287,"props":2655,"children":2656},{"class":300},[2657],{"type":24,"value":2658},"lbx ",{"type":18,"tag":287,"props":2660,"children":2661},{"class":294},[2662],{"type":24,"value":346},{"type":18,"tag":287,"props":2664,"children":2665},{"class":300},[2666],{"type":24,"value":1696},{"type":18,"tag":287,"props":2668,"children":2669},{"class":354},[2670],{"type":24,"value":2671},"DM",{"type":18,"tag":287,"props":2673,"children":2674},{"class":300},[2675],{"type":24,"value":2676},".zeros((num_states ",{"type":18,"tag":287,"props":2678,"children":2679},{"class":294},[2680],{"type":24,"value":601},{"type":18,"tag":287,"props":2682,"children":2683},{"class":300},[2684],{"type":24,"value":2685}," (prediction_horizons ",{"type":18,"tag":287,"props":2687,"children":2688},{"class":294},[2689],{"type":24,"value":758},{"type":18,"tag":287,"props":2691,"children":2692},{"class":300},[2693],{"type":24,"value":351},{"type":18,"tag":287,"props":2695,"children":2696},{"class":354},[2697],{"type":24,"value":662},{"type":18,"tag":287,"props":2699,"children":2700},{"class":300},[2701],{"type":24,"value":781},{"type":18,"tag":287,"props":2703,"children":2704},{"class":294},[2705],{"type":24,"value":758},{"type":18,"tag":287,"props":2707,"children":2708},{"class":300},[2709],{"type":24,"value":2710}," num_controls ",{"type":18,"tag":287,"props":2712,"children":2713},{"class":294},[2714],{"type":24,"value":601},{"type":18,"tag":287,"props":2716,"children":2717},{"class":300},[2718],{"type":24,"value":2719}," prediction_horizons, ",{"type":18,"tag":287,"props":2721,"children":2722},{"class":354},[2723],{"type":24,"value":662},{"type":18,"tag":287,"props":2725,"children":2726},{"class":300},[2727],{"type":24,"value":2728},"))\n",{"type":18,"tag":287,"props":2730,"children":2731},{"class":289,"line":316},[2732,2737,2741,2745,2749,2753,2757,2761,2765,2769,2773,2777,2781,2785,2789,2793,2797],{"type":18,"tag":287,"props":2733,"children":2734},{"class":300},[2735],{"type":24,"value":2736},"ubx ",{"type":18,"tag":287,"props":2738,"children":2739},{"class":294},[2740],{"type":24,"value":346},{"type":18,"tag":287,"props":2742,"children":2743},{"class":300},[2744],{"type":24,"value":1696},{"type":18,"tag":287,"props":2746,"children":2747},{"class":354},[2748],{"type":24,"value":2671},{"type":18,"tag":287,"props":2750,"children":2751},{"class":300},[2752],{"type":24,"value":2676},{"type":18,"tag":287,"props":2754,"children":2755},{"class":294},[2756],{"type":24,"value":601},{"type":18,"tag":287,"props":2758,"children":2759},{"class":300},[2760],{"type":24,"value":2685},{"type":18,"tag":287,"props":2762,"children":2763},{"class":294},[2764],{"type":24,"value":758},{"type":18,"tag":287,"props":2766,"children":2767},{"class":300},[2768],{"type":24,"value":351},{"type":18,"tag":287,"props":2770,"children":2771},{"class":354},[2772],{"type":24,"value":662},{"type":18,"tag":287,"props":2774,"children":2775},{"class":300},[2776],{"type":24,"value":781},{"type":18,"tag":287,"props":2778,"children":2779},{"class":294},[2780],{"type":24,"value":758},{"type":18,"tag":287,"props":2782,"children":2783},{"class":300},[2784],{"type":24,"value":2710},{"type":18,"tag":287,"props":2786,"children":2787},{"class":294},[2788],{"type":24,"value":601},{"type":18,"tag":287,"props":2790,"children":2791},{"class":300},[2792],{"type":24,"value":2719},{"type":18,"tag":287,"props":2794,"children":2795},{"class":354},[2796],{"type":24,"value":662},{"type":18,"tag":287,"props":2798,"children":2799},{"class":300},[2800],{"type":24,"value":2728},{"type":18,"tag":287,"props":2802,"children":2803},{"class":289,"line":325},[2804],{"type":18,"tag":287,"props":2805,"children":2806},{},[2807],{"type":24,"value":322},{"type":18,"tag":287,"props":2809,"children":2810},{"class":289,"line":335},[2811,2816,2820,2825,2829,2833,2837,2841,2845,2850,2854],{"type":18,"tag":287,"props":2812,"children":2813},{"class":300},[2814],{"type":24,"value":2815},"lbx[",{"type":18,"tag":287,"props":2817,"children":2818},{"class":354},[2819],{"type":24,"value":591},{"type":18,"tag":287,"props":2821,"children":2822},{"class":300},[2823],{"type":24,"value":2824},": num_states ",{"type":18,"tag":287,"props":2826,"children":2827},{"class":294},[2828],{"type":24,"value":601},{"type":18,"tag":287,"props":2830,"children":2831},{"class":300},[2832],{"type":24,"value":2685},{"type":18,"tag":287,"props":2834,"children":2835},{"class":294},[2836],{"type":24,"value":758},{"type":18,"tag":287,"props":2838,"children":2839},{"class":300},[2840],{"type":24,"value":351},{"type":18,"tag":287,"props":2842,"children":2843},{"class":354},[2844],{"type":24,"value":662},{"type":18,"tag":287,"props":2846,"children":2847},{"class":300},[2848],{"type":24,"value":2849},"): num_states] ",{"type":18,"tag":287,"props":2851,"children":2852},{"class":294},[2853],{"type":24,"value":346},{"type":18,"tag":287,"props":2855,"children":2856},{"class":300},[2857],{"type":24,"value":2858}," x_min\n",{"type":18,"tag":287,"props":2860,"children":2861},{"class":289,"line":360},[2862,2866,2870,2874,2878,2882,2886,2890,2894,2898,2902],{"type":18,"tag":287,"props":2863,"children":2864},{"class":300},[2865],{"type":24,"value":2815},{"type":18,"tag":287,"props":2867,"children":2868},{"class":354},[2869],{"type":24,"value":662},{"type":18,"tag":287,"props":2871,"children":2872},{"class":300},[2873],{"type":24,"value":2824},{"type":18,"tag":287,"props":2875,"children":2876},{"class":294},[2877],{"type":24,"value":601},{"type":18,"tag":287,"props":2879,"children":2880},{"class":300},[2881],{"type":24,"value":2685},{"type":18,"tag":287,"props":2883,"children":2884},{"class":294},[2885],{"type":24,"value":758},{"type":18,"tag":287,"props":2887,"children":2888},{"class":300},[2889],{"type":24,"value":351},{"type":18,"tag":287,"props":2891,"children":2892},{"class":354},[2893],{"type":24,"value":662},{"type":18,"tag":287,"props":2895,"children":2896},{"class":300},[2897],{"type":24,"value":2849},{"type":18,"tag":287,"props":2899,"children":2900},{"class":294},[2901],{"type":24,"value":346},{"type":18,"tag":287,"props":2903,"children":2904},{"class":300},[2905],{"type":24,"value":2906}," y_min\n",{"type":18,"tag":287,"props":2908,"children":2909},{"class":289,"line":369},[2910,2914,2918,2922,2926,2930,2934,2938,2942,2946,2950],{"type":18,"tag":287,"props":2911,"children":2912},{"class":300},[2913],{"type":24,"value":2815},{"type":18,"tag":287,"props":2915,"children":2916},{"class":354},[2917],{"type":24,"value":611},{"type":18,"tag":287,"props":2919,"children":2920},{"class":300},[2921],{"type":24,"value":2824},{"type":18,"tag":287,"props":2923,"children":2924},{"class":294},[2925],{"type":24,"value":601},{"type":18,"tag":287,"props":2927,"children":2928},{"class":300},[2929],{"type":24,"value":2685},{"type":18,"tag":287,"props":2931,"children":2932},{"class":294},[2933],{"type":24,"value":758},{"type":18,"tag":287,"props":2935,"children":2936},{"class":300},[2937],{"type":24,"value":351},{"type":18,"tag":287,"props":2939,"children":2940},{"class":354},[2941],{"type":24,"value":662},{"type":18,"tag":287,"props":2943,"children":2944},{"class":300},[2945],{"type":24,"value":2849},{"type":18,"tag":287,"props":2947,"children":2948},{"class":294},[2949],{"type":24,"value":346},{"type":18,"tag":287,"props":2951,"children":2952},{"class":300},[2953],{"type":24,"value":2954}," theta_min\n",{"type":18,"tag":287,"props":2956,"children":2957},{"class":289,"line":391},[2958],{"type":18,"tag":287,"props":2959,"children":2960},{},[2961],{"type":24,"value":322},{"type":18,"tag":287,"props":2963,"children":2964},{"class":289,"line":400},[2965,2970,2974,2978,2982,2986,2990,2994,2998,3002,3006],{"type":18,"tag":287,"props":2966,"children":2967},{"class":300},[2968],{"type":24,"value":2969},"ubx[",{"type":18,"tag":287,"props":2971,"children":2972},{"class":354},[2973],{"type":24,"value":591},{"type":18,"tag":287,"props":2975,"children":2976},{"class":300},[2977],{"type":24,"value":2824},{"type":18,"tag":287,"props":2979,"children":2980},{"class":294},[2981],{"type":24,"value":601},{"type":18,"tag":287,"props":2983,"children":2984},{"class":300},[2985],{"type":24,"value":2685},{"type":18,"tag":287,"props":2987,"children":2988},{"class":294},[2989],{"type":24,"value":758},{"type":18,"tag":287,"props":2991,"children":2992},{"class":300},[2993],{"type":24,"value":351},{"type":18,"tag":287,"props":2995,"children":2996},{"class":354},[2997],{"type":24,"value":662},{"type":18,"tag":287,"props":2999,"children":3000},{"class":300},[3001],{"type":24,"value":2849},{"type":18,"tag":287,"props":3003,"children":3004},{"class":294},[3005],{"type":24,"value":346},{"type":18,"tag":287,"props":3007,"children":3008},{"class":300},[3009],{"type":24,"value":3010}," x_max\n",{"type":18,"tag":287,"props":3012,"children":3013},{"class":289,"line":422},[3014,3018,3022,3026,3030,3034,3038,3042,3046,3050,3054],{"type":18,"tag":287,"props":3015,"children":3016},{"class":300},[3017],{"type":24,"value":2969},{"type":18,"tag":287,"props":3019,"children":3020},{"class":354},[3021],{"type":24,"value":662},{"type":18,"tag":287,"props":3023,"children":3024},{"class":300},[3025],{"type":24,"value":2824},{"type":18,"tag":287,"props":3027,"children":3028},{"class":294},[3029],{"type":24,"value":601},{"type":18,"tag":287,"props":3031,"children":3032},{"class":300},[3033],{"type":24,"value":2685},{"type":18,"tag":287,"props":3035,"children":3036},{"class":294},[3037],{"type":24,"value":758},{"type":18,"tag":287,"props":3039,"children":3040},{"class":300},[3041],{"type":24,"value":351},{"type":18,"tag":287,"props":3043,"children":3044},{"class":354},[3045],{"type":24,"value":662},{"type":18,"tag":287,"props":3047,"children":3048},{"class":300},[3049],{"type":24,"value":2849},{"type":18,"tag":287,"props":3051,"children":3052},{"class":294},[3053],{"type":24,"value":346},{"type":18,"tag":287,"props":3055,"children":3056},{"class":300},[3057],{"type":24,"value":3058}," y_max\n",{"type":18,"tag":287,"props":3060,"children":3061},{"class":289,"line":443},[3062,3066,3070,3074,3078,3082,3086,3090,3094,3098,3102],{"type":18,"tag":287,"props":3063,"children":3064},{"class":300},[3065],{"type":24,"value":2969},{"type":18,"tag":287,"props":3067,"children":3068},{"class":354},[3069],{"type":24,"value":611},{"type":18,"tag":287,"props":3071,"children":3072},{"class":300},[3073],{"type":24,"value":2824},{"type":18,"tag":287,"props":3075,"children":3076},{"class":294},[3077],{"type":24,"value":601},{"type":18,"tag":287,"props":3079,"children":3080},{"class":300},[3081],{"type":24,"value":2685},{"type":18,"tag":287,"props":3083,"children":3084},{"class":294},[3085],{"type":24,"value":758},{"type":18,"tag":287,"props":3087,"children":3088},{"class":300},[3089],{"type":24,"value":351},{"type":18,"tag":287,"props":3091,"children":3092},{"class":354},[3093],{"type":24,"value":662},{"type":18,"tag":287,"props":3095,"children":3096},{"class":300},[3097],{"type":24,"value":2849},{"type":18,"tag":287,"props":3099,"children":3100},{"class":294},[3101],{"type":24,"value":346},{"type":18,"tag":287,"props":3103,"children":3104},{"class":300},[3105],{"type":24,"value":3106}," theta_max\n",{"type":18,"tag":287,"props":3108,"children":3109},{"class":289,"line":464},[3110],{"type":18,"tag":287,"props":3111,"children":3112},{},[3113],{"type":24,"value":322},{"type":18,"tag":287,"props":3115,"children":3116},{"class":289,"line":473},[3117,3122,3126,3130,3134,3138,3142,3147,3151,3155,3159,3163,3167,3171,3175,3179,3183,3188,3192],{"type":18,"tag":287,"props":3118,"children":3119},{"class":300},[3120],{"type":24,"value":3121},"lbx[num_states ",{"type":18,"tag":287,"props":3123,"children":3124},{"class":294},[3125],{"type":24,"value":601},{"type":18,"tag":287,"props":3127,"children":3128},{"class":300},[3129],{"type":24,"value":2685},{"type":18,"tag":287,"props":3131,"children":3132},{"class":294},[3133],{"type":24,"value":758},{"type":18,"tag":287,"props":3135,"children":3136},{"class":300},[3137],{"type":24,"value":351},{"type":18,"tag":287,"props":3139,"children":3140},{"class":354},[3141],{"type":24,"value":662},{"type":18,"tag":287,"props":3143,"children":3144},{"class":300},[3145],{"type":24,"value":3146},"): num_states ",{"type":18,"tag":287,"props":3148,"children":3149},{"class":294},[3150],{"type":24,"value":601},{"type":18,"tag":287,"props":3152,"children":3153},{"class":300},[3154],{"type":24,"value":2685},{"type":18,"tag":287,"props":3156,"children":3157},{"class":294},[3158],{"type":24,"value":758},{"type":18,"tag":287,"props":3160,"children":3161},{"class":300},[3162],{"type":24,"value":351},{"type":18,"tag":287,"props":3164,"children":3165},{"class":354},[3166],{"type":24,"value":662},{"type":18,"tag":287,"props":3168,"children":3169},{"class":300},[3170],{"type":24,"value":781},{"type":18,"tag":287,"props":3172,"children":3173},{"class":294},[3174],{"type":24,"value":758},{"type":18,"tag":287,"props":3176,"children":3177},{"class":300},[3178],{"type":24,"value":2710},{"type":18,"tag":287,"props":3180,"children":3181},{"class":294},[3182],{"type":24,"value":601},{"type":18,"tag":287,"props":3184,"children":3185},{"class":300},[3186],{"type":24,"value":3187}," prediction_horizons: num_controls] ",{"type":18,"tag":287,"props":3189,"children":3190},{"class":294},[3191],{"type":24,"value":346},{"type":18,"tag":287,"props":3193,"children":3194},{"class":300},[3195],{"type":24,"value":3196}," u_min\n",{"type":18,"tag":287,"props":3198,"children":3199},{"class":289,"line":504},[3200,3204,3208,3212,3216,3220,3224,3228,3232,3236,3240,3244,3248,3252,3256,3260,3264,3268,3272,3276,3280,3284,3288],{"type":18,"tag":287,"props":3201,"children":3202},{"class":300},[3203],{"type":24,"value":3121},{"type":18,"tag":287,"props":3205,"children":3206},{"class":294},[3207],{"type":24,"value":601},{"type":18,"tag":287,"props":3209,"children":3210},{"class":300},[3211],{"type":24,"value":2685},{"type":18,"tag":287,"props":3213,"children":3214},{"class":294},[3215],{"type":24,"value":758},{"type":18,"tag":287,"props":3217,"children":3218},{"class":300},[3219],{"type":24,"value":351},{"type":18,"tag":287,"props":3221,"children":3222},{"class":354},[3223],{"type":24,"value":662},{"type":18,"tag":287,"props":3225,"children":3226},{"class":300},[3227],{"type":24,"value":781},{"type":18,"tag":287,"props":3229,"children":3230},{"class":294},[3231],{"type":24,"value":758},{"type":18,"tag":287,"props":3233,"children":3234},{"class":300},[3235],{"type":24,"value":351},{"type":18,"tag":287,"props":3237,"children":3238},{"class":354},[3239],{"type":24,"value":662},{"type":18,"tag":287,"props":3241,"children":3242},{"class":300},[3243],{"type":24,"value":2824},{"type":18,"tag":287,"props":3245,"children":3246},{"class":294},[3247],{"type":24,"value":601},{"type":18,"tag":287,"props":3249,"children":3250},{"class":300},[3251],{"type":24,"value":2685},{"type":18,"tag":287,"props":3253,"children":3254},{"class":294},[3255],{"type":24,"value":758},{"type":18,"tag":287,"props":3257,"children":3258},{"class":300},[3259],{"type":24,"value":351},{"type":18,"tag":287,"props":3261,"children":3262},{"class":354},[3263],{"type":24,"value":662},{"type":18,"tag":287,"props":3265,"children":3266},{"class":300},[3267],{"type":24,"value":781},{"type":18,"tag":287,"props":3269,"children":3270},{"class":294},[3271],{"type":24,"value":758},{"type":18,"tag":287,"props":3273,"children":3274},{"class":300},[3275],{"type":24,"value":2710},{"type":18,"tag":287,"props":3277,"children":3278},{"class":294},[3279],{"type":24,"value":601},{"type":18,"tag":287,"props":3281,"children":3282},{"class":300},[3283],{"type":24,"value":3187},{"type":18,"tag":287,"props":3285,"children":3286},{"class":294},[3287],{"type":24,"value":346},{"type":18,"tag":287,"props":3289,"children":3290},{"class":300},[3291],{"type":24,"value":3196},{"type":18,"tag":287,"props":3293,"children":3294},{"class":289,"line":535},[3295],{"type":18,"tag":287,"props":3296,"children":3297},{},[3298],{"type":24,"value":322},{"type":18,"tag":287,"props":3300,"children":3301},{"class":289,"line":544},[3302,3307,3311,3315,3319,3323,3327,3331,3335,3339,3343,3347,3351,3355,3359,3363,3367,3371,3375],{"type":18,"tag":287,"props":3303,"children":3304},{"class":300},[3305],{"type":24,"value":3306},"ubx[num_states ",{"type":18,"tag":287,"props":3308,"children":3309},{"class":294},[3310],{"type":24,"value":601},{"type":18,"tag":287,"props":3312,"children":3313},{"class":300},[3314],{"type":24,"value":2685},{"type":18,"tag":287,"props":3316,"children":3317},{"class":294},[3318],{"type":24,"value":758},{"type":18,"tag":287,"props":3320,"children":3321},{"class":300},[3322],{"type":24,"value":351},{"type":18,"tag":287,"props":3324,"children":3325},{"class":354},[3326],{"type":24,"value":662},{"type":18,"tag":287,"props":3328,"children":3329},{"class":300},[3330],{"type":24,"value":3146},{"type":18,"tag":287,"props":3332,"children":3333},{"class":294},[3334],{"type":24,"value":601},{"type":18,"tag":287,"props":3336,"children":3337},{"class":300},[3338],{"type":24,"value":2685},{"type":18,"tag":287,"props":3340,"children":3341},{"class":294},[3342],{"type":24,"value":758},{"type":18,"tag":287,"props":3344,"children":3345},{"class":300},[3346],{"type":24,"value":351},{"type":18,"tag":287,"props":3348,"children":3349},{"class":354},[3350],{"type":24,"value":662},{"type":18,"tag":287,"props":3352,"children":3353},{"class":300},[3354],{"type":24,"value":781},{"type":18,"tag":287,"props":3356,"children":3357},{"class":294},[3358],{"type":24,"value":758},{"type":18,"tag":287,"props":3360,"children":3361},{"class":300},[3362],{"type":24,"value":2710},{"type":18,"tag":287,"props":3364,"children":3365},{"class":294},[3366],{"type":24,"value":601},{"type":18,"tag":287,"props":3368,"children":3369},{"class":300},[3370],{"type":24,"value":3187},{"type":18,"tag":287,"props":3372,"children":3373},{"class":294},[3374],{"type":24,"value":346},{"type":18,"tag":287,"props":3376,"children":3377},{"class":300},[3378],{"type":24,"value":3379}," u_max\n",{"type":18,"tag":287,"props":3381,"children":3382},{"class":289,"line":553},[3383,3387,3391,3395,3399,3403,3407,3411,3415,3419,3423,3427,3431,3435,3439,3443,3447,3451,3455,3459,3463,3467,3471],{"type":18,"tag":287,"props":3384,"children":3385},{"class":300},[3386],{"type":24,"value":3306},{"type":18,"tag":287,"props":3388,"children":3389},{"class":294},[3390],{"type":24,"value":601},{"type":18,"tag":287,"props":3392,"children":3393},{"class":300},[3394],{"type":24,"value":2685},{"type":18,"tag":287,"props":3396,"children":3397},{"class":294},[3398],{"type":24,"value":758},{"type":18,"tag":287,"props":3400,"children":3401},{"class":300},[3402],{"type":24,"value":351},{"type":18,"tag":287,"props":3404,"children":3405},{"class":354},[3406],{"type":24,"value":662},{"type":18,"tag":287,"props":3408,"children":3409},{"class":300},[3410],{"type":24,"value":781},{"type":18,"tag":287,"props":3412,"children":3413},{"class":294},[3414],{"type":24,"value":758},{"type":18,"tag":287,"props":3416,"children":3417},{"class":300},[3418],{"type":24,"value":351},{"type":18,"tag":287,"props":3420,"children":3421},{"class":354},[3422],{"type":24,"value":662},{"type":18,"tag":287,"props":3424,"children":3425},{"class":300},[3426],{"type":24,"value":2824},{"type":18,"tag":287,"props":3428,"children":3429},{"class":294},[3430],{"type":24,"value":601},{"type":18,"tag":287,"props":3432,"children":3433},{"class":300},[3434],{"type":24,"value":2685},{"type":18,"tag":287,"props":3436,"children":3437},{"class":294},[3438],{"type":24,"value":758},{"type":18,"tag":287,"props":3440,"children":3441},{"class":300},[3442],{"type":24,"value":351},{"type":18,"tag":287,"props":3444,"children":3445},{"class":354},[3446],{"type":24,"value":662},{"type":18,"tag":287,"props":3448,"children":3449},{"class":300},[3450],{"type":24,"value":781},{"type":18,"tag":287,"props":3452,"children":3453},{"class":294},[3454],{"type":24,"value":758},{"type":18,"tag":287,"props":3456,"children":3457},{"class":300},[3458],{"type":24,"value":2710},{"type":18,"tag":287,"props":3460,"children":3461},{"class":294},[3462],{"type":24,"value":601},{"type":18,"tag":287,"props":3464,"children":3465},{"class":300},[3466],{"type":24,"value":3187},{"type":18,"tag":287,"props":3468,"children":3469},{"class":294},[3470],{"type":24,"value":346},{"type":18,"tag":287,"props":3472,"children":3473},{"class":300},[3474],{"type":24,"value":3379},{"type":18,"tag":287,"props":3476,"children":3477},{"class":289,"line":580},[3478],{"type":18,"tag":287,"props":3479,"children":3480},{},[3481],{"type":24,"value":322},{"type":18,"tag":287,"props":3483,"children":3484},{"class":289,"line":619},[3485,3490,3494],{"type":18,"tag":287,"props":3486,"children":3487},{"class":300},[3488],{"type":24,"value":3489},"args ",{"type":18,"tag":287,"props":3491,"children":3492},{"class":294},[3493],{"type":24,"value":346},{"type":18,"tag":287,"props":3495,"children":3496},{"class":300},[3497],{"type":24,"value":2406},{"type":18,"tag":287,"props":3499,"children":3500},{"class":289,"line":652},[3501,3505,3510,3515,3519,3523,3527,3531,3535,3539,3543,3548,3552],{"type":18,"tag":287,"props":3502,"children":3503},{"class":300},[3504],{"type":24,"value":1127},{"type":18,"tag":287,"props":3506,"children":3507},{"class":1709},[3508],{"type":24,"value":3509},"'lbg'",{"type":18,"tag":287,"props":3511,"children":3512},{"class":300},[3513],{"type":24,"value":3514},": ca.",{"type":18,"tag":287,"props":3516,"children":3517},{"class":354},[3518],{"type":24,"value":2671},{"type":18,"tag":287,"props":3520,"children":3521},{"class":300},[3522],{"type":24,"value":2676},{"type":18,"tag":287,"props":3524,"children":3525},{"class":294},[3526],{"type":24,"value":601},{"type":18,"tag":287,"props":3528,"children":3529},{"class":300},[3530],{"type":24,"value":2685},{"type":18,"tag":287,"props":3532,"children":3533},{"class":294},[3534],{"type":24,"value":758},{"type":18,"tag":287,"props":3536,"children":3537},{"class":300},[3538],{"type":24,"value":351},{"type":18,"tag":287,"props":3540,"children":3541},{"class":354},[3542],{"type":24,"value":662},{"type":18,"tag":287,"props":3544,"children":3545},{"class":300},[3546],{"type":24,"value":3547},"), ",{"type":18,"tag":287,"props":3549,"children":3550},{"class":354},[3551],{"type":24,"value":662},{"type":18,"tag":287,"props":3553,"children":3554},{"class":300},[3555],{"type":24,"value":3556},")),\n",{"type":18,"tag":287,"props":3558,"children":3559},{"class":289,"line":670},[3560,3564,3569,3573,3577,3581,3585,3589,3593,3597,3601,3605,3609],{"type":18,"tag":287,"props":3561,"children":3562},{"class":300},[3563],{"type":24,"value":1127},{"type":18,"tag":287,"props":3565,"children":3566},{"class":1709},[3567],{"type":24,"value":3568},"'ubg'",{"type":18,"tag":287,"props":3570,"children":3571},{"class":300},[3572],{"type":24,"value":3514},{"type":18,"tag":287,"props":3574,"children":3575},{"class":354},[3576],{"type":24,"value":2671},{"type":18,"tag":287,"props":3578,"children":3579},{"class":300},[3580],{"type":24,"value":2676},{"type":18,"tag":287,"props":3582,"children":3583},{"class":294},[3584],{"type":24,"value":601},{"type":18,"tag":287,"props":3586,"children":3587},{"class":300},[3588],{"type":24,"value":2685},{"type":18,"tag":287,"props":3590,"children":3591},{"class":294},[3592],{"type":24,"value":758},{"type":18,"tag":287,"props":3594,"children":3595},{"class":300},[3596],{"type":24,"value":351},{"type":18,"tag":287,"props":3598,"children":3599},{"class":354},[3600],{"type":24,"value":662},{"type":18,"tag":287,"props":3602,"children":3603},{"class":300},[3604],{"type":24,"value":3547},{"type":18,"tag":287,"props":3606,"children":3607},{"class":354},[3608],{"type":24,"value":662},{"type":18,"tag":287,"props":3610,"children":3611},{"class":300},[3612],{"type":24,"value":3556},{"type":18,"tag":287,"props":3614,"children":3615},{"class":289,"line":679},[3616,3620,3625],{"type":18,"tag":287,"props":3617,"children":3618},{"class":300},[3619],{"type":24,"value":1127},{"type":18,"tag":287,"props":3621,"children":3622},{"class":1709},[3623],{"type":24,"value":3624},"'lbx'",{"type":18,"tag":287,"props":3626,"children":3627},{"class":300},[3628],{"type":24,"value":3629},": lbx,\n",{"type":18,"tag":287,"props":3631,"children":3632},{"class":289,"line":687},[3633,3637,3642],{"type":18,"tag":287,"props":3634,"children":3635},{"class":300},[3636],{"type":24,"value":1127},{"type":18,"tag":287,"props":3638,"children":3639},{"class":1709},[3640],{"type":24,"value":3641},"'ubx'",{"type":18,"tag":287,"props":3643,"children":3644},{"class":300},[3645],{"type":24,"value":3646},": ubx\n",{"type":18,"tag":287,"props":3648,"children":3649},{"class":289,"line":720},[3650],{"type":18,"tag":287,"props":3651,"children":3652},{"class":300},[3653],{"type":24,"value":2634},{"type":18,"tag":27,"props":3655,"children":3656},{},[3657],{"type":24,"value":3658},"Obtain the solution from the solver at each iteration",{"type":18,"tag":272,"props":3660,"children":3663},{"className":3661,"code":3662,"language":277,"meta":8},[275],"sol = solver(\n            x0=args['x0'],\n            p=args['p'],\n            lbx=args['lbx'],\n            ubx=args['ubx'],\n            lbg=args['lbg'],\n            ubg=args['ubg'],\n        )\n\n        sol_x = ca.reshape(sol['x'][:num_states * (prediction_horizons + 1)], 3, prediction_horizons + 1)\n        sol_u = ca.reshape(sol['x'][num_states * (prediction_horizons + 1):], 2, prediction_horizons)\n",[3664],{"type":18,"tag":280,"props":3665,"children":3666},{},[3667],{"type":18,"tag":272,"props":3668,"children":3669},{"__ignoreMap":8},[3670,3687,3720,3747,3775,3803,3831,3859,3867,3874,3951],{"type":18,"tag":287,"props":3671,"children":3672},{"class":289,"line":290},[3673,3678,3682],{"type":18,"tag":287,"props":3674,"children":3675},{"class":300},[3676],{"type":24,"value":3677},"sol ",{"type":18,"tag":287,"props":3679,"children":3680},{"class":294},[3681],{"type":24,"value":346},{"type":18,"tag":287,"props":3683,"children":3684},{"class":300},[3685],{"type":24,"value":3686}," solver(\n",{"type":18,"tag":287,"props":3688,"children":3689},{"class":289,"line":316},[3690,3695,3701,3705,3710,3715],{"type":18,"tag":287,"props":3691,"children":3692},{"class":300},[3693],{"type":24,"value":3694},"            ",{"type":18,"tag":287,"props":3696,"children":3698},{"class":3697},"ct-657843",[3699],{"type":24,"value":3700},"x0",{"type":18,"tag":287,"props":3702,"children":3703},{"class":294},[3704],{"type":24,"value":346},{"type":18,"tag":287,"props":3706,"children":3707},{"class":300},[3708],{"type":24,"value":3709},"args[",{"type":18,"tag":287,"props":3711,"children":3712},{"class":1709},[3713],{"type":24,"value":3714},"'x0'",{"type":18,"tag":287,"props":3716,"children":3717},{"class":300},[3718],{"type":24,"value":3719},"],\n",{"type":18,"tag":287,"props":3721,"children":3722},{"class":289,"line":325},[3723,3727,3731,3735,3739,3743],{"type":18,"tag":287,"props":3724,"children":3725},{"class":300},[3726],{"type":24,"value":3694},{"type":18,"tag":287,"props":3728,"children":3729},{"class":3697},[3730],{"type":24,"value":27},{"type":18,"tag":287,"props":3732,"children":3733},{"class":294},[3734],{"type":24,"value":346},{"type":18,"tag":287,"props":3736,"children":3737},{"class":300},[3738],{"type":24,"value":3709},{"type":18,"tag":287,"props":3740,"children":3741},{"class":1709},[3742],{"type":24,"value":2451},{"type":18,"tag":287,"props":3744,"children":3745},{"class":300},[3746],{"type":24,"value":3719},{"type":18,"tag":287,"props":3748,"children":3749},{"class":289,"line":335},[3750,3754,3759,3763,3767,3771],{"type":18,"tag":287,"props":3751,"children":3752},{"class":300},[3753],{"type":24,"value":3694},{"type":18,"tag":287,"props":3755,"children":3756},{"class":3697},[3757],{"type":24,"value":3758},"lbx",{"type":18,"tag":287,"props":3760,"children":3761},{"class":294},[3762],{"type":24,"value":346},{"type":18,"tag":287,"props":3764,"children":3765},{"class":300},[3766],{"type":24,"value":3709},{"type":18,"tag":287,"props":3768,"children":3769},{"class":1709},[3770],{"type":24,"value":3624},{"type":18,"tag":287,"props":3772,"children":3773},{"class":300},[3774],{"type":24,"value":3719},{"type":18,"tag":287,"props":3776,"children":3777},{"class":289,"line":360},[3778,3782,3787,3791,3795,3799],{"type":18,"tag":287,"props":3779,"children":3780},{"class":300},[3781],{"type":24,"value":3694},{"type":18,"tag":287,"props":3783,"children":3784},{"class":3697},[3785],{"type":24,"value":3786},"ubx",{"type":18,"tag":287,"props":3788,"children":3789},{"class":294},[3790],{"type":24,"value":346},{"type":18,"tag":287,"props":3792,"children":3793},{"class":300},[3794],{"type":24,"value":3709},{"type":18,"tag":287,"props":3796,"children":3797},{"class":1709},[3798],{"type":24,"value":3641},{"type":18,"tag":287,"props":3800,"children":3801},{"class":300},[3802],{"type":24,"value":3719},{"type":18,"tag":287,"props":3804,"children":3805},{"class":289,"line":369},[3806,3810,3815,3819,3823,3827],{"type":18,"tag":287,"props":3807,"children":3808},{"class":300},[3809],{"type":24,"value":3694},{"type":18,"tag":287,"props":3811,"children":3812},{"class":3697},[3813],{"type":24,"value":3814},"lbg",{"type":18,"tag":287,"props":3816,"children":3817},{"class":294},[3818],{"type":24,"value":346},{"type":18,"tag":287,"props":3820,"children":3821},{"class":300},[3822],{"type":24,"value":3709},{"type":18,"tag":287,"props":3824,"children":3825},{"class":1709},[3826],{"type":24,"value":3509},{"type":18,"tag":287,"props":3828,"children":3829},{"class":300},[3830],{"type":24,"value":3719},{"type":18,"tag":287,"props":3832,"children":3833},{"class":289,"line":391},[3834,3838,3843,3847,3851,3855],{"type":18,"tag":287,"props":3835,"children":3836},{"class":300},[3837],{"type":24,"value":3694},{"type":18,"tag":287,"props":3839,"children":3840},{"class":3697},[3841],{"type":24,"value":3842},"ubg",{"type":18,"tag":287,"props":3844,"children":3845},{"class":294},[3846],{"type":24,"value":346},{"type":18,"tag":287,"props":3848,"children":3849},{"class":300},[3850],{"type":24,"value":3709},{"type":18,"tag":287,"props":3852,"children":3853},{"class":1709},[3854],{"type":24,"value":3568},{"type":18,"tag":287,"props":3856,"children":3857},{"class":300},[3858],{"type":24,"value":3719},{"type":18,"tag":287,"props":3860,"children":3861},{"class":289,"line":400},[3862],{"type":18,"tag":287,"props":3863,"children":3864},{"class":300},[3865],{"type":24,"value":3866},"        )\n",{"type":18,"tag":287,"props":3868,"children":3869},{"class":289,"line":422},[3870],{"type":18,"tag":287,"props":3871,"children":3872},{},[3873],{"type":24,"value":322},{"type":18,"tag":287,"props":3875,"children":3876},{"class":289,"line":443},[3877,3882,3886,3891,3895,3900,3904,3908,3912,3916,3920,3925,3930,3935,3939,3943,3947],{"type":18,"tag":287,"props":3878,"children":3879},{"class":300},[3880],{"type":24,"value":3881},"        sol_x ",{"type":18,"tag":287,"props":3883,"children":3884},{"class":294},[3885],{"type":24,"value":346},{"type":18,"tag":287,"props":3887,"children":3888},{"class":300},[3889],{"type":24,"value":3890}," ca.reshape(sol[",{"type":18,"tag":287,"props":3892,"children":3893},{"class":1709},[3894],{"type":24,"value":2434},{"type":18,"tag":287,"props":3896,"children":3897},{"class":300},[3898],{"type":24,"value":3899},"][:num_states ",{"type":18,"tag":287,"props":3901,"children":3902},{"class":294},[3903],{"type":24,"value":601},{"type":18,"tag":287,"props":3905,"children":3906},{"class":300},[3907],{"type":24,"value":2685},{"type":18,"tag":287,"props":3909,"children":3910},{"class":294},[3911],{"type":24,"value":758},{"type":18,"tag":287,"props":3913,"children":3914},{"class":300},[3915],{"type":24,"value":351},{"type":18,"tag":287,"props":3917,"children":3918},{"class":354},[3919],{"type":24,"value":662},{"type":18,"tag":287,"props":3921,"children":3922},{"class":300},[3923],{"type":24,"value":3924},")], ",{"type":18,"tag":287,"props":3926,"children":3927},{"class":354},[3928],{"type":24,"value":3929},"3",{"type":18,"tag":287,"props":3931,"children":3932},{"class":300},[3933],{"type":24,"value":3934},", prediction_horizons ",{"type":18,"tag":287,"props":3936,"children":3937},{"class":294},[3938],{"type":24,"value":758},{"type":18,"tag":287,"props":3940,"children":3941},{"class":300},[3942],{"type":24,"value":351},{"type":18,"tag":287,"props":3944,"children":3945},{"class":354},[3946],{"type":24,"value":662},{"type":18,"tag":287,"props":3948,"children":3949},{"class":300},[3950],{"type":24,"value":1717},{"type":18,"tag":287,"props":3952,"children":3953},{"class":289,"line":464},[3954,3959,3963,3967,3971,3976,3980,3984,3988,3992,3996,4001,4005],{"type":18,"tag":287,"props":3955,"children":3956},{"class":300},[3957],{"type":24,"value":3958},"        sol_u ",{"type":18,"tag":287,"props":3960,"children":3961},{"class":294},[3962],{"type":24,"value":346},{"type":18,"tag":287,"props":3964,"children":3965},{"class":300},[3966],{"type":24,"value":3890},{"type":18,"tag":287,"props":3968,"children":3969},{"class":1709},[3970],{"type":24,"value":2434},{"type":18,"tag":287,"props":3972,"children":3973},{"class":300},[3974],{"type":24,"value":3975},"][num_states ",{"type":18,"tag":287,"props":3977,"children":3978},{"class":294},[3979],{"type":24,"value":601},{"type":18,"tag":287,"props":3981,"children":3982},{"class":300},[3983],{"type":24,"value":2685},{"type":18,"tag":287,"props":3985,"children":3986},{"class":294},[3987],{"type":24,"value":758},{"type":18,"tag":287,"props":3989,"children":3990},{"class":300},[3991],{"type":24,"value":351},{"type":18,"tag":287,"props":3993,"children":3994},{"class":354},[3995],{"type":24,"value":662},{"type":18,"tag":287,"props":3997,"children":3998},{"class":300},[3999],{"type":24,"value":4000},"):], ",{"type":18,"tag":287,"props":4002,"children":4003},{"class":354},[4004],{"type":24,"value":611},{"type":18,"tag":287,"props":4006,"children":4007},{"class":300},[4008],{"type":24,"value":4009},", prediction_horizons)",{"type":18,"tag":19,"props":4011,"children":4013},{"id":4012},"result",[4014],{"type":24,"value":4015},"Result",{"type":18,"tag":27,"props":4017,"children":4018},{},[4019],{"type":24,"value":4020},"I use MPC to control the differential drive robot to move from it zero position the the desired postion that I want to follow !.\nI generate a circle trajectory and I fit this curve into my beautiful and robustness cost and then volia !!!.",{"type":18,"tag":4022,"props":4023,"children":4028},"figure",{"className":4024},[4025,4026,4027],"mb-4","inline-block","max-w-sm",[4029,4031],{"type":24,"value":4030},"\n  ",{"type":18,"tag":43,"props":4032,"children":4035},{"className":4033,"src":4034,"width":47,"height":48},[46],"/topics/robotics/nmpc/diff_mpc.png",[],{"type":18,"tag":56,"props":4037,"children":4039},{"className":4038},[59,60,61,62],[4040],{"type":24,"value":4041},"\n    Plot of differential drive robot follow the circle trajectory !!!.\n",{"type":18,"tag":19,"props":4043,"children":4045},{"id":4044},"in-conclusion",[4046],{"type":24,"value":4047},"In conclusion",{"type":18,"tag":27,"props":4049,"children":4050},{},[4051],{"type":24,"value":4052},"In my opinion, I think MPC is suitable for the control system, since it can provide the significant control input that was predicted over the finite future of time. This can ensure the safety of the system and also can provide a quick look or reaction to the control action of the system too.",{"type":18,"tag":19,"props":4054,"children":4056},{"id":4055},"reference",[4057],{"type":24,"value":4058},"Reference",{"type":18,"tag":4060,"props":4061,"children":4062},"ol",{},[4063,4076,4087],{"type":18,"tag":115,"props":4064,"children":4065},{},[4066,4068],{"type":24,"value":4067},"MPC-and-MHE-implementation-in-MATLAB-using-Casadi: ",{"type":18,"tag":4069,"props":4070,"children":4074},"a",{"href":4071,"rel":4072},"https://github.com/MMehrez/MPC-and-MHE-implementation-in-MATLAB-using-Casadi",[4073],"nofollow",[4075],{"type":24,"value":4071},{"type":18,"tag":115,"props":4077,"children":4078},{},[4079,4081],{"type":24,"value":4080},"CasAdi: ",{"type":18,"tag":4069,"props":4082,"children":4085},{"href":4083,"rel":4084},"https://web.casadi.org",[4073],[4086],{"type":24,"value":4083},{"type":18,"tag":115,"props":4088,"children":4089},{},[4090,4092],{"type":24,"value":4091},"PathTracking: ",{"type":18,"tag":4069,"props":4093,"children":4096},{"href":4094,"rel":4095},"https://github.com/SokhengDin/PathTracking",[4073],[4097],{"type":24,"value":4094},{"type":18,"tag":4099,"children":4100},"style",[4101],{"type":24,"value":4102},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-326375{color:#6A737D;}\n.ct-533739{color:#79B8FF;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":316,"depth":316,"links":4104},[4105,4106,4107,4108,4109,4110,4111,4112,4113],{"id":21,"depth":316,"text":25},{"id":68,"depth":316,"text":71},{"id":217,"depth":316,"text":220},{"id":1517,"depth":316,"text":1520},{"id":1560,"depth":316,"text":1563},{"id":1600,"depth":316,"text":1603},{"id":4012,"depth":316,"text":4015},{"id":4044,"depth":316,"text":4047},{"id":4055,"depth":316,"text":4058},"markdown","content:topics:robotics:nonlinear-mpc.md","content","topics/robotics/nonlinear-mpc.md","md",{"_path":4120,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":4121,"description":4122,"author":4123,"slug":4124,"tag":4124,"img":4125,"body":4126,"_type":4114,"_id":6043,"_source":4116,"_file":6044,"_extension":4118},"/topics/robotics/pid-controller","Introduction to PID Controller in Python","PID Control is a feedback control","DIN SOKHENG","pid","/topics/robotics/nmpc/PID.png",{"type":15,"children":4127,"toc":6029},[4128,4134,4145,4151,4156,4162,4166,4205,4214,4220,4226,4236,4242,4247,4281,4287,4292,4297,4307,4313,4318,4322,4327,4331,4336,4749,4766,5313,5318,5324,5331,5349,5435,5440,5502,5507,5591,5603,5891,5897,5916,5930,5934,5944,5950,5960,5966,5971,5976,5982,6025],{"type":18,"tag":19,"props":4129,"children":4131},{"id":4130},"what-is-pid-controller",[4132],{"type":24,"value":4133},"What is PID Controller ?",{"type":18,"tag":27,"props":4135,"children":4136},{},[4137,4139,4143],{"type":24,"value":4138},"The Proportional Integral Derivative (PID) controller is a traditional method in control systems that has found widespread use in control system engineering and industrial applications since its emergence in the 1940s. A PID controller is considered a feedback controller, aiming to minimize the error between the system's feedback and the desired setpoint by manually or automatically fine-tuning the coefficients ",{"type":18,"tag":119,"props":4140,"children":4142},{"latex-express":4141,"styles":122},"K_{P}, K_{I}, K_{D}",[],{"type":24,"value":4144},".",{"type":18,"tag":19,"props":4146,"children":4148},{"id":4147},"how-it-works",[4149],{"type":24,"value":4150},"How it works ?",{"type":18,"tag":27,"props":4152,"children":4153},{},[4154],{"type":24,"value":4155},"Imagine you want to control the speed of a DC motor to reach 300 RPM, but due to the natural response of the DC motor, it cannot reach the desired angular speed. PID offers a solution to this natural response by adjusting the system's time response using its three components, as shown in the formula below.",{"type":18,"tag":19,"props":4157,"children":4159},{"id":4158},"formulation",[4160],{"type":24,"value":4161},"Formulation",{"type":18,"tag":119,"props":4163,"children":4165},{"latex-express":4164,"styles":59},"u(t) = K_{p}e(t) + K_{I} \\int_{0}^{t} e(t) dt + K_{D} \\frac{d e(t)}{dt} ",[],{"type":18,"tag":111,"props":4167,"children":4168},{},[4169,4178,4187,4196],{"type":18,"tag":115,"props":4170,"children":4171},{},[4172,4176],{"type":18,"tag":119,"props":4173,"children":4175},{"latex-express":4174,"styles":122},"K_{P}",[],{"type":24,"value":4177}," represents the proportional gain.",{"type":18,"tag":115,"props":4179,"children":4180},{},[4181,4185],{"type":18,"tag":119,"props":4182,"children":4184},{"latex-express":4183,"styles":122},"K_{I}",[],{"type":24,"value":4186}," represents the integral gain.",{"type":18,"tag":115,"props":4188,"children":4189},{},[4190,4194],{"type":18,"tag":119,"props":4191,"children":4193},{"latex-express":4192,"styles":122},"K_{D}",[],{"type":24,"value":4195}," represents the derivative gain.",{"type":18,"tag":115,"props":4197,"children":4198},{},[4199,4203],{"type":18,"tag":119,"props":4200,"children":4202},{"latex-express":4201,"styles":122},"e(t)=target-feedback",[],{"type":24,"value":4204}," is the error between target point and feedback of the system",{"type":18,"tag":4022,"props":4206,"children":4208},{"className":4207},[4025,4026,4027],[4209,4210],{"type":24,"value":4030},{"type":18,"tag":43,"props":4211,"children":4213},{"className":4212,"src":4125},[46],[],{"type":18,"tag":56,"props":4215,"children":4217},{"className":4216},[59,60,61,62],[4218],{"type":24,"value":4219},"\n    The Block diagram of PID Controller\n",{"type":18,"tag":19,"props":4221,"children":4223},{"id":4222},"response-time",[4224],{"type":24,"value":4225},"Response Time",{"type":18,"tag":4022,"props":4227,"children":4229},{"className":4228},[4025,4026,4027],[4230,4231],{"type":24,"value":4030},{"type":18,"tag":43,"props":4232,"children":4235},{"className":4233,"src":4234},[46],"/topics/robotics/nmpc/response_timepid.png",[],{"type":18,"tag":56,"props":4237,"children":4239},{"className":4238},[59,60,61,62],[4240],{"type":24,"value":4241},"\n    The response time of the system with each K_P, K_I, K_D\n",{"type":18,"tag":27,"props":4243,"children":4244},{},[4245],{"type":24,"value":4246},"As you can see in the figure above, the response time of the system is difference.",{"type":18,"tag":111,"props":4248,"children":4249},{},[4250,4261,4271],{"type":18,"tag":115,"props":4251,"children":4252},{},[4253,4255,4259],{"type":24,"value":4254},"The response time with ",{"type":18,"tag":119,"props":4256,"children":4258},{"latex-express":4257,"styles":122},"K_{I}=2",[],{"type":24,"value":4260}," the system is likely to overshoot before reaching the steady-state, which may not be suitable for applications like controlling a DC motor.",{"type":18,"tag":115,"props":4262,"children":4263},{},[4264,4265,4269],{"type":24,"value":4254},{"type":18,"tag":119,"props":4266,"children":4268},{"latex-express":4267,"styles":122},"K_{i}=0.5, ",[],{"type":24,"value":4270},"  the response does not overshoot but has a slower response to reach the steady-state.",{"type":18,"tag":115,"props":4272,"children":4273},{},[4274,4275,4279],{"type":24,"value":4254},{"type":18,"tag":119,"props":4276,"children":4278},{"latex-express":4277,"styles":122},"K_{p}=1, K_{i}=1, K_{d}=1",[],{"type":24,"value":4280},"  there is a slight overshoot, but the steady-state is reached faster.",{"type":18,"tag":19,"props":4282,"children":4284},{"id":4283},"how-can-we-write-pid-code-in-python",[4285],{"type":24,"value":4286},"How can we write PID code in Python ?",{"type":18,"tag":27,"props":4288,"children":4289},{},[4290],{"type":24,"value":4291},"Let's use a differential drive robot as a case study system. A differential drive robot is commonly used in robotics and automation, making it an ideal choice for a demonstration.",{"type":18,"tag":27,"props":4293,"children":4294},{},[4295],{"type":24,"value":4296},"The configuration of Differential Drive Robot in axes OXY.",{"type":18,"tag":4022,"props":4298,"children":4300},{"className":4299},[4025,4026,4027],[4301,4302],{"type":24,"value":4030},{"type":18,"tag":43,"props":4303,"children":4306},{"className":4304,"src":4305},[46],"/topics/robotics/nmpc/diff_drive.png",[],{"type":18,"tag":56,"props":4308,"children":4310},{"className":4309},[59,60,61,62],[4311],{"type":24,"value":4312},"\n    The configuration of Differential Drive Robot in axes OXY.\n",{"type":18,"tag":27,"props":4314,"children":4315},{},[4316],{"type":24,"value":4317},"The forward kinematic equation",{"type":18,"tag":119,"props":4319,"children":4321},{"latex-express":4320,"styles":59},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{\\theta} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":4323,"children":4324},{},[4325],{"type":24,"value":4326},"So, if we discretize the forward kinematic with a certain sampling time, we will get",{"type":18,"tag":119,"props":4328,"children":4330},{"latex-express":4329,"styles":59},"\n\\begin{bmatrix} x_{t+1} \\\\ y_{t+1} \\\\ \\theta_{t+1} \\end{bmatrix} = \\begin{bmatrix} x_{t} \\\\ y_{t} \\\\ \\theta_{t} \\end{bmatrix} +\\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix} \\times \\Delta t\n ",[],{"type":18,"tag":27,"props":4332,"children":4333},{},[4334],{"type":24,"value":4335},"In Python,",{"type":18,"tag":272,"props":4337,"children":4340},{"className":4338,"code":4339,"language":277,"meta":8},[275],"class DifferentialDrive:\n    def __init__(self):\n        self.r = 0.05\n        self.L = 0.25\n    def forward_kinematic(self, v, omega, yaw):\n        vx = v*np.cos(yaw)\n        vy = v*np.sin(yaw)\n        vyaw = omega\n\n        return vx, vy, vyaw\n    def discrete_state(self, x, y, yaw, v, omega, dt):\n        dx, dy, dyaw = self.forward_kinematic(v, omega, yaw)\n        x_next = x + dx * dt\n        y_next = y + dy * dt\n        yaw_next = yaw + dyaw * dt\n\n        return x_next, y_next, yaw_next\n",[4341],{"type":18,"tag":280,"props":4342,"children":4343},{},[4344],{"type":18,"tag":272,"props":4345,"children":4346},{"__ignoreMap":8},[4347,4370,4396,4427,4456,4481,4507,4532,4549,4556,4573,4598,4623,4658,4692,4726,4733],{"type":18,"tag":287,"props":4348,"children":4349},{"class":289,"line":290},[4350,4355,4359,4365],{"type":18,"tag":287,"props":4351,"children":4352},{"class":294},[4353],{"type":24,"value":4354},"class",{"type":18,"tag":287,"props":4356,"children":4357},{"class":300},[4358],{"type":24,"value":351},{"type":18,"tag":287,"props":4360,"children":4362},{"class":4361},"ct-806137",[4363],{"type":24,"value":4364},"DifferentialDrive",{"type":18,"tag":287,"props":4366,"children":4367},{"class":300},[4368],{"type":24,"value":4369},":\n",{"type":18,"tag":287,"props":4371,"children":4372},{"class":289,"line":316},[4373,4377,4382,4386,4391],{"type":18,"tag":287,"props":4374,"children":4375},{"class":300},[4376],{"type":24,"value":1127},{"type":18,"tag":287,"props":4378,"children":4379},{"class":294},[4380],{"type":24,"value":4381},"def",{"type":18,"tag":287,"props":4383,"children":4384},{"class":300},[4385],{"type":24,"value":351},{"type":18,"tag":287,"props":4387,"children":4388},{"class":354},[4389],{"type":24,"value":4390},"__init__",{"type":18,"tag":287,"props":4392,"children":4393},{"class":300},[4394],{"type":24,"value":4395},"(self):\n",{"type":18,"tag":287,"props":4397,"children":4398},{"class":289,"line":325},[4399,4404,4409,4414,4418,4422],{"type":18,"tag":287,"props":4400,"children":4401},{"class":300},[4402],{"type":24,"value":4403},"        ",{"type":18,"tag":287,"props":4405,"children":4406},{"class":354},[4407],{"type":24,"value":4408},"self",{"type":18,"tag":287,"props":4410,"children":4411},{"class":300},[4412],{"type":24,"value":4413},".r ",{"type":18,"tag":287,"props":4415,"children":4416},{"class":294},[4417],{"type":24,"value":346},{"type":18,"tag":287,"props":4419,"children":4420},{"class":300},[4421],{"type":24,"value":351},{"type":18,"tag":287,"props":4423,"children":4424},{"class":354},[4425],{"type":24,"value":4426},"0.05\n",{"type":18,"tag":287,"props":4428,"children":4429},{"class":289,"line":335},[4430,4434,4438,4443,4447,4451],{"type":18,"tag":287,"props":4431,"children":4432},{"class":300},[4433],{"type":24,"value":4403},{"type":18,"tag":287,"props":4435,"children":4436},{"class":354},[4437],{"type":24,"value":4408},{"type":18,"tag":287,"props":4439,"children":4440},{"class":300},[4441],{"type":24,"value":4442},".L ",{"type":18,"tag":287,"props":4444,"children":4445},{"class":294},[4446],{"type":24,"value":346},{"type":18,"tag":287,"props":4448,"children":4449},{"class":300},[4450],{"type":24,"value":351},{"type":18,"tag":287,"props":4452,"children":4453},{"class":354},[4454],{"type":24,"value":4455},"0.25\n",{"type":18,"tag":287,"props":4457,"children":4458},{"class":289,"line":360},[4459,4463,4467,4471,4476],{"type":18,"tag":287,"props":4460,"children":4461},{"class":300},[4462],{"type":24,"value":1127},{"type":18,"tag":287,"props":4464,"children":4465},{"class":294},[4466],{"type":24,"value":4381},{"type":18,"tag":287,"props":4468,"children":4469},{"class":300},[4470],{"type":24,"value":351},{"type":18,"tag":287,"props":4472,"children":4473},{"class":4361},[4474],{"type":24,"value":4475},"forward_kinematic",{"type":18,"tag":287,"props":4477,"children":4478},{"class":300},[4479],{"type":24,"value":4480},"(self, v, omega, yaw):\n",{"type":18,"tag":287,"props":4482,"children":4483},{"class":289,"line":369},[4484,4489,4493,4498,4502],{"type":18,"tag":287,"props":4485,"children":4486},{"class":300},[4487],{"type":24,"value":4488},"        vx ",{"type":18,"tag":287,"props":4490,"children":4491},{"class":294},[4492],{"type":24,"value":346},{"type":18,"tag":287,"props":4494,"children":4495},{"class":300},[4496],{"type":24,"value":4497}," v",{"type":18,"tag":287,"props":4499,"children":4500},{"class":294},[4501],{"type":24,"value":601},{"type":18,"tag":287,"props":4503,"children":4504},{"class":300},[4505],{"type":24,"value":4506},"np.cos(yaw)\n",{"type":18,"tag":287,"props":4508,"children":4509},{"class":289,"line":391},[4510,4515,4519,4523,4527],{"type":18,"tag":287,"props":4511,"children":4512},{"class":300},[4513],{"type":24,"value":4514},"        vy ",{"type":18,"tag":287,"props":4516,"children":4517},{"class":294},[4518],{"type":24,"value":346},{"type":18,"tag":287,"props":4520,"children":4521},{"class":300},[4522],{"type":24,"value":4497},{"type":18,"tag":287,"props":4524,"children":4525},{"class":294},[4526],{"type":24,"value":601},{"type":18,"tag":287,"props":4528,"children":4529},{"class":300},[4530],{"type":24,"value":4531},"np.sin(yaw)\n",{"type":18,"tag":287,"props":4533,"children":4534},{"class":289,"line":400},[4535,4540,4544],{"type":18,"tag":287,"props":4536,"children":4537},{"class":300},[4538],{"type":24,"value":4539},"        vyaw ",{"type":18,"tag":287,"props":4541,"children":4542},{"class":294},[4543],{"type":24,"value":346},{"type":18,"tag":287,"props":4545,"children":4546},{"class":300},[4547],{"type":24,"value":4548}," omega\n",{"type":18,"tag":287,"props":4550,"children":4551},{"class":289,"line":422},[4552],{"type":18,"tag":287,"props":4553,"children":4554},{},[4555],{"type":24,"value":322},{"type":18,"tag":287,"props":4557,"children":4558},{"class":289,"line":443},[4559,4563,4568],{"type":18,"tag":287,"props":4560,"children":4561},{"class":300},[4562],{"type":24,"value":4403},{"type":18,"tag":287,"props":4564,"children":4565},{"class":294},[4566],{"type":24,"value":4567},"return",{"type":18,"tag":287,"props":4569,"children":4570},{"class":300},[4571],{"type":24,"value":4572}," vx, vy, vyaw\n",{"type":18,"tag":287,"props":4574,"children":4575},{"class":289,"line":464},[4576,4580,4584,4588,4593],{"type":18,"tag":287,"props":4577,"children":4578},{"class":300},[4579],{"type":24,"value":1127},{"type":18,"tag":287,"props":4581,"children":4582},{"class":294},[4583],{"type":24,"value":4381},{"type":18,"tag":287,"props":4585,"children":4586},{"class":300},[4587],{"type":24,"value":351},{"type":18,"tag":287,"props":4589,"children":4590},{"class":4361},[4591],{"type":24,"value":4592},"discrete_state",{"type":18,"tag":287,"props":4594,"children":4595},{"class":300},[4596],{"type":24,"value":4597},"(self, x, y, yaw, v, omega, dt):\n",{"type":18,"tag":287,"props":4599,"children":4600},{"class":289,"line":473},[4601,4606,4610,4614,4618],{"type":18,"tag":287,"props":4602,"children":4603},{"class":300},[4604],{"type":24,"value":4605},"        dx, dy, dyaw ",{"type":18,"tag":287,"props":4607,"children":4608},{"class":294},[4609],{"type":24,"value":346},{"type":18,"tag":287,"props":4611,"children":4612},{"class":300},[4613],{"type":24,"value":351},{"type":18,"tag":287,"props":4615,"children":4616},{"class":354},[4617],{"type":24,"value":4408},{"type":18,"tag":287,"props":4619,"children":4620},{"class":300},[4621],{"type":24,"value":4622},".forward_kinematic(v, omega, yaw)\n",{"type":18,"tag":287,"props":4624,"children":4625},{"class":289,"line":504},[4626,4631,4635,4640,4644,4649,4653],{"type":18,"tag":287,"props":4627,"children":4628},{"class":300},[4629],{"type":24,"value":4630},"        x_next ",{"type":18,"tag":287,"props":4632,"children":4633},{"class":294},[4634],{"type":24,"value":346},{"type":18,"tag":287,"props":4636,"children":4637},{"class":300},[4638],{"type":24,"value":4639}," x ",{"type":18,"tag":287,"props":4641,"children":4642},{"class":294},[4643],{"type":24,"value":758},{"type":18,"tag":287,"props":4645,"children":4646},{"class":300},[4647],{"type":24,"value":4648}," dx ",{"type":18,"tag":287,"props":4650,"children":4651},{"class":294},[4652],{"type":24,"value":601},{"type":18,"tag":287,"props":4654,"children":4655},{"class":300},[4656],{"type":24,"value":4657}," dt\n",{"type":18,"tag":287,"props":4659,"children":4660},{"class":289,"line":535},[4661,4666,4670,4675,4679,4684,4688],{"type":18,"tag":287,"props":4662,"children":4663},{"class":300},[4664],{"type":24,"value":4665},"        y_next ",{"type":18,"tag":287,"props":4667,"children":4668},{"class":294},[4669],{"type":24,"value":346},{"type":18,"tag":287,"props":4671,"children":4672},{"class":300},[4673],{"type":24,"value":4674}," y ",{"type":18,"tag":287,"props":4676,"children":4677},{"class":294},[4678],{"type":24,"value":758},{"type":18,"tag":287,"props":4680,"children":4681},{"class":300},[4682],{"type":24,"value":4683}," dy ",{"type":18,"tag":287,"props":4685,"children":4686},{"class":294},[4687],{"type":24,"value":601},{"type":18,"tag":287,"props":4689,"children":4690},{"class":300},[4691],{"type":24,"value":4657},{"type":18,"tag":287,"props":4693,"children":4694},{"class":289,"line":544},[4695,4700,4704,4709,4713,4718,4722],{"type":18,"tag":287,"props":4696,"children":4697},{"class":300},[4698],{"type":24,"value":4699},"        yaw_next ",{"type":18,"tag":287,"props":4701,"children":4702},{"class":294},[4703],{"type":24,"value":346},{"type":18,"tag":287,"props":4705,"children":4706},{"class":300},[4707],{"type":24,"value":4708}," yaw ",{"type":18,"tag":287,"props":4710,"children":4711},{"class":294},[4712],{"type":24,"value":758},{"type":18,"tag":287,"props":4714,"children":4715},{"class":300},[4716],{"type":24,"value":4717}," dyaw ",{"type":18,"tag":287,"props":4719,"children":4720},{"class":294},[4721],{"type":24,"value":601},{"type":18,"tag":287,"props":4723,"children":4724},{"class":300},[4725],{"type":24,"value":4657},{"type":18,"tag":287,"props":4727,"children":4728},{"class":289,"line":553},[4729],{"type":18,"tag":287,"props":4730,"children":4731},{},[4732],{"type":24,"value":322},{"type":18,"tag":287,"props":4734,"children":4735},{"class":289,"line":580},[4736,4740,4744],{"type":18,"tag":287,"props":4737,"children":4738},{"class":300},[4739],{"type":24,"value":4403},{"type":18,"tag":287,"props":4741,"children":4742},{"class":294},[4743],{"type":24,"value":4567},{"type":18,"tag":287,"props":4745,"children":4746},{"class":300},[4747],{"type":24,"value":4748}," x_next, y_next, yaw_next",{"type":18,"tag":27,"props":4750,"children":4751},{},[4752,4754,4758,4760,4765],{"type":24,"value":4753},"The ",{"type":18,"tag":227,"props":4755,"children":4756},{},[4757],{"type":24,"value":231},{"type":24,"value":4759}," class that we defined, has all the need attribute to use for PID control !!. We just need to write another class for our ",{"type":18,"tag":227,"props":4761,"children":4762},{},[4763],{"type":24,"value":4764}," PID Controller ",{"type":24,"value":4144},{"type":18,"tag":272,"props":4767,"children":4770},{"className":4768,"code":4769,"language":277,"meta":8},[275],"class PIDController:\n    def __init__(self, kp, ki, kd, dt):\n\n        self.kp = kp\n        self.ki = ki\n        self.kd = kd\n        self.dt = dt\n        self.integral = 0\n\n    def calculate_pid(self, errors):\n        # Calculate proportional error\n        proportional = self.kp * errors[-1]\n        # Calculate integration error\n        integral = self.integral + self.ki * (errors[-1]) * self.dt\n        self.integral = integral\n        # Calculate derivative error\n        derivative = self.kd * (errors[-1] - errors[-2])/self.dt\n\n        output = proportional + integral + derivative\n\n        return output\n",[4771],{"type":18,"tag":280,"props":4772,"children":4773},{},[4774],{"type":18,"tag":272,"props":4775,"children":4776},{"__ignoreMap":8},[4777,4797,4821,4828,4853,4878,4903,4927,4955,4962,4987,4999,5045,5057,5135,5159,5171,5248,5255,5290,5297],{"type":18,"tag":287,"props":4778,"children":4779},{"class":289,"line":290},[4780,4784,4788,4793],{"type":18,"tag":287,"props":4781,"children":4782},{"class":294},[4783],{"type":24,"value":4354},{"type":18,"tag":287,"props":4785,"children":4786},{"class":300},[4787],{"type":24,"value":351},{"type":18,"tag":287,"props":4789,"children":4790},{"class":4361},[4791],{"type":24,"value":4792},"PIDController",{"type":18,"tag":287,"props":4794,"children":4795},{"class":300},[4796],{"type":24,"value":4369},{"type":18,"tag":287,"props":4798,"children":4799},{"class":289,"line":316},[4800,4804,4808,4812,4816],{"type":18,"tag":287,"props":4801,"children":4802},{"class":300},[4803],{"type":24,"value":1127},{"type":18,"tag":287,"props":4805,"children":4806},{"class":294},[4807],{"type":24,"value":4381},{"type":18,"tag":287,"props":4809,"children":4810},{"class":300},[4811],{"type":24,"value":351},{"type":18,"tag":287,"props":4813,"children":4814},{"class":354},[4815],{"type":24,"value":4390},{"type":18,"tag":287,"props":4817,"children":4818},{"class":300},[4819],{"type":24,"value":4820},"(self, kp, ki, kd, dt):\n",{"type":18,"tag":287,"props":4822,"children":4823},{"class":289,"line":325},[4824],{"type":18,"tag":287,"props":4825,"children":4826},{},[4827],{"type":24,"value":322},{"type":18,"tag":287,"props":4829,"children":4830},{"class":289,"line":335},[4831,4835,4839,4844,4848],{"type":18,"tag":287,"props":4832,"children":4833},{"class":300},[4834],{"type":24,"value":4403},{"type":18,"tag":287,"props":4836,"children":4837},{"class":354},[4838],{"type":24,"value":4408},{"type":18,"tag":287,"props":4840,"children":4841},{"class":300},[4842],{"type":24,"value":4843},".kp ",{"type":18,"tag":287,"props":4845,"children":4846},{"class":294},[4847],{"type":24,"value":346},{"type":18,"tag":287,"props":4849,"children":4850},{"class":300},[4851],{"type":24,"value":4852}," kp\n",{"type":18,"tag":287,"props":4854,"children":4855},{"class":289,"line":360},[4856,4860,4864,4869,4873],{"type":18,"tag":287,"props":4857,"children":4858},{"class":300},[4859],{"type":24,"value":4403},{"type":18,"tag":287,"props":4861,"children":4862},{"class":354},[4863],{"type":24,"value":4408},{"type":18,"tag":287,"props":4865,"children":4866},{"class":300},[4867],{"type":24,"value":4868},".ki ",{"type":18,"tag":287,"props":4870,"children":4871},{"class":294},[4872],{"type":24,"value":346},{"type":18,"tag":287,"props":4874,"children":4875},{"class":300},[4876],{"type":24,"value":4877}," ki\n",{"type":18,"tag":287,"props":4879,"children":4880},{"class":289,"line":369},[4881,4885,4889,4894,4898],{"type":18,"tag":287,"props":4882,"children":4883},{"class":300},[4884],{"type":24,"value":4403},{"type":18,"tag":287,"props":4886,"children":4887},{"class":354},[4888],{"type":24,"value":4408},{"type":18,"tag":287,"props":4890,"children":4891},{"class":300},[4892],{"type":24,"value":4893},".kd ",{"type":18,"tag":287,"props":4895,"children":4896},{"class":294},[4897],{"type":24,"value":346},{"type":18,"tag":287,"props":4899,"children":4900},{"class":300},[4901],{"type":24,"value":4902}," kd\n",{"type":18,"tag":287,"props":4904,"children":4905},{"class":289,"line":391},[4906,4910,4914,4919,4923],{"type":18,"tag":287,"props":4907,"children":4908},{"class":300},[4909],{"type":24,"value":4403},{"type":18,"tag":287,"props":4911,"children":4912},{"class":354},[4913],{"type":24,"value":4408},{"type":18,"tag":287,"props":4915,"children":4916},{"class":300},[4917],{"type":24,"value":4918},".dt ",{"type":18,"tag":287,"props":4920,"children":4921},{"class":294},[4922],{"type":24,"value":346},{"type":18,"tag":287,"props":4924,"children":4925},{"class":300},[4926],{"type":24,"value":4657},{"type":18,"tag":287,"props":4928,"children":4929},{"class":289,"line":400},[4930,4934,4938,4943,4947,4951],{"type":18,"tag":287,"props":4931,"children":4932},{"class":300},[4933],{"type":24,"value":4403},{"type":18,"tag":287,"props":4935,"children":4936},{"class":354},[4937],{"type":24,"value":4408},{"type":18,"tag":287,"props":4939,"children":4940},{"class":300},[4941],{"type":24,"value":4942},".integral ",{"type":18,"tag":287,"props":4944,"children":4945},{"class":294},[4946],{"type":24,"value":346},{"type":18,"tag":287,"props":4948,"children":4949},{"class":300},[4950],{"type":24,"value":351},{"type":18,"tag":287,"props":4952,"children":4953},{"class":354},[4954],{"type":24,"value":2626},{"type":18,"tag":287,"props":4956,"children":4957},{"class":289,"line":422},[4958],{"type":18,"tag":287,"props":4959,"children":4960},{},[4961],{"type":24,"value":322},{"type":18,"tag":287,"props":4963,"children":4964},{"class":289,"line":443},[4965,4969,4973,4977,4982],{"type":18,"tag":287,"props":4966,"children":4967},{"class":300},[4968],{"type":24,"value":1127},{"type":18,"tag":287,"props":4970,"children":4971},{"class":294},[4972],{"type":24,"value":4381},{"type":18,"tag":287,"props":4974,"children":4975},{"class":300},[4976],{"type":24,"value":351},{"type":18,"tag":287,"props":4978,"children":4979},{"class":4361},[4980],{"type":24,"value":4981},"calculate_pid",{"type":18,"tag":287,"props":4983,"children":4984},{"class":300},[4985],{"type":24,"value":4986},"(self, errors):\n",{"type":18,"tag":287,"props":4988,"children":4989},{"class":289,"line":464},[4990,4994],{"type":18,"tag":287,"props":4991,"children":4992},{"class":300},[4993],{"type":24,"value":4403},{"type":18,"tag":287,"props":4995,"children":4996},{"class":329},[4997],{"type":24,"value":4998},"# Calculate proportional error\n",{"type":18,"tag":287,"props":5000,"children":5001},{"class":289,"line":473},[5002,5007,5011,5015,5019,5023,5027,5032,5036,5040],{"type":18,"tag":287,"props":5003,"children":5004},{"class":300},[5005],{"type":24,"value":5006},"        proportional ",{"type":18,"tag":287,"props":5008,"children":5009},{"class":294},[5010],{"type":24,"value":346},{"type":18,"tag":287,"props":5012,"children":5013},{"class":300},[5014],{"type":24,"value":351},{"type":18,"tag":287,"props":5016,"children":5017},{"class":354},[5018],{"type":24,"value":4408},{"type":18,"tag":287,"props":5020,"children":5021},{"class":300},[5022],{"type":24,"value":4843},{"type":18,"tag":287,"props":5024,"children":5025},{"class":294},[5026],{"type":24,"value":601},{"type":18,"tag":287,"props":5028,"children":5029},{"class":300},[5030],{"type":24,"value":5031}," errors[",{"type":18,"tag":287,"props":5033,"children":5034},{"class":294},[5035],{"type":24,"value":2001},{"type":18,"tag":287,"props":5037,"children":5038},{"class":354},[5039],{"type":24,"value":662},{"type":18,"tag":287,"props":5041,"children":5042},{"class":300},[5043],{"type":24,"value":5044},"]\n",{"type":18,"tag":287,"props":5046,"children":5047},{"class":289,"line":504},[5048,5052],{"type":18,"tag":287,"props":5049,"children":5050},{"class":300},[5051],{"type":24,"value":4403},{"type":18,"tag":287,"props":5053,"children":5054},{"class":329},[5055],{"type":24,"value":5056},"# Calculate integration error\n",{"type":18,"tag":287,"props":5058,"children":5059},{"class":289,"line":535},[5060,5065,5069,5073,5077,5081,5085,5089,5093,5097,5101,5106,5110,5114,5118,5122,5126,5130],{"type":18,"tag":287,"props":5061,"children":5062},{"class":300},[5063],{"type":24,"value":5064},"        integral ",{"type":18,"tag":287,"props":5066,"children":5067},{"class":294},[5068],{"type":24,"value":346},{"type":18,"tag":287,"props":5070,"children":5071},{"class":300},[5072],{"type":24,"value":351},{"type":18,"tag":287,"props":5074,"children":5075},{"class":354},[5076],{"type":24,"value":4408},{"type":18,"tag":287,"props":5078,"children":5079},{"class":300},[5080],{"type":24,"value":4942},{"type":18,"tag":287,"props":5082,"children":5083},{"class":294},[5084],{"type":24,"value":758},{"type":18,"tag":287,"props":5086,"children":5087},{"class":300},[5088],{"type":24,"value":351},{"type":18,"tag":287,"props":5090,"children":5091},{"class":354},[5092],{"type":24,"value":4408},{"type":18,"tag":287,"props":5094,"children":5095},{"class":300},[5096],{"type":24,"value":4868},{"type":18,"tag":287,"props":5098,"children":5099},{"class":294},[5100],{"type":24,"value":601},{"type":18,"tag":287,"props":5102,"children":5103},{"class":300},[5104],{"type":24,"value":5105}," (errors[",{"type":18,"tag":287,"props":5107,"children":5108},{"class":294},[5109],{"type":24,"value":2001},{"type":18,"tag":287,"props":5111,"children":5112},{"class":354},[5113],{"type":24,"value":662},{"type":18,"tag":287,"props":5115,"children":5116},{"class":300},[5117],{"type":24,"value":1242},{"type":18,"tag":287,"props":5119,"children":5120},{"class":294},[5121],{"type":24,"value":601},{"type":18,"tag":287,"props":5123,"children":5124},{"class":300},[5125],{"type":24,"value":351},{"type":18,"tag":287,"props":5127,"children":5128},{"class":354},[5129],{"type":24,"value":4408},{"type":18,"tag":287,"props":5131,"children":5132},{"class":300},[5133],{"type":24,"value":5134},".dt\n",{"type":18,"tag":287,"props":5136,"children":5137},{"class":289,"line":544},[5138,5142,5146,5150,5154],{"type":18,"tag":287,"props":5139,"children":5140},{"class":300},[5141],{"type":24,"value":4403},{"type":18,"tag":287,"props":5143,"children":5144},{"class":354},[5145],{"type":24,"value":4408},{"type":18,"tag":287,"props":5147,"children":5148},{"class":300},[5149],{"type":24,"value":4942},{"type":18,"tag":287,"props":5151,"children":5152},{"class":294},[5153],{"type":24,"value":346},{"type":18,"tag":287,"props":5155,"children":5156},{"class":300},[5157],{"type":24,"value":5158}," integral\n",{"type":18,"tag":287,"props":5160,"children":5161},{"class":289,"line":553},[5162,5166],{"type":18,"tag":287,"props":5163,"children":5164},{"class":300},[5165],{"type":24,"value":4403},{"type":18,"tag":287,"props":5167,"children":5168},{"class":329},[5169],{"type":24,"value":5170},"# Calculate derivative error\n",{"type":18,"tag":287,"props":5172,"children":5173},{"class":289,"line":580},[5174,5179,5183,5187,5191,5195,5199,5203,5207,5211,5215,5219,5223,5227,5231,5236,5240,5244],{"type":18,"tag":287,"props":5175,"children":5176},{"class":300},[5177],{"type":24,"value":5178},"        derivative ",{"type":18,"tag":287,"props":5180,"children":5181},{"class":294},[5182],{"type":24,"value":346},{"type":18,"tag":287,"props":5184,"children":5185},{"class":300},[5186],{"type":24,"value":351},{"type":18,"tag":287,"props":5188,"children":5189},{"class":354},[5190],{"type":24,"value":4408},{"type":18,"tag":287,"props":5192,"children":5193},{"class":300},[5194],{"type":24,"value":4893},{"type":18,"tag":287,"props":5196,"children":5197},{"class":294},[5198],{"type":24,"value":601},{"type":18,"tag":287,"props":5200,"children":5201},{"class":300},[5202],{"type":24,"value":5105},{"type":18,"tag":287,"props":5204,"children":5205},{"class":294},[5206],{"type":24,"value":2001},{"type":18,"tag":287,"props":5208,"children":5209},{"class":354},[5210],{"type":24,"value":662},{"type":18,"tag":287,"props":5212,"children":5213},{"class":300},[5214],{"type":24,"value":1160},{"type":18,"tag":287,"props":5216,"children":5217},{"class":294},[5218],{"type":24,"value":2001},{"type":18,"tag":287,"props":5220,"children":5221},{"class":300},[5222],{"type":24,"value":5031},{"type":18,"tag":287,"props":5224,"children":5225},{"class":294},[5226],{"type":24,"value":2001},{"type":18,"tag":287,"props":5228,"children":5229},{"class":354},[5230],{"type":24,"value":611},{"type":18,"tag":287,"props":5232,"children":5233},{"class":300},[5234],{"type":24,"value":5235},"])",{"type":18,"tag":287,"props":5237,"children":5238},{"class":294},[5239],{"type":24,"value":768},{"type":18,"tag":287,"props":5241,"children":5242},{"class":354},[5243],{"type":24,"value":4408},{"type":18,"tag":287,"props":5245,"children":5246},{"class":300},[5247],{"type":24,"value":5134},{"type":18,"tag":287,"props":5249,"children":5250},{"class":289,"line":619},[5251],{"type":18,"tag":287,"props":5252,"children":5253},{},[5254],{"type":24,"value":322},{"type":18,"tag":287,"props":5256,"children":5257},{"class":289,"line":652},[5258,5263,5267,5272,5276,5281,5285],{"type":18,"tag":287,"props":5259,"children":5260},{"class":300},[5261],{"type":24,"value":5262},"        output ",{"type":18,"tag":287,"props":5264,"children":5265},{"class":294},[5266],{"type":24,"value":346},{"type":18,"tag":287,"props":5268,"children":5269},{"class":300},[5270],{"type":24,"value":5271}," proportional ",{"type":18,"tag":287,"props":5273,"children":5274},{"class":294},[5275],{"type":24,"value":758},{"type":18,"tag":287,"props":5277,"children":5278},{"class":300},[5279],{"type":24,"value":5280}," integral ",{"type":18,"tag":287,"props":5282,"children":5283},{"class":294},[5284],{"type":24,"value":758},{"type":18,"tag":287,"props":5286,"children":5287},{"class":300},[5288],{"type":24,"value":5289}," derivative\n",{"type":18,"tag":287,"props":5291,"children":5292},{"class":289,"line":670},[5293],{"type":18,"tag":287,"props":5294,"children":5295},{},[5296],{"type":24,"value":322},{"type":18,"tag":287,"props":5298,"children":5299},{"class":289,"line":679},[5300,5304,5308],{"type":18,"tag":287,"props":5301,"children":5302},{"class":300},[5303],{"type":24,"value":4403},{"type":18,"tag":287,"props":5305,"children":5306},{"class":294},[5307],{"type":24,"value":4567},{"type":18,"tag":287,"props":5309,"children":5310},{"class":300},[5311],{"type":24,"value":5312}," output",{"type":18,"tag":27,"props":5314,"children":5315},{},[5316],{"type":24,"value":5317},"Don't worry, this class just defined as the PID formula. So, by doing this, we will be able to use all the characteristic of our PID controller.",{"type":18,"tag":19,"props":5319,"children":5321},{"id":5320},"experiment",[5322],{"type":24,"value":5323},"Experiment",{"type":18,"tag":5325,"props":5326,"children":5328},"h3",{"id":5327},"pid-for-point-control",[5329],{"type":24,"value":5330},"PID for point control",{"type":18,"tag":27,"props":5332,"children":5333},{},[5334,5336,5340,5342,5347],{"type":24,"value":5335},"If I want my DifferentialDrive robot go to point ",{"type":18,"tag":119,"props":5337,"children":5339},{"latex-express":5338,"styles":122},"x_{ref}, y_{ref}, \\theta_{ref}",[],{"type":24,"value":5341},", Then I can calculate the error between the reference point and the feedback position of the robot. I simulated my robot in the  ",{"type":18,"tag":1610,"props":5343,"children":5344},{},[5345],{"type":24,"value":5346},"for loop",{"type":24,"value":5348}," and calculate this error recursively.",{"type":18,"tag":272,"props":5350,"children":5353},{"className":5351,"code":5352,"language":277,"meta":8},[275],"error_x.append(ref_path[0]-current_x)\nerror_y.append(ref_path[1]-current_y)\nerror_yaw.append(ref_path[2]-current_yaw)\n",[5354],{"type":18,"tag":280,"props":5355,"children":5356},{},[5357],{"type":18,"tag":272,"props":5358,"children":5359},{"__ignoreMap":8},[5360,5385,5410],{"type":18,"tag":287,"props":5361,"children":5362},{"class":289,"line":290},[5363,5368,5372,5376,5380],{"type":18,"tag":287,"props":5364,"children":5365},{"class":300},[5366],{"type":24,"value":5367},"error_x.append(ref_path[",{"type":18,"tag":287,"props":5369,"children":5370},{"class":354},[5371],{"type":24,"value":591},{"type":18,"tag":287,"props":5373,"children":5374},{"class":300},[5375],{"type":24,"value":596},{"type":18,"tag":287,"props":5377,"children":5378},{"class":294},[5379],{"type":24,"value":2001},{"type":18,"tag":287,"props":5381,"children":5382},{"class":300},[5383],{"type":24,"value":5384},"current_x)\n",{"type":18,"tag":287,"props":5386,"children":5387},{"class":289,"line":316},[5388,5393,5397,5401,5405],{"type":18,"tag":287,"props":5389,"children":5390},{"class":300},[5391],{"type":24,"value":5392},"error_y.append(ref_path[",{"type":18,"tag":287,"props":5394,"children":5395},{"class":354},[5396],{"type":24,"value":662},{"type":18,"tag":287,"props":5398,"children":5399},{"class":300},[5400],{"type":24,"value":596},{"type":18,"tag":287,"props":5402,"children":5403},{"class":294},[5404],{"type":24,"value":2001},{"type":18,"tag":287,"props":5406,"children":5407},{"class":300},[5408],{"type":24,"value":5409},"current_y)\n",{"type":18,"tag":287,"props":5411,"children":5412},{"class":289,"line":325},[5413,5418,5422,5426,5430],{"type":18,"tag":287,"props":5414,"children":5415},{"class":300},[5416],{"type":24,"value":5417},"error_yaw.append(ref_path[",{"type":18,"tag":287,"props":5419,"children":5420},{"class":354},[5421],{"type":24,"value":611},{"type":18,"tag":287,"props":5423,"children":5424},{"class":300},[5425],{"type":24,"value":596},{"type":18,"tag":287,"props":5427,"children":5428},{"class":294},[5429],{"type":24,"value":2001},{"type":18,"tag":287,"props":5431,"children":5432},{"class":300},[5433],{"type":24,"value":5434},"current_yaw)",{"type":18,"tag":27,"props":5436,"children":5437},{},[5438],{"type":24,"value":5439},"Then, let's apply PID",{"type":18,"tag":272,"props":5441,"children":5444},{"className":5442,"code":5443,"language":277,"meta":8},[275],"output_vx = pid_controller_x.calculate_pid(error_x)\noutput_vy = pid_controller_y.calculate_pid(error_y)\noutput_omega = pid_controller_yaw.calculate_pid(error_yaw)\n",[5445],{"type":18,"tag":280,"props":5446,"children":5447},{},[5448],{"type":18,"tag":272,"props":5449,"children":5450},{"__ignoreMap":8},[5451,5468,5485],{"type":18,"tag":287,"props":5452,"children":5453},{"class":289,"line":290},[5454,5459,5463],{"type":18,"tag":287,"props":5455,"children":5456},{"class":300},[5457],{"type":24,"value":5458},"output_vx ",{"type":18,"tag":287,"props":5460,"children":5461},{"class":294},[5462],{"type":24,"value":346},{"type":18,"tag":287,"props":5464,"children":5465},{"class":300},[5466],{"type":24,"value":5467}," pid_controller_x.calculate_pid(error_x)\n",{"type":18,"tag":287,"props":5469,"children":5470},{"class":289,"line":316},[5471,5476,5480],{"type":18,"tag":287,"props":5472,"children":5473},{"class":300},[5474],{"type":24,"value":5475},"output_vy ",{"type":18,"tag":287,"props":5477,"children":5478},{"class":294},[5479],{"type":24,"value":346},{"type":18,"tag":287,"props":5481,"children":5482},{"class":300},[5483],{"type":24,"value":5484}," pid_controller_y.calculate_pid(error_y)\n",{"type":18,"tag":287,"props":5486,"children":5487},{"class":289,"line":325},[5488,5493,5497],{"type":18,"tag":287,"props":5489,"children":5490},{"class":300},[5491],{"type":24,"value":5492},"output_omega ",{"type":18,"tag":287,"props":5494,"children":5495},{"class":294},[5496],{"type":24,"value":346},{"type":18,"tag":287,"props":5498,"children":5499},{"class":300},[5500],{"type":24,"value":5501}," pid_controller_yaw.calculate_pid(error_yaw)",{"type":18,"tag":27,"props":5503,"children":5504},{},[5505],{"type":24,"value":5506},"We will also need to update current position of the robot with the given optimal value from the PID controller.",{"type":18,"tag":272,"props":5508,"children":5511},{"className":5509,"code":5510,"language":277,"meta":8},[275],"x_next, y_next, yaw_next = diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) # Skip for omega we only look for x, y\ncurrent_x = x_next\ncurrent_y = y_next\ncurrent_yaw = yaw_next\n",[5512],{"type":18,"tag":280,"props":5513,"children":5514},{},[5515],{"type":18,"tag":272,"props":5516,"children":5517},{"__ignoreMap":8},[5518,5540,5557,5574],{"type":18,"tag":287,"props":5519,"children":5520},{"class":289,"line":290},[5521,5526,5530,5535],{"type":18,"tag":287,"props":5522,"children":5523},{"class":300},[5524],{"type":24,"value":5525},"x_next, y_next, yaw_next ",{"type":18,"tag":287,"props":5527,"children":5528},{"class":294},[5529],{"type":24,"value":346},{"type":18,"tag":287,"props":5531,"children":5532},{"class":300},[5533],{"type":24,"value":5534}," diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) ",{"type":18,"tag":287,"props":5536,"children":5537},{"class":329},[5538],{"type":24,"value":5539},"# Skip for omega we only look for x, y\n",{"type":18,"tag":287,"props":5541,"children":5542},{"class":289,"line":316},[5543,5548,5552],{"type":18,"tag":287,"props":5544,"children":5545},{"class":300},[5546],{"type":24,"value":5547},"current_x ",{"type":18,"tag":287,"props":5549,"children":5550},{"class":294},[5551],{"type":24,"value":346},{"type":18,"tag":287,"props":5553,"children":5554},{"class":300},[5555],{"type":24,"value":5556}," x_next\n",{"type":18,"tag":287,"props":5558,"children":5559},{"class":289,"line":325},[5560,5565,5569],{"type":18,"tag":287,"props":5561,"children":5562},{"class":300},[5563],{"type":24,"value":5564},"current_y ",{"type":18,"tag":287,"props":5566,"children":5567},{"class":294},[5568],{"type":24,"value":346},{"type":18,"tag":287,"props":5570,"children":5571},{"class":300},[5572],{"type":24,"value":5573}," y_next\n",{"type":18,"tag":287,"props":5575,"children":5576},{"class":289,"line":335},[5577,5582,5586],{"type":18,"tag":287,"props":5578,"children":5579},{"class":300},[5580],{"type":24,"value":5581},"current_yaw ",{"type":18,"tag":287,"props":5583,"children":5584},{"class":294},[5585],{"type":24,"value":346},{"type":18,"tag":287,"props":5587,"children":5588},{"class":300},[5589],{"type":24,"value":5590}," yaw_next",{"type":18,"tag":27,"props":5592,"children":5593},{},[5594,5596,5601],{"type":24,"value":5595},"I use ",{"type":18,"tag":1610,"props":5597,"children":5598},{},[5599],{"type":24,"value":5600},"matplotlib",{"type":24,"value":5602}," library to simulate my robot.",{"type":18,"tag":272,"props":5604,"children":5607},{"className":5605,"code":5606,"language":277,"meta":8},[275],"plt.clf()\nplt.gcf().canvas.mpl_connect('key_release_event',\n            lambda event: [exit(0) if event.key == 'escape' else None])\nplot_arrow(current_x, current_y, current_yaw)\nplt.plot(5, 5)\nplt.plot(ref_path[0], ref_path[1], marker=\"x\", color=\"blue\", label=\"Input Trajectory\")\nplt.axis(\"equal\")\nplt.grid(True)\nplt.legend()\nplt.pause(0.0001)\n",[5608],{"type":18,"tag":280,"props":5609,"children":5610},{},[5611],{"type":18,"tag":272,"props":5612,"children":5613},{"__ignoreMap":8},[5614,5622,5639,5719,5727,5752,5831,5848,5865,5873],{"type":18,"tag":287,"props":5615,"children":5616},{"class":289,"line":290},[5617],{"type":18,"tag":287,"props":5618,"children":5619},{"class":300},[5620],{"type":24,"value":5621},"plt.clf()\n",{"type":18,"tag":287,"props":5623,"children":5624},{"class":289,"line":316},[5625,5630,5635],{"type":18,"tag":287,"props":5626,"children":5627},{"class":300},[5628],{"type":24,"value":5629},"plt.gcf().canvas.mpl_connect(",{"type":18,"tag":287,"props":5631,"children":5632},{"class":1709},[5633],{"type":24,"value":5634},"'key_release_event'",{"type":18,"tag":287,"props":5636,"children":5637},{"class":300},[5638],{"type":24,"value":2531},{"type":18,"tag":287,"props":5640,"children":5641},{"class":289,"line":325},[5642,5646,5650,5655,5660,5665,5669,5673,5678,5683,5688,5692,5697,5701,5706,5710,5715],{"type":18,"tag":287,"props":5643,"children":5644},{"class":300},[5645],{"type":24,"value":3694},{"type":18,"tag":287,"props":5647,"children":5648},{"class":294},[5649],{"type":24,"value":572},{"type":18,"tag":287,"props":5651,"children":5652},{"class":300},[5653],{"type":24,"value":5654}," event: [",{"type":18,"tag":287,"props":5656,"children":5657},{"class":354},[5658],{"type":24,"value":5659},"exit",{"type":18,"tag":287,"props":5661,"children":5662},{"class":300},[5663],{"type":24,"value":5664},"(",{"type":18,"tag":287,"props":5666,"children":5667},{"class":354},[5668],{"type":24,"value":591},{"type":18,"tag":287,"props":5670,"children":5671},{"class":300},[5672],{"type":24,"value":781},{"type":18,"tag":287,"props":5674,"children":5675},{"class":294},[5676],{"type":24,"value":5677},"if",{"type":18,"tag":287,"props":5679,"children":5680},{"class":300},[5681],{"type":24,"value":5682}," event.key ",{"type":18,"tag":287,"props":5684,"children":5685},{"class":294},[5686],{"type":24,"value":5687},"==",{"type":18,"tag":287,"props":5689,"children":5690},{"class":300},[5691],{"type":24,"value":351},{"type":18,"tag":287,"props":5693,"children":5694},{"class":1709},[5695],{"type":24,"value":5696},"'escape'",{"type":18,"tag":287,"props":5698,"children":5699},{"class":300},[5700],{"type":24,"value":351},{"type":18,"tag":287,"props":5702,"children":5703},{"class":294},[5704],{"type":24,"value":5705},"else",{"type":18,"tag":287,"props":5707,"children":5708},{"class":300},[5709],{"type":24,"value":351},{"type":18,"tag":287,"props":5711,"children":5712},{"class":354},[5713],{"type":24,"value":5714},"None",{"type":18,"tag":287,"props":5716,"children":5717},{"class":300},[5718],{"type":24,"value":676},{"type":18,"tag":287,"props":5720,"children":5721},{"class":289,"line":335},[5722],{"type":18,"tag":287,"props":5723,"children":5724},{"class":300},[5725],{"type":24,"value":5726},"plot_arrow(current_x, current_y, current_yaw)\n",{"type":18,"tag":287,"props":5728,"children":5729},{"class":289,"line":360},[5730,5735,5740,5744,5748],{"type":18,"tag":287,"props":5731,"children":5732},{"class":300},[5733],{"type":24,"value":5734},"plt.plot(",{"type":18,"tag":287,"props":5736,"children":5737},{"class":354},[5738],{"type":24,"value":5739},"5",{"type":18,"tag":287,"props":5741,"children":5742},{"class":300},[5743],{"type":24,"value":2030},{"type":18,"tag":287,"props":5745,"children":5746},{"class":354},[5747],{"type":24,"value":5739},{"type":18,"tag":287,"props":5749,"children":5750},{"class":300},[5751],{"type":24,"value":1717},{"type":18,"tag":287,"props":5753,"children":5754},{"class":289,"line":369},[5755,5760,5764,5769,5773,5778,5783,5787,5791,5795,5800,5804,5809,5813,5818,5822,5827],{"type":18,"tag":287,"props":5756,"children":5757},{"class":300},[5758],{"type":24,"value":5759},"plt.plot(ref_path[",{"type":18,"tag":287,"props":5761,"children":5762},{"class":354},[5763],{"type":24,"value":591},{"type":18,"tag":287,"props":5765,"children":5766},{"class":300},[5767],{"type":24,"value":5768},"], ref_path[",{"type":18,"tag":287,"props":5770,"children":5771},{"class":354},[5772],{"type":24,"value":662},{"type":18,"tag":287,"props":5774,"children":5775},{"class":300},[5776],{"type":24,"value":5777},"], ",{"type":18,"tag":287,"props":5779,"children":5780},{"class":3697},[5781],{"type":24,"value":5782},"marker",{"type":18,"tag":287,"props":5784,"children":5785},{"class":294},[5786],{"type":24,"value":346},{"type":18,"tag":287,"props":5788,"children":5789},{"class":1709},[5790],{"type":24,"value":1712},{"type":18,"tag":287,"props":5792,"children":5793},{"class":300},[5794],{"type":24,"value":2030},{"type":18,"tag":287,"props":5796,"children":5797},{"class":3697},[5798],{"type":24,"value":5799},"color",{"type":18,"tag":287,"props":5801,"children":5802},{"class":294},[5803],{"type":24,"value":346},{"type":18,"tag":287,"props":5805,"children":5806},{"class":1709},[5807],{"type":24,"value":5808},"\"blue\"",{"type":18,"tag":287,"props":5810,"children":5811},{"class":300},[5812],{"type":24,"value":2030},{"type":18,"tag":287,"props":5814,"children":5815},{"class":3697},[5816],{"type":24,"value":5817},"label",{"type":18,"tag":287,"props":5819,"children":5820},{"class":294},[5821],{"type":24,"value":346},{"type":18,"tag":287,"props":5823,"children":5824},{"class":1709},[5825],{"type":24,"value":5826},"\"Input Trajectory\"",{"type":18,"tag":287,"props":5828,"children":5829},{"class":300},[5830],{"type":24,"value":1717},{"type":18,"tag":287,"props":5832,"children":5833},{"class":289,"line":391},[5834,5839,5844],{"type":18,"tag":287,"props":5835,"children":5836},{"class":300},[5837],{"type":24,"value":5838},"plt.axis(",{"type":18,"tag":287,"props":5840,"children":5841},{"class":1709},[5842],{"type":24,"value":5843},"\"equal\"",{"type":18,"tag":287,"props":5845,"children":5846},{"class":300},[5847],{"type":24,"value":1717},{"type":18,"tag":287,"props":5849,"children":5850},{"class":289,"line":400},[5851,5856,5861],{"type":18,"tag":287,"props":5852,"children":5853},{"class":300},[5854],{"type":24,"value":5855},"plt.grid(",{"type":18,"tag":287,"props":5857,"children":5858},{"class":354},[5859],{"type":24,"value":5860},"True",{"type":18,"tag":287,"props":5862,"children":5863},{"class":300},[5864],{"type":24,"value":1717},{"type":18,"tag":287,"props":5866,"children":5867},{"class":289,"line":422},[5868],{"type":18,"tag":287,"props":5869,"children":5870},{"class":300},[5871],{"type":24,"value":5872},"plt.legend()\n",{"type":18,"tag":287,"props":5874,"children":5875},{"class":289,"line":443},[5876,5881,5886],{"type":18,"tag":287,"props":5877,"children":5878},{"class":300},[5879],{"type":24,"value":5880},"plt.pause(",{"type":18,"tag":287,"props":5882,"children":5883},{"class":354},[5884],{"type":24,"value":5885},"0.0001",{"type":18,"tag":287,"props":5887,"children":5888},{"class":300},[5889],{"type":24,"value":5890},")",{"type":18,"tag":5325,"props":5892,"children":5894},{"id":5893},"path-tracking",[5895],{"type":24,"value":5896},"Path Tracking",{"type":18,"tag":27,"props":5898,"children":5899},{},[5900,5902,5907,5909,5914],{"type":24,"value":5901},"The code is all way the same. The different is that, I fit the continuous point into the robot instead of fixed goal point. I use ",{"type":18,"tag":1610,"props":5903,"children":5904},{},[5905],{"type":24,"value":5906},"BeizerCurve",{"type":24,"value":5908}," function to generate ",{"type":18,"tag":227,"props":5910,"children":5911},{},[5912],{"type":24,"value":5913}," Spline Trajectory ",{"type":24,"value":5915}," for the robot.",{"type":18,"tag":27,"props":5917,"children":5918},{},[5919,5921,5928],{"type":24,"value":5920},"The full code is published open-source on my Github. Link here ",{"type":18,"tag":4069,"props":5922,"children":5925},{"href":5923,"rel":5924},"https://github.com/SokhengDin/PathTracking/tree/main/PID",[4073],[5926],{"type":24,"value":5927},"Github",{"type":24,"value":5929},". Hit the star for me if you like my work 🙂.",{"type":18,"tag":5325,"props":5931,"children":5932},{"id":4012},[5933],{"type":24,"value":4015},{"type":18,"tag":4022,"props":5935,"children":5937},{"className":5936},[4025,4026,4027],[5938,5939],{"type":24,"value":4030},{"type":18,"tag":43,"props":5940,"children":5943},{"className":5941,"src":5942},[46],"/topics/robotics/nmpc/Figure_pid_p.png",[],{"type":18,"tag":56,"props":5945,"children":5947},{"className":5946},[59,60,61,62],[5948],{"type":24,"value":5949},"\n    PID Controller with position control on Differential Drive Robot\n",{"type":18,"tag":4022,"props":5951,"children":5953},{"className":5952},[4025,4026,4027],[5954,5955],{"type":24,"value":4030},{"type":18,"tag":43,"props":5956,"children":5959},{"className":5957,"src":5958},[46],"/topics/robotics/nmpc/Figure_pid_t.png",[],{"type":18,"tag":56,"props":5961,"children":5963},{"className":5962},[59,60,61,62],[5964],{"type":24,"value":5965},"\n    PID Controller with path tracking control on Differential Drive Robot\n",{"type":18,"tag":19,"props":5967,"children":5968},{"id":4044},[5969],{"type":24,"value":5970},"In Conclusion",{"type":18,"tag":27,"props":5972,"children":5973},{},[5974],{"type":24,"value":5975},"In my opinion, the PID Controller is an excellent choice for most control system applications due to its simplicity and powerful capabilities in handling complex control challenges arising from various systems.",{"type":18,"tag":19,"props":5977,"children":5979},{"id":5978},"references",[5980],{"type":24,"value":5981},"References",{"type":18,"tag":4060,"props":5983,"children":5984},{},[5985,5998,6003,6014],{"type":18,"tag":115,"props":5986,"children":5987},{},[5988,5990,5997],{"type":24,"value":5989},"BeizerCurve: ",{"type":18,"tag":4069,"props":5991,"children":5994},{"href":5992,"rel":5993},"https://en.wikipedia.org/wiki/B%C3%A9zier_curve",[4073],[5995],{"type":24,"value":5996},"https://en.wikipedia.org/wiki/Bézier_curve",{"type":24,"value":4144},{"type":18,"tag":115,"props":5999,"children":6000},{},[6001],{"type":24,"value":6002},"PID Controller: Control Systems Engineering by Normal S. Nise.",{"type":18,"tag":115,"props":6004,"children":6005},{},[6006,6008],{"type":24,"value":6007},"Beizer Path : ",{"type":18,"tag":4069,"props":6009,"children":6012},{"href":6010,"rel":6011},"https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning/BezierPath",[4073],[6013],{"type":24,"value":6010},{"type":18,"tag":115,"props":6015,"children":6016},{},[6017,6019],{"type":24,"value":6018},"PID Lecture : ",{"type":18,"tag":4069,"props":6020,"children":6023},{"href":6021,"rel":6022},"https://www.cds.caltech.edu/~murray/courses/cds101/fa02/caltech/astrom-ch6.pdf",[4073],[6024],{"type":24,"value":6021},{"type":18,"tag":4099,"children":6026},[6027],{"type":24,"value":6028},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-806137{color:#B392F0;}\n.ct-533739{color:#79B8FF;}\n.ct-326375{color:#6A737D;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":316,"depth":316,"links":6030},[6031,6032,6033,6034,6035,6036,6041,6042],{"id":4130,"depth":316,"text":4133},{"id":4147,"depth":316,"text":4150},{"id":4158,"depth":316,"text":4161},{"id":4222,"depth":316,"text":4225},{"id":4283,"depth":316,"text":4286},{"id":5320,"depth":316,"text":5323,"children":6037},[6038,6039,6040],{"id":5327,"depth":325,"text":5330},{"id":5893,"depth":325,"text":5896},{"id":4012,"depth":325,"text":4015},{"id":4044,"depth":316,"text":5970},{"id":5978,"depth":316,"text":5981},"content:topics:robotics:pid-controller.md","topics/robotics/pid-controller.md",{"_path":6046,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6047,"description":6048,"slug":6049,"tag":6049,"img":6050,"body":6051,"_type":4114,"_id":6241,"_source":4116,"_file":6242,"_extension":4118},"/topics/robotics/pure-pursuit","Pure Pursuit Controller","Introduction to Pure Pursuit Controller","pure-pursuit","/topics/robotics/nmpc/pure_pursuit.png",{"type":15,"children":6052,"toc":6234},[6053,6058,6068,6074,6079,6132,6138,6143,6195,6201,6206,6229],{"type":18,"tag":19,"props":6054,"children":6056},{"id":6055},"pure-pursuit-controller",[6057],{"type":24,"value":6047},{"type":18,"tag":27,"props":6059,"children":6060},{},[6061,6062,6066],{"type":24,"value":4753},{"type":18,"tag":227,"props":6063,"children":6064},{},[6065],{"type":24,"value":6047},{"type":24,"value":6067}," is a widely-used path-tracking algorithm in robotics and autonomous vehicle navigation. Its primary objective is to guide a vehicle or robot along a predefined path while ensuring precise path-following.",{"type":18,"tag":5325,"props":6069,"children":6071},{"id":6070},"principle-of-operation",[6072],{"type":24,"value":6073},"Principle of Operation",{"type":18,"tag":27,"props":6075,"children":6076},{},[6077],{"type":24,"value":6078},"The operation of the Pure Pursuit Controller is based on a straightforward concept:",{"type":18,"tag":4060,"props":6080,"children":6081},{},[6082,6092,6102,6112,6122],{"type":18,"tag":115,"props":6083,"children":6084},{},[6085,6090],{"type":18,"tag":227,"props":6086,"children":6087},{},[6088],{"type":24,"value":6089},"Path Definition",{"type":24,"value":6091},": The controller works with a defined path, often represented as a series of waypoints or a continuous curve, each associated with specific coordinates (x, y) and curvature information.",{"type":18,"tag":115,"props":6093,"children":6094},{},[6095,6100],{"type":18,"tag":227,"props":6096,"children":6097},{},[6098],{"type":24,"value":6099},"Target Point Selection",{"type":24,"value":6101},": The controller continuously selects a target point ahead of the vehicle. This target point is typically chosen as the point on the path that is a certain fixed distance (known as the \"lookahead distance\") in front of the vehicle.",{"type":18,"tag":115,"props":6103,"children":6104},{},[6105,6110],{"type":18,"tag":227,"props":6106,"children":6107},{},[6108],{"type":24,"value":6109},"Steering Command Calculation",{"type":24,"value":6111},": To navigate toward the target point, the controller calculates the steering command, often represented as the desired steering angle or curvature, required to reach the target point. Commonly, this involves computing the angle between the vehicle's current heading and the vector pointing from the current position to the target point.",{"type":18,"tag":115,"props":6113,"children":6114},{},[6115,6120],{"type":18,"tag":227,"props":6116,"children":6117},{},[6118],{"type":24,"value":6119},"Vehicle Control",{"type":24,"value":6121},": The calculated steering command is used to control the vehicle's steering mechanism (e.g., steering wheel or wheel angles) to guide it toward the target point.",{"type":18,"tag":115,"props":6123,"children":6124},{},[6125,6130],{"type":18,"tag":227,"props":6126,"children":6127},{},[6128],{"type":24,"value":6129},"Iterative Process",{"type":24,"value":6131},": The process is iterative, with the controller continuously selecting new target points ahead as the vehicle advances along the path and adjusting its steering to reach them.",{"type":18,"tag":5325,"props":6133,"children":6135},{"id":6134},"advantages",[6136],{"type":24,"value":6137},"Advantages",{"type":18,"tag":27,"props":6139,"children":6140},{},[6141],{"type":24,"value":6142},"The Pure Pursuit Controller offers several advantages:",{"type":18,"tag":111,"props":6144,"children":6145},{},[6146,6156,6165,6175,6185],{"type":18,"tag":115,"props":6147,"children":6148},{},[6149,6154],{"type":18,"tag":227,"props":6150,"children":6151},{},[6152],{"type":24,"value":6153},"Simplicity",{"type":24,"value":6155},": It is conceptually simple and easy to implement, making it suitable for a wide range of robotic and vehicle navigation applications.",{"type":18,"tag":115,"props":6157,"children":6158},{},[6159,6163],{"type":18,"tag":227,"props":6160,"children":6161},{},[6162],{"type":24,"value":5896},{"type":24,"value":6164},": The controller excels at accurate path tracking, even in complex environments with curves and turns.",{"type":18,"tag":115,"props":6166,"children":6167},{},[6168,6173],{"type":18,"tag":227,"props":6169,"children":6170},{},[6171],{"type":24,"value":6172},"Real-Time Operation",{"type":24,"value":6174},": It can operate in real-time, making it well-suited for dynamic environments where quick decision-making is crucial.",{"type":18,"tag":115,"props":6176,"children":6177},{},[6178,6183],{"type":18,"tag":227,"props":6179,"children":6180},{},[6181],{"type":24,"value":6182},"Adaptability",{"type":24,"value":6184},": The controller can adapt to changes in the path, such as deviations caused by obstacles or unexpected conditions, by continuously updating the target point.",{"type":18,"tag":115,"props":6186,"children":6187},{},[6188,6193],{"type":18,"tag":227,"props":6189,"children":6190},{},[6191],{"type":24,"value":6192},"Low Computational Overhead",{"type":24,"value":6194},": Compared to some other control algorithms, the Pure Pursuit Controller often has low computational requirements, which is advantageous for resource-constrained systems.",{"type":18,"tag":5325,"props":6196,"children":6198},{"id":6197},"limitations",[6199],{"type":24,"value":6200},"Limitations",{"type":18,"tag":27,"props":6202,"children":6203},{},[6204],{"type":24,"value":6205},"Despite its advantages, the Pure Pursuit Controller has some limitations:",{"type":18,"tag":111,"props":6207,"children":6208},{},[6209,6219],{"type":18,"tag":115,"props":6210,"children":6211},{},[6212,6217],{"type":18,"tag":227,"props":6213,"children":6214},{},[6215],{"type":24,"value":6216},"Lookahead Distance Sensitivity",{"type":24,"value":6218},": Its performance can be sensitive to the choice of the lookahead distance, which requires careful tuning for optimal path tracking.",{"type":18,"tag":115,"props":6220,"children":6221},{},[6222,6227],{"type":18,"tag":227,"props":6223,"children":6224},{},[6225],{"type":24,"value":6226},"Non-Holonomic Assumption",{"type":24,"value":6228},": The controller assumes that the vehicle is non-holonomic, meaning it cannot move sideways. This assumption may not hold for certain types of vehicles, such as omnidirectional robots.",{"type":18,"tag":27,"props":6230,"children":6231},{},[6232],{"type":24,"value":6233},"In summary, the Pure Pursuit Controller is a straightforward yet effective algorithm for path tracking and navigation. Its ability to calculate a steering command based on a selected target point ahead of the vehicle makes it a valuable tool for applications ranging from autonomous cars to mobile robots.",{"title":8,"searchDepth":316,"depth":316,"links":6235},[6236],{"id":6055,"depth":316,"text":6047,"children":6237},[6238,6239,6240],{"id":6070,"depth":325,"text":6073},{"id":6134,"depth":325,"text":6137},{"id":6197,"depth":325,"text":6200},"content:topics:robotics:pure-pursuit.md","topics/robotics/pure-pursuit.md",{"_path":6244,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6245,"description":6246,"slug":6247,"tag":6247,"body":6248,"_type":4114,"_id":6449,"_source":4116,"_file":6450,"_extension":4118},"/topics/robotics/stanley-controller","Stanley Controller","Introduction to Stanley Controller","stanley",{"type":15,"children":6249,"toc":6442},[6250,6255,6265,6269,6274,6335,6339,6344,6395,6399,6404,6437],{"type":18,"tag":19,"props":6251,"children":6253},{"id":6252},"stanley-controller",[6254],{"type":24,"value":6245},{"type":18,"tag":27,"props":6256,"children":6257},{},[6258,6259,6263],{"type":24,"value":4753},{"type":18,"tag":227,"props":6260,"children":6261},{},[6262],{"type":24,"value":6245},{"type":24,"value":6264}," is an advanced path-tracking algorithm primarily used in the field of autonomous vehicle navigation. It is named after its creator, Professor John K. Hedrick, who developed it at Stanford University. The Stanley Controller is designed to enable a vehicle to follow a predefined path with high accuracy and stability.",{"type":18,"tag":5325,"props":6266,"children":6267},{"id":6070},[6268],{"type":24,"value":6073},{"type":18,"tag":27,"props":6270,"children":6271},{},[6272],{"type":24,"value":6273},"The Stanley Controller operates based on a combination of control and feedback mechanisms:",{"type":18,"tag":4060,"props":6275,"children":6276},{},[6277,6286,6296,6306,6316,6325],{"type":18,"tag":115,"props":6278,"children":6279},{},[6280,6284],{"type":18,"tag":227,"props":6281,"children":6282},{},[6283],{"type":24,"value":6089},{"type":24,"value":6285},": A predefined path is represented as a series of waypoints or a continuous curve. Each waypoint is associated with specific coordinates (x, y) and often includes additional information like desired speed and curvature.",{"type":18,"tag":115,"props":6287,"children":6288},{},[6289,6294],{"type":18,"tag":227,"props":6290,"children":6291},{},[6292],{"type":24,"value":6293},"Cross-Track Error (CTE) Calculation",{"type":24,"value":6295},": The controller calculates the cross-track error, which is the perpendicular distance between the vehicle's current position and the desired path. This error represents how far the vehicle has deviated from the path.",{"type":18,"tag":115,"props":6297,"children":6298},{},[6299,6304],{"type":18,"tag":227,"props":6300,"children":6301},{},[6302],{"type":24,"value":6303},"Heading Error Calculation",{"type":24,"value":6305},": The heading error, which is the difference between the vehicle's current heading (yaw angle) and the desired path's tangent angle at the nearest waypoint, is also computed.",{"type":18,"tag":115,"props":6307,"children":6308},{},[6309,6314],{"type":18,"tag":227,"props":6310,"children":6311},{},[6312],{"type":24,"value":6313},"Control Command Generation",{"type":24,"value":6315},": Using the calculated cross-track error and heading error, the Stanley Controller generates control commands. These commands typically include steering angle adjustments and throttle/brake control to minimize both errors.",{"type":18,"tag":115,"props":6317,"children":6318},{},[6319,6323],{"type":18,"tag":227,"props":6320,"children":6321},{},[6322],{"type":24,"value":6119},{"type":24,"value":6324},": The generated control commands are applied to the vehicle's steering and throttle/brake systems to guide it back to the desired path.",{"type":18,"tag":115,"props":6326,"children":6327},{},[6328,6333],{"type":18,"tag":227,"props":6329,"children":6330},{},[6331],{"type":24,"value":6332},"Iterative Feedback",{"type":24,"value":6334},": The process is iterative, with the controller continuously recalculating the cross-track and heading errors and adjusting the control commands to keep the vehicle on track.",{"type":18,"tag":5325,"props":6336,"children":6337},{"id":6134},[6338],{"type":24,"value":6137},{"type":18,"tag":27,"props":6340,"children":6341},{},[6342],{"type":24,"value":6343},"The Stanley Controller offers several advantages:",{"type":18,"tag":111,"props":6345,"children":6346},{},[6347,6357,6367,6376,6385],{"type":18,"tag":115,"props":6348,"children":6349},{},[6350,6355],{"type":18,"tag":227,"props":6351,"children":6352},{},[6353],{"type":24,"value":6354},"High Accuracy",{"type":24,"value":6356},": It is known for its ability to achieve precise path-following, even in challenging conditions and complex road geometries.",{"type":18,"tag":115,"props":6358,"children":6359},{},[6360,6365],{"type":18,"tag":227,"props":6361,"children":6362},{},[6363],{"type":24,"value":6364},"Stability",{"type":24,"value":6366},": The controller's feedback mechanisms contribute to stable and smooth vehicle motion, reducing the risk of overshooting or oscillations.",{"type":18,"tag":115,"props":6368,"children":6369},{},[6370,6374],{"type":18,"tag":227,"props":6371,"children":6372},{},[6373],{"type":24,"value":6182},{"type":24,"value":6375},": The Stanley Controller can adapt to changes in the path, such as deviations caused by obstacles or dynamic road conditions.",{"type":18,"tag":115,"props":6377,"children":6378},{},[6379,6383],{"type":18,"tag":227,"props":6380,"children":6381},{},[6382],{"type":24,"value":6172},{"type":24,"value":6384},": It can operate in real-time, making it suitable for autonomous vehicle navigation in dynamic environments.",{"type":18,"tag":115,"props":6386,"children":6387},{},[6388,6393],{"type":18,"tag":227,"props":6389,"children":6390},{},[6391],{"type":24,"value":6392},"Versatility",{"type":24,"value":6394},": While primarily used in autonomous vehicles, the Stanley Controller's principles can be applied to various path-tracking tasks.",{"type":18,"tag":5325,"props":6396,"children":6397},{"id":6197},[6398],{"type":24,"value":6200},{"type":18,"tag":27,"props":6400,"children":6401},{},[6402],{"type":24,"value":6403},"Despite its advantages, the Stanley Controller has some limitations:",{"type":18,"tag":111,"props":6405,"children":6406},{},[6407,6417,6427],{"type":18,"tag":115,"props":6408,"children":6409},{},[6410,6415],{"type":18,"tag":227,"props":6411,"children":6412},{},[6413],{"type":24,"value":6414},"Complexity",{"type":24,"value":6416},": Implementing the Stanley Controller can be more complex than some other control algorithms due to its mathematical calculations and tuning requirements.",{"type":18,"tag":115,"props":6418,"children":6419},{},[6420,6425],{"type":18,"tag":227,"props":6421,"children":6422},{},[6423],{"type":24,"value":6424},"Initialization",{"type":24,"value":6426},": It relies on accurate initialization, including knowledge of the vehicle's initial position and heading relative to the path.",{"type":18,"tag":115,"props":6428,"children":6429},{},[6430,6435],{"type":18,"tag":227,"props":6431,"children":6432},{},[6433],{"type":24,"value":6434},"Sensitivity to Noise",{"type":24,"value":6436},": Like many feedback-based controllers, the Stanley Controller can be sensitive to noisy sensor data and require robust sensor fusion techniques.",{"type":18,"tag":27,"props":6438,"children":6439},{},[6440],{"type":24,"value":6441},"In summary, the Stanley Controller is an advanced path-tracking algorithm known for its accuracy and stability, making it a valuable tool in the field of autonomous vehicle navigation. Proper implementation and tuning are essential to harness its full potential.",{"title":8,"searchDepth":316,"depth":316,"links":6443},[6444],{"id":6252,"depth":316,"text":6245,"children":6445},[6446,6447,6448],{"id":6070,"depth":325,"text":6073},{"id":6134,"depth":325,"text":6137},{"id":6197,"depth":325,"text":6200},"content:topics:robotics:stanley-controller.md","topics/robotics/stanley-controller.md",1694097624627]