[{"data":1,"prerenderedAt":2131},["Reactive",2],{"topics/":3},[4,1542,1733,1925],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":9,"description":10,"author":11,"slug":12,"tag":12,"body":13,"_type":1537,"_id":1538,"_source":1539,"_file":1540,"_extension":1541},"/topics/linear-mpc","topics",false,"","Linear Model Predictive Control","Introduction to Linear Model Predictive Control","Din Sokheng","linear-mpc",{"type":14,"children":15,"toc":1529},"root",[16,25,31,70,81,88,93,98,107,112,117,123,128,132,137,162,168,173,183,189,195,214,222,227,301,306,511,524,737,747,1188,1205,1416,1421,1501,1513,1519,1524],{"type":17,"tag":18,"props":19,"children":21},"element","h1",{"id":20},"what-is-model-predictive-control",[22],{"type":23,"value":24},"text","What is Model Predictive Control ?",{"type":17,"tag":26,"props":27,"children":28},"p",{},[29],{"type":23,"value":30},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":17,"tag":32,"props":33,"children":40},"div",{"className":34},[35,36,37,38,39],"grid","grid-cols-2","space-x-10","justify-center","items-center",[41,60],{"type":17,"tag":42,"props":43,"children":48},"figure",{"className":44},[45,46,47],"mb-4","inline-block","max-w-sm",[49,51],{"type":23,"value":50},"\n  ",{"type":17,"tag":52,"props":53,"children":59},"img",{"className":54,"src":56,"width":57,"height":58},[55],"mx-auto","/topics/nmpc/predict_horizon.png","600px","300px",[],{"type":17,"tag":42,"props":61,"children":63},{"className":62},[45,46,47],[64,65],{"type":23,"value":50},{"type":17,"tag":52,"props":66,"children":69},{"className":67,"src":68,"width":57,"height":58},[55],"/topics/nmpc/set_points.png",[],{"type":17,"tag":71,"props":72,"children":78},"figcaption",{"className":73},[74,75,76,77],"text-center","text-sm","text-neutral-600","dark:text-neutral-400",[79],{"type":23,"value":80},"\n      A car with finite horizons prediction and set point prediction over finite horizons.\n",{"type":17,"tag":82,"props":83,"children":85},"h2",{"id":84},"how-it-work",[86],{"type":23,"value":87},"How it work ?",{"type":17,"tag":26,"props":89,"children":90},{},[91],{"type":23,"value":92},"It works by solving the cost function that is produced by the sum of quadratic costs. For example, imagine you are riding a bike, and you want to get an ice cream because it is summer, and it tastes good ðŸ˜†. So, to get the ice cream, you need to grab your bike and ride it to the mart to buy one. What does it take to get you from your home to the mart store? Of course, it must be the energy produced by your muscles to pedal the bike and move. Another way to think about it is the cost of how the system would react to the desired position or point that you want it to reach. MPC have two types, they are Linear MPC and Nonlinear MPC. In this blog, we will only talk about Linear MPC.",{"type":17,"tag":82,"props":94,"children":95},{"id":12},[96],{"type":23,"value":97},"Linear MPC",{"type":17,"tag":26,"props":99,"children":100},{},[101,103],{"type":23,"value":102},"Linear MPC or Linear Model Predictive Control is an optimal control method that use with the system that it behavors linearly. It means that we can easily control this system with lost cost computation of the optimization and also ensure the lower risk of the system too!. ",{"type":17,"tag":104,"props":105,"children":106},"br",{},[],{"type":17,"tag":26,"props":108,"children":109},{},[110],{"type":23,"value":111},"Here is the formulation of the linear discrete system.",{"type":17,"tag":113,"props":114,"children":116},"math-render",{"math-code":115},"\nX_{k+1}=AX_{k}+BU_{k}",[],{"type":17,"tag":82,"props":118,"children":120},{"id":119},"formulation",[121],{"type":23,"value":122},"Formulation",{"type":17,"tag":26,"props":124,"children":125},{},[126],{"type":23,"value":127},"As I mentioned, this is quadratic cost. It consists of summation of all the cost that was produced over the number of horizontal prediction.",{"type":17,"tag":113,"props":129,"children":131},{"math-code":130},"J(x,u) = \\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N}, U_{N})",[],{"type":17,"tag":26,"props":133,"children":134},{},[135],{"type":23,"value":136},"Notation",{"type":17,"tag":138,"props":139,"children":140},"ul",{},[141,147,152,157],{"type":17,"tag":142,"props":143,"children":144},"li",{},[145],{"type":23,"value":146},"X is the state of the system. This shall be obtained from the optimiztion problem",{"type":17,"tag":142,"props":148,"children":149},{},[150],{"type":23,"value":151},"X_ref is the reference state of the system or desired input state.",{"type":17,"tag":142,"props":153,"children":154},{},[155],{"type":23,"value":156},"U is the input control of the system. This is a solution obtained from the optimization problem.",{"type":17,"tag":142,"props":158,"children":159},{},[160],{"type":23,"value":161},"U_ref is the reference control of the system or desired input control.",{"type":17,"tag":82,"props":163,"children":165},{"id":164},"was-it-really-that-good",[166],{"type":23,"value":167},"Was it really that good ?",{"type":17,"tag":26,"props":169,"children":170},{},[171],{"type":23,"value":172},"I use MPC to control the differential drive robot to move from it zero position the the desired postion that I want to follow !.\nI generate a circle trajectory and I fit this curve into my beautiful and robustness cost and then volia !!!.",{"type":17,"tag":42,"props":174,"children":176},{"className":175},[45,46,47],[177,178],{"type":23,"value":50},{"type":17,"tag":52,"props":179,"children":182},{"className":180,"src":181,"width":57,"height":58},[55],"/topics/nmpc/diff_mpc.png",[],{"type":17,"tag":71,"props":184,"children":186},{"className":185},[74,75,76,77],[187],{"type":23,"value":188},"\n    Plot of differential drive robot follow the circle trajectory !!!.\n",{"type":17,"tag":82,"props":190,"children":192},{"id":191},"how-to-implement-it-in-python",[193],{"type":23,"value":194},"How to implement it in Python?",{"type":17,"tag":26,"props":196,"children":197},{},[198,200,209,211],{"type":23,"value":199},"There are so many great way to implement this control everywhere with many mathematical optimization library!!!. But for the sake of god, I use Casadi and CVXPY which I think one of the most easy tool to use. I will draft some python code here, but I cannot include them all in this post. You can check it more on my github repository, I do open-source some of my work !!! ",{"type":17,"tag":201,"props":202,"children":206},"a",{"href":203,"rel":204},"https://github.com/SokhengDin/PathTracking",[205],"nofollow",[207],{"type":23,"value":208},"Github",{"type":23,"value":210},". ",{"type":17,"tag":104,"props":212,"children":213},{},[],{"type":17,"tag":26,"props":215,"children":216},{},[217,219],{"type":23,"value":218},"I recommend you guys to have your own virtual enviroment, so I would be easier to work with any other related project of control system. ",{"type":17,"tag":104,"props":220,"children":221},{},[],{"type":17,"tag":26,"props":223,"children":224},{},[225],{"type":23,"value":226},"Make sure that you have install",{"type":17,"tag":228,"props":229,"children":234},"code",{"className":230,"code":232,"language":233,"meta":8},[231],"language-bash","pip3 install casadi && pip3 install cvxpy\n","bash",[235],{"type":17,"tag":236,"props":237,"children":238},"pre",{},[239],{"type":17,"tag":228,"props":240,"children":241},{"__ignoreMap":8},[242],{"type":17,"tag":243,"props":244,"children":247},"span",{"class":245,"line":246},"line",1,[248,254,260,266,270,275,280,284,288,292,296],{"type":17,"tag":243,"props":249,"children":251},{"class":250},"ct-806137",[252],{"type":23,"value":253},"pip3",{"type":17,"tag":243,"props":255,"children":257},{"class":256},"ct-767297",[258],{"type":23,"value":259}," ",{"type":17,"tag":243,"props":261,"children":263},{"class":262},"ct-244866",[264],{"type":23,"value":265},"install",{"type":17,"tag":243,"props":267,"children":268},{"class":256},[269],{"type":23,"value":259},{"type":17,"tag":243,"props":271,"children":272},{"class":262},[273],{"type":23,"value":274},"casadi",{"type":17,"tag":243,"props":276,"children":277},{"class":256},[278],{"type":23,"value":279}," && ",{"type":17,"tag":243,"props":281,"children":282},{"class":250},[283],{"type":23,"value":253},{"type":17,"tag":243,"props":285,"children":286},{"class":256},[287],{"type":23,"value":259},{"type":17,"tag":243,"props":289,"children":290},{"class":262},[291],{"type":23,"value":265},{"type":17,"tag":243,"props":293,"children":294},{"class":256},[295],{"type":23,"value":259},{"type":17,"tag":243,"props":297,"children":298},{"class":262},[299],{"type":23,"value":300},"cvxpy",{"type":17,"tag":26,"props":302,"children":303},{},[304],{"type":23,"value":305},"It is a good idea to write your robot model as a class object in Python, because it can help handle the update state of your system. For me, I am gonna use Numpy for mathematical operation.",{"type":17,"tag":228,"props":307,"children":312},{"className":308,"code":310,"language":311,"meta":8},[309],"language-python","import numpy as np\n\nclass DifferentialDrive:\n\n    def forward_kinematic(self, yaw, v, omega):\n        vx = v * np.cos(yaw)\n        vy = v * np.sin(yaw)\n        vyaw = omega\n\n        return vx, vy, vyaw\n","python",[313],{"type":17,"tag":236,"props":314,"children":315},{},[316],{"type":17,"tag":228,"props":317,"children":318},{"__ignoreMap":8},[319,343,352,375,383,411,440,466,484,492],{"type":17,"tag":243,"props":320,"children":321},{"class":245,"line":246},[322,328,333,338],{"type":17,"tag":243,"props":323,"children":325},{"class":324},"ct-857441",[326],{"type":23,"value":327},"import",{"type":17,"tag":243,"props":329,"children":330},{"class":256},[331],{"type":23,"value":332}," numpy ",{"type":17,"tag":243,"props":334,"children":335},{"class":324},[336],{"type":23,"value":337},"as",{"type":17,"tag":243,"props":339,"children":340},{"class":256},[341],{"type":23,"value":342}," np\n",{"type":17,"tag":243,"props":344,"children":346},{"class":245,"line":345},2,[347],{"type":17,"tag":243,"props":348,"children":349},{},[350],{"type":23,"value":351},"\n",{"type":17,"tag":243,"props":353,"children":355},{"class":245,"line":354},3,[356,361,365,370],{"type":17,"tag":243,"props":357,"children":358},{"class":324},[359],{"type":23,"value":360},"class",{"type":17,"tag":243,"props":362,"children":363},{"class":256},[364],{"type":23,"value":259},{"type":17,"tag":243,"props":366,"children":367},{"class":250},[368],{"type":23,"value":369},"DifferentialDrive",{"type":17,"tag":243,"props":371,"children":372},{"class":256},[373],{"type":23,"value":374},":\n",{"type":17,"tag":243,"props":376,"children":378},{"class":245,"line":377},4,[379],{"type":17,"tag":243,"props":380,"children":381},{},[382],{"type":23,"value":351},{"type":17,"tag":243,"props":384,"children":386},{"class":245,"line":385},5,[387,392,397,401,406],{"type":17,"tag":243,"props":388,"children":389},{"class":256},[390],{"type":23,"value":391},"    ",{"type":17,"tag":243,"props":393,"children":394},{"class":324},[395],{"type":23,"value":396},"def",{"type":17,"tag":243,"props":398,"children":399},{"class":256},[400],{"type":23,"value":259},{"type":17,"tag":243,"props":402,"children":403},{"class":250},[404],{"type":23,"value":405},"forward_kinematic",{"type":17,"tag":243,"props":407,"children":408},{"class":256},[409],{"type":23,"value":410},"(self, yaw, v, omega):\n",{"type":17,"tag":243,"props":412,"children":414},{"class":245,"line":413},6,[415,420,425,430,435],{"type":17,"tag":243,"props":416,"children":417},{"class":256},[418],{"type":23,"value":419},"        vx ",{"type":17,"tag":243,"props":421,"children":422},{"class":324},[423],{"type":23,"value":424},"=",{"type":17,"tag":243,"props":426,"children":427},{"class":256},[428],{"type":23,"value":429}," v ",{"type":17,"tag":243,"props":431,"children":432},{"class":324},[433],{"type":23,"value":434},"*",{"type":17,"tag":243,"props":436,"children":437},{"class":256},[438],{"type":23,"value":439}," np.cos(yaw)\n",{"type":17,"tag":243,"props":441,"children":443},{"class":245,"line":442},7,[444,449,453,457,461],{"type":17,"tag":243,"props":445,"children":446},{"class":256},[447],{"type":23,"value":448},"        vy ",{"type":17,"tag":243,"props":450,"children":451},{"class":324},[452],{"type":23,"value":424},{"type":17,"tag":243,"props":454,"children":455},{"class":256},[456],{"type":23,"value":429},{"type":17,"tag":243,"props":458,"children":459},{"class":324},[460],{"type":23,"value":434},{"type":17,"tag":243,"props":462,"children":463},{"class":256},[464],{"type":23,"value":465}," np.sin(yaw)\n",{"type":17,"tag":243,"props":467,"children":469},{"class":245,"line":468},8,[470,475,479],{"type":17,"tag":243,"props":471,"children":472},{"class":256},[473],{"type":23,"value":474},"        vyaw ",{"type":17,"tag":243,"props":476,"children":477},{"class":324},[478],{"type":23,"value":424},{"type":17,"tag":243,"props":480,"children":481},{"class":256},[482],{"type":23,"value":483}," omega\n",{"type":17,"tag":243,"props":485,"children":487},{"class":245,"line":486},9,[488],{"type":17,"tag":243,"props":489,"children":490},{},[491],{"type":23,"value":351},{"type":17,"tag":243,"props":493,"children":495},{"class":245,"line":494},10,[496,501,506],{"type":17,"tag":243,"props":497,"children":498},{"class":256},[499],{"type":23,"value":500},"        ",{"type":17,"tag":243,"props":502,"children":503},{"class":324},[504],{"type":23,"value":505},"return",{"type":17,"tag":243,"props":507,"children":508},{"class":256},[509],{"type":23,"value":510}," vx, vy, vyaw",{"type":17,"tag":26,"props":512,"children":513},{},[514,516,522],{"type":23,"value":515},"Next add this update state function into our ",{"type":17,"tag":517,"props":518,"children":519},"strong",{},[520],{"type":23,"value":521},"DifferentialDrive ",{"type":23,"value":523}," class, by doing this we would have all the attribute of our robot system.",{"type":17,"tag":228,"props":525,"children":528},{"className":526,"code":527,"language":311,"meta":8},[309],"def update_state(self, x0, y0, yaw0, yaw, v, omega):\n\n  dx, dy, dyaw = self.robot_model.forward_kinematic(yaw, v, omega)\n\n  x_next = x0 + dx*self.dtau\n  y_next = y0 + dy*self.dtau\n  yaw_next = yaw0 + dyaw*self.dtau\n\n  return x_next, y_next, yaw_next\n",[529],{"type":17,"tag":236,"props":530,"children":531},{},[532],{"type":17,"tag":228,"props":533,"children":534},{"__ignoreMap":8},[535,556,563,590,597,637,675,713,720],{"type":17,"tag":243,"props":536,"children":537},{"class":245,"line":246},[538,542,546,551],{"type":17,"tag":243,"props":539,"children":540},{"class":324},[541],{"type":23,"value":396},{"type":17,"tag":243,"props":543,"children":544},{"class":256},[545],{"type":23,"value":259},{"type":17,"tag":243,"props":547,"children":548},{"class":250},[549],{"type":23,"value":550},"update_state",{"type":17,"tag":243,"props":552,"children":553},{"class":256},[554],{"type":23,"value":555},"(self, x0, y0, yaw0, yaw, v, omega):\n",{"type":17,"tag":243,"props":557,"children":558},{"class":245,"line":345},[559],{"type":17,"tag":243,"props":560,"children":561},{},[562],{"type":23,"value":351},{"type":17,"tag":243,"props":564,"children":565},{"class":245,"line":354},[566,571,575,579,585],{"type":17,"tag":243,"props":567,"children":568},{"class":256},[569],{"type":23,"value":570},"  dx, dy, dyaw ",{"type":17,"tag":243,"props":572,"children":573},{"class":324},[574],{"type":23,"value":424},{"type":17,"tag":243,"props":576,"children":577},{"class":256},[578],{"type":23,"value":259},{"type":17,"tag":243,"props":580,"children":582},{"class":581},"ct-533739",[583],{"type":23,"value":584},"self",{"type":17,"tag":243,"props":586,"children":587},{"class":256},[588],{"type":23,"value":589},".robot_model.forward_kinematic(yaw, v, omega)\n",{"type":17,"tag":243,"props":591,"children":592},{"class":245,"line":377},[593],{"type":17,"tag":243,"props":594,"children":595},{},[596],{"type":23,"value":351},{"type":17,"tag":243,"props":598,"children":599},{"class":245,"line":385},[600,605,609,614,619,624,628,632],{"type":17,"tag":243,"props":601,"children":602},{"class":256},[603],{"type":23,"value":604},"  x_next ",{"type":17,"tag":243,"props":606,"children":607},{"class":324},[608],{"type":23,"value":424},{"type":17,"tag":243,"props":610,"children":611},{"class":256},[612],{"type":23,"value":613}," x0 ",{"type":17,"tag":243,"props":615,"children":616},{"class":324},[617],{"type":23,"value":618},"+",{"type":17,"tag":243,"props":620,"children":621},{"class":256},[622],{"type":23,"value":623}," dx",{"type":17,"tag":243,"props":625,"children":626},{"class":324},[627],{"type":23,"value":434},{"type":17,"tag":243,"props":629,"children":630},{"class":581},[631],{"type":23,"value":584},{"type":17,"tag":243,"props":633,"children":634},{"class":256},[635],{"type":23,"value":636},".dtau\n",{"type":17,"tag":243,"props":638,"children":639},{"class":245,"line":413},[640,645,649,654,658,663,667,671],{"type":17,"tag":243,"props":641,"children":642},{"class":256},[643],{"type":23,"value":644},"  y_next ",{"type":17,"tag":243,"props":646,"children":647},{"class":324},[648],{"type":23,"value":424},{"type":17,"tag":243,"props":650,"children":651},{"class":256},[652],{"type":23,"value":653}," y0 ",{"type":17,"tag":243,"props":655,"children":656},{"class":324},[657],{"type":23,"value":618},{"type":17,"tag":243,"props":659,"children":660},{"class":256},[661],{"type":23,"value":662}," dy",{"type":17,"tag":243,"props":664,"children":665},{"class":324},[666],{"type":23,"value":434},{"type":17,"tag":243,"props":668,"children":669},{"class":581},[670],{"type":23,"value":584},{"type":17,"tag":243,"props":672,"children":673},{"class":256},[674],{"type":23,"value":636},{"type":17,"tag":243,"props":676,"children":677},{"class":245,"line":442},[678,683,687,692,696,701,705,709],{"type":17,"tag":243,"props":679,"children":680},{"class":256},[681],{"type":23,"value":682},"  yaw_next ",{"type":17,"tag":243,"props":684,"children":685},{"class":324},[686],{"type":23,"value":424},{"type":17,"tag":243,"props":688,"children":689},{"class":256},[690],{"type":23,"value":691}," yaw0 ",{"type":17,"tag":243,"props":693,"children":694},{"class":324},[695],{"type":23,"value":618},{"type":17,"tag":243,"props":697,"children":698},{"class":256},[699],{"type":23,"value":700}," dyaw",{"type":17,"tag":243,"props":702,"children":703},{"class":324},[704],{"type":23,"value":434},{"type":17,"tag":243,"props":706,"children":707},{"class":581},[708],{"type":23,"value":584},{"type":17,"tag":243,"props":710,"children":711},{"class":256},[712],{"type":23,"value":636},{"type":17,"tag":243,"props":714,"children":715},{"class":245,"line":468},[716],{"type":17,"tag":243,"props":717,"children":718},{},[719],{"type":23,"value":351},{"type":17,"tag":243,"props":721,"children":722},{"class":245,"line":486},[723,728,732],{"type":17,"tag":243,"props":724,"children":725},{"class":256},[726],{"type":23,"value":727},"  ",{"type":17,"tag":243,"props":729,"children":730},{"class":324},[731],{"type":23,"value":505},{"type":17,"tag":243,"props":733,"children":734},{"class":256},[735],{"type":23,"value":736}," x_next, y_next, yaw_next",{"type":17,"tag":26,"props":738,"children":739},{},[740,742,745],{"type":23,"value":741},"How to define the quadratic cost in Python with CVXPY ? and set the constraint for your system ? ",{"type":17,"tag":104,"props":743,"children":744},{},[],{"type":23,"value":746},"\nHere, how you would write it.",{"type":17,"tag":228,"props":748,"children":751},{"className":749,"code":750,"language":311,"meta":8},[309],"for t in range(T):\n    cost += cvxpy.quad_form(u[:, t], R)\n\n    if t != 0:\n        cost += cvxpy.quad_form(x_ref[:, t] - x[:, t], Q)\n\n    A, B, C = get_linear_model_matrix(x_ref, u_ref)\n    constraints += [x[:, t + 1] == A @ x[:, t] + B @ u[:, t] + C]\n\n    if t \u003C (T - 1):\n        cost += cvxpy.quad_form(u[:, t + 1] - u[:, t], Rd)\n        constraints += [cvxpy.abs(u[1, t + 1] - u[1, t]) \u003C= DESIRED_CONTROL]\n\ncost += cvxpy.quad_form(xref[:, T] - x[:, T], Q)\n",[752],{"type":17,"tag":236,"props":753,"children":754},{},[755],{"type":17,"tag":228,"props":756,"children":757},{"__ignoreMap":8},[758,790,808,815,849,876,883,900,982,989,1031,1073,1153,1161],{"type":17,"tag":243,"props":759,"children":760},{"class":245,"line":246},[761,766,771,776,780,785],{"type":17,"tag":243,"props":762,"children":763},{"class":324},[764],{"type":23,"value":765},"for",{"type":17,"tag":243,"props":767,"children":768},{"class":256},[769],{"type":23,"value":770}," t ",{"type":17,"tag":243,"props":772,"children":773},{"class":324},[774],{"type":23,"value":775},"in",{"type":17,"tag":243,"props":777,"children":778},{"class":256},[779],{"type":23,"value":259},{"type":17,"tag":243,"props":781,"children":782},{"class":581},[783],{"type":23,"value":784},"range",{"type":17,"tag":243,"props":786,"children":787},{"class":256},[788],{"type":23,"value":789},"(T):\n",{"type":17,"tag":243,"props":791,"children":792},{"class":245,"line":345},[793,798,803],{"type":17,"tag":243,"props":794,"children":795},{"class":256},[796],{"type":23,"value":797},"    cost ",{"type":17,"tag":243,"props":799,"children":800},{"class":324},[801],{"type":23,"value":802},"+=",{"type":17,"tag":243,"props":804,"children":805},{"class":256},[806],{"type":23,"value":807}," cvxpy.quad_form(u[:, t], R)\n",{"type":17,"tag":243,"props":809,"children":810},{"class":245,"line":354},[811],{"type":17,"tag":243,"props":812,"children":813},{},[814],{"type":23,"value":351},{"type":17,"tag":243,"props":816,"children":817},{"class":245,"line":377},[818,822,827,831,836,840,845],{"type":17,"tag":243,"props":819,"children":820},{"class":256},[821],{"type":23,"value":391},{"type":17,"tag":243,"props":823,"children":824},{"class":324},[825],{"type":23,"value":826},"if",{"type":17,"tag":243,"props":828,"children":829},{"class":256},[830],{"type":23,"value":770},{"type":17,"tag":243,"props":832,"children":833},{"class":324},[834],{"type":23,"value":835},"!=",{"type":17,"tag":243,"props":837,"children":838},{"class":256},[839],{"type":23,"value":259},{"type":17,"tag":243,"props":841,"children":842},{"class":581},[843],{"type":23,"value":844},"0",{"type":17,"tag":243,"props":846,"children":847},{"class":256},[848],{"type":23,"value":374},{"type":17,"tag":243,"props":850,"children":851},{"class":245,"line":385},[852,857,861,866,871],{"type":17,"tag":243,"props":853,"children":854},{"class":256},[855],{"type":23,"value":856},"        cost ",{"type":17,"tag":243,"props":858,"children":859},{"class":324},[860],{"type":23,"value":802},{"type":17,"tag":243,"props":862,"children":863},{"class":256},[864],{"type":23,"value":865}," cvxpy.quad_form(x_ref[:, t] ",{"type":17,"tag":243,"props":867,"children":868},{"class":324},[869],{"type":23,"value":870},"-",{"type":17,"tag":243,"props":872,"children":873},{"class":256},[874],{"type":23,"value":875}," x[:, t], Q)\n",{"type":17,"tag":243,"props":877,"children":878},{"class":245,"line":413},[879],{"type":17,"tag":243,"props":880,"children":881},{},[882],{"type":23,"value":351},{"type":17,"tag":243,"props":884,"children":885},{"class":245,"line":442},[886,891,895],{"type":17,"tag":243,"props":887,"children":888},{"class":256},[889],{"type":23,"value":890},"    A, B, C ",{"type":17,"tag":243,"props":892,"children":893},{"class":324},[894],{"type":23,"value":424},{"type":17,"tag":243,"props":896,"children":897},{"class":256},[898],{"type":23,"value":899}," get_linear_model_matrix(x_ref, u_ref)\n",{"type":17,"tag":243,"props":901,"children":902},{"class":245,"line":468},[903,908,912,917,921,925,930,935,940,945,950,955,959,964,968,973,977],{"type":17,"tag":243,"props":904,"children":905},{"class":256},[906],{"type":23,"value":907},"    constraints ",{"type":17,"tag":243,"props":909,"children":910},{"class":324},[911],{"type":23,"value":802},{"type":17,"tag":243,"props":913,"children":914},{"class":256},[915],{"type":23,"value":916}," [x[:, t ",{"type":17,"tag":243,"props":918,"children":919},{"class":324},[920],{"type":23,"value":618},{"type":17,"tag":243,"props":922,"children":923},{"class":256},[924],{"type":23,"value":259},{"type":17,"tag":243,"props":926,"children":927},{"class":581},[928],{"type":23,"value":929},"1",{"type":17,"tag":243,"props":931,"children":932},{"class":256},[933],{"type":23,"value":934},"] ",{"type":17,"tag":243,"props":936,"children":937},{"class":324},[938],{"type":23,"value":939},"==",{"type":17,"tag":243,"props":941,"children":942},{"class":256},[943],{"type":23,"value":944}," A ",{"type":17,"tag":243,"props":946,"children":947},{"class":324},[948],{"type":23,"value":949},"@",{"type":17,"tag":243,"props":951,"children":952},{"class":256},[953],{"type":23,"value":954}," x[:, t] ",{"type":17,"tag":243,"props":956,"children":957},{"class":324},[958],{"type":23,"value":618},{"type":17,"tag":243,"props":960,"children":961},{"class":256},[962],{"type":23,"value":963}," B ",{"type":17,"tag":243,"props":965,"children":966},{"class":324},[967],{"type":23,"value":949},{"type":17,"tag":243,"props":969,"children":970},{"class":256},[971],{"type":23,"value":972}," u[:, t] ",{"type":17,"tag":243,"props":974,"children":975},{"class":324},[976],{"type":23,"value":618},{"type":17,"tag":243,"props":978,"children":979},{"class":256},[980],{"type":23,"value":981}," C]\n",{"type":17,"tag":243,"props":983,"children":984},{"class":245,"line":486},[985],{"type":17,"tag":243,"props":986,"children":987},{},[988],{"type":23,"value":351},{"type":17,"tag":243,"props":990,"children":991},{"class":245,"line":494},[992,996,1000,1004,1009,1014,1018,1022,1026],{"type":17,"tag":243,"props":993,"children":994},{"class":256},[995],{"type":23,"value":391},{"type":17,"tag":243,"props":997,"children":998},{"class":324},[999],{"type":23,"value":826},{"type":17,"tag":243,"props":1001,"children":1002},{"class":256},[1003],{"type":23,"value":770},{"type":17,"tag":243,"props":1005,"children":1006},{"class":324},[1007],{"type":23,"value":1008},"\u003C",{"type":17,"tag":243,"props":1010,"children":1011},{"class":256},[1012],{"type":23,"value":1013}," (T ",{"type":17,"tag":243,"props":1015,"children":1016},{"class":324},[1017],{"type":23,"value":870},{"type":17,"tag":243,"props":1019,"children":1020},{"class":256},[1021],{"type":23,"value":259},{"type":17,"tag":243,"props":1023,"children":1024},{"class":581},[1025],{"type":23,"value":929},{"type":17,"tag":243,"props":1027,"children":1028},{"class":256},[1029],{"type":23,"value":1030},"):\n",{"type":17,"tag":243,"props":1032,"children":1034},{"class":245,"line":1033},11,[1035,1039,1043,1048,1052,1056,1060,1064,1068],{"type":17,"tag":243,"props":1036,"children":1037},{"class":256},[1038],{"type":23,"value":856},{"type":17,"tag":243,"props":1040,"children":1041},{"class":324},[1042],{"type":23,"value":802},{"type":17,"tag":243,"props":1044,"children":1045},{"class":256},[1046],{"type":23,"value":1047}," cvxpy.quad_form(u[:, t ",{"type":17,"tag":243,"props":1049,"children":1050},{"class":324},[1051],{"type":23,"value":618},{"type":17,"tag":243,"props":1053,"children":1054},{"class":256},[1055],{"type":23,"value":259},{"type":17,"tag":243,"props":1057,"children":1058},{"class":581},[1059],{"type":23,"value":929},{"type":17,"tag":243,"props":1061,"children":1062},{"class":256},[1063],{"type":23,"value":934},{"type":17,"tag":243,"props":1065,"children":1066},{"class":324},[1067],{"type":23,"value":870},{"type":17,"tag":243,"props":1069,"children":1070},{"class":256},[1071],{"type":23,"value":1072}," u[:, t], Rd)\n",{"type":17,"tag":243,"props":1074,"children":1076},{"class":245,"line":1075},12,[1077,1082,1086,1091,1095,1100,1104,1108,1112,1116,1120,1125,1129,1134,1139,1143,1148],{"type":17,"tag":243,"props":1078,"children":1079},{"class":256},[1080],{"type":23,"value":1081},"        constraints ",{"type":17,"tag":243,"props":1083,"children":1084},{"class":324},[1085],{"type":23,"value":802},{"type":17,"tag":243,"props":1087,"children":1088},{"class":256},[1089],{"type":23,"value":1090}," [cvxpy.abs(u[",{"type":17,"tag":243,"props":1092,"children":1093},{"class":581},[1094],{"type":23,"value":929},{"type":17,"tag":243,"props":1096,"children":1097},{"class":256},[1098],{"type":23,"value":1099},", t ",{"type":17,"tag":243,"props":1101,"children":1102},{"class":324},[1103],{"type":23,"value":618},{"type":17,"tag":243,"props":1105,"children":1106},{"class":256},[1107],{"type":23,"value":259},{"type":17,"tag":243,"props":1109,"children":1110},{"class":581},[1111],{"type":23,"value":929},{"type":17,"tag":243,"props":1113,"children":1114},{"class":256},[1115],{"type":23,"value":934},{"type":17,"tag":243,"props":1117,"children":1118},{"class":324},[1119],{"type":23,"value":870},{"type":17,"tag":243,"props":1121,"children":1122},{"class":256},[1123],{"type":23,"value":1124}," u[",{"type":17,"tag":243,"props":1126,"children":1127},{"class":581},[1128],{"type":23,"value":929},{"type":17,"tag":243,"props":1130,"children":1131},{"class":256},[1132],{"type":23,"value":1133},", t]) ",{"type":17,"tag":243,"props":1135,"children":1136},{"class":324},[1137],{"type":23,"value":1138},"\u003C=",{"type":17,"tag":243,"props":1140,"children":1141},{"class":256},[1142],{"type":23,"value":259},{"type":17,"tag":243,"props":1144,"children":1145},{"class":581},[1146],{"type":23,"value":1147},"DESIRED_CONTROL",{"type":17,"tag":243,"props":1149,"children":1150},{"class":256},[1151],{"type":23,"value":1152},"]\n",{"type":17,"tag":243,"props":1154,"children":1156},{"class":245,"line":1155},13,[1157],{"type":17,"tag":243,"props":1158,"children":1159},{},[1160],{"type":23,"value":351},{"type":17,"tag":243,"props":1162,"children":1164},{"class":245,"line":1163},14,[1165,1170,1174,1179,1183],{"type":17,"tag":243,"props":1166,"children":1167},{"class":256},[1168],{"type":23,"value":1169},"cost ",{"type":17,"tag":243,"props":1171,"children":1172},{"class":324},[1173],{"type":23,"value":802},{"type":17,"tag":243,"props":1175,"children":1176},{"class":256},[1177],{"type":23,"value":1178}," cvxpy.quad_form(xref[:, T] ",{"type":17,"tag":243,"props":1180,"children":1181},{"class":324},[1182],{"type":23,"value":870},{"type":17,"tag":243,"props":1184,"children":1185},{"class":256},[1186],{"type":23,"value":1187}," x[:, T], Q)",{"type":17,"tag":26,"props":1189,"children":1190},{},[1191,1193,1198,1200,1203],{"type":23,"value":1192},"The function ",{"type":17,"tag":517,"props":1194,"children":1195},{},[1196],{"type":23,"value":1197}," get_linear_model_matrix ",{"type":23,"value":1199}," would return the linearized model as the shown as the formula above. ",{"type":17,"tag":104,"props":1201,"children":1202},{},[],{"type":23,"value":1204},"\nWe can set more constraint by adding",{"type":17,"tag":228,"props":1206,"children":1209},{"className":1207,"code":1208,"language":311,"meta":8},[309],"  constraints += [x[:, 0] == x0]\n  constraints += [x[2, :] \u003C= MAX_SPEED]\n  constraints += [x[2, :] >= MIN_SPEED]\n  constraints += [cvxpy.abs(u[0, :]) \u003C= MAX_ACCEL]\n  constraints += [cvxpy.abs(u[1, :]) \u003C= MAX_STEER]\n",[1210],{"type":17,"tag":236,"props":1211,"children":1212},{},[1213],{"type":17,"tag":228,"props":1214,"children":1215},{"__ignoreMap":8},[1216,1250,1293,1334,1375],{"type":17,"tag":243,"props":1217,"children":1218},{"class":245,"line":246},[1219,1224,1228,1233,1237,1241,1245],{"type":17,"tag":243,"props":1220,"children":1221},{"class":256},[1222],{"type":23,"value":1223},"  constraints ",{"type":17,"tag":243,"props":1225,"children":1226},{"class":324},[1227],{"type":23,"value":802},{"type":17,"tag":243,"props":1229,"children":1230},{"class":256},[1231],{"type":23,"value":1232}," [x[:, ",{"type":17,"tag":243,"props":1234,"children":1235},{"class":581},[1236],{"type":23,"value":844},{"type":17,"tag":243,"props":1238,"children":1239},{"class":256},[1240],{"type":23,"value":934},{"type":17,"tag":243,"props":1242,"children":1243},{"class":324},[1244],{"type":23,"value":939},{"type":17,"tag":243,"props":1246,"children":1247},{"class":256},[1248],{"type":23,"value":1249}," x0]\n",{"type":17,"tag":243,"props":1251,"children":1252},{"class":245,"line":345},[1253,1257,1261,1266,1271,1276,1280,1284,1289],{"type":17,"tag":243,"props":1254,"children":1255},{"class":256},[1256],{"type":23,"value":1223},{"type":17,"tag":243,"props":1258,"children":1259},{"class":324},[1260],{"type":23,"value":802},{"type":17,"tag":243,"props":1262,"children":1263},{"class":256},[1264],{"type":23,"value":1265}," [x[",{"type":17,"tag":243,"props":1267,"children":1268},{"class":581},[1269],{"type":23,"value":1270},"2",{"type":17,"tag":243,"props":1272,"children":1273},{"class":256},[1274],{"type":23,"value":1275},", :] ",{"type":17,"tag":243,"props":1277,"children":1278},{"class":324},[1279],{"type":23,"value":1138},{"type":17,"tag":243,"props":1281,"children":1282},{"class":256},[1283],{"type":23,"value":259},{"type":17,"tag":243,"props":1285,"children":1286},{"class":581},[1287],{"type":23,"value":1288},"MAX_SPEED",{"type":17,"tag":243,"props":1290,"children":1291},{"class":256},[1292],{"type":23,"value":1152},{"type":17,"tag":243,"props":1294,"children":1295},{"class":245,"line":354},[1296,1300,1304,1308,1312,1316,1321,1325,1330],{"type":17,"tag":243,"props":1297,"children":1298},{"class":256},[1299],{"type":23,"value":1223},{"type":17,"tag":243,"props":1301,"children":1302},{"class":324},[1303],{"type":23,"value":802},{"type":17,"tag":243,"props":1305,"children":1306},{"class":256},[1307],{"type":23,"value":1265},{"type":17,"tag":243,"props":1309,"children":1310},{"class":581},[1311],{"type":23,"value":1270},{"type":17,"tag":243,"props":1313,"children":1314},{"class":256},[1315],{"type":23,"value":1275},{"type":17,"tag":243,"props":1317,"children":1318},{"class":324},[1319],{"type":23,"value":1320},">=",{"type":17,"tag":243,"props":1322,"children":1323},{"class":256},[1324],{"type":23,"value":259},{"type":17,"tag":243,"props":1326,"children":1327},{"class":581},[1328],{"type":23,"value":1329},"MIN_SPEED",{"type":17,"tag":243,"props":1331,"children":1332},{"class":256},[1333],{"type":23,"value":1152},{"type":17,"tag":243,"props":1335,"children":1336},{"class":245,"line":377},[1337,1341,1345,1349,1353,1358,1362,1366,1371],{"type":17,"tag":243,"props":1338,"children":1339},{"class":256},[1340],{"type":23,"value":1223},{"type":17,"tag":243,"props":1342,"children":1343},{"class":324},[1344],{"type":23,"value":802},{"type":17,"tag":243,"props":1346,"children":1347},{"class":256},[1348],{"type":23,"value":1090},{"type":17,"tag":243,"props":1350,"children":1351},{"class":581},[1352],{"type":23,"value":844},{"type":17,"tag":243,"props":1354,"children":1355},{"class":256},[1356],{"type":23,"value":1357},", :]) ",{"type":17,"tag":243,"props":1359,"children":1360},{"class":324},[1361],{"type":23,"value":1138},{"type":17,"tag":243,"props":1363,"children":1364},{"class":256},[1365],{"type":23,"value":259},{"type":17,"tag":243,"props":1367,"children":1368},{"class":581},[1369],{"type":23,"value":1370},"MAX_ACCEL",{"type":17,"tag":243,"props":1372,"children":1373},{"class":256},[1374],{"type":23,"value":1152},{"type":17,"tag":243,"props":1376,"children":1377},{"class":245,"line":385},[1378,1382,1386,1390,1394,1398,1402,1406,1411],{"type":17,"tag":243,"props":1379,"children":1380},{"class":256},[1381],{"type":23,"value":1223},{"type":17,"tag":243,"props":1383,"children":1384},{"class":324},[1385],{"type":23,"value":802},{"type":17,"tag":243,"props":1387,"children":1388},{"class":256},[1389],{"type":23,"value":1090},{"type":17,"tag":243,"props":1391,"children":1392},{"class":581},[1393],{"type":23,"value":929},{"type":17,"tag":243,"props":1395,"children":1396},{"class":256},[1397],{"type":23,"value":1357},{"type":17,"tag":243,"props":1399,"children":1400},{"class":324},[1401],{"type":23,"value":1138},{"type":17,"tag":243,"props":1403,"children":1404},{"class":256},[1405],{"type":23,"value":259},{"type":17,"tag":243,"props":1407,"children":1408},{"class":581},[1409],{"type":23,"value":1410},"MAX_STEER",{"type":17,"tag":243,"props":1412,"children":1413},{"class":256},[1414],{"type":23,"value":1415},"]",{"type":17,"tag":26,"props":1417,"children":1418},{},[1419],{"type":23,"value":1420},"Finally, we define the optimizer for our system by",{"type":17,"tag":228,"props":1422,"children":1425},{"className":1423,"code":1424,"language":311,"meta":8},[309],"prob = cvxpy.Problem(cvxpy.Minimize(cost), constraints)\nprob.solve(solver=cvxpy.ECOS, verbose=False)\n",[1426],{"type":17,"tag":236,"props":1427,"children":1428},{},[1429],{"type":17,"tag":228,"props":1430,"children":1431},{"__ignoreMap":8},[1432,1449],{"type":17,"tag":243,"props":1433,"children":1434},{"class":245,"line":246},[1435,1440,1444],{"type":17,"tag":243,"props":1436,"children":1437},{"class":256},[1438],{"type":23,"value":1439},"prob ",{"type":17,"tag":243,"props":1441,"children":1442},{"class":324},[1443],{"type":23,"value":424},{"type":17,"tag":243,"props":1445,"children":1446},{"class":256},[1447],{"type":23,"value":1448}," cvxpy.Problem(cvxpy.Minimize(cost), constraints)\n",{"type":17,"tag":243,"props":1450,"children":1451},{"class":245,"line":345},[1452,1457,1463,1467,1472,1477,1482,1487,1491,1496],{"type":17,"tag":243,"props":1453,"children":1454},{"class":256},[1455],{"type":23,"value":1456},"prob.solve(",{"type":17,"tag":243,"props":1458,"children":1460},{"class":1459},"ct-657843",[1461],{"type":23,"value":1462},"solver",{"type":17,"tag":243,"props":1464,"children":1465},{"class":324},[1466],{"type":23,"value":424},{"type":17,"tag":243,"props":1468,"children":1469},{"class":256},[1470],{"type":23,"value":1471},"cvxpy.",{"type":17,"tag":243,"props":1473,"children":1474},{"class":581},[1475],{"type":23,"value":1476},"ECOS",{"type":17,"tag":243,"props":1478,"children":1479},{"class":256},[1480],{"type":23,"value":1481},", ",{"type":17,"tag":243,"props":1483,"children":1484},{"class":1459},[1485],{"type":23,"value":1486},"verbose",{"type":17,"tag":243,"props":1488,"children":1489},{"class":324},[1490],{"type":23,"value":424},{"type":17,"tag":243,"props":1492,"children":1493},{"class":581},[1494],{"type":23,"value":1495},"False",{"type":17,"tag":243,"props":1497,"children":1498},{"class":256},[1499],{"type":23,"value":1500},")",{"type":17,"tag":26,"props":1502,"children":1503},{},[1504,1506],{"type":23,"value":1505},"For more detail about using CVXPY, here is the link ",{"type":17,"tag":201,"props":1507,"children":1510},{"href":1508,"rel":1509},"https://www.cvxpy.org",[205],[1511],{"type":23,"value":1512},"CVXPY",{"type":17,"tag":82,"props":1514,"children":1516},{"id":1515},"in-conclusion",[1517],{"type":23,"value":1518},"In conclusion",{"type":17,"tag":26,"props":1520,"children":1521},{},[1522],{"type":23,"value":1523},"In my opinion, I think MPC is suitable for the control system, since it can provide the significant control input that was predicted over the finite future of time. This can ensure the safety of the system and also can provide a quick look or reaction to the control action of the system too. Next post, I will explain about Nonlinear Model Predictive Control by using Casadi framework for mathematical optimization.",{"type":17,"tag":1525,"children":1526},"style",[1527],{"type":23,"value":1528},".ct-806137{color:#B392F0;}\n.ct-767297{color:#E1E4E8;}\n.ct-244866{color:#9ECBFF;}\n.ct-857441{color:#F97583;}\n.ct-533739{color:#79B8FF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":345,"depth":345,"links":1530},[1531,1532,1533,1534,1535,1536],{"id":84,"depth":345,"text":87},{"id":12,"depth":345,"text":97},{"id":119,"depth":345,"text":122},{"id":164,"depth":345,"text":167},{"id":191,"depth":345,"text":194},{"id":1515,"depth":345,"text":1518},"markdown","content:topics:linear-mpc.md","content","topics/linear-mpc.md","md",{"_path":1543,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":1544,"description":1545,"slug":1546,"tag":1546,"body":1547,"_type":1537,"_id":1731,"_source":1539,"_file":1732,"_extension":1541},"/topics/pid-controller","PID Controller","Introduction to PID Controller","pid",{"type":14,"children":1548,"toc":1724},[1549,1554,1565,1572,1577,1611,1617,1622,1665,1671,1676,1719],{"type":17,"tag":82,"props":1550,"children":1552},{"id":1551},"pid-controller",[1553],{"type":23,"value":1544},{"type":17,"tag":26,"props":1555,"children":1556},{},[1557,1559,1563],{"type":23,"value":1558},"The ",{"type":17,"tag":517,"props":1560,"children":1561},{},[1562],{"type":23,"value":1544},{"type":23,"value":1564},", short for Proportional-Integral-Derivative Controller, is a widely-used feedback control system algorithm in various engineering applications. It is designed to regulate or stabilize a system's output by continuously adjusting an input control signal based on the difference between a desired setpoint and the actual system output.",{"type":17,"tag":1566,"props":1567,"children":1569},"h3",{"id":1568},"principle-of-operation",[1570],{"type":23,"value":1571},"Principle of Operation",{"type":17,"tag":26,"props":1573,"children":1574},{},[1575],{"type":23,"value":1576},"The PID Controller operates based on three main components:",{"type":17,"tag":1578,"props":1579,"children":1580},"ol",{},[1581,1591,1601],{"type":17,"tag":142,"props":1582,"children":1583},{},[1584,1589],{"type":17,"tag":517,"props":1585,"children":1586},{},[1587],{"type":23,"value":1588},"Proportional (P) Control",{"type":23,"value":1590},": The proportional term responds to the current error between the desired setpoint and the actual system output. It produces a control signal that is directly proportional to this error. The proportionality constant, often denoted as \"Kp,\" determines the strength of this response. The higher the Kp value, the more aggressive the controller's reaction to errors.",{"type":17,"tag":142,"props":1592,"children":1593},{},[1594,1599],{"type":17,"tag":517,"props":1595,"children":1596},{},[1597],{"type":23,"value":1598},"Integral (I) Control",{"type":23,"value":1600},": The integral term considers the accumulation of past errors over time. It aims to eliminate any steady-state error by calculating the integral of the error signal. The integral constant, denoted as \"Ki,\" determines the rate at which past errors are integrated. A higher Ki value increases the controller's ability to eliminate long-term errors but may introduce overshoot.",{"type":17,"tag":142,"props":1602,"children":1603},{},[1604,1609],{"type":17,"tag":517,"props":1605,"children":1606},{},[1607],{"type":23,"value":1608},"Derivative (D) Control",{"type":23,"value":1610},": The derivative term anticipates future error by examining the rate of change of the error signal. It produces a control signal that counteracts rapid changes in the error. The derivative constant, denoted as \"Kd,\" influences the sensitivity of the controller to changes in error. A higher Kd value can help dampen oscillations but may lead to sluggish responses.",{"type":17,"tag":1566,"props":1612,"children":1614},{"id":1613},"advantages",[1615],{"type":23,"value":1616},"Advantages",{"type":17,"tag":26,"props":1618,"children":1619},{},[1620],{"type":23,"value":1621},"The PID Controller offers several advantages:",{"type":17,"tag":138,"props":1623,"children":1624},{},[1625,1635,1645,1655],{"type":17,"tag":142,"props":1626,"children":1627},{},[1628,1633],{"type":17,"tag":517,"props":1629,"children":1630},{},[1631],{"type":23,"value":1632},"Versatility",{"type":23,"value":1634},": It is applicable to a wide range of control systems, including temperature control, motor control, robotics, and more.",{"type":17,"tag":142,"props":1636,"children":1637},{},[1638,1643],{"type":17,"tag":517,"props":1639,"children":1640},{},[1641],{"type":23,"value":1642},"Stability",{"type":23,"value":1644},": When properly tuned, a PID Controller can achieve stable and precise control of a system's output, even in the presence of disturbances.",{"type":17,"tag":142,"props":1646,"children":1647},{},[1648,1653],{"type":17,"tag":517,"props":1649,"children":1650},{},[1651],{"type":23,"value":1652},"Real-Time Control",{"type":23,"value":1654},": The PID algorithm is computationally efficient and can operate in real-time, making it suitable for time-critical applications.",{"type":17,"tag":142,"props":1656,"children":1657},{},[1658,1663],{"type":17,"tag":517,"props":1659,"children":1660},{},[1661],{"type":23,"value":1662},"Tuning Flexibility",{"type":23,"value":1664},": Although PID tuning can be challenging, it offers flexibility to adjust controller parameters (Kp, Ki, Kd) to optimize performance for specific applications.",{"type":17,"tag":1566,"props":1666,"children":1668},{"id":1667},"limitations",[1669],{"type":23,"value":1670},"Limitations",{"type":17,"tag":26,"props":1672,"children":1673},{},[1674],{"type":23,"value":1675},"Despite its advantages, the PID Controller has some limitations:",{"type":17,"tag":138,"props":1677,"children":1678},{},[1679,1689,1699,1709],{"type":17,"tag":142,"props":1680,"children":1681},{},[1682,1687],{"type":17,"tag":517,"props":1683,"children":1684},{},[1685],{"type":23,"value":1686},"Tuning Complexity",{"type":23,"value":1688},": Tuning the PID constants (Kp, Ki, Kd) can be a complex and time-consuming process, requiring domain expertise and often performed through trial and error.",{"type":17,"tag":142,"props":1690,"children":1691},{},[1692,1697],{"type":17,"tag":517,"props":1693,"children":1694},{},[1695],{"type":23,"value":1696},"Nonlinear Systems",{"type":23,"value":1698},": PID control may not perform well for highly nonlinear systems or systems with varying dynamics.",{"type":17,"tag":142,"props":1700,"children":1701},{},[1702,1707],{"type":17,"tag":517,"props":1703,"children":1704},{},[1705],{"type":23,"value":1706},"Lack of Adaptability",{"type":23,"value":1708},": It does not adapt well to changing system characteristics or varying operating conditions without retuning.",{"type":17,"tag":142,"props":1710,"children":1711},{},[1712,1717],{"type":17,"tag":517,"props":1713,"children":1714},{},[1715],{"type":23,"value":1716},"Overshoot and Oscillations",{"type":23,"value":1718},": Poorly tuned PID controllers can lead to overshoot (exceeding the setpoint) and oscillations (rapid back-and-forth movements) in the system output.",{"type":17,"tag":26,"props":1720,"children":1721},{},[1722],{"type":23,"value":1723},"In summary, the PID Controller is a versatile and widely-used control algorithm that can achieve stable and precise control in various applications. Proper tuning of the PID constants is essential to optimize its performance for a specific system.",{"title":8,"searchDepth":345,"depth":345,"links":1725},[1726],{"id":1551,"depth":345,"text":1544,"children":1727},[1728,1729,1730],{"id":1568,"depth":354,"text":1571},{"id":1613,"depth":354,"text":1616},{"id":1667,"depth":354,"text":1670},"content:topics:pid-controller.md","topics/pid-controller.md",{"_path":1734,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":1735,"description":1736,"slug":1737,"tag":1737,"body":1738,"_type":1537,"_id":1923,"_source":1539,"_file":1924,"_extension":1541},"/topics/pure-pursuit","Pure Pursuit Controller","Introduction to Pure Pursuit Controller","pure-pursuit",{"type":14,"children":1739,"toc":1916},[1740,1745,1755,1759,1764,1817,1821,1826,1879,1883,1888,1911],{"type":17,"tag":82,"props":1741,"children":1743},{"id":1742},"pure-pursuit-controller",[1744],{"type":23,"value":1735},{"type":17,"tag":26,"props":1746,"children":1747},{},[1748,1749,1753],{"type":23,"value":1558},{"type":17,"tag":517,"props":1750,"children":1751},{},[1752],{"type":23,"value":1735},{"type":23,"value":1754}," is a widely-used path-tracking algorithm in robotics and autonomous vehicle navigation. Its primary objective is to guide a vehicle or robot along a predefined path while ensuring precise path-following.",{"type":17,"tag":1566,"props":1756,"children":1757},{"id":1568},[1758],{"type":23,"value":1571},{"type":17,"tag":26,"props":1760,"children":1761},{},[1762],{"type":23,"value":1763},"The operation of the Pure Pursuit Controller is based on a straightforward concept:",{"type":17,"tag":1578,"props":1765,"children":1766},{},[1767,1777,1787,1797,1807],{"type":17,"tag":142,"props":1768,"children":1769},{},[1770,1775],{"type":17,"tag":517,"props":1771,"children":1772},{},[1773],{"type":23,"value":1774},"Path Definition",{"type":23,"value":1776},": The controller works with a defined path, often represented as a series of waypoints or a continuous curve, each associated with specific coordinates (x, y) and curvature information.",{"type":17,"tag":142,"props":1778,"children":1779},{},[1780,1785],{"type":17,"tag":517,"props":1781,"children":1782},{},[1783],{"type":23,"value":1784},"Target Point Selection",{"type":23,"value":1786},": The controller continuously selects a target point ahead of the vehicle. This target point is typically chosen as the point on the path that is a certain fixed distance (known as the \"lookahead distance\") in front of the vehicle.",{"type":17,"tag":142,"props":1788,"children":1789},{},[1790,1795],{"type":17,"tag":517,"props":1791,"children":1792},{},[1793],{"type":23,"value":1794},"Steering Command Calculation",{"type":23,"value":1796},": To navigate toward the target point, the controller calculates the steering command, often represented as the desired steering angle or curvature, required to reach the target point. Commonly, this involves computing the angle between the vehicle's current heading and the vector pointing from the current position to the target point.",{"type":17,"tag":142,"props":1798,"children":1799},{},[1800,1805],{"type":17,"tag":517,"props":1801,"children":1802},{},[1803],{"type":23,"value":1804},"Vehicle Control",{"type":23,"value":1806},": The calculated steering command is used to control the vehicle's steering mechanism (e.g., steering wheel or wheel angles) to guide it toward the target point.",{"type":17,"tag":142,"props":1808,"children":1809},{},[1810,1815],{"type":17,"tag":517,"props":1811,"children":1812},{},[1813],{"type":23,"value":1814},"Iterative Process",{"type":23,"value":1816},": The process is iterative, with the controller continuously selecting new target points ahead as the vehicle advances along the path and adjusting its steering to reach them.",{"type":17,"tag":1566,"props":1818,"children":1819},{"id":1613},[1820],{"type":23,"value":1616},{"type":17,"tag":26,"props":1822,"children":1823},{},[1824],{"type":23,"value":1825},"The Pure Pursuit Controller offers several advantages:",{"type":17,"tag":138,"props":1827,"children":1828},{},[1829,1839,1849,1859,1869],{"type":17,"tag":142,"props":1830,"children":1831},{},[1832,1837],{"type":17,"tag":517,"props":1833,"children":1834},{},[1835],{"type":23,"value":1836},"Simplicity",{"type":23,"value":1838},": It is conceptually simple and easy to implement, making it suitable for a wide range of robotic and vehicle navigation applications.",{"type":17,"tag":142,"props":1840,"children":1841},{},[1842,1847],{"type":17,"tag":517,"props":1843,"children":1844},{},[1845],{"type":23,"value":1846},"Path Tracking",{"type":23,"value":1848},": The controller excels at accurate path tracking, even in complex environments with curves and turns.",{"type":17,"tag":142,"props":1850,"children":1851},{},[1852,1857],{"type":17,"tag":517,"props":1853,"children":1854},{},[1855],{"type":23,"value":1856},"Real-Time Operation",{"type":23,"value":1858},": It can operate in real-time, making it well-suited for dynamic environments where quick decision-making is crucial.",{"type":17,"tag":142,"props":1860,"children":1861},{},[1862,1867],{"type":17,"tag":517,"props":1863,"children":1864},{},[1865],{"type":23,"value":1866},"Adaptability",{"type":23,"value":1868},": The controller can adapt to changes in the path, such as deviations caused by obstacles or unexpected conditions, by continuously updating the target point.",{"type":17,"tag":142,"props":1870,"children":1871},{},[1872,1877],{"type":17,"tag":517,"props":1873,"children":1874},{},[1875],{"type":23,"value":1876},"Low Computational Overhead",{"type":23,"value":1878},": Compared to some other control algorithms, the Pure Pursuit Controller often has low computational requirements, which is advantageous for resource-constrained systems.",{"type":17,"tag":1566,"props":1880,"children":1881},{"id":1667},[1882],{"type":23,"value":1670},{"type":17,"tag":26,"props":1884,"children":1885},{},[1886],{"type":23,"value":1887},"Despite its advantages, the Pure Pursuit Controller has some limitations:",{"type":17,"tag":138,"props":1889,"children":1890},{},[1891,1901],{"type":17,"tag":142,"props":1892,"children":1893},{},[1894,1899],{"type":17,"tag":517,"props":1895,"children":1896},{},[1897],{"type":23,"value":1898},"Lookahead Distance Sensitivity",{"type":23,"value":1900},": Its performance can be sensitive to the choice of the lookahead distance, which requires careful tuning for optimal path tracking.",{"type":17,"tag":142,"props":1902,"children":1903},{},[1904,1909],{"type":17,"tag":517,"props":1905,"children":1906},{},[1907],{"type":23,"value":1908},"Non-Holonomic Assumption",{"type":23,"value":1910},": The controller assumes that the vehicle is non-holonomic, meaning it cannot move sideways. This assumption may not hold for certain types of vehicles, such as omnidirectional robots.",{"type":17,"tag":26,"props":1912,"children":1913},{},[1914],{"type":23,"value":1915},"In summary, the Pure Pursuit Controller is a straightforward yet effective algorithm for path tracking and navigation. Its ability to calculate a steering command based on a selected target point ahead of the vehicle makes it a valuable tool for applications ranging from autonomous cars to mobile robots.",{"title":8,"searchDepth":345,"depth":345,"links":1917},[1918],{"id":1742,"depth":345,"text":1735,"children":1919},[1920,1921,1922],{"id":1568,"depth":354,"text":1571},{"id":1613,"depth":354,"text":1616},{"id":1667,"depth":354,"text":1670},"content:topics:pure-pursuit.md","topics/pure-pursuit.md",{"_path":1926,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":1927,"description":1928,"slug":1929,"tag":1929,"body":1930,"_type":1537,"_id":2129,"_source":1539,"_file":2130,"_extension":1541},"/topics/stanley-controller","Stanley Controller","Introduction to Stanley Controller","stanley",{"type":14,"children":1931,"toc":2122},[1932,1937,1947,1951,1956,2017,2021,2026,2075,2079,2084,2117],{"type":17,"tag":82,"props":1933,"children":1935},{"id":1934},"stanley-controller",[1936],{"type":23,"value":1927},{"type":17,"tag":26,"props":1938,"children":1939},{},[1940,1941,1945],{"type":23,"value":1558},{"type":17,"tag":517,"props":1942,"children":1943},{},[1944],{"type":23,"value":1927},{"type":23,"value":1946}," is an advanced path-tracking algorithm primarily used in the field of autonomous vehicle navigation. It is named after its creator, Professor John K. Hedrick, who developed it at Stanford University. The Stanley Controller is designed to enable a vehicle to follow a predefined path with high accuracy and stability.",{"type":17,"tag":1566,"props":1948,"children":1949},{"id":1568},[1950],{"type":23,"value":1571},{"type":17,"tag":26,"props":1952,"children":1953},{},[1954],{"type":23,"value":1955},"The Stanley Controller operates based on a combination of control and feedback mechanisms:",{"type":17,"tag":1578,"props":1957,"children":1958},{},[1959,1968,1978,1988,1998,2007],{"type":17,"tag":142,"props":1960,"children":1961},{},[1962,1966],{"type":17,"tag":517,"props":1963,"children":1964},{},[1965],{"type":23,"value":1774},{"type":23,"value":1967},": A predefined path is represented as a series of waypoints or a continuous curve. Each waypoint is associated with specific coordinates (x, y) and often includes additional information like desired speed and curvature.",{"type":17,"tag":142,"props":1969,"children":1970},{},[1971,1976],{"type":17,"tag":517,"props":1972,"children":1973},{},[1974],{"type":23,"value":1975},"Cross-Track Error (CTE) Calculation",{"type":23,"value":1977},": The controller calculates the cross-track error, which is the perpendicular distance between the vehicle's current position and the desired path. This error represents how far the vehicle has deviated from the path.",{"type":17,"tag":142,"props":1979,"children":1980},{},[1981,1986],{"type":17,"tag":517,"props":1982,"children":1983},{},[1984],{"type":23,"value":1985},"Heading Error Calculation",{"type":23,"value":1987},": The heading error, which is the difference between the vehicle's current heading (yaw angle) and the desired path's tangent angle at the nearest waypoint, is also computed.",{"type":17,"tag":142,"props":1989,"children":1990},{},[1991,1996],{"type":17,"tag":517,"props":1992,"children":1993},{},[1994],{"type":23,"value":1995},"Control Command Generation",{"type":23,"value":1997},": Using the calculated cross-track error and heading error, the Stanley Controller generates control commands. These commands typically include steering angle adjustments and throttle/brake control to minimize both errors.",{"type":17,"tag":142,"props":1999,"children":2000},{},[2001,2005],{"type":17,"tag":517,"props":2002,"children":2003},{},[2004],{"type":23,"value":1804},{"type":23,"value":2006},": The generated control commands are applied to the vehicle's steering and throttle/brake systems to guide it back to the desired path.",{"type":17,"tag":142,"props":2008,"children":2009},{},[2010,2015],{"type":17,"tag":517,"props":2011,"children":2012},{},[2013],{"type":23,"value":2014},"Iterative Feedback",{"type":23,"value":2016},": The process is iterative, with the controller continuously recalculating the cross-track and heading errors and adjusting the control commands to keep the vehicle on track.",{"type":17,"tag":1566,"props":2018,"children":2019},{"id":1613},[2020],{"type":23,"value":1616},{"type":17,"tag":26,"props":2022,"children":2023},{},[2024],{"type":23,"value":2025},"The Stanley Controller offers several advantages:",{"type":17,"tag":138,"props":2027,"children":2028},{},[2029,2039,2048,2057,2066],{"type":17,"tag":142,"props":2030,"children":2031},{},[2032,2037],{"type":17,"tag":517,"props":2033,"children":2034},{},[2035],{"type":23,"value":2036},"High Accuracy",{"type":23,"value":2038},": It is known for its ability to achieve precise path-following, even in challenging conditions and complex road geometries.",{"type":17,"tag":142,"props":2040,"children":2041},{},[2042,2046],{"type":17,"tag":517,"props":2043,"children":2044},{},[2045],{"type":23,"value":1642},{"type":23,"value":2047},": The controller's feedback mechanisms contribute to stable and smooth vehicle motion, reducing the risk of overshooting or oscillations.",{"type":17,"tag":142,"props":2049,"children":2050},{},[2051,2055],{"type":17,"tag":517,"props":2052,"children":2053},{},[2054],{"type":23,"value":1866},{"type":23,"value":2056},": The Stanley Controller can adapt to changes in the path, such as deviations caused by obstacles or dynamic road conditions.",{"type":17,"tag":142,"props":2058,"children":2059},{},[2060,2064],{"type":17,"tag":517,"props":2061,"children":2062},{},[2063],{"type":23,"value":1856},{"type":23,"value":2065},": It can operate in real-time, making it suitable for autonomous vehicle navigation in dynamic environments.",{"type":17,"tag":142,"props":2067,"children":2068},{},[2069,2073],{"type":17,"tag":517,"props":2070,"children":2071},{},[2072],{"type":23,"value":1632},{"type":23,"value":2074},": While primarily used in autonomous vehicles, the Stanley Controller's principles can be applied to various path-tracking tasks.",{"type":17,"tag":1566,"props":2076,"children":2077},{"id":1667},[2078],{"type":23,"value":1670},{"type":17,"tag":26,"props":2080,"children":2081},{},[2082],{"type":23,"value":2083},"Despite its advantages, the Stanley Controller has some limitations:",{"type":17,"tag":138,"props":2085,"children":2086},{},[2087,2097,2107],{"type":17,"tag":142,"props":2088,"children":2089},{},[2090,2095],{"type":17,"tag":517,"props":2091,"children":2092},{},[2093],{"type":23,"value":2094},"Complexity",{"type":23,"value":2096},": Implementing the Stanley Controller can be more complex than some other control algorithms due to its mathematical calculations and tuning requirements.",{"type":17,"tag":142,"props":2098,"children":2099},{},[2100,2105],{"type":17,"tag":517,"props":2101,"children":2102},{},[2103],{"type":23,"value":2104},"Initialization",{"type":23,"value":2106},": It relies on accurate initialization, including knowledge of the vehicle's initial position and heading relative to the path.",{"type":17,"tag":142,"props":2108,"children":2109},{},[2110,2115],{"type":17,"tag":517,"props":2111,"children":2112},{},[2113],{"type":23,"value":2114},"Sensitivity to Noise",{"type":23,"value":2116},": Like many feedback-based controllers, the Stanley Controller can be sensitive to noisy sensor data and require robust sensor fusion techniques.",{"type":17,"tag":26,"props":2118,"children":2119},{},[2120],{"type":23,"value":2121},"In summary, the Stanley Controller is an advanced path-tracking algorithm known for its accuracy and stability, making it a valuable tool in the field of autonomous vehicle navigation. Proper implementation and tuning are essential to harness its full potential.",{"title":8,"searchDepth":345,"depth":345,"links":2123},[2124],{"id":1934,"depth":345,"text":1927,"children":2125},[2126,2127,2128],{"id":1568,"depth":354,"text":1571},{"id":1613,"depth":354,"text":1616},{"id":1667,"depth":354,"text":1670},"content:topics:stanley-controller.md","topics/stanley-controller.md",1693412005924]