[{"data":1,"prerenderedAt":8571},["Reactive",2],{"topics/robotics":3,"topics/ai":6982},[4,569,4628,6534,6774],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":9,"description":10,"author":11,"slug":12,"tag":12,"img":13,"body":14,"_type":564,"_id":565,"_source":566,"_file":567,"_extension":568},"/topics/robotics/nmpc-cgmres","robotics",false,"","Nonlinear Model Predictive Control with C/GMRES","Optimal Control theory","Din Sokheng","nmpc-cgmres","/topics/robotics/nmpc/nmpc-cgmres.png",{"type":15,"children":16,"toc":554},"root",[17,26,32,39,44,50,59,64,70,75,164,180,198,203,212,216,227,233,242,246,250,265,271,276,283,483,494,499,503,507,545,550],{"type":18,"tag":19,"props":20,"children":22},"element","h2",{"id":21},"the-optimal-control-theory-in-control-system",[23],{"type":24,"value":25},"text","The Optimal Control Theory in Control System",{"type":18,"tag":27,"props":28,"children":29},"p",{},[30],{"type":24,"value":31},"Optimal Control is a branch of control theory in control system, the theory works by solving the optimization problem of the dynamical system in order to find the optimal solution for the system",{"type":18,"tag":33,"props":34,"children":36},"h3",{"id":35},"what-is-model-predictive-control",[37],{"type":24,"value":38},"What is Model Predictive Control ?",{"type":18,"tag":27,"props":40,"children":41},{},[42],{"type":24,"value":43},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":18,"tag":33,"props":45,"children":47},{"id":46},"hamilton-jacobian-bellman-equation-hjbe",[48],{"type":24,"value":49},"Hamilton Jacobian Bellman Equation (HJBE)",{"type":18,"tag":27,"props":51,"children":52},{},[53,55],{"type":24,"value":54},"Actually, the HJBE is a nonlinear partial differential equation that it consists necessary conditions for optimality of control by minimizing the loss function of the system. ",{"type":18,"tag":56,"props":57,"children":58},"br",{},[],{"type":18,"tag":27,"props":60,"children":61},{},[62],{"type":24,"value":63},"We have the Hamiltonian Jacobian Bellman Equation",{"type":18,"tag":65,"props":66,"children":69},"math-render-b",{"latex-express":67,"styles":68},"\n\\begin{equation}\n    H(x,u,\\lambda,\\mu) = \\sum_{k=0}^{N-1}(x_{k}-x_{k,ref})^{T} Q(x_{k}-x_{k,ref}) + (u_{k}-u_{k,ref})^{T}R(u_{k}-u_{k,ref}) + \n                         \\phi(x) + \\lambda^{T}f(x,u) + \\mu^{T}C(x,u)\n\\end{equation}","text-center",[],{"type":18,"tag":27,"props":71,"children":72},{},[73],{"type":24,"value":74},"Which",{"type":18,"tag":76,"props":77,"children":78},"ul",{},[79,91,106,119,128,137,146,155],{"type":18,"tag":80,"props":81,"children":82},"li",{},[83,89],{"type":18,"tag":84,"props":85,"children":88},"math-render",{"latex-express":86,"styles":87},"N","inline-flex",[],{"type":24,"value":90}," is the number of prediction future horizons or shooting node.",{"type":18,"tag":80,"props":92,"children":93},{},[94,98,100,104],{"type":18,"tag":84,"props":95,"children":97},{"latex-express":96,"styles":87},"x_{k}",[],{"type":24,"value":99}," is the state of the system at shooting node ",{"type":18,"tag":84,"props":101,"children":103},{"latex-express":102,"styles":87},"k",[],{"type":24,"value":105}," .",{"type":18,"tag":80,"props":107,"children":108},{},[109,113,115,118],{"type":18,"tag":84,"props":110,"children":112},{"latex-express":111,"styles":87},"u_{k}",[],{"type":24,"value":114}," is the input control of the system at shooting node ",{"type":18,"tag":84,"props":116,"children":117},{"latex-express":102,"styles":87},[],{"type":24,"value":105},{"type":18,"tag":80,"props":120,"children":121},{},[122,126],{"type":18,"tag":84,"props":123,"children":125},{"latex-express":124,"styles":87},"Q, R",[],{"type":24,"value":127}," are diagonal matrix which helps the optimization solving the nlp problem.",{"type":18,"tag":80,"props":129,"children":130},{},[131,135],{"type":18,"tag":84,"props":132,"children":134},{"latex-express":133,"styles":87},"f(x,u)",[],{"type":24,"value":136}," is the state representation of the system.",{"type":18,"tag":80,"props":138,"children":139},{},[140,144],{"type":18,"tag":84,"props":141,"children":143},{"latex-express":142,"styles":87},"C(x,u)",[],{"type":24,"value":145},"  is the constraint of the system.",{"type":18,"tag":80,"props":147,"children":148},{},[149,153],{"type":18,"tag":84,"props":150,"children":152},{"latex-express":151,"styles":87},"\\lambda",[],{"type":24,"value":154},"  is the costate vector for state representation.",{"type":18,"tag":80,"props":156,"children":157},{},[158,162],{"type":18,"tag":84,"props":159,"children":161},{"latex-express":160,"styles":87},"\\mu",[],{"type":24,"value":163},"  is the costate vector for the input control.",{"type":18,"tag":27,"props":165,"children":166},{},[167,169,175,177],{"type":24,"value":168},"Nonlinear Model Predictive Control has multiples solving method, but in this demonstration I will stick with the Continuation/GMRES method proposed by professor ",{"type":18,"tag":170,"props":171,"children":172},"strong",{},[173],{"type":24,"value":174}," Toshiyuki Ohtsuka ",{"type":24,"value":176},". ",{"type":18,"tag":56,"props":178,"children":179},{},[],{"type":18,"tag":27,"props":181,"children":182},{},[183,185,189,191,196],{"type":24,"value":184},"Supposed we want to obtain input control ",{"type":18,"tag":84,"props":186,"children":188},{"latex-express":187,"styles":87},"U(t) = [ u_{0}^{*}, \\cdots, u_{N-1}^{*} ]",[],{"type":24,"value":190},"   at sampling time $t$, we then define the discretization of ",{"type":18,"tag":170,"props":192,"children":193},{},[194],{"type":24,"value":195}," Euler Lagrangian Equation (ELE) ",{"type":24,"value":197},".",{"type":18,"tag":65,"props":199,"children":202},{"latex-express":200,"style":201},"\n\\begin{align}\n    x_{i+1}^{*}(t) &= x_{i}^{*}(t) + f(x_{i}^{*}(t), u_{i}^{*}(t))  \\\\\n    \\lambda_{i}^{*}(t) &= \\lambda_{i+1}^{*}(t) + \\frac{\\partial H}{\\partial x}\\left( x_{i}^{*}, u_{i}^{*}(t), \\lambda_{i+1}^{*}(t), \\mu_{i}^{*}(t) \\right) \\\\\n    \\lambda_{N}^{*}(t) &= \\frac{\\partial \\phi(x)}{\\partial x} \\\\\n    \\frac{\\partial H}{\\partial u} &\\left( x_{i}^{*}, u_{i}^{*}(t), \\lambda_{i+1}^{*}(t), \\mu_{i}^{*}(t) \\right) = 0 \\\\\n    C&(x_{i}^{*}(t),u_{i}^{*}(t)) = 0\n\\end{align}\n","text-ceneter",[],{"type":18,"tag":27,"props":204,"children":205},{},[206,208],{"type":24,"value":207},"To solve this nonlinear problem iteratively, we use Newton's method ",{"type":18,"tag":84,"props":209,"children":211},{"latex-express":210,"styles":87},"F(x,u)=0",[],{"type":18,"tag":65,"props":213,"children":215},{"latex-express":214,"styles":68},"\n\\begin{equation}\n    F(x,u) = \\begin{bmatrix}\n        \\frac{\\partial H}{\\partial u} \\left( x_{0}^{*}, u_{0}^{*}(t), \\lambda_{1}^{*}(t), \\mu_{0}^{*}(t) \\right) \\\\\n        C(x_{0}^{*}(t),u_{0}^{*}(t))  \\\\\n        \\vdots \\\\\n        \\frac{\\partial H}{\\partial u} \\left( x_{N-1}^{*}, u_{N-1}^{*}(t), \\lambda_{N}^{*}(t), \\mu_{N-1}^{*}(t) \\right) \\\\\n        C(x_{N-1}^{*}(t),u_{N-1}^{*}(t)) \\\\\n    \\end{bmatrix} = 0\n\\end{equation}",[],{"type":18,"tag":27,"props":217,"children":218},{},[219,221,225],{"type":24,"value":220},"Solving this problem directly will caused big computational complexity, hence we use Continuation to reduce the complexity of the ",{"type":18,"tag":84,"props":222,"children":224},{"latex-express":223,"styles":87},"F(x,u)",[],{"type":24,"value":226}," function and then solve it by using GMRES method.",{"type":18,"tag":33,"props":228,"children":230},{"id":229},"continuation",[231],{"type":24,"value":232},"Continuation",{"type":18,"tag":27,"props":234,"children":235},{},[236,238],{"type":24,"value":237},"Denote  ",{"type":18,"tag":84,"props":239,"children":241},{"latex-express":240,"styles":87},"\\zeta, \\alpha, h \\in{\\mathbb{R} }",[],{"type":18,"tag":65,"props":243,"children":245},{"latex-express":244,"styles":68},"\n\\begin{equation*}\n    \\frac{\\partial F}{\\partial u}(x,u) \\dot{u}(t) = -\\zeta F(x,u)(t)-\\frac{\\partial F}{\\partial x}(x,u)(t)\\dot{x}-\\frac{\\partial F}{\\partial t}(x,u)(t) \n\\end{equation*}",[],{"type":18,"tag":65,"props":247,"children":249},{"latex-express":248,"styles":68},"\n\\begin{equation*}\n    \\frac{F(x(t)+h\\dot{x}(t),u(t)+h\\dot{u}(t),t+h)-F(x+h\\dot{x}(t),u(t),t+h)}{h} = -\\zeta F(x(t),u(t), t) - \\frac{F(x+h\\dot{x}(t), u(t),t+h)-F(x(t), u(t), t)}{h}\n\\end{equation*}",[],{"type":18,"tag":27,"props":251,"children":252},{},[253,255,259,261],{"type":24,"value":254},"Let ",{"type":18,"tag":65,"props":256,"children":258},{"latex-express":257,"styles":68},"right=\\frac{F(x(t)+h\\dot{x}(t),u(t)+h\\dot{u}(t),t+h)-F(x+h\\dot{x}(t),u(t),t+h)}{h}",[],{"type":24,"value":260}," and ",{"type":18,"tag":65,"props":262,"children":264},{"latex-express":263,"styles":68},"left =  -\\zeta F(x(t),u(t), t) - \\frac{F(x+h\\dot{x}(t), u(t),t+h)-F(x(t), u(t), t)}{h}",[],{"type":18,"tag":33,"props":266,"children":268},{"id":267},"generalized-minimal-residue-method-gmres",[269],{"type":24,"value":270},"Generalized Minimal Residue Method (GMRES)",{"type":18,"tag":27,"props":272,"children":273},{},[274],{"type":24,"value":275},"The Generalized Minimal Residual (GMRES) algorithm is an iterative method for solving linear systems of equations. It is often used for large sparse linear systems.",{"type":18,"tag":277,"props":278,"children":280},"h4",{"id":279},"algorithm-description",[281],{"type":24,"value":282},"Algorithm Description",{"type":18,"tag":284,"props":285,"children":286},"ol",{},[287,342,449,468],{"type":18,"tag":80,"props":288,"children":289},{},[290,295,297],{"type":18,"tag":170,"props":291,"children":292},{},[293],{"type":24,"value":294},"Initialize",{"type":24,"value":296},":",{"type":18,"tag":76,"props":298,"children":299},{},[300,310,320],{"type":18,"tag":80,"props":301,"children":302},{},[303,305,309],{"type":24,"value":304},"Choose an initial guess for the solution, denoted as ",{"type":18,"tag":84,"props":306,"children":308},{"latex-express":307,"styles":87},"x_{0}",[],{"type":24,"value":197},{"type":18,"tag":80,"props":311,"children":312},{},[313,315,319],{"type":24,"value":314},"Set the residual vector ",{"type":18,"tag":84,"props":316,"children":318},{"latex-express":317,"styles":87},"r_{0}=\\left\\| Ax_{0}-b \\right\\|",[],{"type":24,"value":197},{"type":18,"tag":80,"props":321,"children":322},{},[323,325,329,331,335,337,341],{"type":24,"value":324},"Set ",{"type":18,"tag":84,"props":326,"children":328},{"latex-express":327,"styles":87},"v_{1}=\\frac{r_{0} }{\\left\\| r_{0} \\right\\|}",[],{"type":24,"value":330},", where ",{"type":18,"tag":84,"props":332,"children":334},{"latex-express":333,"styles":87},"\\left\\| r_{0} \\right\\|",[],{"type":24,"value":336},"  is the norm of ",{"type":18,"tag":84,"props":338,"children":340},{"latex-express":339,"styles":87},"r_{0}",[],{"type":24,"value":197},{"type":18,"tag":80,"props":343,"children":344},{},[345,350,351],{"type":18,"tag":170,"props":346,"children":347},{},[348],{"type":24,"value":349},"Iterative Process",{"type":24,"value":296},{"type":18,"tag":76,"props":352,"children":353},{},[354,364,438],{"type":18,"tag":80,"props":355,"children":356},{},[357,359,363],{"type":24,"value":358},"Choose a vector ",{"type":18,"tag":84,"props":360,"children":362},{"latex-express":361,"styles":87},"v_{1}",[],{"type":24,"value":197},{"type":18,"tag":80,"props":365,"children":366},{},[367,369,373,375,379,380],{"type":24,"value":368},"For ",{"type":18,"tag":84,"props":370,"children":372},{"latex-express":371,"styles":87},"k=0",[],{"type":24,"value":374}," to ",{"type":18,"tag":84,"props":376,"children":378},{"latex-express":377,"styles":87},"maxiteration",[],{"type":24,"value":296},{"type":18,"tag":76,"props":381,"children":382},{},[383,419],{"type":18,"tag":80,"props":384,"children":385},{},[386,388],{"type":24,"value":387},"Arnoldi process:",{"type":18,"tag":76,"props":389,"children":390},{},[391,398,405,412],{"type":18,"tag":80,"props":392,"children":393},{},[394],{"type":18,"tag":84,"props":395,"children":397},{"latex-express":396,"styles":87},"h_{i,j} = \\left(Av_{j}, v_{i} \\right)",[],{"type":18,"tag":80,"props":399,"children":400},{},[401],{"type":18,"tag":84,"props":402,"children":404},{"latex-express":403,"styles":87},"\\hat{v}_{j+1} = Av_{j} - \\sum_{i=1}^{j}h_{i,j}v_{i}",[],{"type":18,"tag":80,"props":406,"children":407},{},[408],{"type":18,"tag":84,"props":409,"children":411},{"latex-express":410,"styles":87},"h_{j+1,j} = \\left \\| \\hat{v}_{j+1}  \\right\\|_{2}",[],{"type":18,"tag":80,"props":413,"children":414},{},[415],{"type":18,"tag":84,"props":416,"children":418},{"latex-express":417,"styles":87},"v_{j+1} = \\frac{\\hat{v}_{j+1} }{h_{j+1,j} }",[],{"type":18,"tag":80,"props":420,"children":421},{},[422,424],{"type":24,"value":423},"Check for convergence:",{"type":18,"tag":76,"props":425,"children":426},{},[427],{"type":18,"tag":80,"props":428,"children":429},{},[430,432,436],{"type":24,"value":431},"If ",{"type":18,"tag":84,"props":433,"children":435},{"latex-express":434,"styles":87},"||r_k|| \u003C tolerance",[],{"type":24,"value":437},", exit the loop.",{"type":18,"tag":80,"props":439,"children":440},{},[441,443,447],{"type":24,"value":442},"If no convergence is achieved after ",{"type":18,"tag":84,"props":444,"children":446},{"latex-express":445,"styles":87},"maxiterations",[],{"type":24,"value":448},", exit with an error message.",{"type":18,"tag":80,"props":450,"children":451},{},[452,461,463,467],{"type":18,"tag":170,"props":453,"children":454},{},[455,457],{"type":24,"value":456},"Find ",{"type":18,"tag":84,"props":458,"children":460},{"latex-express":459,"styles":87},"y",[],{"type":24,"value":462},": which minimize ",{"type":18,"tag":84,"props":464,"children":466},{"latex-express":465,"styles":87},"\\left\\| r_{0}e_{1}-\\hat{H}_{m}y \\right \\|_{2}",[],{"type":24,"value":197},{"type":18,"tag":80,"props":469,"children":470},{},[471,476,478,482],{"type":18,"tag":170,"props":472,"children":473},{},[474],{"type":24,"value":475},"Compute",{"type":24,"value":477},": ",{"type":18,"tag":84,"props":479,"children":481},{"latex-express":480,"styles":87},"x_{m} = x_{0}+V_{m}y_{m}",[],{"type":24,"value":197},{"type":18,"tag":27,"props":484,"children":485},{},[486,488,492],{"type":24,"value":487},"For example differential model, let ",{"type":18,"tag":84,"props":489,"children":491},{"latex-express":490,"styles":87},"x, y, \\phi",[],{"type":24,"value":493}," is the state presentation of the model\n$$ \\dot{x} = f(x,u) $$",{"type":18,"tag":27,"props":495,"children":496},{},[497],{"type":24,"value":498},"Then the HJBE defined as",{"type":18,"tag":65,"props":500,"children":502},{"latex-express":501,"styles":68},"\n\\begin{equation}\n    H(x,u,\\lambda,\\mu) = \\sum_{k=0}^{N-1}(x_{k}-x_{k,ref})^{T}Q(x_{k}-x_{k,ref}) + (u_{k}-u_{k,ref})^{T}R(u_{k}-u_{k,ref}) + \n                         \\phi(x) + \\lambda^{T}f(x,u) + \\mu^{T}C(x,u)\n\\end{equation}\n",[],{"type":18,"tag":27,"props":504,"children":505},{},[506],{"type":24,"value":74},{"type":18,"tag":76,"props":508,"children":509},{},[510,517,524,531,538],{"type":18,"tag":80,"props":511,"children":512},{},[513],{"type":18,"tag":84,"props":514,"children":516},{"latex-express":515,"styles":87},"f(x,u) = \\begin{bmatrix} u_{1}*\\cos{(\\phi)} \\\\ u_{1}*\\sin{(\\phi)} \\\\ u_{2} \\end{bmatrix}",[],{"type":18,"tag":80,"props":518,"children":519},{},[520],{"type":18,"tag":84,"props":521,"children":523},{"latex-express":522,"styles":87},"C(x,u) = \\begin{bmatrix} \\left(u_{1}+\\frac{u_{1max}+u_{1min}}{2}\\right)^{2}+u_{1dummy}^{2}-(\\frac{u_{1max}-u_{1min}}{2})^{2} \\\\\n          \\left(u_{2}+\\frac{u_{2max}+u_{2min}}{2}\\right)^{2}+u_{2dummy}^{2}-(\\frac{u_{2max}-u_{2min}}{2})^{2}\n\\end{bmatrix}",[],{"type":18,"tag":80,"props":525,"children":526},{},[527],{"type":18,"tag":84,"props":528,"children":530},{"latex-express":529,"styles":87},"\\phi(x) = (x_{N-1}x_{N-1,ref})^{T}Q(x_{N-1}x_{N-1,ref})",[],{"type":18,"tag":80,"props":532,"children":533},{},[534],{"type":18,"tag":84,"props":535,"children":537},{"latex-express":536,"styles":87},"\\lambda = \\begin{bmatrix} \\lambda_{1} & \\lambda_{2} & \\lambda_{3} \\end{bmatrix}",[],{"type":18,"tag":80,"props":539,"children":540},{},[541],{"type":18,"tag":84,"props":542,"children":544},{"latex-express":543,"styles":87}," \\mu = \\begin{bmatrix} \\mu_{1} & \\mu_{2} \\end{bmatrix}",[],{"type":18,"tag":27,"props":546,"children":547},{},[548],{"type":24,"value":549},"Subtitute all of these term into HJBE",{"type":18,"tag":65,"props":551,"children":553},{"latex-express":552,"styles":68},"\n\\begin{align*}\nH(x,u,\\lambda,\\mu) &= \\sum_{k=0}^{N-1}(x_{k}-x_{k,ref})^{T}Q(x_{k}-x_{k,ref}) + (u_{k}-u_{k,ref})^{T}R(u_{k}-u_{k,ref})\n                     + (x_{N-1}-x_{N-1,ref})^{T}Q(x_{N-1}-x_{N-1,ref}) \\\\ & + \\begin{bmatrix} \\lambda_{1} \\\\ \\lambda_{2} \\\\ \\lambda_{3} \\end{bmatrix}^{T} \\begin{bmatrix} u_{1}*\\cos(\\phi) \\\\ u_{1}*\\sin(\\phi) \\\\ u_{2} \\end{bmatrix}\n                     + \\begin{bmatrix} \\mu_{1} \\\\ \\mu_{2} \\end{bmatrix}^{T} \\begin{bmatrix} \\left(u_{1}+\\frac{u_{1max}+u_{1min}}{2}\\right)^{2}+u_{1dummy}^{2}-(\\frac{u_{1max}-u_{1min}}{2})^{2} \\\\\n            \\left(u_{2}+\\frac{u_{2max}+u_{2min}}{2}\\right)^{2}+u_{2dummy}^{2}-(\\frac{u_{2max}-u_{2min}}{2})^{2} \n\\end{bmatrix}\n\\end{align*}",[],{"title":8,"searchDepth":555,"depth":555,"links":556},2,[557],{"id":21,"depth":555,"text":25,"children":558},[559,561,562,563],{"id":35,"depth":560,"text":38},3,{"id":46,"depth":560,"text":49},{"id":229,"depth":560,"text":232},{"id":267,"depth":560,"text":270},"markdown","content:topics:robotics:nmpc-cgmres.md","content","topics/robotics/nmpc-cgmres.md","md",{"_path":570,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":571,"description":572,"author":11,"slug":573,"tag":573,"img":574,"body":575,"_type":564,"_id":4626,"_source":566,"_file":4627,"_extension":568},"/topics/robotics/nonlinear-mpc","Nonlinear Model Predictive Control","Introduction to Nonlinear Model Predictive Control","nonlinear-mpc","/topics/robotics/nmpc/predict_horizon.png",{"type":15,"children":576,"toc":4615},[577,581,585,611,621,627,640,645,650,655,659,664,703,708,712,717,765,771,783,787,792,797,802,807,811,815,820,2062,2068,2073,2077,2081,2086,2090,2096,2101,2105,2121,2125,2129,2133,2139,2152,2184,2189,2722,2727,2905,2914,3169,3174,4188,4193,4544,4550,4555,4569,4575,4581,4586,4592,4610],{"type":18,"tag":19,"props":578,"children":579},{"id":35},[580],{"type":24,"value":38},{"type":18,"tag":27,"props":582,"children":583},{},[584],{"type":24,"value":43},{"type":18,"tag":586,"props":587,"children":594},"div",{"className":588},[589,590,591,592,593],"grid","grid-cols-2","space-x-10","justify-center","items-center",[595,597,605,606],{"type":24,"value":596},"\n  ",{"type":18,"tag":598,"props":599,"children":604},"img",{"className":600,"src":574,"width":602,"height":603},[601],"mx-auto",600,300,[],{"type":24,"value":596},{"type":18,"tag":598,"props":607,"children":610},{"className":608,"src":609,"width":602,"height":603},[601],"/topics/robotics/nmpc/set_points.png",[],{"type":18,"tag":612,"props":613,"children":618},"figcaption",{"className":614},[68,615,616,617],"text-sm","text-neutral-600","dark:text-neutral-400",[619],{"type":24,"value":620},"\n  A car with finite horizons prediction and set point prediction over finite horizons.\n",{"type":18,"tag":19,"props":622,"children":624},{"id":623},"nonlinear-model-predictive-control",[625],{"type":24,"value":626},"Nonlinear Model Predictive Control ?",{"type":18,"tag":27,"props":628,"children":629},{},[630,632,635,637],{"type":24,"value":631},"Nonlinear Model Predictive Control has the same basic core of its control algorithms. The different is about the mathematical solving over the system. ",{"type":18,"tag":56,"props":633,"children":634},{},[],{"type":24,"value":636},"\nIn the real-life application, most of the system certainly nonlinear and it's more complex than linear model. Linear systems are mostly time-invariant, meaning that the response of the system input is time-independent. Nonlinear systems are time-varying meaning that the response of the system to any input is time-dependent.",{"type":18,"tag":56,"props":638,"children":639},{},[],{"type":18,"tag":27,"props":641,"children":642},{},[643],{"type":24,"value":644},"The system model can be represent as state-space model",{"type":18,"tag":27,"props":646,"children":647},{},[648],{"type":24,"value":649},"$$ \\dot{X} = f(X,U) $$",{"type":18,"tag":27,"props":651,"children":652},{},[653],{"type":24,"value":654},"Nonlinear Model Predictive Control also works by solving the quardratic cost subject to the nonlinear function over a future finite horizons. The quadractic cost can be define as",{"type":18,"tag":65,"props":656,"children":658},{"latex-express":657,"styles":68},"J(x,u) = \\displaystyle\\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})",[],{"type":18,"tag":27,"props":660,"children":661},{},[662],{"type":24,"value":663},"Notation",{"type":18,"tag":76,"props":665,"children":666},{},[667,676,685,694],{"type":18,"tag":80,"props":668,"children":669},{},[670,674],{"type":18,"tag":84,"props":671,"children":673},{"latex-express":672,"styles":87},"X",[],{"type":24,"value":675}," is the state of the system. This shall be obtained from the optimiztion problem.",{"type":18,"tag":80,"props":677,"children":678},{},[679,683],{"type":18,"tag":84,"props":680,"children":682},{"latex-express":681,"styles":87},"X_{ref}",[],{"type":24,"value":684}," is the reference state of the system or desired input state.",{"type":18,"tag":80,"props":686,"children":687},{},[688,692],{"type":18,"tag":84,"props":689,"children":691},{"latex-express":690,"styles":87},"U",[],{"type":24,"value":693}," is the input control of the system. This is a solution obtained from the optimization problem.",{"type":18,"tag":80,"props":695,"children":696},{},[697,701],{"type":18,"tag":84,"props":698,"children":700},{"latex-express":699,"styles":87},"U_{ref}",[],{"type":24,"value":702}," is the reference control of the system or desired input control.",{"type":18,"tag":27,"props":704,"children":705},{},[706],{"type":24,"value":707},"Rewrite the optimization of NMPC problem.",{"type":18,"tag":65,"props":709,"children":711},{"latex-express":710,"styles":68},"\n      \\begin{align*}\n            \\min_{u_{0}, u_{1}, ..., u_{N-1} } \\quad \\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}&Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})\\\\\n            \\text{subject to} \\quad & x_{k+1} = f(x_k, u_k) \\quad \\text{(System dynamics)} \\\\\n            & g(x_k, x_k) \\leq 0 \\quad \\text{(State constraints)} \\\\\n            & h(x_k, x_k) \\leq 0 \\quad \\text{(Input constraints)} \\\\\n            & p(x_k) \\leq 0 \\quad \\text{(Path constraints)} \\\\\n            & x_0=x(0)  \\quad \\text{(Initial condition)}\n      \\end{align*}\n            ",[],{"type":18,"tag":27,"props":713,"children":714},{},[715],{"type":24,"value":716},"Which,",{"type":18,"tag":76,"props":718,"children":719},{},[720,729,738,747,755],{"type":18,"tag":80,"props":721,"children":722},{},[723,727],{"type":18,"tag":84,"props":724,"children":726},{"latex-express":725,"styles":87},"f",[],{"type":24,"value":728}," is the system dynamics model.",{"type":18,"tag":80,"props":730,"children":731},{},[732,736],{"type":18,"tag":84,"props":733,"children":735},{"latex-express":734,"styles":87},"g",[],{"type":24,"value":737}," is the state constraints of the system.",{"type":18,"tag":80,"props":739,"children":740},{},[741,745],{"type":18,"tag":84,"props":742,"children":744},{"latex-express":743,"styles":87},"h",[],{"type":24,"value":746}," is the input constraints of the system.",{"type":18,"tag":80,"props":748,"children":749},{},[750,753],{"type":18,"tag":84,"props":751,"children":752},{"latex-express":27,"styles":87},[],{"type":24,"value":754}," is the path constraint, it help to ensure the safety following path of our system.",{"type":18,"tag":80,"props":756,"children":757},{},[758,763],{"type":18,"tag":84,"props":759,"children":762},{"latex-express":760,"styles":87,"dist-cond":761},"\\phi(X_{N})","false",[],{"type":24,"value":764}," is the terminal cost of the system.",{"type":18,"tag":19,"props":766,"children":768},{"id":767},"discretize-the-system-model-with-runge-kutta-4th-order",[769],{"type":24,"value":770},"Discretize the system model with Runge-Kutta 4th order",{"type":18,"tag":27,"props":772,"children":773},{},[774,776,781],{"type":24,"value":775},"I will choose a simple system mode robot ",{"type":18,"tag":170,"props":777,"children":778},{},[779],{"type":24,"value":780}," DifferentialDrive ",{"type":24,"value":782},".\nThe forward kinematic equation",{"type":18,"tag":65,"props":784,"children":786},{"latex-express":785,"styles":68},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":788,"children":789},{},[790],{"type":24,"value":791},"State constraints are the restriction imposed on the state variable of the system. It helps our optimizer not to obtain the solution that is outside the boundary region and also ensure the system to always perform the minimal action control in any critical condition.",{"type":18,"tag":27,"props":793,"children":794},{},[795],{"type":24,"value":796},"We, then can do the approximation",{"type":18,"tag":65,"props":798,"children":801},{"latex-express":799,"styles":68,"dist-cond":800},"\n    \\begin{align*}\n        k_{1} &= f(x^{*}, u^{*}) \\\\\n        k_{2} &= f(x^{*}+k_{1}\\frac{dt}{2}, u^{*}) \\\\ \n        k_{3} &= f(x^{*}+k_{2}\\frac{dt}{2}, u^{*}) \\\\\n        k_{4} &= f(x^{*}+k_{3}dt, u^{*}) \\\\ \n        \\Rightarrow{x_{k+1} } &= x_{k} + (k_{1}+2k_{2}+2k_{3}+k_{4})\\frac{dt}{6}\n    \\end{align*}\n","true",[],{"type":18,"tag":27,"props":803,"children":804},{},[805],{"type":24,"value":806},"Let's evaluate it with our model.",{"type":18,"tag":65,"props":808,"children":810},{"latex-express":809,"styles":68},"\n      \\begin{align*}\n        k_{1} &= \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n        k_{2} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{3} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{4} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n    \\end{align*}\n      ",[],{"type":18,"tag":65,"props":812,"children":814},{"latex-express":813,"styles":68},"\n      \\Rightarrow{x_{k+1} } = x_{k} + \\left( \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} + \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix}   \\right) \\frac{dt}{6}\n",[],{"type":18,"tag":27,"props":816,"children":817},{},[818],{"type":24,"value":819},"How to implement it in Python ???",{"type":18,"tag":821,"props":822,"children":827},"code",{"className":823,"code":825,"language":826,"meta":8},[824],"language-python","import numpy as np\n\n## Define sampling time dt 100Hz\ndt = 0.01\n## Define the num steps for function approximation \nnum_steps = 100\n## Define initial states\nx = 0.0\ny = 0.0\nyaw = 0.0\n## Define input control\nv = 1.5 #m/s\nomega = 1.57 #rad/s\n## Define state represent model\n### define lambda function take variable x\nf = lambda x, u :  np.array([\n      [u[0]*np.cos(x[2])],\n      [u[0]*np.sin(x[2])],\n      [u[1]]\n])\n\nfor _ in range(num_steps):\n    k1 = f([x, y, yaw], [v, omega])\n    k2 = f([x + (dt / 2) * k1[0], y + (dt / 2) * k1[1], yaw + (dt / 2) * k1[2]], [v, omega])\n    k3 = f([x + (dt / 2) * k2[0], y + (dt / 2) * k2[1], yaw + (dt / 2) * k2[2]], [v, omega])\n    k4 = f([x + dt * k3[0], y + dt * k3[1], yaw + dt * k3[2]], [v, omega])\n\n    # Update state of the robot\n    x += (k1[0] + 2 * k2[0] + 2 * k3[0] + k4[0]) * dt / 6\n    y += (k1[1] + 2 * k2[1] + 2 * k3[1] + k4[1]) * dt / 6\n    yaw += (k1[2] + 2 * k2[2] + 2 * k3[2] + k4[2]) * dt / 6\n","python",[828],{"type":18,"tag":829,"props":830,"children":831},"pre",{},[832],{"type":18,"tag":821,"props":833,"children":834},{"__ignoreMap":8},[835,863,871,880,905,914,936,945,967,988,1009,1018,1049,1080,1089,1098,1125,1164,1197,1215,1224,1232,1265,1283,1429,1567,1658,1666,1680,1811,1936],{"type":18,"tag":836,"props":837,"children":840},"span",{"class":838,"line":839},"line",1,[841,847,853,858],{"type":18,"tag":836,"props":842,"children":844},{"class":843},"ct-857441",[845],{"type":24,"value":846},"import",{"type":18,"tag":836,"props":848,"children":850},{"class":849},"ct-767297",[851],{"type":24,"value":852}," numpy ",{"type":18,"tag":836,"props":854,"children":855},{"class":843},[856],{"type":24,"value":857},"as",{"type":18,"tag":836,"props":859,"children":860},{"class":849},[861],{"type":24,"value":862}," np\n",{"type":18,"tag":836,"props":864,"children":865},{"class":838,"line":555},[866],{"type":18,"tag":836,"props":867,"children":868},{},[869],{"type":24,"value":870},"\n",{"type":18,"tag":836,"props":872,"children":873},{"class":838,"line":560},[874],{"type":18,"tag":836,"props":875,"children":877},{"class":876},"ct-326375",[878],{"type":24,"value":879},"## Define sampling time dt 100Hz\n",{"type":18,"tag":836,"props":881,"children":883},{"class":838,"line":882},4,[884,889,894,899],{"type":18,"tag":836,"props":885,"children":886},{"class":849},[887],{"type":24,"value":888},"dt ",{"type":18,"tag":836,"props":890,"children":891},{"class":843},[892],{"type":24,"value":893},"=",{"type":18,"tag":836,"props":895,"children":896},{"class":849},[897],{"type":24,"value":898}," ",{"type":18,"tag":836,"props":900,"children":902},{"class":901},"ct-533739",[903],{"type":24,"value":904},"0.01\n",{"type":18,"tag":836,"props":906,"children":908},{"class":838,"line":907},5,[909],{"type":18,"tag":836,"props":910,"children":911},{"class":876},[912],{"type":24,"value":913},"## Define the num steps for function approximation \n",{"type":18,"tag":836,"props":915,"children":917},{"class":838,"line":916},6,[918,923,927,931],{"type":18,"tag":836,"props":919,"children":920},{"class":849},[921],{"type":24,"value":922},"num_steps ",{"type":18,"tag":836,"props":924,"children":925},{"class":843},[926],{"type":24,"value":893},{"type":18,"tag":836,"props":928,"children":929},{"class":849},[930],{"type":24,"value":898},{"type":18,"tag":836,"props":932,"children":933},{"class":901},[934],{"type":24,"value":935},"100\n",{"type":18,"tag":836,"props":937,"children":939},{"class":838,"line":938},7,[940],{"type":18,"tag":836,"props":941,"children":942},{"class":876},[943],{"type":24,"value":944},"## Define initial states\n",{"type":18,"tag":836,"props":946,"children":948},{"class":838,"line":947},8,[949,954,958,962],{"type":18,"tag":836,"props":950,"children":951},{"class":849},[952],{"type":24,"value":953},"x ",{"type":18,"tag":836,"props":955,"children":956},{"class":843},[957],{"type":24,"value":893},{"type":18,"tag":836,"props":959,"children":960},{"class":849},[961],{"type":24,"value":898},{"type":18,"tag":836,"props":963,"children":964},{"class":901},[965],{"type":24,"value":966},"0.0\n",{"type":18,"tag":836,"props":968,"children":970},{"class":838,"line":969},9,[971,976,980,984],{"type":18,"tag":836,"props":972,"children":973},{"class":849},[974],{"type":24,"value":975},"y ",{"type":18,"tag":836,"props":977,"children":978},{"class":843},[979],{"type":24,"value":893},{"type":18,"tag":836,"props":981,"children":982},{"class":849},[983],{"type":24,"value":898},{"type":18,"tag":836,"props":985,"children":986},{"class":901},[987],{"type":24,"value":966},{"type":18,"tag":836,"props":989,"children":991},{"class":838,"line":990},10,[992,997,1001,1005],{"type":18,"tag":836,"props":993,"children":994},{"class":849},[995],{"type":24,"value":996},"yaw ",{"type":18,"tag":836,"props":998,"children":999},{"class":843},[1000],{"type":24,"value":893},{"type":18,"tag":836,"props":1002,"children":1003},{"class":849},[1004],{"type":24,"value":898},{"type":18,"tag":836,"props":1006,"children":1007},{"class":901},[1008],{"type":24,"value":966},{"type":18,"tag":836,"props":1010,"children":1012},{"class":838,"line":1011},11,[1013],{"type":18,"tag":836,"props":1014,"children":1015},{"class":876},[1016],{"type":24,"value":1017},"## Define input control\n",{"type":18,"tag":836,"props":1019,"children":1021},{"class":838,"line":1020},12,[1022,1027,1031,1035,1040,1044],{"type":18,"tag":836,"props":1023,"children":1024},{"class":849},[1025],{"type":24,"value":1026},"v ",{"type":18,"tag":836,"props":1028,"children":1029},{"class":843},[1030],{"type":24,"value":893},{"type":18,"tag":836,"props":1032,"children":1033},{"class":849},[1034],{"type":24,"value":898},{"type":18,"tag":836,"props":1036,"children":1037},{"class":901},[1038],{"type":24,"value":1039},"1.5",{"type":18,"tag":836,"props":1041,"children":1042},{"class":849},[1043],{"type":24,"value":898},{"type":18,"tag":836,"props":1045,"children":1046},{"class":876},[1047],{"type":24,"value":1048},"#m/s\n",{"type":18,"tag":836,"props":1050,"children":1052},{"class":838,"line":1051},13,[1053,1058,1062,1066,1071,1075],{"type":18,"tag":836,"props":1054,"children":1055},{"class":849},[1056],{"type":24,"value":1057},"omega ",{"type":18,"tag":836,"props":1059,"children":1060},{"class":843},[1061],{"type":24,"value":893},{"type":18,"tag":836,"props":1063,"children":1064},{"class":849},[1065],{"type":24,"value":898},{"type":18,"tag":836,"props":1067,"children":1068},{"class":901},[1069],{"type":24,"value":1070},"1.57",{"type":18,"tag":836,"props":1072,"children":1073},{"class":849},[1074],{"type":24,"value":898},{"type":18,"tag":836,"props":1076,"children":1077},{"class":876},[1078],{"type":24,"value":1079},"#rad/s\n",{"type":18,"tag":836,"props":1081,"children":1083},{"class":838,"line":1082},14,[1084],{"type":18,"tag":836,"props":1085,"children":1086},{"class":876},[1087],{"type":24,"value":1088},"## Define state represent model\n",{"type":18,"tag":836,"props":1090,"children":1092},{"class":838,"line":1091},15,[1093],{"type":18,"tag":836,"props":1094,"children":1095},{"class":876},[1096],{"type":24,"value":1097},"### define lambda function take variable x\n",{"type":18,"tag":836,"props":1099,"children":1101},{"class":838,"line":1100},16,[1102,1107,1111,1115,1120],{"type":18,"tag":836,"props":1103,"children":1104},{"class":849},[1105],{"type":24,"value":1106},"f ",{"type":18,"tag":836,"props":1108,"children":1109},{"class":843},[1110],{"type":24,"value":893},{"type":18,"tag":836,"props":1112,"children":1113},{"class":849},[1114],{"type":24,"value":898},{"type":18,"tag":836,"props":1116,"children":1117},{"class":843},[1118],{"type":24,"value":1119},"lambda",{"type":18,"tag":836,"props":1121,"children":1122},{"class":849},[1123],{"type":24,"value":1124}," x, u :  np.array([\n",{"type":18,"tag":836,"props":1126,"children":1128},{"class":838,"line":1127},17,[1129,1134,1139,1144,1149,1154,1159],{"type":18,"tag":836,"props":1130,"children":1131},{"class":849},[1132],{"type":24,"value":1133},"      [u[",{"type":18,"tag":836,"props":1135,"children":1136},{"class":901},[1137],{"type":24,"value":1138},"0",{"type":18,"tag":836,"props":1140,"children":1141},{"class":849},[1142],{"type":24,"value":1143},"]",{"type":18,"tag":836,"props":1145,"children":1146},{"class":843},[1147],{"type":24,"value":1148},"*",{"type":18,"tag":836,"props":1150,"children":1151},{"class":849},[1152],{"type":24,"value":1153},"np.cos(x[",{"type":18,"tag":836,"props":1155,"children":1156},{"class":901},[1157],{"type":24,"value":1158},"2",{"type":18,"tag":836,"props":1160,"children":1161},{"class":849},[1162],{"type":24,"value":1163},"])],\n",{"type":18,"tag":836,"props":1165,"children":1167},{"class":838,"line":1166},18,[1168,1172,1176,1180,1184,1189,1193],{"type":18,"tag":836,"props":1169,"children":1170},{"class":849},[1171],{"type":24,"value":1133},{"type":18,"tag":836,"props":1173,"children":1174},{"class":901},[1175],{"type":24,"value":1138},{"type":18,"tag":836,"props":1177,"children":1178},{"class":849},[1179],{"type":24,"value":1143},{"type":18,"tag":836,"props":1181,"children":1182},{"class":843},[1183],{"type":24,"value":1148},{"type":18,"tag":836,"props":1185,"children":1186},{"class":849},[1187],{"type":24,"value":1188},"np.sin(x[",{"type":18,"tag":836,"props":1190,"children":1191},{"class":901},[1192],{"type":24,"value":1158},{"type":18,"tag":836,"props":1194,"children":1195},{"class":849},[1196],{"type":24,"value":1163},{"type":18,"tag":836,"props":1198,"children":1200},{"class":838,"line":1199},19,[1201,1205,1210],{"type":18,"tag":836,"props":1202,"children":1203},{"class":849},[1204],{"type":24,"value":1133},{"type":18,"tag":836,"props":1206,"children":1207},{"class":901},[1208],{"type":24,"value":1209},"1",{"type":18,"tag":836,"props":1211,"children":1212},{"class":849},[1213],{"type":24,"value":1214},"]]\n",{"type":18,"tag":836,"props":1216,"children":1218},{"class":838,"line":1217},20,[1219],{"type":18,"tag":836,"props":1220,"children":1221},{"class":849},[1222],{"type":24,"value":1223},"])\n",{"type":18,"tag":836,"props":1225,"children":1227},{"class":838,"line":1226},21,[1228],{"type":18,"tag":836,"props":1229,"children":1230},{},[1231],{"type":24,"value":870},{"type":18,"tag":836,"props":1233,"children":1235},{"class":838,"line":1234},22,[1236,1241,1246,1251,1255,1260],{"type":18,"tag":836,"props":1237,"children":1238},{"class":843},[1239],{"type":24,"value":1240},"for",{"type":18,"tag":836,"props":1242,"children":1243},{"class":849},[1244],{"type":24,"value":1245}," _ ",{"type":18,"tag":836,"props":1247,"children":1248},{"class":843},[1249],{"type":24,"value":1250},"in",{"type":18,"tag":836,"props":1252,"children":1253},{"class":849},[1254],{"type":24,"value":898},{"type":18,"tag":836,"props":1256,"children":1257},{"class":901},[1258],{"type":24,"value":1259},"range",{"type":18,"tag":836,"props":1261,"children":1262},{"class":849},[1263],{"type":24,"value":1264},"(num_steps):\n",{"type":18,"tag":836,"props":1266,"children":1268},{"class":838,"line":1267},23,[1269,1274,1278],{"type":18,"tag":836,"props":1270,"children":1271},{"class":849},[1272],{"type":24,"value":1273},"    k1 ",{"type":18,"tag":836,"props":1275,"children":1276},{"class":843},[1277],{"type":24,"value":893},{"type":18,"tag":836,"props":1279,"children":1280},{"class":849},[1281],{"type":24,"value":1282}," f([x, y, yaw], [v, omega])\n",{"type":18,"tag":836,"props":1284,"children":1286},{"class":838,"line":1285},24,[1287,1292,1296,1301,1306,1311,1316,1320,1324,1329,1333,1338,1342,1347,1351,1355,1359,1363,1367,1371,1375,1379,1383,1388,1392,1396,1400,1404,1408,1412,1416,1420,1424],{"type":18,"tag":836,"props":1288,"children":1289},{"class":849},[1290],{"type":24,"value":1291},"    k2 ",{"type":18,"tag":836,"props":1293,"children":1294},{"class":843},[1295],{"type":24,"value":893},{"type":18,"tag":836,"props":1297,"children":1298},{"class":849},[1299],{"type":24,"value":1300}," f([x ",{"type":18,"tag":836,"props":1302,"children":1303},{"class":843},[1304],{"type":24,"value":1305},"+",{"type":18,"tag":836,"props":1307,"children":1308},{"class":849},[1309],{"type":24,"value":1310}," (dt ",{"type":18,"tag":836,"props":1312,"children":1313},{"class":843},[1314],{"type":24,"value":1315},"/",{"type":18,"tag":836,"props":1317,"children":1318},{"class":849},[1319],{"type":24,"value":898},{"type":18,"tag":836,"props":1321,"children":1322},{"class":901},[1323],{"type":24,"value":1158},{"type":18,"tag":836,"props":1325,"children":1326},{"class":849},[1327],{"type":24,"value":1328},") ",{"type":18,"tag":836,"props":1330,"children":1331},{"class":843},[1332],{"type":24,"value":1148},{"type":18,"tag":836,"props":1334,"children":1335},{"class":849},[1336],{"type":24,"value":1337}," k1[",{"type":18,"tag":836,"props":1339,"children":1340},{"class":901},[1341],{"type":24,"value":1138},{"type":18,"tag":836,"props":1343,"children":1344},{"class":849},[1345],{"type":24,"value":1346},"], y ",{"type":18,"tag":836,"props":1348,"children":1349},{"class":843},[1350],{"type":24,"value":1305},{"type":18,"tag":836,"props":1352,"children":1353},{"class":849},[1354],{"type":24,"value":1310},{"type":18,"tag":836,"props":1356,"children":1357},{"class":843},[1358],{"type":24,"value":1315},{"type":18,"tag":836,"props":1360,"children":1361},{"class":849},[1362],{"type":24,"value":898},{"type":18,"tag":836,"props":1364,"children":1365},{"class":901},[1366],{"type":24,"value":1158},{"type":18,"tag":836,"props":1368,"children":1369},{"class":849},[1370],{"type":24,"value":1328},{"type":18,"tag":836,"props":1372,"children":1373},{"class":843},[1374],{"type":24,"value":1148},{"type":18,"tag":836,"props":1376,"children":1377},{"class":849},[1378],{"type":24,"value":1337},{"type":18,"tag":836,"props":1380,"children":1381},{"class":901},[1382],{"type":24,"value":1209},{"type":18,"tag":836,"props":1384,"children":1385},{"class":849},[1386],{"type":24,"value":1387},"], yaw ",{"type":18,"tag":836,"props":1389,"children":1390},{"class":843},[1391],{"type":24,"value":1305},{"type":18,"tag":836,"props":1393,"children":1394},{"class":849},[1395],{"type":24,"value":1310},{"type":18,"tag":836,"props":1397,"children":1398},{"class":843},[1399],{"type":24,"value":1315},{"type":18,"tag":836,"props":1401,"children":1402},{"class":849},[1403],{"type":24,"value":898},{"type":18,"tag":836,"props":1405,"children":1406},{"class":901},[1407],{"type":24,"value":1158},{"type":18,"tag":836,"props":1409,"children":1410},{"class":849},[1411],{"type":24,"value":1328},{"type":18,"tag":836,"props":1413,"children":1414},{"class":843},[1415],{"type":24,"value":1148},{"type":18,"tag":836,"props":1417,"children":1418},{"class":849},[1419],{"type":24,"value":1337},{"type":18,"tag":836,"props":1421,"children":1422},{"class":901},[1423],{"type":24,"value":1158},{"type":18,"tag":836,"props":1425,"children":1426},{"class":849},[1427],{"type":24,"value":1428},"]], [v, omega])\n",{"type":18,"tag":836,"props":1430,"children":1432},{"class":838,"line":1431},25,[1433,1438,1442,1446,1450,1454,1458,1462,1466,1470,1474,1479,1483,1487,1491,1495,1499,1503,1507,1511,1515,1519,1523,1527,1531,1535,1539,1543,1547,1551,1555,1559,1563],{"type":18,"tag":836,"props":1434,"children":1435},{"class":849},[1436],{"type":24,"value":1437},"    k3 ",{"type":18,"tag":836,"props":1439,"children":1440},{"class":843},[1441],{"type":24,"value":893},{"type":18,"tag":836,"props":1443,"children":1444},{"class":849},[1445],{"type":24,"value":1300},{"type":18,"tag":836,"props":1447,"children":1448},{"class":843},[1449],{"type":24,"value":1305},{"type":18,"tag":836,"props":1451,"children":1452},{"class":849},[1453],{"type":24,"value":1310},{"type":18,"tag":836,"props":1455,"children":1456},{"class":843},[1457],{"type":24,"value":1315},{"type":18,"tag":836,"props":1459,"children":1460},{"class":849},[1461],{"type":24,"value":898},{"type":18,"tag":836,"props":1463,"children":1464},{"class":901},[1465],{"type":24,"value":1158},{"type":18,"tag":836,"props":1467,"children":1468},{"class":849},[1469],{"type":24,"value":1328},{"type":18,"tag":836,"props":1471,"children":1472},{"class":843},[1473],{"type":24,"value":1148},{"type":18,"tag":836,"props":1475,"children":1476},{"class":849},[1477],{"type":24,"value":1478}," k2[",{"type":18,"tag":836,"props":1480,"children":1481},{"class":901},[1482],{"type":24,"value":1138},{"type":18,"tag":836,"props":1484,"children":1485},{"class":849},[1486],{"type":24,"value":1346},{"type":18,"tag":836,"props":1488,"children":1489},{"class":843},[1490],{"type":24,"value":1305},{"type":18,"tag":836,"props":1492,"children":1493},{"class":849},[1494],{"type":24,"value":1310},{"type":18,"tag":836,"props":1496,"children":1497},{"class":843},[1498],{"type":24,"value":1315},{"type":18,"tag":836,"props":1500,"children":1501},{"class":849},[1502],{"type":24,"value":898},{"type":18,"tag":836,"props":1504,"children":1505},{"class":901},[1506],{"type":24,"value":1158},{"type":18,"tag":836,"props":1508,"children":1509},{"class":849},[1510],{"type":24,"value":1328},{"type":18,"tag":836,"props":1512,"children":1513},{"class":843},[1514],{"type":24,"value":1148},{"type":18,"tag":836,"props":1516,"children":1517},{"class":849},[1518],{"type":24,"value":1478},{"type":18,"tag":836,"props":1520,"children":1521},{"class":901},[1522],{"type":24,"value":1209},{"type":18,"tag":836,"props":1524,"children":1525},{"class":849},[1526],{"type":24,"value":1387},{"type":18,"tag":836,"props":1528,"children":1529},{"class":843},[1530],{"type":24,"value":1305},{"type":18,"tag":836,"props":1532,"children":1533},{"class":849},[1534],{"type":24,"value":1310},{"type":18,"tag":836,"props":1536,"children":1537},{"class":843},[1538],{"type":24,"value":1315},{"type":18,"tag":836,"props":1540,"children":1541},{"class":849},[1542],{"type":24,"value":898},{"type":18,"tag":836,"props":1544,"children":1545},{"class":901},[1546],{"type":24,"value":1158},{"type":18,"tag":836,"props":1548,"children":1549},{"class":849},[1550],{"type":24,"value":1328},{"type":18,"tag":836,"props":1552,"children":1553},{"class":843},[1554],{"type":24,"value":1148},{"type":18,"tag":836,"props":1556,"children":1557},{"class":849},[1558],{"type":24,"value":1478},{"type":18,"tag":836,"props":1560,"children":1561},{"class":901},[1562],{"type":24,"value":1158},{"type":18,"tag":836,"props":1564,"children":1565},{"class":849},[1566],{"type":24,"value":1428},{"type":18,"tag":836,"props":1568,"children":1570},{"class":838,"line":1569},26,[1571,1576,1580,1584,1588,1593,1597,1602,1606,1610,1614,1618,1622,1626,1630,1634,1638,1642,1646,1650,1654],{"type":18,"tag":836,"props":1572,"children":1573},{"class":849},[1574],{"type":24,"value":1575},"    k4 ",{"type":18,"tag":836,"props":1577,"children":1578},{"class":843},[1579],{"type":24,"value":893},{"type":18,"tag":836,"props":1581,"children":1582},{"class":849},[1583],{"type":24,"value":1300},{"type":18,"tag":836,"props":1585,"children":1586},{"class":843},[1587],{"type":24,"value":1305},{"type":18,"tag":836,"props":1589,"children":1590},{"class":849},[1591],{"type":24,"value":1592}," dt ",{"type":18,"tag":836,"props":1594,"children":1595},{"class":843},[1596],{"type":24,"value":1148},{"type":18,"tag":836,"props":1598,"children":1599},{"class":849},[1600],{"type":24,"value":1601}," k3[",{"type":18,"tag":836,"props":1603,"children":1604},{"class":901},[1605],{"type":24,"value":1138},{"type":18,"tag":836,"props":1607,"children":1608},{"class":849},[1609],{"type":24,"value":1346},{"type":18,"tag":836,"props":1611,"children":1612},{"class":843},[1613],{"type":24,"value":1305},{"type":18,"tag":836,"props":1615,"children":1616},{"class":849},[1617],{"type":24,"value":1592},{"type":18,"tag":836,"props":1619,"children":1620},{"class":843},[1621],{"type":24,"value":1148},{"type":18,"tag":836,"props":1623,"children":1624},{"class":849},[1625],{"type":24,"value":1601},{"type":18,"tag":836,"props":1627,"children":1628},{"class":901},[1629],{"type":24,"value":1209},{"type":18,"tag":836,"props":1631,"children":1632},{"class":849},[1633],{"type":24,"value":1387},{"type":18,"tag":836,"props":1635,"children":1636},{"class":843},[1637],{"type":24,"value":1305},{"type":18,"tag":836,"props":1639,"children":1640},{"class":849},[1641],{"type":24,"value":1592},{"type":18,"tag":836,"props":1643,"children":1644},{"class":843},[1645],{"type":24,"value":1148},{"type":18,"tag":836,"props":1647,"children":1648},{"class":849},[1649],{"type":24,"value":1601},{"type":18,"tag":836,"props":1651,"children":1652},{"class":901},[1653],{"type":24,"value":1158},{"type":18,"tag":836,"props":1655,"children":1656},{"class":849},[1657],{"type":24,"value":1428},{"type":18,"tag":836,"props":1659,"children":1661},{"class":838,"line":1660},27,[1662],{"type":18,"tag":836,"props":1663,"children":1664},{},[1665],{"type":24,"value":870},{"type":18,"tag":836,"props":1667,"children":1669},{"class":838,"line":1668},28,[1670,1675],{"type":18,"tag":836,"props":1671,"children":1672},{"class":849},[1673],{"type":24,"value":1674},"    ",{"type":18,"tag":836,"props":1676,"children":1677},{"class":876},[1678],{"type":24,"value":1679},"# Update state of the robot\n",{"type":18,"tag":836,"props":1681,"children":1683},{"class":838,"line":1682},29,[1684,1689,1694,1699,1703,1708,1712,1716,1720,1724,1728,1732,1736,1740,1744,1748,1752,1756,1760,1764,1768,1772,1776,1781,1785,1790,1794,1798,1802,1806],{"type":18,"tag":836,"props":1685,"children":1686},{"class":849},[1687],{"type":24,"value":1688},"    x ",{"type":18,"tag":836,"props":1690,"children":1691},{"class":843},[1692],{"type":24,"value":1693},"+=",{"type":18,"tag":836,"props":1695,"children":1696},{"class":849},[1697],{"type":24,"value":1698}," (k1[",{"type":18,"tag":836,"props":1700,"children":1701},{"class":901},[1702],{"type":24,"value":1138},{"type":18,"tag":836,"props":1704,"children":1705},{"class":849},[1706],{"type":24,"value":1707},"] ",{"type":18,"tag":836,"props":1709,"children":1710},{"class":843},[1711],{"type":24,"value":1305},{"type":18,"tag":836,"props":1713,"children":1714},{"class":849},[1715],{"type":24,"value":898},{"type":18,"tag":836,"props":1717,"children":1718},{"class":901},[1719],{"type":24,"value":1158},{"type":18,"tag":836,"props":1721,"children":1722},{"class":849},[1723],{"type":24,"value":898},{"type":18,"tag":836,"props":1725,"children":1726},{"class":843},[1727],{"type":24,"value":1148},{"type":18,"tag":836,"props":1729,"children":1730},{"class":849},[1731],{"type":24,"value":1478},{"type":18,"tag":836,"props":1733,"children":1734},{"class":901},[1735],{"type":24,"value":1138},{"type":18,"tag":836,"props":1737,"children":1738},{"class":849},[1739],{"type":24,"value":1707},{"type":18,"tag":836,"props":1741,"children":1742},{"class":843},[1743],{"type":24,"value":1305},{"type":18,"tag":836,"props":1745,"children":1746},{"class":849},[1747],{"type":24,"value":898},{"type":18,"tag":836,"props":1749,"children":1750},{"class":901},[1751],{"type":24,"value":1158},{"type":18,"tag":836,"props":1753,"children":1754},{"class":849},[1755],{"type":24,"value":898},{"type":18,"tag":836,"props":1757,"children":1758},{"class":843},[1759],{"type":24,"value":1148},{"type":18,"tag":836,"props":1761,"children":1762},{"class":849},[1763],{"type":24,"value":1601},{"type":18,"tag":836,"props":1765,"children":1766},{"class":901},[1767],{"type":24,"value":1138},{"type":18,"tag":836,"props":1769,"children":1770},{"class":849},[1771],{"type":24,"value":1707},{"type":18,"tag":836,"props":1773,"children":1774},{"class":843},[1775],{"type":24,"value":1305},{"type":18,"tag":836,"props":1777,"children":1778},{"class":849},[1779],{"type":24,"value":1780}," k4[",{"type":18,"tag":836,"props":1782,"children":1783},{"class":901},[1784],{"type":24,"value":1138},{"type":18,"tag":836,"props":1786,"children":1787},{"class":849},[1788],{"type":24,"value":1789},"]) ",{"type":18,"tag":836,"props":1791,"children":1792},{"class":843},[1793],{"type":24,"value":1148},{"type":18,"tag":836,"props":1795,"children":1796},{"class":849},[1797],{"type":24,"value":1592},{"type":18,"tag":836,"props":1799,"children":1800},{"class":843},[1801],{"type":24,"value":1315},{"type":18,"tag":836,"props":1803,"children":1804},{"class":849},[1805],{"type":24,"value":898},{"type":18,"tag":836,"props":1807,"children":1808},{"class":901},[1809],{"type":24,"value":1810},"6\n",{"type":18,"tag":836,"props":1812,"children":1814},{"class":838,"line":1813},30,[1815,1820,1824,1828,1832,1836,1840,1844,1848,1852,1856,1860,1864,1868,1872,1876,1880,1884,1888,1892,1896,1900,1904,1908,1912,1916,1920,1924,1928,1932],{"type":18,"tag":836,"props":1816,"children":1817},{"class":849},[1818],{"type":24,"value":1819},"    y ",{"type":18,"tag":836,"props":1821,"children":1822},{"class":843},[1823],{"type":24,"value":1693},{"type":18,"tag":836,"props":1825,"children":1826},{"class":849},[1827],{"type":24,"value":1698},{"type":18,"tag":836,"props":1829,"children":1830},{"class":901},[1831],{"type":24,"value":1209},{"type":18,"tag":836,"props":1833,"children":1834},{"class":849},[1835],{"type":24,"value":1707},{"type":18,"tag":836,"props":1837,"children":1838},{"class":843},[1839],{"type":24,"value":1305},{"type":18,"tag":836,"props":1841,"children":1842},{"class":849},[1843],{"type":24,"value":898},{"type":18,"tag":836,"props":1845,"children":1846},{"class":901},[1847],{"type":24,"value":1158},{"type":18,"tag":836,"props":1849,"children":1850},{"class":849},[1851],{"type":24,"value":898},{"type":18,"tag":836,"props":1853,"children":1854},{"class":843},[1855],{"type":24,"value":1148},{"type":18,"tag":836,"props":1857,"children":1858},{"class":849},[1859],{"type":24,"value":1478},{"type":18,"tag":836,"props":1861,"children":1862},{"class":901},[1863],{"type":24,"value":1209},{"type":18,"tag":836,"props":1865,"children":1866},{"class":849},[1867],{"type":24,"value":1707},{"type":18,"tag":836,"props":1869,"children":1870},{"class":843},[1871],{"type":24,"value":1305},{"type":18,"tag":836,"props":1873,"children":1874},{"class":849},[1875],{"type":24,"value":898},{"type":18,"tag":836,"props":1877,"children":1878},{"class":901},[1879],{"type":24,"value":1158},{"type":18,"tag":836,"props":1881,"children":1882},{"class":849},[1883],{"type":24,"value":898},{"type":18,"tag":836,"props":1885,"children":1886},{"class":843},[1887],{"type":24,"value":1148},{"type":18,"tag":836,"props":1889,"children":1890},{"class":849},[1891],{"type":24,"value":1601},{"type":18,"tag":836,"props":1893,"children":1894},{"class":901},[1895],{"type":24,"value":1209},{"type":18,"tag":836,"props":1897,"children":1898},{"class":849},[1899],{"type":24,"value":1707},{"type":18,"tag":836,"props":1901,"children":1902},{"class":843},[1903],{"type":24,"value":1305},{"type":18,"tag":836,"props":1905,"children":1906},{"class":849},[1907],{"type":24,"value":1780},{"type":18,"tag":836,"props":1909,"children":1910},{"class":901},[1911],{"type":24,"value":1209},{"type":18,"tag":836,"props":1913,"children":1914},{"class":849},[1915],{"type":24,"value":1789},{"type":18,"tag":836,"props":1917,"children":1918},{"class":843},[1919],{"type":24,"value":1148},{"type":18,"tag":836,"props":1921,"children":1922},{"class":849},[1923],{"type":24,"value":1592},{"type":18,"tag":836,"props":1925,"children":1926},{"class":843},[1927],{"type":24,"value":1315},{"type":18,"tag":836,"props":1929,"children":1930},{"class":849},[1931],{"type":24,"value":898},{"type":18,"tag":836,"props":1933,"children":1934},{"class":901},[1935],{"type":24,"value":1810},{"type":18,"tag":836,"props":1937,"children":1939},{"class":838,"line":1938},31,[1940,1945,1949,1953,1957,1961,1965,1969,1973,1977,1981,1985,1989,1993,1997,2001,2005,2009,2013,2017,2021,2025,2029,2033,2037,2041,2045,2049,2053,2057],{"type":18,"tag":836,"props":1941,"children":1942},{"class":849},[1943],{"type":24,"value":1944},"    yaw ",{"type":18,"tag":836,"props":1946,"children":1947},{"class":843},[1948],{"type":24,"value":1693},{"type":18,"tag":836,"props":1950,"children":1951},{"class":849},[1952],{"type":24,"value":1698},{"type":18,"tag":836,"props":1954,"children":1955},{"class":901},[1956],{"type":24,"value":1158},{"type":18,"tag":836,"props":1958,"children":1959},{"class":849},[1960],{"type":24,"value":1707},{"type":18,"tag":836,"props":1962,"children":1963},{"class":843},[1964],{"type":24,"value":1305},{"type":18,"tag":836,"props":1966,"children":1967},{"class":849},[1968],{"type":24,"value":898},{"type":18,"tag":836,"props":1970,"children":1971},{"class":901},[1972],{"type":24,"value":1158},{"type":18,"tag":836,"props":1974,"children":1975},{"class":849},[1976],{"type":24,"value":898},{"type":18,"tag":836,"props":1978,"children":1979},{"class":843},[1980],{"type":24,"value":1148},{"type":18,"tag":836,"props":1982,"children":1983},{"class":849},[1984],{"type":24,"value":1478},{"type":18,"tag":836,"props":1986,"children":1987},{"class":901},[1988],{"type":24,"value":1158},{"type":18,"tag":836,"props":1990,"children":1991},{"class":849},[1992],{"type":24,"value":1707},{"type":18,"tag":836,"props":1994,"children":1995},{"class":843},[1996],{"type":24,"value":1305},{"type":18,"tag":836,"props":1998,"children":1999},{"class":849},[2000],{"type":24,"value":898},{"type":18,"tag":836,"props":2002,"children":2003},{"class":901},[2004],{"type":24,"value":1158},{"type":18,"tag":836,"props":2006,"children":2007},{"class":849},[2008],{"type":24,"value":898},{"type":18,"tag":836,"props":2010,"children":2011},{"class":843},[2012],{"type":24,"value":1148},{"type":18,"tag":836,"props":2014,"children":2015},{"class":849},[2016],{"type":24,"value":1601},{"type":18,"tag":836,"props":2018,"children":2019},{"class":901},[2020],{"type":24,"value":1158},{"type":18,"tag":836,"props":2022,"children":2023},{"class":849},[2024],{"type":24,"value":1707},{"type":18,"tag":836,"props":2026,"children":2027},{"class":843},[2028],{"type":24,"value":1305},{"type":18,"tag":836,"props":2030,"children":2031},{"class":849},[2032],{"type":24,"value":1780},{"type":18,"tag":836,"props":2034,"children":2035},{"class":901},[2036],{"type":24,"value":1158},{"type":18,"tag":836,"props":2038,"children":2039},{"class":849},[2040],{"type":24,"value":1789},{"type":18,"tag":836,"props":2042,"children":2043},{"class":843},[2044],{"type":24,"value":1148},{"type":18,"tag":836,"props":2046,"children":2047},{"class":849},[2048],{"type":24,"value":1592},{"type":18,"tag":836,"props":2050,"children":2051},{"class":843},[2052],{"type":24,"value":1315},{"type":18,"tag":836,"props":2054,"children":2055},{"class":849},[2056],{"type":24,"value":898},{"type":18,"tag":836,"props":2058,"children":2059},{"class":901},[2060],{"type":24,"value":2061},"6",{"type":18,"tag":19,"props":2063,"children":2065},{"id":2064},"single-shooting-method",[2066],{"type":24,"value":2067},"Single Shooting Method",{"type":18,"tag":27,"props":2069,"children":2070},{},[2071],{"type":24,"value":2072},"Single Shooting Method is a method that we transform the optimal control problem to the nonlinear programming problem with just one decision variable.",{"type":18,"tag":65,"props":2074,"children":2076},{"latex-express":2075,"styles":68},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":65,"props":2078,"children":2080},{"latex-express":2079,"styles":68},"\n      \\begin{align*}\n            x_{u} &= F(w,x_{0},t_{k}) \\\\\n            F(w,x_{0},t_{0}) &= x_{0} \\\\\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":2082,"children":2083},{},[2084],{"type":24,"value":2085},"Then solve the NLP",{"type":18,"tag":65,"props":2087,"children":2089},{"latex-express":2088,"styles":68},"\n      \\begin{align*}\n            \\min_{w}\\Phi(F(w,x_{0},t_{k}), w) \\\\ \n            \\text{Subject to} \\hspace{1cm}  g_{1}(F(w,x_{0},t_{k}),w) \\leq{0}\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":2091,"children":2093},{"id":2092},"multiple-shooting-method",[2094],{"type":24,"value":2095},"Multiple Shooting Method",{"type":18,"tag":27,"props":2097,"children":2098},{},[2099],{"type":24,"value":2100},"Multiple Shooting Method is a method that consist of transforming of optimal control problem to the nonlinear programming problem with multiple decision variables.",{"type":18,"tag":65,"props":2102,"children":2104},{"latex-express":2103,"styles":68},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}, x_{0}, ..., x_{N}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":76,"props":2106,"children":2107},{},[2108,2116],{"type":18,"tag":80,"props":2109,"children":2110},{},[2111,2114],{"type":18,"tag":84,"props":2112,"children":2113},{"latex-express":672,"styles":87},[],{"type":24,"value":2115}," becoming decision variable in the opimization problem as well as u",{"type":18,"tag":80,"props":2117,"children":2118},{},[2119],{"type":24,"value":2120},"We apply path constraint at each iteration step",{"type":18,"tag":65,"props":2122,"children":2124},{"latex-express":2123,"styles":68},"\n      \\begin{equation*}\n                x_{k+1}-f(x_{k},u_{k}) = 0\n            \\end{equation*}\n",[],{"type":18,"tag":27,"props":2126,"children":2127},{},[2128],{"type":24,"value":2085},{"type":18,"tag":65,"props":2130,"children":2132},{"latex-express":2131,"styles":68},"\n      \\begin{align*}\n            \\min_{w}  \\Phi(F(w,x_{0},t_{k}),& w) \\\\ \n            \\text{s.t}\\hspace{0.5cm}  g_{1}(F(w,x_{0},t_{k}),w) &\\leq{0} \\\\ \n                               g_{2}(w) = \\begin{bmatrix}\n                                  \\bar{x}_{0}-x_{0} \\\\\n                                  f(x_{0},u_{0})-x_{1} \\\\ \n                                  \\vdots \\\\\n                                  f(x_{N-1}, u_{N-1}-x_{N})\n                              \\end{bmatrix} &= 0\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":2134,"children":2136},{"id":2135},"full-implement-in-python",[2137],{"type":24,"value":2138},"Full Implement in Python",{"type":18,"tag":27,"props":2140,"children":2141},{},[2142,2144,2150],{"type":24,"value":2143},"We will use ",{"type":18,"tag":2145,"props":2146,"children":2147},"code-inline",{},[2148],{"type":24,"value":2149},"Casadi",{"type":24,"value":2151}," as a numerical optimization framework.",{"type":18,"tag":821,"props":2153,"children":2156},{"className":2154,"code":2155,"language":826,"meta":8},[824],"import casadi as ca\n",[2157],{"type":18,"tag":829,"props":2158,"children":2159},{},[2160],{"type":18,"tag":821,"props":2161,"children":2162},{"__ignoreMap":8},[2163],{"type":18,"tag":836,"props":2164,"children":2165},{"class":838,"line":839},[2166,2170,2175,2179],{"type":18,"tag":836,"props":2167,"children":2168},{"class":843},[2169],{"type":24,"value":846},{"type":18,"tag":836,"props":2171,"children":2172},{"class":849},[2173],{"type":24,"value":2174}," casadi ",{"type":18,"tag":836,"props":2176,"children":2177},{"class":843},[2178],{"type":24,"value":857},{"type":18,"tag":836,"props":2180,"children":2181},{"class":849},[2182],{"type":24,"value":2183}," ca",{"type":18,"tag":27,"props":2185,"children":2186},{},[2187],{"type":24,"value":2188},"Define state representation and input control of our nonlinear model.",{"type":18,"tag":821,"props":2190,"children":2193},{"className":2191,"code":2192,"language":826,"meta":8},[824],"# Symbolic Variables\n## States\nx = ca.SX.sym(\"x\")\ny = ca.SX.sym(\"y\")\ntheta = ca.SX.sym(\"theta\")\nstates = ca.vertcat(x, y, theta)\nnum_states = states.numel()\n\n## Control\nu1 = ca.SX.sym(\"u1\")\nu2 = ca.SX.sym(\"u2\")\ncontrols = ca.vertcat(u1, u2)\nnum_controls = controls.numel()\n\n# Define Nonlinear model\n## Rotation Matrix\nrot_mat = ca.vertcat(\n    ca.horzcat(ca.cos(theta), ca.sin(theta), 0),\n    ca.horzcat(-ca.sin(theta), ca.cos(theta), 0),\n    ca.horzcat(0, 0, 1)\n)\n\nvx = u1 * ca.cos(theta)\nvy = u1 * ca.sin(theta)\nvyaw = u2\n\nrhs = ca.vertcat(vx, vy, vyaw)\n## Define mapped nonlinear function f(x,u) -> rhs\nf = ca.Function('f', [states, controls], [rhs])\n",[2194],{"type":18,"tag":829,"props":2195,"children":2196},{},[2197],{"type":18,"tag":821,"props":2198,"children":2199},{"__ignoreMap":8},[2200,2208,2216,2253,2285,2318,2335,2352,2359,2367,2400,2433,2450,2467,2474,2482,2490,2507,2524,2550,2582,2589,2596,2622,2647,2664,2671,2688,2696],{"type":18,"tag":836,"props":2201,"children":2202},{"class":838,"line":839},[2203],{"type":18,"tag":836,"props":2204,"children":2205},{"class":876},[2206],{"type":24,"value":2207},"# Symbolic Variables\n",{"type":18,"tag":836,"props":2209,"children":2210},{"class":838,"line":555},[2211],{"type":18,"tag":836,"props":2212,"children":2213},{"class":876},[2214],{"type":24,"value":2215},"## States\n",{"type":18,"tag":836,"props":2217,"children":2218},{"class":838,"line":560},[2219,2223,2227,2232,2237,2242,2248],{"type":18,"tag":836,"props":2220,"children":2221},{"class":849},[2222],{"type":24,"value":953},{"type":18,"tag":836,"props":2224,"children":2225},{"class":843},[2226],{"type":24,"value":893},{"type":18,"tag":836,"props":2228,"children":2229},{"class":849},[2230],{"type":24,"value":2231}," ca.",{"type":18,"tag":836,"props":2233,"children":2234},{"class":901},[2235],{"type":24,"value":2236},"SX",{"type":18,"tag":836,"props":2238,"children":2239},{"class":849},[2240],{"type":24,"value":2241},".sym(",{"type":18,"tag":836,"props":2243,"children":2245},{"class":2244},"ct-244866",[2246],{"type":24,"value":2247},"\"x\"",{"type":18,"tag":836,"props":2249,"children":2250},{"class":849},[2251],{"type":24,"value":2252},")\n",{"type":18,"tag":836,"props":2254,"children":2255},{"class":838,"line":882},[2256,2260,2264,2268,2272,2276,2281],{"type":18,"tag":836,"props":2257,"children":2258},{"class":849},[2259],{"type":24,"value":975},{"type":18,"tag":836,"props":2261,"children":2262},{"class":843},[2263],{"type":24,"value":893},{"type":18,"tag":836,"props":2265,"children":2266},{"class":849},[2267],{"type":24,"value":2231},{"type":18,"tag":836,"props":2269,"children":2270},{"class":901},[2271],{"type":24,"value":2236},{"type":18,"tag":836,"props":2273,"children":2274},{"class":849},[2275],{"type":24,"value":2241},{"type":18,"tag":836,"props":2277,"children":2278},{"class":2244},[2279],{"type":24,"value":2280},"\"y\"",{"type":18,"tag":836,"props":2282,"children":2283},{"class":849},[2284],{"type":24,"value":2252},{"type":18,"tag":836,"props":2286,"children":2287},{"class":838,"line":907},[2288,2293,2297,2301,2305,2309,2314],{"type":18,"tag":836,"props":2289,"children":2290},{"class":849},[2291],{"type":24,"value":2292},"theta ",{"type":18,"tag":836,"props":2294,"children":2295},{"class":843},[2296],{"type":24,"value":893},{"type":18,"tag":836,"props":2298,"children":2299},{"class":849},[2300],{"type":24,"value":2231},{"type":18,"tag":836,"props":2302,"children":2303},{"class":901},[2304],{"type":24,"value":2236},{"type":18,"tag":836,"props":2306,"children":2307},{"class":849},[2308],{"type":24,"value":2241},{"type":18,"tag":836,"props":2310,"children":2311},{"class":2244},[2312],{"type":24,"value":2313},"\"theta\"",{"type":18,"tag":836,"props":2315,"children":2316},{"class":849},[2317],{"type":24,"value":2252},{"type":18,"tag":836,"props":2319,"children":2320},{"class":838,"line":916},[2321,2326,2330],{"type":18,"tag":836,"props":2322,"children":2323},{"class":849},[2324],{"type":24,"value":2325},"states ",{"type":18,"tag":836,"props":2327,"children":2328},{"class":843},[2329],{"type":24,"value":893},{"type":18,"tag":836,"props":2331,"children":2332},{"class":849},[2333],{"type":24,"value":2334}," ca.vertcat(x, y, theta)\n",{"type":18,"tag":836,"props":2336,"children":2337},{"class":838,"line":938},[2338,2343,2347],{"type":18,"tag":836,"props":2339,"children":2340},{"class":849},[2341],{"type":24,"value":2342},"num_states ",{"type":18,"tag":836,"props":2344,"children":2345},{"class":843},[2346],{"type":24,"value":893},{"type":18,"tag":836,"props":2348,"children":2349},{"class":849},[2350],{"type":24,"value":2351}," states.numel()\n",{"type":18,"tag":836,"props":2353,"children":2354},{"class":838,"line":947},[2355],{"type":18,"tag":836,"props":2356,"children":2357},{},[2358],{"type":24,"value":870},{"type":18,"tag":836,"props":2360,"children":2361},{"class":838,"line":969},[2362],{"type":18,"tag":836,"props":2363,"children":2364},{"class":876},[2365],{"type":24,"value":2366},"## Control\n",{"type":18,"tag":836,"props":2368,"children":2369},{"class":838,"line":990},[2370,2375,2379,2383,2387,2391,2396],{"type":18,"tag":836,"props":2371,"children":2372},{"class":849},[2373],{"type":24,"value":2374},"u1 ",{"type":18,"tag":836,"props":2376,"children":2377},{"class":843},[2378],{"type":24,"value":893},{"type":18,"tag":836,"props":2380,"children":2381},{"class":849},[2382],{"type":24,"value":2231},{"type":18,"tag":836,"props":2384,"children":2385},{"class":901},[2386],{"type":24,"value":2236},{"type":18,"tag":836,"props":2388,"children":2389},{"class":849},[2390],{"type":24,"value":2241},{"type":18,"tag":836,"props":2392,"children":2393},{"class":2244},[2394],{"type":24,"value":2395},"\"u1\"",{"type":18,"tag":836,"props":2397,"children":2398},{"class":849},[2399],{"type":24,"value":2252},{"type":18,"tag":836,"props":2401,"children":2402},{"class":838,"line":1011},[2403,2408,2412,2416,2420,2424,2429],{"type":18,"tag":836,"props":2404,"children":2405},{"class":849},[2406],{"type":24,"value":2407},"u2 ",{"type":18,"tag":836,"props":2409,"children":2410},{"class":843},[2411],{"type":24,"value":893},{"type":18,"tag":836,"props":2413,"children":2414},{"class":849},[2415],{"type":24,"value":2231},{"type":18,"tag":836,"props":2417,"children":2418},{"class":901},[2419],{"type":24,"value":2236},{"type":18,"tag":836,"props":2421,"children":2422},{"class":849},[2423],{"type":24,"value":2241},{"type":18,"tag":836,"props":2425,"children":2426},{"class":2244},[2427],{"type":24,"value":2428},"\"u2\"",{"type":18,"tag":836,"props":2430,"children":2431},{"class":849},[2432],{"type":24,"value":2252},{"type":18,"tag":836,"props":2434,"children":2435},{"class":838,"line":1020},[2436,2441,2445],{"type":18,"tag":836,"props":2437,"children":2438},{"class":849},[2439],{"type":24,"value":2440},"controls ",{"type":18,"tag":836,"props":2442,"children":2443},{"class":843},[2444],{"type":24,"value":893},{"type":18,"tag":836,"props":2446,"children":2447},{"class":849},[2448],{"type":24,"value":2449}," ca.vertcat(u1, u2)\n",{"type":18,"tag":836,"props":2451,"children":2452},{"class":838,"line":1051},[2453,2458,2462],{"type":18,"tag":836,"props":2454,"children":2455},{"class":849},[2456],{"type":24,"value":2457},"num_controls ",{"type":18,"tag":836,"props":2459,"children":2460},{"class":843},[2461],{"type":24,"value":893},{"type":18,"tag":836,"props":2463,"children":2464},{"class":849},[2465],{"type":24,"value":2466}," controls.numel()\n",{"type":18,"tag":836,"props":2468,"children":2469},{"class":838,"line":1082},[2470],{"type":18,"tag":836,"props":2471,"children":2472},{},[2473],{"type":24,"value":870},{"type":18,"tag":836,"props":2475,"children":2476},{"class":838,"line":1091},[2477],{"type":18,"tag":836,"props":2478,"children":2479},{"class":876},[2480],{"type":24,"value":2481},"# Define Nonlinear model\n",{"type":18,"tag":836,"props":2483,"children":2484},{"class":838,"line":1100},[2485],{"type":18,"tag":836,"props":2486,"children":2487},{"class":876},[2488],{"type":24,"value":2489},"## Rotation Matrix\n",{"type":18,"tag":836,"props":2491,"children":2492},{"class":838,"line":1127},[2493,2498,2502],{"type":18,"tag":836,"props":2494,"children":2495},{"class":849},[2496],{"type":24,"value":2497},"rot_mat ",{"type":18,"tag":836,"props":2499,"children":2500},{"class":843},[2501],{"type":24,"value":893},{"type":18,"tag":836,"props":2503,"children":2504},{"class":849},[2505],{"type":24,"value":2506}," ca.vertcat(\n",{"type":18,"tag":836,"props":2508,"children":2509},{"class":838,"line":1166},[2510,2515,2519],{"type":18,"tag":836,"props":2511,"children":2512},{"class":849},[2513],{"type":24,"value":2514},"    ca.horzcat(ca.cos(theta), ca.sin(theta), ",{"type":18,"tag":836,"props":2516,"children":2517},{"class":901},[2518],{"type":24,"value":1138},{"type":18,"tag":836,"props":2520,"children":2521},{"class":849},[2522],{"type":24,"value":2523},"),\n",{"type":18,"tag":836,"props":2525,"children":2526},{"class":838,"line":1199},[2527,2532,2537,2542,2546],{"type":18,"tag":836,"props":2528,"children":2529},{"class":849},[2530],{"type":24,"value":2531},"    ca.horzcat(",{"type":18,"tag":836,"props":2533,"children":2534},{"class":843},[2535],{"type":24,"value":2536},"-",{"type":18,"tag":836,"props":2538,"children":2539},{"class":849},[2540],{"type":24,"value":2541},"ca.sin(theta), ca.cos(theta), ",{"type":18,"tag":836,"props":2543,"children":2544},{"class":901},[2545],{"type":24,"value":1138},{"type":18,"tag":836,"props":2547,"children":2548},{"class":849},[2549],{"type":24,"value":2523},{"type":18,"tag":836,"props":2551,"children":2552},{"class":838,"line":1217},[2553,2557,2561,2566,2570,2574,2578],{"type":18,"tag":836,"props":2554,"children":2555},{"class":849},[2556],{"type":24,"value":2531},{"type":18,"tag":836,"props":2558,"children":2559},{"class":901},[2560],{"type":24,"value":1138},{"type":18,"tag":836,"props":2562,"children":2563},{"class":849},[2564],{"type":24,"value":2565},", ",{"type":18,"tag":836,"props":2567,"children":2568},{"class":901},[2569],{"type":24,"value":1138},{"type":18,"tag":836,"props":2571,"children":2572},{"class":849},[2573],{"type":24,"value":2565},{"type":18,"tag":836,"props":2575,"children":2576},{"class":901},[2577],{"type":24,"value":1209},{"type":18,"tag":836,"props":2579,"children":2580},{"class":849},[2581],{"type":24,"value":2252},{"type":18,"tag":836,"props":2583,"children":2584},{"class":838,"line":1226},[2585],{"type":18,"tag":836,"props":2586,"children":2587},{"class":849},[2588],{"type":24,"value":2252},{"type":18,"tag":836,"props":2590,"children":2591},{"class":838,"line":1234},[2592],{"type":18,"tag":836,"props":2593,"children":2594},{},[2595],{"type":24,"value":870},{"type":18,"tag":836,"props":2597,"children":2598},{"class":838,"line":1267},[2599,2604,2608,2613,2617],{"type":18,"tag":836,"props":2600,"children":2601},{"class":849},[2602],{"type":24,"value":2603},"vx ",{"type":18,"tag":836,"props":2605,"children":2606},{"class":843},[2607],{"type":24,"value":893},{"type":18,"tag":836,"props":2609,"children":2610},{"class":849},[2611],{"type":24,"value":2612}," u1 ",{"type":18,"tag":836,"props":2614,"children":2615},{"class":843},[2616],{"type":24,"value":1148},{"type":18,"tag":836,"props":2618,"children":2619},{"class":849},[2620],{"type":24,"value":2621}," ca.cos(theta)\n",{"type":18,"tag":836,"props":2623,"children":2624},{"class":838,"line":1285},[2625,2630,2634,2638,2642],{"type":18,"tag":836,"props":2626,"children":2627},{"class":849},[2628],{"type":24,"value":2629},"vy ",{"type":18,"tag":836,"props":2631,"children":2632},{"class":843},[2633],{"type":24,"value":893},{"type":18,"tag":836,"props":2635,"children":2636},{"class":849},[2637],{"type":24,"value":2612},{"type":18,"tag":836,"props":2639,"children":2640},{"class":843},[2641],{"type":24,"value":1148},{"type":18,"tag":836,"props":2643,"children":2644},{"class":849},[2645],{"type":24,"value":2646}," ca.sin(theta)\n",{"type":18,"tag":836,"props":2648,"children":2649},{"class":838,"line":1431},[2650,2655,2659],{"type":18,"tag":836,"props":2651,"children":2652},{"class":849},[2653],{"type":24,"value":2654},"vyaw ",{"type":18,"tag":836,"props":2656,"children":2657},{"class":843},[2658],{"type":24,"value":893},{"type":18,"tag":836,"props":2660,"children":2661},{"class":849},[2662],{"type":24,"value":2663}," u2\n",{"type":18,"tag":836,"props":2665,"children":2666},{"class":838,"line":1569},[2667],{"type":18,"tag":836,"props":2668,"children":2669},{},[2670],{"type":24,"value":870},{"type":18,"tag":836,"props":2672,"children":2673},{"class":838,"line":1660},[2674,2679,2683],{"type":18,"tag":836,"props":2675,"children":2676},{"class":849},[2677],{"type":24,"value":2678},"rhs ",{"type":18,"tag":836,"props":2680,"children":2681},{"class":843},[2682],{"type":24,"value":893},{"type":18,"tag":836,"props":2684,"children":2685},{"class":849},[2686],{"type":24,"value":2687}," ca.vertcat(vx, vy, vyaw)\n",{"type":18,"tag":836,"props":2689,"children":2690},{"class":838,"line":1668},[2691],{"type":18,"tag":836,"props":2692,"children":2693},{"class":876},[2694],{"type":24,"value":2695},"## Define mapped nonlinear function f(x,u) -> rhs\n",{"type":18,"tag":836,"props":2697,"children":2698},{"class":838,"line":1682},[2699,2703,2707,2712,2717],{"type":18,"tag":836,"props":2700,"children":2701},{"class":849},[2702],{"type":24,"value":1106},{"type":18,"tag":836,"props":2704,"children":2705},{"class":843},[2706],{"type":24,"value":893},{"type":18,"tag":836,"props":2708,"children":2709},{"class":849},[2710],{"type":24,"value":2711}," ca.Function(",{"type":18,"tag":836,"props":2713,"children":2714},{"class":2244},[2715],{"type":24,"value":2716},"'f'",{"type":18,"tag":836,"props":2718,"children":2719},{"class":849},[2720],{"type":24,"value":2721},", [states, controls], [rhs])",{"type":18,"tag":27,"props":2723,"children":2724},{},[2725],{"type":24,"value":2726},"Declare symbolic matrix",{"type":18,"tag":821,"props":2728,"children":2731},{"className":2729,"code":2730,"language":826,"meta":8},[824],"X = ca.SX.sym('X', num_states, prediction_horizons + 1)\nX_ref = ca.SX.sym('X_ref', num_states, prediction_horizons + 1)\nU = ca.SX.sym('U', num_controls, prediction_horizons)\nU_ref = ca.SX.sym('U_ref', num_controls, prediction_horizons)\n",[2732],{"type":18,"tag":829,"props":2733,"children":2734},{},[2735],{"type":18,"tag":821,"props":2736,"children":2737},{"__ignoreMap":8},[2738,2788,2837,2871],{"type":18,"tag":836,"props":2739,"children":2740},{"class":838,"line":839},[2741,2746,2750,2754,2758,2762,2767,2772,2776,2780,2784],{"type":18,"tag":836,"props":2742,"children":2743},{"class":849},[2744],{"type":24,"value":2745},"X ",{"type":18,"tag":836,"props":2747,"children":2748},{"class":843},[2749],{"type":24,"value":893},{"type":18,"tag":836,"props":2751,"children":2752},{"class":849},[2753],{"type":24,"value":2231},{"type":18,"tag":836,"props":2755,"children":2756},{"class":901},[2757],{"type":24,"value":2236},{"type":18,"tag":836,"props":2759,"children":2760},{"class":849},[2761],{"type":24,"value":2241},{"type":18,"tag":836,"props":2763,"children":2764},{"class":2244},[2765],{"type":24,"value":2766},"'X'",{"type":18,"tag":836,"props":2768,"children":2769},{"class":849},[2770],{"type":24,"value":2771},", num_states, prediction_horizons ",{"type":18,"tag":836,"props":2773,"children":2774},{"class":843},[2775],{"type":24,"value":1305},{"type":18,"tag":836,"props":2777,"children":2778},{"class":849},[2779],{"type":24,"value":898},{"type":18,"tag":836,"props":2781,"children":2782},{"class":901},[2783],{"type":24,"value":1209},{"type":18,"tag":836,"props":2785,"children":2786},{"class":849},[2787],{"type":24,"value":2252},{"type":18,"tag":836,"props":2789,"children":2790},{"class":838,"line":555},[2791,2796,2800,2804,2808,2812,2817,2821,2825,2829,2833],{"type":18,"tag":836,"props":2792,"children":2793},{"class":849},[2794],{"type":24,"value":2795},"X_ref ",{"type":18,"tag":836,"props":2797,"children":2798},{"class":843},[2799],{"type":24,"value":893},{"type":18,"tag":836,"props":2801,"children":2802},{"class":849},[2803],{"type":24,"value":2231},{"type":18,"tag":836,"props":2805,"children":2806},{"class":901},[2807],{"type":24,"value":2236},{"type":18,"tag":836,"props":2809,"children":2810},{"class":849},[2811],{"type":24,"value":2241},{"type":18,"tag":836,"props":2813,"children":2814},{"class":2244},[2815],{"type":24,"value":2816},"'X_ref'",{"type":18,"tag":836,"props":2818,"children":2819},{"class":849},[2820],{"type":24,"value":2771},{"type":18,"tag":836,"props":2822,"children":2823},{"class":843},[2824],{"type":24,"value":1305},{"type":18,"tag":836,"props":2826,"children":2827},{"class":849},[2828],{"type":24,"value":898},{"type":18,"tag":836,"props":2830,"children":2831},{"class":901},[2832],{"type":24,"value":1209},{"type":18,"tag":836,"props":2834,"children":2835},{"class":849},[2836],{"type":24,"value":2252},{"type":18,"tag":836,"props":2838,"children":2839},{"class":838,"line":560},[2840,2845,2849,2853,2857,2861,2866],{"type":18,"tag":836,"props":2841,"children":2842},{"class":849},[2843],{"type":24,"value":2844},"U ",{"type":18,"tag":836,"props":2846,"children":2847},{"class":843},[2848],{"type":24,"value":893},{"type":18,"tag":836,"props":2850,"children":2851},{"class":849},[2852],{"type":24,"value":2231},{"type":18,"tag":836,"props":2854,"children":2855},{"class":901},[2856],{"type":24,"value":2236},{"type":18,"tag":836,"props":2858,"children":2859},{"class":849},[2860],{"type":24,"value":2241},{"type":18,"tag":836,"props":2862,"children":2863},{"class":2244},[2864],{"type":24,"value":2865},"'U'",{"type":18,"tag":836,"props":2867,"children":2868},{"class":849},[2869],{"type":24,"value":2870},", num_controls, prediction_horizons)\n",{"type":18,"tag":836,"props":2872,"children":2873},{"class":838,"line":882},[2874,2879,2883,2887,2891,2895,2900],{"type":18,"tag":836,"props":2875,"children":2876},{"class":849},[2877],{"type":24,"value":2878},"U_ref ",{"type":18,"tag":836,"props":2880,"children":2881},{"class":843},[2882],{"type":24,"value":893},{"type":18,"tag":836,"props":2884,"children":2885},{"class":849},[2886],{"type":24,"value":2231},{"type":18,"tag":836,"props":2888,"children":2889},{"class":901},[2890],{"type":24,"value":2236},{"type":18,"tag":836,"props":2892,"children":2893},{"class":849},[2894],{"type":24,"value":2241},{"type":18,"tag":836,"props":2896,"children":2897},{"class":2244},[2898],{"type":24,"value":2899},"'U_ref'",{"type":18,"tag":836,"props":2901,"children":2902},{"class":849},[2903],{"type":24,"value":2904},", num_controls, prediction_horizons)",{"type":18,"tag":27,"props":2906,"children":2907},{},[2908,2910],{"type":24,"value":2909},"Define nonlinear programming and options for ",{"type":18,"tag":2145,"props":2911,"children":2912},{},[2913],{"type":24,"value":2149},{"type":18,"tag":821,"props":2915,"children":2918},{"className":2916,"code":2917,"language":826,"meta":8},[824],"nlp_prob = {\n    'f': cost_fn,\n    'x': opt_var,\n    'p': opt_dec,\n    'g': g\n}\n\nnlp_opts = {\n    'ipopt.max_iter': 5000,\n    'ipopt.print_level': 0,\n    'ipopt.acceptable_tol': 1e-6,\n    'ipopt.acceptable_obj_change_tol': 1e-4,\n    'print_time': 0\n}\n",[2919],{"type":18,"tag":829,"props":2920,"children":2921},{},[2922],{"type":18,"tag":821,"props":2923,"children":2924},{"__ignoreMap":8},[2925,2942,2958,2975,2992,3009,3017,3024,3040,3066,3090,3115,3140,3161],{"type":18,"tag":836,"props":2926,"children":2927},{"class":838,"line":839},[2928,2933,2937],{"type":18,"tag":836,"props":2929,"children":2930},{"class":849},[2931],{"type":24,"value":2932},"nlp_prob ",{"type":18,"tag":836,"props":2934,"children":2935},{"class":843},[2936],{"type":24,"value":893},{"type":18,"tag":836,"props":2938,"children":2939},{"class":849},[2940],{"type":24,"value":2941}," {\n",{"type":18,"tag":836,"props":2943,"children":2944},{"class":838,"line":555},[2945,2949,2953],{"type":18,"tag":836,"props":2946,"children":2947},{"class":849},[2948],{"type":24,"value":1674},{"type":18,"tag":836,"props":2950,"children":2951},{"class":2244},[2952],{"type":24,"value":2716},{"type":18,"tag":836,"props":2954,"children":2955},{"class":849},[2956],{"type":24,"value":2957},": cost_fn,\n",{"type":18,"tag":836,"props":2959,"children":2960},{"class":838,"line":560},[2961,2965,2970],{"type":18,"tag":836,"props":2962,"children":2963},{"class":849},[2964],{"type":24,"value":1674},{"type":18,"tag":836,"props":2966,"children":2967},{"class":2244},[2968],{"type":24,"value":2969},"'x'",{"type":18,"tag":836,"props":2971,"children":2972},{"class":849},[2973],{"type":24,"value":2974},": opt_var,\n",{"type":18,"tag":836,"props":2976,"children":2977},{"class":838,"line":882},[2978,2982,2987],{"type":18,"tag":836,"props":2979,"children":2980},{"class":849},[2981],{"type":24,"value":1674},{"type":18,"tag":836,"props":2983,"children":2984},{"class":2244},[2985],{"type":24,"value":2986},"'p'",{"type":18,"tag":836,"props":2988,"children":2989},{"class":849},[2990],{"type":24,"value":2991},": opt_dec,\n",{"type":18,"tag":836,"props":2993,"children":2994},{"class":838,"line":907},[2995,2999,3004],{"type":18,"tag":836,"props":2996,"children":2997},{"class":849},[2998],{"type":24,"value":1674},{"type":18,"tag":836,"props":3000,"children":3001},{"class":2244},[3002],{"type":24,"value":3003},"'g'",{"type":18,"tag":836,"props":3005,"children":3006},{"class":849},[3007],{"type":24,"value":3008},": g\n",{"type":18,"tag":836,"props":3010,"children":3011},{"class":838,"line":916},[3012],{"type":18,"tag":836,"props":3013,"children":3014},{"class":849},[3015],{"type":24,"value":3016},"}\n",{"type":18,"tag":836,"props":3018,"children":3019},{"class":838,"line":938},[3020],{"type":18,"tag":836,"props":3021,"children":3022},{},[3023],{"type":24,"value":870},{"type":18,"tag":836,"props":3025,"children":3026},{"class":838,"line":947},[3027,3032,3036],{"type":18,"tag":836,"props":3028,"children":3029},{"class":849},[3030],{"type":24,"value":3031},"nlp_opts ",{"type":18,"tag":836,"props":3033,"children":3034},{"class":843},[3035],{"type":24,"value":893},{"type":18,"tag":836,"props":3037,"children":3038},{"class":849},[3039],{"type":24,"value":2941},{"type":18,"tag":836,"props":3041,"children":3042},{"class":838,"line":969},[3043,3047,3052,3056,3061],{"type":18,"tag":836,"props":3044,"children":3045},{"class":849},[3046],{"type":24,"value":1674},{"type":18,"tag":836,"props":3048,"children":3049},{"class":2244},[3050],{"type":24,"value":3051},"'ipopt.max_iter'",{"type":18,"tag":836,"props":3053,"children":3054},{"class":849},[3055],{"type":24,"value":477},{"type":18,"tag":836,"props":3057,"children":3058},{"class":901},[3059],{"type":24,"value":3060},"5000",{"type":18,"tag":836,"props":3062,"children":3063},{"class":849},[3064],{"type":24,"value":3065},",\n",{"type":18,"tag":836,"props":3067,"children":3068},{"class":838,"line":990},[3069,3073,3078,3082,3086],{"type":18,"tag":836,"props":3070,"children":3071},{"class":849},[3072],{"type":24,"value":1674},{"type":18,"tag":836,"props":3074,"children":3075},{"class":2244},[3076],{"type":24,"value":3077},"'ipopt.print_level'",{"type":18,"tag":836,"props":3079,"children":3080},{"class":849},[3081],{"type":24,"value":477},{"type":18,"tag":836,"props":3083,"children":3084},{"class":901},[3085],{"type":24,"value":1138},{"type":18,"tag":836,"props":3087,"children":3088},{"class":849},[3089],{"type":24,"value":3065},{"type":18,"tag":836,"props":3091,"children":3092},{"class":838,"line":1011},[3093,3097,3102,3106,3111],{"type":18,"tag":836,"props":3094,"children":3095},{"class":849},[3096],{"type":24,"value":1674},{"type":18,"tag":836,"props":3098,"children":3099},{"class":2244},[3100],{"type":24,"value":3101},"'ipopt.acceptable_tol'",{"type":18,"tag":836,"props":3103,"children":3104},{"class":849},[3105],{"type":24,"value":477},{"type":18,"tag":836,"props":3107,"children":3108},{"class":901},[3109],{"type":24,"value":3110},"1e-6",{"type":18,"tag":836,"props":3112,"children":3113},{"class":849},[3114],{"type":24,"value":3065},{"type":18,"tag":836,"props":3116,"children":3117},{"class":838,"line":1020},[3118,3122,3127,3131,3136],{"type":18,"tag":836,"props":3119,"children":3120},{"class":849},[3121],{"type":24,"value":1674},{"type":18,"tag":836,"props":3123,"children":3124},{"class":2244},[3125],{"type":24,"value":3126},"'ipopt.acceptable_obj_change_tol'",{"type":18,"tag":836,"props":3128,"children":3129},{"class":849},[3130],{"type":24,"value":477},{"type":18,"tag":836,"props":3132,"children":3133},{"class":901},[3134],{"type":24,"value":3135},"1e-4",{"type":18,"tag":836,"props":3137,"children":3138},{"class":849},[3139],{"type":24,"value":3065},{"type":18,"tag":836,"props":3141,"children":3142},{"class":838,"line":1051},[3143,3147,3152,3156],{"type":18,"tag":836,"props":3144,"children":3145},{"class":849},[3146],{"type":24,"value":1674},{"type":18,"tag":836,"props":3148,"children":3149},{"class":2244},[3150],{"type":24,"value":3151},"'print_time'",{"type":18,"tag":836,"props":3153,"children":3154},{"class":849},[3155],{"type":24,"value":477},{"type":18,"tag":836,"props":3157,"children":3158},{"class":901},[3159],{"type":24,"value":3160},"0\n",{"type":18,"tag":836,"props":3162,"children":3163},{"class":838,"line":1082},[3164],{"type":18,"tag":836,"props":3165,"children":3166},{"class":849},[3167],{"type":24,"value":3168},"}",{"type":18,"tag":27,"props":3170,"children":3171},{},[3172],{"type":24,"value":3173},"Determine boundary and constraint for our optimizer",{"type":18,"tag":821,"props":3175,"children":3178},{"className":3176,"code":3177,"language":826,"meta":8},[824],"lbx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\nubx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\n\nlbx[0: num_states * (prediction_horizons + 1): num_states] = x_min\nlbx[1: num_states * (prediction_horizons + 1): num_states] = y_min\nlbx[2: num_states * (prediction_horizons + 1): num_states] = theta_min\n\nubx[0: num_states * (prediction_horizons + 1): num_states] = x_max\nubx[1: num_states * (prediction_horizons + 1): num_states] = y_max\nubx[2: num_states * (prediction_horizons + 1): num_states] = theta_max\n\nlbx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\nlbx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\n\nubx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\nubx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\n\nargs = {\n    'lbg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'ubg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'lbx': lbx,\n    'ubx': ubx\n}\n",[3179],{"type":18,"tag":829,"props":3180,"children":3181},{},[3182],{"type":18,"tag":821,"props":3183,"children":3184},{"__ignoreMap":8},[3185,3263,3335,3342,3393,3441,3489,3496,3545,3593,3641,3648,3731,3826,3833,3914,4009,4016,4032,4091,4147,4164,4181],{"type":18,"tag":836,"props":3186,"children":3187},{"class":838,"line":839},[3188,3193,3197,3201,3206,3211,3215,3220,3224,3228,3232,3236,3240,3245,3249,3254,3258],{"type":18,"tag":836,"props":3189,"children":3190},{"class":849},[3191],{"type":24,"value":3192},"lbx ",{"type":18,"tag":836,"props":3194,"children":3195},{"class":843},[3196],{"type":24,"value":893},{"type":18,"tag":836,"props":3198,"children":3199},{"class":849},[3200],{"type":24,"value":2231},{"type":18,"tag":836,"props":3202,"children":3203},{"class":901},[3204],{"type":24,"value":3205},"DM",{"type":18,"tag":836,"props":3207,"children":3208},{"class":849},[3209],{"type":24,"value":3210},".zeros((num_states ",{"type":18,"tag":836,"props":3212,"children":3213},{"class":843},[3214],{"type":24,"value":1148},{"type":18,"tag":836,"props":3216,"children":3217},{"class":849},[3218],{"type":24,"value":3219}," (prediction_horizons ",{"type":18,"tag":836,"props":3221,"children":3222},{"class":843},[3223],{"type":24,"value":1305},{"type":18,"tag":836,"props":3225,"children":3226},{"class":849},[3227],{"type":24,"value":898},{"type":18,"tag":836,"props":3229,"children":3230},{"class":901},[3231],{"type":24,"value":1209},{"type":18,"tag":836,"props":3233,"children":3234},{"class":849},[3235],{"type":24,"value":1328},{"type":18,"tag":836,"props":3237,"children":3238},{"class":843},[3239],{"type":24,"value":1305},{"type":18,"tag":836,"props":3241,"children":3242},{"class":849},[3243],{"type":24,"value":3244}," num_controls ",{"type":18,"tag":836,"props":3246,"children":3247},{"class":843},[3248],{"type":24,"value":1148},{"type":18,"tag":836,"props":3250,"children":3251},{"class":849},[3252],{"type":24,"value":3253}," prediction_horizons, ",{"type":18,"tag":836,"props":3255,"children":3256},{"class":901},[3257],{"type":24,"value":1209},{"type":18,"tag":836,"props":3259,"children":3260},{"class":849},[3261],{"type":24,"value":3262},"))\n",{"type":18,"tag":836,"props":3264,"children":3265},{"class":838,"line":555},[3266,3271,3275,3279,3283,3287,3291,3295,3299,3303,3307,3311,3315,3319,3323,3327,3331],{"type":18,"tag":836,"props":3267,"children":3268},{"class":849},[3269],{"type":24,"value":3270},"ubx ",{"type":18,"tag":836,"props":3272,"children":3273},{"class":843},[3274],{"type":24,"value":893},{"type":18,"tag":836,"props":3276,"children":3277},{"class":849},[3278],{"type":24,"value":2231},{"type":18,"tag":836,"props":3280,"children":3281},{"class":901},[3282],{"type":24,"value":3205},{"type":18,"tag":836,"props":3284,"children":3285},{"class":849},[3286],{"type":24,"value":3210},{"type":18,"tag":836,"props":3288,"children":3289},{"class":843},[3290],{"type":24,"value":1148},{"type":18,"tag":836,"props":3292,"children":3293},{"class":849},[3294],{"type":24,"value":3219},{"type":18,"tag":836,"props":3296,"children":3297},{"class":843},[3298],{"type":24,"value":1305},{"type":18,"tag":836,"props":3300,"children":3301},{"class":849},[3302],{"type":24,"value":898},{"type":18,"tag":836,"props":3304,"children":3305},{"class":901},[3306],{"type":24,"value":1209},{"type":18,"tag":836,"props":3308,"children":3309},{"class":849},[3310],{"type":24,"value":1328},{"type":18,"tag":836,"props":3312,"children":3313},{"class":843},[3314],{"type":24,"value":1305},{"type":18,"tag":836,"props":3316,"children":3317},{"class":849},[3318],{"type":24,"value":3244},{"type":18,"tag":836,"props":3320,"children":3321},{"class":843},[3322],{"type":24,"value":1148},{"type":18,"tag":836,"props":3324,"children":3325},{"class":849},[3326],{"type":24,"value":3253},{"type":18,"tag":836,"props":3328,"children":3329},{"class":901},[3330],{"type":24,"value":1209},{"type":18,"tag":836,"props":3332,"children":3333},{"class":849},[3334],{"type":24,"value":3262},{"type":18,"tag":836,"props":3336,"children":3337},{"class":838,"line":560},[3338],{"type":18,"tag":836,"props":3339,"children":3340},{},[3341],{"type":24,"value":870},{"type":18,"tag":836,"props":3343,"children":3344},{"class":838,"line":882},[3345,3350,3354,3359,3363,3367,3371,3375,3379,3384,3388],{"type":18,"tag":836,"props":3346,"children":3347},{"class":849},[3348],{"type":24,"value":3349},"lbx[",{"type":18,"tag":836,"props":3351,"children":3352},{"class":901},[3353],{"type":24,"value":1138},{"type":18,"tag":836,"props":3355,"children":3356},{"class":849},[3357],{"type":24,"value":3358},": num_states ",{"type":18,"tag":836,"props":3360,"children":3361},{"class":843},[3362],{"type":24,"value":1148},{"type":18,"tag":836,"props":3364,"children":3365},{"class":849},[3366],{"type":24,"value":3219},{"type":18,"tag":836,"props":3368,"children":3369},{"class":843},[3370],{"type":24,"value":1305},{"type":18,"tag":836,"props":3372,"children":3373},{"class":849},[3374],{"type":24,"value":898},{"type":18,"tag":836,"props":3376,"children":3377},{"class":901},[3378],{"type":24,"value":1209},{"type":18,"tag":836,"props":3380,"children":3381},{"class":849},[3382],{"type":24,"value":3383},"): num_states] ",{"type":18,"tag":836,"props":3385,"children":3386},{"class":843},[3387],{"type":24,"value":893},{"type":18,"tag":836,"props":3389,"children":3390},{"class":849},[3391],{"type":24,"value":3392}," x_min\n",{"type":18,"tag":836,"props":3394,"children":3395},{"class":838,"line":907},[3396,3400,3404,3408,3412,3416,3420,3424,3428,3432,3436],{"type":18,"tag":836,"props":3397,"children":3398},{"class":849},[3399],{"type":24,"value":3349},{"type":18,"tag":836,"props":3401,"children":3402},{"class":901},[3403],{"type":24,"value":1209},{"type":18,"tag":836,"props":3405,"children":3406},{"class":849},[3407],{"type":24,"value":3358},{"type":18,"tag":836,"props":3409,"children":3410},{"class":843},[3411],{"type":24,"value":1148},{"type":18,"tag":836,"props":3413,"children":3414},{"class":849},[3415],{"type":24,"value":3219},{"type":18,"tag":836,"props":3417,"children":3418},{"class":843},[3419],{"type":24,"value":1305},{"type":18,"tag":836,"props":3421,"children":3422},{"class":849},[3423],{"type":24,"value":898},{"type":18,"tag":836,"props":3425,"children":3426},{"class":901},[3427],{"type":24,"value":1209},{"type":18,"tag":836,"props":3429,"children":3430},{"class":849},[3431],{"type":24,"value":3383},{"type":18,"tag":836,"props":3433,"children":3434},{"class":843},[3435],{"type":24,"value":893},{"type":18,"tag":836,"props":3437,"children":3438},{"class":849},[3439],{"type":24,"value":3440}," y_min\n",{"type":18,"tag":836,"props":3442,"children":3443},{"class":838,"line":916},[3444,3448,3452,3456,3460,3464,3468,3472,3476,3480,3484],{"type":18,"tag":836,"props":3445,"children":3446},{"class":849},[3447],{"type":24,"value":3349},{"type":18,"tag":836,"props":3449,"children":3450},{"class":901},[3451],{"type":24,"value":1158},{"type":18,"tag":836,"props":3453,"children":3454},{"class":849},[3455],{"type":24,"value":3358},{"type":18,"tag":836,"props":3457,"children":3458},{"class":843},[3459],{"type":24,"value":1148},{"type":18,"tag":836,"props":3461,"children":3462},{"class":849},[3463],{"type":24,"value":3219},{"type":18,"tag":836,"props":3465,"children":3466},{"class":843},[3467],{"type":24,"value":1305},{"type":18,"tag":836,"props":3469,"children":3470},{"class":849},[3471],{"type":24,"value":898},{"type":18,"tag":836,"props":3473,"children":3474},{"class":901},[3475],{"type":24,"value":1209},{"type":18,"tag":836,"props":3477,"children":3478},{"class":849},[3479],{"type":24,"value":3383},{"type":18,"tag":836,"props":3481,"children":3482},{"class":843},[3483],{"type":24,"value":893},{"type":18,"tag":836,"props":3485,"children":3486},{"class":849},[3487],{"type":24,"value":3488}," theta_min\n",{"type":18,"tag":836,"props":3490,"children":3491},{"class":838,"line":938},[3492],{"type":18,"tag":836,"props":3493,"children":3494},{},[3495],{"type":24,"value":870},{"type":18,"tag":836,"props":3497,"children":3498},{"class":838,"line":947},[3499,3504,3508,3512,3516,3520,3524,3528,3532,3536,3540],{"type":18,"tag":836,"props":3500,"children":3501},{"class":849},[3502],{"type":24,"value":3503},"ubx[",{"type":18,"tag":836,"props":3505,"children":3506},{"class":901},[3507],{"type":24,"value":1138},{"type":18,"tag":836,"props":3509,"children":3510},{"class":849},[3511],{"type":24,"value":3358},{"type":18,"tag":836,"props":3513,"children":3514},{"class":843},[3515],{"type":24,"value":1148},{"type":18,"tag":836,"props":3517,"children":3518},{"class":849},[3519],{"type":24,"value":3219},{"type":18,"tag":836,"props":3521,"children":3522},{"class":843},[3523],{"type":24,"value":1305},{"type":18,"tag":836,"props":3525,"children":3526},{"class":849},[3527],{"type":24,"value":898},{"type":18,"tag":836,"props":3529,"children":3530},{"class":901},[3531],{"type":24,"value":1209},{"type":18,"tag":836,"props":3533,"children":3534},{"class":849},[3535],{"type":24,"value":3383},{"type":18,"tag":836,"props":3537,"children":3538},{"class":843},[3539],{"type":24,"value":893},{"type":18,"tag":836,"props":3541,"children":3542},{"class":849},[3543],{"type":24,"value":3544}," x_max\n",{"type":18,"tag":836,"props":3546,"children":3547},{"class":838,"line":969},[3548,3552,3556,3560,3564,3568,3572,3576,3580,3584,3588],{"type":18,"tag":836,"props":3549,"children":3550},{"class":849},[3551],{"type":24,"value":3503},{"type":18,"tag":836,"props":3553,"children":3554},{"class":901},[3555],{"type":24,"value":1209},{"type":18,"tag":836,"props":3557,"children":3558},{"class":849},[3559],{"type":24,"value":3358},{"type":18,"tag":836,"props":3561,"children":3562},{"class":843},[3563],{"type":24,"value":1148},{"type":18,"tag":836,"props":3565,"children":3566},{"class":849},[3567],{"type":24,"value":3219},{"type":18,"tag":836,"props":3569,"children":3570},{"class":843},[3571],{"type":24,"value":1305},{"type":18,"tag":836,"props":3573,"children":3574},{"class":849},[3575],{"type":24,"value":898},{"type":18,"tag":836,"props":3577,"children":3578},{"class":901},[3579],{"type":24,"value":1209},{"type":18,"tag":836,"props":3581,"children":3582},{"class":849},[3583],{"type":24,"value":3383},{"type":18,"tag":836,"props":3585,"children":3586},{"class":843},[3587],{"type":24,"value":893},{"type":18,"tag":836,"props":3589,"children":3590},{"class":849},[3591],{"type":24,"value":3592}," y_max\n",{"type":18,"tag":836,"props":3594,"children":3595},{"class":838,"line":990},[3596,3600,3604,3608,3612,3616,3620,3624,3628,3632,3636],{"type":18,"tag":836,"props":3597,"children":3598},{"class":849},[3599],{"type":24,"value":3503},{"type":18,"tag":836,"props":3601,"children":3602},{"class":901},[3603],{"type":24,"value":1158},{"type":18,"tag":836,"props":3605,"children":3606},{"class":849},[3607],{"type":24,"value":3358},{"type":18,"tag":836,"props":3609,"children":3610},{"class":843},[3611],{"type":24,"value":1148},{"type":18,"tag":836,"props":3613,"children":3614},{"class":849},[3615],{"type":24,"value":3219},{"type":18,"tag":836,"props":3617,"children":3618},{"class":843},[3619],{"type":24,"value":1305},{"type":18,"tag":836,"props":3621,"children":3622},{"class":849},[3623],{"type":24,"value":898},{"type":18,"tag":836,"props":3625,"children":3626},{"class":901},[3627],{"type":24,"value":1209},{"type":18,"tag":836,"props":3629,"children":3630},{"class":849},[3631],{"type":24,"value":3383},{"type":18,"tag":836,"props":3633,"children":3634},{"class":843},[3635],{"type":24,"value":893},{"type":18,"tag":836,"props":3637,"children":3638},{"class":849},[3639],{"type":24,"value":3640}," theta_max\n",{"type":18,"tag":836,"props":3642,"children":3643},{"class":838,"line":1011},[3644],{"type":18,"tag":836,"props":3645,"children":3646},{},[3647],{"type":24,"value":870},{"type":18,"tag":836,"props":3649,"children":3650},{"class":838,"line":1020},[3651,3656,3660,3664,3668,3672,3676,3681,3685,3689,3693,3697,3701,3705,3709,3713,3717,3722,3726],{"type":18,"tag":836,"props":3652,"children":3653},{"class":849},[3654],{"type":24,"value":3655},"lbx[num_states ",{"type":18,"tag":836,"props":3657,"children":3658},{"class":843},[3659],{"type":24,"value":1148},{"type":18,"tag":836,"props":3661,"children":3662},{"class":849},[3663],{"type":24,"value":3219},{"type":18,"tag":836,"props":3665,"children":3666},{"class":843},[3667],{"type":24,"value":1305},{"type":18,"tag":836,"props":3669,"children":3670},{"class":849},[3671],{"type":24,"value":898},{"type":18,"tag":836,"props":3673,"children":3674},{"class":901},[3675],{"type":24,"value":1209},{"type":18,"tag":836,"props":3677,"children":3678},{"class":849},[3679],{"type":24,"value":3680},"): num_states ",{"type":18,"tag":836,"props":3682,"children":3683},{"class":843},[3684],{"type":24,"value":1148},{"type":18,"tag":836,"props":3686,"children":3687},{"class":849},[3688],{"type":24,"value":3219},{"type":18,"tag":836,"props":3690,"children":3691},{"class":843},[3692],{"type":24,"value":1305},{"type":18,"tag":836,"props":3694,"children":3695},{"class":849},[3696],{"type":24,"value":898},{"type":18,"tag":836,"props":3698,"children":3699},{"class":901},[3700],{"type":24,"value":1209},{"type":18,"tag":836,"props":3702,"children":3703},{"class":849},[3704],{"type":24,"value":1328},{"type":18,"tag":836,"props":3706,"children":3707},{"class":843},[3708],{"type":24,"value":1305},{"type":18,"tag":836,"props":3710,"children":3711},{"class":849},[3712],{"type":24,"value":3244},{"type":18,"tag":836,"props":3714,"children":3715},{"class":843},[3716],{"type":24,"value":1148},{"type":18,"tag":836,"props":3718,"children":3719},{"class":849},[3720],{"type":24,"value":3721}," prediction_horizons: num_controls] ",{"type":18,"tag":836,"props":3723,"children":3724},{"class":843},[3725],{"type":24,"value":893},{"type":18,"tag":836,"props":3727,"children":3728},{"class":849},[3729],{"type":24,"value":3730}," u_min\n",{"type":18,"tag":836,"props":3732,"children":3733},{"class":838,"line":1051},[3734,3738,3742,3746,3750,3754,3758,3762,3766,3770,3774,3778,3782,3786,3790,3794,3798,3802,3806,3810,3814,3818,3822],{"type":18,"tag":836,"props":3735,"children":3736},{"class":849},[3737],{"type":24,"value":3655},{"type":18,"tag":836,"props":3739,"children":3740},{"class":843},[3741],{"type":24,"value":1148},{"type":18,"tag":836,"props":3743,"children":3744},{"class":849},[3745],{"type":24,"value":3219},{"type":18,"tag":836,"props":3747,"children":3748},{"class":843},[3749],{"type":24,"value":1305},{"type":18,"tag":836,"props":3751,"children":3752},{"class":849},[3753],{"type":24,"value":898},{"type":18,"tag":836,"props":3755,"children":3756},{"class":901},[3757],{"type":24,"value":1209},{"type":18,"tag":836,"props":3759,"children":3760},{"class":849},[3761],{"type":24,"value":1328},{"type":18,"tag":836,"props":3763,"children":3764},{"class":843},[3765],{"type":24,"value":1305},{"type":18,"tag":836,"props":3767,"children":3768},{"class":849},[3769],{"type":24,"value":898},{"type":18,"tag":836,"props":3771,"children":3772},{"class":901},[3773],{"type":24,"value":1209},{"type":18,"tag":836,"props":3775,"children":3776},{"class":849},[3777],{"type":24,"value":3358},{"type":18,"tag":836,"props":3779,"children":3780},{"class":843},[3781],{"type":24,"value":1148},{"type":18,"tag":836,"props":3783,"children":3784},{"class":849},[3785],{"type":24,"value":3219},{"type":18,"tag":836,"props":3787,"children":3788},{"class":843},[3789],{"type":24,"value":1305},{"type":18,"tag":836,"props":3791,"children":3792},{"class":849},[3793],{"type":24,"value":898},{"type":18,"tag":836,"props":3795,"children":3796},{"class":901},[3797],{"type":24,"value":1209},{"type":18,"tag":836,"props":3799,"children":3800},{"class":849},[3801],{"type":24,"value":1328},{"type":18,"tag":836,"props":3803,"children":3804},{"class":843},[3805],{"type":24,"value":1305},{"type":18,"tag":836,"props":3807,"children":3808},{"class":849},[3809],{"type":24,"value":3244},{"type":18,"tag":836,"props":3811,"children":3812},{"class":843},[3813],{"type":24,"value":1148},{"type":18,"tag":836,"props":3815,"children":3816},{"class":849},[3817],{"type":24,"value":3721},{"type":18,"tag":836,"props":3819,"children":3820},{"class":843},[3821],{"type":24,"value":893},{"type":18,"tag":836,"props":3823,"children":3824},{"class":849},[3825],{"type":24,"value":3730},{"type":18,"tag":836,"props":3827,"children":3828},{"class":838,"line":1082},[3829],{"type":18,"tag":836,"props":3830,"children":3831},{},[3832],{"type":24,"value":870},{"type":18,"tag":836,"props":3834,"children":3835},{"class":838,"line":1091},[3836,3841,3845,3849,3853,3857,3861,3865,3869,3873,3877,3881,3885,3889,3893,3897,3901,3905,3909],{"type":18,"tag":836,"props":3837,"children":3838},{"class":849},[3839],{"type":24,"value":3840},"ubx[num_states ",{"type":18,"tag":836,"props":3842,"children":3843},{"class":843},[3844],{"type":24,"value":1148},{"type":18,"tag":836,"props":3846,"children":3847},{"class":849},[3848],{"type":24,"value":3219},{"type":18,"tag":836,"props":3850,"children":3851},{"class":843},[3852],{"type":24,"value":1305},{"type":18,"tag":836,"props":3854,"children":3855},{"class":849},[3856],{"type":24,"value":898},{"type":18,"tag":836,"props":3858,"children":3859},{"class":901},[3860],{"type":24,"value":1209},{"type":18,"tag":836,"props":3862,"children":3863},{"class":849},[3864],{"type":24,"value":3680},{"type":18,"tag":836,"props":3866,"children":3867},{"class":843},[3868],{"type":24,"value":1148},{"type":18,"tag":836,"props":3870,"children":3871},{"class":849},[3872],{"type":24,"value":3219},{"type":18,"tag":836,"props":3874,"children":3875},{"class":843},[3876],{"type":24,"value":1305},{"type":18,"tag":836,"props":3878,"children":3879},{"class":849},[3880],{"type":24,"value":898},{"type":18,"tag":836,"props":3882,"children":3883},{"class":901},[3884],{"type":24,"value":1209},{"type":18,"tag":836,"props":3886,"children":3887},{"class":849},[3888],{"type":24,"value":1328},{"type":18,"tag":836,"props":3890,"children":3891},{"class":843},[3892],{"type":24,"value":1305},{"type":18,"tag":836,"props":3894,"children":3895},{"class":849},[3896],{"type":24,"value":3244},{"type":18,"tag":836,"props":3898,"children":3899},{"class":843},[3900],{"type":24,"value":1148},{"type":18,"tag":836,"props":3902,"children":3903},{"class":849},[3904],{"type":24,"value":3721},{"type":18,"tag":836,"props":3906,"children":3907},{"class":843},[3908],{"type":24,"value":893},{"type":18,"tag":836,"props":3910,"children":3911},{"class":849},[3912],{"type":24,"value":3913}," u_max\n",{"type":18,"tag":836,"props":3915,"children":3916},{"class":838,"line":1100},[3917,3921,3925,3929,3933,3937,3941,3945,3949,3953,3957,3961,3965,3969,3973,3977,3981,3985,3989,3993,3997,4001,4005],{"type":18,"tag":836,"props":3918,"children":3919},{"class":849},[3920],{"type":24,"value":3840},{"type":18,"tag":836,"props":3922,"children":3923},{"class":843},[3924],{"type":24,"value":1148},{"type":18,"tag":836,"props":3926,"children":3927},{"class":849},[3928],{"type":24,"value":3219},{"type":18,"tag":836,"props":3930,"children":3931},{"class":843},[3932],{"type":24,"value":1305},{"type":18,"tag":836,"props":3934,"children":3935},{"class":849},[3936],{"type":24,"value":898},{"type":18,"tag":836,"props":3938,"children":3939},{"class":901},[3940],{"type":24,"value":1209},{"type":18,"tag":836,"props":3942,"children":3943},{"class":849},[3944],{"type":24,"value":1328},{"type":18,"tag":836,"props":3946,"children":3947},{"class":843},[3948],{"type":24,"value":1305},{"type":18,"tag":836,"props":3950,"children":3951},{"class":849},[3952],{"type":24,"value":898},{"type":18,"tag":836,"props":3954,"children":3955},{"class":901},[3956],{"type":24,"value":1209},{"type":18,"tag":836,"props":3958,"children":3959},{"class":849},[3960],{"type":24,"value":3358},{"type":18,"tag":836,"props":3962,"children":3963},{"class":843},[3964],{"type":24,"value":1148},{"type":18,"tag":836,"props":3966,"children":3967},{"class":849},[3968],{"type":24,"value":3219},{"type":18,"tag":836,"props":3970,"children":3971},{"class":843},[3972],{"type":24,"value":1305},{"type":18,"tag":836,"props":3974,"children":3975},{"class":849},[3976],{"type":24,"value":898},{"type":18,"tag":836,"props":3978,"children":3979},{"class":901},[3980],{"type":24,"value":1209},{"type":18,"tag":836,"props":3982,"children":3983},{"class":849},[3984],{"type":24,"value":1328},{"type":18,"tag":836,"props":3986,"children":3987},{"class":843},[3988],{"type":24,"value":1305},{"type":18,"tag":836,"props":3990,"children":3991},{"class":849},[3992],{"type":24,"value":3244},{"type":18,"tag":836,"props":3994,"children":3995},{"class":843},[3996],{"type":24,"value":1148},{"type":18,"tag":836,"props":3998,"children":3999},{"class":849},[4000],{"type":24,"value":3721},{"type":18,"tag":836,"props":4002,"children":4003},{"class":843},[4004],{"type":24,"value":893},{"type":18,"tag":836,"props":4006,"children":4007},{"class":849},[4008],{"type":24,"value":3913},{"type":18,"tag":836,"props":4010,"children":4011},{"class":838,"line":1127},[4012],{"type":18,"tag":836,"props":4013,"children":4014},{},[4015],{"type":24,"value":870},{"type":18,"tag":836,"props":4017,"children":4018},{"class":838,"line":1166},[4019,4024,4028],{"type":18,"tag":836,"props":4020,"children":4021},{"class":849},[4022],{"type":24,"value":4023},"args ",{"type":18,"tag":836,"props":4025,"children":4026},{"class":843},[4027],{"type":24,"value":893},{"type":18,"tag":836,"props":4029,"children":4030},{"class":849},[4031],{"type":24,"value":2941},{"type":18,"tag":836,"props":4033,"children":4034},{"class":838,"line":1199},[4035,4039,4044,4049,4053,4057,4061,4065,4069,4073,4077,4082,4086],{"type":18,"tag":836,"props":4036,"children":4037},{"class":849},[4038],{"type":24,"value":1674},{"type":18,"tag":836,"props":4040,"children":4041},{"class":2244},[4042],{"type":24,"value":4043},"'lbg'",{"type":18,"tag":836,"props":4045,"children":4046},{"class":849},[4047],{"type":24,"value":4048},": ca.",{"type":18,"tag":836,"props":4050,"children":4051},{"class":901},[4052],{"type":24,"value":3205},{"type":18,"tag":836,"props":4054,"children":4055},{"class":849},[4056],{"type":24,"value":3210},{"type":18,"tag":836,"props":4058,"children":4059},{"class":843},[4060],{"type":24,"value":1148},{"type":18,"tag":836,"props":4062,"children":4063},{"class":849},[4064],{"type":24,"value":3219},{"type":18,"tag":836,"props":4066,"children":4067},{"class":843},[4068],{"type":24,"value":1305},{"type":18,"tag":836,"props":4070,"children":4071},{"class":849},[4072],{"type":24,"value":898},{"type":18,"tag":836,"props":4074,"children":4075},{"class":901},[4076],{"type":24,"value":1209},{"type":18,"tag":836,"props":4078,"children":4079},{"class":849},[4080],{"type":24,"value":4081},"), ",{"type":18,"tag":836,"props":4083,"children":4084},{"class":901},[4085],{"type":24,"value":1209},{"type":18,"tag":836,"props":4087,"children":4088},{"class":849},[4089],{"type":24,"value":4090},")),\n",{"type":18,"tag":836,"props":4092,"children":4093},{"class":838,"line":1217},[4094,4098,4103,4107,4111,4115,4119,4123,4127,4131,4135,4139,4143],{"type":18,"tag":836,"props":4095,"children":4096},{"class":849},[4097],{"type":24,"value":1674},{"type":18,"tag":836,"props":4099,"children":4100},{"class":2244},[4101],{"type":24,"value":4102},"'ubg'",{"type":18,"tag":836,"props":4104,"children":4105},{"class":849},[4106],{"type":24,"value":4048},{"type":18,"tag":836,"props":4108,"children":4109},{"class":901},[4110],{"type":24,"value":3205},{"type":18,"tag":836,"props":4112,"children":4113},{"class":849},[4114],{"type":24,"value":3210},{"type":18,"tag":836,"props":4116,"children":4117},{"class":843},[4118],{"type":24,"value":1148},{"type":18,"tag":836,"props":4120,"children":4121},{"class":849},[4122],{"type":24,"value":3219},{"type":18,"tag":836,"props":4124,"children":4125},{"class":843},[4126],{"type":24,"value":1305},{"type":18,"tag":836,"props":4128,"children":4129},{"class":849},[4130],{"type":24,"value":898},{"type":18,"tag":836,"props":4132,"children":4133},{"class":901},[4134],{"type":24,"value":1209},{"type":18,"tag":836,"props":4136,"children":4137},{"class":849},[4138],{"type":24,"value":4081},{"type":18,"tag":836,"props":4140,"children":4141},{"class":901},[4142],{"type":24,"value":1209},{"type":18,"tag":836,"props":4144,"children":4145},{"class":849},[4146],{"type":24,"value":4090},{"type":18,"tag":836,"props":4148,"children":4149},{"class":838,"line":1226},[4150,4154,4159],{"type":18,"tag":836,"props":4151,"children":4152},{"class":849},[4153],{"type":24,"value":1674},{"type":18,"tag":836,"props":4155,"children":4156},{"class":2244},[4157],{"type":24,"value":4158},"'lbx'",{"type":18,"tag":836,"props":4160,"children":4161},{"class":849},[4162],{"type":24,"value":4163},": lbx,\n",{"type":18,"tag":836,"props":4165,"children":4166},{"class":838,"line":1234},[4167,4171,4176],{"type":18,"tag":836,"props":4168,"children":4169},{"class":849},[4170],{"type":24,"value":1674},{"type":18,"tag":836,"props":4172,"children":4173},{"class":2244},[4174],{"type":24,"value":4175},"'ubx'",{"type":18,"tag":836,"props":4177,"children":4178},{"class":849},[4179],{"type":24,"value":4180},": ubx\n",{"type":18,"tag":836,"props":4182,"children":4183},{"class":838,"line":1267},[4184],{"type":18,"tag":836,"props":4185,"children":4186},{"class":849},[4187],{"type":24,"value":3168},{"type":18,"tag":27,"props":4189,"children":4190},{},[4191],{"type":24,"value":4192},"Obtain the solution from the solver at each iteration",{"type":18,"tag":821,"props":4194,"children":4197},{"className":4195,"code":4196,"language":826,"meta":8},[824],"sol = solver(\n            x0=args['x0'],\n            p=args['p'],\n            lbx=args['lbx'],\n            ubx=args['ubx'],\n            lbg=args['lbg'],\n            ubg=args['ubg'],\n        )\n\n        sol_x = ca.reshape(sol['x'][:num_states * (prediction_horizons + 1)], 3, prediction_horizons + 1)\n        sol_u = ca.reshape(sol['x'][num_states * (prediction_horizons + 1):], 2, prediction_horizons)\n",[4198],{"type":18,"tag":829,"props":4199,"children":4200},{},[4201],{"type":18,"tag":821,"props":4202,"children":4203},{"__ignoreMap":8},[4204,4221,4254,4281,4309,4337,4365,4393,4401,4408,4485],{"type":18,"tag":836,"props":4205,"children":4206},{"class":838,"line":839},[4207,4212,4216],{"type":18,"tag":836,"props":4208,"children":4209},{"class":849},[4210],{"type":24,"value":4211},"sol ",{"type":18,"tag":836,"props":4213,"children":4214},{"class":843},[4215],{"type":24,"value":893},{"type":18,"tag":836,"props":4217,"children":4218},{"class":849},[4219],{"type":24,"value":4220}," solver(\n",{"type":18,"tag":836,"props":4222,"children":4223},{"class":838,"line":555},[4224,4229,4235,4239,4244,4249],{"type":18,"tag":836,"props":4225,"children":4226},{"class":849},[4227],{"type":24,"value":4228},"            ",{"type":18,"tag":836,"props":4230,"children":4232},{"class":4231},"ct-657843",[4233],{"type":24,"value":4234},"x0",{"type":18,"tag":836,"props":4236,"children":4237},{"class":843},[4238],{"type":24,"value":893},{"type":18,"tag":836,"props":4240,"children":4241},{"class":849},[4242],{"type":24,"value":4243},"args[",{"type":18,"tag":836,"props":4245,"children":4246},{"class":2244},[4247],{"type":24,"value":4248},"'x0'",{"type":18,"tag":836,"props":4250,"children":4251},{"class":849},[4252],{"type":24,"value":4253},"],\n",{"type":18,"tag":836,"props":4255,"children":4256},{"class":838,"line":560},[4257,4261,4265,4269,4273,4277],{"type":18,"tag":836,"props":4258,"children":4259},{"class":849},[4260],{"type":24,"value":4228},{"type":18,"tag":836,"props":4262,"children":4263},{"class":4231},[4264],{"type":24,"value":27},{"type":18,"tag":836,"props":4266,"children":4267},{"class":843},[4268],{"type":24,"value":893},{"type":18,"tag":836,"props":4270,"children":4271},{"class":849},[4272],{"type":24,"value":4243},{"type":18,"tag":836,"props":4274,"children":4275},{"class":2244},[4276],{"type":24,"value":2986},{"type":18,"tag":836,"props":4278,"children":4279},{"class":849},[4280],{"type":24,"value":4253},{"type":18,"tag":836,"props":4282,"children":4283},{"class":838,"line":882},[4284,4288,4293,4297,4301,4305],{"type":18,"tag":836,"props":4285,"children":4286},{"class":849},[4287],{"type":24,"value":4228},{"type":18,"tag":836,"props":4289,"children":4290},{"class":4231},[4291],{"type":24,"value":4292},"lbx",{"type":18,"tag":836,"props":4294,"children":4295},{"class":843},[4296],{"type":24,"value":893},{"type":18,"tag":836,"props":4298,"children":4299},{"class":849},[4300],{"type":24,"value":4243},{"type":18,"tag":836,"props":4302,"children":4303},{"class":2244},[4304],{"type":24,"value":4158},{"type":18,"tag":836,"props":4306,"children":4307},{"class":849},[4308],{"type":24,"value":4253},{"type":18,"tag":836,"props":4310,"children":4311},{"class":838,"line":907},[4312,4316,4321,4325,4329,4333],{"type":18,"tag":836,"props":4313,"children":4314},{"class":849},[4315],{"type":24,"value":4228},{"type":18,"tag":836,"props":4317,"children":4318},{"class":4231},[4319],{"type":24,"value":4320},"ubx",{"type":18,"tag":836,"props":4322,"children":4323},{"class":843},[4324],{"type":24,"value":893},{"type":18,"tag":836,"props":4326,"children":4327},{"class":849},[4328],{"type":24,"value":4243},{"type":18,"tag":836,"props":4330,"children":4331},{"class":2244},[4332],{"type":24,"value":4175},{"type":18,"tag":836,"props":4334,"children":4335},{"class":849},[4336],{"type":24,"value":4253},{"type":18,"tag":836,"props":4338,"children":4339},{"class":838,"line":916},[4340,4344,4349,4353,4357,4361],{"type":18,"tag":836,"props":4341,"children":4342},{"class":849},[4343],{"type":24,"value":4228},{"type":18,"tag":836,"props":4345,"children":4346},{"class":4231},[4347],{"type":24,"value":4348},"lbg",{"type":18,"tag":836,"props":4350,"children":4351},{"class":843},[4352],{"type":24,"value":893},{"type":18,"tag":836,"props":4354,"children":4355},{"class":849},[4356],{"type":24,"value":4243},{"type":18,"tag":836,"props":4358,"children":4359},{"class":2244},[4360],{"type":24,"value":4043},{"type":18,"tag":836,"props":4362,"children":4363},{"class":849},[4364],{"type":24,"value":4253},{"type":18,"tag":836,"props":4366,"children":4367},{"class":838,"line":938},[4368,4372,4377,4381,4385,4389],{"type":18,"tag":836,"props":4369,"children":4370},{"class":849},[4371],{"type":24,"value":4228},{"type":18,"tag":836,"props":4373,"children":4374},{"class":4231},[4375],{"type":24,"value":4376},"ubg",{"type":18,"tag":836,"props":4378,"children":4379},{"class":843},[4380],{"type":24,"value":893},{"type":18,"tag":836,"props":4382,"children":4383},{"class":849},[4384],{"type":24,"value":4243},{"type":18,"tag":836,"props":4386,"children":4387},{"class":2244},[4388],{"type":24,"value":4102},{"type":18,"tag":836,"props":4390,"children":4391},{"class":849},[4392],{"type":24,"value":4253},{"type":18,"tag":836,"props":4394,"children":4395},{"class":838,"line":947},[4396],{"type":18,"tag":836,"props":4397,"children":4398},{"class":849},[4399],{"type":24,"value":4400},"        )\n",{"type":18,"tag":836,"props":4402,"children":4403},{"class":838,"line":969},[4404],{"type":18,"tag":836,"props":4405,"children":4406},{},[4407],{"type":24,"value":870},{"type":18,"tag":836,"props":4409,"children":4410},{"class":838,"line":990},[4411,4416,4420,4425,4429,4434,4438,4442,4446,4450,4454,4459,4464,4469,4473,4477,4481],{"type":18,"tag":836,"props":4412,"children":4413},{"class":849},[4414],{"type":24,"value":4415},"        sol_x ",{"type":18,"tag":836,"props":4417,"children":4418},{"class":843},[4419],{"type":24,"value":893},{"type":18,"tag":836,"props":4421,"children":4422},{"class":849},[4423],{"type":24,"value":4424}," ca.reshape(sol[",{"type":18,"tag":836,"props":4426,"children":4427},{"class":2244},[4428],{"type":24,"value":2969},{"type":18,"tag":836,"props":4430,"children":4431},{"class":849},[4432],{"type":24,"value":4433},"][:num_states ",{"type":18,"tag":836,"props":4435,"children":4436},{"class":843},[4437],{"type":24,"value":1148},{"type":18,"tag":836,"props":4439,"children":4440},{"class":849},[4441],{"type":24,"value":3219},{"type":18,"tag":836,"props":4443,"children":4444},{"class":843},[4445],{"type":24,"value":1305},{"type":18,"tag":836,"props":4447,"children":4448},{"class":849},[4449],{"type":24,"value":898},{"type":18,"tag":836,"props":4451,"children":4452},{"class":901},[4453],{"type":24,"value":1209},{"type":18,"tag":836,"props":4455,"children":4456},{"class":849},[4457],{"type":24,"value":4458},")], ",{"type":18,"tag":836,"props":4460,"children":4461},{"class":901},[4462],{"type":24,"value":4463},"3",{"type":18,"tag":836,"props":4465,"children":4466},{"class":849},[4467],{"type":24,"value":4468},", prediction_horizons ",{"type":18,"tag":836,"props":4470,"children":4471},{"class":843},[4472],{"type":24,"value":1305},{"type":18,"tag":836,"props":4474,"children":4475},{"class":849},[4476],{"type":24,"value":898},{"type":18,"tag":836,"props":4478,"children":4479},{"class":901},[4480],{"type":24,"value":1209},{"type":18,"tag":836,"props":4482,"children":4483},{"class":849},[4484],{"type":24,"value":2252},{"type":18,"tag":836,"props":4486,"children":4487},{"class":838,"line":1011},[4488,4493,4497,4501,4505,4510,4514,4518,4522,4526,4530,4535,4539],{"type":18,"tag":836,"props":4489,"children":4490},{"class":849},[4491],{"type":24,"value":4492},"        sol_u ",{"type":18,"tag":836,"props":4494,"children":4495},{"class":843},[4496],{"type":24,"value":893},{"type":18,"tag":836,"props":4498,"children":4499},{"class":849},[4500],{"type":24,"value":4424},{"type":18,"tag":836,"props":4502,"children":4503},{"class":2244},[4504],{"type":24,"value":2969},{"type":18,"tag":836,"props":4506,"children":4507},{"class":849},[4508],{"type":24,"value":4509},"][num_states ",{"type":18,"tag":836,"props":4511,"children":4512},{"class":843},[4513],{"type":24,"value":1148},{"type":18,"tag":836,"props":4515,"children":4516},{"class":849},[4517],{"type":24,"value":3219},{"type":18,"tag":836,"props":4519,"children":4520},{"class":843},[4521],{"type":24,"value":1305},{"type":18,"tag":836,"props":4523,"children":4524},{"class":849},[4525],{"type":24,"value":898},{"type":18,"tag":836,"props":4527,"children":4528},{"class":901},[4529],{"type":24,"value":1209},{"type":18,"tag":836,"props":4531,"children":4532},{"class":849},[4533],{"type":24,"value":4534},"):], ",{"type":18,"tag":836,"props":4536,"children":4537},{"class":901},[4538],{"type":24,"value":1158},{"type":18,"tag":836,"props":4540,"children":4541},{"class":849},[4542],{"type":24,"value":4543},", prediction_horizons)",{"type":18,"tag":19,"props":4545,"children":4547},{"id":4546},"result",[4548],{"type":24,"value":4549},"Result",{"type":18,"tag":27,"props":4551,"children":4552},{},[4553],{"type":24,"value":4554},"I use MPC to control the differential drive robot to move from it zero position the the desired postion that I want to follow !.\nI generate a circle trajectory and I fit this curve into my beautiful and robustness cost and then volia !!!.",{"type":18,"tag":4556,"props":4557,"children":4562},"figure",{"className":4558},[4559,4560,4561],"mb-4","inline-block","max-w-sm",[4563,4564],{"type":24,"value":596},{"type":18,"tag":598,"props":4565,"children":4568},{"className":4566,"src":4567,"width":602,"height":603},[601],"/topics/robotics/nmpc/diff_mpc.png",[],{"type":18,"tag":612,"props":4570,"children":4572},{"className":4571},[68,615,616,617],[4573],{"type":24,"value":4574},"\n    Plot of differential drive robot follow the circle trajectory !!!.\n",{"type":18,"tag":19,"props":4576,"children":4578},{"id":4577},"in-conclusion",[4579],{"type":24,"value":4580},"In conclusion",{"type":18,"tag":27,"props":4582,"children":4583},{},[4584],{"type":24,"value":4585},"In my opinion, I think MPC is suitable for the control system, since it can provide the significant control input that was predicted over the finite future of time. This can ensure the safety of the system and also can provide a quick look or reaction to the control action of the system too.",{"type":18,"tag":19,"props":4587,"children":4589},{"id":4588},"reference",[4590],{"type":24,"value":4591},"Reference",{"type":18,"tag":284,"props":4593,"children":4594},{},[4595,4600,4605],{"type":18,"tag":80,"props":4596,"children":4597},{},[4598],{"type":24,"value":4599},"MPC-and-MHE-implementation-in-MATLAB-using-Casadi: https://github.com/MMehrez/MPC-and-MHE-implementation-in-MATLAB-using-Casadi",{"type":18,"tag":80,"props":4601,"children":4602},{},[4603],{"type":24,"value":4604},"CasAdi: https://web.casadi.org",{"type":18,"tag":80,"props":4606,"children":4607},{},[4608],{"type":24,"value":4609},"PathTracking: https://github.com/SokhengDin/PathTracking",{"type":18,"tag":4611,"children":4612},"style",[4613],{"type":24,"value":4614},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-326375{color:#6A737D;}\n.ct-533739{color:#79B8FF;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":555,"depth":555,"links":4616},[4617,4618,4619,4620,4621,4622,4623,4624,4625],{"id":35,"depth":555,"text":38},{"id":623,"depth":555,"text":626},{"id":767,"depth":555,"text":770},{"id":2064,"depth":555,"text":2067},{"id":2092,"depth":555,"text":2095},{"id":2135,"depth":555,"text":2138},{"id":4546,"depth":555,"text":4549},{"id":4577,"depth":555,"text":4580},{"id":4588,"depth":555,"text":4591},"content:topics:robotics:nonlinear-mpc.md","topics/robotics/nonlinear-mpc.md",{"_path":4629,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":4630,"description":4631,"author":4632,"slug":4633,"tag":4633,"img":4634,"body":4635,"_type":564,"_id":6532,"_source":566,"_file":6533,"_extension":568},"/topics/robotics/pid-controller","Introduction to PID Controller in Python","PID Control is a feedback control","DIN SOKHENG","pid","/topics/robotics/nmpc/PID.png",{"type":15,"children":4636,"toc":6518},[4637,4643,4653,4659,4664,4670,4674,4713,4722,4728,4734,4744,4750,4755,4789,4795,4800,4805,4815,4821,4826,4830,4835,4839,4844,5257,5274,5821,5826,5832,5838,5856,5942,5947,6009,6014,6098,6110,6398,6404,6423,6439,6443,6453,6459,6469,6475,6480,6485,6491,6514],{"type":18,"tag":19,"props":4638,"children":4640},{"id":4639},"what-is-pid-controller",[4641],{"type":24,"value":4642},"What is PID Controller ?",{"type":18,"tag":27,"props":4644,"children":4645},{},[4646,4648,4652],{"type":24,"value":4647},"The Proportional Integral Derivative (PID) controller is a traditional method in control systems that has found widespread use in control system engineering and industrial applications since its emergence in the 1940s. A PID controller is considered a feedback controller, aiming to minimize the error between the system's feedback and the desired setpoint by manually or automatically fine-tuning the coefficients ",{"type":18,"tag":84,"props":4649,"children":4651},{"latex-express":4650,"styles":87},"K_{P}, K_{I}, K_{D}",[],{"type":24,"value":197},{"type":18,"tag":19,"props":4654,"children":4656},{"id":4655},"how-it-works",[4657],{"type":24,"value":4658},"How it works ?",{"type":18,"tag":27,"props":4660,"children":4661},{},[4662],{"type":24,"value":4663},"Imagine you want to control the speed of a DC motor to reach 300 RPM, but due to the natural response of the DC motor, it cannot reach the desired angular speed. PID offers a solution to this natural response by adjusting the system's time response using its three components, as shown in the formula below.",{"type":18,"tag":19,"props":4665,"children":4667},{"id":4666},"formulation",[4668],{"type":24,"value":4669},"Formulation",{"type":18,"tag":65,"props":4671,"children":4673},{"latex-express":4672,"styles":68},"u(t) = K_{p}e(t) + K_{I} \\int_{0}^{t} e(t) dt + K_{D} \\frac{d e(t)}{dt} ",[],{"type":18,"tag":76,"props":4675,"children":4676},{},[4677,4686,4695,4704],{"type":18,"tag":80,"props":4678,"children":4679},{},[4680,4684],{"type":18,"tag":84,"props":4681,"children":4683},{"latex-express":4682,"styles":87},"K_{P}",[],{"type":24,"value":4685}," represents the proportional gain.",{"type":18,"tag":80,"props":4687,"children":4688},{},[4689,4693],{"type":18,"tag":84,"props":4690,"children":4692},{"latex-express":4691,"styles":87},"K_{I}",[],{"type":24,"value":4694}," represents the integral gain.",{"type":18,"tag":80,"props":4696,"children":4697},{},[4698,4702],{"type":18,"tag":84,"props":4699,"children":4701},{"latex-express":4700,"styles":87},"K_{D}",[],{"type":24,"value":4703}," represents the derivative gain.",{"type":18,"tag":80,"props":4705,"children":4706},{},[4707,4711],{"type":18,"tag":84,"props":4708,"children":4710},{"latex-express":4709,"styles":87},"e(t)=target-feedback",[],{"type":24,"value":4712}," is the error between target point and feedback of the system",{"type":18,"tag":4556,"props":4714,"children":4716},{"className":4715},[4559,4560,4561],[4717,4718],{"type":24,"value":596},{"type":18,"tag":598,"props":4719,"children":4721},{"className":4720,"src":4634},[601],[],{"type":18,"tag":612,"props":4723,"children":4725},{"className":4724},[68,615,616,617],[4726],{"type":24,"value":4727},"\n    The Block diagram of PID Controller\n",{"type":18,"tag":19,"props":4729,"children":4731},{"id":4730},"response-time",[4732],{"type":24,"value":4733},"Response Time",{"type":18,"tag":4556,"props":4735,"children":4737},{"className":4736},[4559,4560,4561],[4738,4739],{"type":24,"value":596},{"type":18,"tag":598,"props":4740,"children":4743},{"className":4741,"src":4742},[601],"/topics/robotics/nmpc/response_timepid.png",[],{"type":18,"tag":612,"props":4745,"children":4747},{"className":4746},[68,615,616,617],[4748],{"type":24,"value":4749},"\n    The response time of the system with each K_P, K_I, K_D\n",{"type":18,"tag":27,"props":4751,"children":4752},{},[4753],{"type":24,"value":4754},"As you can see in the figure above, the response time of the system is difference.",{"type":18,"tag":76,"props":4756,"children":4757},{},[4758,4769,4779],{"type":18,"tag":80,"props":4759,"children":4760},{},[4761,4763,4767],{"type":24,"value":4762},"The response time with ",{"type":18,"tag":84,"props":4764,"children":4766},{"latex-express":4765,"styles":87},"K_{I}=2",[],{"type":24,"value":4768}," the system is likely to overshoot before reaching the steady-state, which may not be suitable for applications like controlling a DC motor.",{"type":18,"tag":80,"props":4770,"children":4771},{},[4772,4773,4777],{"type":24,"value":4762},{"type":18,"tag":84,"props":4774,"children":4776},{"latex-express":4775,"styles":87},"K_{i}=0.5, ",[],{"type":24,"value":4778},"  the response does not overshoot but has a slower response to reach the steady-state.",{"type":18,"tag":80,"props":4780,"children":4781},{},[4782,4783,4787],{"type":24,"value":4762},{"type":18,"tag":84,"props":4784,"children":4786},{"latex-express":4785,"styles":87},"K_{p}=1, K_{i}=1, K_{d}=1",[],{"type":24,"value":4788},"  there is a slight overshoot, but the steady-state is reached faster.",{"type":18,"tag":19,"props":4790,"children":4792},{"id":4791},"how-can-we-write-pid-code-in-python",[4793],{"type":24,"value":4794},"How can we write PID code in Python ?",{"type":18,"tag":27,"props":4796,"children":4797},{},[4798],{"type":24,"value":4799},"Let's use a differential drive robot as a case study system. A differential drive robot is commonly used in robotics and automation, making it an ideal choice for a demonstration.",{"type":18,"tag":27,"props":4801,"children":4802},{},[4803],{"type":24,"value":4804},"The configuration of Differential Drive Robot in axes OXY.",{"type":18,"tag":4556,"props":4806,"children":4808},{"className":4807},[4559,4560,4561],[4809,4810],{"type":24,"value":596},{"type":18,"tag":598,"props":4811,"children":4814},{"className":4812,"src":4813},[601],"/topics/robotics/nmpc/diff_drive.png",[],{"type":18,"tag":612,"props":4816,"children":4818},{"className":4817},[68,615,616,617],[4819],{"type":24,"value":4820},"\n    The configuration of Differential Drive Robot in axes OXY.\n",{"type":18,"tag":27,"props":4822,"children":4823},{},[4824],{"type":24,"value":4825},"The forward kinematic equation",{"type":18,"tag":65,"props":4827,"children":4829},{"latex-express":4828,"styles":68},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{\\theta} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":4831,"children":4832},{},[4833],{"type":24,"value":4834},"So, if we discretize the forward kinematic with a certain sampling time, we will get",{"type":18,"tag":84,"props":4836,"children":4838},{"latex-express":4837,"styles":68},"\n\\begin{bmatrix} x_{t+1} \\\\ y_{t+1} \\\\ \\theta_{t+1} \\end{bmatrix} = \\begin{bmatrix} x_{t} \\\\ y_{t} \\\\ \\theta_{t} \\end{bmatrix} +\\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix} \\times \\Delta t\n ",[],{"type":18,"tag":27,"props":4840,"children":4841},{},[4842],{"type":24,"value":4843},"In Python,",{"type":18,"tag":821,"props":4845,"children":4848},{"className":4846,"code":4847,"language":826,"meta":8},[824],"class DifferentialDrive:\n    def __init__(self):\n        self.r = 0.05\n        self.L = 0.25\n    def forward_kinematic(self, v, omega, yaw):\n        vx = v*np.cos(yaw)\n        vy = v*np.sin(yaw)\n        vyaw = omega\n\n        return vx, vy, vyaw\n    def discrete_state(self, x, y, yaw, v, omega, dt):\n        dx, dy, dyaw = self.forward_kinematic(v, omega, yaw)\n        x_next = x + dx * dt\n        y_next = y + dy * dt\n        yaw_next = yaw + dyaw * dt\n\n        return x_next, y_next, yaw_next\n",[4849],{"type":18,"tag":829,"props":4850,"children":4851},{},[4852],{"type":18,"tag":821,"props":4853,"children":4854},{"__ignoreMap":8},[4855,4878,4904,4935,4964,4989,5015,5040,5057,5064,5081,5106,5131,5166,5200,5234,5241],{"type":18,"tag":836,"props":4856,"children":4857},{"class":838,"line":839},[4858,4863,4867,4873],{"type":18,"tag":836,"props":4859,"children":4860},{"class":843},[4861],{"type":24,"value":4862},"class",{"type":18,"tag":836,"props":4864,"children":4865},{"class":849},[4866],{"type":24,"value":898},{"type":18,"tag":836,"props":4868,"children":4870},{"class":4869},"ct-806137",[4871],{"type":24,"value":4872},"DifferentialDrive",{"type":18,"tag":836,"props":4874,"children":4875},{"class":849},[4876],{"type":24,"value":4877},":\n",{"type":18,"tag":836,"props":4879,"children":4880},{"class":838,"line":555},[4881,4885,4890,4894,4899],{"type":18,"tag":836,"props":4882,"children":4883},{"class":849},[4884],{"type":24,"value":1674},{"type":18,"tag":836,"props":4886,"children":4887},{"class":843},[4888],{"type":24,"value":4889},"def",{"type":18,"tag":836,"props":4891,"children":4892},{"class":849},[4893],{"type":24,"value":898},{"type":18,"tag":836,"props":4895,"children":4896},{"class":901},[4897],{"type":24,"value":4898},"__init__",{"type":18,"tag":836,"props":4900,"children":4901},{"class":849},[4902],{"type":24,"value":4903},"(self):\n",{"type":18,"tag":836,"props":4905,"children":4906},{"class":838,"line":560},[4907,4912,4917,4922,4926,4930],{"type":18,"tag":836,"props":4908,"children":4909},{"class":849},[4910],{"type":24,"value":4911},"        ",{"type":18,"tag":836,"props":4913,"children":4914},{"class":901},[4915],{"type":24,"value":4916},"self",{"type":18,"tag":836,"props":4918,"children":4919},{"class":849},[4920],{"type":24,"value":4921},".r ",{"type":18,"tag":836,"props":4923,"children":4924},{"class":843},[4925],{"type":24,"value":893},{"type":18,"tag":836,"props":4927,"children":4928},{"class":849},[4929],{"type":24,"value":898},{"type":18,"tag":836,"props":4931,"children":4932},{"class":901},[4933],{"type":24,"value":4934},"0.05\n",{"type":18,"tag":836,"props":4936,"children":4937},{"class":838,"line":882},[4938,4942,4946,4951,4955,4959],{"type":18,"tag":836,"props":4939,"children":4940},{"class":849},[4941],{"type":24,"value":4911},{"type":18,"tag":836,"props":4943,"children":4944},{"class":901},[4945],{"type":24,"value":4916},{"type":18,"tag":836,"props":4947,"children":4948},{"class":849},[4949],{"type":24,"value":4950},".L ",{"type":18,"tag":836,"props":4952,"children":4953},{"class":843},[4954],{"type":24,"value":893},{"type":18,"tag":836,"props":4956,"children":4957},{"class":849},[4958],{"type":24,"value":898},{"type":18,"tag":836,"props":4960,"children":4961},{"class":901},[4962],{"type":24,"value":4963},"0.25\n",{"type":18,"tag":836,"props":4965,"children":4966},{"class":838,"line":907},[4967,4971,4975,4979,4984],{"type":18,"tag":836,"props":4968,"children":4969},{"class":849},[4970],{"type":24,"value":1674},{"type":18,"tag":836,"props":4972,"children":4973},{"class":843},[4974],{"type":24,"value":4889},{"type":18,"tag":836,"props":4976,"children":4977},{"class":849},[4978],{"type":24,"value":898},{"type":18,"tag":836,"props":4980,"children":4981},{"class":4869},[4982],{"type":24,"value":4983},"forward_kinematic",{"type":18,"tag":836,"props":4985,"children":4986},{"class":849},[4987],{"type":24,"value":4988},"(self, v, omega, yaw):\n",{"type":18,"tag":836,"props":4990,"children":4991},{"class":838,"line":916},[4992,4997,5001,5006,5010],{"type":18,"tag":836,"props":4993,"children":4994},{"class":849},[4995],{"type":24,"value":4996},"        vx ",{"type":18,"tag":836,"props":4998,"children":4999},{"class":843},[5000],{"type":24,"value":893},{"type":18,"tag":836,"props":5002,"children":5003},{"class":849},[5004],{"type":24,"value":5005}," v",{"type":18,"tag":836,"props":5007,"children":5008},{"class":843},[5009],{"type":24,"value":1148},{"type":18,"tag":836,"props":5011,"children":5012},{"class":849},[5013],{"type":24,"value":5014},"np.cos(yaw)\n",{"type":18,"tag":836,"props":5016,"children":5017},{"class":838,"line":938},[5018,5023,5027,5031,5035],{"type":18,"tag":836,"props":5019,"children":5020},{"class":849},[5021],{"type":24,"value":5022},"        vy ",{"type":18,"tag":836,"props":5024,"children":5025},{"class":843},[5026],{"type":24,"value":893},{"type":18,"tag":836,"props":5028,"children":5029},{"class":849},[5030],{"type":24,"value":5005},{"type":18,"tag":836,"props":5032,"children":5033},{"class":843},[5034],{"type":24,"value":1148},{"type":18,"tag":836,"props":5036,"children":5037},{"class":849},[5038],{"type":24,"value":5039},"np.sin(yaw)\n",{"type":18,"tag":836,"props":5041,"children":5042},{"class":838,"line":947},[5043,5048,5052],{"type":18,"tag":836,"props":5044,"children":5045},{"class":849},[5046],{"type":24,"value":5047},"        vyaw ",{"type":18,"tag":836,"props":5049,"children":5050},{"class":843},[5051],{"type":24,"value":893},{"type":18,"tag":836,"props":5053,"children":5054},{"class":849},[5055],{"type":24,"value":5056}," omega\n",{"type":18,"tag":836,"props":5058,"children":5059},{"class":838,"line":969},[5060],{"type":18,"tag":836,"props":5061,"children":5062},{},[5063],{"type":24,"value":870},{"type":18,"tag":836,"props":5065,"children":5066},{"class":838,"line":990},[5067,5071,5076],{"type":18,"tag":836,"props":5068,"children":5069},{"class":849},[5070],{"type":24,"value":4911},{"type":18,"tag":836,"props":5072,"children":5073},{"class":843},[5074],{"type":24,"value":5075},"return",{"type":18,"tag":836,"props":5077,"children":5078},{"class":849},[5079],{"type":24,"value":5080}," vx, vy, vyaw\n",{"type":18,"tag":836,"props":5082,"children":5083},{"class":838,"line":1011},[5084,5088,5092,5096,5101],{"type":18,"tag":836,"props":5085,"children":5086},{"class":849},[5087],{"type":24,"value":1674},{"type":18,"tag":836,"props":5089,"children":5090},{"class":843},[5091],{"type":24,"value":4889},{"type":18,"tag":836,"props":5093,"children":5094},{"class":849},[5095],{"type":24,"value":898},{"type":18,"tag":836,"props":5097,"children":5098},{"class":4869},[5099],{"type":24,"value":5100},"discrete_state",{"type":18,"tag":836,"props":5102,"children":5103},{"class":849},[5104],{"type":24,"value":5105},"(self, x, y, yaw, v, omega, dt):\n",{"type":18,"tag":836,"props":5107,"children":5108},{"class":838,"line":1020},[5109,5114,5118,5122,5126],{"type":18,"tag":836,"props":5110,"children":5111},{"class":849},[5112],{"type":24,"value":5113},"        dx, dy, dyaw ",{"type":18,"tag":836,"props":5115,"children":5116},{"class":843},[5117],{"type":24,"value":893},{"type":18,"tag":836,"props":5119,"children":5120},{"class":849},[5121],{"type":24,"value":898},{"type":18,"tag":836,"props":5123,"children":5124},{"class":901},[5125],{"type":24,"value":4916},{"type":18,"tag":836,"props":5127,"children":5128},{"class":849},[5129],{"type":24,"value":5130},".forward_kinematic(v, omega, yaw)\n",{"type":18,"tag":836,"props":5132,"children":5133},{"class":838,"line":1051},[5134,5139,5143,5148,5152,5157,5161],{"type":18,"tag":836,"props":5135,"children":5136},{"class":849},[5137],{"type":24,"value":5138},"        x_next ",{"type":18,"tag":836,"props":5140,"children":5141},{"class":843},[5142],{"type":24,"value":893},{"type":18,"tag":836,"props":5144,"children":5145},{"class":849},[5146],{"type":24,"value":5147}," x ",{"type":18,"tag":836,"props":5149,"children":5150},{"class":843},[5151],{"type":24,"value":1305},{"type":18,"tag":836,"props":5153,"children":5154},{"class":849},[5155],{"type":24,"value":5156}," dx ",{"type":18,"tag":836,"props":5158,"children":5159},{"class":843},[5160],{"type":24,"value":1148},{"type":18,"tag":836,"props":5162,"children":5163},{"class":849},[5164],{"type":24,"value":5165}," dt\n",{"type":18,"tag":836,"props":5167,"children":5168},{"class":838,"line":1082},[5169,5174,5178,5183,5187,5192,5196],{"type":18,"tag":836,"props":5170,"children":5171},{"class":849},[5172],{"type":24,"value":5173},"        y_next ",{"type":18,"tag":836,"props":5175,"children":5176},{"class":843},[5177],{"type":24,"value":893},{"type":18,"tag":836,"props":5179,"children":5180},{"class":849},[5181],{"type":24,"value":5182}," y ",{"type":18,"tag":836,"props":5184,"children":5185},{"class":843},[5186],{"type":24,"value":1305},{"type":18,"tag":836,"props":5188,"children":5189},{"class":849},[5190],{"type":24,"value":5191}," dy ",{"type":18,"tag":836,"props":5193,"children":5194},{"class":843},[5195],{"type":24,"value":1148},{"type":18,"tag":836,"props":5197,"children":5198},{"class":849},[5199],{"type":24,"value":5165},{"type":18,"tag":836,"props":5201,"children":5202},{"class":838,"line":1091},[5203,5208,5212,5217,5221,5226,5230],{"type":18,"tag":836,"props":5204,"children":5205},{"class":849},[5206],{"type":24,"value":5207},"        yaw_next ",{"type":18,"tag":836,"props":5209,"children":5210},{"class":843},[5211],{"type":24,"value":893},{"type":18,"tag":836,"props":5213,"children":5214},{"class":849},[5215],{"type":24,"value":5216}," yaw ",{"type":18,"tag":836,"props":5218,"children":5219},{"class":843},[5220],{"type":24,"value":1305},{"type":18,"tag":836,"props":5222,"children":5223},{"class":849},[5224],{"type":24,"value":5225}," dyaw ",{"type":18,"tag":836,"props":5227,"children":5228},{"class":843},[5229],{"type":24,"value":1148},{"type":18,"tag":836,"props":5231,"children":5232},{"class":849},[5233],{"type":24,"value":5165},{"type":18,"tag":836,"props":5235,"children":5236},{"class":838,"line":1100},[5237],{"type":18,"tag":836,"props":5238,"children":5239},{},[5240],{"type":24,"value":870},{"type":18,"tag":836,"props":5242,"children":5243},{"class":838,"line":1127},[5244,5248,5252],{"type":18,"tag":836,"props":5245,"children":5246},{"class":849},[5247],{"type":24,"value":4911},{"type":18,"tag":836,"props":5249,"children":5250},{"class":843},[5251],{"type":24,"value":5075},{"type":18,"tag":836,"props":5253,"children":5254},{"class":849},[5255],{"type":24,"value":5256}," x_next, y_next, yaw_next",{"type":18,"tag":27,"props":5258,"children":5259},{},[5260,5262,5266,5268,5273],{"type":24,"value":5261},"The ",{"type":18,"tag":170,"props":5263,"children":5264},{},[5265],{"type":24,"value":780},{"type":24,"value":5267}," class that we defined, has all the need attribute to use for PID control !!. We just need to write another class for our ",{"type":18,"tag":170,"props":5269,"children":5270},{},[5271],{"type":24,"value":5272}," PID Controller ",{"type":24,"value":197},{"type":18,"tag":821,"props":5275,"children":5278},{"className":5276,"code":5277,"language":826,"meta":8},[824],"class PIDController:\n    def __init__(self, kp, ki, kd, dt):\n\n        self.kp = kp\n        self.ki = ki\n        self.kd = kd\n        self.dt = dt\n        self.integral = 0\n\n    def calculate_pid(self, errors):\n        # Calculate proportional error\n        proportional = self.kp * errors[-1]\n        # Calculate integration error\n        integral = self.integral + self.ki * (errors[-1]) * self.dt\n        self.integral = integral\n        # Calculate derivative error\n        derivative = self.kd * (errors[-1] - errors[-2])/self.dt\n\n        output = proportional + integral + derivative\n\n        return output\n",[5279],{"type":18,"tag":829,"props":5280,"children":5281},{},[5282],{"type":18,"tag":821,"props":5283,"children":5284},{"__ignoreMap":8},[5285,5305,5329,5336,5361,5386,5411,5435,5463,5470,5495,5507,5553,5565,5643,5667,5679,5756,5763,5798,5805],{"type":18,"tag":836,"props":5286,"children":5287},{"class":838,"line":839},[5288,5292,5296,5301],{"type":18,"tag":836,"props":5289,"children":5290},{"class":843},[5291],{"type":24,"value":4862},{"type":18,"tag":836,"props":5293,"children":5294},{"class":849},[5295],{"type":24,"value":898},{"type":18,"tag":836,"props":5297,"children":5298},{"class":4869},[5299],{"type":24,"value":5300},"PIDController",{"type":18,"tag":836,"props":5302,"children":5303},{"class":849},[5304],{"type":24,"value":4877},{"type":18,"tag":836,"props":5306,"children":5307},{"class":838,"line":555},[5308,5312,5316,5320,5324],{"type":18,"tag":836,"props":5309,"children":5310},{"class":849},[5311],{"type":24,"value":1674},{"type":18,"tag":836,"props":5313,"children":5314},{"class":843},[5315],{"type":24,"value":4889},{"type":18,"tag":836,"props":5317,"children":5318},{"class":849},[5319],{"type":24,"value":898},{"type":18,"tag":836,"props":5321,"children":5322},{"class":901},[5323],{"type":24,"value":4898},{"type":18,"tag":836,"props":5325,"children":5326},{"class":849},[5327],{"type":24,"value":5328},"(self, kp, ki, kd, dt):\n",{"type":18,"tag":836,"props":5330,"children":5331},{"class":838,"line":560},[5332],{"type":18,"tag":836,"props":5333,"children":5334},{},[5335],{"type":24,"value":870},{"type":18,"tag":836,"props":5337,"children":5338},{"class":838,"line":882},[5339,5343,5347,5352,5356],{"type":18,"tag":836,"props":5340,"children":5341},{"class":849},[5342],{"type":24,"value":4911},{"type":18,"tag":836,"props":5344,"children":5345},{"class":901},[5346],{"type":24,"value":4916},{"type":18,"tag":836,"props":5348,"children":5349},{"class":849},[5350],{"type":24,"value":5351},".kp ",{"type":18,"tag":836,"props":5353,"children":5354},{"class":843},[5355],{"type":24,"value":893},{"type":18,"tag":836,"props":5357,"children":5358},{"class":849},[5359],{"type":24,"value":5360}," kp\n",{"type":18,"tag":836,"props":5362,"children":5363},{"class":838,"line":907},[5364,5368,5372,5377,5381],{"type":18,"tag":836,"props":5365,"children":5366},{"class":849},[5367],{"type":24,"value":4911},{"type":18,"tag":836,"props":5369,"children":5370},{"class":901},[5371],{"type":24,"value":4916},{"type":18,"tag":836,"props":5373,"children":5374},{"class":849},[5375],{"type":24,"value":5376},".ki ",{"type":18,"tag":836,"props":5378,"children":5379},{"class":843},[5380],{"type":24,"value":893},{"type":18,"tag":836,"props":5382,"children":5383},{"class":849},[5384],{"type":24,"value":5385}," ki\n",{"type":18,"tag":836,"props":5387,"children":5388},{"class":838,"line":916},[5389,5393,5397,5402,5406],{"type":18,"tag":836,"props":5390,"children":5391},{"class":849},[5392],{"type":24,"value":4911},{"type":18,"tag":836,"props":5394,"children":5395},{"class":901},[5396],{"type":24,"value":4916},{"type":18,"tag":836,"props":5398,"children":5399},{"class":849},[5400],{"type":24,"value":5401},".kd ",{"type":18,"tag":836,"props":5403,"children":5404},{"class":843},[5405],{"type":24,"value":893},{"type":18,"tag":836,"props":5407,"children":5408},{"class":849},[5409],{"type":24,"value":5410}," kd\n",{"type":18,"tag":836,"props":5412,"children":5413},{"class":838,"line":938},[5414,5418,5422,5427,5431],{"type":18,"tag":836,"props":5415,"children":5416},{"class":849},[5417],{"type":24,"value":4911},{"type":18,"tag":836,"props":5419,"children":5420},{"class":901},[5421],{"type":24,"value":4916},{"type":18,"tag":836,"props":5423,"children":5424},{"class":849},[5425],{"type":24,"value":5426},".dt ",{"type":18,"tag":836,"props":5428,"children":5429},{"class":843},[5430],{"type":24,"value":893},{"type":18,"tag":836,"props":5432,"children":5433},{"class":849},[5434],{"type":24,"value":5165},{"type":18,"tag":836,"props":5436,"children":5437},{"class":838,"line":947},[5438,5442,5446,5451,5455,5459],{"type":18,"tag":836,"props":5439,"children":5440},{"class":849},[5441],{"type":24,"value":4911},{"type":18,"tag":836,"props":5443,"children":5444},{"class":901},[5445],{"type":24,"value":4916},{"type":18,"tag":836,"props":5447,"children":5448},{"class":849},[5449],{"type":24,"value":5450},".integral ",{"type":18,"tag":836,"props":5452,"children":5453},{"class":843},[5454],{"type":24,"value":893},{"type":18,"tag":836,"props":5456,"children":5457},{"class":849},[5458],{"type":24,"value":898},{"type":18,"tag":836,"props":5460,"children":5461},{"class":901},[5462],{"type":24,"value":3160},{"type":18,"tag":836,"props":5464,"children":5465},{"class":838,"line":969},[5466],{"type":18,"tag":836,"props":5467,"children":5468},{},[5469],{"type":24,"value":870},{"type":18,"tag":836,"props":5471,"children":5472},{"class":838,"line":990},[5473,5477,5481,5485,5490],{"type":18,"tag":836,"props":5474,"children":5475},{"class":849},[5476],{"type":24,"value":1674},{"type":18,"tag":836,"props":5478,"children":5479},{"class":843},[5480],{"type":24,"value":4889},{"type":18,"tag":836,"props":5482,"children":5483},{"class":849},[5484],{"type":24,"value":898},{"type":18,"tag":836,"props":5486,"children":5487},{"class":4869},[5488],{"type":24,"value":5489},"calculate_pid",{"type":18,"tag":836,"props":5491,"children":5492},{"class":849},[5493],{"type":24,"value":5494},"(self, errors):\n",{"type":18,"tag":836,"props":5496,"children":5497},{"class":838,"line":1011},[5498,5502],{"type":18,"tag":836,"props":5499,"children":5500},{"class":849},[5501],{"type":24,"value":4911},{"type":18,"tag":836,"props":5503,"children":5504},{"class":876},[5505],{"type":24,"value":5506},"# Calculate proportional error\n",{"type":18,"tag":836,"props":5508,"children":5509},{"class":838,"line":1020},[5510,5515,5519,5523,5527,5531,5535,5540,5544,5548],{"type":18,"tag":836,"props":5511,"children":5512},{"class":849},[5513],{"type":24,"value":5514},"        proportional ",{"type":18,"tag":836,"props":5516,"children":5517},{"class":843},[5518],{"type":24,"value":893},{"type":18,"tag":836,"props":5520,"children":5521},{"class":849},[5522],{"type":24,"value":898},{"type":18,"tag":836,"props":5524,"children":5525},{"class":901},[5526],{"type":24,"value":4916},{"type":18,"tag":836,"props":5528,"children":5529},{"class":849},[5530],{"type":24,"value":5351},{"type":18,"tag":836,"props":5532,"children":5533},{"class":843},[5534],{"type":24,"value":1148},{"type":18,"tag":836,"props":5536,"children":5537},{"class":849},[5538],{"type":24,"value":5539}," errors[",{"type":18,"tag":836,"props":5541,"children":5542},{"class":843},[5543],{"type":24,"value":2536},{"type":18,"tag":836,"props":5545,"children":5546},{"class":901},[5547],{"type":24,"value":1209},{"type":18,"tag":836,"props":5549,"children":5550},{"class":849},[5551],{"type":24,"value":5552},"]\n",{"type":18,"tag":836,"props":5554,"children":5555},{"class":838,"line":1051},[5556,5560],{"type":18,"tag":836,"props":5557,"children":5558},{"class":849},[5559],{"type":24,"value":4911},{"type":18,"tag":836,"props":5561,"children":5562},{"class":876},[5563],{"type":24,"value":5564},"# Calculate integration error\n",{"type":18,"tag":836,"props":5566,"children":5567},{"class":838,"line":1082},[5568,5573,5577,5581,5585,5589,5593,5597,5601,5605,5609,5614,5618,5622,5626,5630,5634,5638],{"type":18,"tag":836,"props":5569,"children":5570},{"class":849},[5571],{"type":24,"value":5572},"        integral ",{"type":18,"tag":836,"props":5574,"children":5575},{"class":843},[5576],{"type":24,"value":893},{"type":18,"tag":836,"props":5578,"children":5579},{"class":849},[5580],{"type":24,"value":898},{"type":18,"tag":836,"props":5582,"children":5583},{"class":901},[5584],{"type":24,"value":4916},{"type":18,"tag":836,"props":5586,"children":5587},{"class":849},[5588],{"type":24,"value":5450},{"type":18,"tag":836,"props":5590,"children":5591},{"class":843},[5592],{"type":24,"value":1305},{"type":18,"tag":836,"props":5594,"children":5595},{"class":849},[5596],{"type":24,"value":898},{"type":18,"tag":836,"props":5598,"children":5599},{"class":901},[5600],{"type":24,"value":4916},{"type":18,"tag":836,"props":5602,"children":5603},{"class":849},[5604],{"type":24,"value":5376},{"type":18,"tag":836,"props":5606,"children":5607},{"class":843},[5608],{"type":24,"value":1148},{"type":18,"tag":836,"props":5610,"children":5611},{"class":849},[5612],{"type":24,"value":5613}," (errors[",{"type":18,"tag":836,"props":5615,"children":5616},{"class":843},[5617],{"type":24,"value":2536},{"type":18,"tag":836,"props":5619,"children":5620},{"class":901},[5621],{"type":24,"value":1209},{"type":18,"tag":836,"props":5623,"children":5624},{"class":849},[5625],{"type":24,"value":1789},{"type":18,"tag":836,"props":5627,"children":5628},{"class":843},[5629],{"type":24,"value":1148},{"type":18,"tag":836,"props":5631,"children":5632},{"class":849},[5633],{"type":24,"value":898},{"type":18,"tag":836,"props":5635,"children":5636},{"class":901},[5637],{"type":24,"value":4916},{"type":18,"tag":836,"props":5639,"children":5640},{"class":849},[5641],{"type":24,"value":5642},".dt\n",{"type":18,"tag":836,"props":5644,"children":5645},{"class":838,"line":1091},[5646,5650,5654,5658,5662],{"type":18,"tag":836,"props":5647,"children":5648},{"class":849},[5649],{"type":24,"value":4911},{"type":18,"tag":836,"props":5651,"children":5652},{"class":901},[5653],{"type":24,"value":4916},{"type":18,"tag":836,"props":5655,"children":5656},{"class":849},[5657],{"type":24,"value":5450},{"type":18,"tag":836,"props":5659,"children":5660},{"class":843},[5661],{"type":24,"value":893},{"type":18,"tag":836,"props":5663,"children":5664},{"class":849},[5665],{"type":24,"value":5666}," integral\n",{"type":18,"tag":836,"props":5668,"children":5669},{"class":838,"line":1100},[5670,5674],{"type":18,"tag":836,"props":5671,"children":5672},{"class":849},[5673],{"type":24,"value":4911},{"type":18,"tag":836,"props":5675,"children":5676},{"class":876},[5677],{"type":24,"value":5678},"# Calculate derivative error\n",{"type":18,"tag":836,"props":5680,"children":5681},{"class":838,"line":1127},[5682,5687,5691,5695,5699,5703,5707,5711,5715,5719,5723,5727,5731,5735,5739,5744,5748,5752],{"type":18,"tag":836,"props":5683,"children":5684},{"class":849},[5685],{"type":24,"value":5686},"        derivative ",{"type":18,"tag":836,"props":5688,"children":5689},{"class":843},[5690],{"type":24,"value":893},{"type":18,"tag":836,"props":5692,"children":5693},{"class":849},[5694],{"type":24,"value":898},{"type":18,"tag":836,"props":5696,"children":5697},{"class":901},[5698],{"type":24,"value":4916},{"type":18,"tag":836,"props":5700,"children":5701},{"class":849},[5702],{"type":24,"value":5401},{"type":18,"tag":836,"props":5704,"children":5705},{"class":843},[5706],{"type":24,"value":1148},{"type":18,"tag":836,"props":5708,"children":5709},{"class":849},[5710],{"type":24,"value":5613},{"type":18,"tag":836,"props":5712,"children":5713},{"class":843},[5714],{"type":24,"value":2536},{"type":18,"tag":836,"props":5716,"children":5717},{"class":901},[5718],{"type":24,"value":1209},{"type":18,"tag":836,"props":5720,"children":5721},{"class":849},[5722],{"type":24,"value":1707},{"type":18,"tag":836,"props":5724,"children":5725},{"class":843},[5726],{"type":24,"value":2536},{"type":18,"tag":836,"props":5728,"children":5729},{"class":849},[5730],{"type":24,"value":5539},{"type":18,"tag":836,"props":5732,"children":5733},{"class":843},[5734],{"type":24,"value":2536},{"type":18,"tag":836,"props":5736,"children":5737},{"class":901},[5738],{"type":24,"value":1158},{"type":18,"tag":836,"props":5740,"children":5741},{"class":849},[5742],{"type":24,"value":5743},"])",{"type":18,"tag":836,"props":5745,"children":5746},{"class":843},[5747],{"type":24,"value":1315},{"type":18,"tag":836,"props":5749,"children":5750},{"class":901},[5751],{"type":24,"value":4916},{"type":18,"tag":836,"props":5753,"children":5754},{"class":849},[5755],{"type":24,"value":5642},{"type":18,"tag":836,"props":5757,"children":5758},{"class":838,"line":1166},[5759],{"type":18,"tag":836,"props":5760,"children":5761},{},[5762],{"type":24,"value":870},{"type":18,"tag":836,"props":5764,"children":5765},{"class":838,"line":1199},[5766,5771,5775,5780,5784,5789,5793],{"type":18,"tag":836,"props":5767,"children":5768},{"class":849},[5769],{"type":24,"value":5770},"        output ",{"type":18,"tag":836,"props":5772,"children":5773},{"class":843},[5774],{"type":24,"value":893},{"type":18,"tag":836,"props":5776,"children":5777},{"class":849},[5778],{"type":24,"value":5779}," proportional ",{"type":18,"tag":836,"props":5781,"children":5782},{"class":843},[5783],{"type":24,"value":1305},{"type":18,"tag":836,"props":5785,"children":5786},{"class":849},[5787],{"type":24,"value":5788}," integral ",{"type":18,"tag":836,"props":5790,"children":5791},{"class":843},[5792],{"type":24,"value":1305},{"type":18,"tag":836,"props":5794,"children":5795},{"class":849},[5796],{"type":24,"value":5797}," derivative\n",{"type":18,"tag":836,"props":5799,"children":5800},{"class":838,"line":1217},[5801],{"type":18,"tag":836,"props":5802,"children":5803},{},[5804],{"type":24,"value":870},{"type":18,"tag":836,"props":5806,"children":5807},{"class":838,"line":1226},[5808,5812,5816],{"type":18,"tag":836,"props":5809,"children":5810},{"class":849},[5811],{"type":24,"value":4911},{"type":18,"tag":836,"props":5813,"children":5814},{"class":843},[5815],{"type":24,"value":5075},{"type":18,"tag":836,"props":5817,"children":5818},{"class":849},[5819],{"type":24,"value":5820}," output",{"type":18,"tag":27,"props":5822,"children":5823},{},[5824],{"type":24,"value":5825},"Don't worry, this class just defined as the PID formula. So, by doing this, we will be able to use all the characteristic of our PID controller.",{"type":18,"tag":19,"props":5827,"children":5829},{"id":5828},"experiment",[5830],{"type":24,"value":5831},"Experiment",{"type":18,"tag":33,"props":5833,"children":5835},{"id":5834},"pid-for-point-control",[5836],{"type":24,"value":5837},"PID for point control",{"type":18,"tag":27,"props":5839,"children":5840},{},[5841,5843,5847,5849,5854],{"type":24,"value":5842},"If I want my DifferentialDrive robot go to point ",{"type":18,"tag":84,"props":5844,"children":5846},{"latex-express":5845,"styles":87},"x_{ref}, y_{ref}, \\theta_{ref}",[],{"type":24,"value":5848},", Then I can calculate the error between the reference point and the feedback position of the robot. I simulated my robot in the  ",{"type":18,"tag":2145,"props":5850,"children":5851},{},[5852],{"type":24,"value":5853},"for loop",{"type":24,"value":5855}," and calculate this error recursively.",{"type":18,"tag":821,"props":5857,"children":5860},{"className":5858,"code":5859,"language":826,"meta":8},[824],"error_x.append(ref_path[0]-current_x)\nerror_y.append(ref_path[1]-current_y)\nerror_yaw.append(ref_path[2]-current_yaw)\n",[5861],{"type":18,"tag":829,"props":5862,"children":5863},{},[5864],{"type":18,"tag":821,"props":5865,"children":5866},{"__ignoreMap":8},[5867,5892,5917],{"type":18,"tag":836,"props":5868,"children":5869},{"class":838,"line":839},[5870,5875,5879,5883,5887],{"type":18,"tag":836,"props":5871,"children":5872},{"class":849},[5873],{"type":24,"value":5874},"error_x.append(ref_path[",{"type":18,"tag":836,"props":5876,"children":5877},{"class":901},[5878],{"type":24,"value":1138},{"type":18,"tag":836,"props":5880,"children":5881},{"class":849},[5882],{"type":24,"value":1143},{"type":18,"tag":836,"props":5884,"children":5885},{"class":843},[5886],{"type":24,"value":2536},{"type":18,"tag":836,"props":5888,"children":5889},{"class":849},[5890],{"type":24,"value":5891},"current_x)\n",{"type":18,"tag":836,"props":5893,"children":5894},{"class":838,"line":555},[5895,5900,5904,5908,5912],{"type":18,"tag":836,"props":5896,"children":5897},{"class":849},[5898],{"type":24,"value":5899},"error_y.append(ref_path[",{"type":18,"tag":836,"props":5901,"children":5902},{"class":901},[5903],{"type":24,"value":1209},{"type":18,"tag":836,"props":5905,"children":5906},{"class":849},[5907],{"type":24,"value":1143},{"type":18,"tag":836,"props":5909,"children":5910},{"class":843},[5911],{"type":24,"value":2536},{"type":18,"tag":836,"props":5913,"children":5914},{"class":849},[5915],{"type":24,"value":5916},"current_y)\n",{"type":18,"tag":836,"props":5918,"children":5919},{"class":838,"line":560},[5920,5925,5929,5933,5937],{"type":18,"tag":836,"props":5921,"children":5922},{"class":849},[5923],{"type":24,"value":5924},"error_yaw.append(ref_path[",{"type":18,"tag":836,"props":5926,"children":5927},{"class":901},[5928],{"type":24,"value":1158},{"type":18,"tag":836,"props":5930,"children":5931},{"class":849},[5932],{"type":24,"value":1143},{"type":18,"tag":836,"props":5934,"children":5935},{"class":843},[5936],{"type":24,"value":2536},{"type":18,"tag":836,"props":5938,"children":5939},{"class":849},[5940],{"type":24,"value":5941},"current_yaw)",{"type":18,"tag":27,"props":5943,"children":5944},{},[5945],{"type":24,"value":5946},"Then, let's apply PID",{"type":18,"tag":821,"props":5948,"children":5951},{"className":5949,"code":5950,"language":826,"meta":8},[824],"output_vx = pid_controller_x.calculate_pid(error_x)\noutput_vy = pid_controller_y.calculate_pid(error_y)\noutput_omega = pid_controller_yaw.calculate_pid(error_yaw)\n",[5952],{"type":18,"tag":829,"props":5953,"children":5954},{},[5955],{"type":18,"tag":821,"props":5956,"children":5957},{"__ignoreMap":8},[5958,5975,5992],{"type":18,"tag":836,"props":5959,"children":5960},{"class":838,"line":839},[5961,5966,5970],{"type":18,"tag":836,"props":5962,"children":5963},{"class":849},[5964],{"type":24,"value":5965},"output_vx ",{"type":18,"tag":836,"props":5967,"children":5968},{"class":843},[5969],{"type":24,"value":893},{"type":18,"tag":836,"props":5971,"children":5972},{"class":849},[5973],{"type":24,"value":5974}," pid_controller_x.calculate_pid(error_x)\n",{"type":18,"tag":836,"props":5976,"children":5977},{"class":838,"line":555},[5978,5983,5987],{"type":18,"tag":836,"props":5979,"children":5980},{"class":849},[5981],{"type":24,"value":5982},"output_vy ",{"type":18,"tag":836,"props":5984,"children":5985},{"class":843},[5986],{"type":24,"value":893},{"type":18,"tag":836,"props":5988,"children":5989},{"class":849},[5990],{"type":24,"value":5991}," pid_controller_y.calculate_pid(error_y)\n",{"type":18,"tag":836,"props":5993,"children":5994},{"class":838,"line":560},[5995,6000,6004],{"type":18,"tag":836,"props":5996,"children":5997},{"class":849},[5998],{"type":24,"value":5999},"output_omega ",{"type":18,"tag":836,"props":6001,"children":6002},{"class":843},[6003],{"type":24,"value":893},{"type":18,"tag":836,"props":6005,"children":6006},{"class":849},[6007],{"type":24,"value":6008}," pid_controller_yaw.calculate_pid(error_yaw)",{"type":18,"tag":27,"props":6010,"children":6011},{},[6012],{"type":24,"value":6013},"We will also need to update current position of the robot with the given optimal value from the PID controller.",{"type":18,"tag":821,"props":6015,"children":6018},{"className":6016,"code":6017,"language":826,"meta":8},[824],"x_next, y_next, yaw_next = diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) # Skip for omega we only look for x, y\ncurrent_x = x_next\ncurrent_y = y_next\ncurrent_yaw = yaw_next\n",[6019],{"type":18,"tag":829,"props":6020,"children":6021},{},[6022],{"type":18,"tag":821,"props":6023,"children":6024},{"__ignoreMap":8},[6025,6047,6064,6081],{"type":18,"tag":836,"props":6026,"children":6027},{"class":838,"line":839},[6028,6033,6037,6042],{"type":18,"tag":836,"props":6029,"children":6030},{"class":849},[6031],{"type":24,"value":6032},"x_next, y_next, yaw_next ",{"type":18,"tag":836,"props":6034,"children":6035},{"class":843},[6036],{"type":24,"value":893},{"type":18,"tag":836,"props":6038,"children":6039},{"class":849},[6040],{"type":24,"value":6041}," diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) ",{"type":18,"tag":836,"props":6043,"children":6044},{"class":876},[6045],{"type":24,"value":6046},"# Skip for omega we only look for x, y\n",{"type":18,"tag":836,"props":6048,"children":6049},{"class":838,"line":555},[6050,6055,6059],{"type":18,"tag":836,"props":6051,"children":6052},{"class":849},[6053],{"type":24,"value":6054},"current_x ",{"type":18,"tag":836,"props":6056,"children":6057},{"class":843},[6058],{"type":24,"value":893},{"type":18,"tag":836,"props":6060,"children":6061},{"class":849},[6062],{"type":24,"value":6063}," x_next\n",{"type":18,"tag":836,"props":6065,"children":6066},{"class":838,"line":560},[6067,6072,6076],{"type":18,"tag":836,"props":6068,"children":6069},{"class":849},[6070],{"type":24,"value":6071},"current_y ",{"type":18,"tag":836,"props":6073,"children":6074},{"class":843},[6075],{"type":24,"value":893},{"type":18,"tag":836,"props":6077,"children":6078},{"class":849},[6079],{"type":24,"value":6080}," y_next\n",{"type":18,"tag":836,"props":6082,"children":6083},{"class":838,"line":882},[6084,6089,6093],{"type":18,"tag":836,"props":6085,"children":6086},{"class":849},[6087],{"type":24,"value":6088},"current_yaw ",{"type":18,"tag":836,"props":6090,"children":6091},{"class":843},[6092],{"type":24,"value":893},{"type":18,"tag":836,"props":6094,"children":6095},{"class":849},[6096],{"type":24,"value":6097}," yaw_next",{"type":18,"tag":27,"props":6099,"children":6100},{},[6101,6103,6108],{"type":24,"value":6102},"I use ",{"type":18,"tag":2145,"props":6104,"children":6105},{},[6106],{"type":24,"value":6107},"matplotlib",{"type":24,"value":6109}," library to simulate my robot.",{"type":18,"tag":821,"props":6111,"children":6114},{"className":6112,"code":6113,"language":826,"meta":8},[824],"plt.clf()\nplt.gcf().canvas.mpl_connect('key_release_event',\n            lambda event: [exit(0) if event.key == 'escape' else None])\nplot_arrow(current_x, current_y, current_yaw)\nplt.plot(5, 5)\nplt.plot(ref_path[0], ref_path[1], marker=\"x\", color=\"blue\", label=\"Input Trajectory\")\nplt.axis(\"equal\")\nplt.grid(True)\nplt.legend()\nplt.pause(0.0001)\n",[6115],{"type":18,"tag":829,"props":6116,"children":6117},{},[6118],{"type":18,"tag":821,"props":6119,"children":6120},{"__ignoreMap":8},[6121,6129,6146,6226,6234,6259,6338,6355,6372,6380],{"type":18,"tag":836,"props":6122,"children":6123},{"class":838,"line":839},[6124],{"type":18,"tag":836,"props":6125,"children":6126},{"class":849},[6127],{"type":24,"value":6128},"plt.clf()\n",{"type":18,"tag":836,"props":6130,"children":6131},{"class":838,"line":555},[6132,6137,6142],{"type":18,"tag":836,"props":6133,"children":6134},{"class":849},[6135],{"type":24,"value":6136},"plt.gcf().canvas.mpl_connect(",{"type":18,"tag":836,"props":6138,"children":6139},{"class":2244},[6140],{"type":24,"value":6141},"'key_release_event'",{"type":18,"tag":836,"props":6143,"children":6144},{"class":849},[6145],{"type":24,"value":3065},{"type":18,"tag":836,"props":6147,"children":6148},{"class":838,"line":560},[6149,6153,6157,6162,6167,6172,6176,6180,6185,6190,6195,6199,6204,6208,6213,6217,6222],{"type":18,"tag":836,"props":6150,"children":6151},{"class":849},[6152],{"type":24,"value":4228},{"type":18,"tag":836,"props":6154,"children":6155},{"class":843},[6156],{"type":24,"value":1119},{"type":18,"tag":836,"props":6158,"children":6159},{"class":849},[6160],{"type":24,"value":6161}," event: [",{"type":18,"tag":836,"props":6163,"children":6164},{"class":901},[6165],{"type":24,"value":6166},"exit",{"type":18,"tag":836,"props":6168,"children":6169},{"class":849},[6170],{"type":24,"value":6171},"(",{"type":18,"tag":836,"props":6173,"children":6174},{"class":901},[6175],{"type":24,"value":1138},{"type":18,"tag":836,"props":6177,"children":6178},{"class":849},[6179],{"type":24,"value":1328},{"type":18,"tag":836,"props":6181,"children":6182},{"class":843},[6183],{"type":24,"value":6184},"if",{"type":18,"tag":836,"props":6186,"children":6187},{"class":849},[6188],{"type":24,"value":6189}," event.key ",{"type":18,"tag":836,"props":6191,"children":6192},{"class":843},[6193],{"type":24,"value":6194},"==",{"type":18,"tag":836,"props":6196,"children":6197},{"class":849},[6198],{"type":24,"value":898},{"type":18,"tag":836,"props":6200,"children":6201},{"class":2244},[6202],{"type":24,"value":6203},"'escape'",{"type":18,"tag":836,"props":6205,"children":6206},{"class":849},[6207],{"type":24,"value":898},{"type":18,"tag":836,"props":6209,"children":6210},{"class":843},[6211],{"type":24,"value":6212},"else",{"type":18,"tag":836,"props":6214,"children":6215},{"class":849},[6216],{"type":24,"value":898},{"type":18,"tag":836,"props":6218,"children":6219},{"class":901},[6220],{"type":24,"value":6221},"None",{"type":18,"tag":836,"props":6223,"children":6224},{"class":849},[6225],{"type":24,"value":1223},{"type":18,"tag":836,"props":6227,"children":6228},{"class":838,"line":882},[6229],{"type":18,"tag":836,"props":6230,"children":6231},{"class":849},[6232],{"type":24,"value":6233},"plot_arrow(current_x, current_y, current_yaw)\n",{"type":18,"tag":836,"props":6235,"children":6236},{"class":838,"line":907},[6237,6242,6247,6251,6255],{"type":18,"tag":836,"props":6238,"children":6239},{"class":849},[6240],{"type":24,"value":6241},"plt.plot(",{"type":18,"tag":836,"props":6243,"children":6244},{"class":901},[6245],{"type":24,"value":6246},"5",{"type":18,"tag":836,"props":6248,"children":6249},{"class":849},[6250],{"type":24,"value":2565},{"type":18,"tag":836,"props":6252,"children":6253},{"class":901},[6254],{"type":24,"value":6246},{"type":18,"tag":836,"props":6256,"children":6257},{"class":849},[6258],{"type":24,"value":2252},{"type":18,"tag":836,"props":6260,"children":6261},{"class":838,"line":916},[6262,6267,6271,6276,6280,6285,6290,6294,6298,6302,6307,6311,6316,6320,6325,6329,6334],{"type":18,"tag":836,"props":6263,"children":6264},{"class":849},[6265],{"type":24,"value":6266},"plt.plot(ref_path[",{"type":18,"tag":836,"props":6268,"children":6269},{"class":901},[6270],{"type":24,"value":1138},{"type":18,"tag":836,"props":6272,"children":6273},{"class":849},[6274],{"type":24,"value":6275},"], ref_path[",{"type":18,"tag":836,"props":6277,"children":6278},{"class":901},[6279],{"type":24,"value":1209},{"type":18,"tag":836,"props":6281,"children":6282},{"class":849},[6283],{"type":24,"value":6284},"], ",{"type":18,"tag":836,"props":6286,"children":6287},{"class":4231},[6288],{"type":24,"value":6289},"marker",{"type":18,"tag":836,"props":6291,"children":6292},{"class":843},[6293],{"type":24,"value":893},{"type":18,"tag":836,"props":6295,"children":6296},{"class":2244},[6297],{"type":24,"value":2247},{"type":18,"tag":836,"props":6299,"children":6300},{"class":849},[6301],{"type":24,"value":2565},{"type":18,"tag":836,"props":6303,"children":6304},{"class":4231},[6305],{"type":24,"value":6306},"color",{"type":18,"tag":836,"props":6308,"children":6309},{"class":843},[6310],{"type":24,"value":893},{"type":18,"tag":836,"props":6312,"children":6313},{"class":2244},[6314],{"type":24,"value":6315},"\"blue\"",{"type":18,"tag":836,"props":6317,"children":6318},{"class":849},[6319],{"type":24,"value":2565},{"type":18,"tag":836,"props":6321,"children":6322},{"class":4231},[6323],{"type":24,"value":6324},"label",{"type":18,"tag":836,"props":6326,"children":6327},{"class":843},[6328],{"type":24,"value":893},{"type":18,"tag":836,"props":6330,"children":6331},{"class":2244},[6332],{"type":24,"value":6333},"\"Input Trajectory\"",{"type":18,"tag":836,"props":6335,"children":6336},{"class":849},[6337],{"type":24,"value":2252},{"type":18,"tag":836,"props":6339,"children":6340},{"class":838,"line":938},[6341,6346,6351],{"type":18,"tag":836,"props":6342,"children":6343},{"class":849},[6344],{"type":24,"value":6345},"plt.axis(",{"type":18,"tag":836,"props":6347,"children":6348},{"class":2244},[6349],{"type":24,"value":6350},"\"equal\"",{"type":18,"tag":836,"props":6352,"children":6353},{"class":849},[6354],{"type":24,"value":2252},{"type":18,"tag":836,"props":6356,"children":6357},{"class":838,"line":947},[6358,6363,6368],{"type":18,"tag":836,"props":6359,"children":6360},{"class":849},[6361],{"type":24,"value":6362},"plt.grid(",{"type":18,"tag":836,"props":6364,"children":6365},{"class":901},[6366],{"type":24,"value":6367},"True",{"type":18,"tag":836,"props":6369,"children":6370},{"class":849},[6371],{"type":24,"value":2252},{"type":18,"tag":836,"props":6373,"children":6374},{"class":838,"line":969},[6375],{"type":18,"tag":836,"props":6376,"children":6377},{"class":849},[6378],{"type":24,"value":6379},"plt.legend()\n",{"type":18,"tag":836,"props":6381,"children":6382},{"class":838,"line":990},[6383,6388,6393],{"type":18,"tag":836,"props":6384,"children":6385},{"class":849},[6386],{"type":24,"value":6387},"plt.pause(",{"type":18,"tag":836,"props":6389,"children":6390},{"class":901},[6391],{"type":24,"value":6392},"0.0001",{"type":18,"tag":836,"props":6394,"children":6395},{"class":849},[6396],{"type":24,"value":6397},")",{"type":18,"tag":33,"props":6399,"children":6401},{"id":6400},"path-tracking",[6402],{"type":24,"value":6403},"Path Tracking",{"type":18,"tag":27,"props":6405,"children":6406},{},[6407,6409,6414,6416,6421],{"type":24,"value":6408},"The code is all way the same. The different is that, I fit the continuous point into the robot instead of fixed goal point. I use ",{"type":18,"tag":2145,"props":6410,"children":6411},{},[6412],{"type":24,"value":6413},"BeizerCurve",{"type":24,"value":6415}," function to generate ",{"type":18,"tag":170,"props":6417,"children":6418},{},[6419],{"type":24,"value":6420}," Spline Trajectory ",{"type":24,"value":6422}," for the robot.",{"type":18,"tag":27,"props":6424,"children":6425},{},[6426,6428,6437],{"type":24,"value":6427},"The full code is published open-source on my Github. Link here ",{"type":18,"tag":6429,"props":6430,"children":6434},"a",{"href":6431,"rel":6432},"https://github.com/SokhengDin/PathTracking/tree/main/PID",[6433],"nofollow",[6435],{"type":24,"value":6436},"Github",{"type":24,"value":6438},". Hit the star for me if you like my work 🙂.",{"type":18,"tag":33,"props":6440,"children":6441},{"id":4546},[6442],{"type":24,"value":4549},{"type":18,"tag":4556,"props":6444,"children":6446},{"className":6445},[4559,4560,4561],[6447,6448],{"type":24,"value":596},{"type":18,"tag":598,"props":6449,"children":6452},{"className":6450,"src":6451},[601],"/topics/robotics/nmpc/Figure_pid_p.png",[],{"type":18,"tag":612,"props":6454,"children":6456},{"className":6455},[68,615,616,617],[6457],{"type":24,"value":6458},"\n    PID Controller with position control on Differential Drive Robot\n",{"type":18,"tag":4556,"props":6460,"children":6462},{"className":6461},[4559,4560,4561],[6463,6464],{"type":24,"value":596},{"type":18,"tag":598,"props":6465,"children":6468},{"className":6466,"src":6467},[601],"/topics/robotics/nmpc/Figure_pid_t.png",[],{"type":18,"tag":612,"props":6470,"children":6472},{"className":6471},[68,615,616,617],[6473],{"type":24,"value":6474},"\n    PID Controller with path tracking control on Differential Drive Robot\n",{"type":18,"tag":19,"props":6476,"children":6477},{"id":4577},[6478],{"type":24,"value":6479},"In Conclusion",{"type":18,"tag":27,"props":6481,"children":6482},{},[6483],{"type":24,"value":6484},"In my opinion, the PID Controller is an excellent choice for most control system applications due to its simplicity and powerful capabilities in handling complex control challenges arising from various systems.",{"type":18,"tag":19,"props":6486,"children":6488},{"id":6487},"references",[6489],{"type":24,"value":6490},"References",{"type":18,"tag":284,"props":6492,"children":6493},{},[6494,6499,6504,6509],{"type":18,"tag":80,"props":6495,"children":6496},{},[6497],{"type":24,"value":6498},"BeizerCurve: https://en.wikipedia.org/wiki/Bézier_curve.",{"type":18,"tag":80,"props":6500,"children":6501},{},[6502],{"type":24,"value":6503},"PID Controller: Control Systems Engineering by Normal S. Nise.",{"type":18,"tag":80,"props":6505,"children":6506},{},[6507],{"type":24,"value":6508},"Beizer Path : https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning/BezierPath",{"type":18,"tag":80,"props":6510,"children":6511},{},[6512],{"type":24,"value":6513},"PID Lecture : https://www.cds.caltech.edu/~murray/courses/cds101/fa02/caltech/astrom-ch6.pdf",{"type":18,"tag":4611,"children":6515},[6516],{"type":24,"value":6517},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-806137{color:#B392F0;}\n.ct-533739{color:#79B8FF;}\n.ct-326375{color:#6A737D;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":555,"depth":555,"links":6519},[6520,6521,6522,6523,6524,6525,6530,6531],{"id":4639,"depth":555,"text":4642},{"id":4655,"depth":555,"text":4658},{"id":4666,"depth":555,"text":4669},{"id":4730,"depth":555,"text":4733},{"id":4791,"depth":555,"text":4794},{"id":5828,"depth":555,"text":5831,"children":6526},[6527,6528,6529],{"id":5834,"depth":560,"text":5837},{"id":6400,"depth":560,"text":6403},{"id":4546,"depth":560,"text":4549},{"id":4577,"depth":555,"text":6479},{"id":6487,"depth":555,"text":6490},"content:topics:robotics:pid-controller.md","topics/robotics/pid-controller.md",{"_path":6535,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6536,"description":6537,"slug":6538,"tag":6538,"img":6539,"body":6540,"_type":564,"_id":6772,"_source":566,"_file":6773,"_extension":568},"/topics/robotics/pure-pursuit","Pure Pursuit Controller","Introduction to Pure Pursuit Controller","pure-pursuit","/topics/robotics/nmpc/pure_pursuit.png",{"type":15,"children":6541,"toc":6765},[6542,6547,6557,6563,6568,6620,6626,6631,6683,6689,6694,6717,6722,6761],{"type":18,"tag":19,"props":6543,"children":6545},{"id":6544},"pure-pursuit-controller",[6546],{"type":24,"value":6536},{"type":18,"tag":27,"props":6548,"children":6549},{},[6550,6551,6555],{"type":24,"value":5261},{"type":18,"tag":170,"props":6552,"children":6553},{},[6554],{"type":24,"value":6536},{"type":24,"value":6556}," is a widely-used path-tracking algorithm in robotics and autonomous vehicle navigation. Its primary objective is to guide a vehicle or robot along a predefined path while ensuring precise path-following.",{"type":18,"tag":33,"props":6558,"children":6560},{"id":6559},"principle-of-operation",[6561],{"type":24,"value":6562},"Principle of Operation",{"type":18,"tag":27,"props":6564,"children":6565},{},[6566],{"type":24,"value":6567},"The operation of the Pure Pursuit Controller is based on a straightforward concept:",{"type":18,"tag":284,"props":6569,"children":6570},{},[6571,6581,6591,6601,6611],{"type":18,"tag":80,"props":6572,"children":6573},{},[6574,6579],{"type":18,"tag":170,"props":6575,"children":6576},{},[6577],{"type":24,"value":6578},"Path Definition",{"type":24,"value":6580},": The controller works with a defined path, often represented as a series of waypoints or a continuous curve, each associated with specific coordinates (x, y) and curvature information.",{"type":18,"tag":80,"props":6582,"children":6583},{},[6584,6589],{"type":18,"tag":170,"props":6585,"children":6586},{},[6587],{"type":24,"value":6588},"Target Point Selection",{"type":24,"value":6590},": The controller continuously selects a target point ahead of the vehicle. This target point is typically chosen as the point on the path that is a certain fixed distance (known as the \"lookahead distance\") in front of the vehicle.",{"type":18,"tag":80,"props":6592,"children":6593},{},[6594,6599],{"type":18,"tag":170,"props":6595,"children":6596},{},[6597],{"type":24,"value":6598},"Steering Command Calculation",{"type":24,"value":6600},": To navigate toward the target point, the controller calculates the steering command, often represented as the desired steering angle or curvature, required to reach the target point. Commonly, this involves computing the angle between the vehicle's current heading and the vector pointing from the current position to the target point.",{"type":18,"tag":80,"props":6602,"children":6603},{},[6604,6609],{"type":18,"tag":170,"props":6605,"children":6606},{},[6607],{"type":24,"value":6608},"Vehicle Control",{"type":24,"value":6610},": The calculated steering command is used to control the vehicle's steering mechanism (e.g., steering wheel or wheel angles) to guide it toward the target point.",{"type":18,"tag":80,"props":6612,"children":6613},{},[6614,6618],{"type":18,"tag":170,"props":6615,"children":6616},{},[6617],{"type":24,"value":349},{"type":24,"value":6619},": The process is iterative, with the controller continuously selecting new target points ahead as the vehicle advances along the path and adjusting its steering to reach them.",{"type":18,"tag":33,"props":6621,"children":6623},{"id":6622},"advantages",[6624],{"type":24,"value":6625},"Advantages",{"type":18,"tag":27,"props":6627,"children":6628},{},[6629],{"type":24,"value":6630},"The Pure Pursuit Controller offers several advantages:",{"type":18,"tag":76,"props":6632,"children":6633},{},[6634,6644,6653,6663,6673],{"type":18,"tag":80,"props":6635,"children":6636},{},[6637,6642],{"type":18,"tag":170,"props":6638,"children":6639},{},[6640],{"type":24,"value":6641},"Simplicity",{"type":24,"value":6643},": It is conceptually simple and easy to implement, making it suitable for a wide range of robotic and vehicle navigation applications.",{"type":18,"tag":80,"props":6645,"children":6646},{},[6647,6651],{"type":18,"tag":170,"props":6648,"children":6649},{},[6650],{"type":24,"value":6403},{"type":24,"value":6652},": The controller excels at accurate path tracking, even in complex environments with curves and turns.",{"type":18,"tag":80,"props":6654,"children":6655},{},[6656,6661],{"type":18,"tag":170,"props":6657,"children":6658},{},[6659],{"type":24,"value":6660},"Real-Time Operation",{"type":24,"value":6662},": It can operate in real-time, making it well-suited for dynamic environments where quick decision-making is crucial.",{"type":18,"tag":80,"props":6664,"children":6665},{},[6666,6671],{"type":18,"tag":170,"props":6667,"children":6668},{},[6669],{"type":24,"value":6670},"Adaptability",{"type":24,"value":6672},": The controller can adapt to changes in the path, such as deviations caused by obstacles or unexpected conditions, by continuously updating the target point.",{"type":18,"tag":80,"props":6674,"children":6675},{},[6676,6681],{"type":18,"tag":170,"props":6677,"children":6678},{},[6679],{"type":24,"value":6680},"Low Computational Overhead",{"type":24,"value":6682},": Compared to some other control algorithms, the Pure Pursuit Controller often has low computational requirements, which is advantageous for resource-constrained systems.",{"type":18,"tag":33,"props":6684,"children":6686},{"id":6685},"limitations",[6687],{"type":24,"value":6688},"Limitations",{"type":18,"tag":27,"props":6690,"children":6691},{},[6692],{"type":24,"value":6693},"Despite its advantages, the Pure Pursuit Controller has some limitations:",{"type":18,"tag":76,"props":6695,"children":6696},{},[6697,6707],{"type":18,"tag":80,"props":6698,"children":6699},{},[6700,6705],{"type":18,"tag":170,"props":6701,"children":6702},{},[6703],{"type":24,"value":6704},"Lookahead Distance Sensitivity",{"type":24,"value":6706},": Its performance can be sensitive to the choice of the lookahead distance, which requires careful tuning for optimal path tracking.",{"type":18,"tag":80,"props":6708,"children":6709},{},[6710,6715],{"type":18,"tag":170,"props":6711,"children":6712},{},[6713],{"type":24,"value":6714},"Non-Holonomic Assumption",{"type":24,"value":6716},": The controller assumes that the vehicle is non-holonomic, meaning it cannot move sideways. This assumption may not hold for certain types of vehicles, such as omnidirectional robots.",{"type":18,"tag":27,"props":6718,"children":6719},{},[6720],{"type":24,"value":6721},"In summary, the Pure Pursuit Controller is a straightforward yet effective algorithm for path tracking and navigation. Its ability to calculate a steering command based on a selected target point ahead of the vehicle makes it a valuable tool for applications ranging from autonomous cars to mobile robots.",{"type":18,"tag":821,"props":6723,"children":6728},{"className":6724,"code":6726,"language":6727,"meta":8},[6725],"language-js","console.log(\"Hello world\")\n\n","js",[6729],{"type":18,"tag":829,"props":6730,"children":6731},{},[6732],{"type":18,"tag":821,"props":6733,"children":6734},{"__ignoreMap":8},[6735],{"type":18,"tag":836,"props":6736,"children":6737},{"class":838,"line":839},[6738,6743,6748,6752,6757],{"type":18,"tag":836,"props":6739,"children":6740},{"class":849},[6741],{"type":24,"value":6742},"console.",{"type":18,"tag":836,"props":6744,"children":6745},{"class":4869},[6746],{"type":24,"value":6747},"log",{"type":18,"tag":836,"props":6749,"children":6750},{"class":849},[6751],{"type":24,"value":6171},{"type":18,"tag":836,"props":6753,"children":6754},{"class":2244},[6755],{"type":24,"value":6756},"\"Hello world\"",{"type":18,"tag":836,"props":6758,"children":6759},{"class":849},[6760],{"type":24,"value":6397},{"type":18,"tag":4611,"children":6762},[6763],{"type":24,"value":6764},".ct-767297{color:#E1E4E8;}\n.ct-806137{color:#B392F0;}\n.ct-244866{color:#9ECBFF;}",{"title":8,"searchDepth":555,"depth":555,"links":6766},[6767],{"id":6544,"depth":555,"text":6536,"children":6768},[6769,6770,6771],{"id":6559,"depth":560,"text":6562},{"id":6622,"depth":560,"text":6625},{"id":6685,"depth":560,"text":6688},"content:topics:robotics:pure-pursuit.md","topics/robotics/pure-pursuit.md",{"_path":6775,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6776,"description":6777,"slug":6778,"tag":6778,"body":6779,"_type":564,"_id":6980,"_source":566,"_file":6981,"_extension":568},"/topics/robotics/stanley-controller","Stanley Controller","Introduction to Stanley Controller","stanley",{"type":15,"children":6780,"toc":6973},[6781,6786,6796,6800,6805,6866,6870,6875,6926,6930,6935,6968],{"type":18,"tag":19,"props":6782,"children":6784},{"id":6783},"stanley-controller",[6785],{"type":24,"value":6776},{"type":18,"tag":27,"props":6787,"children":6788},{},[6789,6790,6794],{"type":24,"value":5261},{"type":18,"tag":170,"props":6791,"children":6792},{},[6793],{"type":24,"value":6776},{"type":24,"value":6795}," is an advanced path-tracking algorithm primarily used in the field of autonomous vehicle navigation. It is named after its creator, Professor John K. Hedrick, who developed it at Stanford University. The Stanley Controller is designed to enable a vehicle to follow a predefined path with high accuracy and stability.",{"type":18,"tag":33,"props":6797,"children":6798},{"id":6559},[6799],{"type":24,"value":6562},{"type":18,"tag":27,"props":6801,"children":6802},{},[6803],{"type":24,"value":6804},"The Stanley Controller operates based on a combination of control and feedback mechanisms:",{"type":18,"tag":284,"props":6806,"children":6807},{},[6808,6817,6827,6837,6847,6856],{"type":18,"tag":80,"props":6809,"children":6810},{},[6811,6815],{"type":18,"tag":170,"props":6812,"children":6813},{},[6814],{"type":24,"value":6578},{"type":24,"value":6816},": A predefined path is represented as a series of waypoints or a continuous curve. Each waypoint is associated with specific coordinates (x, y) and often includes additional information like desired speed and curvature.",{"type":18,"tag":80,"props":6818,"children":6819},{},[6820,6825],{"type":18,"tag":170,"props":6821,"children":6822},{},[6823],{"type":24,"value":6824},"Cross-Track Error (CTE) Calculation",{"type":24,"value":6826},": The controller calculates the cross-track error, which is the perpendicular distance between the vehicle's current position and the desired path. This error represents how far the vehicle has deviated from the path.",{"type":18,"tag":80,"props":6828,"children":6829},{},[6830,6835],{"type":18,"tag":170,"props":6831,"children":6832},{},[6833],{"type":24,"value":6834},"Heading Error Calculation",{"type":24,"value":6836},": The heading error, which is the difference between the vehicle's current heading (yaw angle) and the desired path's tangent angle at the nearest waypoint, is also computed.",{"type":18,"tag":80,"props":6838,"children":6839},{},[6840,6845],{"type":18,"tag":170,"props":6841,"children":6842},{},[6843],{"type":24,"value":6844},"Control Command Generation",{"type":24,"value":6846},": Using the calculated cross-track error and heading error, the Stanley Controller generates control commands. These commands typically include steering angle adjustments and throttle/brake control to minimize both errors.",{"type":18,"tag":80,"props":6848,"children":6849},{},[6850,6854],{"type":18,"tag":170,"props":6851,"children":6852},{},[6853],{"type":24,"value":6608},{"type":24,"value":6855},": The generated control commands are applied to the vehicle's steering and throttle/brake systems to guide it back to the desired path.",{"type":18,"tag":80,"props":6857,"children":6858},{},[6859,6864],{"type":18,"tag":170,"props":6860,"children":6861},{},[6862],{"type":24,"value":6863},"Iterative Feedback",{"type":24,"value":6865},": The process is iterative, with the controller continuously recalculating the cross-track and heading errors and adjusting the control commands to keep the vehicle on track.",{"type":18,"tag":33,"props":6867,"children":6868},{"id":6622},[6869],{"type":24,"value":6625},{"type":18,"tag":27,"props":6871,"children":6872},{},[6873],{"type":24,"value":6874},"The Stanley Controller offers several advantages:",{"type":18,"tag":76,"props":6876,"children":6877},{},[6878,6888,6898,6907,6916],{"type":18,"tag":80,"props":6879,"children":6880},{},[6881,6886],{"type":18,"tag":170,"props":6882,"children":6883},{},[6884],{"type":24,"value":6885},"High Accuracy",{"type":24,"value":6887},": It is known for its ability to achieve precise path-following, even in challenging conditions and complex road geometries.",{"type":18,"tag":80,"props":6889,"children":6890},{},[6891,6896],{"type":18,"tag":170,"props":6892,"children":6893},{},[6894],{"type":24,"value":6895},"Stability",{"type":24,"value":6897},": The controller's feedback mechanisms contribute to stable and smooth vehicle motion, reducing the risk of overshooting or oscillations.",{"type":18,"tag":80,"props":6899,"children":6900},{},[6901,6905],{"type":18,"tag":170,"props":6902,"children":6903},{},[6904],{"type":24,"value":6670},{"type":24,"value":6906},": The Stanley Controller can adapt to changes in the path, such as deviations caused by obstacles or dynamic road conditions.",{"type":18,"tag":80,"props":6908,"children":6909},{},[6910,6914],{"type":18,"tag":170,"props":6911,"children":6912},{},[6913],{"type":24,"value":6660},{"type":24,"value":6915},": It can operate in real-time, making it suitable for autonomous vehicle navigation in dynamic environments.",{"type":18,"tag":80,"props":6917,"children":6918},{},[6919,6924],{"type":18,"tag":170,"props":6920,"children":6921},{},[6922],{"type":24,"value":6923},"Versatility",{"type":24,"value":6925},": While primarily used in autonomous vehicles, the Stanley Controller's principles can be applied to various path-tracking tasks.",{"type":18,"tag":33,"props":6927,"children":6928},{"id":6685},[6929],{"type":24,"value":6688},{"type":18,"tag":27,"props":6931,"children":6932},{},[6933],{"type":24,"value":6934},"Despite its advantages, the Stanley Controller has some limitations:",{"type":18,"tag":76,"props":6936,"children":6937},{},[6938,6948,6958],{"type":18,"tag":80,"props":6939,"children":6940},{},[6941,6946],{"type":18,"tag":170,"props":6942,"children":6943},{},[6944],{"type":24,"value":6945},"Complexity",{"type":24,"value":6947},": Implementing the Stanley Controller can be more complex than some other control algorithms due to its mathematical calculations and tuning requirements.",{"type":18,"tag":80,"props":6949,"children":6950},{},[6951,6956],{"type":18,"tag":170,"props":6952,"children":6953},{},[6954],{"type":24,"value":6955},"Initialization",{"type":24,"value":6957},": It relies on accurate initialization, including knowledge of the vehicle's initial position and heading relative to the path.",{"type":18,"tag":80,"props":6959,"children":6960},{},[6961,6966],{"type":18,"tag":170,"props":6962,"children":6963},{},[6964],{"type":24,"value":6965},"Sensitivity to Noise",{"type":24,"value":6967},": Like many feedback-based controllers, the Stanley Controller can be sensitive to noisy sensor data and require robust sensor fusion techniques.",{"type":18,"tag":27,"props":6969,"children":6970},{},[6971],{"type":24,"value":6972},"In summary, the Stanley Controller is an advanced path-tracking algorithm known for its accuracy and stability, making it a valuable tool in the field of autonomous vehicle navigation. Proper implementation and tuning are essential to harness its full potential.",{"title":8,"searchDepth":555,"depth":555,"links":6974},[6975],{"id":6783,"depth":555,"text":6776,"children":6976},[6977,6978,6979],{"id":6559,"depth":560,"text":6562},{"id":6622,"depth":560,"text":6625},{"id":6685,"depth":560,"text":6688},"content:topics:robotics:stanley-controller.md","topics/robotics/stanley-controller.md",[6983,7129],{"_path":6984,"_dir":6985,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6986,"description":6987,"author":11,"slug":6988,"tag":6988,"img":6989,"body":6990,"_type":564,"_id":7127,"_source":566,"_file":7128,"_extension":568},"/topics/ai/cnn","ai","Convolutional Neural Network","How Convolution Neural Network works.","ai-cnn","/topics/ai/figure-dnn.png",{"type":15,"children":6991,"toc":7123},[6992,6999,7004,7010,7015,7045,7051,7056,7118],{"type":18,"tag":6993,"props":6994,"children":6996},"h1",{"id":6995},"convolutional-neural-network-cnn",[6997],{"type":24,"value":6998},"Convolutional Neural Network (CNN)",{"type":18,"tag":27,"props":7000,"children":7001},{},[7002],{"type":24,"value":7003},"Convolutional Neural Networks (CNNs) are a class of deep learning models primarily used for image and video analysis. They have revolutionized computer vision tasks such as image classification, object detection, and image segmentation. CNNs are designed to automatically learn hierarchical features from input data, which makes them particularly effective for tasks where the spatial relationships in data are essential, like recognizing patterns in images.",{"type":18,"tag":19,"props":7005,"children":7007},{"id":7006},"forward-propagation",[7008],{"type":24,"value":7009},"Forward Propagation",{"type":18,"tag":27,"props":7011,"children":7012},{},[7013],{"type":24,"value":7014},"In the forward propagation phase of a CNN, the input image is convolved with learnable filters, followed by non-linear activation functions like ReLU (Rectified Linear Unit). The output of this convolutional layer is then pooled to reduce dimensionality and make the network translation-invariant. These operations are typically represented mathematically as:",{"type":18,"tag":76,"props":7016,"children":7017},{},[7018,7027,7036],{"type":18,"tag":80,"props":7019,"children":7020},{},[7021,7023],{"type":24,"value":7022},"Convolution: ",{"type":18,"tag":84,"props":7024,"children":7026},{"latex-express":7025,"styles":87}," Z^{[l]} = (W^{[l]} * A^{[l-1]}) + b^{[l]}",[],{"type":18,"tag":80,"props":7028,"children":7029},{},[7030,7032],{"type":24,"value":7031},"Activation: ",{"type":18,"tag":84,"props":7033,"children":7035},{"latex-express":7034,"styles":87},"A^{[l]} = \\text{ReLU}(Z^{[l]})",[],{"type":18,"tag":80,"props":7037,"children":7038},{},[7039,7041],{"type":24,"value":7040},"Pooling: ",{"type":18,"tag":84,"props":7042,"children":7044},{"latex-express":7043,"styles":87},"A^{[l]} = \\text{MaxPooling}(A^{[l-1]})",[],{"type":18,"tag":19,"props":7046,"children":7048},{"id":7047},"backward-propagation",[7049],{"type":24,"value":7050},"Backward Propagation",{"type":18,"tag":27,"props":7052,"children":7053},{},[7054],{"type":24,"value":7055},"Backward propagation is the process of computing gradients with respect to the loss function, which allows the network to update its parameters during training. The gradients are computed using the chain rule of calculus and are used to adjust the convolutional filter weights and biases. The formulas for backward propagation are as follows:",{"type":18,"tag":76,"props":7057,"children":7058},{},[7059,7088,7103],{"type":18,"tag":80,"props":7060,"children":7061},{},[7062,7064],{"type":24,"value":7063},"Convolutional Layer Backpropagation:",{"type":18,"tag":76,"props":7065,"children":7066},{},[7067,7074,7081],{"type":18,"tag":80,"props":7068,"children":7069},{},[7070],{"type":18,"tag":84,"props":7071,"children":7073},{"latex-express":7072,"styles":87}," \\frac{\\partial \\mathcal{L}}{\\partial W^{[l]}} = dZ^{[l]} * A^{[l-1]T}  ",[],{"type":18,"tag":80,"props":7075,"children":7076},{},[7077],{"type":18,"tag":84,"props":7078,"children":7080},{"latex-express":7079,"styles":87}," \\frac{\\partial \\mathcal{L}}{\\partial b^{[l]}} = \\sum dZ^{[l]} ",[],{"type":18,"tag":80,"props":7082,"children":7083},{},[7084],{"type":18,"tag":84,"props":7085,"children":7087},{"latex-express":7086,"styles":87}," \\frac{\\partial \\mathcal{L}}{\\partial A^{[l-1]}} = W^{[l]T} * dZ^{[l]} ",[],{"type":18,"tag":80,"props":7089,"children":7090},{},[7091,7093],{"type":24,"value":7092},"Activation Layer Backpropagation (ReLU):",{"type":18,"tag":76,"props":7094,"children":7095},{},[7096],{"type":18,"tag":80,"props":7097,"children":7098},{},[7099],{"type":18,"tag":84,"props":7100,"children":7102},{"latex-express":7101,"styles":87}," \\frac{\\partial \\mathcal{L}}{\\partial Z^{[l]}} = dA^{[l]} \\odot \\text{ReLU}'(Z^{[l]})",[],{"type":18,"tag":80,"props":7104,"children":7105},{},[7106,7108],{"type":24,"value":7107},"Pooling Layer Backpropagation:",{"type":18,"tag":76,"props":7109,"children":7110},{},[7111],{"type":18,"tag":80,"props":7112,"children":7113},{},[7114],{"type":18,"tag":84,"props":7115,"children":7117},{"latex-express":7116,"styles":87}," \\frac{\\partial \\mathcal{L}}{\\partial A^{[l-1]}} = \\text{upsample}(dA^{[l]})",[],{"type":18,"tag":27,"props":7119,"children":7120},{},[7121],{"type":24,"value":7122},"These gradients are then used to update the network's parameters via optimization algorithms like gradient descent, enabling the CNN to learn and improve its performance over time through the training process.",{"title":8,"searchDepth":555,"depth":555,"links":7124},[7125,7126],{"id":7006,"depth":555,"text":7009},{"id":7047,"depth":555,"text":7050},"content:topics:ai:cnn.md","topics/ai/cnn.md",{"_path":7130,"_dir":6985,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":7131,"description":7132,"author":11,"slug":7133,"tag":7133,"img":574,"body":7134,"_type":564,"_id":8569,"_source":566,"_file":8570,"_extension":568},"/topics/ai/linear-mpc","Linear Model Predictive Control","Introduction to Linear Model Predictive Control","linear-mpc",{"type":15,"children":7135,"toc":8559},[7136,7140,7144,7158,7164,7168,7173,7178,7186,7191,7195,7199,7204,7208,7212,7245,7251,7255,7264,7269,7275,7290,7298,7303,7368,7373,7547,7559,7768,7778,8204,8221,8430,8435,8512,8524,8528,8533,8537,8555],{"type":18,"tag":19,"props":7137,"children":7138},{"id":35},[7139],{"type":24,"value":38},{"type":18,"tag":27,"props":7141,"children":7142},{},[7143],{"type":24,"value":43},{"type":18,"tag":586,"props":7145,"children":7147},{"className":7146},[589,590,591,592,593],[7148,7154],{"type":18,"tag":598,"props":7149,"children":7153},{"className":7150,"src":574,"width":7151,"height":7152},[601],"600px","300px",[],{"type":18,"tag":598,"props":7155,"children":7157},{"className":7156,"src":609,"width":7151,"height":7152},[601],[],{"type":18,"tag":612,"props":7159,"children":7161},{"className":7160},[68,615,616,617],[7162],{"type":24,"value":7163},"\n      A car with finite horizons prediction and set point prediction over finite horizons.\n",{"type":18,"tag":19,"props":7165,"children":7166},{"id":4655},[7167],{"type":24,"value":4658},{"type":18,"tag":27,"props":7169,"children":7170},{},[7171],{"type":24,"value":7172},"It works by solving the cost function that is produced by the sum of quadratic costs. For example, imagine you are riding a bike, and you want to get an ice cream because it is summer, and it tastes good 😆. So, to get the ice cream, you need to grab your bike and ride it to the mart to buy one. What does it take to get you from your home to the mart store? Of course, it must be the energy produced by your muscles to pedal the bike and move. Another way to think about it is the cost of how the system would react to the desired position or point that you want it to reach. MPC have two types, they are Linear MPC and Nonlinear MPC. In this blog, we will only talk about Linear MPC.",{"type":18,"tag":19,"props":7174,"children":7175},{"id":7133},[7176],{"type":24,"value":7177},"Linear MPC",{"type":18,"tag":27,"props":7179,"children":7180},{},[7181,7183],{"type":24,"value":7182},"Linear MPC or Linear Model Predictive Control is an optimal control method that use with the system that it behavors linearly. It means that we can easily control this system with lost cost computation of the optimization and also ensure the lower risk of the system too!. ",{"type":18,"tag":56,"props":7184,"children":7185},{},[],{"type":18,"tag":27,"props":7187,"children":7188},{},[7189],{"type":24,"value":7190},"Here is the formulation of the linear discrete system.",{"type":18,"tag":84,"props":7192,"children":7194},{":dist-cond":800,":latex-express":7193,":styles":68}," \\begin{equation*} X_{k+1}=AX_{k}+BU_{k} \\end{equation*}",[],{"type":18,"tag":19,"props":7196,"children":7197},{"id":4666},[7198],{"type":24,"value":4669},{"type":18,"tag":27,"props":7200,"children":7201},{},[7202],{"type":24,"value":7203},"As I mentioned, this is quadratic cost. It consists of summation of all the cost that was produced over the number of horizontal prediction.",{"type":18,"tag":84,"props":7205,"children":7207},{"latex-express":7206,"styles":68},"J(x,u) = \\displaystyle\\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N}, U_{N})",[],{"type":18,"tag":27,"props":7209,"children":7210},{},[7211],{"type":24,"value":663},{"type":18,"tag":76,"props":7213,"children":7214},{},[7215,7224,7231,7238],{"type":18,"tag":80,"props":7216,"children":7217},{},[7218,7222],{"type":18,"tag":84,"props":7219,"children":7221},{"latex-express":672,"styles":7220},"inline-flex space-x-3",[],{"type":24,"value":7223}," is the state of the system. This shall be obtained from the optimiztion problem",{"type":18,"tag":80,"props":7225,"children":7226},{},[7227,7230],{"type":18,"tag":84,"props":7228,"children":7229},{"latex-express":681,"styles":7220},[],{"type":24,"value":684},{"type":18,"tag":80,"props":7232,"children":7233},{},[7234,7237],{"type":18,"tag":84,"props":7235,"children":7236},{"latex-express":690,"styles":7220},[],{"type":24,"value":693},{"type":18,"tag":80,"props":7239,"children":7240},{},[7241,7244],{"type":18,"tag":84,"props":7242,"children":7243},{"latex-express":699,"styles":7220},[],{"type":24,"value":702},{"type":18,"tag":19,"props":7246,"children":7248},{"id":7247},"was-it-really-that-good",[7249],{"type":24,"value":7250},"Was it really that good ?",{"type":18,"tag":27,"props":7252,"children":7253},{},[7254],{"type":24,"value":4554},{"type":18,"tag":4556,"props":7256,"children":7258},{"className":7257},[4559,4560,4561],[7259,7260],{"type":24,"value":596},{"type":18,"tag":598,"props":7261,"children":7263},{"className":7262,"src":4567,"width":7151,"height":7152},[601],[],{"type":18,"tag":612,"props":7265,"children":7267},{"className":7266},[68,615,616,617],[7268],{"type":24,"value":4574},{"type":18,"tag":19,"props":7270,"children":7272},{"id":7271},"how-to-implement-it-in-python",[7273],{"type":24,"value":7274},"How to implement it in Python?",{"type":18,"tag":27,"props":7276,"children":7277},{},[7278,7280,7286,7287],{"type":24,"value":7279},"There are so many great way to implement this control everywhere with many mathematical optimization library!!!. But for the sake of god, I use Casadi and CVXPY which I think one of the most easy tool to use. I will draft some python code here, but I cannot include them all in this post. You can check it more on my github repository, I do open-source some of my work !!! ",{"type":18,"tag":6429,"props":7281,"children":7284},{"href":7282,"rel":7283},"https://github.com/SokhengDin/PathTracking",[6433],[7285],{"type":24,"value":6436},{"type":24,"value":176},{"type":18,"tag":56,"props":7288,"children":7289},{},[],{"type":18,"tag":27,"props":7291,"children":7292},{},[7293,7295],{"type":24,"value":7294},"I recommend you guys to have your own virtual enviroment, so I would be easier to work with any other related project of control system. ",{"type":18,"tag":56,"props":7296,"children":7297},{},[],{"type":18,"tag":27,"props":7299,"children":7300},{},[7301],{"type":24,"value":7302},"Make sure that you have install.",{"type":18,"tag":821,"props":7304,"children":7309},{"className":7305,"code":7307,"language":7308,"meta":8},[7306],"language-bash","pip3 install casadi && pip3 install cvxpy\n","bash",[7310],{"type":18,"tag":829,"props":7311,"children":7312},{},[7313],{"type":18,"tag":821,"props":7314,"children":7315},{"__ignoreMap":8},[7316],{"type":18,"tag":836,"props":7317,"children":7318},{"class":838,"line":839},[7319,7324,7328,7333,7337,7342,7347,7351,7355,7359,7363],{"type":18,"tag":836,"props":7320,"children":7321},{"class":4869},[7322],{"type":24,"value":7323},"pip3",{"type":18,"tag":836,"props":7325,"children":7326},{"class":849},[7327],{"type":24,"value":898},{"type":18,"tag":836,"props":7329,"children":7330},{"class":2244},[7331],{"type":24,"value":7332},"install",{"type":18,"tag":836,"props":7334,"children":7335},{"class":849},[7336],{"type":24,"value":898},{"type":18,"tag":836,"props":7338,"children":7339},{"class":2244},[7340],{"type":24,"value":7341},"casadi",{"type":18,"tag":836,"props":7343,"children":7344},{"class":849},[7345],{"type":24,"value":7346}," && ",{"type":18,"tag":836,"props":7348,"children":7349},{"class":4869},[7350],{"type":24,"value":7323},{"type":18,"tag":836,"props":7352,"children":7353},{"class":849},[7354],{"type":24,"value":898},{"type":18,"tag":836,"props":7356,"children":7357},{"class":2244},[7358],{"type":24,"value":7332},{"type":18,"tag":836,"props":7360,"children":7361},{"class":849},[7362],{"type":24,"value":898},{"type":18,"tag":836,"props":7364,"children":7365},{"class":2244},[7366],{"type":24,"value":7367},"cvxpy",{"type":18,"tag":27,"props":7369,"children":7370},{},[7371],{"type":24,"value":7372},"It is a good idea to write your robot model as a class object in Python, because it can help handle the update state of your system. For me, I am gonna use Numpy for mathematical operation.",{"type":18,"tag":821,"props":7374,"children":7377},{"className":7375,"code":7376,"language":826,"meta":8},[824],"import numpy as np\n\nclass DifferentialDrive:\n\n    def forward_kinematic(self, yaw, v, omega):\n        vx = v * np.cos(yaw)\n        vy = v * np.sin(yaw)\n        vyaw = omega\n\n        return vx, vy, vyaw\n",[7378],{"type":18,"tag":829,"props":7379,"children":7380},{},[7381],{"type":18,"tag":821,"props":7382,"children":7383},{"__ignoreMap":8},[7384,7403,7410,7429,7436,7460,7485,7509,7524,7531],{"type":18,"tag":836,"props":7385,"children":7386},{"class":838,"line":839},[7387,7391,7395,7399],{"type":18,"tag":836,"props":7388,"children":7389},{"class":843},[7390],{"type":24,"value":846},{"type":18,"tag":836,"props":7392,"children":7393},{"class":849},[7394],{"type":24,"value":852},{"type":18,"tag":836,"props":7396,"children":7397},{"class":843},[7398],{"type":24,"value":857},{"type":18,"tag":836,"props":7400,"children":7401},{"class":849},[7402],{"type":24,"value":862},{"type":18,"tag":836,"props":7404,"children":7405},{"class":838,"line":555},[7406],{"type":18,"tag":836,"props":7407,"children":7408},{},[7409],{"type":24,"value":870},{"type":18,"tag":836,"props":7411,"children":7412},{"class":838,"line":560},[7413,7417,7421,7425],{"type":18,"tag":836,"props":7414,"children":7415},{"class":843},[7416],{"type":24,"value":4862},{"type":18,"tag":836,"props":7418,"children":7419},{"class":849},[7420],{"type":24,"value":898},{"type":18,"tag":836,"props":7422,"children":7423},{"class":4869},[7424],{"type":24,"value":4872},{"type":18,"tag":836,"props":7426,"children":7427},{"class":849},[7428],{"type":24,"value":4877},{"type":18,"tag":836,"props":7430,"children":7431},{"class":838,"line":882},[7432],{"type":18,"tag":836,"props":7433,"children":7434},{},[7435],{"type":24,"value":870},{"type":18,"tag":836,"props":7437,"children":7438},{"class":838,"line":907},[7439,7443,7447,7451,7455],{"type":18,"tag":836,"props":7440,"children":7441},{"class":849},[7442],{"type":24,"value":1674},{"type":18,"tag":836,"props":7444,"children":7445},{"class":843},[7446],{"type":24,"value":4889},{"type":18,"tag":836,"props":7448,"children":7449},{"class":849},[7450],{"type":24,"value":898},{"type":18,"tag":836,"props":7452,"children":7453},{"class":4869},[7454],{"type":24,"value":4983},{"type":18,"tag":836,"props":7456,"children":7457},{"class":849},[7458],{"type":24,"value":7459},"(self, yaw, v, omega):\n",{"type":18,"tag":836,"props":7461,"children":7462},{"class":838,"line":916},[7463,7467,7471,7476,7480],{"type":18,"tag":836,"props":7464,"children":7465},{"class":849},[7466],{"type":24,"value":4996},{"type":18,"tag":836,"props":7468,"children":7469},{"class":843},[7470],{"type":24,"value":893},{"type":18,"tag":836,"props":7472,"children":7473},{"class":849},[7474],{"type":24,"value":7475}," v ",{"type":18,"tag":836,"props":7477,"children":7478},{"class":843},[7479],{"type":24,"value":1148},{"type":18,"tag":836,"props":7481,"children":7482},{"class":849},[7483],{"type":24,"value":7484}," np.cos(yaw)\n",{"type":18,"tag":836,"props":7486,"children":7487},{"class":838,"line":938},[7488,7492,7496,7500,7504],{"type":18,"tag":836,"props":7489,"children":7490},{"class":849},[7491],{"type":24,"value":5022},{"type":18,"tag":836,"props":7493,"children":7494},{"class":843},[7495],{"type":24,"value":893},{"type":18,"tag":836,"props":7497,"children":7498},{"class":849},[7499],{"type":24,"value":7475},{"type":18,"tag":836,"props":7501,"children":7502},{"class":843},[7503],{"type":24,"value":1148},{"type":18,"tag":836,"props":7505,"children":7506},{"class":849},[7507],{"type":24,"value":7508}," np.sin(yaw)\n",{"type":18,"tag":836,"props":7510,"children":7511},{"class":838,"line":947},[7512,7516,7520],{"type":18,"tag":836,"props":7513,"children":7514},{"class":849},[7515],{"type":24,"value":5047},{"type":18,"tag":836,"props":7517,"children":7518},{"class":843},[7519],{"type":24,"value":893},{"type":18,"tag":836,"props":7521,"children":7522},{"class":849},[7523],{"type":24,"value":5056},{"type":18,"tag":836,"props":7525,"children":7526},{"class":838,"line":969},[7527],{"type":18,"tag":836,"props":7528,"children":7529},{},[7530],{"type":24,"value":870},{"type":18,"tag":836,"props":7532,"children":7533},{"class":838,"line":990},[7534,7538,7542],{"type":18,"tag":836,"props":7535,"children":7536},{"class":849},[7537],{"type":24,"value":4911},{"type":18,"tag":836,"props":7539,"children":7540},{"class":843},[7541],{"type":24,"value":5075},{"type":18,"tag":836,"props":7543,"children":7544},{"class":849},[7545],{"type":24,"value":7546}," vx, vy, vyaw",{"type":18,"tag":27,"props":7548,"children":7549},{},[7550,7552,7557],{"type":24,"value":7551},"Next add this update state function into our ",{"type":18,"tag":170,"props":7553,"children":7554},{},[7555],{"type":24,"value":7556},"DifferentialDrive ",{"type":24,"value":7558}," class, by doing this we would have all the attribute of our robot system.",{"type":18,"tag":821,"props":7560,"children":7563},{"className":7561,"code":7562,"language":826,"meta":8},[824],"def update_state(self, x0, y0, yaw0, yaw, v, omega):\n\n  dx, dy, dyaw = self.robot_model.forward_kinematic(yaw, v, omega)\n\n  x_next = x0 + dx*self.dtau\n  y_next = y0 + dy*self.dtau\n  yaw_next = yaw0 + dyaw*self.dtau\n\n  return x_next, y_next, yaw_next\n",[7564],{"type":18,"tag":829,"props":7565,"children":7566},{},[7567],{"type":18,"tag":821,"props":7568,"children":7569},{"__ignoreMap":8},[7570,7591,7598,7623,7630,7669,7707,7745,7752],{"type":18,"tag":836,"props":7571,"children":7572},{"class":838,"line":839},[7573,7577,7581,7586],{"type":18,"tag":836,"props":7574,"children":7575},{"class":843},[7576],{"type":24,"value":4889},{"type":18,"tag":836,"props":7578,"children":7579},{"class":849},[7580],{"type":24,"value":898},{"type":18,"tag":836,"props":7582,"children":7583},{"class":4869},[7584],{"type":24,"value":7585},"update_state",{"type":18,"tag":836,"props":7587,"children":7588},{"class":849},[7589],{"type":24,"value":7590},"(self, x0, y0, yaw0, yaw, v, omega):\n",{"type":18,"tag":836,"props":7592,"children":7593},{"class":838,"line":555},[7594],{"type":18,"tag":836,"props":7595,"children":7596},{},[7597],{"type":24,"value":870},{"type":18,"tag":836,"props":7599,"children":7600},{"class":838,"line":560},[7601,7606,7610,7614,7618],{"type":18,"tag":836,"props":7602,"children":7603},{"class":849},[7604],{"type":24,"value":7605},"  dx, dy, dyaw ",{"type":18,"tag":836,"props":7607,"children":7608},{"class":843},[7609],{"type":24,"value":893},{"type":18,"tag":836,"props":7611,"children":7612},{"class":849},[7613],{"type":24,"value":898},{"type":18,"tag":836,"props":7615,"children":7616},{"class":901},[7617],{"type":24,"value":4916},{"type":18,"tag":836,"props":7619,"children":7620},{"class":849},[7621],{"type":24,"value":7622},".robot_model.forward_kinematic(yaw, v, omega)\n",{"type":18,"tag":836,"props":7624,"children":7625},{"class":838,"line":882},[7626],{"type":18,"tag":836,"props":7627,"children":7628},{},[7629],{"type":24,"value":870},{"type":18,"tag":836,"props":7631,"children":7632},{"class":838,"line":907},[7633,7638,7642,7647,7651,7656,7660,7664],{"type":18,"tag":836,"props":7634,"children":7635},{"class":849},[7636],{"type":24,"value":7637},"  x_next ",{"type":18,"tag":836,"props":7639,"children":7640},{"class":843},[7641],{"type":24,"value":893},{"type":18,"tag":836,"props":7643,"children":7644},{"class":849},[7645],{"type":24,"value":7646}," x0 ",{"type":18,"tag":836,"props":7648,"children":7649},{"class":843},[7650],{"type":24,"value":1305},{"type":18,"tag":836,"props":7652,"children":7653},{"class":849},[7654],{"type":24,"value":7655}," dx",{"type":18,"tag":836,"props":7657,"children":7658},{"class":843},[7659],{"type":24,"value":1148},{"type":18,"tag":836,"props":7661,"children":7662},{"class":901},[7663],{"type":24,"value":4916},{"type":18,"tag":836,"props":7665,"children":7666},{"class":849},[7667],{"type":24,"value":7668},".dtau\n",{"type":18,"tag":836,"props":7670,"children":7671},{"class":838,"line":916},[7672,7677,7681,7686,7690,7695,7699,7703],{"type":18,"tag":836,"props":7673,"children":7674},{"class":849},[7675],{"type":24,"value":7676},"  y_next ",{"type":18,"tag":836,"props":7678,"children":7679},{"class":843},[7680],{"type":24,"value":893},{"type":18,"tag":836,"props":7682,"children":7683},{"class":849},[7684],{"type":24,"value":7685}," y0 ",{"type":18,"tag":836,"props":7687,"children":7688},{"class":843},[7689],{"type":24,"value":1305},{"type":18,"tag":836,"props":7691,"children":7692},{"class":849},[7693],{"type":24,"value":7694}," dy",{"type":18,"tag":836,"props":7696,"children":7697},{"class":843},[7698],{"type":24,"value":1148},{"type":18,"tag":836,"props":7700,"children":7701},{"class":901},[7702],{"type":24,"value":4916},{"type":18,"tag":836,"props":7704,"children":7705},{"class":849},[7706],{"type":24,"value":7668},{"type":18,"tag":836,"props":7708,"children":7709},{"class":838,"line":938},[7710,7715,7719,7724,7728,7733,7737,7741],{"type":18,"tag":836,"props":7711,"children":7712},{"class":849},[7713],{"type":24,"value":7714},"  yaw_next ",{"type":18,"tag":836,"props":7716,"children":7717},{"class":843},[7718],{"type":24,"value":893},{"type":18,"tag":836,"props":7720,"children":7721},{"class":849},[7722],{"type":24,"value":7723}," yaw0 ",{"type":18,"tag":836,"props":7725,"children":7726},{"class":843},[7727],{"type":24,"value":1305},{"type":18,"tag":836,"props":7729,"children":7730},{"class":849},[7731],{"type":24,"value":7732}," dyaw",{"type":18,"tag":836,"props":7734,"children":7735},{"class":843},[7736],{"type":24,"value":1148},{"type":18,"tag":836,"props":7738,"children":7739},{"class":901},[7740],{"type":24,"value":4916},{"type":18,"tag":836,"props":7742,"children":7743},{"class":849},[7744],{"type":24,"value":7668},{"type":18,"tag":836,"props":7746,"children":7747},{"class":838,"line":947},[7748],{"type":18,"tag":836,"props":7749,"children":7750},{},[7751],{"type":24,"value":870},{"type":18,"tag":836,"props":7753,"children":7754},{"class":838,"line":969},[7755,7760,7764],{"type":18,"tag":836,"props":7756,"children":7757},{"class":849},[7758],{"type":24,"value":7759},"  ",{"type":18,"tag":836,"props":7761,"children":7762},{"class":843},[7763],{"type":24,"value":5075},{"type":18,"tag":836,"props":7765,"children":7766},{"class":849},[7767],{"type":24,"value":5256},{"type":18,"tag":27,"props":7769,"children":7770},{},[7771,7773,7776],{"type":24,"value":7772},"How to define the quadratic cost in Python with CVXPY ? and set the constraint for your system ? ",{"type":18,"tag":56,"props":7774,"children":7775},{},[],{"type":24,"value":7777},"\nHere, how you would write it.",{"type":18,"tag":821,"props":7779,"children":7782},{"className":7780,"code":7781,"language":826,"meta":8},[824],"for t in range(T):\n    cost += cvxpy.quad_form(u[:, t], R)\n\n    if t != 0:\n        cost += cvxpy.quad_form(x_ref[:, t] - x[:, t], Q)\n\n    A, B, C = get_linear_model_matrix(x_ref, u_ref)\n    constraints += [x[:, t + 1] == A @ x[:, t] + B @ u[:, t] + C]\n\n    if t \u003C (T - 1):\n        cost += cvxpy.quad_form(u[:, t + 1] - u[:, t], Rd)\n        constraints += [cvxpy.abs(u[1, t + 1] - u[1, t]) \u003C= DESIRED_CONTROL]\n\ncost += cvxpy.quad_form(xref[:, T] - x[:, T], Q)\n",[7783],{"type":18,"tag":829,"props":7784,"children":7785},{},[7786],{"type":18,"tag":821,"props":7787,"children":7788},{"__ignoreMap":8},[7789,7818,7835,7842,7874,7900,7907,7924,8003,8010,8052,8093,8171,8178],{"type":18,"tag":836,"props":7790,"children":7791},{"class":838,"line":839},[7792,7796,7801,7805,7809,7813],{"type":18,"tag":836,"props":7793,"children":7794},{"class":843},[7795],{"type":24,"value":1240},{"type":18,"tag":836,"props":7797,"children":7798},{"class":849},[7799],{"type":24,"value":7800}," t ",{"type":18,"tag":836,"props":7802,"children":7803},{"class":843},[7804],{"type":24,"value":1250},{"type":18,"tag":836,"props":7806,"children":7807},{"class":849},[7808],{"type":24,"value":898},{"type":18,"tag":836,"props":7810,"children":7811},{"class":901},[7812],{"type":24,"value":1259},{"type":18,"tag":836,"props":7814,"children":7815},{"class":849},[7816],{"type":24,"value":7817},"(T):\n",{"type":18,"tag":836,"props":7819,"children":7820},{"class":838,"line":555},[7821,7826,7830],{"type":18,"tag":836,"props":7822,"children":7823},{"class":849},[7824],{"type":24,"value":7825},"    cost ",{"type":18,"tag":836,"props":7827,"children":7828},{"class":843},[7829],{"type":24,"value":1693},{"type":18,"tag":836,"props":7831,"children":7832},{"class":849},[7833],{"type":24,"value":7834}," cvxpy.quad_form(u[:, t], R)\n",{"type":18,"tag":836,"props":7836,"children":7837},{"class":838,"line":560},[7838],{"type":18,"tag":836,"props":7839,"children":7840},{},[7841],{"type":24,"value":870},{"type":18,"tag":836,"props":7843,"children":7844},{"class":838,"line":882},[7845,7849,7853,7857,7862,7866,7870],{"type":18,"tag":836,"props":7846,"children":7847},{"class":849},[7848],{"type":24,"value":1674},{"type":18,"tag":836,"props":7850,"children":7851},{"class":843},[7852],{"type":24,"value":6184},{"type":18,"tag":836,"props":7854,"children":7855},{"class":849},[7856],{"type":24,"value":7800},{"type":18,"tag":836,"props":7858,"children":7859},{"class":843},[7860],{"type":24,"value":7861},"!=",{"type":18,"tag":836,"props":7863,"children":7864},{"class":849},[7865],{"type":24,"value":898},{"type":18,"tag":836,"props":7867,"children":7868},{"class":901},[7869],{"type":24,"value":1138},{"type":18,"tag":836,"props":7871,"children":7872},{"class":849},[7873],{"type":24,"value":4877},{"type":18,"tag":836,"props":7875,"children":7876},{"class":838,"line":907},[7877,7882,7886,7891,7895],{"type":18,"tag":836,"props":7878,"children":7879},{"class":849},[7880],{"type":24,"value":7881},"        cost ",{"type":18,"tag":836,"props":7883,"children":7884},{"class":843},[7885],{"type":24,"value":1693},{"type":18,"tag":836,"props":7887,"children":7888},{"class":849},[7889],{"type":24,"value":7890}," cvxpy.quad_form(x_ref[:, t] ",{"type":18,"tag":836,"props":7892,"children":7893},{"class":843},[7894],{"type":24,"value":2536},{"type":18,"tag":836,"props":7896,"children":7897},{"class":849},[7898],{"type":24,"value":7899}," x[:, t], Q)\n",{"type":18,"tag":836,"props":7901,"children":7902},{"class":838,"line":916},[7903],{"type":18,"tag":836,"props":7904,"children":7905},{},[7906],{"type":24,"value":870},{"type":18,"tag":836,"props":7908,"children":7909},{"class":838,"line":938},[7910,7915,7919],{"type":18,"tag":836,"props":7911,"children":7912},{"class":849},[7913],{"type":24,"value":7914},"    A, B, C ",{"type":18,"tag":836,"props":7916,"children":7917},{"class":843},[7918],{"type":24,"value":893},{"type":18,"tag":836,"props":7920,"children":7921},{"class":849},[7922],{"type":24,"value":7923}," get_linear_model_matrix(x_ref, u_ref)\n",{"type":18,"tag":836,"props":7925,"children":7926},{"class":838,"line":947},[7927,7932,7936,7941,7945,7949,7953,7957,7961,7966,7971,7976,7980,7985,7989,7994,7998],{"type":18,"tag":836,"props":7928,"children":7929},{"class":849},[7930],{"type":24,"value":7931},"    constraints ",{"type":18,"tag":836,"props":7933,"children":7934},{"class":843},[7935],{"type":24,"value":1693},{"type":18,"tag":836,"props":7937,"children":7938},{"class":849},[7939],{"type":24,"value":7940}," [x[:, t ",{"type":18,"tag":836,"props":7942,"children":7943},{"class":843},[7944],{"type":24,"value":1305},{"type":18,"tag":836,"props":7946,"children":7947},{"class":849},[7948],{"type":24,"value":898},{"type":18,"tag":836,"props":7950,"children":7951},{"class":901},[7952],{"type":24,"value":1209},{"type":18,"tag":836,"props":7954,"children":7955},{"class":849},[7956],{"type":24,"value":1707},{"type":18,"tag":836,"props":7958,"children":7959},{"class":843},[7960],{"type":24,"value":6194},{"type":18,"tag":836,"props":7962,"children":7963},{"class":849},[7964],{"type":24,"value":7965}," A ",{"type":18,"tag":836,"props":7967,"children":7968},{"class":843},[7969],{"type":24,"value":7970},"@",{"type":18,"tag":836,"props":7972,"children":7973},{"class":849},[7974],{"type":24,"value":7975}," x[:, t] ",{"type":18,"tag":836,"props":7977,"children":7978},{"class":843},[7979],{"type":24,"value":1305},{"type":18,"tag":836,"props":7981,"children":7982},{"class":849},[7983],{"type":24,"value":7984}," B ",{"type":18,"tag":836,"props":7986,"children":7987},{"class":843},[7988],{"type":24,"value":7970},{"type":18,"tag":836,"props":7990,"children":7991},{"class":849},[7992],{"type":24,"value":7993}," u[:, t] ",{"type":18,"tag":836,"props":7995,"children":7996},{"class":843},[7997],{"type":24,"value":1305},{"type":18,"tag":836,"props":7999,"children":8000},{"class":849},[8001],{"type":24,"value":8002}," C]\n",{"type":18,"tag":836,"props":8004,"children":8005},{"class":838,"line":969},[8006],{"type":18,"tag":836,"props":8007,"children":8008},{},[8009],{"type":24,"value":870},{"type":18,"tag":836,"props":8011,"children":8012},{"class":838,"line":990},[8013,8017,8021,8025,8030,8035,8039,8043,8047],{"type":18,"tag":836,"props":8014,"children":8015},{"class":849},[8016],{"type":24,"value":1674},{"type":18,"tag":836,"props":8018,"children":8019},{"class":843},[8020],{"type":24,"value":6184},{"type":18,"tag":836,"props":8022,"children":8023},{"class":849},[8024],{"type":24,"value":7800},{"type":18,"tag":836,"props":8026,"children":8027},{"class":843},[8028],{"type":24,"value":8029},"\u003C",{"type":18,"tag":836,"props":8031,"children":8032},{"class":849},[8033],{"type":24,"value":8034}," (T ",{"type":18,"tag":836,"props":8036,"children":8037},{"class":843},[8038],{"type":24,"value":2536},{"type":18,"tag":836,"props":8040,"children":8041},{"class":849},[8042],{"type":24,"value":898},{"type":18,"tag":836,"props":8044,"children":8045},{"class":901},[8046],{"type":24,"value":1209},{"type":18,"tag":836,"props":8048,"children":8049},{"class":849},[8050],{"type":24,"value":8051},"):\n",{"type":18,"tag":836,"props":8053,"children":8054},{"class":838,"line":1011},[8055,8059,8063,8068,8072,8076,8080,8084,8088],{"type":18,"tag":836,"props":8056,"children":8057},{"class":849},[8058],{"type":24,"value":7881},{"type":18,"tag":836,"props":8060,"children":8061},{"class":843},[8062],{"type":24,"value":1693},{"type":18,"tag":836,"props":8064,"children":8065},{"class":849},[8066],{"type":24,"value":8067}," cvxpy.quad_form(u[:, t ",{"type":18,"tag":836,"props":8069,"children":8070},{"class":843},[8071],{"type":24,"value":1305},{"type":18,"tag":836,"props":8073,"children":8074},{"class":849},[8075],{"type":24,"value":898},{"type":18,"tag":836,"props":8077,"children":8078},{"class":901},[8079],{"type":24,"value":1209},{"type":18,"tag":836,"props":8081,"children":8082},{"class":849},[8083],{"type":24,"value":1707},{"type":18,"tag":836,"props":8085,"children":8086},{"class":843},[8087],{"type":24,"value":2536},{"type":18,"tag":836,"props":8089,"children":8090},{"class":849},[8091],{"type":24,"value":8092}," u[:, t], Rd)\n",{"type":18,"tag":836,"props":8094,"children":8095},{"class":838,"line":1020},[8096,8101,8105,8110,8114,8119,8123,8127,8131,8135,8139,8144,8148,8153,8158,8162,8167],{"type":18,"tag":836,"props":8097,"children":8098},{"class":849},[8099],{"type":24,"value":8100},"        constraints ",{"type":18,"tag":836,"props":8102,"children":8103},{"class":843},[8104],{"type":24,"value":1693},{"type":18,"tag":836,"props":8106,"children":8107},{"class":849},[8108],{"type":24,"value":8109}," [cvxpy.abs(u[",{"type":18,"tag":836,"props":8111,"children":8112},{"class":901},[8113],{"type":24,"value":1209},{"type":18,"tag":836,"props":8115,"children":8116},{"class":849},[8117],{"type":24,"value":8118},", t ",{"type":18,"tag":836,"props":8120,"children":8121},{"class":843},[8122],{"type":24,"value":1305},{"type":18,"tag":836,"props":8124,"children":8125},{"class":849},[8126],{"type":24,"value":898},{"type":18,"tag":836,"props":8128,"children":8129},{"class":901},[8130],{"type":24,"value":1209},{"type":18,"tag":836,"props":8132,"children":8133},{"class":849},[8134],{"type":24,"value":1707},{"type":18,"tag":836,"props":8136,"children":8137},{"class":843},[8138],{"type":24,"value":2536},{"type":18,"tag":836,"props":8140,"children":8141},{"class":849},[8142],{"type":24,"value":8143}," u[",{"type":18,"tag":836,"props":8145,"children":8146},{"class":901},[8147],{"type":24,"value":1209},{"type":18,"tag":836,"props":8149,"children":8150},{"class":849},[8151],{"type":24,"value":8152},", t]) ",{"type":18,"tag":836,"props":8154,"children":8155},{"class":843},[8156],{"type":24,"value":8157},"\u003C=",{"type":18,"tag":836,"props":8159,"children":8160},{"class":849},[8161],{"type":24,"value":898},{"type":18,"tag":836,"props":8163,"children":8164},{"class":901},[8165],{"type":24,"value":8166},"DESIRED_CONTROL",{"type":18,"tag":836,"props":8168,"children":8169},{"class":849},[8170],{"type":24,"value":5552},{"type":18,"tag":836,"props":8172,"children":8173},{"class":838,"line":1051},[8174],{"type":18,"tag":836,"props":8175,"children":8176},{},[8177],{"type":24,"value":870},{"type":18,"tag":836,"props":8179,"children":8180},{"class":838,"line":1082},[8181,8186,8190,8195,8199],{"type":18,"tag":836,"props":8182,"children":8183},{"class":849},[8184],{"type":24,"value":8185},"cost ",{"type":18,"tag":836,"props":8187,"children":8188},{"class":843},[8189],{"type":24,"value":1693},{"type":18,"tag":836,"props":8191,"children":8192},{"class":849},[8193],{"type":24,"value":8194}," cvxpy.quad_form(xref[:, T] ",{"type":18,"tag":836,"props":8196,"children":8197},{"class":843},[8198],{"type":24,"value":2536},{"type":18,"tag":836,"props":8200,"children":8201},{"class":849},[8202],{"type":24,"value":8203}," x[:, T], Q)",{"type":18,"tag":27,"props":8205,"children":8206},{},[8207,8209,8214,8216,8219],{"type":24,"value":8208},"The function ",{"type":18,"tag":170,"props":8210,"children":8211},{},[8212],{"type":24,"value":8213}," get_linear_model_matrix ",{"type":24,"value":8215}," would return the linearized model as the shown as the formula above. ",{"type":18,"tag":56,"props":8217,"children":8218},{},[],{"type":24,"value":8220},"\nWe can set more constraint by adding",{"type":18,"tag":821,"props":8222,"children":8225},{"className":8223,"code":8224,"language":826,"meta":8},[824],"  constraints += [x[:, 0] == x0]\n  constraints += [x[2, :] \u003C= MAX_SPEED]\n  constraints += [x[2, :] >= MIN_SPEED]\n  constraints += [cvxpy.abs(u[0, :]) \u003C= MAX_ACCEL]\n  constraints += [cvxpy.abs(u[1, :]) \u003C= MAX_STEER]\n",[8226],{"type":18,"tag":829,"props":8227,"children":8228},{},[8229],{"type":18,"tag":821,"props":8230,"children":8231},{"__ignoreMap":8},[8232,8266,8308,8349,8390],{"type":18,"tag":836,"props":8233,"children":8234},{"class":838,"line":839},[8235,8240,8244,8249,8253,8257,8261],{"type":18,"tag":836,"props":8236,"children":8237},{"class":849},[8238],{"type":24,"value":8239},"  constraints ",{"type":18,"tag":836,"props":8241,"children":8242},{"class":843},[8243],{"type":24,"value":1693},{"type":18,"tag":836,"props":8245,"children":8246},{"class":849},[8247],{"type":24,"value":8248}," [x[:, ",{"type":18,"tag":836,"props":8250,"children":8251},{"class":901},[8252],{"type":24,"value":1138},{"type":18,"tag":836,"props":8254,"children":8255},{"class":849},[8256],{"type":24,"value":1707},{"type":18,"tag":836,"props":8258,"children":8259},{"class":843},[8260],{"type":24,"value":6194},{"type":18,"tag":836,"props":8262,"children":8263},{"class":849},[8264],{"type":24,"value":8265}," x0]\n",{"type":18,"tag":836,"props":8267,"children":8268},{"class":838,"line":555},[8269,8273,8277,8282,8286,8291,8295,8299,8304],{"type":18,"tag":836,"props":8270,"children":8271},{"class":849},[8272],{"type":24,"value":8239},{"type":18,"tag":836,"props":8274,"children":8275},{"class":843},[8276],{"type":24,"value":1693},{"type":18,"tag":836,"props":8278,"children":8279},{"class":849},[8280],{"type":24,"value":8281}," [x[",{"type":18,"tag":836,"props":8283,"children":8284},{"class":901},[8285],{"type":24,"value":1158},{"type":18,"tag":836,"props":8287,"children":8288},{"class":849},[8289],{"type":24,"value":8290},", :] ",{"type":18,"tag":836,"props":8292,"children":8293},{"class":843},[8294],{"type":24,"value":8157},{"type":18,"tag":836,"props":8296,"children":8297},{"class":849},[8298],{"type":24,"value":898},{"type":18,"tag":836,"props":8300,"children":8301},{"class":901},[8302],{"type":24,"value":8303},"MAX_SPEED",{"type":18,"tag":836,"props":8305,"children":8306},{"class":849},[8307],{"type":24,"value":5552},{"type":18,"tag":836,"props":8309,"children":8310},{"class":838,"line":560},[8311,8315,8319,8323,8327,8331,8336,8340,8345],{"type":18,"tag":836,"props":8312,"children":8313},{"class":849},[8314],{"type":24,"value":8239},{"type":18,"tag":836,"props":8316,"children":8317},{"class":843},[8318],{"type":24,"value":1693},{"type":18,"tag":836,"props":8320,"children":8321},{"class":849},[8322],{"type":24,"value":8281},{"type":18,"tag":836,"props":8324,"children":8325},{"class":901},[8326],{"type":24,"value":1158},{"type":18,"tag":836,"props":8328,"children":8329},{"class":849},[8330],{"type":24,"value":8290},{"type":18,"tag":836,"props":8332,"children":8333},{"class":843},[8334],{"type":24,"value":8335},">=",{"type":18,"tag":836,"props":8337,"children":8338},{"class":849},[8339],{"type":24,"value":898},{"type":18,"tag":836,"props":8341,"children":8342},{"class":901},[8343],{"type":24,"value":8344},"MIN_SPEED",{"type":18,"tag":836,"props":8346,"children":8347},{"class":849},[8348],{"type":24,"value":5552},{"type":18,"tag":836,"props":8350,"children":8351},{"class":838,"line":882},[8352,8356,8360,8364,8368,8373,8377,8381,8386],{"type":18,"tag":836,"props":8353,"children":8354},{"class":849},[8355],{"type":24,"value":8239},{"type":18,"tag":836,"props":8357,"children":8358},{"class":843},[8359],{"type":24,"value":1693},{"type":18,"tag":836,"props":8361,"children":8362},{"class":849},[8363],{"type":24,"value":8109},{"type":18,"tag":836,"props":8365,"children":8366},{"class":901},[8367],{"type":24,"value":1138},{"type":18,"tag":836,"props":8369,"children":8370},{"class":849},[8371],{"type":24,"value":8372},", :]) ",{"type":18,"tag":836,"props":8374,"children":8375},{"class":843},[8376],{"type":24,"value":8157},{"type":18,"tag":836,"props":8378,"children":8379},{"class":849},[8380],{"type":24,"value":898},{"type":18,"tag":836,"props":8382,"children":8383},{"class":901},[8384],{"type":24,"value":8385},"MAX_ACCEL",{"type":18,"tag":836,"props":8387,"children":8388},{"class":849},[8389],{"type":24,"value":5552},{"type":18,"tag":836,"props":8391,"children":8392},{"class":838,"line":907},[8393,8397,8401,8405,8409,8413,8417,8421,8426],{"type":18,"tag":836,"props":8394,"children":8395},{"class":849},[8396],{"type":24,"value":8239},{"type":18,"tag":836,"props":8398,"children":8399},{"class":843},[8400],{"type":24,"value":1693},{"type":18,"tag":836,"props":8402,"children":8403},{"class":849},[8404],{"type":24,"value":8109},{"type":18,"tag":836,"props":8406,"children":8407},{"class":901},[8408],{"type":24,"value":1209},{"type":18,"tag":836,"props":8410,"children":8411},{"class":849},[8412],{"type":24,"value":8372},{"type":18,"tag":836,"props":8414,"children":8415},{"class":843},[8416],{"type":24,"value":8157},{"type":18,"tag":836,"props":8418,"children":8419},{"class":849},[8420],{"type":24,"value":898},{"type":18,"tag":836,"props":8422,"children":8423},{"class":901},[8424],{"type":24,"value":8425},"MAX_STEER",{"type":18,"tag":836,"props":8427,"children":8428},{"class":849},[8429],{"type":24,"value":1143},{"type":18,"tag":27,"props":8431,"children":8432},{},[8433],{"type":24,"value":8434},"Finally, we define the optimizer for our system by",{"type":18,"tag":821,"props":8436,"children":8439},{"className":8437,"code":8438,"language":826,"meta":8},[824],"prob = cvxpy.Problem(cvxpy.Minimize(cost), constraints)\nprob.solve(solver=cvxpy.ECOS, verbose=False)\n",[8440],{"type":18,"tag":829,"props":8441,"children":8442},{},[8443],{"type":18,"tag":821,"props":8444,"children":8445},{"__ignoreMap":8},[8446,8463],{"type":18,"tag":836,"props":8447,"children":8448},{"class":838,"line":839},[8449,8454,8458],{"type":18,"tag":836,"props":8450,"children":8451},{"class":849},[8452],{"type":24,"value":8453},"prob ",{"type":18,"tag":836,"props":8455,"children":8456},{"class":843},[8457],{"type":24,"value":893},{"type":18,"tag":836,"props":8459,"children":8460},{"class":849},[8461],{"type":24,"value":8462}," cvxpy.Problem(cvxpy.Minimize(cost), constraints)\n",{"type":18,"tag":836,"props":8464,"children":8465},{"class":838,"line":555},[8466,8471,8476,8480,8485,8490,8494,8499,8503,8508],{"type":18,"tag":836,"props":8467,"children":8468},{"class":849},[8469],{"type":24,"value":8470},"prob.solve(",{"type":18,"tag":836,"props":8472,"children":8473},{"class":4231},[8474],{"type":24,"value":8475},"solver",{"type":18,"tag":836,"props":8477,"children":8478},{"class":843},[8479],{"type":24,"value":893},{"type":18,"tag":836,"props":8481,"children":8482},{"class":849},[8483],{"type":24,"value":8484},"cvxpy.",{"type":18,"tag":836,"props":8486,"children":8487},{"class":901},[8488],{"type":24,"value":8489},"ECOS",{"type":18,"tag":836,"props":8491,"children":8492},{"class":849},[8493],{"type":24,"value":2565},{"type":18,"tag":836,"props":8495,"children":8496},{"class":4231},[8497],{"type":24,"value":8498},"verbose",{"type":18,"tag":836,"props":8500,"children":8501},{"class":843},[8502],{"type":24,"value":893},{"type":18,"tag":836,"props":8504,"children":8505},{"class":901},[8506],{"type":24,"value":8507},"False",{"type":18,"tag":836,"props":8509,"children":8510},{"class":849},[8511],{"type":24,"value":6397},{"type":18,"tag":27,"props":8513,"children":8514},{},[8515,8517],{"type":24,"value":8516},"For more detail about using CVXPY, here is the link ",{"type":18,"tag":6429,"props":8518,"children":8521},{"href":8519,"rel":8520},"https://www.cvxpy.org",[6433],[8522],{"type":24,"value":8523},"CVXPY",{"type":18,"tag":19,"props":8525,"children":8526},{"id":4577},[8527],{"type":24,"value":4580},{"type":18,"tag":27,"props":8529,"children":8530},{},[8531],{"type":24,"value":8532},"In my opinion, I think MPC is suitable for the control system, since it can provide the significant control input that was predicted over the finite future of time. This can ensure the safety of the system and also can provide a quick look or reaction to the control action of the system too. Next post, I will explain about Nonlinear Model Predictive Control by using Casadi framework for mathematical optimization.",{"type":18,"tag":19,"props":8534,"children":8535},{"id":4588},[8536],{"type":24,"value":4591},{"type":18,"tag":284,"props":8538,"children":8539},{},[8540,8545,8550],{"type":18,"tag":80,"props":8541,"children":8542},{},[8543],{"type":24,"value":8544},"PythonRobotics: https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathTracking/model_predictive_speed_and_steer_control",{"type":18,"tag":80,"props":8546,"children":8547},{},[8548],{"type":24,"value":8549},"Implementation of Linear Model Predictive Control: https://arxiv.org/abs/2109.11986",{"type":18,"tag":80,"props":8551,"children":8552},{},[8553],{"type":24,"value":8554},"CVXPY: https://www.cvxpy.org/",{"type":18,"tag":4611,"children":8556},[8557],{"type":24,"value":8558},".ct-806137{color:#B392F0;}\n.ct-767297{color:#E1E4E8;}\n.ct-244866{color:#9ECBFF;}\n.ct-857441{color:#F97583;}\n.ct-533739{color:#79B8FF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":555,"depth":555,"links":8560},[8561,8562,8563,8564,8565,8566,8567,8568],{"id":35,"depth":555,"text":38},{"id":4655,"depth":555,"text":4658},{"id":7133,"depth":555,"text":7177},{"id":4666,"depth":555,"text":4669},{"id":7247,"depth":555,"text":7250},{"id":7271,"depth":555,"text":7274},{"id":4577,"depth":555,"text":4580},{"id":4588,"depth":555,"text":4591},"content:topics:ai:linear-mpc.md","topics/ai/linear-mpc.md",1696322304397]