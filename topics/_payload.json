[{"data":1,"prerenderedAt":6441},["Reactive",2],{"topics/robotics":3},[4,4109,6035,6233],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":9,"description":10,"author":11,"slug":12,"tag":12,"img":13,"body":14,"_type":4104,"_id":4105,"_source":4106,"_file":4107,"_extension":4108},"/topics/robotics/nonlinear-mpc","robotics",false,"","Nonlinear Model Predictive Control","Introduction to Nonlinear Model Predictive Control","Din Sokheng","nonlinear-mpc","/topics/robotics/nmpc/predict_horizon.png",{"type":15,"children":16,"toc":4093},"root",[17,26,32,55,66,72,86,91,97,102,107,112,154,159,165,170,217,223,236,240,245,250,254,259,263,267,272,1516,1522,1527,1531,1546,1550,1555,1559,1565,1570,1574,1587,1591,1595,1599,1605,1618,1650,1655,2188,2193,2371,2380,2636,2641,3655,3660,4011,4017,4022,4037,4043,4049,4054,4060,4088],{"type":18,"tag":19,"props":20,"children":22},"element","h2",{"id":21},"what-is-model-predictive-control",[23],{"type":24,"value":25},"text","What is Model Predictive Control ?",{"type":18,"tag":27,"props":28,"children":29},"p",{},[30],{"type":24,"value":31},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":18,"tag":33,"props":34,"children":41},"div",{"className":35},[36,37,38,39,40],"grid","grid-cols-2","space-x-10","justify-center","items-center",[42,50],{"type":18,"tag":43,"props":44,"children":49},"img",{"className":45,"src":13,"width":47,"height":48},[46],"mx-auto","600px","300px",[],{"type":18,"tag":43,"props":51,"children":54},{"className":52,"src":53,"width":47,"height":48},[46],"/topics/robotics/nmpc/set_points.png",[],{"type":18,"tag":56,"props":57,"children":63},"figcaption",{"className":58},[59,60,61,62],"text-center","text-sm","text-neutral-600","dark:text-neutral-400",[64],{"type":24,"value":65},"\n      A car with finite horizons prediction and set point prediction over finite horizons.\n",{"type":18,"tag":19,"props":67,"children":69},{"id":68},"nonlinear-model-predictive-control",[70],{"type":24,"value":71},"Nonlinear Model Predictive Control ?",{"type":18,"tag":27,"props":73,"children":74},{},[75,77,81,83],{"type":24,"value":76},"Nonlinear Model Predictive Control has the same basic core of its control algorithms. The different is about the mathematical solving over the system. ",{"type":18,"tag":78,"props":79,"children":80},"br",{},[],{"type":24,"value":82},"\nIn the real-life application, most of the system certainly nonlinear and it's more complex than linear model. Linear systems are mostly time-invariant, meaning that the response of the system input is time-independent. Nonlinear systems are time-varying meaning that the response of the system to any input is time-dependent.",{"type":18,"tag":78,"props":84,"children":85},{},[],{"type":18,"tag":27,"props":87,"children":88},{},[89],{"type":24,"value":90},"The system model can be represent as state-space model",{"type":18,"tag":92,"props":93,"children":96},"math-render",{"latex-express":94,"styles":59,"dist-cond":95}," \\dot{X} = f(X,U) ","true",[],{"type":18,"tag":27,"props":98,"children":99},{},[100],{"type":24,"value":101},"Nonlinear Model Predictive Control also works by solving the quardratic cost subject to the nonlinear function over a future finite horizons. The quadractic cost can be define as",{"type":18,"tag":92,"props":103,"children":106},{"latex-express":104,"styles":59,"dist-cond":105},"J(x,u) = \\displaystyle\\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})","false",[],{"type":18,"tag":27,"props":108,"children":109},{},[110],{"type":24,"value":111},"Notation",{"type":18,"tag":113,"props":114,"children":115},"ul",{},[116,127,136,145],{"type":18,"tag":117,"props":118,"children":119},"li",{},[120,125],{"type":18,"tag":92,"props":121,"children":124},{"latex-express":122,"styles":123,"dist-cond":105},"X","inline-flex",[],{"type":24,"value":126}," is the state of the system. This shall be obtained from the optimiztion problem.",{"type":18,"tag":117,"props":128,"children":129},{},[130,134],{"type":18,"tag":92,"props":131,"children":133},{"latex-express":132,"styles":123,"dist-cond":105},"X_{ref}",[],{"type":24,"value":135}," is the reference state of the system or desired input state.",{"type":18,"tag":117,"props":137,"children":138},{},[139,143],{"type":18,"tag":92,"props":140,"children":142},{"latex-express":141,"styles":123,"dist-cond":105},"U",[],{"type":24,"value":144}," is the input control of the system. This is a solution obtained from the optimization problem.",{"type":18,"tag":117,"props":146,"children":147},{},[148,152],{"type":18,"tag":92,"props":149,"children":151},{"latex-express":150,"styles":123,"dist-cond":105},"U_{ref}",[],{"type":24,"value":153}," is the reference control of the system or desired input control.",{"type":18,"tag":27,"props":155,"children":156},{},[157],{"type":24,"value":158},"Rewrite the optimization of NMPC problem.",{"type":18,"tag":160,"props":161,"children":164},"math-render-b",{"latex-express":162,"styles":163,"dist-cond":95},"\n      \\begin{align*}\n            \\min_{u_{0}, u_{1}, ..., u_{N-1} } \\quad \\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}&Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})\\\\\n            \\text{subject to} \\quad & x_{k+1} = f(x_k, u_k) \\quad \\text{(System dynamics)} \\\\\n            & g(x_k, x_k) \\leq 0 \\quad \\text{(State constraints)} \\\\\n            & h(x_k, x_k) \\leq 0 \\quad \\text{(Input constraints)} \\\\\n            & p(x_k) \\leq 0 \\quad \\text{(Path constraints)} \\\\\n            & x_0=x(0)  \\quad \\text{(Initial condition)}\n      \\end{align*}\n            ","text-center -sm:mx-auto -md:mx-auto -sm:max-w-sm -md:max-w-md",[],{"type":18,"tag":27,"props":166,"children":167},{},[168],{"type":24,"value":169},"Which,",{"type":18,"tag":113,"props":171,"children":172},{},[173,182,191,200,208],{"type":18,"tag":117,"props":174,"children":175},{},[176,180],{"type":18,"tag":92,"props":177,"children":179},{"latex-express":178,"styles":123,"dist-cond":105},"f",[],{"type":24,"value":181}," is the system dynamics model.",{"type":18,"tag":117,"props":183,"children":184},{},[185,189],{"type":18,"tag":92,"props":186,"children":188},{"latex-express":187,"styles":123,"dist-cond":105},"g",[],{"type":24,"value":190}," is the state constraints of the system.",{"type":18,"tag":117,"props":192,"children":193},{},[194,198],{"type":18,"tag":92,"props":195,"children":197},{"latex-express":196,"styles":123,"dist-cond":105},"h",[],{"type":24,"value":199}," is the input constraints of the system.",{"type":18,"tag":117,"props":201,"children":202},{},[203,206],{"type":18,"tag":92,"props":204,"children":205},{"latex-express":27,"styles":123,"dist-cond":105},[],{"type":24,"value":207}," is the path constraint, it help to ensure the safety following path of our system.",{"type":18,"tag":117,"props":209,"children":210},{},[211,215],{"type":18,"tag":92,"props":212,"children":214},{"latex-express":213,"styles":123,"dist-cond":105},"\\phi(X_{N})",[],{"type":24,"value":216}," is the terminal cost of the system.",{"type":18,"tag":19,"props":218,"children":220},{"id":219},"discretize-the-system-model-with-runge-kutta-4th-order",[221],{"type":24,"value":222},"Discretize the system model with Runge-Kutta 4th order",{"type":18,"tag":27,"props":224,"children":225},{},[226,228,234],{"type":24,"value":227},"I will choose a simple system mode robot ",{"type":18,"tag":229,"props":230,"children":231},"strong",{},[232],{"type":24,"value":233}," DifferentialDrive ",{"type":24,"value":235},".\nThe forward kinematic equation",{"type":18,"tag":92,"props":237,"children":239},{"latex-express":238,"styles":59},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":241,"children":242},{},[243],{"type":24,"value":244},"State constraints are the restriction imposed on the state variable of the system. It helps our optimizer not to obtain the solution that is outside the boundary region and also ensure the system to always perform the minimal action control in any critical condition.",{"type":18,"tag":27,"props":246,"children":247},{},[248],{"type":24,"value":249},"We, then can do the approximation",{"type":18,"tag":160,"props":251,"children":253},{"latex-express":252,"styles":59,"dist-cond":95},"\n    \\begin{align*}\n        k_{1} &= f(x^{*}, u^{*}) \\\\\n        k_{2} &= f(x^{*}+k_{1}\\frac{dt}{2}, u^{*}) \\\\ \n        k_{3} &= f(x^{*}+k_{2}\\frac{dt}{2}, u^{*}) \\\\\n        k_{4} &= f(x^{*}+k_{3}dt, u^{*}) \\\\ \n        \\Rightarrow{x_{k+1} } &= x_{k} + (k_{1}+2k_{2}+2k_{3}+k_{4})\\frac{dt}{6}\n    \\end{align*}\n",[],{"type":18,"tag":27,"props":255,"children":256},{},[257],{"type":24,"value":258},"Let's evaluate it with our model.",{"type":18,"tag":160,"props":260,"children":262},{"latex-express":261,"styles":59},"\n      \\begin{align*}\n        k_{1} &= \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n        k_{2} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{3} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{4} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n    \\end{align*}\n      ",[],{"type":18,"tag":160,"props":264,"children":266},{"latex-express":265,"styles":59},"\n      \\Rightarrow{x_{k+1} } = x_{k} + \\left( \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} + \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix}   \\right) \\frac{dt}{6}\n",[],{"type":18,"tag":27,"props":268,"children":269},{},[270],{"type":24,"value":271},"How to implement it in Python ???",{"type":18,"tag":273,"props":274,"children":279},"code",{"className":275,"code":277,"language":278,"meta":8},[276],"language-python","import numpy as np\n\n## Define sampling time dt 100Hz\ndt = 0.01\n## Define the num steps for function approximation \nnum_steps = 100\n## Define initial states\nx = 0.0\ny = 0.0\nyaw = 0.0\n## Define input control\nv = 1.5 #m/s\nomega = 1.57 #rad/s\n## Define state represent model\n### define lambda function take variable x\nf = lambda x, u :  np.array([\n      [u[0]*np.cos(x[2])],\n      [u[0]*np.sin(x[2])],\n      [u[1]]\n])\n\nfor _ in range(num_steps):\n    k1 = f([x, y, yaw], [v, omega])\n    k2 = f([x + (dt / 2) * k1[0], y + (dt / 2) * k1[1], yaw + (dt / 2) * k1[2]], [v, omega])\n    k3 = f([x + (dt / 2) * k2[0], y + (dt / 2) * k2[1], yaw + (dt / 2) * k2[2]], [v, omega])\n    k4 = f([x + dt * k3[0], y + dt * k3[1], yaw + dt * k3[2]], [v, omega])\n\n    # Update state of the robot\n    x += (k1[0] + 2 * k2[0] + 2 * k3[0] + k4[0]) * dt / 6\n    y += (k1[1] + 2 * k2[1] + 2 * k3[1] + k4[1]) * dt / 6\n    yaw += (k1[2] + 2 * k2[2] + 2 * k3[2] + k4[2]) * dt / 6\n","python",[280],{"type":18,"tag":281,"props":282,"children":283},"pre",{},[284],{"type":18,"tag":273,"props":285,"children":286},{"__ignoreMap":8},[287,315,324,334,359,368,390,399,421,442,463,472,503,534,543,552,579,618,651,669,678,686,719,737,883,1021,1112,1120,1134,1265,1390],{"type":18,"tag":288,"props":289,"children":292},"span",{"class":290,"line":291},"line",1,[293,299,305,310],{"type":18,"tag":288,"props":294,"children":296},{"class":295},"ct-857441",[297],{"type":24,"value":298},"import",{"type":18,"tag":288,"props":300,"children":302},{"class":301},"ct-767297",[303],{"type":24,"value":304}," numpy ",{"type":18,"tag":288,"props":306,"children":307},{"class":295},[308],{"type":24,"value":309},"as",{"type":18,"tag":288,"props":311,"children":312},{"class":301},[313],{"type":24,"value":314}," np\n",{"type":18,"tag":288,"props":316,"children":318},{"class":290,"line":317},2,[319],{"type":18,"tag":288,"props":320,"children":321},{},[322],{"type":24,"value":323},"\n",{"type":18,"tag":288,"props":325,"children":327},{"class":290,"line":326},3,[328],{"type":18,"tag":288,"props":329,"children":331},{"class":330},"ct-326375",[332],{"type":24,"value":333},"## Define sampling time dt 100Hz\n",{"type":18,"tag":288,"props":335,"children":337},{"class":290,"line":336},4,[338,343,348,353],{"type":18,"tag":288,"props":339,"children":340},{"class":301},[341],{"type":24,"value":342},"dt ",{"type":18,"tag":288,"props":344,"children":345},{"class":295},[346],{"type":24,"value":347},"=",{"type":18,"tag":288,"props":349,"children":350},{"class":301},[351],{"type":24,"value":352}," ",{"type":18,"tag":288,"props":354,"children":356},{"class":355},"ct-533739",[357],{"type":24,"value":358},"0.01\n",{"type":18,"tag":288,"props":360,"children":362},{"class":290,"line":361},5,[363],{"type":18,"tag":288,"props":364,"children":365},{"class":330},[366],{"type":24,"value":367},"## Define the num steps for function approximation \n",{"type":18,"tag":288,"props":369,"children":371},{"class":290,"line":370},6,[372,377,381,385],{"type":18,"tag":288,"props":373,"children":374},{"class":301},[375],{"type":24,"value":376},"num_steps ",{"type":18,"tag":288,"props":378,"children":379},{"class":295},[380],{"type":24,"value":347},{"type":18,"tag":288,"props":382,"children":383},{"class":301},[384],{"type":24,"value":352},{"type":18,"tag":288,"props":386,"children":387},{"class":355},[388],{"type":24,"value":389},"100\n",{"type":18,"tag":288,"props":391,"children":393},{"class":290,"line":392},7,[394],{"type":18,"tag":288,"props":395,"children":396},{"class":330},[397],{"type":24,"value":398},"## Define initial states\n",{"type":18,"tag":288,"props":400,"children":402},{"class":290,"line":401},8,[403,408,412,416],{"type":18,"tag":288,"props":404,"children":405},{"class":301},[406],{"type":24,"value":407},"x ",{"type":18,"tag":288,"props":409,"children":410},{"class":295},[411],{"type":24,"value":347},{"type":18,"tag":288,"props":413,"children":414},{"class":301},[415],{"type":24,"value":352},{"type":18,"tag":288,"props":417,"children":418},{"class":355},[419],{"type":24,"value":420},"0.0\n",{"type":18,"tag":288,"props":422,"children":424},{"class":290,"line":423},9,[425,430,434,438],{"type":18,"tag":288,"props":426,"children":427},{"class":301},[428],{"type":24,"value":429},"y ",{"type":18,"tag":288,"props":431,"children":432},{"class":295},[433],{"type":24,"value":347},{"type":18,"tag":288,"props":435,"children":436},{"class":301},[437],{"type":24,"value":352},{"type":18,"tag":288,"props":439,"children":440},{"class":355},[441],{"type":24,"value":420},{"type":18,"tag":288,"props":443,"children":445},{"class":290,"line":444},10,[446,451,455,459],{"type":18,"tag":288,"props":447,"children":448},{"class":301},[449],{"type":24,"value":450},"yaw ",{"type":18,"tag":288,"props":452,"children":453},{"class":295},[454],{"type":24,"value":347},{"type":18,"tag":288,"props":456,"children":457},{"class":301},[458],{"type":24,"value":352},{"type":18,"tag":288,"props":460,"children":461},{"class":355},[462],{"type":24,"value":420},{"type":18,"tag":288,"props":464,"children":466},{"class":290,"line":465},11,[467],{"type":18,"tag":288,"props":468,"children":469},{"class":330},[470],{"type":24,"value":471},"## Define input control\n",{"type":18,"tag":288,"props":473,"children":475},{"class":290,"line":474},12,[476,481,485,489,494,498],{"type":18,"tag":288,"props":477,"children":478},{"class":301},[479],{"type":24,"value":480},"v ",{"type":18,"tag":288,"props":482,"children":483},{"class":295},[484],{"type":24,"value":347},{"type":18,"tag":288,"props":486,"children":487},{"class":301},[488],{"type":24,"value":352},{"type":18,"tag":288,"props":490,"children":491},{"class":355},[492],{"type":24,"value":493},"1.5",{"type":18,"tag":288,"props":495,"children":496},{"class":301},[497],{"type":24,"value":352},{"type":18,"tag":288,"props":499,"children":500},{"class":330},[501],{"type":24,"value":502},"#m/s\n",{"type":18,"tag":288,"props":504,"children":506},{"class":290,"line":505},13,[507,512,516,520,525,529],{"type":18,"tag":288,"props":508,"children":509},{"class":301},[510],{"type":24,"value":511},"omega ",{"type":18,"tag":288,"props":513,"children":514},{"class":295},[515],{"type":24,"value":347},{"type":18,"tag":288,"props":517,"children":518},{"class":301},[519],{"type":24,"value":352},{"type":18,"tag":288,"props":521,"children":522},{"class":355},[523],{"type":24,"value":524},"1.57",{"type":18,"tag":288,"props":526,"children":527},{"class":301},[528],{"type":24,"value":352},{"type":18,"tag":288,"props":530,"children":531},{"class":330},[532],{"type":24,"value":533},"#rad/s\n",{"type":18,"tag":288,"props":535,"children":537},{"class":290,"line":536},14,[538],{"type":18,"tag":288,"props":539,"children":540},{"class":330},[541],{"type":24,"value":542},"## Define state represent model\n",{"type":18,"tag":288,"props":544,"children":546},{"class":290,"line":545},15,[547],{"type":18,"tag":288,"props":548,"children":549},{"class":330},[550],{"type":24,"value":551},"### define lambda function take variable x\n",{"type":18,"tag":288,"props":553,"children":555},{"class":290,"line":554},16,[556,561,565,569,574],{"type":18,"tag":288,"props":557,"children":558},{"class":301},[559],{"type":24,"value":560},"f ",{"type":18,"tag":288,"props":562,"children":563},{"class":295},[564],{"type":24,"value":347},{"type":18,"tag":288,"props":566,"children":567},{"class":301},[568],{"type":24,"value":352},{"type":18,"tag":288,"props":570,"children":571},{"class":295},[572],{"type":24,"value":573},"lambda",{"type":18,"tag":288,"props":575,"children":576},{"class":301},[577],{"type":24,"value":578}," x, u :  np.array([\n",{"type":18,"tag":288,"props":580,"children":582},{"class":290,"line":581},17,[583,588,593,598,603,608,613],{"type":18,"tag":288,"props":584,"children":585},{"class":301},[586],{"type":24,"value":587},"      [u[",{"type":18,"tag":288,"props":589,"children":590},{"class":355},[591],{"type":24,"value":592},"0",{"type":18,"tag":288,"props":594,"children":595},{"class":301},[596],{"type":24,"value":597},"]",{"type":18,"tag":288,"props":599,"children":600},{"class":295},[601],{"type":24,"value":602},"*",{"type":18,"tag":288,"props":604,"children":605},{"class":301},[606],{"type":24,"value":607},"np.cos(x[",{"type":18,"tag":288,"props":609,"children":610},{"class":355},[611],{"type":24,"value":612},"2",{"type":18,"tag":288,"props":614,"children":615},{"class":301},[616],{"type":24,"value":617},"])],\n",{"type":18,"tag":288,"props":619,"children":621},{"class":290,"line":620},18,[622,626,630,634,638,643,647],{"type":18,"tag":288,"props":623,"children":624},{"class":301},[625],{"type":24,"value":587},{"type":18,"tag":288,"props":627,"children":628},{"class":355},[629],{"type":24,"value":592},{"type":18,"tag":288,"props":631,"children":632},{"class":301},[633],{"type":24,"value":597},{"type":18,"tag":288,"props":635,"children":636},{"class":295},[637],{"type":24,"value":602},{"type":18,"tag":288,"props":639,"children":640},{"class":301},[641],{"type":24,"value":642},"np.sin(x[",{"type":18,"tag":288,"props":644,"children":645},{"class":355},[646],{"type":24,"value":612},{"type":18,"tag":288,"props":648,"children":649},{"class":301},[650],{"type":24,"value":617},{"type":18,"tag":288,"props":652,"children":654},{"class":290,"line":653},19,[655,659,664],{"type":18,"tag":288,"props":656,"children":657},{"class":301},[658],{"type":24,"value":587},{"type":18,"tag":288,"props":660,"children":661},{"class":355},[662],{"type":24,"value":663},"1",{"type":18,"tag":288,"props":665,"children":666},{"class":301},[667],{"type":24,"value":668},"]]\n",{"type":18,"tag":288,"props":670,"children":672},{"class":290,"line":671},20,[673],{"type":18,"tag":288,"props":674,"children":675},{"class":301},[676],{"type":24,"value":677},"])\n",{"type":18,"tag":288,"props":679,"children":681},{"class":290,"line":680},21,[682],{"type":18,"tag":288,"props":683,"children":684},{},[685],{"type":24,"value":323},{"type":18,"tag":288,"props":687,"children":689},{"class":290,"line":688},22,[690,695,700,705,709,714],{"type":18,"tag":288,"props":691,"children":692},{"class":295},[693],{"type":24,"value":694},"for",{"type":18,"tag":288,"props":696,"children":697},{"class":301},[698],{"type":24,"value":699}," _ ",{"type":18,"tag":288,"props":701,"children":702},{"class":295},[703],{"type":24,"value":704},"in",{"type":18,"tag":288,"props":706,"children":707},{"class":301},[708],{"type":24,"value":352},{"type":18,"tag":288,"props":710,"children":711},{"class":355},[712],{"type":24,"value":713},"range",{"type":18,"tag":288,"props":715,"children":716},{"class":301},[717],{"type":24,"value":718},"(num_steps):\n",{"type":18,"tag":288,"props":720,"children":722},{"class":290,"line":721},23,[723,728,732],{"type":18,"tag":288,"props":724,"children":725},{"class":301},[726],{"type":24,"value":727},"    k1 ",{"type":18,"tag":288,"props":729,"children":730},{"class":295},[731],{"type":24,"value":347},{"type":18,"tag":288,"props":733,"children":734},{"class":301},[735],{"type":24,"value":736}," f([x, y, yaw], [v, omega])\n",{"type":18,"tag":288,"props":738,"children":740},{"class":290,"line":739},24,[741,746,750,755,760,765,770,774,778,783,787,792,796,801,805,809,813,817,821,825,829,833,837,842,846,850,854,858,862,866,870,874,878],{"type":18,"tag":288,"props":742,"children":743},{"class":301},[744],{"type":24,"value":745},"    k2 ",{"type":18,"tag":288,"props":747,"children":748},{"class":295},[749],{"type":24,"value":347},{"type":18,"tag":288,"props":751,"children":752},{"class":301},[753],{"type":24,"value":754}," f([x ",{"type":18,"tag":288,"props":756,"children":757},{"class":295},[758],{"type":24,"value":759},"+",{"type":18,"tag":288,"props":761,"children":762},{"class":301},[763],{"type":24,"value":764}," (dt ",{"type":18,"tag":288,"props":766,"children":767},{"class":295},[768],{"type":24,"value":769},"/",{"type":18,"tag":288,"props":771,"children":772},{"class":301},[773],{"type":24,"value":352},{"type":18,"tag":288,"props":775,"children":776},{"class":355},[777],{"type":24,"value":612},{"type":18,"tag":288,"props":779,"children":780},{"class":301},[781],{"type":24,"value":782},") ",{"type":18,"tag":288,"props":784,"children":785},{"class":295},[786],{"type":24,"value":602},{"type":18,"tag":288,"props":788,"children":789},{"class":301},[790],{"type":24,"value":791}," k1[",{"type":18,"tag":288,"props":793,"children":794},{"class":355},[795],{"type":24,"value":592},{"type":18,"tag":288,"props":797,"children":798},{"class":301},[799],{"type":24,"value":800},"], y ",{"type":18,"tag":288,"props":802,"children":803},{"class":295},[804],{"type":24,"value":759},{"type":18,"tag":288,"props":806,"children":807},{"class":301},[808],{"type":24,"value":764},{"type":18,"tag":288,"props":810,"children":811},{"class":295},[812],{"type":24,"value":769},{"type":18,"tag":288,"props":814,"children":815},{"class":301},[816],{"type":24,"value":352},{"type":18,"tag":288,"props":818,"children":819},{"class":355},[820],{"type":24,"value":612},{"type":18,"tag":288,"props":822,"children":823},{"class":301},[824],{"type":24,"value":782},{"type":18,"tag":288,"props":826,"children":827},{"class":295},[828],{"type":24,"value":602},{"type":18,"tag":288,"props":830,"children":831},{"class":301},[832],{"type":24,"value":791},{"type":18,"tag":288,"props":834,"children":835},{"class":355},[836],{"type":24,"value":663},{"type":18,"tag":288,"props":838,"children":839},{"class":301},[840],{"type":24,"value":841},"], yaw ",{"type":18,"tag":288,"props":843,"children":844},{"class":295},[845],{"type":24,"value":759},{"type":18,"tag":288,"props":847,"children":848},{"class":301},[849],{"type":24,"value":764},{"type":18,"tag":288,"props":851,"children":852},{"class":295},[853],{"type":24,"value":769},{"type":18,"tag":288,"props":855,"children":856},{"class":301},[857],{"type":24,"value":352},{"type":18,"tag":288,"props":859,"children":860},{"class":355},[861],{"type":24,"value":612},{"type":18,"tag":288,"props":863,"children":864},{"class":301},[865],{"type":24,"value":782},{"type":18,"tag":288,"props":867,"children":868},{"class":295},[869],{"type":24,"value":602},{"type":18,"tag":288,"props":871,"children":872},{"class":301},[873],{"type":24,"value":791},{"type":18,"tag":288,"props":875,"children":876},{"class":355},[877],{"type":24,"value":612},{"type":18,"tag":288,"props":879,"children":880},{"class":301},[881],{"type":24,"value":882},"]], [v, omega])\n",{"type":18,"tag":288,"props":884,"children":886},{"class":290,"line":885},25,[887,892,896,900,904,908,912,916,920,924,928,933,937,941,945,949,953,957,961,965,969,973,977,981,985,989,993,997,1001,1005,1009,1013,1017],{"type":18,"tag":288,"props":888,"children":889},{"class":301},[890],{"type":24,"value":891},"    k3 ",{"type":18,"tag":288,"props":893,"children":894},{"class":295},[895],{"type":24,"value":347},{"type":18,"tag":288,"props":897,"children":898},{"class":301},[899],{"type":24,"value":754},{"type":18,"tag":288,"props":901,"children":902},{"class":295},[903],{"type":24,"value":759},{"type":18,"tag":288,"props":905,"children":906},{"class":301},[907],{"type":24,"value":764},{"type":18,"tag":288,"props":909,"children":910},{"class":295},[911],{"type":24,"value":769},{"type":18,"tag":288,"props":913,"children":914},{"class":301},[915],{"type":24,"value":352},{"type":18,"tag":288,"props":917,"children":918},{"class":355},[919],{"type":24,"value":612},{"type":18,"tag":288,"props":921,"children":922},{"class":301},[923],{"type":24,"value":782},{"type":18,"tag":288,"props":925,"children":926},{"class":295},[927],{"type":24,"value":602},{"type":18,"tag":288,"props":929,"children":930},{"class":301},[931],{"type":24,"value":932}," k2[",{"type":18,"tag":288,"props":934,"children":935},{"class":355},[936],{"type":24,"value":592},{"type":18,"tag":288,"props":938,"children":939},{"class":301},[940],{"type":24,"value":800},{"type":18,"tag":288,"props":942,"children":943},{"class":295},[944],{"type":24,"value":759},{"type":18,"tag":288,"props":946,"children":947},{"class":301},[948],{"type":24,"value":764},{"type":18,"tag":288,"props":950,"children":951},{"class":295},[952],{"type":24,"value":769},{"type":18,"tag":288,"props":954,"children":955},{"class":301},[956],{"type":24,"value":352},{"type":18,"tag":288,"props":958,"children":959},{"class":355},[960],{"type":24,"value":612},{"type":18,"tag":288,"props":962,"children":963},{"class":301},[964],{"type":24,"value":782},{"type":18,"tag":288,"props":966,"children":967},{"class":295},[968],{"type":24,"value":602},{"type":18,"tag":288,"props":970,"children":971},{"class":301},[972],{"type":24,"value":932},{"type":18,"tag":288,"props":974,"children":975},{"class":355},[976],{"type":24,"value":663},{"type":18,"tag":288,"props":978,"children":979},{"class":301},[980],{"type":24,"value":841},{"type":18,"tag":288,"props":982,"children":983},{"class":295},[984],{"type":24,"value":759},{"type":18,"tag":288,"props":986,"children":987},{"class":301},[988],{"type":24,"value":764},{"type":18,"tag":288,"props":990,"children":991},{"class":295},[992],{"type":24,"value":769},{"type":18,"tag":288,"props":994,"children":995},{"class":301},[996],{"type":24,"value":352},{"type":18,"tag":288,"props":998,"children":999},{"class":355},[1000],{"type":24,"value":612},{"type":18,"tag":288,"props":1002,"children":1003},{"class":301},[1004],{"type":24,"value":782},{"type":18,"tag":288,"props":1006,"children":1007},{"class":295},[1008],{"type":24,"value":602},{"type":18,"tag":288,"props":1010,"children":1011},{"class":301},[1012],{"type":24,"value":932},{"type":18,"tag":288,"props":1014,"children":1015},{"class":355},[1016],{"type":24,"value":612},{"type":18,"tag":288,"props":1018,"children":1019},{"class":301},[1020],{"type":24,"value":882},{"type":18,"tag":288,"props":1022,"children":1024},{"class":290,"line":1023},26,[1025,1030,1034,1038,1042,1047,1051,1056,1060,1064,1068,1072,1076,1080,1084,1088,1092,1096,1100,1104,1108],{"type":18,"tag":288,"props":1026,"children":1027},{"class":301},[1028],{"type":24,"value":1029},"    k4 ",{"type":18,"tag":288,"props":1031,"children":1032},{"class":295},[1033],{"type":24,"value":347},{"type":18,"tag":288,"props":1035,"children":1036},{"class":301},[1037],{"type":24,"value":754},{"type":18,"tag":288,"props":1039,"children":1040},{"class":295},[1041],{"type":24,"value":759},{"type":18,"tag":288,"props":1043,"children":1044},{"class":301},[1045],{"type":24,"value":1046}," dt ",{"type":18,"tag":288,"props":1048,"children":1049},{"class":295},[1050],{"type":24,"value":602},{"type":18,"tag":288,"props":1052,"children":1053},{"class":301},[1054],{"type":24,"value":1055}," k3[",{"type":18,"tag":288,"props":1057,"children":1058},{"class":355},[1059],{"type":24,"value":592},{"type":18,"tag":288,"props":1061,"children":1062},{"class":301},[1063],{"type":24,"value":800},{"type":18,"tag":288,"props":1065,"children":1066},{"class":295},[1067],{"type":24,"value":759},{"type":18,"tag":288,"props":1069,"children":1070},{"class":301},[1071],{"type":24,"value":1046},{"type":18,"tag":288,"props":1073,"children":1074},{"class":295},[1075],{"type":24,"value":602},{"type":18,"tag":288,"props":1077,"children":1078},{"class":301},[1079],{"type":24,"value":1055},{"type":18,"tag":288,"props":1081,"children":1082},{"class":355},[1083],{"type":24,"value":663},{"type":18,"tag":288,"props":1085,"children":1086},{"class":301},[1087],{"type":24,"value":841},{"type":18,"tag":288,"props":1089,"children":1090},{"class":295},[1091],{"type":24,"value":759},{"type":18,"tag":288,"props":1093,"children":1094},{"class":301},[1095],{"type":24,"value":1046},{"type":18,"tag":288,"props":1097,"children":1098},{"class":295},[1099],{"type":24,"value":602},{"type":18,"tag":288,"props":1101,"children":1102},{"class":301},[1103],{"type":24,"value":1055},{"type":18,"tag":288,"props":1105,"children":1106},{"class":355},[1107],{"type":24,"value":612},{"type":18,"tag":288,"props":1109,"children":1110},{"class":301},[1111],{"type":24,"value":882},{"type":18,"tag":288,"props":1113,"children":1115},{"class":290,"line":1114},27,[1116],{"type":18,"tag":288,"props":1117,"children":1118},{},[1119],{"type":24,"value":323},{"type":18,"tag":288,"props":1121,"children":1123},{"class":290,"line":1122},28,[1124,1129],{"type":18,"tag":288,"props":1125,"children":1126},{"class":301},[1127],{"type":24,"value":1128},"    ",{"type":18,"tag":288,"props":1130,"children":1131},{"class":330},[1132],{"type":24,"value":1133},"# Update state of the robot\n",{"type":18,"tag":288,"props":1135,"children":1137},{"class":290,"line":1136},29,[1138,1143,1148,1153,1157,1162,1166,1170,1174,1178,1182,1186,1190,1194,1198,1202,1206,1210,1214,1218,1222,1226,1230,1235,1239,1244,1248,1252,1256,1260],{"type":18,"tag":288,"props":1139,"children":1140},{"class":301},[1141],{"type":24,"value":1142},"    x ",{"type":18,"tag":288,"props":1144,"children":1145},{"class":295},[1146],{"type":24,"value":1147},"+=",{"type":18,"tag":288,"props":1149,"children":1150},{"class":301},[1151],{"type":24,"value":1152}," (k1[",{"type":18,"tag":288,"props":1154,"children":1155},{"class":355},[1156],{"type":24,"value":592},{"type":18,"tag":288,"props":1158,"children":1159},{"class":301},[1160],{"type":24,"value":1161},"] ",{"type":18,"tag":288,"props":1163,"children":1164},{"class":295},[1165],{"type":24,"value":759},{"type":18,"tag":288,"props":1167,"children":1168},{"class":301},[1169],{"type":24,"value":352},{"type":18,"tag":288,"props":1171,"children":1172},{"class":355},[1173],{"type":24,"value":612},{"type":18,"tag":288,"props":1175,"children":1176},{"class":301},[1177],{"type":24,"value":352},{"type":18,"tag":288,"props":1179,"children":1180},{"class":295},[1181],{"type":24,"value":602},{"type":18,"tag":288,"props":1183,"children":1184},{"class":301},[1185],{"type":24,"value":932},{"type":18,"tag":288,"props":1187,"children":1188},{"class":355},[1189],{"type":24,"value":592},{"type":18,"tag":288,"props":1191,"children":1192},{"class":301},[1193],{"type":24,"value":1161},{"type":18,"tag":288,"props":1195,"children":1196},{"class":295},[1197],{"type":24,"value":759},{"type":18,"tag":288,"props":1199,"children":1200},{"class":301},[1201],{"type":24,"value":352},{"type":18,"tag":288,"props":1203,"children":1204},{"class":355},[1205],{"type":24,"value":612},{"type":18,"tag":288,"props":1207,"children":1208},{"class":301},[1209],{"type":24,"value":352},{"type":18,"tag":288,"props":1211,"children":1212},{"class":295},[1213],{"type":24,"value":602},{"type":18,"tag":288,"props":1215,"children":1216},{"class":301},[1217],{"type":24,"value":1055},{"type":18,"tag":288,"props":1219,"children":1220},{"class":355},[1221],{"type":24,"value":592},{"type":18,"tag":288,"props":1223,"children":1224},{"class":301},[1225],{"type":24,"value":1161},{"type":18,"tag":288,"props":1227,"children":1228},{"class":295},[1229],{"type":24,"value":759},{"type":18,"tag":288,"props":1231,"children":1232},{"class":301},[1233],{"type":24,"value":1234}," k4[",{"type":18,"tag":288,"props":1236,"children":1237},{"class":355},[1238],{"type":24,"value":592},{"type":18,"tag":288,"props":1240,"children":1241},{"class":301},[1242],{"type":24,"value":1243},"]) ",{"type":18,"tag":288,"props":1245,"children":1246},{"class":295},[1247],{"type":24,"value":602},{"type":18,"tag":288,"props":1249,"children":1250},{"class":301},[1251],{"type":24,"value":1046},{"type":18,"tag":288,"props":1253,"children":1254},{"class":295},[1255],{"type":24,"value":769},{"type":18,"tag":288,"props":1257,"children":1258},{"class":301},[1259],{"type":24,"value":352},{"type":18,"tag":288,"props":1261,"children":1262},{"class":355},[1263],{"type":24,"value":1264},"6\n",{"type":18,"tag":288,"props":1266,"children":1268},{"class":290,"line":1267},30,[1269,1274,1278,1282,1286,1290,1294,1298,1302,1306,1310,1314,1318,1322,1326,1330,1334,1338,1342,1346,1350,1354,1358,1362,1366,1370,1374,1378,1382,1386],{"type":18,"tag":288,"props":1270,"children":1271},{"class":301},[1272],{"type":24,"value":1273},"    y ",{"type":18,"tag":288,"props":1275,"children":1276},{"class":295},[1277],{"type":24,"value":1147},{"type":18,"tag":288,"props":1279,"children":1280},{"class":301},[1281],{"type":24,"value":1152},{"type":18,"tag":288,"props":1283,"children":1284},{"class":355},[1285],{"type":24,"value":663},{"type":18,"tag":288,"props":1287,"children":1288},{"class":301},[1289],{"type":24,"value":1161},{"type":18,"tag":288,"props":1291,"children":1292},{"class":295},[1293],{"type":24,"value":759},{"type":18,"tag":288,"props":1295,"children":1296},{"class":301},[1297],{"type":24,"value":352},{"type":18,"tag":288,"props":1299,"children":1300},{"class":355},[1301],{"type":24,"value":612},{"type":18,"tag":288,"props":1303,"children":1304},{"class":301},[1305],{"type":24,"value":352},{"type":18,"tag":288,"props":1307,"children":1308},{"class":295},[1309],{"type":24,"value":602},{"type":18,"tag":288,"props":1311,"children":1312},{"class":301},[1313],{"type":24,"value":932},{"type":18,"tag":288,"props":1315,"children":1316},{"class":355},[1317],{"type":24,"value":663},{"type":18,"tag":288,"props":1319,"children":1320},{"class":301},[1321],{"type":24,"value":1161},{"type":18,"tag":288,"props":1323,"children":1324},{"class":295},[1325],{"type":24,"value":759},{"type":18,"tag":288,"props":1327,"children":1328},{"class":301},[1329],{"type":24,"value":352},{"type":18,"tag":288,"props":1331,"children":1332},{"class":355},[1333],{"type":24,"value":612},{"type":18,"tag":288,"props":1335,"children":1336},{"class":301},[1337],{"type":24,"value":352},{"type":18,"tag":288,"props":1339,"children":1340},{"class":295},[1341],{"type":24,"value":602},{"type":18,"tag":288,"props":1343,"children":1344},{"class":301},[1345],{"type":24,"value":1055},{"type":18,"tag":288,"props":1347,"children":1348},{"class":355},[1349],{"type":24,"value":663},{"type":18,"tag":288,"props":1351,"children":1352},{"class":301},[1353],{"type":24,"value":1161},{"type":18,"tag":288,"props":1355,"children":1356},{"class":295},[1357],{"type":24,"value":759},{"type":18,"tag":288,"props":1359,"children":1360},{"class":301},[1361],{"type":24,"value":1234},{"type":18,"tag":288,"props":1363,"children":1364},{"class":355},[1365],{"type":24,"value":663},{"type":18,"tag":288,"props":1367,"children":1368},{"class":301},[1369],{"type":24,"value":1243},{"type":18,"tag":288,"props":1371,"children":1372},{"class":295},[1373],{"type":24,"value":602},{"type":18,"tag":288,"props":1375,"children":1376},{"class":301},[1377],{"type":24,"value":1046},{"type":18,"tag":288,"props":1379,"children":1380},{"class":295},[1381],{"type":24,"value":769},{"type":18,"tag":288,"props":1383,"children":1384},{"class":301},[1385],{"type":24,"value":352},{"type":18,"tag":288,"props":1387,"children":1388},{"class":355},[1389],{"type":24,"value":1264},{"type":18,"tag":288,"props":1391,"children":1393},{"class":290,"line":1392},31,[1394,1399,1403,1407,1411,1415,1419,1423,1427,1431,1435,1439,1443,1447,1451,1455,1459,1463,1467,1471,1475,1479,1483,1487,1491,1495,1499,1503,1507,1511],{"type":18,"tag":288,"props":1395,"children":1396},{"class":301},[1397],{"type":24,"value":1398},"    yaw ",{"type":18,"tag":288,"props":1400,"children":1401},{"class":295},[1402],{"type":24,"value":1147},{"type":18,"tag":288,"props":1404,"children":1405},{"class":301},[1406],{"type":24,"value":1152},{"type":18,"tag":288,"props":1408,"children":1409},{"class":355},[1410],{"type":24,"value":612},{"type":18,"tag":288,"props":1412,"children":1413},{"class":301},[1414],{"type":24,"value":1161},{"type":18,"tag":288,"props":1416,"children":1417},{"class":295},[1418],{"type":24,"value":759},{"type":18,"tag":288,"props":1420,"children":1421},{"class":301},[1422],{"type":24,"value":352},{"type":18,"tag":288,"props":1424,"children":1425},{"class":355},[1426],{"type":24,"value":612},{"type":18,"tag":288,"props":1428,"children":1429},{"class":301},[1430],{"type":24,"value":352},{"type":18,"tag":288,"props":1432,"children":1433},{"class":295},[1434],{"type":24,"value":602},{"type":18,"tag":288,"props":1436,"children":1437},{"class":301},[1438],{"type":24,"value":932},{"type":18,"tag":288,"props":1440,"children":1441},{"class":355},[1442],{"type":24,"value":612},{"type":18,"tag":288,"props":1444,"children":1445},{"class":301},[1446],{"type":24,"value":1161},{"type":18,"tag":288,"props":1448,"children":1449},{"class":295},[1450],{"type":24,"value":759},{"type":18,"tag":288,"props":1452,"children":1453},{"class":301},[1454],{"type":24,"value":352},{"type":18,"tag":288,"props":1456,"children":1457},{"class":355},[1458],{"type":24,"value":612},{"type":18,"tag":288,"props":1460,"children":1461},{"class":301},[1462],{"type":24,"value":352},{"type":18,"tag":288,"props":1464,"children":1465},{"class":295},[1466],{"type":24,"value":602},{"type":18,"tag":288,"props":1468,"children":1469},{"class":301},[1470],{"type":24,"value":1055},{"type":18,"tag":288,"props":1472,"children":1473},{"class":355},[1474],{"type":24,"value":612},{"type":18,"tag":288,"props":1476,"children":1477},{"class":301},[1478],{"type":24,"value":1161},{"type":18,"tag":288,"props":1480,"children":1481},{"class":295},[1482],{"type":24,"value":759},{"type":18,"tag":288,"props":1484,"children":1485},{"class":301},[1486],{"type":24,"value":1234},{"type":18,"tag":288,"props":1488,"children":1489},{"class":355},[1490],{"type":24,"value":612},{"type":18,"tag":288,"props":1492,"children":1493},{"class":301},[1494],{"type":24,"value":1243},{"type":18,"tag":288,"props":1496,"children":1497},{"class":295},[1498],{"type":24,"value":602},{"type":18,"tag":288,"props":1500,"children":1501},{"class":301},[1502],{"type":24,"value":1046},{"type":18,"tag":288,"props":1504,"children":1505},{"class":295},[1506],{"type":24,"value":769},{"type":18,"tag":288,"props":1508,"children":1509},{"class":301},[1510],{"type":24,"value":352},{"type":18,"tag":288,"props":1512,"children":1513},{"class":355},[1514],{"type":24,"value":1515},"6",{"type":18,"tag":19,"props":1517,"children":1519},{"id":1518},"single-shooting-method",[1520],{"type":24,"value":1521},"Single Shooting Method",{"type":18,"tag":27,"props":1523,"children":1524},{},[1525],{"type":24,"value":1526},"Single Shooting Method is a method that we transform the optimal control problem to the nonlinear programming problem with just one decision variable.",{"type":18,"tag":160,"props":1528,"children":1530},{"latex-express":1529,"styles":59},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":1532,"children":1533},{},[1534,1536,1540,1542],{"type":24,"value":1535},"Get ",{"type":18,"tag":92,"props":1537,"children":1539},{"latex-express":1538,"styles":123},"x_{u}",[],{"type":24,"value":1541}," as a function of ",{"type":18,"tag":92,"props":1543,"children":1545},{"latex-express":1544,"styles":123},"w, x, t_{k}",[],{"type":18,"tag":160,"props":1547,"children":1549},{"latex-express":1548,"styles":59},"\n      \\begin{align*}\n            x_{u} &= F(w,x_{0},t_{k}) \\\\\n            F(w,x_{0},t_{0}) &= x_{0} \\\\\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":1551,"children":1552},{},[1553],{"type":24,"value":1554},"Then solve the NLP",{"type":18,"tag":160,"props":1556,"children":1558},{"latex-express":1557,"styles":59},"\n      \\begin{align*}\n            \\min_{w}\\Phi(F(w,x_{0},t_{k}), w) \\\\ \n            \\text{Subject to} \\hspace{1cm}  g_{1}(F(w,x_{0},t_{k}),w) \\leq{0}\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1560,"children":1562},{"id":1561},"multiple-shooting",[1563],{"type":24,"value":1564},"Multiple Shooting",{"type":18,"tag":27,"props":1566,"children":1567},{},[1568],{"type":24,"value":1569},"Multiple Shooting Method is a method that consist of transforming of optimal control problem to the nonlinear programming problem with multiple decision variables.",{"type":18,"tag":160,"props":1571,"children":1573},{"latex-express":1572,"styles":59},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}, x_{0}, ..., x_{N}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":113,"props":1575,"children":1576},{},[1577,1582],{"type":18,"tag":117,"props":1578,"children":1579},{},[1580],{"type":24,"value":1581},"X becoming decision variable in the opimization problem as well as u",{"type":18,"tag":117,"props":1583,"children":1584},{},[1585],{"type":24,"value":1586},"We apply path constraint at each iteration step",{"type":18,"tag":160,"props":1588,"children":1590},{"latex-express":1589,"styles":59},"\n      \\begin{equation*}\n                x_{k+1}-f(x_{k},u_{k}) = 0\n            \\end{equation*}\n",[],{"type":18,"tag":27,"props":1592,"children":1593},{},[1594],{"type":24,"value":1554},{"type":18,"tag":160,"props":1596,"children":1598},{"latex-express":1597,"styles":59},"\n      \\begin{align*}\n            \\min_{w}  \\Phi(F(w,x_{0},t_{k}),& w) \\\\ \n            \\text{s.t}\\hspace{0.5cm}  g_{1}(F(w,x_{0},t_{k}),w) &\\leq{0} \\\\ \n                               g_{2}(w) = \\begin{bmatrix}\n                                  \\bar{x}_{0}-x_{0} \\\\\n                                  f(x_{0},u_{0})-x_{1} \\\\ \n                                  \\vdots \\\\\n                                  f(x_{N-1}, u_{N-1}-x_{N})\n                              \\end{bmatrix} &= 0\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1600,"children":1602},{"id":1601},"implement-in-python",[1603],{"type":24,"value":1604},"Implement in Python",{"type":18,"tag":27,"props":1606,"children":1607},{},[1608,1610,1616],{"type":24,"value":1609},"We will use ",{"type":18,"tag":1611,"props":1612,"children":1613},"code-inline",{},[1614],{"type":24,"value":1615},"Casadi",{"type":24,"value":1617}," as a numerical optimization framework.",{"type":18,"tag":273,"props":1619,"children":1622},{"className":1620,"code":1621,"language":278,"meta":8},[276],"import casadi as ca\n",[1623],{"type":18,"tag":281,"props":1624,"children":1625},{},[1626],{"type":18,"tag":273,"props":1627,"children":1628},{"__ignoreMap":8},[1629],{"type":18,"tag":288,"props":1630,"children":1631},{"class":290,"line":291},[1632,1636,1641,1645],{"type":18,"tag":288,"props":1633,"children":1634},{"class":295},[1635],{"type":24,"value":298},{"type":18,"tag":288,"props":1637,"children":1638},{"class":301},[1639],{"type":24,"value":1640}," casadi ",{"type":18,"tag":288,"props":1642,"children":1643},{"class":295},[1644],{"type":24,"value":309},{"type":18,"tag":288,"props":1646,"children":1647},{"class":301},[1648],{"type":24,"value":1649}," ca",{"type":18,"tag":27,"props":1651,"children":1652},{},[1653],{"type":24,"value":1654},"Define state representation and input control of our nonlinear model.",{"type":18,"tag":273,"props":1656,"children":1659},{"className":1657,"code":1658,"language":278,"meta":8},[276],"# Symbolic Variables\n## States\nx = ca.SX.sym(\"x\")\ny = ca.SX.sym(\"y\")\ntheta = ca.SX.sym(\"theta\")\nstates = ca.vertcat(x, y, theta)\nnum_states = states.numel()\n\n## Control\nu1 = ca.SX.sym(\"u1\")\nu2 = ca.SX.sym(\"u2\")\ncontrols = ca.vertcat(u1, u2)\nnum_controls = controls.numel()\n\n# Define Nonlinear model\n## Rotation Matrix\nrot_mat = ca.vertcat(\n    ca.horzcat(ca.cos(theta), ca.sin(theta), 0),\n    ca.horzcat(-ca.sin(theta), ca.cos(theta), 0),\n    ca.horzcat(0, 0, 1)\n)\n\nvx = u1 * ca.cos(theta)\nvy = u1 * ca.sin(theta)\nvyaw = u2\n\nrhs = ca.vertcat(vx, vy, vyaw)\n## Define mapped nonlinear function f(x,u) -> rhs\nf = ca.Function('f', [states, controls], [rhs])\n",[1660],{"type":18,"tag":281,"props":1661,"children":1662},{},[1663],{"type":18,"tag":273,"props":1664,"children":1665},{"__ignoreMap":8},[1666,1674,1682,1719,1751,1784,1801,1818,1825,1833,1866,1899,1916,1933,1940,1948,1956,1973,1990,2016,2048,2055,2062,2088,2113,2130,2137,2154,2162],{"type":18,"tag":288,"props":1667,"children":1668},{"class":290,"line":291},[1669],{"type":18,"tag":288,"props":1670,"children":1671},{"class":330},[1672],{"type":24,"value":1673},"# Symbolic Variables\n",{"type":18,"tag":288,"props":1675,"children":1676},{"class":290,"line":317},[1677],{"type":18,"tag":288,"props":1678,"children":1679},{"class":330},[1680],{"type":24,"value":1681},"## States\n",{"type":18,"tag":288,"props":1683,"children":1684},{"class":290,"line":326},[1685,1689,1693,1698,1703,1708,1714],{"type":18,"tag":288,"props":1686,"children":1687},{"class":301},[1688],{"type":24,"value":407},{"type":18,"tag":288,"props":1690,"children":1691},{"class":295},[1692],{"type":24,"value":347},{"type":18,"tag":288,"props":1694,"children":1695},{"class":301},[1696],{"type":24,"value":1697}," ca.",{"type":18,"tag":288,"props":1699,"children":1700},{"class":355},[1701],{"type":24,"value":1702},"SX",{"type":18,"tag":288,"props":1704,"children":1705},{"class":301},[1706],{"type":24,"value":1707},".sym(",{"type":18,"tag":288,"props":1709,"children":1711},{"class":1710},"ct-244866",[1712],{"type":24,"value":1713},"\"x\"",{"type":18,"tag":288,"props":1715,"children":1716},{"class":301},[1717],{"type":24,"value":1718},")\n",{"type":18,"tag":288,"props":1720,"children":1721},{"class":290,"line":336},[1722,1726,1730,1734,1738,1742,1747],{"type":18,"tag":288,"props":1723,"children":1724},{"class":301},[1725],{"type":24,"value":429},{"type":18,"tag":288,"props":1727,"children":1728},{"class":295},[1729],{"type":24,"value":347},{"type":18,"tag":288,"props":1731,"children":1732},{"class":301},[1733],{"type":24,"value":1697},{"type":18,"tag":288,"props":1735,"children":1736},{"class":355},[1737],{"type":24,"value":1702},{"type":18,"tag":288,"props":1739,"children":1740},{"class":301},[1741],{"type":24,"value":1707},{"type":18,"tag":288,"props":1743,"children":1744},{"class":1710},[1745],{"type":24,"value":1746},"\"y\"",{"type":18,"tag":288,"props":1748,"children":1749},{"class":301},[1750],{"type":24,"value":1718},{"type":18,"tag":288,"props":1752,"children":1753},{"class":290,"line":361},[1754,1759,1763,1767,1771,1775,1780],{"type":18,"tag":288,"props":1755,"children":1756},{"class":301},[1757],{"type":24,"value":1758},"theta ",{"type":18,"tag":288,"props":1760,"children":1761},{"class":295},[1762],{"type":24,"value":347},{"type":18,"tag":288,"props":1764,"children":1765},{"class":301},[1766],{"type":24,"value":1697},{"type":18,"tag":288,"props":1768,"children":1769},{"class":355},[1770],{"type":24,"value":1702},{"type":18,"tag":288,"props":1772,"children":1773},{"class":301},[1774],{"type":24,"value":1707},{"type":18,"tag":288,"props":1776,"children":1777},{"class":1710},[1778],{"type":24,"value":1779},"\"theta\"",{"type":18,"tag":288,"props":1781,"children":1782},{"class":301},[1783],{"type":24,"value":1718},{"type":18,"tag":288,"props":1785,"children":1786},{"class":290,"line":370},[1787,1792,1796],{"type":18,"tag":288,"props":1788,"children":1789},{"class":301},[1790],{"type":24,"value":1791},"states ",{"type":18,"tag":288,"props":1793,"children":1794},{"class":295},[1795],{"type":24,"value":347},{"type":18,"tag":288,"props":1797,"children":1798},{"class":301},[1799],{"type":24,"value":1800}," ca.vertcat(x, y, theta)\n",{"type":18,"tag":288,"props":1802,"children":1803},{"class":290,"line":392},[1804,1809,1813],{"type":18,"tag":288,"props":1805,"children":1806},{"class":301},[1807],{"type":24,"value":1808},"num_states ",{"type":18,"tag":288,"props":1810,"children":1811},{"class":295},[1812],{"type":24,"value":347},{"type":18,"tag":288,"props":1814,"children":1815},{"class":301},[1816],{"type":24,"value":1817}," states.numel()\n",{"type":18,"tag":288,"props":1819,"children":1820},{"class":290,"line":401},[1821],{"type":18,"tag":288,"props":1822,"children":1823},{},[1824],{"type":24,"value":323},{"type":18,"tag":288,"props":1826,"children":1827},{"class":290,"line":423},[1828],{"type":18,"tag":288,"props":1829,"children":1830},{"class":330},[1831],{"type":24,"value":1832},"## Control\n",{"type":18,"tag":288,"props":1834,"children":1835},{"class":290,"line":444},[1836,1841,1845,1849,1853,1857,1862],{"type":18,"tag":288,"props":1837,"children":1838},{"class":301},[1839],{"type":24,"value":1840},"u1 ",{"type":18,"tag":288,"props":1842,"children":1843},{"class":295},[1844],{"type":24,"value":347},{"type":18,"tag":288,"props":1846,"children":1847},{"class":301},[1848],{"type":24,"value":1697},{"type":18,"tag":288,"props":1850,"children":1851},{"class":355},[1852],{"type":24,"value":1702},{"type":18,"tag":288,"props":1854,"children":1855},{"class":301},[1856],{"type":24,"value":1707},{"type":18,"tag":288,"props":1858,"children":1859},{"class":1710},[1860],{"type":24,"value":1861},"\"u1\"",{"type":18,"tag":288,"props":1863,"children":1864},{"class":301},[1865],{"type":24,"value":1718},{"type":18,"tag":288,"props":1867,"children":1868},{"class":290,"line":465},[1869,1874,1878,1882,1886,1890,1895],{"type":18,"tag":288,"props":1870,"children":1871},{"class":301},[1872],{"type":24,"value":1873},"u2 ",{"type":18,"tag":288,"props":1875,"children":1876},{"class":295},[1877],{"type":24,"value":347},{"type":18,"tag":288,"props":1879,"children":1880},{"class":301},[1881],{"type":24,"value":1697},{"type":18,"tag":288,"props":1883,"children":1884},{"class":355},[1885],{"type":24,"value":1702},{"type":18,"tag":288,"props":1887,"children":1888},{"class":301},[1889],{"type":24,"value":1707},{"type":18,"tag":288,"props":1891,"children":1892},{"class":1710},[1893],{"type":24,"value":1894},"\"u2\"",{"type":18,"tag":288,"props":1896,"children":1897},{"class":301},[1898],{"type":24,"value":1718},{"type":18,"tag":288,"props":1900,"children":1901},{"class":290,"line":474},[1902,1907,1911],{"type":18,"tag":288,"props":1903,"children":1904},{"class":301},[1905],{"type":24,"value":1906},"controls ",{"type":18,"tag":288,"props":1908,"children":1909},{"class":295},[1910],{"type":24,"value":347},{"type":18,"tag":288,"props":1912,"children":1913},{"class":301},[1914],{"type":24,"value":1915}," ca.vertcat(u1, u2)\n",{"type":18,"tag":288,"props":1917,"children":1918},{"class":290,"line":505},[1919,1924,1928],{"type":18,"tag":288,"props":1920,"children":1921},{"class":301},[1922],{"type":24,"value":1923},"num_controls ",{"type":18,"tag":288,"props":1925,"children":1926},{"class":295},[1927],{"type":24,"value":347},{"type":18,"tag":288,"props":1929,"children":1930},{"class":301},[1931],{"type":24,"value":1932}," controls.numel()\n",{"type":18,"tag":288,"props":1934,"children":1935},{"class":290,"line":536},[1936],{"type":18,"tag":288,"props":1937,"children":1938},{},[1939],{"type":24,"value":323},{"type":18,"tag":288,"props":1941,"children":1942},{"class":290,"line":545},[1943],{"type":18,"tag":288,"props":1944,"children":1945},{"class":330},[1946],{"type":24,"value":1947},"# Define Nonlinear model\n",{"type":18,"tag":288,"props":1949,"children":1950},{"class":290,"line":554},[1951],{"type":18,"tag":288,"props":1952,"children":1953},{"class":330},[1954],{"type":24,"value":1955},"## Rotation Matrix\n",{"type":18,"tag":288,"props":1957,"children":1958},{"class":290,"line":581},[1959,1964,1968],{"type":18,"tag":288,"props":1960,"children":1961},{"class":301},[1962],{"type":24,"value":1963},"rot_mat ",{"type":18,"tag":288,"props":1965,"children":1966},{"class":295},[1967],{"type":24,"value":347},{"type":18,"tag":288,"props":1969,"children":1970},{"class":301},[1971],{"type":24,"value":1972}," ca.vertcat(\n",{"type":18,"tag":288,"props":1974,"children":1975},{"class":290,"line":620},[1976,1981,1985],{"type":18,"tag":288,"props":1977,"children":1978},{"class":301},[1979],{"type":24,"value":1980},"    ca.horzcat(ca.cos(theta), ca.sin(theta), ",{"type":18,"tag":288,"props":1982,"children":1983},{"class":355},[1984],{"type":24,"value":592},{"type":18,"tag":288,"props":1986,"children":1987},{"class":301},[1988],{"type":24,"value":1989},"),\n",{"type":18,"tag":288,"props":1991,"children":1992},{"class":290,"line":653},[1993,1998,2003,2008,2012],{"type":18,"tag":288,"props":1994,"children":1995},{"class":301},[1996],{"type":24,"value":1997},"    ca.horzcat(",{"type":18,"tag":288,"props":1999,"children":2000},{"class":295},[2001],{"type":24,"value":2002},"-",{"type":18,"tag":288,"props":2004,"children":2005},{"class":301},[2006],{"type":24,"value":2007},"ca.sin(theta), ca.cos(theta), ",{"type":18,"tag":288,"props":2009,"children":2010},{"class":355},[2011],{"type":24,"value":592},{"type":18,"tag":288,"props":2013,"children":2014},{"class":301},[2015],{"type":24,"value":1989},{"type":18,"tag":288,"props":2017,"children":2018},{"class":290,"line":671},[2019,2023,2027,2032,2036,2040,2044],{"type":18,"tag":288,"props":2020,"children":2021},{"class":301},[2022],{"type":24,"value":1997},{"type":18,"tag":288,"props":2024,"children":2025},{"class":355},[2026],{"type":24,"value":592},{"type":18,"tag":288,"props":2028,"children":2029},{"class":301},[2030],{"type":24,"value":2031},", ",{"type":18,"tag":288,"props":2033,"children":2034},{"class":355},[2035],{"type":24,"value":592},{"type":18,"tag":288,"props":2037,"children":2038},{"class":301},[2039],{"type":24,"value":2031},{"type":18,"tag":288,"props":2041,"children":2042},{"class":355},[2043],{"type":24,"value":663},{"type":18,"tag":288,"props":2045,"children":2046},{"class":301},[2047],{"type":24,"value":1718},{"type":18,"tag":288,"props":2049,"children":2050},{"class":290,"line":680},[2051],{"type":18,"tag":288,"props":2052,"children":2053},{"class":301},[2054],{"type":24,"value":1718},{"type":18,"tag":288,"props":2056,"children":2057},{"class":290,"line":688},[2058],{"type":18,"tag":288,"props":2059,"children":2060},{},[2061],{"type":24,"value":323},{"type":18,"tag":288,"props":2063,"children":2064},{"class":290,"line":721},[2065,2070,2074,2079,2083],{"type":18,"tag":288,"props":2066,"children":2067},{"class":301},[2068],{"type":24,"value":2069},"vx ",{"type":18,"tag":288,"props":2071,"children":2072},{"class":295},[2073],{"type":24,"value":347},{"type":18,"tag":288,"props":2075,"children":2076},{"class":301},[2077],{"type":24,"value":2078}," u1 ",{"type":18,"tag":288,"props":2080,"children":2081},{"class":295},[2082],{"type":24,"value":602},{"type":18,"tag":288,"props":2084,"children":2085},{"class":301},[2086],{"type":24,"value":2087}," ca.cos(theta)\n",{"type":18,"tag":288,"props":2089,"children":2090},{"class":290,"line":739},[2091,2096,2100,2104,2108],{"type":18,"tag":288,"props":2092,"children":2093},{"class":301},[2094],{"type":24,"value":2095},"vy ",{"type":18,"tag":288,"props":2097,"children":2098},{"class":295},[2099],{"type":24,"value":347},{"type":18,"tag":288,"props":2101,"children":2102},{"class":301},[2103],{"type":24,"value":2078},{"type":18,"tag":288,"props":2105,"children":2106},{"class":295},[2107],{"type":24,"value":602},{"type":18,"tag":288,"props":2109,"children":2110},{"class":301},[2111],{"type":24,"value":2112}," ca.sin(theta)\n",{"type":18,"tag":288,"props":2114,"children":2115},{"class":290,"line":885},[2116,2121,2125],{"type":18,"tag":288,"props":2117,"children":2118},{"class":301},[2119],{"type":24,"value":2120},"vyaw ",{"type":18,"tag":288,"props":2122,"children":2123},{"class":295},[2124],{"type":24,"value":347},{"type":18,"tag":288,"props":2126,"children":2127},{"class":301},[2128],{"type":24,"value":2129}," u2\n",{"type":18,"tag":288,"props":2131,"children":2132},{"class":290,"line":1023},[2133],{"type":18,"tag":288,"props":2134,"children":2135},{},[2136],{"type":24,"value":323},{"type":18,"tag":288,"props":2138,"children":2139},{"class":290,"line":1114},[2140,2145,2149],{"type":18,"tag":288,"props":2141,"children":2142},{"class":301},[2143],{"type":24,"value":2144},"rhs ",{"type":18,"tag":288,"props":2146,"children":2147},{"class":295},[2148],{"type":24,"value":347},{"type":18,"tag":288,"props":2150,"children":2151},{"class":301},[2152],{"type":24,"value":2153}," ca.vertcat(vx, vy, vyaw)\n",{"type":18,"tag":288,"props":2155,"children":2156},{"class":290,"line":1122},[2157],{"type":18,"tag":288,"props":2158,"children":2159},{"class":330},[2160],{"type":24,"value":2161},"## Define mapped nonlinear function f(x,u) -> rhs\n",{"type":18,"tag":288,"props":2163,"children":2164},{"class":290,"line":1136},[2165,2169,2173,2178,2183],{"type":18,"tag":288,"props":2166,"children":2167},{"class":301},[2168],{"type":24,"value":560},{"type":18,"tag":288,"props":2170,"children":2171},{"class":295},[2172],{"type":24,"value":347},{"type":18,"tag":288,"props":2174,"children":2175},{"class":301},[2176],{"type":24,"value":2177}," ca.Function(",{"type":18,"tag":288,"props":2179,"children":2180},{"class":1710},[2181],{"type":24,"value":2182},"'f'",{"type":18,"tag":288,"props":2184,"children":2185},{"class":301},[2186],{"type":24,"value":2187},", [states, controls], [rhs])",{"type":18,"tag":27,"props":2189,"children":2190},{},[2191],{"type":24,"value":2192},"Declare symbolic matrix",{"type":18,"tag":273,"props":2194,"children":2197},{"className":2195,"code":2196,"language":278,"meta":8},[276],"X = ca.SX.sym('X', num_states, prediction_horizons + 1)\nX_ref = ca.SX.sym('X_ref', num_states, prediction_horizons + 1)\nU = ca.SX.sym('U', num_controls, prediction_horizons)\nU_ref = ca.SX.sym('U_ref', num_controls, prediction_horizons)\n",[2198],{"type":18,"tag":281,"props":2199,"children":2200},{},[2201],{"type":18,"tag":273,"props":2202,"children":2203},{"__ignoreMap":8},[2204,2254,2303,2337],{"type":18,"tag":288,"props":2205,"children":2206},{"class":290,"line":291},[2207,2212,2216,2220,2224,2228,2233,2238,2242,2246,2250],{"type":18,"tag":288,"props":2208,"children":2209},{"class":301},[2210],{"type":24,"value":2211},"X ",{"type":18,"tag":288,"props":2213,"children":2214},{"class":295},[2215],{"type":24,"value":347},{"type":18,"tag":288,"props":2217,"children":2218},{"class":301},[2219],{"type":24,"value":1697},{"type":18,"tag":288,"props":2221,"children":2222},{"class":355},[2223],{"type":24,"value":1702},{"type":18,"tag":288,"props":2225,"children":2226},{"class":301},[2227],{"type":24,"value":1707},{"type":18,"tag":288,"props":2229,"children":2230},{"class":1710},[2231],{"type":24,"value":2232},"'X'",{"type":18,"tag":288,"props":2234,"children":2235},{"class":301},[2236],{"type":24,"value":2237},", num_states, prediction_horizons ",{"type":18,"tag":288,"props":2239,"children":2240},{"class":295},[2241],{"type":24,"value":759},{"type":18,"tag":288,"props":2243,"children":2244},{"class":301},[2245],{"type":24,"value":352},{"type":18,"tag":288,"props":2247,"children":2248},{"class":355},[2249],{"type":24,"value":663},{"type":18,"tag":288,"props":2251,"children":2252},{"class":301},[2253],{"type":24,"value":1718},{"type":18,"tag":288,"props":2255,"children":2256},{"class":290,"line":317},[2257,2262,2266,2270,2274,2278,2283,2287,2291,2295,2299],{"type":18,"tag":288,"props":2258,"children":2259},{"class":301},[2260],{"type":24,"value":2261},"X_ref ",{"type":18,"tag":288,"props":2263,"children":2264},{"class":295},[2265],{"type":24,"value":347},{"type":18,"tag":288,"props":2267,"children":2268},{"class":301},[2269],{"type":24,"value":1697},{"type":18,"tag":288,"props":2271,"children":2272},{"class":355},[2273],{"type":24,"value":1702},{"type":18,"tag":288,"props":2275,"children":2276},{"class":301},[2277],{"type":24,"value":1707},{"type":18,"tag":288,"props":2279,"children":2280},{"class":1710},[2281],{"type":24,"value":2282},"'X_ref'",{"type":18,"tag":288,"props":2284,"children":2285},{"class":301},[2286],{"type":24,"value":2237},{"type":18,"tag":288,"props":2288,"children":2289},{"class":295},[2290],{"type":24,"value":759},{"type":18,"tag":288,"props":2292,"children":2293},{"class":301},[2294],{"type":24,"value":352},{"type":18,"tag":288,"props":2296,"children":2297},{"class":355},[2298],{"type":24,"value":663},{"type":18,"tag":288,"props":2300,"children":2301},{"class":301},[2302],{"type":24,"value":1718},{"type":18,"tag":288,"props":2304,"children":2305},{"class":290,"line":326},[2306,2311,2315,2319,2323,2327,2332],{"type":18,"tag":288,"props":2307,"children":2308},{"class":301},[2309],{"type":24,"value":2310},"U ",{"type":18,"tag":288,"props":2312,"children":2313},{"class":295},[2314],{"type":24,"value":347},{"type":18,"tag":288,"props":2316,"children":2317},{"class":301},[2318],{"type":24,"value":1697},{"type":18,"tag":288,"props":2320,"children":2321},{"class":355},[2322],{"type":24,"value":1702},{"type":18,"tag":288,"props":2324,"children":2325},{"class":301},[2326],{"type":24,"value":1707},{"type":18,"tag":288,"props":2328,"children":2329},{"class":1710},[2330],{"type":24,"value":2331},"'U'",{"type":18,"tag":288,"props":2333,"children":2334},{"class":301},[2335],{"type":24,"value":2336},", num_controls, prediction_horizons)\n",{"type":18,"tag":288,"props":2338,"children":2339},{"class":290,"line":336},[2340,2345,2349,2353,2357,2361,2366],{"type":18,"tag":288,"props":2341,"children":2342},{"class":301},[2343],{"type":24,"value":2344},"U_ref ",{"type":18,"tag":288,"props":2346,"children":2347},{"class":295},[2348],{"type":24,"value":347},{"type":18,"tag":288,"props":2350,"children":2351},{"class":301},[2352],{"type":24,"value":1697},{"type":18,"tag":288,"props":2354,"children":2355},{"class":355},[2356],{"type":24,"value":1702},{"type":18,"tag":288,"props":2358,"children":2359},{"class":301},[2360],{"type":24,"value":1707},{"type":18,"tag":288,"props":2362,"children":2363},{"class":1710},[2364],{"type":24,"value":2365},"'U_ref'",{"type":18,"tag":288,"props":2367,"children":2368},{"class":301},[2369],{"type":24,"value":2370},", num_controls, prediction_horizons)",{"type":18,"tag":27,"props":2372,"children":2373},{},[2374,2376],{"type":24,"value":2375},"Define nonlinear programming and options for ",{"type":18,"tag":1611,"props":2377,"children":2378},{},[2379],{"type":24,"value":1615},{"type":18,"tag":273,"props":2381,"children":2384},{"className":2382,"code":2383,"language":278,"meta":8},[276],"nlp_prob = {\n    'f': cost_fn,\n    'x': opt_var,\n    'p': opt_dec,\n    'g': g\n}\n\nnlp_opts = {\n    'ipopt.max_iter': 5000,\n    'ipopt.print_level': 0,\n    'ipopt.acceptable_tol': 1e-6,\n    'ipopt.acceptable_obj_change_tol': 1e-4,\n    'print_time': 0\n}\n",[2385],{"type":18,"tag":281,"props":2386,"children":2387},{},[2388],{"type":18,"tag":273,"props":2389,"children":2390},{"__ignoreMap":8},[2391,2408,2424,2441,2458,2475,2483,2490,2506,2533,2557,2582,2607,2628],{"type":18,"tag":288,"props":2392,"children":2393},{"class":290,"line":291},[2394,2399,2403],{"type":18,"tag":288,"props":2395,"children":2396},{"class":301},[2397],{"type":24,"value":2398},"nlp_prob ",{"type":18,"tag":288,"props":2400,"children":2401},{"class":295},[2402],{"type":24,"value":347},{"type":18,"tag":288,"props":2404,"children":2405},{"class":301},[2406],{"type":24,"value":2407}," {\n",{"type":18,"tag":288,"props":2409,"children":2410},{"class":290,"line":317},[2411,2415,2419],{"type":18,"tag":288,"props":2412,"children":2413},{"class":301},[2414],{"type":24,"value":1128},{"type":18,"tag":288,"props":2416,"children":2417},{"class":1710},[2418],{"type":24,"value":2182},{"type":18,"tag":288,"props":2420,"children":2421},{"class":301},[2422],{"type":24,"value":2423},": cost_fn,\n",{"type":18,"tag":288,"props":2425,"children":2426},{"class":290,"line":326},[2427,2431,2436],{"type":18,"tag":288,"props":2428,"children":2429},{"class":301},[2430],{"type":24,"value":1128},{"type":18,"tag":288,"props":2432,"children":2433},{"class":1710},[2434],{"type":24,"value":2435},"'x'",{"type":18,"tag":288,"props":2437,"children":2438},{"class":301},[2439],{"type":24,"value":2440},": opt_var,\n",{"type":18,"tag":288,"props":2442,"children":2443},{"class":290,"line":336},[2444,2448,2453],{"type":18,"tag":288,"props":2445,"children":2446},{"class":301},[2447],{"type":24,"value":1128},{"type":18,"tag":288,"props":2449,"children":2450},{"class":1710},[2451],{"type":24,"value":2452},"'p'",{"type":18,"tag":288,"props":2454,"children":2455},{"class":301},[2456],{"type":24,"value":2457},": opt_dec,\n",{"type":18,"tag":288,"props":2459,"children":2460},{"class":290,"line":361},[2461,2465,2470],{"type":18,"tag":288,"props":2462,"children":2463},{"class":301},[2464],{"type":24,"value":1128},{"type":18,"tag":288,"props":2466,"children":2467},{"class":1710},[2468],{"type":24,"value":2469},"'g'",{"type":18,"tag":288,"props":2471,"children":2472},{"class":301},[2473],{"type":24,"value":2474},": g\n",{"type":18,"tag":288,"props":2476,"children":2477},{"class":290,"line":370},[2478],{"type":18,"tag":288,"props":2479,"children":2480},{"class":301},[2481],{"type":24,"value":2482},"}\n",{"type":18,"tag":288,"props":2484,"children":2485},{"class":290,"line":392},[2486],{"type":18,"tag":288,"props":2487,"children":2488},{},[2489],{"type":24,"value":323},{"type":18,"tag":288,"props":2491,"children":2492},{"class":290,"line":401},[2493,2498,2502],{"type":18,"tag":288,"props":2494,"children":2495},{"class":301},[2496],{"type":24,"value":2497},"nlp_opts ",{"type":18,"tag":288,"props":2499,"children":2500},{"class":295},[2501],{"type":24,"value":347},{"type":18,"tag":288,"props":2503,"children":2504},{"class":301},[2505],{"type":24,"value":2407},{"type":18,"tag":288,"props":2507,"children":2508},{"class":290,"line":423},[2509,2513,2518,2523,2528],{"type":18,"tag":288,"props":2510,"children":2511},{"class":301},[2512],{"type":24,"value":1128},{"type":18,"tag":288,"props":2514,"children":2515},{"class":1710},[2516],{"type":24,"value":2517},"'ipopt.max_iter'",{"type":18,"tag":288,"props":2519,"children":2520},{"class":301},[2521],{"type":24,"value":2522},": ",{"type":18,"tag":288,"props":2524,"children":2525},{"class":355},[2526],{"type":24,"value":2527},"5000",{"type":18,"tag":288,"props":2529,"children":2530},{"class":301},[2531],{"type":24,"value":2532},",\n",{"type":18,"tag":288,"props":2534,"children":2535},{"class":290,"line":444},[2536,2540,2545,2549,2553],{"type":18,"tag":288,"props":2537,"children":2538},{"class":301},[2539],{"type":24,"value":1128},{"type":18,"tag":288,"props":2541,"children":2542},{"class":1710},[2543],{"type":24,"value":2544},"'ipopt.print_level'",{"type":18,"tag":288,"props":2546,"children":2547},{"class":301},[2548],{"type":24,"value":2522},{"type":18,"tag":288,"props":2550,"children":2551},{"class":355},[2552],{"type":24,"value":592},{"type":18,"tag":288,"props":2554,"children":2555},{"class":301},[2556],{"type":24,"value":2532},{"type":18,"tag":288,"props":2558,"children":2559},{"class":290,"line":465},[2560,2564,2569,2573,2578],{"type":18,"tag":288,"props":2561,"children":2562},{"class":301},[2563],{"type":24,"value":1128},{"type":18,"tag":288,"props":2565,"children":2566},{"class":1710},[2567],{"type":24,"value":2568},"'ipopt.acceptable_tol'",{"type":18,"tag":288,"props":2570,"children":2571},{"class":301},[2572],{"type":24,"value":2522},{"type":18,"tag":288,"props":2574,"children":2575},{"class":355},[2576],{"type":24,"value":2577},"1e-6",{"type":18,"tag":288,"props":2579,"children":2580},{"class":301},[2581],{"type":24,"value":2532},{"type":18,"tag":288,"props":2583,"children":2584},{"class":290,"line":474},[2585,2589,2594,2598,2603],{"type":18,"tag":288,"props":2586,"children":2587},{"class":301},[2588],{"type":24,"value":1128},{"type":18,"tag":288,"props":2590,"children":2591},{"class":1710},[2592],{"type":24,"value":2593},"'ipopt.acceptable_obj_change_tol'",{"type":18,"tag":288,"props":2595,"children":2596},{"class":301},[2597],{"type":24,"value":2522},{"type":18,"tag":288,"props":2599,"children":2600},{"class":355},[2601],{"type":24,"value":2602},"1e-4",{"type":18,"tag":288,"props":2604,"children":2605},{"class":301},[2606],{"type":24,"value":2532},{"type":18,"tag":288,"props":2608,"children":2609},{"class":290,"line":505},[2610,2614,2619,2623],{"type":18,"tag":288,"props":2611,"children":2612},{"class":301},[2613],{"type":24,"value":1128},{"type":18,"tag":288,"props":2615,"children":2616},{"class":1710},[2617],{"type":24,"value":2618},"'print_time'",{"type":18,"tag":288,"props":2620,"children":2621},{"class":301},[2622],{"type":24,"value":2522},{"type":18,"tag":288,"props":2624,"children":2625},{"class":355},[2626],{"type":24,"value":2627},"0\n",{"type":18,"tag":288,"props":2629,"children":2630},{"class":290,"line":536},[2631],{"type":18,"tag":288,"props":2632,"children":2633},{"class":301},[2634],{"type":24,"value":2635},"}",{"type":18,"tag":27,"props":2637,"children":2638},{},[2639],{"type":24,"value":2640},"Determine boundary and constraint for our optimizer",{"type":18,"tag":273,"props":2642,"children":2645},{"className":2643,"code":2644,"language":278,"meta":8},[276],"lbx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\nubx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\n\nlbx[0: num_states * (prediction_horizons + 1): num_states] = x_min\nlbx[1: num_states * (prediction_horizons + 1): num_states] = y_min\nlbx[2: num_states * (prediction_horizons + 1): num_states] = theta_min\n\nubx[0: num_states * (prediction_horizons + 1): num_states] = x_max\nubx[1: num_states * (prediction_horizons + 1): num_states] = y_max\nubx[2: num_states * (prediction_horizons + 1): num_states] = theta_max\n\nlbx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\nlbx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\n\nubx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\nubx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\n\nargs = {\n    'lbg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'ubg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'lbx': lbx,\n    'ubx': ubx\n}\n",[2646],{"type":18,"tag":281,"props":2647,"children":2648},{},[2649],{"type":18,"tag":273,"props":2650,"children":2651},{"__ignoreMap":8},[2652,2730,2802,2809,2860,2908,2956,2963,3012,3060,3108,3115,3198,3293,3300,3381,3476,3483,3499,3558,3614,3631,3648],{"type":18,"tag":288,"props":2653,"children":2654},{"class":290,"line":291},[2655,2660,2664,2668,2673,2678,2682,2687,2691,2695,2699,2703,2707,2712,2716,2721,2725],{"type":18,"tag":288,"props":2656,"children":2657},{"class":301},[2658],{"type":24,"value":2659},"lbx ",{"type":18,"tag":288,"props":2661,"children":2662},{"class":295},[2663],{"type":24,"value":347},{"type":18,"tag":288,"props":2665,"children":2666},{"class":301},[2667],{"type":24,"value":1697},{"type":18,"tag":288,"props":2669,"children":2670},{"class":355},[2671],{"type":24,"value":2672},"DM",{"type":18,"tag":288,"props":2674,"children":2675},{"class":301},[2676],{"type":24,"value":2677},".zeros((num_states ",{"type":18,"tag":288,"props":2679,"children":2680},{"class":295},[2681],{"type":24,"value":602},{"type":18,"tag":288,"props":2683,"children":2684},{"class":301},[2685],{"type":24,"value":2686}," (prediction_horizons ",{"type":18,"tag":288,"props":2688,"children":2689},{"class":295},[2690],{"type":24,"value":759},{"type":18,"tag":288,"props":2692,"children":2693},{"class":301},[2694],{"type":24,"value":352},{"type":18,"tag":288,"props":2696,"children":2697},{"class":355},[2698],{"type":24,"value":663},{"type":18,"tag":288,"props":2700,"children":2701},{"class":301},[2702],{"type":24,"value":782},{"type":18,"tag":288,"props":2704,"children":2705},{"class":295},[2706],{"type":24,"value":759},{"type":18,"tag":288,"props":2708,"children":2709},{"class":301},[2710],{"type":24,"value":2711}," num_controls ",{"type":18,"tag":288,"props":2713,"children":2714},{"class":295},[2715],{"type":24,"value":602},{"type":18,"tag":288,"props":2717,"children":2718},{"class":301},[2719],{"type":24,"value":2720}," prediction_horizons, ",{"type":18,"tag":288,"props":2722,"children":2723},{"class":355},[2724],{"type":24,"value":663},{"type":18,"tag":288,"props":2726,"children":2727},{"class":301},[2728],{"type":24,"value":2729},"))\n",{"type":18,"tag":288,"props":2731,"children":2732},{"class":290,"line":317},[2733,2738,2742,2746,2750,2754,2758,2762,2766,2770,2774,2778,2782,2786,2790,2794,2798],{"type":18,"tag":288,"props":2734,"children":2735},{"class":301},[2736],{"type":24,"value":2737},"ubx ",{"type":18,"tag":288,"props":2739,"children":2740},{"class":295},[2741],{"type":24,"value":347},{"type":18,"tag":288,"props":2743,"children":2744},{"class":301},[2745],{"type":24,"value":1697},{"type":18,"tag":288,"props":2747,"children":2748},{"class":355},[2749],{"type":24,"value":2672},{"type":18,"tag":288,"props":2751,"children":2752},{"class":301},[2753],{"type":24,"value":2677},{"type":18,"tag":288,"props":2755,"children":2756},{"class":295},[2757],{"type":24,"value":602},{"type":18,"tag":288,"props":2759,"children":2760},{"class":301},[2761],{"type":24,"value":2686},{"type":18,"tag":288,"props":2763,"children":2764},{"class":295},[2765],{"type":24,"value":759},{"type":18,"tag":288,"props":2767,"children":2768},{"class":301},[2769],{"type":24,"value":352},{"type":18,"tag":288,"props":2771,"children":2772},{"class":355},[2773],{"type":24,"value":663},{"type":18,"tag":288,"props":2775,"children":2776},{"class":301},[2777],{"type":24,"value":782},{"type":18,"tag":288,"props":2779,"children":2780},{"class":295},[2781],{"type":24,"value":759},{"type":18,"tag":288,"props":2783,"children":2784},{"class":301},[2785],{"type":24,"value":2711},{"type":18,"tag":288,"props":2787,"children":2788},{"class":295},[2789],{"type":24,"value":602},{"type":18,"tag":288,"props":2791,"children":2792},{"class":301},[2793],{"type":24,"value":2720},{"type":18,"tag":288,"props":2795,"children":2796},{"class":355},[2797],{"type":24,"value":663},{"type":18,"tag":288,"props":2799,"children":2800},{"class":301},[2801],{"type":24,"value":2729},{"type":18,"tag":288,"props":2803,"children":2804},{"class":290,"line":326},[2805],{"type":18,"tag":288,"props":2806,"children":2807},{},[2808],{"type":24,"value":323},{"type":18,"tag":288,"props":2810,"children":2811},{"class":290,"line":336},[2812,2817,2821,2826,2830,2834,2838,2842,2846,2851,2855],{"type":18,"tag":288,"props":2813,"children":2814},{"class":301},[2815],{"type":24,"value":2816},"lbx[",{"type":18,"tag":288,"props":2818,"children":2819},{"class":355},[2820],{"type":24,"value":592},{"type":18,"tag":288,"props":2822,"children":2823},{"class":301},[2824],{"type":24,"value":2825},": num_states ",{"type":18,"tag":288,"props":2827,"children":2828},{"class":295},[2829],{"type":24,"value":602},{"type":18,"tag":288,"props":2831,"children":2832},{"class":301},[2833],{"type":24,"value":2686},{"type":18,"tag":288,"props":2835,"children":2836},{"class":295},[2837],{"type":24,"value":759},{"type":18,"tag":288,"props":2839,"children":2840},{"class":301},[2841],{"type":24,"value":352},{"type":18,"tag":288,"props":2843,"children":2844},{"class":355},[2845],{"type":24,"value":663},{"type":18,"tag":288,"props":2847,"children":2848},{"class":301},[2849],{"type":24,"value":2850},"): num_states] ",{"type":18,"tag":288,"props":2852,"children":2853},{"class":295},[2854],{"type":24,"value":347},{"type":18,"tag":288,"props":2856,"children":2857},{"class":301},[2858],{"type":24,"value":2859}," x_min\n",{"type":18,"tag":288,"props":2861,"children":2862},{"class":290,"line":361},[2863,2867,2871,2875,2879,2883,2887,2891,2895,2899,2903],{"type":18,"tag":288,"props":2864,"children":2865},{"class":301},[2866],{"type":24,"value":2816},{"type":18,"tag":288,"props":2868,"children":2869},{"class":355},[2870],{"type":24,"value":663},{"type":18,"tag":288,"props":2872,"children":2873},{"class":301},[2874],{"type":24,"value":2825},{"type":18,"tag":288,"props":2876,"children":2877},{"class":295},[2878],{"type":24,"value":602},{"type":18,"tag":288,"props":2880,"children":2881},{"class":301},[2882],{"type":24,"value":2686},{"type":18,"tag":288,"props":2884,"children":2885},{"class":295},[2886],{"type":24,"value":759},{"type":18,"tag":288,"props":2888,"children":2889},{"class":301},[2890],{"type":24,"value":352},{"type":18,"tag":288,"props":2892,"children":2893},{"class":355},[2894],{"type":24,"value":663},{"type":18,"tag":288,"props":2896,"children":2897},{"class":301},[2898],{"type":24,"value":2850},{"type":18,"tag":288,"props":2900,"children":2901},{"class":295},[2902],{"type":24,"value":347},{"type":18,"tag":288,"props":2904,"children":2905},{"class":301},[2906],{"type":24,"value":2907}," y_min\n",{"type":18,"tag":288,"props":2909,"children":2910},{"class":290,"line":370},[2911,2915,2919,2923,2927,2931,2935,2939,2943,2947,2951],{"type":18,"tag":288,"props":2912,"children":2913},{"class":301},[2914],{"type":24,"value":2816},{"type":18,"tag":288,"props":2916,"children":2917},{"class":355},[2918],{"type":24,"value":612},{"type":18,"tag":288,"props":2920,"children":2921},{"class":301},[2922],{"type":24,"value":2825},{"type":18,"tag":288,"props":2924,"children":2925},{"class":295},[2926],{"type":24,"value":602},{"type":18,"tag":288,"props":2928,"children":2929},{"class":301},[2930],{"type":24,"value":2686},{"type":18,"tag":288,"props":2932,"children":2933},{"class":295},[2934],{"type":24,"value":759},{"type":18,"tag":288,"props":2936,"children":2937},{"class":301},[2938],{"type":24,"value":352},{"type":18,"tag":288,"props":2940,"children":2941},{"class":355},[2942],{"type":24,"value":663},{"type":18,"tag":288,"props":2944,"children":2945},{"class":301},[2946],{"type":24,"value":2850},{"type":18,"tag":288,"props":2948,"children":2949},{"class":295},[2950],{"type":24,"value":347},{"type":18,"tag":288,"props":2952,"children":2953},{"class":301},[2954],{"type":24,"value":2955}," theta_min\n",{"type":18,"tag":288,"props":2957,"children":2958},{"class":290,"line":392},[2959],{"type":18,"tag":288,"props":2960,"children":2961},{},[2962],{"type":24,"value":323},{"type":18,"tag":288,"props":2964,"children":2965},{"class":290,"line":401},[2966,2971,2975,2979,2983,2987,2991,2995,2999,3003,3007],{"type":18,"tag":288,"props":2967,"children":2968},{"class":301},[2969],{"type":24,"value":2970},"ubx[",{"type":18,"tag":288,"props":2972,"children":2973},{"class":355},[2974],{"type":24,"value":592},{"type":18,"tag":288,"props":2976,"children":2977},{"class":301},[2978],{"type":24,"value":2825},{"type":18,"tag":288,"props":2980,"children":2981},{"class":295},[2982],{"type":24,"value":602},{"type":18,"tag":288,"props":2984,"children":2985},{"class":301},[2986],{"type":24,"value":2686},{"type":18,"tag":288,"props":2988,"children":2989},{"class":295},[2990],{"type":24,"value":759},{"type":18,"tag":288,"props":2992,"children":2993},{"class":301},[2994],{"type":24,"value":352},{"type":18,"tag":288,"props":2996,"children":2997},{"class":355},[2998],{"type":24,"value":663},{"type":18,"tag":288,"props":3000,"children":3001},{"class":301},[3002],{"type":24,"value":2850},{"type":18,"tag":288,"props":3004,"children":3005},{"class":295},[3006],{"type":24,"value":347},{"type":18,"tag":288,"props":3008,"children":3009},{"class":301},[3010],{"type":24,"value":3011}," x_max\n",{"type":18,"tag":288,"props":3013,"children":3014},{"class":290,"line":423},[3015,3019,3023,3027,3031,3035,3039,3043,3047,3051,3055],{"type":18,"tag":288,"props":3016,"children":3017},{"class":301},[3018],{"type":24,"value":2970},{"type":18,"tag":288,"props":3020,"children":3021},{"class":355},[3022],{"type":24,"value":663},{"type":18,"tag":288,"props":3024,"children":3025},{"class":301},[3026],{"type":24,"value":2825},{"type":18,"tag":288,"props":3028,"children":3029},{"class":295},[3030],{"type":24,"value":602},{"type":18,"tag":288,"props":3032,"children":3033},{"class":301},[3034],{"type":24,"value":2686},{"type":18,"tag":288,"props":3036,"children":3037},{"class":295},[3038],{"type":24,"value":759},{"type":18,"tag":288,"props":3040,"children":3041},{"class":301},[3042],{"type":24,"value":352},{"type":18,"tag":288,"props":3044,"children":3045},{"class":355},[3046],{"type":24,"value":663},{"type":18,"tag":288,"props":3048,"children":3049},{"class":301},[3050],{"type":24,"value":2850},{"type":18,"tag":288,"props":3052,"children":3053},{"class":295},[3054],{"type":24,"value":347},{"type":18,"tag":288,"props":3056,"children":3057},{"class":301},[3058],{"type":24,"value":3059}," y_max\n",{"type":18,"tag":288,"props":3061,"children":3062},{"class":290,"line":444},[3063,3067,3071,3075,3079,3083,3087,3091,3095,3099,3103],{"type":18,"tag":288,"props":3064,"children":3065},{"class":301},[3066],{"type":24,"value":2970},{"type":18,"tag":288,"props":3068,"children":3069},{"class":355},[3070],{"type":24,"value":612},{"type":18,"tag":288,"props":3072,"children":3073},{"class":301},[3074],{"type":24,"value":2825},{"type":18,"tag":288,"props":3076,"children":3077},{"class":295},[3078],{"type":24,"value":602},{"type":18,"tag":288,"props":3080,"children":3081},{"class":301},[3082],{"type":24,"value":2686},{"type":18,"tag":288,"props":3084,"children":3085},{"class":295},[3086],{"type":24,"value":759},{"type":18,"tag":288,"props":3088,"children":3089},{"class":301},[3090],{"type":24,"value":352},{"type":18,"tag":288,"props":3092,"children":3093},{"class":355},[3094],{"type":24,"value":663},{"type":18,"tag":288,"props":3096,"children":3097},{"class":301},[3098],{"type":24,"value":2850},{"type":18,"tag":288,"props":3100,"children":3101},{"class":295},[3102],{"type":24,"value":347},{"type":18,"tag":288,"props":3104,"children":3105},{"class":301},[3106],{"type":24,"value":3107}," theta_max\n",{"type":18,"tag":288,"props":3109,"children":3110},{"class":290,"line":465},[3111],{"type":18,"tag":288,"props":3112,"children":3113},{},[3114],{"type":24,"value":323},{"type":18,"tag":288,"props":3116,"children":3117},{"class":290,"line":474},[3118,3123,3127,3131,3135,3139,3143,3148,3152,3156,3160,3164,3168,3172,3176,3180,3184,3189,3193],{"type":18,"tag":288,"props":3119,"children":3120},{"class":301},[3121],{"type":24,"value":3122},"lbx[num_states ",{"type":18,"tag":288,"props":3124,"children":3125},{"class":295},[3126],{"type":24,"value":602},{"type":18,"tag":288,"props":3128,"children":3129},{"class":301},[3130],{"type":24,"value":2686},{"type":18,"tag":288,"props":3132,"children":3133},{"class":295},[3134],{"type":24,"value":759},{"type":18,"tag":288,"props":3136,"children":3137},{"class":301},[3138],{"type":24,"value":352},{"type":18,"tag":288,"props":3140,"children":3141},{"class":355},[3142],{"type":24,"value":663},{"type":18,"tag":288,"props":3144,"children":3145},{"class":301},[3146],{"type":24,"value":3147},"): num_states ",{"type":18,"tag":288,"props":3149,"children":3150},{"class":295},[3151],{"type":24,"value":602},{"type":18,"tag":288,"props":3153,"children":3154},{"class":301},[3155],{"type":24,"value":2686},{"type":18,"tag":288,"props":3157,"children":3158},{"class":295},[3159],{"type":24,"value":759},{"type":18,"tag":288,"props":3161,"children":3162},{"class":301},[3163],{"type":24,"value":352},{"type":18,"tag":288,"props":3165,"children":3166},{"class":355},[3167],{"type":24,"value":663},{"type":18,"tag":288,"props":3169,"children":3170},{"class":301},[3171],{"type":24,"value":782},{"type":18,"tag":288,"props":3173,"children":3174},{"class":295},[3175],{"type":24,"value":759},{"type":18,"tag":288,"props":3177,"children":3178},{"class":301},[3179],{"type":24,"value":2711},{"type":18,"tag":288,"props":3181,"children":3182},{"class":295},[3183],{"type":24,"value":602},{"type":18,"tag":288,"props":3185,"children":3186},{"class":301},[3187],{"type":24,"value":3188}," prediction_horizons: num_controls] ",{"type":18,"tag":288,"props":3190,"children":3191},{"class":295},[3192],{"type":24,"value":347},{"type":18,"tag":288,"props":3194,"children":3195},{"class":301},[3196],{"type":24,"value":3197}," u_min\n",{"type":18,"tag":288,"props":3199,"children":3200},{"class":290,"line":505},[3201,3205,3209,3213,3217,3221,3225,3229,3233,3237,3241,3245,3249,3253,3257,3261,3265,3269,3273,3277,3281,3285,3289],{"type":18,"tag":288,"props":3202,"children":3203},{"class":301},[3204],{"type":24,"value":3122},{"type":18,"tag":288,"props":3206,"children":3207},{"class":295},[3208],{"type":24,"value":602},{"type":18,"tag":288,"props":3210,"children":3211},{"class":301},[3212],{"type":24,"value":2686},{"type":18,"tag":288,"props":3214,"children":3215},{"class":295},[3216],{"type":24,"value":759},{"type":18,"tag":288,"props":3218,"children":3219},{"class":301},[3220],{"type":24,"value":352},{"type":18,"tag":288,"props":3222,"children":3223},{"class":355},[3224],{"type":24,"value":663},{"type":18,"tag":288,"props":3226,"children":3227},{"class":301},[3228],{"type":24,"value":782},{"type":18,"tag":288,"props":3230,"children":3231},{"class":295},[3232],{"type":24,"value":759},{"type":18,"tag":288,"props":3234,"children":3235},{"class":301},[3236],{"type":24,"value":352},{"type":18,"tag":288,"props":3238,"children":3239},{"class":355},[3240],{"type":24,"value":663},{"type":18,"tag":288,"props":3242,"children":3243},{"class":301},[3244],{"type":24,"value":2825},{"type":18,"tag":288,"props":3246,"children":3247},{"class":295},[3248],{"type":24,"value":602},{"type":18,"tag":288,"props":3250,"children":3251},{"class":301},[3252],{"type":24,"value":2686},{"type":18,"tag":288,"props":3254,"children":3255},{"class":295},[3256],{"type":24,"value":759},{"type":18,"tag":288,"props":3258,"children":3259},{"class":301},[3260],{"type":24,"value":352},{"type":18,"tag":288,"props":3262,"children":3263},{"class":355},[3264],{"type":24,"value":663},{"type":18,"tag":288,"props":3266,"children":3267},{"class":301},[3268],{"type":24,"value":782},{"type":18,"tag":288,"props":3270,"children":3271},{"class":295},[3272],{"type":24,"value":759},{"type":18,"tag":288,"props":3274,"children":3275},{"class":301},[3276],{"type":24,"value":2711},{"type":18,"tag":288,"props":3278,"children":3279},{"class":295},[3280],{"type":24,"value":602},{"type":18,"tag":288,"props":3282,"children":3283},{"class":301},[3284],{"type":24,"value":3188},{"type":18,"tag":288,"props":3286,"children":3287},{"class":295},[3288],{"type":24,"value":347},{"type":18,"tag":288,"props":3290,"children":3291},{"class":301},[3292],{"type":24,"value":3197},{"type":18,"tag":288,"props":3294,"children":3295},{"class":290,"line":536},[3296],{"type":18,"tag":288,"props":3297,"children":3298},{},[3299],{"type":24,"value":323},{"type":18,"tag":288,"props":3301,"children":3302},{"class":290,"line":545},[3303,3308,3312,3316,3320,3324,3328,3332,3336,3340,3344,3348,3352,3356,3360,3364,3368,3372,3376],{"type":18,"tag":288,"props":3304,"children":3305},{"class":301},[3306],{"type":24,"value":3307},"ubx[num_states ",{"type":18,"tag":288,"props":3309,"children":3310},{"class":295},[3311],{"type":24,"value":602},{"type":18,"tag":288,"props":3313,"children":3314},{"class":301},[3315],{"type":24,"value":2686},{"type":18,"tag":288,"props":3317,"children":3318},{"class":295},[3319],{"type":24,"value":759},{"type":18,"tag":288,"props":3321,"children":3322},{"class":301},[3323],{"type":24,"value":352},{"type":18,"tag":288,"props":3325,"children":3326},{"class":355},[3327],{"type":24,"value":663},{"type":18,"tag":288,"props":3329,"children":3330},{"class":301},[3331],{"type":24,"value":3147},{"type":18,"tag":288,"props":3333,"children":3334},{"class":295},[3335],{"type":24,"value":602},{"type":18,"tag":288,"props":3337,"children":3338},{"class":301},[3339],{"type":24,"value":2686},{"type":18,"tag":288,"props":3341,"children":3342},{"class":295},[3343],{"type":24,"value":759},{"type":18,"tag":288,"props":3345,"children":3346},{"class":301},[3347],{"type":24,"value":352},{"type":18,"tag":288,"props":3349,"children":3350},{"class":355},[3351],{"type":24,"value":663},{"type":18,"tag":288,"props":3353,"children":3354},{"class":301},[3355],{"type":24,"value":782},{"type":18,"tag":288,"props":3357,"children":3358},{"class":295},[3359],{"type":24,"value":759},{"type":18,"tag":288,"props":3361,"children":3362},{"class":301},[3363],{"type":24,"value":2711},{"type":18,"tag":288,"props":3365,"children":3366},{"class":295},[3367],{"type":24,"value":602},{"type":18,"tag":288,"props":3369,"children":3370},{"class":301},[3371],{"type":24,"value":3188},{"type":18,"tag":288,"props":3373,"children":3374},{"class":295},[3375],{"type":24,"value":347},{"type":18,"tag":288,"props":3377,"children":3378},{"class":301},[3379],{"type":24,"value":3380}," u_max\n",{"type":18,"tag":288,"props":3382,"children":3383},{"class":290,"line":554},[3384,3388,3392,3396,3400,3404,3408,3412,3416,3420,3424,3428,3432,3436,3440,3444,3448,3452,3456,3460,3464,3468,3472],{"type":18,"tag":288,"props":3385,"children":3386},{"class":301},[3387],{"type":24,"value":3307},{"type":18,"tag":288,"props":3389,"children":3390},{"class":295},[3391],{"type":24,"value":602},{"type":18,"tag":288,"props":3393,"children":3394},{"class":301},[3395],{"type":24,"value":2686},{"type":18,"tag":288,"props":3397,"children":3398},{"class":295},[3399],{"type":24,"value":759},{"type":18,"tag":288,"props":3401,"children":3402},{"class":301},[3403],{"type":24,"value":352},{"type":18,"tag":288,"props":3405,"children":3406},{"class":355},[3407],{"type":24,"value":663},{"type":18,"tag":288,"props":3409,"children":3410},{"class":301},[3411],{"type":24,"value":782},{"type":18,"tag":288,"props":3413,"children":3414},{"class":295},[3415],{"type":24,"value":759},{"type":18,"tag":288,"props":3417,"children":3418},{"class":301},[3419],{"type":24,"value":352},{"type":18,"tag":288,"props":3421,"children":3422},{"class":355},[3423],{"type":24,"value":663},{"type":18,"tag":288,"props":3425,"children":3426},{"class":301},[3427],{"type":24,"value":2825},{"type":18,"tag":288,"props":3429,"children":3430},{"class":295},[3431],{"type":24,"value":602},{"type":18,"tag":288,"props":3433,"children":3434},{"class":301},[3435],{"type":24,"value":2686},{"type":18,"tag":288,"props":3437,"children":3438},{"class":295},[3439],{"type":24,"value":759},{"type":18,"tag":288,"props":3441,"children":3442},{"class":301},[3443],{"type":24,"value":352},{"type":18,"tag":288,"props":3445,"children":3446},{"class":355},[3447],{"type":24,"value":663},{"type":18,"tag":288,"props":3449,"children":3450},{"class":301},[3451],{"type":24,"value":782},{"type":18,"tag":288,"props":3453,"children":3454},{"class":295},[3455],{"type":24,"value":759},{"type":18,"tag":288,"props":3457,"children":3458},{"class":301},[3459],{"type":24,"value":2711},{"type":18,"tag":288,"props":3461,"children":3462},{"class":295},[3463],{"type":24,"value":602},{"type":18,"tag":288,"props":3465,"children":3466},{"class":301},[3467],{"type":24,"value":3188},{"type":18,"tag":288,"props":3469,"children":3470},{"class":295},[3471],{"type":24,"value":347},{"type":18,"tag":288,"props":3473,"children":3474},{"class":301},[3475],{"type":24,"value":3380},{"type":18,"tag":288,"props":3477,"children":3478},{"class":290,"line":581},[3479],{"type":18,"tag":288,"props":3480,"children":3481},{},[3482],{"type":24,"value":323},{"type":18,"tag":288,"props":3484,"children":3485},{"class":290,"line":620},[3486,3491,3495],{"type":18,"tag":288,"props":3487,"children":3488},{"class":301},[3489],{"type":24,"value":3490},"args ",{"type":18,"tag":288,"props":3492,"children":3493},{"class":295},[3494],{"type":24,"value":347},{"type":18,"tag":288,"props":3496,"children":3497},{"class":301},[3498],{"type":24,"value":2407},{"type":18,"tag":288,"props":3500,"children":3501},{"class":290,"line":653},[3502,3506,3511,3516,3520,3524,3528,3532,3536,3540,3544,3549,3553],{"type":18,"tag":288,"props":3503,"children":3504},{"class":301},[3505],{"type":24,"value":1128},{"type":18,"tag":288,"props":3507,"children":3508},{"class":1710},[3509],{"type":24,"value":3510},"'lbg'",{"type":18,"tag":288,"props":3512,"children":3513},{"class":301},[3514],{"type":24,"value":3515},": ca.",{"type":18,"tag":288,"props":3517,"children":3518},{"class":355},[3519],{"type":24,"value":2672},{"type":18,"tag":288,"props":3521,"children":3522},{"class":301},[3523],{"type":24,"value":2677},{"type":18,"tag":288,"props":3525,"children":3526},{"class":295},[3527],{"type":24,"value":602},{"type":18,"tag":288,"props":3529,"children":3530},{"class":301},[3531],{"type":24,"value":2686},{"type":18,"tag":288,"props":3533,"children":3534},{"class":295},[3535],{"type":24,"value":759},{"type":18,"tag":288,"props":3537,"children":3538},{"class":301},[3539],{"type":24,"value":352},{"type":18,"tag":288,"props":3541,"children":3542},{"class":355},[3543],{"type":24,"value":663},{"type":18,"tag":288,"props":3545,"children":3546},{"class":301},[3547],{"type":24,"value":3548},"), ",{"type":18,"tag":288,"props":3550,"children":3551},{"class":355},[3552],{"type":24,"value":663},{"type":18,"tag":288,"props":3554,"children":3555},{"class":301},[3556],{"type":24,"value":3557},")),\n",{"type":18,"tag":288,"props":3559,"children":3560},{"class":290,"line":671},[3561,3565,3570,3574,3578,3582,3586,3590,3594,3598,3602,3606,3610],{"type":18,"tag":288,"props":3562,"children":3563},{"class":301},[3564],{"type":24,"value":1128},{"type":18,"tag":288,"props":3566,"children":3567},{"class":1710},[3568],{"type":24,"value":3569},"'ubg'",{"type":18,"tag":288,"props":3571,"children":3572},{"class":301},[3573],{"type":24,"value":3515},{"type":18,"tag":288,"props":3575,"children":3576},{"class":355},[3577],{"type":24,"value":2672},{"type":18,"tag":288,"props":3579,"children":3580},{"class":301},[3581],{"type":24,"value":2677},{"type":18,"tag":288,"props":3583,"children":3584},{"class":295},[3585],{"type":24,"value":602},{"type":18,"tag":288,"props":3587,"children":3588},{"class":301},[3589],{"type":24,"value":2686},{"type":18,"tag":288,"props":3591,"children":3592},{"class":295},[3593],{"type":24,"value":759},{"type":18,"tag":288,"props":3595,"children":3596},{"class":301},[3597],{"type":24,"value":352},{"type":18,"tag":288,"props":3599,"children":3600},{"class":355},[3601],{"type":24,"value":663},{"type":18,"tag":288,"props":3603,"children":3604},{"class":301},[3605],{"type":24,"value":3548},{"type":18,"tag":288,"props":3607,"children":3608},{"class":355},[3609],{"type":24,"value":663},{"type":18,"tag":288,"props":3611,"children":3612},{"class":301},[3613],{"type":24,"value":3557},{"type":18,"tag":288,"props":3615,"children":3616},{"class":290,"line":680},[3617,3621,3626],{"type":18,"tag":288,"props":3618,"children":3619},{"class":301},[3620],{"type":24,"value":1128},{"type":18,"tag":288,"props":3622,"children":3623},{"class":1710},[3624],{"type":24,"value":3625},"'lbx'",{"type":18,"tag":288,"props":3627,"children":3628},{"class":301},[3629],{"type":24,"value":3630},": lbx,\n",{"type":18,"tag":288,"props":3632,"children":3633},{"class":290,"line":688},[3634,3638,3643],{"type":18,"tag":288,"props":3635,"children":3636},{"class":301},[3637],{"type":24,"value":1128},{"type":18,"tag":288,"props":3639,"children":3640},{"class":1710},[3641],{"type":24,"value":3642},"'ubx'",{"type":18,"tag":288,"props":3644,"children":3645},{"class":301},[3646],{"type":24,"value":3647},": ubx\n",{"type":18,"tag":288,"props":3649,"children":3650},{"class":290,"line":721},[3651],{"type":18,"tag":288,"props":3652,"children":3653},{"class":301},[3654],{"type":24,"value":2635},{"type":18,"tag":27,"props":3656,"children":3657},{},[3658],{"type":24,"value":3659},"Obtain the solution from the solver at eact iteration",{"type":18,"tag":273,"props":3661,"children":3664},{"className":3662,"code":3663,"language":278,"meta":8},[276],"sol = solver(\n            x0=args['x0'],\n            p=args['p'],\n            lbx=args['lbx'],\n            ubx=args['ubx'],\n            lbg=args['lbg'],\n            ubg=args['ubg'],\n        )\n\n        sol_x = ca.reshape(sol['x'][:num_states * (prediction_horizons + 1)], 3, prediction_horizons + 1)\n        sol_u = ca.reshape(sol['x'][num_states * (prediction_horizons + 1):], 2, prediction_horizons)\n",[3665],{"type":18,"tag":281,"props":3666,"children":3667},{},[3668],{"type":18,"tag":273,"props":3669,"children":3670},{"__ignoreMap":8},[3671,3688,3721,3748,3776,3804,3832,3860,3868,3875,3952],{"type":18,"tag":288,"props":3672,"children":3673},{"class":290,"line":291},[3674,3679,3683],{"type":18,"tag":288,"props":3675,"children":3676},{"class":301},[3677],{"type":24,"value":3678},"sol ",{"type":18,"tag":288,"props":3680,"children":3681},{"class":295},[3682],{"type":24,"value":347},{"type":18,"tag":288,"props":3684,"children":3685},{"class":301},[3686],{"type":24,"value":3687}," solver(\n",{"type":18,"tag":288,"props":3689,"children":3690},{"class":290,"line":317},[3691,3696,3702,3706,3711,3716],{"type":18,"tag":288,"props":3692,"children":3693},{"class":301},[3694],{"type":24,"value":3695},"            ",{"type":18,"tag":288,"props":3697,"children":3699},{"class":3698},"ct-657843",[3700],{"type":24,"value":3701},"x0",{"type":18,"tag":288,"props":3703,"children":3704},{"class":295},[3705],{"type":24,"value":347},{"type":18,"tag":288,"props":3707,"children":3708},{"class":301},[3709],{"type":24,"value":3710},"args[",{"type":18,"tag":288,"props":3712,"children":3713},{"class":1710},[3714],{"type":24,"value":3715},"'x0'",{"type":18,"tag":288,"props":3717,"children":3718},{"class":301},[3719],{"type":24,"value":3720},"],\n",{"type":18,"tag":288,"props":3722,"children":3723},{"class":290,"line":326},[3724,3728,3732,3736,3740,3744],{"type":18,"tag":288,"props":3725,"children":3726},{"class":301},[3727],{"type":24,"value":3695},{"type":18,"tag":288,"props":3729,"children":3730},{"class":3698},[3731],{"type":24,"value":27},{"type":18,"tag":288,"props":3733,"children":3734},{"class":295},[3735],{"type":24,"value":347},{"type":18,"tag":288,"props":3737,"children":3738},{"class":301},[3739],{"type":24,"value":3710},{"type":18,"tag":288,"props":3741,"children":3742},{"class":1710},[3743],{"type":24,"value":2452},{"type":18,"tag":288,"props":3745,"children":3746},{"class":301},[3747],{"type":24,"value":3720},{"type":18,"tag":288,"props":3749,"children":3750},{"class":290,"line":336},[3751,3755,3760,3764,3768,3772],{"type":18,"tag":288,"props":3752,"children":3753},{"class":301},[3754],{"type":24,"value":3695},{"type":18,"tag":288,"props":3756,"children":3757},{"class":3698},[3758],{"type":24,"value":3759},"lbx",{"type":18,"tag":288,"props":3761,"children":3762},{"class":295},[3763],{"type":24,"value":347},{"type":18,"tag":288,"props":3765,"children":3766},{"class":301},[3767],{"type":24,"value":3710},{"type":18,"tag":288,"props":3769,"children":3770},{"class":1710},[3771],{"type":24,"value":3625},{"type":18,"tag":288,"props":3773,"children":3774},{"class":301},[3775],{"type":24,"value":3720},{"type":18,"tag":288,"props":3777,"children":3778},{"class":290,"line":361},[3779,3783,3788,3792,3796,3800],{"type":18,"tag":288,"props":3780,"children":3781},{"class":301},[3782],{"type":24,"value":3695},{"type":18,"tag":288,"props":3784,"children":3785},{"class":3698},[3786],{"type":24,"value":3787},"ubx",{"type":18,"tag":288,"props":3789,"children":3790},{"class":295},[3791],{"type":24,"value":347},{"type":18,"tag":288,"props":3793,"children":3794},{"class":301},[3795],{"type":24,"value":3710},{"type":18,"tag":288,"props":3797,"children":3798},{"class":1710},[3799],{"type":24,"value":3642},{"type":18,"tag":288,"props":3801,"children":3802},{"class":301},[3803],{"type":24,"value":3720},{"type":18,"tag":288,"props":3805,"children":3806},{"class":290,"line":370},[3807,3811,3816,3820,3824,3828],{"type":18,"tag":288,"props":3808,"children":3809},{"class":301},[3810],{"type":24,"value":3695},{"type":18,"tag":288,"props":3812,"children":3813},{"class":3698},[3814],{"type":24,"value":3815},"lbg",{"type":18,"tag":288,"props":3817,"children":3818},{"class":295},[3819],{"type":24,"value":347},{"type":18,"tag":288,"props":3821,"children":3822},{"class":301},[3823],{"type":24,"value":3710},{"type":18,"tag":288,"props":3825,"children":3826},{"class":1710},[3827],{"type":24,"value":3510},{"type":18,"tag":288,"props":3829,"children":3830},{"class":301},[3831],{"type":24,"value":3720},{"type":18,"tag":288,"props":3833,"children":3834},{"class":290,"line":392},[3835,3839,3844,3848,3852,3856],{"type":18,"tag":288,"props":3836,"children":3837},{"class":301},[3838],{"type":24,"value":3695},{"type":18,"tag":288,"props":3840,"children":3841},{"class":3698},[3842],{"type":24,"value":3843},"ubg",{"type":18,"tag":288,"props":3845,"children":3846},{"class":295},[3847],{"type":24,"value":347},{"type":18,"tag":288,"props":3849,"children":3850},{"class":301},[3851],{"type":24,"value":3710},{"type":18,"tag":288,"props":3853,"children":3854},{"class":1710},[3855],{"type":24,"value":3569},{"type":18,"tag":288,"props":3857,"children":3858},{"class":301},[3859],{"type":24,"value":3720},{"type":18,"tag":288,"props":3861,"children":3862},{"class":290,"line":401},[3863],{"type":18,"tag":288,"props":3864,"children":3865},{"class":301},[3866],{"type":24,"value":3867},"        )\n",{"type":18,"tag":288,"props":3869,"children":3870},{"class":290,"line":423},[3871],{"type":18,"tag":288,"props":3872,"children":3873},{},[3874],{"type":24,"value":323},{"type":18,"tag":288,"props":3876,"children":3877},{"class":290,"line":444},[3878,3883,3887,3892,3896,3901,3905,3909,3913,3917,3921,3926,3931,3936,3940,3944,3948],{"type":18,"tag":288,"props":3879,"children":3880},{"class":301},[3881],{"type":24,"value":3882},"        sol_x ",{"type":18,"tag":288,"props":3884,"children":3885},{"class":295},[3886],{"type":24,"value":347},{"type":18,"tag":288,"props":3888,"children":3889},{"class":301},[3890],{"type":24,"value":3891}," ca.reshape(sol[",{"type":18,"tag":288,"props":3893,"children":3894},{"class":1710},[3895],{"type":24,"value":2435},{"type":18,"tag":288,"props":3897,"children":3898},{"class":301},[3899],{"type":24,"value":3900},"][:num_states ",{"type":18,"tag":288,"props":3902,"children":3903},{"class":295},[3904],{"type":24,"value":602},{"type":18,"tag":288,"props":3906,"children":3907},{"class":301},[3908],{"type":24,"value":2686},{"type":18,"tag":288,"props":3910,"children":3911},{"class":295},[3912],{"type":24,"value":759},{"type":18,"tag":288,"props":3914,"children":3915},{"class":301},[3916],{"type":24,"value":352},{"type":18,"tag":288,"props":3918,"children":3919},{"class":355},[3920],{"type":24,"value":663},{"type":18,"tag":288,"props":3922,"children":3923},{"class":301},[3924],{"type":24,"value":3925},")], ",{"type":18,"tag":288,"props":3927,"children":3928},{"class":355},[3929],{"type":24,"value":3930},"3",{"type":18,"tag":288,"props":3932,"children":3933},{"class":301},[3934],{"type":24,"value":3935},", prediction_horizons ",{"type":18,"tag":288,"props":3937,"children":3938},{"class":295},[3939],{"type":24,"value":759},{"type":18,"tag":288,"props":3941,"children":3942},{"class":301},[3943],{"type":24,"value":352},{"type":18,"tag":288,"props":3945,"children":3946},{"class":355},[3947],{"type":24,"value":663},{"type":18,"tag":288,"props":3949,"children":3950},{"class":301},[3951],{"type":24,"value":1718},{"type":18,"tag":288,"props":3953,"children":3954},{"class":290,"line":465},[3955,3960,3964,3968,3972,3977,3981,3985,3989,3993,3997,4002,4006],{"type":18,"tag":288,"props":3956,"children":3957},{"class":301},[3958],{"type":24,"value":3959},"        sol_u ",{"type":18,"tag":288,"props":3961,"children":3962},{"class":295},[3963],{"type":24,"value":347},{"type":18,"tag":288,"props":3965,"children":3966},{"class":301},[3967],{"type":24,"value":3891},{"type":18,"tag":288,"props":3969,"children":3970},{"class":1710},[3971],{"type":24,"value":2435},{"type":18,"tag":288,"props":3973,"children":3974},{"class":301},[3975],{"type":24,"value":3976},"][num_states ",{"type":18,"tag":288,"props":3978,"children":3979},{"class":295},[3980],{"type":24,"value":602},{"type":18,"tag":288,"props":3982,"children":3983},{"class":301},[3984],{"type":24,"value":2686},{"type":18,"tag":288,"props":3986,"children":3987},{"class":295},[3988],{"type":24,"value":759},{"type":18,"tag":288,"props":3990,"children":3991},{"class":301},[3992],{"type":24,"value":352},{"type":18,"tag":288,"props":3994,"children":3995},{"class":355},[3996],{"type":24,"value":663},{"type":18,"tag":288,"props":3998,"children":3999},{"class":301},[4000],{"type":24,"value":4001},"):], ",{"type":18,"tag":288,"props":4003,"children":4004},{"class":355},[4005],{"type":24,"value":612},{"type":18,"tag":288,"props":4007,"children":4008},{"class":301},[4009],{"type":24,"value":4010},", prediction_horizons)",{"type":18,"tag":19,"props":4012,"children":4014},{"id":4013},"result",[4015],{"type":24,"value":4016},"Result",{"type":18,"tag":27,"props":4018,"children":4019},{},[4020],{"type":24,"value":4021},"I use MPC to control the differential drive robot to move from it zero position the the desired postion that I want to follow !.\nI generate a circle trajectory and I fit this curve into my beautiful and robustness cost and then volia !!!.",{"type":18,"tag":4023,"props":4024,"children":4029},"figure",{"className":4025},[4026,4027,4028],"mb-4","inline-block","max-w-sm",[4030,4032],{"type":24,"value":4031},"\n  ",{"type":18,"tag":43,"props":4033,"children":4036},{"className":4034,"src":4035,"width":47,"height":48},[46],"/topics/robotics/nmpc/diff_mpc.png",[],{"type":18,"tag":56,"props":4038,"children":4040},{"className":4039},[59,60,61,62],[4041],{"type":24,"value":4042},"\n    Plot of differential drive robot follow the circle trajectory !!!.\n",{"type":18,"tag":19,"props":4044,"children":4046},{"id":4045},"in-conclusion",[4047],{"type":24,"value":4048},"In conclusion",{"type":18,"tag":27,"props":4050,"children":4051},{},[4052],{"type":24,"value":4053},"In my opinion, I think MPC is suitable for the control system, since it can provide the significant control input that was predicted over the finite future of time. This can ensure the safety of the system and also can provide a quick look or reaction to the control action of the system too.",{"type":18,"tag":19,"props":4055,"children":4057},{"id":4056},"reference",[4058],{"type":24,"value":4059},"Reference",{"type":18,"tag":4061,"props":4062,"children":4063},"ol",{},[4064,4077],{"type":18,"tag":117,"props":4065,"children":4066},{},[4067,4069],{"type":24,"value":4068},"MPC-and-MHE-implementation-in-MATLAB-using-Casadi: ",{"type":18,"tag":4070,"props":4071,"children":4075},"a",{"href":4072,"rel":4073},"https://github.com/MMehrez/MPC-and-MHE-implementation-in-MATLAB-using-Casadi",[4074],"nofollow",[4076],{"type":24,"value":4072},{"type":18,"tag":117,"props":4078,"children":4079},{},[4080,4082],{"type":24,"value":4081},"CasAdi: ",{"type":18,"tag":4070,"props":4083,"children":4086},{"href":4084,"rel":4085},"https://web.casadi.org",[4074],[4087],{"type":24,"value":4084},{"type":18,"tag":4089,"children":4090},"style",[4091],{"type":24,"value":4092},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-326375{color:#6A737D;}\n.ct-533739{color:#79B8FF;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":317,"depth":317,"links":4094},[4095,4096,4097,4098,4099,4100,4101,4102,4103],{"id":21,"depth":317,"text":25},{"id":68,"depth":317,"text":71},{"id":219,"depth":317,"text":222},{"id":1518,"depth":317,"text":1521},{"id":1561,"depth":317,"text":1564},{"id":1601,"depth":317,"text":1604},{"id":4013,"depth":317,"text":4016},{"id":4045,"depth":317,"text":4048},{"id":4056,"depth":317,"text":4059},"markdown","content:topics:robotics:nonlinear-mpc.md","content","topics/robotics/nonlinear-mpc.md","md",{"_path":4110,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":4111,"description":4112,"author":4113,"slug":4114,"tag":4114,"img":4115,"body":4116,"_type":4104,"_id":6033,"_source":4106,"_file":6034,"_extension":4108},"/topics/robotics/pid-controller","Introduction to PID Controller in Python","PID Control is a feedback control","DIN SOKHENG","pid","/topics/robotics/nmpc/PID.png",{"type":15,"children":4117,"toc":6019},[4118,4124,4135,4141,4146,4152,4156,4195,4204,4210,4216,4226,4232,4237,4271,4277,4282,4287,4297,4303,4308,4312,4317,4321,4326,4739,4756,5303,5308,5314,5321,5339,5425,5430,5492,5497,5581,5593,5881,5887,5906,5920,5924,5934,5940,5950,5956,5961,5966,5972,6015],{"type":18,"tag":19,"props":4119,"children":4121},{"id":4120},"what-is-pid-controller",[4122],{"type":24,"value":4123},"What is PID Controller ?",{"type":18,"tag":27,"props":4125,"children":4126},{},[4127,4129,4133],{"type":24,"value":4128},"The Proportional Integral Derivative (PID) controller is a traditional method in control systems that has found widespread use in control system engineering and industrial applications since its emergence in the 1940s. A PID controller is considered a feedback controller, aiming to minimize the error between the system's feedback and the desired setpoint by manually or automatically fine-tuning the coefficients ",{"type":18,"tag":92,"props":4130,"children":4132},{"latex-express":4131,"styles":123},"K_{P}, K_{I}, K_{D}",[],{"type":24,"value":4134},".",{"type":18,"tag":19,"props":4136,"children":4138},{"id":4137},"how-it-works",[4139],{"type":24,"value":4140},"How it works ?",{"type":18,"tag":27,"props":4142,"children":4143},{},[4144],{"type":24,"value":4145},"Imagine you want to control the speed of a DC motor to reach 300 RPM, but due to the natural response of the DC motor, it cannot reach the desired angular speed. PID offers a solution to this natural response by adjusting the system's time response using its three components, as shown in the formula below.",{"type":18,"tag":19,"props":4147,"children":4149},{"id":4148},"formulation",[4150],{"type":24,"value":4151},"Formulation",{"type":18,"tag":92,"props":4153,"children":4155},{"latex-express":4154,"styles":59},"u(t) = K_{p}e(t) + K_{I} \\int_{0}^{t} e(t) dt + K_{D} \\frac{d e(t)}{dt} ",[],{"type":18,"tag":113,"props":4157,"children":4158},{},[4159,4168,4177,4186],{"type":18,"tag":117,"props":4160,"children":4161},{},[4162,4166],{"type":18,"tag":92,"props":4163,"children":4165},{"latex-express":4164,"styles":123},"K_{P}",[],{"type":24,"value":4167}," represents the proportional gain.",{"type":18,"tag":117,"props":4169,"children":4170},{},[4171,4175],{"type":18,"tag":92,"props":4172,"children":4174},{"latex-express":4173,"styles":123},"K_{I}",[],{"type":24,"value":4176}," represents the integral gain.",{"type":18,"tag":117,"props":4178,"children":4179},{},[4180,4184],{"type":18,"tag":92,"props":4181,"children":4183},{"latex-express":4182,"styles":123},"K_{D}",[],{"type":24,"value":4185}," represents the derivative gain.",{"type":18,"tag":117,"props":4187,"children":4188},{},[4189,4193],{"type":18,"tag":92,"props":4190,"children":4192},{"latex-express":4191,"styles":123},"e(t)=target-feedback",[],{"type":24,"value":4194}," is the error between target point and feedback of the system",{"type":18,"tag":4023,"props":4196,"children":4198},{"className":4197},[4026,4027,4028],[4199,4200],{"type":24,"value":4031},{"type":18,"tag":43,"props":4201,"children":4203},{"className":4202,"src":4115},[46],[],{"type":18,"tag":56,"props":4205,"children":4207},{"className":4206},[59,60,61,62],[4208],{"type":24,"value":4209},"\n    The Block diagram of PID Controller\n",{"type":18,"tag":19,"props":4211,"children":4213},{"id":4212},"response-time",[4214],{"type":24,"value":4215},"Response Time",{"type":18,"tag":4023,"props":4217,"children":4219},{"className":4218},[4026,4027,4028],[4220,4221],{"type":24,"value":4031},{"type":18,"tag":43,"props":4222,"children":4225},{"className":4223,"src":4224},[46],"/topics/robotics/nmpc/response_timepid.png",[],{"type":18,"tag":56,"props":4227,"children":4229},{"className":4228},[59,60,61,62],[4230],{"type":24,"value":4231},"\n    The response time of the system with each K_P, K_I, K_D\n",{"type":18,"tag":27,"props":4233,"children":4234},{},[4235],{"type":24,"value":4236},"As you can see in the figure above, the response time of the system is difference.",{"type":18,"tag":113,"props":4238,"children":4239},{},[4240,4251,4261],{"type":18,"tag":117,"props":4241,"children":4242},{},[4243,4245,4249],{"type":24,"value":4244},"The response time with ",{"type":18,"tag":92,"props":4246,"children":4248},{"latex-express":4247,"styles":123},"K_{I}=2",[],{"type":24,"value":4250}," the system is likely to overshoot before reaching the steady-state, which may not be suitable for applications like controlling a DC motor.",{"type":18,"tag":117,"props":4252,"children":4253},{},[4254,4255,4259],{"type":24,"value":4244},{"type":18,"tag":92,"props":4256,"children":4258},{"latex-express":4257,"styles":123},"K_{i}=0.5, ",[],{"type":24,"value":4260},"  the response does not overshoot but has a slower response to reach the steady-state.",{"type":18,"tag":117,"props":4262,"children":4263},{},[4264,4265,4269],{"type":24,"value":4244},{"type":18,"tag":92,"props":4266,"children":4268},{"latex-express":4267,"styles":123},"K_{p}=1, K_{i}=1, K_{d}=1",[],{"type":24,"value":4270},"  there is a slight overshoot, but the steady-state is reached faster.",{"type":18,"tag":19,"props":4272,"children":4274},{"id":4273},"how-can-we-write-pid-code-in-python",[4275],{"type":24,"value":4276},"How can we write PID code in Python ?",{"type":18,"tag":27,"props":4278,"children":4279},{},[4280],{"type":24,"value":4281},"Let's use a differential drive robot as a case study system. A differential drive robot is commonly used in robotics and automation, making it an ideal choice for a demonstration.",{"type":18,"tag":27,"props":4283,"children":4284},{},[4285],{"type":24,"value":4286},"The configuration of Differential Drive Robot in axes OXY.",{"type":18,"tag":4023,"props":4288,"children":4290},{"className":4289},[4026,4027,4028],[4291,4292],{"type":24,"value":4031},{"type":18,"tag":43,"props":4293,"children":4296},{"className":4294,"src":4295},[46],"/topics/robotics/nmpc/diff_drive.png",[],{"type":18,"tag":56,"props":4298,"children":4300},{"className":4299},[59,60,61,62],[4301],{"type":24,"value":4302},"\n    The configuration of Differential Drive Robot in axes OXY.\n",{"type":18,"tag":27,"props":4304,"children":4305},{},[4306],{"type":24,"value":4307},"The forward kinematic equation",{"type":18,"tag":92,"props":4309,"children":4311},{"latex-express":4310,"styles":59},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{\\theta} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":4313,"children":4314},{},[4315],{"type":24,"value":4316},"So, if we discretize the forward kinematic with a certain sampling time, we will get",{"type":18,"tag":92,"props":4318,"children":4320},{"latex-express":4319,"styles":59},"\n\\begin{bmatrix} x_{t+1} \\\\ y_{t+1} \\\\ \\theta_{t+1} \\end{bmatrix} = \\begin{bmatrix} x_{t} \\\\ y_{t} \\\\ \\theta_{t} \\end{bmatrix} +\\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix} \\times \\Delta t\n ",[],{"type":18,"tag":27,"props":4322,"children":4323},{},[4324],{"type":24,"value":4325},"In Python,",{"type":18,"tag":273,"props":4327,"children":4330},{"className":4328,"code":4329,"language":278,"meta":8},[276],"class DifferentialDrive:\n    def __init__(self):\n        self.r = 0.05\n        self.L = 0.25\n    def forward_kinematic(self, v, omega, yaw):\n        vx = v*np.cos(yaw)\n        vy = v*np.sin(yaw)\n        vyaw = omega\n\n        return vx, vy, vyaw\n    def discrete_state(self, x, y, yaw, v, omega, dt):\n        dx, dy, dyaw = self.forward_kinematic(v, omega, yaw)\n        x_next = x + dx * dt\n        y_next = y + dy * dt\n        yaw_next = yaw + dyaw * dt\n\n        return x_next, y_next, yaw_next\n",[4331],{"type":18,"tag":281,"props":4332,"children":4333},{},[4334],{"type":18,"tag":273,"props":4335,"children":4336},{"__ignoreMap":8},[4337,4360,4386,4417,4446,4471,4497,4522,4539,4546,4563,4588,4613,4648,4682,4716,4723],{"type":18,"tag":288,"props":4338,"children":4339},{"class":290,"line":291},[4340,4345,4349,4355],{"type":18,"tag":288,"props":4341,"children":4342},{"class":295},[4343],{"type":24,"value":4344},"class",{"type":18,"tag":288,"props":4346,"children":4347},{"class":301},[4348],{"type":24,"value":352},{"type":18,"tag":288,"props":4350,"children":4352},{"class":4351},"ct-806137",[4353],{"type":24,"value":4354},"DifferentialDrive",{"type":18,"tag":288,"props":4356,"children":4357},{"class":301},[4358],{"type":24,"value":4359},":\n",{"type":18,"tag":288,"props":4361,"children":4362},{"class":290,"line":317},[4363,4367,4372,4376,4381],{"type":18,"tag":288,"props":4364,"children":4365},{"class":301},[4366],{"type":24,"value":1128},{"type":18,"tag":288,"props":4368,"children":4369},{"class":295},[4370],{"type":24,"value":4371},"def",{"type":18,"tag":288,"props":4373,"children":4374},{"class":301},[4375],{"type":24,"value":352},{"type":18,"tag":288,"props":4377,"children":4378},{"class":355},[4379],{"type":24,"value":4380},"__init__",{"type":18,"tag":288,"props":4382,"children":4383},{"class":301},[4384],{"type":24,"value":4385},"(self):\n",{"type":18,"tag":288,"props":4387,"children":4388},{"class":290,"line":326},[4389,4394,4399,4404,4408,4412],{"type":18,"tag":288,"props":4390,"children":4391},{"class":301},[4392],{"type":24,"value":4393},"        ",{"type":18,"tag":288,"props":4395,"children":4396},{"class":355},[4397],{"type":24,"value":4398},"self",{"type":18,"tag":288,"props":4400,"children":4401},{"class":301},[4402],{"type":24,"value":4403},".r ",{"type":18,"tag":288,"props":4405,"children":4406},{"class":295},[4407],{"type":24,"value":347},{"type":18,"tag":288,"props":4409,"children":4410},{"class":301},[4411],{"type":24,"value":352},{"type":18,"tag":288,"props":4413,"children":4414},{"class":355},[4415],{"type":24,"value":4416},"0.05\n",{"type":18,"tag":288,"props":4418,"children":4419},{"class":290,"line":336},[4420,4424,4428,4433,4437,4441],{"type":18,"tag":288,"props":4421,"children":4422},{"class":301},[4423],{"type":24,"value":4393},{"type":18,"tag":288,"props":4425,"children":4426},{"class":355},[4427],{"type":24,"value":4398},{"type":18,"tag":288,"props":4429,"children":4430},{"class":301},[4431],{"type":24,"value":4432},".L ",{"type":18,"tag":288,"props":4434,"children":4435},{"class":295},[4436],{"type":24,"value":347},{"type":18,"tag":288,"props":4438,"children":4439},{"class":301},[4440],{"type":24,"value":352},{"type":18,"tag":288,"props":4442,"children":4443},{"class":355},[4444],{"type":24,"value":4445},"0.25\n",{"type":18,"tag":288,"props":4447,"children":4448},{"class":290,"line":361},[4449,4453,4457,4461,4466],{"type":18,"tag":288,"props":4450,"children":4451},{"class":301},[4452],{"type":24,"value":1128},{"type":18,"tag":288,"props":4454,"children":4455},{"class":295},[4456],{"type":24,"value":4371},{"type":18,"tag":288,"props":4458,"children":4459},{"class":301},[4460],{"type":24,"value":352},{"type":18,"tag":288,"props":4462,"children":4463},{"class":4351},[4464],{"type":24,"value":4465},"forward_kinematic",{"type":18,"tag":288,"props":4467,"children":4468},{"class":301},[4469],{"type":24,"value":4470},"(self, v, omega, yaw):\n",{"type":18,"tag":288,"props":4472,"children":4473},{"class":290,"line":370},[4474,4479,4483,4488,4492],{"type":18,"tag":288,"props":4475,"children":4476},{"class":301},[4477],{"type":24,"value":4478},"        vx ",{"type":18,"tag":288,"props":4480,"children":4481},{"class":295},[4482],{"type":24,"value":347},{"type":18,"tag":288,"props":4484,"children":4485},{"class":301},[4486],{"type":24,"value":4487}," v",{"type":18,"tag":288,"props":4489,"children":4490},{"class":295},[4491],{"type":24,"value":602},{"type":18,"tag":288,"props":4493,"children":4494},{"class":301},[4495],{"type":24,"value":4496},"np.cos(yaw)\n",{"type":18,"tag":288,"props":4498,"children":4499},{"class":290,"line":392},[4500,4505,4509,4513,4517],{"type":18,"tag":288,"props":4501,"children":4502},{"class":301},[4503],{"type":24,"value":4504},"        vy ",{"type":18,"tag":288,"props":4506,"children":4507},{"class":295},[4508],{"type":24,"value":347},{"type":18,"tag":288,"props":4510,"children":4511},{"class":301},[4512],{"type":24,"value":4487},{"type":18,"tag":288,"props":4514,"children":4515},{"class":295},[4516],{"type":24,"value":602},{"type":18,"tag":288,"props":4518,"children":4519},{"class":301},[4520],{"type":24,"value":4521},"np.sin(yaw)\n",{"type":18,"tag":288,"props":4523,"children":4524},{"class":290,"line":401},[4525,4530,4534],{"type":18,"tag":288,"props":4526,"children":4527},{"class":301},[4528],{"type":24,"value":4529},"        vyaw ",{"type":18,"tag":288,"props":4531,"children":4532},{"class":295},[4533],{"type":24,"value":347},{"type":18,"tag":288,"props":4535,"children":4536},{"class":301},[4537],{"type":24,"value":4538}," omega\n",{"type":18,"tag":288,"props":4540,"children":4541},{"class":290,"line":423},[4542],{"type":18,"tag":288,"props":4543,"children":4544},{},[4545],{"type":24,"value":323},{"type":18,"tag":288,"props":4547,"children":4548},{"class":290,"line":444},[4549,4553,4558],{"type":18,"tag":288,"props":4550,"children":4551},{"class":301},[4552],{"type":24,"value":4393},{"type":18,"tag":288,"props":4554,"children":4555},{"class":295},[4556],{"type":24,"value":4557},"return",{"type":18,"tag":288,"props":4559,"children":4560},{"class":301},[4561],{"type":24,"value":4562}," vx, vy, vyaw\n",{"type":18,"tag":288,"props":4564,"children":4565},{"class":290,"line":465},[4566,4570,4574,4578,4583],{"type":18,"tag":288,"props":4567,"children":4568},{"class":301},[4569],{"type":24,"value":1128},{"type":18,"tag":288,"props":4571,"children":4572},{"class":295},[4573],{"type":24,"value":4371},{"type":18,"tag":288,"props":4575,"children":4576},{"class":301},[4577],{"type":24,"value":352},{"type":18,"tag":288,"props":4579,"children":4580},{"class":4351},[4581],{"type":24,"value":4582},"discrete_state",{"type":18,"tag":288,"props":4584,"children":4585},{"class":301},[4586],{"type":24,"value":4587},"(self, x, y, yaw, v, omega, dt):\n",{"type":18,"tag":288,"props":4589,"children":4590},{"class":290,"line":474},[4591,4596,4600,4604,4608],{"type":18,"tag":288,"props":4592,"children":4593},{"class":301},[4594],{"type":24,"value":4595},"        dx, dy, dyaw ",{"type":18,"tag":288,"props":4597,"children":4598},{"class":295},[4599],{"type":24,"value":347},{"type":18,"tag":288,"props":4601,"children":4602},{"class":301},[4603],{"type":24,"value":352},{"type":18,"tag":288,"props":4605,"children":4606},{"class":355},[4607],{"type":24,"value":4398},{"type":18,"tag":288,"props":4609,"children":4610},{"class":301},[4611],{"type":24,"value":4612},".forward_kinematic(v, omega, yaw)\n",{"type":18,"tag":288,"props":4614,"children":4615},{"class":290,"line":505},[4616,4621,4625,4630,4634,4639,4643],{"type":18,"tag":288,"props":4617,"children":4618},{"class":301},[4619],{"type":24,"value":4620},"        x_next ",{"type":18,"tag":288,"props":4622,"children":4623},{"class":295},[4624],{"type":24,"value":347},{"type":18,"tag":288,"props":4626,"children":4627},{"class":301},[4628],{"type":24,"value":4629}," x ",{"type":18,"tag":288,"props":4631,"children":4632},{"class":295},[4633],{"type":24,"value":759},{"type":18,"tag":288,"props":4635,"children":4636},{"class":301},[4637],{"type":24,"value":4638}," dx ",{"type":18,"tag":288,"props":4640,"children":4641},{"class":295},[4642],{"type":24,"value":602},{"type":18,"tag":288,"props":4644,"children":4645},{"class":301},[4646],{"type":24,"value":4647}," dt\n",{"type":18,"tag":288,"props":4649,"children":4650},{"class":290,"line":536},[4651,4656,4660,4665,4669,4674,4678],{"type":18,"tag":288,"props":4652,"children":4653},{"class":301},[4654],{"type":24,"value":4655},"        y_next ",{"type":18,"tag":288,"props":4657,"children":4658},{"class":295},[4659],{"type":24,"value":347},{"type":18,"tag":288,"props":4661,"children":4662},{"class":301},[4663],{"type":24,"value":4664}," y ",{"type":18,"tag":288,"props":4666,"children":4667},{"class":295},[4668],{"type":24,"value":759},{"type":18,"tag":288,"props":4670,"children":4671},{"class":301},[4672],{"type":24,"value":4673}," dy ",{"type":18,"tag":288,"props":4675,"children":4676},{"class":295},[4677],{"type":24,"value":602},{"type":18,"tag":288,"props":4679,"children":4680},{"class":301},[4681],{"type":24,"value":4647},{"type":18,"tag":288,"props":4683,"children":4684},{"class":290,"line":545},[4685,4690,4694,4699,4703,4708,4712],{"type":18,"tag":288,"props":4686,"children":4687},{"class":301},[4688],{"type":24,"value":4689},"        yaw_next ",{"type":18,"tag":288,"props":4691,"children":4692},{"class":295},[4693],{"type":24,"value":347},{"type":18,"tag":288,"props":4695,"children":4696},{"class":301},[4697],{"type":24,"value":4698}," yaw ",{"type":18,"tag":288,"props":4700,"children":4701},{"class":295},[4702],{"type":24,"value":759},{"type":18,"tag":288,"props":4704,"children":4705},{"class":301},[4706],{"type":24,"value":4707}," dyaw ",{"type":18,"tag":288,"props":4709,"children":4710},{"class":295},[4711],{"type":24,"value":602},{"type":18,"tag":288,"props":4713,"children":4714},{"class":301},[4715],{"type":24,"value":4647},{"type":18,"tag":288,"props":4717,"children":4718},{"class":290,"line":554},[4719],{"type":18,"tag":288,"props":4720,"children":4721},{},[4722],{"type":24,"value":323},{"type":18,"tag":288,"props":4724,"children":4725},{"class":290,"line":581},[4726,4730,4734],{"type":18,"tag":288,"props":4727,"children":4728},{"class":301},[4729],{"type":24,"value":4393},{"type":18,"tag":288,"props":4731,"children":4732},{"class":295},[4733],{"type":24,"value":4557},{"type":18,"tag":288,"props":4735,"children":4736},{"class":301},[4737],{"type":24,"value":4738}," x_next, y_next, yaw_next",{"type":18,"tag":27,"props":4740,"children":4741},{},[4742,4744,4748,4750,4755],{"type":24,"value":4743},"The ",{"type":18,"tag":229,"props":4745,"children":4746},{},[4747],{"type":24,"value":233},{"type":24,"value":4749}," class that we defined, has all the need attribute to use for PID control !!. We just need to write another class for our ",{"type":18,"tag":229,"props":4751,"children":4752},{},[4753],{"type":24,"value":4754}," PID Controller ",{"type":24,"value":4134},{"type":18,"tag":273,"props":4757,"children":4760},{"className":4758,"code":4759,"language":278,"meta":8},[276],"class PIDController:\n    def __init__(self, kp, ki, kd, dt):\n\n        self.kp = kp\n        self.ki = ki\n        self.kd = kd\n        self.dt = dt\n        self.integral = 0\n\n    def calculate_pid(self, errors):\n        # Calculate proportional error\n        proportional = self.kp * errors[-1]\n        # Calculate integration error\n        integral = self.integral + self.ki * (errors[-1]) * self.dt\n        self.integral = integral\n        # Calculate derivative error\n        derivative = self.kd * (errors[-1] - errors[-2])/self.dt\n\n        output = proportional + integral + derivative\n\n        return output\n",[4761],{"type":18,"tag":281,"props":4762,"children":4763},{},[4764],{"type":18,"tag":273,"props":4765,"children":4766},{"__ignoreMap":8},[4767,4787,4811,4818,4843,4868,4893,4917,4945,4952,4977,4989,5035,5047,5125,5149,5161,5238,5245,5280,5287],{"type":18,"tag":288,"props":4768,"children":4769},{"class":290,"line":291},[4770,4774,4778,4783],{"type":18,"tag":288,"props":4771,"children":4772},{"class":295},[4773],{"type":24,"value":4344},{"type":18,"tag":288,"props":4775,"children":4776},{"class":301},[4777],{"type":24,"value":352},{"type":18,"tag":288,"props":4779,"children":4780},{"class":4351},[4781],{"type":24,"value":4782},"PIDController",{"type":18,"tag":288,"props":4784,"children":4785},{"class":301},[4786],{"type":24,"value":4359},{"type":18,"tag":288,"props":4788,"children":4789},{"class":290,"line":317},[4790,4794,4798,4802,4806],{"type":18,"tag":288,"props":4791,"children":4792},{"class":301},[4793],{"type":24,"value":1128},{"type":18,"tag":288,"props":4795,"children":4796},{"class":295},[4797],{"type":24,"value":4371},{"type":18,"tag":288,"props":4799,"children":4800},{"class":301},[4801],{"type":24,"value":352},{"type":18,"tag":288,"props":4803,"children":4804},{"class":355},[4805],{"type":24,"value":4380},{"type":18,"tag":288,"props":4807,"children":4808},{"class":301},[4809],{"type":24,"value":4810},"(self, kp, ki, kd, dt):\n",{"type":18,"tag":288,"props":4812,"children":4813},{"class":290,"line":326},[4814],{"type":18,"tag":288,"props":4815,"children":4816},{},[4817],{"type":24,"value":323},{"type":18,"tag":288,"props":4819,"children":4820},{"class":290,"line":336},[4821,4825,4829,4834,4838],{"type":18,"tag":288,"props":4822,"children":4823},{"class":301},[4824],{"type":24,"value":4393},{"type":18,"tag":288,"props":4826,"children":4827},{"class":355},[4828],{"type":24,"value":4398},{"type":18,"tag":288,"props":4830,"children":4831},{"class":301},[4832],{"type":24,"value":4833},".kp ",{"type":18,"tag":288,"props":4835,"children":4836},{"class":295},[4837],{"type":24,"value":347},{"type":18,"tag":288,"props":4839,"children":4840},{"class":301},[4841],{"type":24,"value":4842}," kp\n",{"type":18,"tag":288,"props":4844,"children":4845},{"class":290,"line":361},[4846,4850,4854,4859,4863],{"type":18,"tag":288,"props":4847,"children":4848},{"class":301},[4849],{"type":24,"value":4393},{"type":18,"tag":288,"props":4851,"children":4852},{"class":355},[4853],{"type":24,"value":4398},{"type":18,"tag":288,"props":4855,"children":4856},{"class":301},[4857],{"type":24,"value":4858},".ki ",{"type":18,"tag":288,"props":4860,"children":4861},{"class":295},[4862],{"type":24,"value":347},{"type":18,"tag":288,"props":4864,"children":4865},{"class":301},[4866],{"type":24,"value":4867}," ki\n",{"type":18,"tag":288,"props":4869,"children":4870},{"class":290,"line":370},[4871,4875,4879,4884,4888],{"type":18,"tag":288,"props":4872,"children":4873},{"class":301},[4874],{"type":24,"value":4393},{"type":18,"tag":288,"props":4876,"children":4877},{"class":355},[4878],{"type":24,"value":4398},{"type":18,"tag":288,"props":4880,"children":4881},{"class":301},[4882],{"type":24,"value":4883},".kd ",{"type":18,"tag":288,"props":4885,"children":4886},{"class":295},[4887],{"type":24,"value":347},{"type":18,"tag":288,"props":4889,"children":4890},{"class":301},[4891],{"type":24,"value":4892}," kd\n",{"type":18,"tag":288,"props":4894,"children":4895},{"class":290,"line":392},[4896,4900,4904,4909,4913],{"type":18,"tag":288,"props":4897,"children":4898},{"class":301},[4899],{"type":24,"value":4393},{"type":18,"tag":288,"props":4901,"children":4902},{"class":355},[4903],{"type":24,"value":4398},{"type":18,"tag":288,"props":4905,"children":4906},{"class":301},[4907],{"type":24,"value":4908},".dt ",{"type":18,"tag":288,"props":4910,"children":4911},{"class":295},[4912],{"type":24,"value":347},{"type":18,"tag":288,"props":4914,"children":4915},{"class":301},[4916],{"type":24,"value":4647},{"type":18,"tag":288,"props":4918,"children":4919},{"class":290,"line":401},[4920,4924,4928,4933,4937,4941],{"type":18,"tag":288,"props":4921,"children":4922},{"class":301},[4923],{"type":24,"value":4393},{"type":18,"tag":288,"props":4925,"children":4926},{"class":355},[4927],{"type":24,"value":4398},{"type":18,"tag":288,"props":4929,"children":4930},{"class":301},[4931],{"type":24,"value":4932},".integral ",{"type":18,"tag":288,"props":4934,"children":4935},{"class":295},[4936],{"type":24,"value":347},{"type":18,"tag":288,"props":4938,"children":4939},{"class":301},[4940],{"type":24,"value":352},{"type":18,"tag":288,"props":4942,"children":4943},{"class":355},[4944],{"type":24,"value":2627},{"type":18,"tag":288,"props":4946,"children":4947},{"class":290,"line":423},[4948],{"type":18,"tag":288,"props":4949,"children":4950},{},[4951],{"type":24,"value":323},{"type":18,"tag":288,"props":4953,"children":4954},{"class":290,"line":444},[4955,4959,4963,4967,4972],{"type":18,"tag":288,"props":4956,"children":4957},{"class":301},[4958],{"type":24,"value":1128},{"type":18,"tag":288,"props":4960,"children":4961},{"class":295},[4962],{"type":24,"value":4371},{"type":18,"tag":288,"props":4964,"children":4965},{"class":301},[4966],{"type":24,"value":352},{"type":18,"tag":288,"props":4968,"children":4969},{"class":4351},[4970],{"type":24,"value":4971},"calculate_pid",{"type":18,"tag":288,"props":4973,"children":4974},{"class":301},[4975],{"type":24,"value":4976},"(self, errors):\n",{"type":18,"tag":288,"props":4978,"children":4979},{"class":290,"line":465},[4980,4984],{"type":18,"tag":288,"props":4981,"children":4982},{"class":301},[4983],{"type":24,"value":4393},{"type":18,"tag":288,"props":4985,"children":4986},{"class":330},[4987],{"type":24,"value":4988},"# Calculate proportional error\n",{"type":18,"tag":288,"props":4990,"children":4991},{"class":290,"line":474},[4992,4997,5001,5005,5009,5013,5017,5022,5026,5030],{"type":18,"tag":288,"props":4993,"children":4994},{"class":301},[4995],{"type":24,"value":4996},"        proportional ",{"type":18,"tag":288,"props":4998,"children":4999},{"class":295},[5000],{"type":24,"value":347},{"type":18,"tag":288,"props":5002,"children":5003},{"class":301},[5004],{"type":24,"value":352},{"type":18,"tag":288,"props":5006,"children":5007},{"class":355},[5008],{"type":24,"value":4398},{"type":18,"tag":288,"props":5010,"children":5011},{"class":301},[5012],{"type":24,"value":4833},{"type":18,"tag":288,"props":5014,"children":5015},{"class":295},[5016],{"type":24,"value":602},{"type":18,"tag":288,"props":5018,"children":5019},{"class":301},[5020],{"type":24,"value":5021}," errors[",{"type":18,"tag":288,"props":5023,"children":5024},{"class":295},[5025],{"type":24,"value":2002},{"type":18,"tag":288,"props":5027,"children":5028},{"class":355},[5029],{"type":24,"value":663},{"type":18,"tag":288,"props":5031,"children":5032},{"class":301},[5033],{"type":24,"value":5034},"]\n",{"type":18,"tag":288,"props":5036,"children":5037},{"class":290,"line":505},[5038,5042],{"type":18,"tag":288,"props":5039,"children":5040},{"class":301},[5041],{"type":24,"value":4393},{"type":18,"tag":288,"props":5043,"children":5044},{"class":330},[5045],{"type":24,"value":5046},"# Calculate integration error\n",{"type":18,"tag":288,"props":5048,"children":5049},{"class":290,"line":536},[5050,5055,5059,5063,5067,5071,5075,5079,5083,5087,5091,5096,5100,5104,5108,5112,5116,5120],{"type":18,"tag":288,"props":5051,"children":5052},{"class":301},[5053],{"type":24,"value":5054},"        integral ",{"type":18,"tag":288,"props":5056,"children":5057},{"class":295},[5058],{"type":24,"value":347},{"type":18,"tag":288,"props":5060,"children":5061},{"class":301},[5062],{"type":24,"value":352},{"type":18,"tag":288,"props":5064,"children":5065},{"class":355},[5066],{"type":24,"value":4398},{"type":18,"tag":288,"props":5068,"children":5069},{"class":301},[5070],{"type":24,"value":4932},{"type":18,"tag":288,"props":5072,"children":5073},{"class":295},[5074],{"type":24,"value":759},{"type":18,"tag":288,"props":5076,"children":5077},{"class":301},[5078],{"type":24,"value":352},{"type":18,"tag":288,"props":5080,"children":5081},{"class":355},[5082],{"type":24,"value":4398},{"type":18,"tag":288,"props":5084,"children":5085},{"class":301},[5086],{"type":24,"value":4858},{"type":18,"tag":288,"props":5088,"children":5089},{"class":295},[5090],{"type":24,"value":602},{"type":18,"tag":288,"props":5092,"children":5093},{"class":301},[5094],{"type":24,"value":5095}," (errors[",{"type":18,"tag":288,"props":5097,"children":5098},{"class":295},[5099],{"type":24,"value":2002},{"type":18,"tag":288,"props":5101,"children":5102},{"class":355},[5103],{"type":24,"value":663},{"type":18,"tag":288,"props":5105,"children":5106},{"class":301},[5107],{"type":24,"value":1243},{"type":18,"tag":288,"props":5109,"children":5110},{"class":295},[5111],{"type":24,"value":602},{"type":18,"tag":288,"props":5113,"children":5114},{"class":301},[5115],{"type":24,"value":352},{"type":18,"tag":288,"props":5117,"children":5118},{"class":355},[5119],{"type":24,"value":4398},{"type":18,"tag":288,"props":5121,"children":5122},{"class":301},[5123],{"type":24,"value":5124},".dt\n",{"type":18,"tag":288,"props":5126,"children":5127},{"class":290,"line":545},[5128,5132,5136,5140,5144],{"type":18,"tag":288,"props":5129,"children":5130},{"class":301},[5131],{"type":24,"value":4393},{"type":18,"tag":288,"props":5133,"children":5134},{"class":355},[5135],{"type":24,"value":4398},{"type":18,"tag":288,"props":5137,"children":5138},{"class":301},[5139],{"type":24,"value":4932},{"type":18,"tag":288,"props":5141,"children":5142},{"class":295},[5143],{"type":24,"value":347},{"type":18,"tag":288,"props":5145,"children":5146},{"class":301},[5147],{"type":24,"value":5148}," integral\n",{"type":18,"tag":288,"props":5150,"children":5151},{"class":290,"line":554},[5152,5156],{"type":18,"tag":288,"props":5153,"children":5154},{"class":301},[5155],{"type":24,"value":4393},{"type":18,"tag":288,"props":5157,"children":5158},{"class":330},[5159],{"type":24,"value":5160},"# Calculate derivative error\n",{"type":18,"tag":288,"props":5162,"children":5163},{"class":290,"line":581},[5164,5169,5173,5177,5181,5185,5189,5193,5197,5201,5205,5209,5213,5217,5221,5226,5230,5234],{"type":18,"tag":288,"props":5165,"children":5166},{"class":301},[5167],{"type":24,"value":5168},"        derivative ",{"type":18,"tag":288,"props":5170,"children":5171},{"class":295},[5172],{"type":24,"value":347},{"type":18,"tag":288,"props":5174,"children":5175},{"class":301},[5176],{"type":24,"value":352},{"type":18,"tag":288,"props":5178,"children":5179},{"class":355},[5180],{"type":24,"value":4398},{"type":18,"tag":288,"props":5182,"children":5183},{"class":301},[5184],{"type":24,"value":4883},{"type":18,"tag":288,"props":5186,"children":5187},{"class":295},[5188],{"type":24,"value":602},{"type":18,"tag":288,"props":5190,"children":5191},{"class":301},[5192],{"type":24,"value":5095},{"type":18,"tag":288,"props":5194,"children":5195},{"class":295},[5196],{"type":24,"value":2002},{"type":18,"tag":288,"props":5198,"children":5199},{"class":355},[5200],{"type":24,"value":663},{"type":18,"tag":288,"props":5202,"children":5203},{"class":301},[5204],{"type":24,"value":1161},{"type":18,"tag":288,"props":5206,"children":5207},{"class":295},[5208],{"type":24,"value":2002},{"type":18,"tag":288,"props":5210,"children":5211},{"class":301},[5212],{"type":24,"value":5021},{"type":18,"tag":288,"props":5214,"children":5215},{"class":295},[5216],{"type":24,"value":2002},{"type":18,"tag":288,"props":5218,"children":5219},{"class":355},[5220],{"type":24,"value":612},{"type":18,"tag":288,"props":5222,"children":5223},{"class":301},[5224],{"type":24,"value":5225},"])",{"type":18,"tag":288,"props":5227,"children":5228},{"class":295},[5229],{"type":24,"value":769},{"type":18,"tag":288,"props":5231,"children":5232},{"class":355},[5233],{"type":24,"value":4398},{"type":18,"tag":288,"props":5235,"children":5236},{"class":301},[5237],{"type":24,"value":5124},{"type":18,"tag":288,"props":5239,"children":5240},{"class":290,"line":620},[5241],{"type":18,"tag":288,"props":5242,"children":5243},{},[5244],{"type":24,"value":323},{"type":18,"tag":288,"props":5246,"children":5247},{"class":290,"line":653},[5248,5253,5257,5262,5266,5271,5275],{"type":18,"tag":288,"props":5249,"children":5250},{"class":301},[5251],{"type":24,"value":5252},"        output ",{"type":18,"tag":288,"props":5254,"children":5255},{"class":295},[5256],{"type":24,"value":347},{"type":18,"tag":288,"props":5258,"children":5259},{"class":301},[5260],{"type":24,"value":5261}," proportional ",{"type":18,"tag":288,"props":5263,"children":5264},{"class":295},[5265],{"type":24,"value":759},{"type":18,"tag":288,"props":5267,"children":5268},{"class":301},[5269],{"type":24,"value":5270}," integral ",{"type":18,"tag":288,"props":5272,"children":5273},{"class":295},[5274],{"type":24,"value":759},{"type":18,"tag":288,"props":5276,"children":5277},{"class":301},[5278],{"type":24,"value":5279}," derivative\n",{"type":18,"tag":288,"props":5281,"children":5282},{"class":290,"line":671},[5283],{"type":18,"tag":288,"props":5284,"children":5285},{},[5286],{"type":24,"value":323},{"type":18,"tag":288,"props":5288,"children":5289},{"class":290,"line":680},[5290,5294,5298],{"type":18,"tag":288,"props":5291,"children":5292},{"class":301},[5293],{"type":24,"value":4393},{"type":18,"tag":288,"props":5295,"children":5296},{"class":295},[5297],{"type":24,"value":4557},{"type":18,"tag":288,"props":5299,"children":5300},{"class":301},[5301],{"type":24,"value":5302}," output",{"type":18,"tag":27,"props":5304,"children":5305},{},[5306],{"type":24,"value":5307},"Don't worry, this class just defined as the PID formula. So, by doing this, we will be able to use all the characteristic of our PID controller.",{"type":18,"tag":19,"props":5309,"children":5311},{"id":5310},"experiment",[5312],{"type":24,"value":5313},"Experiment",{"type":18,"tag":5315,"props":5316,"children":5318},"h3",{"id":5317},"pid-for-point-control",[5319],{"type":24,"value":5320},"PID for point control",{"type":18,"tag":27,"props":5322,"children":5323},{},[5324,5326,5330,5332,5337],{"type":24,"value":5325},"If I want my DifferentialDrive robot go to point ",{"type":18,"tag":92,"props":5327,"children":5329},{"latex-express":5328,"styles":123},"x_{ref}, y_{ref}, \\theta_{ref}",[],{"type":24,"value":5331},", Then I can calculate the error between the reference point and the feedback position of the robot. I simulated my robot in the  ",{"type":18,"tag":1611,"props":5333,"children":5334},{},[5335],{"type":24,"value":5336},"for loop",{"type":24,"value":5338}," and calculate this error recursively.",{"type":18,"tag":273,"props":5340,"children":5343},{"className":5341,"code":5342,"language":278,"meta":8},[276],"error_x.append(ref_path[0]-current_x)\nerror_y.append(ref_path[1]-current_y)\nerror_yaw.append(ref_path[2]-current_yaw)\n",[5344],{"type":18,"tag":281,"props":5345,"children":5346},{},[5347],{"type":18,"tag":273,"props":5348,"children":5349},{"__ignoreMap":8},[5350,5375,5400],{"type":18,"tag":288,"props":5351,"children":5352},{"class":290,"line":291},[5353,5358,5362,5366,5370],{"type":18,"tag":288,"props":5354,"children":5355},{"class":301},[5356],{"type":24,"value":5357},"error_x.append(ref_path[",{"type":18,"tag":288,"props":5359,"children":5360},{"class":355},[5361],{"type":24,"value":592},{"type":18,"tag":288,"props":5363,"children":5364},{"class":301},[5365],{"type":24,"value":597},{"type":18,"tag":288,"props":5367,"children":5368},{"class":295},[5369],{"type":24,"value":2002},{"type":18,"tag":288,"props":5371,"children":5372},{"class":301},[5373],{"type":24,"value":5374},"current_x)\n",{"type":18,"tag":288,"props":5376,"children":5377},{"class":290,"line":317},[5378,5383,5387,5391,5395],{"type":18,"tag":288,"props":5379,"children":5380},{"class":301},[5381],{"type":24,"value":5382},"error_y.append(ref_path[",{"type":18,"tag":288,"props":5384,"children":5385},{"class":355},[5386],{"type":24,"value":663},{"type":18,"tag":288,"props":5388,"children":5389},{"class":301},[5390],{"type":24,"value":597},{"type":18,"tag":288,"props":5392,"children":5393},{"class":295},[5394],{"type":24,"value":2002},{"type":18,"tag":288,"props":5396,"children":5397},{"class":301},[5398],{"type":24,"value":5399},"current_y)\n",{"type":18,"tag":288,"props":5401,"children":5402},{"class":290,"line":326},[5403,5408,5412,5416,5420],{"type":18,"tag":288,"props":5404,"children":5405},{"class":301},[5406],{"type":24,"value":5407},"error_yaw.append(ref_path[",{"type":18,"tag":288,"props":5409,"children":5410},{"class":355},[5411],{"type":24,"value":612},{"type":18,"tag":288,"props":5413,"children":5414},{"class":301},[5415],{"type":24,"value":597},{"type":18,"tag":288,"props":5417,"children":5418},{"class":295},[5419],{"type":24,"value":2002},{"type":18,"tag":288,"props":5421,"children":5422},{"class":301},[5423],{"type":24,"value":5424},"current_yaw)",{"type":18,"tag":27,"props":5426,"children":5427},{},[5428],{"type":24,"value":5429},"Then, let's apply PID",{"type":18,"tag":273,"props":5431,"children":5434},{"className":5432,"code":5433,"language":278,"meta":8},[276],"output_vx = pid_controller_x.calculate_pid(error_x)\noutput_vy = pid_controller_y.calculate_pid(error_y)\noutput_omega = pid_controller_yaw.calculate_pid(error_yaw)\n",[5435],{"type":18,"tag":281,"props":5436,"children":5437},{},[5438],{"type":18,"tag":273,"props":5439,"children":5440},{"__ignoreMap":8},[5441,5458,5475],{"type":18,"tag":288,"props":5442,"children":5443},{"class":290,"line":291},[5444,5449,5453],{"type":18,"tag":288,"props":5445,"children":5446},{"class":301},[5447],{"type":24,"value":5448},"output_vx ",{"type":18,"tag":288,"props":5450,"children":5451},{"class":295},[5452],{"type":24,"value":347},{"type":18,"tag":288,"props":5454,"children":5455},{"class":301},[5456],{"type":24,"value":5457}," pid_controller_x.calculate_pid(error_x)\n",{"type":18,"tag":288,"props":5459,"children":5460},{"class":290,"line":317},[5461,5466,5470],{"type":18,"tag":288,"props":5462,"children":5463},{"class":301},[5464],{"type":24,"value":5465},"output_vy ",{"type":18,"tag":288,"props":5467,"children":5468},{"class":295},[5469],{"type":24,"value":347},{"type":18,"tag":288,"props":5471,"children":5472},{"class":301},[5473],{"type":24,"value":5474}," pid_controller_y.calculate_pid(error_y)\n",{"type":18,"tag":288,"props":5476,"children":5477},{"class":290,"line":326},[5478,5483,5487],{"type":18,"tag":288,"props":5479,"children":5480},{"class":301},[5481],{"type":24,"value":5482},"output_omega ",{"type":18,"tag":288,"props":5484,"children":5485},{"class":295},[5486],{"type":24,"value":347},{"type":18,"tag":288,"props":5488,"children":5489},{"class":301},[5490],{"type":24,"value":5491}," pid_controller_yaw.calculate_pid(error_yaw)",{"type":18,"tag":27,"props":5493,"children":5494},{},[5495],{"type":24,"value":5496},"We will also need to update current position of the robot with the given optimal value from the PID controller.",{"type":18,"tag":273,"props":5498,"children":5501},{"className":5499,"code":5500,"language":278,"meta":8},[276],"x_next, y_next, yaw_next = diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) # Skip for omega we only look for x, y\ncurrent_x = x_next\ncurrent_y = y_next\ncurrent_yaw = yaw_next\n",[5502],{"type":18,"tag":281,"props":5503,"children":5504},{},[5505],{"type":18,"tag":273,"props":5506,"children":5507},{"__ignoreMap":8},[5508,5530,5547,5564],{"type":18,"tag":288,"props":5509,"children":5510},{"class":290,"line":291},[5511,5516,5520,5525],{"type":18,"tag":288,"props":5512,"children":5513},{"class":301},[5514],{"type":24,"value":5515},"x_next, y_next, yaw_next ",{"type":18,"tag":288,"props":5517,"children":5518},{"class":295},[5519],{"type":24,"value":347},{"type":18,"tag":288,"props":5521,"children":5522},{"class":301},[5523],{"type":24,"value":5524}," diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) ",{"type":18,"tag":288,"props":5526,"children":5527},{"class":330},[5528],{"type":24,"value":5529},"# Skip for omega we only look for x, y\n",{"type":18,"tag":288,"props":5531,"children":5532},{"class":290,"line":317},[5533,5538,5542],{"type":18,"tag":288,"props":5534,"children":5535},{"class":301},[5536],{"type":24,"value":5537},"current_x ",{"type":18,"tag":288,"props":5539,"children":5540},{"class":295},[5541],{"type":24,"value":347},{"type":18,"tag":288,"props":5543,"children":5544},{"class":301},[5545],{"type":24,"value":5546}," x_next\n",{"type":18,"tag":288,"props":5548,"children":5549},{"class":290,"line":326},[5550,5555,5559],{"type":18,"tag":288,"props":5551,"children":5552},{"class":301},[5553],{"type":24,"value":5554},"current_y ",{"type":18,"tag":288,"props":5556,"children":5557},{"class":295},[5558],{"type":24,"value":347},{"type":18,"tag":288,"props":5560,"children":5561},{"class":301},[5562],{"type":24,"value":5563}," y_next\n",{"type":18,"tag":288,"props":5565,"children":5566},{"class":290,"line":336},[5567,5572,5576],{"type":18,"tag":288,"props":5568,"children":5569},{"class":301},[5570],{"type":24,"value":5571},"current_yaw ",{"type":18,"tag":288,"props":5573,"children":5574},{"class":295},[5575],{"type":24,"value":347},{"type":18,"tag":288,"props":5577,"children":5578},{"class":301},[5579],{"type":24,"value":5580}," yaw_next",{"type":18,"tag":27,"props":5582,"children":5583},{},[5584,5586,5591],{"type":24,"value":5585},"I use ",{"type":18,"tag":1611,"props":5587,"children":5588},{},[5589],{"type":24,"value":5590},"matplotlib",{"type":24,"value":5592}," library to simulate my robot.",{"type":18,"tag":273,"props":5594,"children":5597},{"className":5595,"code":5596,"language":278,"meta":8},[276],"plt.clf()\nplt.gcf().canvas.mpl_connect('key_release_event',\n            lambda event: [exit(0) if event.key == 'escape' else None])\nplot_arrow(current_x, current_y, current_yaw)\nplt.plot(5, 5)\nplt.plot(ref_path[0], ref_path[1], marker=\"x\", color=\"blue\", label=\"Input Trajectory\")\nplt.axis(\"equal\")\nplt.grid(True)\nplt.legend()\nplt.pause(0.0001)\n",[5598],{"type":18,"tag":281,"props":5599,"children":5600},{},[5601],{"type":18,"tag":273,"props":5602,"children":5603},{"__ignoreMap":8},[5604,5612,5629,5709,5717,5742,5821,5838,5855,5863],{"type":18,"tag":288,"props":5605,"children":5606},{"class":290,"line":291},[5607],{"type":18,"tag":288,"props":5608,"children":5609},{"class":301},[5610],{"type":24,"value":5611},"plt.clf()\n",{"type":18,"tag":288,"props":5613,"children":5614},{"class":290,"line":317},[5615,5620,5625],{"type":18,"tag":288,"props":5616,"children":5617},{"class":301},[5618],{"type":24,"value":5619},"plt.gcf().canvas.mpl_connect(",{"type":18,"tag":288,"props":5621,"children":5622},{"class":1710},[5623],{"type":24,"value":5624},"'key_release_event'",{"type":18,"tag":288,"props":5626,"children":5627},{"class":301},[5628],{"type":24,"value":2532},{"type":18,"tag":288,"props":5630,"children":5631},{"class":290,"line":326},[5632,5636,5640,5645,5650,5655,5659,5663,5668,5673,5678,5682,5687,5691,5696,5700,5705],{"type":18,"tag":288,"props":5633,"children":5634},{"class":301},[5635],{"type":24,"value":3695},{"type":18,"tag":288,"props":5637,"children":5638},{"class":295},[5639],{"type":24,"value":573},{"type":18,"tag":288,"props":5641,"children":5642},{"class":301},[5643],{"type":24,"value":5644}," event: [",{"type":18,"tag":288,"props":5646,"children":5647},{"class":355},[5648],{"type":24,"value":5649},"exit",{"type":18,"tag":288,"props":5651,"children":5652},{"class":301},[5653],{"type":24,"value":5654},"(",{"type":18,"tag":288,"props":5656,"children":5657},{"class":355},[5658],{"type":24,"value":592},{"type":18,"tag":288,"props":5660,"children":5661},{"class":301},[5662],{"type":24,"value":782},{"type":18,"tag":288,"props":5664,"children":5665},{"class":295},[5666],{"type":24,"value":5667},"if",{"type":18,"tag":288,"props":5669,"children":5670},{"class":301},[5671],{"type":24,"value":5672}," event.key ",{"type":18,"tag":288,"props":5674,"children":5675},{"class":295},[5676],{"type":24,"value":5677},"==",{"type":18,"tag":288,"props":5679,"children":5680},{"class":301},[5681],{"type":24,"value":352},{"type":18,"tag":288,"props":5683,"children":5684},{"class":1710},[5685],{"type":24,"value":5686},"'escape'",{"type":18,"tag":288,"props":5688,"children":5689},{"class":301},[5690],{"type":24,"value":352},{"type":18,"tag":288,"props":5692,"children":5693},{"class":295},[5694],{"type":24,"value":5695},"else",{"type":18,"tag":288,"props":5697,"children":5698},{"class":301},[5699],{"type":24,"value":352},{"type":18,"tag":288,"props":5701,"children":5702},{"class":355},[5703],{"type":24,"value":5704},"None",{"type":18,"tag":288,"props":5706,"children":5707},{"class":301},[5708],{"type":24,"value":677},{"type":18,"tag":288,"props":5710,"children":5711},{"class":290,"line":336},[5712],{"type":18,"tag":288,"props":5713,"children":5714},{"class":301},[5715],{"type":24,"value":5716},"plot_arrow(current_x, current_y, current_yaw)\n",{"type":18,"tag":288,"props":5718,"children":5719},{"class":290,"line":361},[5720,5725,5730,5734,5738],{"type":18,"tag":288,"props":5721,"children":5722},{"class":301},[5723],{"type":24,"value":5724},"plt.plot(",{"type":18,"tag":288,"props":5726,"children":5727},{"class":355},[5728],{"type":24,"value":5729},"5",{"type":18,"tag":288,"props":5731,"children":5732},{"class":301},[5733],{"type":24,"value":2031},{"type":18,"tag":288,"props":5735,"children":5736},{"class":355},[5737],{"type":24,"value":5729},{"type":18,"tag":288,"props":5739,"children":5740},{"class":301},[5741],{"type":24,"value":1718},{"type":18,"tag":288,"props":5743,"children":5744},{"class":290,"line":370},[5745,5750,5754,5759,5763,5768,5773,5777,5781,5785,5790,5794,5799,5803,5808,5812,5817],{"type":18,"tag":288,"props":5746,"children":5747},{"class":301},[5748],{"type":24,"value":5749},"plt.plot(ref_path[",{"type":18,"tag":288,"props":5751,"children":5752},{"class":355},[5753],{"type":24,"value":592},{"type":18,"tag":288,"props":5755,"children":5756},{"class":301},[5757],{"type":24,"value":5758},"], ref_path[",{"type":18,"tag":288,"props":5760,"children":5761},{"class":355},[5762],{"type":24,"value":663},{"type":18,"tag":288,"props":5764,"children":5765},{"class":301},[5766],{"type":24,"value":5767},"], ",{"type":18,"tag":288,"props":5769,"children":5770},{"class":3698},[5771],{"type":24,"value":5772},"marker",{"type":18,"tag":288,"props":5774,"children":5775},{"class":295},[5776],{"type":24,"value":347},{"type":18,"tag":288,"props":5778,"children":5779},{"class":1710},[5780],{"type":24,"value":1713},{"type":18,"tag":288,"props":5782,"children":5783},{"class":301},[5784],{"type":24,"value":2031},{"type":18,"tag":288,"props":5786,"children":5787},{"class":3698},[5788],{"type":24,"value":5789},"color",{"type":18,"tag":288,"props":5791,"children":5792},{"class":295},[5793],{"type":24,"value":347},{"type":18,"tag":288,"props":5795,"children":5796},{"class":1710},[5797],{"type":24,"value":5798},"\"blue\"",{"type":18,"tag":288,"props":5800,"children":5801},{"class":301},[5802],{"type":24,"value":2031},{"type":18,"tag":288,"props":5804,"children":5805},{"class":3698},[5806],{"type":24,"value":5807},"label",{"type":18,"tag":288,"props":5809,"children":5810},{"class":295},[5811],{"type":24,"value":347},{"type":18,"tag":288,"props":5813,"children":5814},{"class":1710},[5815],{"type":24,"value":5816},"\"Input Trajectory\"",{"type":18,"tag":288,"props":5818,"children":5819},{"class":301},[5820],{"type":24,"value":1718},{"type":18,"tag":288,"props":5822,"children":5823},{"class":290,"line":392},[5824,5829,5834],{"type":18,"tag":288,"props":5825,"children":5826},{"class":301},[5827],{"type":24,"value":5828},"plt.axis(",{"type":18,"tag":288,"props":5830,"children":5831},{"class":1710},[5832],{"type":24,"value":5833},"\"equal\"",{"type":18,"tag":288,"props":5835,"children":5836},{"class":301},[5837],{"type":24,"value":1718},{"type":18,"tag":288,"props":5839,"children":5840},{"class":290,"line":401},[5841,5846,5851],{"type":18,"tag":288,"props":5842,"children":5843},{"class":301},[5844],{"type":24,"value":5845},"plt.grid(",{"type":18,"tag":288,"props":5847,"children":5848},{"class":355},[5849],{"type":24,"value":5850},"True",{"type":18,"tag":288,"props":5852,"children":5853},{"class":301},[5854],{"type":24,"value":1718},{"type":18,"tag":288,"props":5856,"children":5857},{"class":290,"line":423},[5858],{"type":18,"tag":288,"props":5859,"children":5860},{"class":301},[5861],{"type":24,"value":5862},"plt.legend()\n",{"type":18,"tag":288,"props":5864,"children":5865},{"class":290,"line":444},[5866,5871,5876],{"type":18,"tag":288,"props":5867,"children":5868},{"class":301},[5869],{"type":24,"value":5870},"plt.pause(",{"type":18,"tag":288,"props":5872,"children":5873},{"class":355},[5874],{"type":24,"value":5875},"0.0001",{"type":18,"tag":288,"props":5877,"children":5878},{"class":301},[5879],{"type":24,"value":5880},")",{"type":18,"tag":5315,"props":5882,"children":5884},{"id":5883},"path-tracking",[5885],{"type":24,"value":5886},"Path Tracking",{"type":18,"tag":27,"props":5888,"children":5889},{},[5890,5892,5897,5899,5904],{"type":24,"value":5891},"The code is all way the same. The different is that, I fit the continuous point into the robot instead of fixed goal point. I use ",{"type":18,"tag":1611,"props":5893,"children":5894},{},[5895],{"type":24,"value":5896},"BeizerCurve",{"type":24,"value":5898}," function to generate ",{"type":18,"tag":229,"props":5900,"children":5901},{},[5902],{"type":24,"value":5903}," Spline Trajectory ",{"type":24,"value":5905}," for the robot.",{"type":18,"tag":27,"props":5907,"children":5908},{},[5909,5911,5918],{"type":24,"value":5910},"The full code is published open-source on my Github. Link here ",{"type":18,"tag":4070,"props":5912,"children":5915},{"href":5913,"rel":5914},"https://github.com/SokhengDin/PathTracking/tree/main/PID",[4074],[5916],{"type":24,"value":5917},"Github",{"type":24,"value":5919},". Hit the star for me if you like my work 🙂.",{"type":18,"tag":5315,"props":5921,"children":5922},{"id":4013},[5923],{"type":24,"value":4016},{"type":18,"tag":4023,"props":5925,"children":5927},{"className":5926},[4026,4027,4028],[5928,5929],{"type":24,"value":4031},{"type":18,"tag":43,"props":5930,"children":5933},{"className":5931,"src":5932},[46],"/topics/robotics/nmpc/Figure_pid_p.png",[],{"type":18,"tag":56,"props":5935,"children":5937},{"className":5936},[59,60,61,62],[5938],{"type":24,"value":5939},"\n    PID Controller with position control on Differential Drive Robot\n",{"type":18,"tag":4023,"props":5941,"children":5943},{"className":5942},[4026,4027,4028],[5944,5945],{"type":24,"value":4031},{"type":18,"tag":43,"props":5946,"children":5949},{"className":5947,"src":5948},[46],"/topics/robotics/nmpc/Figure_pid_t.png",[],{"type":18,"tag":56,"props":5951,"children":5953},{"className":5952},[59,60,61,62],[5954],{"type":24,"value":5955},"\n    PID Controller with path tracking control on Differential Drive Robot\n",{"type":18,"tag":19,"props":5957,"children":5958},{"id":4045},[5959],{"type":24,"value":5960},"In Conclusion",{"type":18,"tag":27,"props":5962,"children":5963},{},[5964],{"type":24,"value":5965},"In my opinion, the PID Controller is an excellent choice for most control system applications due to its simplicity and powerful capabilities in handling complex control challenges arising from various systems.",{"type":18,"tag":19,"props":5967,"children":5969},{"id":5968},"references",[5970],{"type":24,"value":5971},"References",{"type":18,"tag":4061,"props":5973,"children":5974},{},[5975,5988,5993,6004],{"type":18,"tag":117,"props":5976,"children":5977},{},[5978,5980,5987],{"type":24,"value":5979},"BeizerCurve: ",{"type":18,"tag":4070,"props":5981,"children":5984},{"href":5982,"rel":5983},"https://en.wikipedia.org/wiki/B%C3%A9zier_curve",[4074],[5985],{"type":24,"value":5986},"https://en.wikipedia.org/wiki/Bézier_curve",{"type":24,"value":4134},{"type":18,"tag":117,"props":5989,"children":5990},{},[5991],{"type":24,"value":5992},"PID Controller: Control Systems Engineering by Normal S. Nise.",{"type":18,"tag":117,"props":5994,"children":5995},{},[5996,5998],{"type":24,"value":5997},"Beizer Path : ",{"type":18,"tag":4070,"props":5999,"children":6002},{"href":6000,"rel":6001},"https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning/BezierPath",[4074],[6003],{"type":24,"value":6000},{"type":18,"tag":117,"props":6005,"children":6006},{},[6007,6009],{"type":24,"value":6008},"PID Lecture : ",{"type":18,"tag":4070,"props":6010,"children":6013},{"href":6011,"rel":6012},"https://www.cds.caltech.edu/~murray/courses/cds101/fa02/caltech/astrom-ch6.pdf",[4074],[6014],{"type":24,"value":6011},{"type":18,"tag":4089,"children":6016},[6017],{"type":24,"value":6018},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-806137{color:#B392F0;}\n.ct-533739{color:#79B8FF;}\n.ct-326375{color:#6A737D;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":317,"depth":317,"links":6020},[6021,6022,6023,6024,6025,6026,6031,6032],{"id":4120,"depth":317,"text":4123},{"id":4137,"depth":317,"text":4140},{"id":4148,"depth":317,"text":4151},{"id":4212,"depth":317,"text":4215},{"id":4273,"depth":317,"text":4276},{"id":5310,"depth":317,"text":5313,"children":6027},[6028,6029,6030],{"id":5317,"depth":326,"text":5320},{"id":5883,"depth":326,"text":5886},{"id":4013,"depth":326,"text":4016},{"id":4045,"depth":317,"text":5960},{"id":5968,"depth":317,"text":5971},"content:topics:robotics:pid-controller.md","topics/robotics/pid-controller.md",{"_path":6036,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6037,"description":6038,"slug":6039,"tag":6039,"img":6040,"body":6041,"_type":4104,"_id":6231,"_source":4106,"_file":6232,"_extension":4108},"/topics/robotics/pure-pursuit","Pure Pursuit Controller","Introduction to Pure Pursuit Controller","pure-pursuit","/topics/robotics/nmpc/pure_pursuit.png",{"type":15,"children":6042,"toc":6224},[6043,6048,6058,6064,6069,6122,6128,6133,6185,6191,6196,6219],{"type":18,"tag":19,"props":6044,"children":6046},{"id":6045},"pure-pursuit-controller",[6047],{"type":24,"value":6037},{"type":18,"tag":27,"props":6049,"children":6050},{},[6051,6052,6056],{"type":24,"value":4743},{"type":18,"tag":229,"props":6053,"children":6054},{},[6055],{"type":24,"value":6037},{"type":24,"value":6057}," is a widely-used path-tracking algorithm in robotics and autonomous vehicle navigation. Its primary objective is to guide a vehicle or robot along a predefined path while ensuring precise path-following.",{"type":18,"tag":5315,"props":6059,"children":6061},{"id":6060},"principle-of-operation",[6062],{"type":24,"value":6063},"Principle of Operation",{"type":18,"tag":27,"props":6065,"children":6066},{},[6067],{"type":24,"value":6068},"The operation of the Pure Pursuit Controller is based on a straightforward concept:",{"type":18,"tag":4061,"props":6070,"children":6071},{},[6072,6082,6092,6102,6112],{"type":18,"tag":117,"props":6073,"children":6074},{},[6075,6080],{"type":18,"tag":229,"props":6076,"children":6077},{},[6078],{"type":24,"value":6079},"Path Definition",{"type":24,"value":6081},": The controller works with a defined path, often represented as a series of waypoints or a continuous curve, each associated with specific coordinates (x, y) and curvature information.",{"type":18,"tag":117,"props":6083,"children":6084},{},[6085,6090],{"type":18,"tag":229,"props":6086,"children":6087},{},[6088],{"type":24,"value":6089},"Target Point Selection",{"type":24,"value":6091},": The controller continuously selects a target point ahead of the vehicle. This target point is typically chosen as the point on the path that is a certain fixed distance (known as the \"lookahead distance\") in front of the vehicle.",{"type":18,"tag":117,"props":6093,"children":6094},{},[6095,6100],{"type":18,"tag":229,"props":6096,"children":6097},{},[6098],{"type":24,"value":6099},"Steering Command Calculation",{"type":24,"value":6101},": To navigate toward the target point, the controller calculates the steering command, often represented as the desired steering angle or curvature, required to reach the target point. Commonly, this involves computing the angle between the vehicle's current heading and the vector pointing from the current position to the target point.",{"type":18,"tag":117,"props":6103,"children":6104},{},[6105,6110],{"type":18,"tag":229,"props":6106,"children":6107},{},[6108],{"type":24,"value":6109},"Vehicle Control",{"type":24,"value":6111},": The calculated steering command is used to control the vehicle's steering mechanism (e.g., steering wheel or wheel angles) to guide it toward the target point.",{"type":18,"tag":117,"props":6113,"children":6114},{},[6115,6120],{"type":18,"tag":229,"props":6116,"children":6117},{},[6118],{"type":24,"value":6119},"Iterative Process",{"type":24,"value":6121},": The process is iterative, with the controller continuously selecting new target points ahead as the vehicle advances along the path and adjusting its steering to reach them.",{"type":18,"tag":5315,"props":6123,"children":6125},{"id":6124},"advantages",[6126],{"type":24,"value":6127},"Advantages",{"type":18,"tag":27,"props":6129,"children":6130},{},[6131],{"type":24,"value":6132},"The Pure Pursuit Controller offers several advantages:",{"type":18,"tag":113,"props":6134,"children":6135},{},[6136,6146,6155,6165,6175],{"type":18,"tag":117,"props":6137,"children":6138},{},[6139,6144],{"type":18,"tag":229,"props":6140,"children":6141},{},[6142],{"type":24,"value":6143},"Simplicity",{"type":24,"value":6145},": It is conceptually simple and easy to implement, making it suitable for a wide range of robotic and vehicle navigation applications.",{"type":18,"tag":117,"props":6147,"children":6148},{},[6149,6153],{"type":18,"tag":229,"props":6150,"children":6151},{},[6152],{"type":24,"value":5886},{"type":24,"value":6154},": The controller excels at accurate path tracking, even in complex environments with curves and turns.",{"type":18,"tag":117,"props":6156,"children":6157},{},[6158,6163],{"type":18,"tag":229,"props":6159,"children":6160},{},[6161],{"type":24,"value":6162},"Real-Time Operation",{"type":24,"value":6164},": It can operate in real-time, making it well-suited for dynamic environments where quick decision-making is crucial.",{"type":18,"tag":117,"props":6166,"children":6167},{},[6168,6173],{"type":18,"tag":229,"props":6169,"children":6170},{},[6171],{"type":24,"value":6172},"Adaptability",{"type":24,"value":6174},": The controller can adapt to changes in the path, such as deviations caused by obstacles or unexpected conditions, by continuously updating the target point.",{"type":18,"tag":117,"props":6176,"children":6177},{},[6178,6183],{"type":18,"tag":229,"props":6179,"children":6180},{},[6181],{"type":24,"value":6182},"Low Computational Overhead",{"type":24,"value":6184},": Compared to some other control algorithms, the Pure Pursuit Controller often has low computational requirements, which is advantageous for resource-constrained systems.",{"type":18,"tag":5315,"props":6186,"children":6188},{"id":6187},"limitations",[6189],{"type":24,"value":6190},"Limitations",{"type":18,"tag":27,"props":6192,"children":6193},{},[6194],{"type":24,"value":6195},"Despite its advantages, the Pure Pursuit Controller has some limitations:",{"type":18,"tag":113,"props":6197,"children":6198},{},[6199,6209],{"type":18,"tag":117,"props":6200,"children":6201},{},[6202,6207],{"type":18,"tag":229,"props":6203,"children":6204},{},[6205],{"type":24,"value":6206},"Lookahead Distance Sensitivity",{"type":24,"value":6208},": Its performance can be sensitive to the choice of the lookahead distance, which requires careful tuning for optimal path tracking.",{"type":18,"tag":117,"props":6210,"children":6211},{},[6212,6217],{"type":18,"tag":229,"props":6213,"children":6214},{},[6215],{"type":24,"value":6216},"Non-Holonomic Assumption",{"type":24,"value":6218},": The controller assumes that the vehicle is non-holonomic, meaning it cannot move sideways. This assumption may not hold for certain types of vehicles, such as omnidirectional robots.",{"type":18,"tag":27,"props":6220,"children":6221},{},[6222],{"type":24,"value":6223},"In summary, the Pure Pursuit Controller is a straightforward yet effective algorithm for path tracking and navigation. Its ability to calculate a steering command based on a selected target point ahead of the vehicle makes it a valuable tool for applications ranging from autonomous cars to mobile robots.",{"title":8,"searchDepth":317,"depth":317,"links":6225},[6226],{"id":6045,"depth":317,"text":6037,"children":6227},[6228,6229,6230],{"id":6060,"depth":326,"text":6063},{"id":6124,"depth":326,"text":6127},{"id":6187,"depth":326,"text":6190},"content:topics:robotics:pure-pursuit.md","topics/robotics/pure-pursuit.md",{"_path":6234,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6235,"description":6236,"slug":6237,"tag":6237,"body":6238,"_type":4104,"_id":6439,"_source":4106,"_file":6440,"_extension":4108},"/topics/robotics/stanley-controller","Stanley Controller","Introduction to Stanley Controller","stanley",{"type":15,"children":6239,"toc":6432},[6240,6245,6255,6259,6264,6325,6329,6334,6385,6389,6394,6427],{"type":18,"tag":19,"props":6241,"children":6243},{"id":6242},"stanley-controller",[6244],{"type":24,"value":6235},{"type":18,"tag":27,"props":6246,"children":6247},{},[6248,6249,6253],{"type":24,"value":4743},{"type":18,"tag":229,"props":6250,"children":6251},{},[6252],{"type":24,"value":6235},{"type":24,"value":6254}," is an advanced path-tracking algorithm primarily used in the field of autonomous vehicle navigation. It is named after its creator, Professor John K. Hedrick, who developed it at Stanford University. The Stanley Controller is designed to enable a vehicle to follow a predefined path with high accuracy and stability.",{"type":18,"tag":5315,"props":6256,"children":6257},{"id":6060},[6258],{"type":24,"value":6063},{"type":18,"tag":27,"props":6260,"children":6261},{},[6262],{"type":24,"value":6263},"The Stanley Controller operates based on a combination of control and feedback mechanisms:",{"type":18,"tag":4061,"props":6265,"children":6266},{},[6267,6276,6286,6296,6306,6315],{"type":18,"tag":117,"props":6268,"children":6269},{},[6270,6274],{"type":18,"tag":229,"props":6271,"children":6272},{},[6273],{"type":24,"value":6079},{"type":24,"value":6275},": A predefined path is represented as a series of waypoints or a continuous curve. Each waypoint is associated with specific coordinates (x, y) and often includes additional information like desired speed and curvature.",{"type":18,"tag":117,"props":6277,"children":6278},{},[6279,6284],{"type":18,"tag":229,"props":6280,"children":6281},{},[6282],{"type":24,"value":6283},"Cross-Track Error (CTE) Calculation",{"type":24,"value":6285},": The controller calculates the cross-track error, which is the perpendicular distance between the vehicle's current position and the desired path. This error represents how far the vehicle has deviated from the path.",{"type":18,"tag":117,"props":6287,"children":6288},{},[6289,6294],{"type":18,"tag":229,"props":6290,"children":6291},{},[6292],{"type":24,"value":6293},"Heading Error Calculation",{"type":24,"value":6295},": The heading error, which is the difference between the vehicle's current heading (yaw angle) and the desired path's tangent angle at the nearest waypoint, is also computed.",{"type":18,"tag":117,"props":6297,"children":6298},{},[6299,6304],{"type":18,"tag":229,"props":6300,"children":6301},{},[6302],{"type":24,"value":6303},"Control Command Generation",{"type":24,"value":6305},": Using the calculated cross-track error and heading error, the Stanley Controller generates control commands. These commands typically include steering angle adjustments and throttle/brake control to minimize both errors.",{"type":18,"tag":117,"props":6307,"children":6308},{},[6309,6313],{"type":18,"tag":229,"props":6310,"children":6311},{},[6312],{"type":24,"value":6109},{"type":24,"value":6314},": The generated control commands are applied to the vehicle's steering and throttle/brake systems to guide it back to the desired path.",{"type":18,"tag":117,"props":6316,"children":6317},{},[6318,6323],{"type":18,"tag":229,"props":6319,"children":6320},{},[6321],{"type":24,"value":6322},"Iterative Feedback",{"type":24,"value":6324},": The process is iterative, with the controller continuously recalculating the cross-track and heading errors and adjusting the control commands to keep the vehicle on track.",{"type":18,"tag":5315,"props":6326,"children":6327},{"id":6124},[6328],{"type":24,"value":6127},{"type":18,"tag":27,"props":6330,"children":6331},{},[6332],{"type":24,"value":6333},"The Stanley Controller offers several advantages:",{"type":18,"tag":113,"props":6335,"children":6336},{},[6337,6347,6357,6366,6375],{"type":18,"tag":117,"props":6338,"children":6339},{},[6340,6345],{"type":18,"tag":229,"props":6341,"children":6342},{},[6343],{"type":24,"value":6344},"High Accuracy",{"type":24,"value":6346},": It is known for its ability to achieve precise path-following, even in challenging conditions and complex road geometries.",{"type":18,"tag":117,"props":6348,"children":6349},{},[6350,6355],{"type":18,"tag":229,"props":6351,"children":6352},{},[6353],{"type":24,"value":6354},"Stability",{"type":24,"value":6356},": The controller's feedback mechanisms contribute to stable and smooth vehicle motion, reducing the risk of overshooting or oscillations.",{"type":18,"tag":117,"props":6358,"children":6359},{},[6360,6364],{"type":18,"tag":229,"props":6361,"children":6362},{},[6363],{"type":24,"value":6172},{"type":24,"value":6365},": The Stanley Controller can adapt to changes in the path, such as deviations caused by obstacles or dynamic road conditions.",{"type":18,"tag":117,"props":6367,"children":6368},{},[6369,6373],{"type":18,"tag":229,"props":6370,"children":6371},{},[6372],{"type":24,"value":6162},{"type":24,"value":6374},": It can operate in real-time, making it suitable for autonomous vehicle navigation in dynamic environments.",{"type":18,"tag":117,"props":6376,"children":6377},{},[6378,6383],{"type":18,"tag":229,"props":6379,"children":6380},{},[6381],{"type":24,"value":6382},"Versatility",{"type":24,"value":6384},": While primarily used in autonomous vehicles, the Stanley Controller's principles can be applied to various path-tracking tasks.",{"type":18,"tag":5315,"props":6386,"children":6387},{"id":6187},[6388],{"type":24,"value":6190},{"type":18,"tag":27,"props":6390,"children":6391},{},[6392],{"type":24,"value":6393},"Despite its advantages, the Stanley Controller has some limitations:",{"type":18,"tag":113,"props":6395,"children":6396},{},[6397,6407,6417],{"type":18,"tag":117,"props":6398,"children":6399},{},[6400,6405],{"type":18,"tag":229,"props":6401,"children":6402},{},[6403],{"type":24,"value":6404},"Complexity",{"type":24,"value":6406},": Implementing the Stanley Controller can be more complex than some other control algorithms due to its mathematical calculations and tuning requirements.",{"type":18,"tag":117,"props":6408,"children":6409},{},[6410,6415],{"type":18,"tag":229,"props":6411,"children":6412},{},[6413],{"type":24,"value":6414},"Initialization",{"type":24,"value":6416},": It relies on accurate initialization, including knowledge of the vehicle's initial position and heading relative to the path.",{"type":18,"tag":117,"props":6418,"children":6419},{},[6420,6425],{"type":18,"tag":229,"props":6421,"children":6422},{},[6423],{"type":24,"value":6424},"Sensitivity to Noise",{"type":24,"value":6426},": Like many feedback-based controllers, the Stanley Controller can be sensitive to noisy sensor data and require robust sensor fusion techniques.",{"type":18,"tag":27,"props":6428,"children":6429},{},[6430],{"type":24,"value":6431},"In summary, the Stanley Controller is an advanced path-tracking algorithm known for its accuracy and stability, making it a valuable tool in the field of autonomous vehicle navigation. Proper implementation and tuning are essential to harness its full potential.",{"title":8,"searchDepth":317,"depth":317,"links":6433},[6434],{"id":6242,"depth":317,"text":6235,"children":6435},[6436,6437,6438],{"id":6060,"depth":326,"text":6063},{"id":6124,"depth":326,"text":6127},{"id":6187,"depth":326,"text":6190},"content:topics:robotics:stanley-controller.md","topics/robotics/stanley-controller.md",1694082763015]