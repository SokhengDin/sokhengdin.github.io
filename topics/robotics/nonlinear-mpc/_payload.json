[{"data":1,"prerenderedAt":3874},["Reactive",2],{"content-/topics/robotics/nonlinear-mpc":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"_empty":6,"title":8,"description":9,"author":10,"slug":11,"tag":11,"img":12,"body":13,"_type":3869,"_id":3870,"_source":3871,"_file":3872,"_extension":3873},"/topics/robotics/nonlinear-mpc","robotics",false,"","Nonlinear Model Predictive Control","Introduction to Nonlinear Model Predictive Control","Din Sokheng","nonlinear-mpc","/topics/robotics/nmpc/predict_horizon.png",{"type":14,"children":15,"toc":3858},"root",[16,25,31,54,65,71,104,109,115,120,125,130,172,177,183,188,235,241,253,257,262,267,271,276,280,284,289,1533,1539,1544,1548,1563,1567,1572,1576,1582,1587,1591,1604,1608,1612,1616,1622,1635,1667,1672,2205,2210,2388,2399,2404,2409,3425,3430,3783,3789,3804,3810,3816,3821,3827,3853],{"type":17,"tag":18,"props":19,"children":21},"element","h2",{"id":20},"what-is-model-predictive-control",[22],{"type":23,"value":24},"text","What is Model Predictive Control ?",{"type":17,"tag":26,"props":27,"children":28},"p",{},[29],{"type":23,"value":30},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":17,"tag":32,"props":33,"children":40},"div",{"className":34},[35,36,37,38,39],"grid","grid-cols-2","space-x-10","justify-center","items-center",[41,49],{"type":17,"tag":42,"props":43,"children":48},"img",{"className":44,"src":12,"width":46,"height":47},[45],"mx-auto","600px","300px",[],{"type":17,"tag":42,"props":50,"children":53},{"className":51,"src":52,"width":46,"height":47},[45],"/topics/robotics/nmpc/set_points.png",[],{"type":17,"tag":55,"props":56,"children":62},"figcaption",{"className":57},[58,59,60,61],"text-center","text-sm","text-neutral-600","dark:text-neutral-400",[63],{"type":23,"value":64},"\n      A car with finite horizons prediction and set point prediction over finite horizons.\n",{"type":17,"tag":18,"props":66,"children":68},{"id":67},"nonlinear-model-predictive-control",[69],{"type":23,"value":70},"Nonlinear Model Predictive Control ?",{"type":17,"tag":26,"props":72,"children":73},{},[74,76,82,84,93,95,99,101],{"type":23,"value":75},"We already done ",{"type":17,"tag":77,"props":78,"children":79},"strong",{},[80],{"type":23,"value":81}," Linear Model Predictive Control ",{"type":23,"value":83},", you can read it here ",{"type":17,"tag":85,"props":86,"children":90},"a",{"href":87,"rel":88},"https://sokhengdin.github.io/topics/robotics/linear-mpc",[89],"nofollow",[91],{"type":23,"value":92},"linear-mpc",{"type":23,"value":94},". Nonlinear Model Predictive Control has the same basic core of its control algorithms. The different is about the mathematical solving over the system. ",{"type":17,"tag":96,"props":97,"children":98},"br",{},[],{"type":23,"value":100},"\nIn the real-life application, most of the system certainly nonlinear and it's more complex than linear model. Linear systems are mostly time-invariant, meaning that the response of the system input is time-independent. Nonlinear systems are time-varying meaning that the response of the system to any input is time-dependent.",{"type":17,"tag":96,"props":102,"children":103},{},[],{"type":17,"tag":26,"props":105,"children":106},{},[107],{"type":23,"value":108},"The system model can be represent as state-space model",{"type":17,"tag":110,"props":111,"children":114},"math-render",{"latex-express":112,"styles":58,"dist-cond":113}," \\dot{X} = f(X,U) ","true",[],{"type":17,"tag":26,"props":116,"children":117},{},[118],{"type":23,"value":119},"Nonlinear Model Predictive Control also works by solving the quardratic cost subject to the nonlinear function over a future finite horizons. The quadractic cost can be define as",{"type":17,"tag":110,"props":121,"children":124},{"latex-express":122,"styles":58,"dist-cond":123},"J(x,u) = \\displaystyle\\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})","false",[],{"type":17,"tag":26,"props":126,"children":127},{},[128],{"type":23,"value":129},"Notation",{"type":17,"tag":131,"props":132,"children":133},"ul",{},[134,145,154,163],{"type":17,"tag":135,"props":136,"children":137},"li",{},[138,143],{"type":17,"tag":110,"props":139,"children":142},{"latex-express":140,"styles":141,"dist-cond":123},"X","inline-flex",[],{"type":23,"value":144}," is the state of the system. This shall be obtained from the optimiztion problem.",{"type":17,"tag":135,"props":146,"children":147},{},[148,152],{"type":17,"tag":110,"props":149,"children":151},{"latex-express":150,"styles":141,"dist-cond":123},"X_{ref}",[],{"type":23,"value":153}," is the reference state of the system or desired input state.",{"type":17,"tag":135,"props":155,"children":156},{},[157,161],{"type":17,"tag":110,"props":158,"children":160},{"latex-express":159,"styles":141,"dist-cond":123},"U",[],{"type":23,"value":162}," is the input control of the system. This is a solution obtained from the optimization problem.",{"type":17,"tag":135,"props":164,"children":165},{},[166,170],{"type":17,"tag":110,"props":167,"children":169},{"latex-express":168,"styles":141,"dist-cond":123},"U_{ref}",[],{"type":23,"value":171}," is the reference control of the system or desired input control.",{"type":17,"tag":26,"props":173,"children":174},{},[175],{"type":23,"value":176},"Rewrite the optimization of NMPC problem.",{"type":17,"tag":178,"props":179,"children":182},"math-render-b",{"latex-express":180,"styles":181,"dist-cond":113},"\n      \\begin{align*}\n            \\min_{u_{0}, u_{1}, ..., u_{N-1} } \\quad \\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}&Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})\\\\\n            \\text{subject to} \\quad & x_{k+1} = f(x_k, u_k) \\quad \\text{(System dynamics)} \\\\\n            & g(x_k, x_k) \\leq 0 \\quad \\text{(State constraints)} \\\\\n            & h(x_k, x_k) \\leq 0 \\quad \\text{(Input constraints)} \\\\\n            & p(x_k) \\leq 0 \\quad \\text{(Path constraints)} \\\\\n            & x_0=x(0)  \\quad \\text{(Initial condition)}\n      \\end{align*}\n            ","text-center -sm:mx-auto -md:mx-auto -sm:max-w-sm -md:max-w-md",[],{"type":17,"tag":26,"props":184,"children":185},{},[186],{"type":23,"value":187},"Which,",{"type":17,"tag":131,"props":189,"children":190},{},[191,200,209,218,226],{"type":17,"tag":135,"props":192,"children":193},{},[194,198],{"type":17,"tag":110,"props":195,"children":197},{"latex-express":196,"styles":141,"dist-cond":123},"f",[],{"type":23,"value":199}," is the system dynamics model.",{"type":17,"tag":135,"props":201,"children":202},{},[203,207],{"type":17,"tag":110,"props":204,"children":206},{"latex-express":205,"styles":141,"dist-cond":123},"g",[],{"type":23,"value":208}," is the state constraints of the system.",{"type":17,"tag":135,"props":210,"children":211},{},[212,216],{"type":17,"tag":110,"props":213,"children":215},{"latex-express":214,"styles":141,"dist-cond":123},"h",[],{"type":23,"value":217}," is the input constraints of the system.",{"type":17,"tag":135,"props":219,"children":220},{},[221,224],{"type":17,"tag":110,"props":222,"children":223},{"latex-express":26,"styles":141,"dist-cond":123},[],{"type":23,"value":225}," is the path constraint, it help to ensure the safety following path of our system.",{"type":17,"tag":135,"props":227,"children":228},{},[229,233],{"type":17,"tag":110,"props":230,"children":232},{"latex-express":231,"styles":141,"dist-cond":123},"\\phi(X_{N})",[],{"type":23,"value":234}," is the terminal cost of the system.",{"type":17,"tag":18,"props":236,"children":238},{"id":237},"discretize-the-system-model-with-runge-kutta-4th-order",[239],{"type":23,"value":240},"Discretize the system model with Runge-Kutta 4th order",{"type":17,"tag":26,"props":242,"children":243},{},[244,246,251],{"type":23,"value":245},"I will choose a simple system mode robot ",{"type":17,"tag":77,"props":247,"children":248},{},[249],{"type":23,"value":250}," DifferentialDrive ",{"type":23,"value":252},".\nThe forward kinematic equation",{"type":17,"tag":110,"props":254,"children":256},{"latex-express":255,"styles":58},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":17,"tag":26,"props":258,"children":259},{},[260],{"type":23,"value":261},"State constraints are the restriction imposed on the state variable of the system. It helps our optimizer not to obtain the solution that is outside the boundary region and also ensure the system to always perform the minimal action control in any critical condition.",{"type":17,"tag":26,"props":263,"children":264},{},[265],{"type":23,"value":266},"We, then can do the approximation",{"type":17,"tag":178,"props":268,"children":270},{"latex-express":269,"styles":58,"dist-cond":113},"\n    \\begin{align*}\n        k_{1} &= f(x^{*}, u^{*}) \\\\\n        k_{2} &= f(x^{*}+k_{1}\\frac{dt}{2}, u^{*}) \\\\ \n        k_{3} &= f(x^{*}+k_{2}\\frac{dt}{2}, u^{*}) \\\\\n        k_{4} &= f(x^{*}+k_{3}dt, u^{*}) \\\\ \n        \\Rightarrow{x_{k+1} } &= x_{k} + (k_{1}+2k_{2}+2k_{3}+k_{4})\\frac{dt}{6}\n    \\end{align*}\n",[],{"type":17,"tag":26,"props":272,"children":273},{},[274],{"type":23,"value":275},"Let's evaluate it with our model.",{"type":17,"tag":178,"props":277,"children":279},{"latex-express":278,"styles":58},"\n      \\begin{align*}\n        k_{1} &= \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n        k_{2} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{3} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{4} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n    \\end{align*}\n      ",[],{"type":17,"tag":178,"props":281,"children":283},{"latex-express":282,"styles":58},"\n      \\Rightarrow{x_{k+1} } = x_{k} + \\left( \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} + \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix}   \\right) \\frac{dt}{6}\n",[],{"type":17,"tag":26,"props":285,"children":286},{},[287],{"type":23,"value":288},"How to implement it in Python ???",{"type":17,"tag":290,"props":291,"children":296},"code",{"className":292,"code":294,"language":295,"meta":7},[293],"language-python","import numpy as np\n\n## Define sampling time dt 100Hz\ndt = 0.01\n## Define the num steps for function approximation \nnum_steps = 100\n## Define initial states\nx = 0.0\ny = 0.0\nyaw = 0.0\n## Define input control\nv = 1.5 #m/s\nomega = 1.57 #rad/s\n## Define state represent model\n### define lambda function take variable x\nf = lambda x, u :  np.array([\n      [u[0]*np.cos(x[2])],\n      [u[0]*np.sin(x[2])],\n      [u[1]]\n])\n\nfor _ in range(num_steps):\n    k1 = f([x, y, yaw], [v, omega])\n    k2 = f([x + (dt / 2) * k1[0], y + (dt / 2) * k1[1], yaw + (dt / 2) * k1[2]], [v, omega])\n    k3 = f([x + (dt / 2) * k2[0], y + (dt / 2) * k2[1], yaw + (dt / 2) * k2[2]], [v, omega])\n    k4 = f([x + dt * k3[0], y + dt * k3[1], yaw + dt * k3[2]], [v, omega])\n\n    # Update state of the robot\n    x += (k1[0] + 2 * k2[0] + 2 * k3[0] + k4[0]) * dt / 6\n    y += (k1[1] + 2 * k2[1] + 2 * k3[1] + k4[1]) * dt / 6\n    yaw += (k1[2] + 2 * k2[2] + 2 * k3[2] + k4[2]) * dt / 6\n","python",[297],{"type":17,"tag":298,"props":299,"children":300},"pre",{},[301],{"type":17,"tag":290,"props":302,"children":303},{"__ignoreMap":7},[304,332,341,351,376,385,407,416,438,459,480,489,520,551,560,569,596,635,668,686,695,703,736,754,900,1038,1129,1137,1151,1282,1407],{"type":17,"tag":305,"props":306,"children":309},"span",{"class":307,"line":308},"line",1,[310,316,322,327],{"type":17,"tag":305,"props":311,"children":313},{"class":312},"ct-857441",[314],{"type":23,"value":315},"import",{"type":17,"tag":305,"props":317,"children":319},{"class":318},"ct-767297",[320],{"type":23,"value":321}," numpy ",{"type":17,"tag":305,"props":323,"children":324},{"class":312},[325],{"type":23,"value":326},"as",{"type":17,"tag":305,"props":328,"children":329},{"class":318},[330],{"type":23,"value":331}," np\n",{"type":17,"tag":305,"props":333,"children":335},{"class":307,"line":334},2,[336],{"type":17,"tag":305,"props":337,"children":338},{},[339],{"type":23,"value":340},"\n",{"type":17,"tag":305,"props":342,"children":344},{"class":307,"line":343},3,[345],{"type":17,"tag":305,"props":346,"children":348},{"class":347},"ct-326375",[349],{"type":23,"value":350},"## Define sampling time dt 100Hz\n",{"type":17,"tag":305,"props":352,"children":354},{"class":307,"line":353},4,[355,360,365,370],{"type":17,"tag":305,"props":356,"children":357},{"class":318},[358],{"type":23,"value":359},"dt ",{"type":17,"tag":305,"props":361,"children":362},{"class":312},[363],{"type":23,"value":364},"=",{"type":17,"tag":305,"props":366,"children":367},{"class":318},[368],{"type":23,"value":369}," ",{"type":17,"tag":305,"props":371,"children":373},{"class":372},"ct-533739",[374],{"type":23,"value":375},"0.01\n",{"type":17,"tag":305,"props":377,"children":379},{"class":307,"line":378},5,[380],{"type":17,"tag":305,"props":381,"children":382},{"class":347},[383],{"type":23,"value":384},"## Define the num steps for function approximation \n",{"type":17,"tag":305,"props":386,"children":388},{"class":307,"line":387},6,[389,394,398,402],{"type":17,"tag":305,"props":390,"children":391},{"class":318},[392],{"type":23,"value":393},"num_steps ",{"type":17,"tag":305,"props":395,"children":396},{"class":312},[397],{"type":23,"value":364},{"type":17,"tag":305,"props":399,"children":400},{"class":318},[401],{"type":23,"value":369},{"type":17,"tag":305,"props":403,"children":404},{"class":372},[405],{"type":23,"value":406},"100\n",{"type":17,"tag":305,"props":408,"children":410},{"class":307,"line":409},7,[411],{"type":17,"tag":305,"props":412,"children":413},{"class":347},[414],{"type":23,"value":415},"## Define initial states\n",{"type":17,"tag":305,"props":417,"children":419},{"class":307,"line":418},8,[420,425,429,433],{"type":17,"tag":305,"props":421,"children":422},{"class":318},[423],{"type":23,"value":424},"x ",{"type":17,"tag":305,"props":426,"children":427},{"class":312},[428],{"type":23,"value":364},{"type":17,"tag":305,"props":430,"children":431},{"class":318},[432],{"type":23,"value":369},{"type":17,"tag":305,"props":434,"children":435},{"class":372},[436],{"type":23,"value":437},"0.0\n",{"type":17,"tag":305,"props":439,"children":441},{"class":307,"line":440},9,[442,447,451,455],{"type":17,"tag":305,"props":443,"children":444},{"class":318},[445],{"type":23,"value":446},"y ",{"type":17,"tag":305,"props":448,"children":449},{"class":312},[450],{"type":23,"value":364},{"type":17,"tag":305,"props":452,"children":453},{"class":318},[454],{"type":23,"value":369},{"type":17,"tag":305,"props":456,"children":457},{"class":372},[458],{"type":23,"value":437},{"type":17,"tag":305,"props":460,"children":462},{"class":307,"line":461},10,[463,468,472,476],{"type":17,"tag":305,"props":464,"children":465},{"class":318},[466],{"type":23,"value":467},"yaw ",{"type":17,"tag":305,"props":469,"children":470},{"class":312},[471],{"type":23,"value":364},{"type":17,"tag":305,"props":473,"children":474},{"class":318},[475],{"type":23,"value":369},{"type":17,"tag":305,"props":477,"children":478},{"class":372},[479],{"type":23,"value":437},{"type":17,"tag":305,"props":481,"children":483},{"class":307,"line":482},11,[484],{"type":17,"tag":305,"props":485,"children":486},{"class":347},[487],{"type":23,"value":488},"## Define input control\n",{"type":17,"tag":305,"props":490,"children":492},{"class":307,"line":491},12,[493,498,502,506,511,515],{"type":17,"tag":305,"props":494,"children":495},{"class":318},[496],{"type":23,"value":497},"v ",{"type":17,"tag":305,"props":499,"children":500},{"class":312},[501],{"type":23,"value":364},{"type":17,"tag":305,"props":503,"children":504},{"class":318},[505],{"type":23,"value":369},{"type":17,"tag":305,"props":507,"children":508},{"class":372},[509],{"type":23,"value":510},"1.5",{"type":17,"tag":305,"props":512,"children":513},{"class":318},[514],{"type":23,"value":369},{"type":17,"tag":305,"props":516,"children":517},{"class":347},[518],{"type":23,"value":519},"#m/s\n",{"type":17,"tag":305,"props":521,"children":523},{"class":307,"line":522},13,[524,529,533,537,542,546],{"type":17,"tag":305,"props":525,"children":526},{"class":318},[527],{"type":23,"value":528},"omega ",{"type":17,"tag":305,"props":530,"children":531},{"class":312},[532],{"type":23,"value":364},{"type":17,"tag":305,"props":534,"children":535},{"class":318},[536],{"type":23,"value":369},{"type":17,"tag":305,"props":538,"children":539},{"class":372},[540],{"type":23,"value":541},"1.57",{"type":17,"tag":305,"props":543,"children":544},{"class":318},[545],{"type":23,"value":369},{"type":17,"tag":305,"props":547,"children":548},{"class":347},[549],{"type":23,"value":550},"#rad/s\n",{"type":17,"tag":305,"props":552,"children":554},{"class":307,"line":553},14,[555],{"type":17,"tag":305,"props":556,"children":557},{"class":347},[558],{"type":23,"value":559},"## Define state represent model\n",{"type":17,"tag":305,"props":561,"children":563},{"class":307,"line":562},15,[564],{"type":17,"tag":305,"props":565,"children":566},{"class":347},[567],{"type":23,"value":568},"### define lambda function take variable x\n",{"type":17,"tag":305,"props":570,"children":572},{"class":307,"line":571},16,[573,578,582,586,591],{"type":17,"tag":305,"props":574,"children":575},{"class":318},[576],{"type":23,"value":577},"f ",{"type":17,"tag":305,"props":579,"children":580},{"class":312},[581],{"type":23,"value":364},{"type":17,"tag":305,"props":583,"children":584},{"class":318},[585],{"type":23,"value":369},{"type":17,"tag":305,"props":587,"children":588},{"class":312},[589],{"type":23,"value":590},"lambda",{"type":17,"tag":305,"props":592,"children":593},{"class":318},[594],{"type":23,"value":595}," x, u :  np.array([\n",{"type":17,"tag":305,"props":597,"children":599},{"class":307,"line":598},17,[600,605,610,615,620,625,630],{"type":17,"tag":305,"props":601,"children":602},{"class":318},[603],{"type":23,"value":604},"      [u[",{"type":17,"tag":305,"props":606,"children":607},{"class":372},[608],{"type":23,"value":609},"0",{"type":17,"tag":305,"props":611,"children":612},{"class":318},[613],{"type":23,"value":614},"]",{"type":17,"tag":305,"props":616,"children":617},{"class":312},[618],{"type":23,"value":619},"*",{"type":17,"tag":305,"props":621,"children":622},{"class":318},[623],{"type":23,"value":624},"np.cos(x[",{"type":17,"tag":305,"props":626,"children":627},{"class":372},[628],{"type":23,"value":629},"2",{"type":17,"tag":305,"props":631,"children":632},{"class":318},[633],{"type":23,"value":634},"])],\n",{"type":17,"tag":305,"props":636,"children":638},{"class":307,"line":637},18,[639,643,647,651,655,660,664],{"type":17,"tag":305,"props":640,"children":641},{"class":318},[642],{"type":23,"value":604},{"type":17,"tag":305,"props":644,"children":645},{"class":372},[646],{"type":23,"value":609},{"type":17,"tag":305,"props":648,"children":649},{"class":318},[650],{"type":23,"value":614},{"type":17,"tag":305,"props":652,"children":653},{"class":312},[654],{"type":23,"value":619},{"type":17,"tag":305,"props":656,"children":657},{"class":318},[658],{"type":23,"value":659},"np.sin(x[",{"type":17,"tag":305,"props":661,"children":662},{"class":372},[663],{"type":23,"value":629},{"type":17,"tag":305,"props":665,"children":666},{"class":318},[667],{"type":23,"value":634},{"type":17,"tag":305,"props":669,"children":671},{"class":307,"line":670},19,[672,676,681],{"type":17,"tag":305,"props":673,"children":674},{"class":318},[675],{"type":23,"value":604},{"type":17,"tag":305,"props":677,"children":678},{"class":372},[679],{"type":23,"value":680},"1",{"type":17,"tag":305,"props":682,"children":683},{"class":318},[684],{"type":23,"value":685},"]]\n",{"type":17,"tag":305,"props":687,"children":689},{"class":307,"line":688},20,[690],{"type":17,"tag":305,"props":691,"children":692},{"class":318},[693],{"type":23,"value":694},"])\n",{"type":17,"tag":305,"props":696,"children":698},{"class":307,"line":697},21,[699],{"type":17,"tag":305,"props":700,"children":701},{},[702],{"type":23,"value":340},{"type":17,"tag":305,"props":704,"children":706},{"class":307,"line":705},22,[707,712,717,722,726,731],{"type":17,"tag":305,"props":708,"children":709},{"class":312},[710],{"type":23,"value":711},"for",{"type":17,"tag":305,"props":713,"children":714},{"class":318},[715],{"type":23,"value":716}," _ ",{"type":17,"tag":305,"props":718,"children":719},{"class":312},[720],{"type":23,"value":721},"in",{"type":17,"tag":305,"props":723,"children":724},{"class":318},[725],{"type":23,"value":369},{"type":17,"tag":305,"props":727,"children":728},{"class":372},[729],{"type":23,"value":730},"range",{"type":17,"tag":305,"props":732,"children":733},{"class":318},[734],{"type":23,"value":735},"(num_steps):\n",{"type":17,"tag":305,"props":737,"children":739},{"class":307,"line":738},23,[740,745,749],{"type":17,"tag":305,"props":741,"children":742},{"class":318},[743],{"type":23,"value":744},"    k1 ",{"type":17,"tag":305,"props":746,"children":747},{"class":312},[748],{"type":23,"value":364},{"type":17,"tag":305,"props":750,"children":751},{"class":318},[752],{"type":23,"value":753}," f([x, y, yaw], [v, omega])\n",{"type":17,"tag":305,"props":755,"children":757},{"class":307,"line":756},24,[758,763,767,772,777,782,787,791,795,800,804,809,813,818,822,826,830,834,838,842,846,850,854,859,863,867,871,875,879,883,887,891,895],{"type":17,"tag":305,"props":759,"children":760},{"class":318},[761],{"type":23,"value":762},"    k2 ",{"type":17,"tag":305,"props":764,"children":765},{"class":312},[766],{"type":23,"value":364},{"type":17,"tag":305,"props":768,"children":769},{"class":318},[770],{"type":23,"value":771}," f([x ",{"type":17,"tag":305,"props":773,"children":774},{"class":312},[775],{"type":23,"value":776},"+",{"type":17,"tag":305,"props":778,"children":779},{"class":318},[780],{"type":23,"value":781}," (dt ",{"type":17,"tag":305,"props":783,"children":784},{"class":312},[785],{"type":23,"value":786},"/",{"type":17,"tag":305,"props":788,"children":789},{"class":318},[790],{"type":23,"value":369},{"type":17,"tag":305,"props":792,"children":793},{"class":372},[794],{"type":23,"value":629},{"type":17,"tag":305,"props":796,"children":797},{"class":318},[798],{"type":23,"value":799},") ",{"type":17,"tag":305,"props":801,"children":802},{"class":312},[803],{"type":23,"value":619},{"type":17,"tag":305,"props":805,"children":806},{"class":318},[807],{"type":23,"value":808}," k1[",{"type":17,"tag":305,"props":810,"children":811},{"class":372},[812],{"type":23,"value":609},{"type":17,"tag":305,"props":814,"children":815},{"class":318},[816],{"type":23,"value":817},"], y ",{"type":17,"tag":305,"props":819,"children":820},{"class":312},[821],{"type":23,"value":776},{"type":17,"tag":305,"props":823,"children":824},{"class":318},[825],{"type":23,"value":781},{"type":17,"tag":305,"props":827,"children":828},{"class":312},[829],{"type":23,"value":786},{"type":17,"tag":305,"props":831,"children":832},{"class":318},[833],{"type":23,"value":369},{"type":17,"tag":305,"props":835,"children":836},{"class":372},[837],{"type":23,"value":629},{"type":17,"tag":305,"props":839,"children":840},{"class":318},[841],{"type":23,"value":799},{"type":17,"tag":305,"props":843,"children":844},{"class":312},[845],{"type":23,"value":619},{"type":17,"tag":305,"props":847,"children":848},{"class":318},[849],{"type":23,"value":808},{"type":17,"tag":305,"props":851,"children":852},{"class":372},[853],{"type":23,"value":680},{"type":17,"tag":305,"props":855,"children":856},{"class":318},[857],{"type":23,"value":858},"], yaw ",{"type":17,"tag":305,"props":860,"children":861},{"class":312},[862],{"type":23,"value":776},{"type":17,"tag":305,"props":864,"children":865},{"class":318},[866],{"type":23,"value":781},{"type":17,"tag":305,"props":868,"children":869},{"class":312},[870],{"type":23,"value":786},{"type":17,"tag":305,"props":872,"children":873},{"class":318},[874],{"type":23,"value":369},{"type":17,"tag":305,"props":876,"children":877},{"class":372},[878],{"type":23,"value":629},{"type":17,"tag":305,"props":880,"children":881},{"class":318},[882],{"type":23,"value":799},{"type":17,"tag":305,"props":884,"children":885},{"class":312},[886],{"type":23,"value":619},{"type":17,"tag":305,"props":888,"children":889},{"class":318},[890],{"type":23,"value":808},{"type":17,"tag":305,"props":892,"children":893},{"class":372},[894],{"type":23,"value":629},{"type":17,"tag":305,"props":896,"children":897},{"class":318},[898],{"type":23,"value":899},"]], [v, omega])\n",{"type":17,"tag":305,"props":901,"children":903},{"class":307,"line":902},25,[904,909,913,917,921,925,929,933,937,941,945,950,954,958,962,966,970,974,978,982,986,990,994,998,1002,1006,1010,1014,1018,1022,1026,1030,1034],{"type":17,"tag":305,"props":905,"children":906},{"class":318},[907],{"type":23,"value":908},"    k3 ",{"type":17,"tag":305,"props":910,"children":911},{"class":312},[912],{"type":23,"value":364},{"type":17,"tag":305,"props":914,"children":915},{"class":318},[916],{"type":23,"value":771},{"type":17,"tag":305,"props":918,"children":919},{"class":312},[920],{"type":23,"value":776},{"type":17,"tag":305,"props":922,"children":923},{"class":318},[924],{"type":23,"value":781},{"type":17,"tag":305,"props":926,"children":927},{"class":312},[928],{"type":23,"value":786},{"type":17,"tag":305,"props":930,"children":931},{"class":318},[932],{"type":23,"value":369},{"type":17,"tag":305,"props":934,"children":935},{"class":372},[936],{"type":23,"value":629},{"type":17,"tag":305,"props":938,"children":939},{"class":318},[940],{"type":23,"value":799},{"type":17,"tag":305,"props":942,"children":943},{"class":312},[944],{"type":23,"value":619},{"type":17,"tag":305,"props":946,"children":947},{"class":318},[948],{"type":23,"value":949}," k2[",{"type":17,"tag":305,"props":951,"children":952},{"class":372},[953],{"type":23,"value":609},{"type":17,"tag":305,"props":955,"children":956},{"class":318},[957],{"type":23,"value":817},{"type":17,"tag":305,"props":959,"children":960},{"class":312},[961],{"type":23,"value":776},{"type":17,"tag":305,"props":963,"children":964},{"class":318},[965],{"type":23,"value":781},{"type":17,"tag":305,"props":967,"children":968},{"class":312},[969],{"type":23,"value":786},{"type":17,"tag":305,"props":971,"children":972},{"class":318},[973],{"type":23,"value":369},{"type":17,"tag":305,"props":975,"children":976},{"class":372},[977],{"type":23,"value":629},{"type":17,"tag":305,"props":979,"children":980},{"class":318},[981],{"type":23,"value":799},{"type":17,"tag":305,"props":983,"children":984},{"class":312},[985],{"type":23,"value":619},{"type":17,"tag":305,"props":987,"children":988},{"class":318},[989],{"type":23,"value":949},{"type":17,"tag":305,"props":991,"children":992},{"class":372},[993],{"type":23,"value":680},{"type":17,"tag":305,"props":995,"children":996},{"class":318},[997],{"type":23,"value":858},{"type":17,"tag":305,"props":999,"children":1000},{"class":312},[1001],{"type":23,"value":776},{"type":17,"tag":305,"props":1003,"children":1004},{"class":318},[1005],{"type":23,"value":781},{"type":17,"tag":305,"props":1007,"children":1008},{"class":312},[1009],{"type":23,"value":786},{"type":17,"tag":305,"props":1011,"children":1012},{"class":318},[1013],{"type":23,"value":369},{"type":17,"tag":305,"props":1015,"children":1016},{"class":372},[1017],{"type":23,"value":629},{"type":17,"tag":305,"props":1019,"children":1020},{"class":318},[1021],{"type":23,"value":799},{"type":17,"tag":305,"props":1023,"children":1024},{"class":312},[1025],{"type":23,"value":619},{"type":17,"tag":305,"props":1027,"children":1028},{"class":318},[1029],{"type":23,"value":949},{"type":17,"tag":305,"props":1031,"children":1032},{"class":372},[1033],{"type":23,"value":629},{"type":17,"tag":305,"props":1035,"children":1036},{"class":318},[1037],{"type":23,"value":899},{"type":17,"tag":305,"props":1039,"children":1041},{"class":307,"line":1040},26,[1042,1047,1051,1055,1059,1064,1068,1073,1077,1081,1085,1089,1093,1097,1101,1105,1109,1113,1117,1121,1125],{"type":17,"tag":305,"props":1043,"children":1044},{"class":318},[1045],{"type":23,"value":1046},"    k4 ",{"type":17,"tag":305,"props":1048,"children":1049},{"class":312},[1050],{"type":23,"value":364},{"type":17,"tag":305,"props":1052,"children":1053},{"class":318},[1054],{"type":23,"value":771},{"type":17,"tag":305,"props":1056,"children":1057},{"class":312},[1058],{"type":23,"value":776},{"type":17,"tag":305,"props":1060,"children":1061},{"class":318},[1062],{"type":23,"value":1063}," dt ",{"type":17,"tag":305,"props":1065,"children":1066},{"class":312},[1067],{"type":23,"value":619},{"type":17,"tag":305,"props":1069,"children":1070},{"class":318},[1071],{"type":23,"value":1072}," k3[",{"type":17,"tag":305,"props":1074,"children":1075},{"class":372},[1076],{"type":23,"value":609},{"type":17,"tag":305,"props":1078,"children":1079},{"class":318},[1080],{"type":23,"value":817},{"type":17,"tag":305,"props":1082,"children":1083},{"class":312},[1084],{"type":23,"value":776},{"type":17,"tag":305,"props":1086,"children":1087},{"class":318},[1088],{"type":23,"value":1063},{"type":17,"tag":305,"props":1090,"children":1091},{"class":312},[1092],{"type":23,"value":619},{"type":17,"tag":305,"props":1094,"children":1095},{"class":318},[1096],{"type":23,"value":1072},{"type":17,"tag":305,"props":1098,"children":1099},{"class":372},[1100],{"type":23,"value":680},{"type":17,"tag":305,"props":1102,"children":1103},{"class":318},[1104],{"type":23,"value":858},{"type":17,"tag":305,"props":1106,"children":1107},{"class":312},[1108],{"type":23,"value":776},{"type":17,"tag":305,"props":1110,"children":1111},{"class":318},[1112],{"type":23,"value":1063},{"type":17,"tag":305,"props":1114,"children":1115},{"class":312},[1116],{"type":23,"value":619},{"type":17,"tag":305,"props":1118,"children":1119},{"class":318},[1120],{"type":23,"value":1072},{"type":17,"tag":305,"props":1122,"children":1123},{"class":372},[1124],{"type":23,"value":629},{"type":17,"tag":305,"props":1126,"children":1127},{"class":318},[1128],{"type":23,"value":899},{"type":17,"tag":305,"props":1130,"children":1132},{"class":307,"line":1131},27,[1133],{"type":17,"tag":305,"props":1134,"children":1135},{},[1136],{"type":23,"value":340},{"type":17,"tag":305,"props":1138,"children":1140},{"class":307,"line":1139},28,[1141,1146],{"type":17,"tag":305,"props":1142,"children":1143},{"class":318},[1144],{"type":23,"value":1145},"    ",{"type":17,"tag":305,"props":1147,"children":1148},{"class":347},[1149],{"type":23,"value":1150},"# Update state of the robot\n",{"type":17,"tag":305,"props":1152,"children":1154},{"class":307,"line":1153},29,[1155,1160,1165,1170,1174,1179,1183,1187,1191,1195,1199,1203,1207,1211,1215,1219,1223,1227,1231,1235,1239,1243,1247,1252,1256,1261,1265,1269,1273,1277],{"type":17,"tag":305,"props":1156,"children":1157},{"class":318},[1158],{"type":23,"value":1159},"    x ",{"type":17,"tag":305,"props":1161,"children":1162},{"class":312},[1163],{"type":23,"value":1164},"+=",{"type":17,"tag":305,"props":1166,"children":1167},{"class":318},[1168],{"type":23,"value":1169}," (k1[",{"type":17,"tag":305,"props":1171,"children":1172},{"class":372},[1173],{"type":23,"value":609},{"type":17,"tag":305,"props":1175,"children":1176},{"class":318},[1177],{"type":23,"value":1178},"] ",{"type":17,"tag":305,"props":1180,"children":1181},{"class":312},[1182],{"type":23,"value":776},{"type":17,"tag":305,"props":1184,"children":1185},{"class":318},[1186],{"type":23,"value":369},{"type":17,"tag":305,"props":1188,"children":1189},{"class":372},[1190],{"type":23,"value":629},{"type":17,"tag":305,"props":1192,"children":1193},{"class":318},[1194],{"type":23,"value":369},{"type":17,"tag":305,"props":1196,"children":1197},{"class":312},[1198],{"type":23,"value":619},{"type":17,"tag":305,"props":1200,"children":1201},{"class":318},[1202],{"type":23,"value":949},{"type":17,"tag":305,"props":1204,"children":1205},{"class":372},[1206],{"type":23,"value":609},{"type":17,"tag":305,"props":1208,"children":1209},{"class":318},[1210],{"type":23,"value":1178},{"type":17,"tag":305,"props":1212,"children":1213},{"class":312},[1214],{"type":23,"value":776},{"type":17,"tag":305,"props":1216,"children":1217},{"class":318},[1218],{"type":23,"value":369},{"type":17,"tag":305,"props":1220,"children":1221},{"class":372},[1222],{"type":23,"value":629},{"type":17,"tag":305,"props":1224,"children":1225},{"class":318},[1226],{"type":23,"value":369},{"type":17,"tag":305,"props":1228,"children":1229},{"class":312},[1230],{"type":23,"value":619},{"type":17,"tag":305,"props":1232,"children":1233},{"class":318},[1234],{"type":23,"value":1072},{"type":17,"tag":305,"props":1236,"children":1237},{"class":372},[1238],{"type":23,"value":609},{"type":17,"tag":305,"props":1240,"children":1241},{"class":318},[1242],{"type":23,"value":1178},{"type":17,"tag":305,"props":1244,"children":1245},{"class":312},[1246],{"type":23,"value":776},{"type":17,"tag":305,"props":1248,"children":1249},{"class":318},[1250],{"type":23,"value":1251}," k4[",{"type":17,"tag":305,"props":1253,"children":1254},{"class":372},[1255],{"type":23,"value":609},{"type":17,"tag":305,"props":1257,"children":1258},{"class":318},[1259],{"type":23,"value":1260},"]) ",{"type":17,"tag":305,"props":1262,"children":1263},{"class":312},[1264],{"type":23,"value":619},{"type":17,"tag":305,"props":1266,"children":1267},{"class":318},[1268],{"type":23,"value":1063},{"type":17,"tag":305,"props":1270,"children":1271},{"class":312},[1272],{"type":23,"value":786},{"type":17,"tag":305,"props":1274,"children":1275},{"class":318},[1276],{"type":23,"value":369},{"type":17,"tag":305,"props":1278,"children":1279},{"class":372},[1280],{"type":23,"value":1281},"6\n",{"type":17,"tag":305,"props":1283,"children":1285},{"class":307,"line":1284},30,[1286,1291,1295,1299,1303,1307,1311,1315,1319,1323,1327,1331,1335,1339,1343,1347,1351,1355,1359,1363,1367,1371,1375,1379,1383,1387,1391,1395,1399,1403],{"type":17,"tag":305,"props":1287,"children":1288},{"class":318},[1289],{"type":23,"value":1290},"    y ",{"type":17,"tag":305,"props":1292,"children":1293},{"class":312},[1294],{"type":23,"value":1164},{"type":17,"tag":305,"props":1296,"children":1297},{"class":318},[1298],{"type":23,"value":1169},{"type":17,"tag":305,"props":1300,"children":1301},{"class":372},[1302],{"type":23,"value":680},{"type":17,"tag":305,"props":1304,"children":1305},{"class":318},[1306],{"type":23,"value":1178},{"type":17,"tag":305,"props":1308,"children":1309},{"class":312},[1310],{"type":23,"value":776},{"type":17,"tag":305,"props":1312,"children":1313},{"class":318},[1314],{"type":23,"value":369},{"type":17,"tag":305,"props":1316,"children":1317},{"class":372},[1318],{"type":23,"value":629},{"type":17,"tag":305,"props":1320,"children":1321},{"class":318},[1322],{"type":23,"value":369},{"type":17,"tag":305,"props":1324,"children":1325},{"class":312},[1326],{"type":23,"value":619},{"type":17,"tag":305,"props":1328,"children":1329},{"class":318},[1330],{"type":23,"value":949},{"type":17,"tag":305,"props":1332,"children":1333},{"class":372},[1334],{"type":23,"value":680},{"type":17,"tag":305,"props":1336,"children":1337},{"class":318},[1338],{"type":23,"value":1178},{"type":17,"tag":305,"props":1340,"children":1341},{"class":312},[1342],{"type":23,"value":776},{"type":17,"tag":305,"props":1344,"children":1345},{"class":318},[1346],{"type":23,"value":369},{"type":17,"tag":305,"props":1348,"children":1349},{"class":372},[1350],{"type":23,"value":629},{"type":17,"tag":305,"props":1352,"children":1353},{"class":318},[1354],{"type":23,"value":369},{"type":17,"tag":305,"props":1356,"children":1357},{"class":312},[1358],{"type":23,"value":619},{"type":17,"tag":305,"props":1360,"children":1361},{"class":318},[1362],{"type":23,"value":1072},{"type":17,"tag":305,"props":1364,"children":1365},{"class":372},[1366],{"type":23,"value":680},{"type":17,"tag":305,"props":1368,"children":1369},{"class":318},[1370],{"type":23,"value":1178},{"type":17,"tag":305,"props":1372,"children":1373},{"class":312},[1374],{"type":23,"value":776},{"type":17,"tag":305,"props":1376,"children":1377},{"class":318},[1378],{"type":23,"value":1251},{"type":17,"tag":305,"props":1380,"children":1381},{"class":372},[1382],{"type":23,"value":680},{"type":17,"tag":305,"props":1384,"children":1385},{"class":318},[1386],{"type":23,"value":1260},{"type":17,"tag":305,"props":1388,"children":1389},{"class":312},[1390],{"type":23,"value":619},{"type":17,"tag":305,"props":1392,"children":1393},{"class":318},[1394],{"type":23,"value":1063},{"type":17,"tag":305,"props":1396,"children":1397},{"class":312},[1398],{"type":23,"value":786},{"type":17,"tag":305,"props":1400,"children":1401},{"class":318},[1402],{"type":23,"value":369},{"type":17,"tag":305,"props":1404,"children":1405},{"class":372},[1406],{"type":23,"value":1281},{"type":17,"tag":305,"props":1408,"children":1410},{"class":307,"line":1409},31,[1411,1416,1420,1424,1428,1432,1436,1440,1444,1448,1452,1456,1460,1464,1468,1472,1476,1480,1484,1488,1492,1496,1500,1504,1508,1512,1516,1520,1524,1528],{"type":17,"tag":305,"props":1412,"children":1413},{"class":318},[1414],{"type":23,"value":1415},"    yaw ",{"type":17,"tag":305,"props":1417,"children":1418},{"class":312},[1419],{"type":23,"value":1164},{"type":17,"tag":305,"props":1421,"children":1422},{"class":318},[1423],{"type":23,"value":1169},{"type":17,"tag":305,"props":1425,"children":1426},{"class":372},[1427],{"type":23,"value":629},{"type":17,"tag":305,"props":1429,"children":1430},{"class":318},[1431],{"type":23,"value":1178},{"type":17,"tag":305,"props":1433,"children":1434},{"class":312},[1435],{"type":23,"value":776},{"type":17,"tag":305,"props":1437,"children":1438},{"class":318},[1439],{"type":23,"value":369},{"type":17,"tag":305,"props":1441,"children":1442},{"class":372},[1443],{"type":23,"value":629},{"type":17,"tag":305,"props":1445,"children":1446},{"class":318},[1447],{"type":23,"value":369},{"type":17,"tag":305,"props":1449,"children":1450},{"class":312},[1451],{"type":23,"value":619},{"type":17,"tag":305,"props":1453,"children":1454},{"class":318},[1455],{"type":23,"value":949},{"type":17,"tag":305,"props":1457,"children":1458},{"class":372},[1459],{"type":23,"value":629},{"type":17,"tag":305,"props":1461,"children":1462},{"class":318},[1463],{"type":23,"value":1178},{"type":17,"tag":305,"props":1465,"children":1466},{"class":312},[1467],{"type":23,"value":776},{"type":17,"tag":305,"props":1469,"children":1470},{"class":318},[1471],{"type":23,"value":369},{"type":17,"tag":305,"props":1473,"children":1474},{"class":372},[1475],{"type":23,"value":629},{"type":17,"tag":305,"props":1477,"children":1478},{"class":318},[1479],{"type":23,"value":369},{"type":17,"tag":305,"props":1481,"children":1482},{"class":312},[1483],{"type":23,"value":619},{"type":17,"tag":305,"props":1485,"children":1486},{"class":318},[1487],{"type":23,"value":1072},{"type":17,"tag":305,"props":1489,"children":1490},{"class":372},[1491],{"type":23,"value":629},{"type":17,"tag":305,"props":1493,"children":1494},{"class":318},[1495],{"type":23,"value":1178},{"type":17,"tag":305,"props":1497,"children":1498},{"class":312},[1499],{"type":23,"value":776},{"type":17,"tag":305,"props":1501,"children":1502},{"class":318},[1503],{"type":23,"value":1251},{"type":17,"tag":305,"props":1505,"children":1506},{"class":372},[1507],{"type":23,"value":629},{"type":17,"tag":305,"props":1509,"children":1510},{"class":318},[1511],{"type":23,"value":1260},{"type":17,"tag":305,"props":1513,"children":1514},{"class":312},[1515],{"type":23,"value":619},{"type":17,"tag":305,"props":1517,"children":1518},{"class":318},[1519],{"type":23,"value":1063},{"type":17,"tag":305,"props":1521,"children":1522},{"class":312},[1523],{"type":23,"value":786},{"type":17,"tag":305,"props":1525,"children":1526},{"class":318},[1527],{"type":23,"value":369},{"type":17,"tag":305,"props":1529,"children":1530},{"class":372},[1531],{"type":23,"value":1532},"6",{"type":17,"tag":18,"props":1534,"children":1536},{"id":1535},"single-shooting-method",[1537],{"type":23,"value":1538},"Single Shooting Method",{"type":17,"tag":26,"props":1540,"children":1541},{},[1542],{"type":23,"value":1543},"Single Shooting Method is a method that we transform the optimal control problem to the nonlinear programming problem with just one decision variable.",{"type":17,"tag":178,"props":1545,"children":1547},{"latex-express":1546,"styles":58},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}\\right]\n        \\end{align*}\n",[],{"type":17,"tag":26,"props":1549,"children":1550},{},[1551,1553,1557,1559],{"type":23,"value":1552},"Get ",{"type":17,"tag":110,"props":1554,"children":1556},{"latex-express":1555,"styles":141},"x_{u}",[],{"type":23,"value":1558}," as a function of ",{"type":17,"tag":110,"props":1560,"children":1562},{"latex-express":1561,"styles":141},"w, x, t_{k}",[],{"type":17,"tag":178,"props":1564,"children":1566},{"latex-express":1565,"styles":58},"\n      \\begin{align*}\n            x_{u} &= F(w,x_{0},t_{k}) \\\\\n            F(w,x_{0},t_{0}) &= x_{0} \\\\\n        \\end{align*}\n",[],{"type":17,"tag":26,"props":1568,"children":1569},{},[1570],{"type":23,"value":1571},"Then solve the NLP",{"type":17,"tag":178,"props":1573,"children":1575},{"latex-express":1574,"styles":58},"\n      \\begin{align*}\n            \\min_{w}\\Phi(F(w,x_{0},t_{k}), w) \\\\ \n            \\text{Subject to} \\hspace{1cm}  g_{1}(F(w,x_{0},t_{k}),w) \\leq{0}\n        \\end{align*}\n",[],{"type":17,"tag":18,"props":1577,"children":1579},{"id":1578},"multiple-shooting",[1580],{"type":23,"value":1581},"Multiple Shooting",{"type":17,"tag":26,"props":1583,"children":1584},{},[1585],{"type":23,"value":1586},"Multiple Shooting Method is a method that consist of transforming of optimal control problem to the nonlinear programming problem with multiple decision variables.",{"type":17,"tag":178,"props":1588,"children":1590},{"latex-express":1589,"styles":58},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}, x_{0}, ..., x_{N}\\right]\n        \\end{align*}\n",[],{"type":17,"tag":131,"props":1592,"children":1593},{},[1594,1599],{"type":17,"tag":135,"props":1595,"children":1596},{},[1597],{"type":23,"value":1598},"X becoming decision variable in the opimization problem as well as u",{"type":17,"tag":135,"props":1600,"children":1601},{},[1602],{"type":23,"value":1603},"We apply path constraint at each iteration step",{"type":17,"tag":178,"props":1605,"children":1607},{"latex-express":1606,"styles":58},"\n      \\begin{equation*}\n                x_{k+1}-f(x_{k},u_{k}) = 0\n            \\end{equation*}\n",[],{"type":17,"tag":26,"props":1609,"children":1610},{},[1611],{"type":23,"value":1571},{"type":17,"tag":178,"props":1613,"children":1615},{"latex-express":1614,"styles":58},"\n      \\begin{align*}\n            \\min_{w}  \\Phi(F(w,x_{0},t_{k}),& w) \\\\ \n            \\text{s.t}\\hspace{0.5cm}  g_{1}(F(w,x_{0},t_{k}),w) &\\leq{0} \\\\ \n                               g_{2}(w) = \\begin{bmatrix}\n                                  \\bar{x}_{0}-x_{0} \\\\\n                                  f(x_{0},u_{0})-x_{1} \\\\ \n                                  \\vdots \\\\\n                                  f(x_{N-1}, u_{N-1}-x_{N})\n                              \\end{bmatrix} &= 0\n        \\end{align*}\n",[],{"type":17,"tag":18,"props":1617,"children":1619},{"id":1618},"implement-in-python",[1620],{"type":23,"value":1621},"Implement in Python",{"type":17,"tag":26,"props":1623,"children":1624},{},[1625,1627,1633],{"type":23,"value":1626},"We will use ",{"type":17,"tag":1628,"props":1629,"children":1630},"code-inline",{},[1631],{"type":23,"value":1632},"Casadi",{"type":23,"value":1634}," as a numerical optimization framework.",{"type":17,"tag":290,"props":1636,"children":1639},{"className":1637,"code":1638,"language":295,"meta":7},[293],"import casadi as ca\n",[1640],{"type":17,"tag":298,"props":1641,"children":1642},{},[1643],{"type":17,"tag":290,"props":1644,"children":1645},{"__ignoreMap":7},[1646],{"type":17,"tag":305,"props":1647,"children":1648},{"class":307,"line":308},[1649,1653,1658,1662],{"type":17,"tag":305,"props":1650,"children":1651},{"class":312},[1652],{"type":23,"value":315},{"type":17,"tag":305,"props":1654,"children":1655},{"class":318},[1656],{"type":23,"value":1657}," casadi ",{"type":17,"tag":305,"props":1659,"children":1660},{"class":312},[1661],{"type":23,"value":326},{"type":17,"tag":305,"props":1663,"children":1664},{"class":318},[1665],{"type":23,"value":1666}," ca",{"type":17,"tag":26,"props":1668,"children":1669},{},[1670],{"type":23,"value":1671},"Define state representation and input control of our nonlinear model.",{"type":17,"tag":290,"props":1673,"children":1676},{"className":1674,"code":1675,"language":295,"meta":7},[293],"# Symbolic Variables\n## States\nx = ca.SX.sym(\"x\")\ny = ca.SX.sym(\"y\")\ntheta = ca.SX.sym(\"theta\")\nstates = ca.vertcat(x, y, theta)\nnum_states = states.numel()\n\n## Control\nu1 = ca.SX.sym(\"u1\")\nu2 = ca.SX.sym(\"u2\")\ncontrols = ca.vertcat(u1, u2)\nnum_controls = controls.numel()\n\n# Define Nonlinear model\n## Rotation Matrix\nrot_mat = ca.vertcat(\n    ca.horzcat(ca.cos(theta), ca.sin(theta), 0),\n    ca.horzcat(-ca.sin(theta), ca.cos(theta), 0),\n    ca.horzcat(0, 0, 1)\n)\n\nvx = u1 * ca.cos(theta)\nvy = u1 * ca.sin(theta)\nvyaw = u2\n\nrhs = ca.vertcat(vx, vy, vyaw)\n## Define mapped nonlinear function f(x,u) -> rhs\nf = ca.Function('f', [states, controls], [rhs])\n",[1677],{"type":17,"tag":298,"props":1678,"children":1679},{},[1680],{"type":17,"tag":290,"props":1681,"children":1682},{"__ignoreMap":7},[1683,1691,1699,1736,1768,1801,1818,1835,1842,1850,1883,1916,1933,1950,1957,1965,1973,1990,2007,2033,2065,2072,2079,2105,2130,2147,2154,2171,2179],{"type":17,"tag":305,"props":1684,"children":1685},{"class":307,"line":308},[1686],{"type":17,"tag":305,"props":1687,"children":1688},{"class":347},[1689],{"type":23,"value":1690},"# Symbolic Variables\n",{"type":17,"tag":305,"props":1692,"children":1693},{"class":307,"line":334},[1694],{"type":17,"tag":305,"props":1695,"children":1696},{"class":347},[1697],{"type":23,"value":1698},"## States\n",{"type":17,"tag":305,"props":1700,"children":1701},{"class":307,"line":343},[1702,1706,1710,1715,1720,1725,1731],{"type":17,"tag":305,"props":1703,"children":1704},{"class":318},[1705],{"type":23,"value":424},{"type":17,"tag":305,"props":1707,"children":1708},{"class":312},[1709],{"type":23,"value":364},{"type":17,"tag":305,"props":1711,"children":1712},{"class":318},[1713],{"type":23,"value":1714}," ca.",{"type":17,"tag":305,"props":1716,"children":1717},{"class":372},[1718],{"type":23,"value":1719},"SX",{"type":17,"tag":305,"props":1721,"children":1722},{"class":318},[1723],{"type":23,"value":1724},".sym(",{"type":17,"tag":305,"props":1726,"children":1728},{"class":1727},"ct-244866",[1729],{"type":23,"value":1730},"\"x\"",{"type":17,"tag":305,"props":1732,"children":1733},{"class":318},[1734],{"type":23,"value":1735},")\n",{"type":17,"tag":305,"props":1737,"children":1738},{"class":307,"line":353},[1739,1743,1747,1751,1755,1759,1764],{"type":17,"tag":305,"props":1740,"children":1741},{"class":318},[1742],{"type":23,"value":446},{"type":17,"tag":305,"props":1744,"children":1745},{"class":312},[1746],{"type":23,"value":364},{"type":17,"tag":305,"props":1748,"children":1749},{"class":318},[1750],{"type":23,"value":1714},{"type":17,"tag":305,"props":1752,"children":1753},{"class":372},[1754],{"type":23,"value":1719},{"type":17,"tag":305,"props":1756,"children":1757},{"class":318},[1758],{"type":23,"value":1724},{"type":17,"tag":305,"props":1760,"children":1761},{"class":1727},[1762],{"type":23,"value":1763},"\"y\"",{"type":17,"tag":305,"props":1765,"children":1766},{"class":318},[1767],{"type":23,"value":1735},{"type":17,"tag":305,"props":1769,"children":1770},{"class":307,"line":378},[1771,1776,1780,1784,1788,1792,1797],{"type":17,"tag":305,"props":1772,"children":1773},{"class":318},[1774],{"type":23,"value":1775},"theta ",{"type":17,"tag":305,"props":1777,"children":1778},{"class":312},[1779],{"type":23,"value":364},{"type":17,"tag":305,"props":1781,"children":1782},{"class":318},[1783],{"type":23,"value":1714},{"type":17,"tag":305,"props":1785,"children":1786},{"class":372},[1787],{"type":23,"value":1719},{"type":17,"tag":305,"props":1789,"children":1790},{"class":318},[1791],{"type":23,"value":1724},{"type":17,"tag":305,"props":1793,"children":1794},{"class":1727},[1795],{"type":23,"value":1796},"\"theta\"",{"type":17,"tag":305,"props":1798,"children":1799},{"class":318},[1800],{"type":23,"value":1735},{"type":17,"tag":305,"props":1802,"children":1803},{"class":307,"line":387},[1804,1809,1813],{"type":17,"tag":305,"props":1805,"children":1806},{"class":318},[1807],{"type":23,"value":1808},"states ",{"type":17,"tag":305,"props":1810,"children":1811},{"class":312},[1812],{"type":23,"value":364},{"type":17,"tag":305,"props":1814,"children":1815},{"class":318},[1816],{"type":23,"value":1817}," ca.vertcat(x, y, theta)\n",{"type":17,"tag":305,"props":1819,"children":1820},{"class":307,"line":409},[1821,1826,1830],{"type":17,"tag":305,"props":1822,"children":1823},{"class":318},[1824],{"type":23,"value":1825},"num_states ",{"type":17,"tag":305,"props":1827,"children":1828},{"class":312},[1829],{"type":23,"value":364},{"type":17,"tag":305,"props":1831,"children":1832},{"class":318},[1833],{"type":23,"value":1834}," states.numel()\n",{"type":17,"tag":305,"props":1836,"children":1837},{"class":307,"line":418},[1838],{"type":17,"tag":305,"props":1839,"children":1840},{},[1841],{"type":23,"value":340},{"type":17,"tag":305,"props":1843,"children":1844},{"class":307,"line":440},[1845],{"type":17,"tag":305,"props":1846,"children":1847},{"class":347},[1848],{"type":23,"value":1849},"## Control\n",{"type":17,"tag":305,"props":1851,"children":1852},{"class":307,"line":461},[1853,1858,1862,1866,1870,1874,1879],{"type":17,"tag":305,"props":1854,"children":1855},{"class":318},[1856],{"type":23,"value":1857},"u1 ",{"type":17,"tag":305,"props":1859,"children":1860},{"class":312},[1861],{"type":23,"value":364},{"type":17,"tag":305,"props":1863,"children":1864},{"class":318},[1865],{"type":23,"value":1714},{"type":17,"tag":305,"props":1867,"children":1868},{"class":372},[1869],{"type":23,"value":1719},{"type":17,"tag":305,"props":1871,"children":1872},{"class":318},[1873],{"type":23,"value":1724},{"type":17,"tag":305,"props":1875,"children":1876},{"class":1727},[1877],{"type":23,"value":1878},"\"u1\"",{"type":17,"tag":305,"props":1880,"children":1881},{"class":318},[1882],{"type":23,"value":1735},{"type":17,"tag":305,"props":1884,"children":1885},{"class":307,"line":482},[1886,1891,1895,1899,1903,1907,1912],{"type":17,"tag":305,"props":1887,"children":1888},{"class":318},[1889],{"type":23,"value":1890},"u2 ",{"type":17,"tag":305,"props":1892,"children":1893},{"class":312},[1894],{"type":23,"value":364},{"type":17,"tag":305,"props":1896,"children":1897},{"class":318},[1898],{"type":23,"value":1714},{"type":17,"tag":305,"props":1900,"children":1901},{"class":372},[1902],{"type":23,"value":1719},{"type":17,"tag":305,"props":1904,"children":1905},{"class":318},[1906],{"type":23,"value":1724},{"type":17,"tag":305,"props":1908,"children":1909},{"class":1727},[1910],{"type":23,"value":1911},"\"u2\"",{"type":17,"tag":305,"props":1913,"children":1914},{"class":318},[1915],{"type":23,"value":1735},{"type":17,"tag":305,"props":1917,"children":1918},{"class":307,"line":491},[1919,1924,1928],{"type":17,"tag":305,"props":1920,"children":1921},{"class":318},[1922],{"type":23,"value":1923},"controls ",{"type":17,"tag":305,"props":1925,"children":1926},{"class":312},[1927],{"type":23,"value":364},{"type":17,"tag":305,"props":1929,"children":1930},{"class":318},[1931],{"type":23,"value":1932}," ca.vertcat(u1, u2)\n",{"type":17,"tag":305,"props":1934,"children":1935},{"class":307,"line":522},[1936,1941,1945],{"type":17,"tag":305,"props":1937,"children":1938},{"class":318},[1939],{"type":23,"value":1940},"num_controls ",{"type":17,"tag":305,"props":1942,"children":1943},{"class":312},[1944],{"type":23,"value":364},{"type":17,"tag":305,"props":1946,"children":1947},{"class":318},[1948],{"type":23,"value":1949}," controls.numel()\n",{"type":17,"tag":305,"props":1951,"children":1952},{"class":307,"line":553},[1953],{"type":17,"tag":305,"props":1954,"children":1955},{},[1956],{"type":23,"value":340},{"type":17,"tag":305,"props":1958,"children":1959},{"class":307,"line":562},[1960],{"type":17,"tag":305,"props":1961,"children":1962},{"class":347},[1963],{"type":23,"value":1964},"# Define Nonlinear model\n",{"type":17,"tag":305,"props":1966,"children":1967},{"class":307,"line":571},[1968],{"type":17,"tag":305,"props":1969,"children":1970},{"class":347},[1971],{"type":23,"value":1972},"## Rotation Matrix\n",{"type":17,"tag":305,"props":1974,"children":1975},{"class":307,"line":598},[1976,1981,1985],{"type":17,"tag":305,"props":1977,"children":1978},{"class":318},[1979],{"type":23,"value":1980},"rot_mat ",{"type":17,"tag":305,"props":1982,"children":1983},{"class":312},[1984],{"type":23,"value":364},{"type":17,"tag":305,"props":1986,"children":1987},{"class":318},[1988],{"type":23,"value":1989}," ca.vertcat(\n",{"type":17,"tag":305,"props":1991,"children":1992},{"class":307,"line":637},[1993,1998,2002],{"type":17,"tag":305,"props":1994,"children":1995},{"class":318},[1996],{"type":23,"value":1997},"    ca.horzcat(ca.cos(theta), ca.sin(theta), ",{"type":17,"tag":305,"props":1999,"children":2000},{"class":372},[2001],{"type":23,"value":609},{"type":17,"tag":305,"props":2003,"children":2004},{"class":318},[2005],{"type":23,"value":2006},"),\n",{"type":17,"tag":305,"props":2008,"children":2009},{"class":307,"line":670},[2010,2015,2020,2025,2029],{"type":17,"tag":305,"props":2011,"children":2012},{"class":318},[2013],{"type":23,"value":2014},"    ca.horzcat(",{"type":17,"tag":305,"props":2016,"children":2017},{"class":312},[2018],{"type":23,"value":2019},"-",{"type":17,"tag":305,"props":2021,"children":2022},{"class":318},[2023],{"type":23,"value":2024},"ca.sin(theta), ca.cos(theta), ",{"type":17,"tag":305,"props":2026,"children":2027},{"class":372},[2028],{"type":23,"value":609},{"type":17,"tag":305,"props":2030,"children":2031},{"class":318},[2032],{"type":23,"value":2006},{"type":17,"tag":305,"props":2034,"children":2035},{"class":307,"line":688},[2036,2040,2044,2049,2053,2057,2061],{"type":17,"tag":305,"props":2037,"children":2038},{"class":318},[2039],{"type":23,"value":2014},{"type":17,"tag":305,"props":2041,"children":2042},{"class":372},[2043],{"type":23,"value":609},{"type":17,"tag":305,"props":2045,"children":2046},{"class":318},[2047],{"type":23,"value":2048},", ",{"type":17,"tag":305,"props":2050,"children":2051},{"class":372},[2052],{"type":23,"value":609},{"type":17,"tag":305,"props":2054,"children":2055},{"class":318},[2056],{"type":23,"value":2048},{"type":17,"tag":305,"props":2058,"children":2059},{"class":372},[2060],{"type":23,"value":680},{"type":17,"tag":305,"props":2062,"children":2063},{"class":318},[2064],{"type":23,"value":1735},{"type":17,"tag":305,"props":2066,"children":2067},{"class":307,"line":697},[2068],{"type":17,"tag":305,"props":2069,"children":2070},{"class":318},[2071],{"type":23,"value":1735},{"type":17,"tag":305,"props":2073,"children":2074},{"class":307,"line":705},[2075],{"type":17,"tag":305,"props":2076,"children":2077},{},[2078],{"type":23,"value":340},{"type":17,"tag":305,"props":2080,"children":2081},{"class":307,"line":738},[2082,2087,2091,2096,2100],{"type":17,"tag":305,"props":2083,"children":2084},{"class":318},[2085],{"type":23,"value":2086},"vx ",{"type":17,"tag":305,"props":2088,"children":2089},{"class":312},[2090],{"type":23,"value":364},{"type":17,"tag":305,"props":2092,"children":2093},{"class":318},[2094],{"type":23,"value":2095}," u1 ",{"type":17,"tag":305,"props":2097,"children":2098},{"class":312},[2099],{"type":23,"value":619},{"type":17,"tag":305,"props":2101,"children":2102},{"class":318},[2103],{"type":23,"value":2104}," ca.cos(theta)\n",{"type":17,"tag":305,"props":2106,"children":2107},{"class":307,"line":756},[2108,2113,2117,2121,2125],{"type":17,"tag":305,"props":2109,"children":2110},{"class":318},[2111],{"type":23,"value":2112},"vy ",{"type":17,"tag":305,"props":2114,"children":2115},{"class":312},[2116],{"type":23,"value":364},{"type":17,"tag":305,"props":2118,"children":2119},{"class":318},[2120],{"type":23,"value":2095},{"type":17,"tag":305,"props":2122,"children":2123},{"class":312},[2124],{"type":23,"value":619},{"type":17,"tag":305,"props":2126,"children":2127},{"class":318},[2128],{"type":23,"value":2129}," ca.sin(theta)\n",{"type":17,"tag":305,"props":2131,"children":2132},{"class":307,"line":902},[2133,2138,2142],{"type":17,"tag":305,"props":2134,"children":2135},{"class":318},[2136],{"type":23,"value":2137},"vyaw ",{"type":17,"tag":305,"props":2139,"children":2140},{"class":312},[2141],{"type":23,"value":364},{"type":17,"tag":305,"props":2143,"children":2144},{"class":318},[2145],{"type":23,"value":2146}," u2\n",{"type":17,"tag":305,"props":2148,"children":2149},{"class":307,"line":1040},[2150],{"type":17,"tag":305,"props":2151,"children":2152},{},[2153],{"type":23,"value":340},{"type":17,"tag":305,"props":2155,"children":2156},{"class":307,"line":1131},[2157,2162,2166],{"type":17,"tag":305,"props":2158,"children":2159},{"class":318},[2160],{"type":23,"value":2161},"rhs ",{"type":17,"tag":305,"props":2163,"children":2164},{"class":312},[2165],{"type":23,"value":364},{"type":17,"tag":305,"props":2167,"children":2168},{"class":318},[2169],{"type":23,"value":2170}," ca.vertcat(vx, vy, vyaw)\n",{"type":17,"tag":305,"props":2172,"children":2173},{"class":307,"line":1139},[2174],{"type":17,"tag":305,"props":2175,"children":2176},{"class":347},[2177],{"type":23,"value":2178},"## Define mapped nonlinear function f(x,u) -> rhs\n",{"type":17,"tag":305,"props":2180,"children":2181},{"class":307,"line":1153},[2182,2186,2190,2195,2200],{"type":17,"tag":305,"props":2183,"children":2184},{"class":318},[2185],{"type":23,"value":577},{"type":17,"tag":305,"props":2187,"children":2188},{"class":312},[2189],{"type":23,"value":364},{"type":17,"tag":305,"props":2191,"children":2192},{"class":318},[2193],{"type":23,"value":2194}," ca.Function(",{"type":17,"tag":305,"props":2196,"children":2197},{"class":1727},[2198],{"type":23,"value":2199},"'f'",{"type":17,"tag":305,"props":2201,"children":2202},{"class":318},[2203],{"type":23,"value":2204},", [states, controls], [rhs])",{"type":17,"tag":26,"props":2206,"children":2207},{},[2208],{"type":23,"value":2209},"Declare symbolic matrix",{"type":17,"tag":290,"props":2211,"children":2214},{"className":2212,"code":2213,"language":295,"meta":7},[293],"X = ca.SX.sym('X', num_states, prediction_horizons + 1)\nX_ref = ca.SX.sym('X_ref', num_states, prediction_horizons + 1)\nU = ca.SX.sym('U', num_controls, prediction_horizons)\nU_ref = ca.SX.sym('U_ref', num_controls, prediction_horizons)\n",[2215],{"type":17,"tag":298,"props":2216,"children":2217},{},[2218],{"type":17,"tag":290,"props":2219,"children":2220},{"__ignoreMap":7},[2221,2271,2320,2354],{"type":17,"tag":305,"props":2222,"children":2223},{"class":307,"line":308},[2224,2229,2233,2237,2241,2245,2250,2255,2259,2263,2267],{"type":17,"tag":305,"props":2225,"children":2226},{"class":318},[2227],{"type":23,"value":2228},"X ",{"type":17,"tag":305,"props":2230,"children":2231},{"class":312},[2232],{"type":23,"value":364},{"type":17,"tag":305,"props":2234,"children":2235},{"class":318},[2236],{"type":23,"value":1714},{"type":17,"tag":305,"props":2238,"children":2239},{"class":372},[2240],{"type":23,"value":1719},{"type":17,"tag":305,"props":2242,"children":2243},{"class":318},[2244],{"type":23,"value":1724},{"type":17,"tag":305,"props":2246,"children":2247},{"class":1727},[2248],{"type":23,"value":2249},"'X'",{"type":17,"tag":305,"props":2251,"children":2252},{"class":318},[2253],{"type":23,"value":2254},", num_states, prediction_horizons ",{"type":17,"tag":305,"props":2256,"children":2257},{"class":312},[2258],{"type":23,"value":776},{"type":17,"tag":305,"props":2260,"children":2261},{"class":318},[2262],{"type":23,"value":369},{"type":17,"tag":305,"props":2264,"children":2265},{"class":372},[2266],{"type":23,"value":680},{"type":17,"tag":305,"props":2268,"children":2269},{"class":318},[2270],{"type":23,"value":1735},{"type":17,"tag":305,"props":2272,"children":2273},{"class":307,"line":334},[2274,2279,2283,2287,2291,2295,2300,2304,2308,2312,2316],{"type":17,"tag":305,"props":2275,"children":2276},{"class":318},[2277],{"type":23,"value":2278},"X_ref ",{"type":17,"tag":305,"props":2280,"children":2281},{"class":312},[2282],{"type":23,"value":364},{"type":17,"tag":305,"props":2284,"children":2285},{"class":318},[2286],{"type":23,"value":1714},{"type":17,"tag":305,"props":2288,"children":2289},{"class":372},[2290],{"type":23,"value":1719},{"type":17,"tag":305,"props":2292,"children":2293},{"class":318},[2294],{"type":23,"value":1724},{"type":17,"tag":305,"props":2296,"children":2297},{"class":1727},[2298],{"type":23,"value":2299},"'X_ref'",{"type":17,"tag":305,"props":2301,"children":2302},{"class":318},[2303],{"type":23,"value":2254},{"type":17,"tag":305,"props":2305,"children":2306},{"class":312},[2307],{"type":23,"value":776},{"type":17,"tag":305,"props":2309,"children":2310},{"class":318},[2311],{"type":23,"value":369},{"type":17,"tag":305,"props":2313,"children":2314},{"class":372},[2315],{"type":23,"value":680},{"type":17,"tag":305,"props":2317,"children":2318},{"class":318},[2319],{"type":23,"value":1735},{"type":17,"tag":305,"props":2321,"children":2322},{"class":307,"line":343},[2323,2328,2332,2336,2340,2344,2349],{"type":17,"tag":305,"props":2324,"children":2325},{"class":318},[2326],{"type":23,"value":2327},"U ",{"type":17,"tag":305,"props":2329,"children":2330},{"class":312},[2331],{"type":23,"value":364},{"type":17,"tag":305,"props":2333,"children":2334},{"class":318},[2335],{"type":23,"value":1714},{"type":17,"tag":305,"props":2337,"children":2338},{"class":372},[2339],{"type":23,"value":1719},{"type":17,"tag":305,"props":2341,"children":2342},{"class":318},[2343],{"type":23,"value":1724},{"type":17,"tag":305,"props":2345,"children":2346},{"class":1727},[2347],{"type":23,"value":2348},"'U'",{"type":17,"tag":305,"props":2350,"children":2351},{"class":318},[2352],{"type":23,"value":2353},", num_controls, prediction_horizons)\n",{"type":17,"tag":305,"props":2355,"children":2356},{"class":307,"line":353},[2357,2362,2366,2370,2374,2378,2383],{"type":17,"tag":305,"props":2358,"children":2359},{"class":318},[2360],{"type":23,"value":2361},"U_ref ",{"type":17,"tag":305,"props":2363,"children":2364},{"class":312},[2365],{"type":23,"value":364},{"type":17,"tag":305,"props":2367,"children":2368},{"class":318},[2369],{"type":23,"value":1714},{"type":17,"tag":305,"props":2371,"children":2372},{"class":372},[2373],{"type":23,"value":1719},{"type":17,"tag":305,"props":2375,"children":2376},{"class":318},[2377],{"type":23,"value":1724},{"type":17,"tag":305,"props":2379,"children":2380},{"class":1727},[2381],{"type":23,"value":2382},"'U_ref'",{"type":17,"tag":305,"props":2384,"children":2385},{"class":318},[2386],{"type":23,"value":2387},", num_controls, prediction_horizons)",{"type":17,"tag":26,"props":2389,"children":2390},{},[2391,2393,2397],{"type":23,"value":2392},"Define nonlinear programming and options for ",{"type":17,"tag":1628,"props":2394,"children":2395},{},[2396],{"type":23,"value":1632},{"type":23,"value":2398},"\nnlp_prob = {\n'f': cost_fn,\n'x': opt_var,\n'p': opt_dec,\n'g': g\n}",{"type":17,"tag":26,"props":2400,"children":2401},{},[2402],{"type":23,"value":2403},"nlp_opts = {\n'ipopt.max_iter': 5000,\n'ipopt.print_level': 0,\n'ipopt.acceptable_tol': 1e-6,\n'ipopt.acceptable_obj_change_tol': 1e-4,\n'print_time': 0\n}",{"type":17,"tag":26,"props":2405,"children":2406},{},[2407],{"type":23,"value":2408},"Determine boundary and constraint for our optimizer",{"type":17,"tag":290,"props":2410,"children":2413},{"className":2411,"code":2412,"language":295,"meta":7},[293],"lbx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\nubx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\n\nlbx[0: num_states * (prediction_horizons + 1): num_states] = x_min\nlbx[1: num_states * (prediction_horizons + 1): num_states] = y_min\nlbx[2: num_states * (prediction_horizons + 1): num_states] = theta_min\n\nubx[0: num_states * (prediction_horizons + 1): num_states] = x_max\nubx[1: num_states * (prediction_horizons + 1): num_states] = y_max\nubx[2: num_states * (prediction_horizons + 1): num_states] = theta_max\n\nlbx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\nlbx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\n\nubx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\nubx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\n\nargs = {\n    'lbg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'ubg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'lbx': lbx,\n    'ubx': ubx\n}\n",[2414],{"type":17,"tag":298,"props":2415,"children":2416},{},[2417],{"type":17,"tag":290,"props":2418,"children":2419},{"__ignoreMap":7},[2420,2498,2570,2577,2628,2676,2724,2731,2780,2828,2876,2883,2966,3061,3068,3149,3244,3251,3268,3327,3383,3400,3417],{"type":17,"tag":305,"props":2421,"children":2422},{"class":307,"line":308},[2423,2428,2432,2436,2441,2446,2450,2455,2459,2463,2467,2471,2475,2480,2484,2489,2493],{"type":17,"tag":305,"props":2424,"children":2425},{"class":318},[2426],{"type":23,"value":2427},"lbx ",{"type":17,"tag":305,"props":2429,"children":2430},{"class":312},[2431],{"type":23,"value":364},{"type":17,"tag":305,"props":2433,"children":2434},{"class":318},[2435],{"type":23,"value":1714},{"type":17,"tag":305,"props":2437,"children":2438},{"class":372},[2439],{"type":23,"value":2440},"DM",{"type":17,"tag":305,"props":2442,"children":2443},{"class":318},[2444],{"type":23,"value":2445},".zeros((num_states ",{"type":17,"tag":305,"props":2447,"children":2448},{"class":312},[2449],{"type":23,"value":619},{"type":17,"tag":305,"props":2451,"children":2452},{"class":318},[2453],{"type":23,"value":2454}," (prediction_horizons ",{"type":17,"tag":305,"props":2456,"children":2457},{"class":312},[2458],{"type":23,"value":776},{"type":17,"tag":305,"props":2460,"children":2461},{"class":318},[2462],{"type":23,"value":369},{"type":17,"tag":305,"props":2464,"children":2465},{"class":372},[2466],{"type":23,"value":680},{"type":17,"tag":305,"props":2468,"children":2469},{"class":318},[2470],{"type":23,"value":799},{"type":17,"tag":305,"props":2472,"children":2473},{"class":312},[2474],{"type":23,"value":776},{"type":17,"tag":305,"props":2476,"children":2477},{"class":318},[2478],{"type":23,"value":2479}," num_controls ",{"type":17,"tag":305,"props":2481,"children":2482},{"class":312},[2483],{"type":23,"value":619},{"type":17,"tag":305,"props":2485,"children":2486},{"class":318},[2487],{"type":23,"value":2488}," prediction_horizons, ",{"type":17,"tag":305,"props":2490,"children":2491},{"class":372},[2492],{"type":23,"value":680},{"type":17,"tag":305,"props":2494,"children":2495},{"class":318},[2496],{"type":23,"value":2497},"))\n",{"type":17,"tag":305,"props":2499,"children":2500},{"class":307,"line":334},[2501,2506,2510,2514,2518,2522,2526,2530,2534,2538,2542,2546,2550,2554,2558,2562,2566],{"type":17,"tag":305,"props":2502,"children":2503},{"class":318},[2504],{"type":23,"value":2505},"ubx ",{"type":17,"tag":305,"props":2507,"children":2508},{"class":312},[2509],{"type":23,"value":364},{"type":17,"tag":305,"props":2511,"children":2512},{"class":318},[2513],{"type":23,"value":1714},{"type":17,"tag":305,"props":2515,"children":2516},{"class":372},[2517],{"type":23,"value":2440},{"type":17,"tag":305,"props":2519,"children":2520},{"class":318},[2521],{"type":23,"value":2445},{"type":17,"tag":305,"props":2523,"children":2524},{"class":312},[2525],{"type":23,"value":619},{"type":17,"tag":305,"props":2527,"children":2528},{"class":318},[2529],{"type":23,"value":2454},{"type":17,"tag":305,"props":2531,"children":2532},{"class":312},[2533],{"type":23,"value":776},{"type":17,"tag":305,"props":2535,"children":2536},{"class":318},[2537],{"type":23,"value":369},{"type":17,"tag":305,"props":2539,"children":2540},{"class":372},[2541],{"type":23,"value":680},{"type":17,"tag":305,"props":2543,"children":2544},{"class":318},[2545],{"type":23,"value":799},{"type":17,"tag":305,"props":2547,"children":2548},{"class":312},[2549],{"type":23,"value":776},{"type":17,"tag":305,"props":2551,"children":2552},{"class":318},[2553],{"type":23,"value":2479},{"type":17,"tag":305,"props":2555,"children":2556},{"class":312},[2557],{"type":23,"value":619},{"type":17,"tag":305,"props":2559,"children":2560},{"class":318},[2561],{"type":23,"value":2488},{"type":17,"tag":305,"props":2563,"children":2564},{"class":372},[2565],{"type":23,"value":680},{"type":17,"tag":305,"props":2567,"children":2568},{"class":318},[2569],{"type":23,"value":2497},{"type":17,"tag":305,"props":2571,"children":2572},{"class":307,"line":343},[2573],{"type":17,"tag":305,"props":2574,"children":2575},{},[2576],{"type":23,"value":340},{"type":17,"tag":305,"props":2578,"children":2579},{"class":307,"line":353},[2580,2585,2589,2594,2598,2602,2606,2610,2614,2619,2623],{"type":17,"tag":305,"props":2581,"children":2582},{"class":318},[2583],{"type":23,"value":2584},"lbx[",{"type":17,"tag":305,"props":2586,"children":2587},{"class":372},[2588],{"type":23,"value":609},{"type":17,"tag":305,"props":2590,"children":2591},{"class":318},[2592],{"type":23,"value":2593},": num_states ",{"type":17,"tag":305,"props":2595,"children":2596},{"class":312},[2597],{"type":23,"value":619},{"type":17,"tag":305,"props":2599,"children":2600},{"class":318},[2601],{"type":23,"value":2454},{"type":17,"tag":305,"props":2603,"children":2604},{"class":312},[2605],{"type":23,"value":776},{"type":17,"tag":305,"props":2607,"children":2608},{"class":318},[2609],{"type":23,"value":369},{"type":17,"tag":305,"props":2611,"children":2612},{"class":372},[2613],{"type":23,"value":680},{"type":17,"tag":305,"props":2615,"children":2616},{"class":318},[2617],{"type":23,"value":2618},"): num_states] ",{"type":17,"tag":305,"props":2620,"children":2621},{"class":312},[2622],{"type":23,"value":364},{"type":17,"tag":305,"props":2624,"children":2625},{"class":318},[2626],{"type":23,"value":2627}," x_min\n",{"type":17,"tag":305,"props":2629,"children":2630},{"class":307,"line":378},[2631,2635,2639,2643,2647,2651,2655,2659,2663,2667,2671],{"type":17,"tag":305,"props":2632,"children":2633},{"class":318},[2634],{"type":23,"value":2584},{"type":17,"tag":305,"props":2636,"children":2637},{"class":372},[2638],{"type":23,"value":680},{"type":17,"tag":305,"props":2640,"children":2641},{"class":318},[2642],{"type":23,"value":2593},{"type":17,"tag":305,"props":2644,"children":2645},{"class":312},[2646],{"type":23,"value":619},{"type":17,"tag":305,"props":2648,"children":2649},{"class":318},[2650],{"type":23,"value":2454},{"type":17,"tag":305,"props":2652,"children":2653},{"class":312},[2654],{"type":23,"value":776},{"type":17,"tag":305,"props":2656,"children":2657},{"class":318},[2658],{"type":23,"value":369},{"type":17,"tag":305,"props":2660,"children":2661},{"class":372},[2662],{"type":23,"value":680},{"type":17,"tag":305,"props":2664,"children":2665},{"class":318},[2666],{"type":23,"value":2618},{"type":17,"tag":305,"props":2668,"children":2669},{"class":312},[2670],{"type":23,"value":364},{"type":17,"tag":305,"props":2672,"children":2673},{"class":318},[2674],{"type":23,"value":2675}," y_min\n",{"type":17,"tag":305,"props":2677,"children":2678},{"class":307,"line":387},[2679,2683,2687,2691,2695,2699,2703,2707,2711,2715,2719],{"type":17,"tag":305,"props":2680,"children":2681},{"class":318},[2682],{"type":23,"value":2584},{"type":17,"tag":305,"props":2684,"children":2685},{"class":372},[2686],{"type":23,"value":629},{"type":17,"tag":305,"props":2688,"children":2689},{"class":318},[2690],{"type":23,"value":2593},{"type":17,"tag":305,"props":2692,"children":2693},{"class":312},[2694],{"type":23,"value":619},{"type":17,"tag":305,"props":2696,"children":2697},{"class":318},[2698],{"type":23,"value":2454},{"type":17,"tag":305,"props":2700,"children":2701},{"class":312},[2702],{"type":23,"value":776},{"type":17,"tag":305,"props":2704,"children":2705},{"class":318},[2706],{"type":23,"value":369},{"type":17,"tag":305,"props":2708,"children":2709},{"class":372},[2710],{"type":23,"value":680},{"type":17,"tag":305,"props":2712,"children":2713},{"class":318},[2714],{"type":23,"value":2618},{"type":17,"tag":305,"props":2716,"children":2717},{"class":312},[2718],{"type":23,"value":364},{"type":17,"tag":305,"props":2720,"children":2721},{"class":318},[2722],{"type":23,"value":2723}," theta_min\n",{"type":17,"tag":305,"props":2725,"children":2726},{"class":307,"line":409},[2727],{"type":17,"tag":305,"props":2728,"children":2729},{},[2730],{"type":23,"value":340},{"type":17,"tag":305,"props":2732,"children":2733},{"class":307,"line":418},[2734,2739,2743,2747,2751,2755,2759,2763,2767,2771,2775],{"type":17,"tag":305,"props":2735,"children":2736},{"class":318},[2737],{"type":23,"value":2738},"ubx[",{"type":17,"tag":305,"props":2740,"children":2741},{"class":372},[2742],{"type":23,"value":609},{"type":17,"tag":305,"props":2744,"children":2745},{"class":318},[2746],{"type":23,"value":2593},{"type":17,"tag":305,"props":2748,"children":2749},{"class":312},[2750],{"type":23,"value":619},{"type":17,"tag":305,"props":2752,"children":2753},{"class":318},[2754],{"type":23,"value":2454},{"type":17,"tag":305,"props":2756,"children":2757},{"class":312},[2758],{"type":23,"value":776},{"type":17,"tag":305,"props":2760,"children":2761},{"class":318},[2762],{"type":23,"value":369},{"type":17,"tag":305,"props":2764,"children":2765},{"class":372},[2766],{"type":23,"value":680},{"type":17,"tag":305,"props":2768,"children":2769},{"class":318},[2770],{"type":23,"value":2618},{"type":17,"tag":305,"props":2772,"children":2773},{"class":312},[2774],{"type":23,"value":364},{"type":17,"tag":305,"props":2776,"children":2777},{"class":318},[2778],{"type":23,"value":2779}," x_max\n",{"type":17,"tag":305,"props":2781,"children":2782},{"class":307,"line":440},[2783,2787,2791,2795,2799,2803,2807,2811,2815,2819,2823],{"type":17,"tag":305,"props":2784,"children":2785},{"class":318},[2786],{"type":23,"value":2738},{"type":17,"tag":305,"props":2788,"children":2789},{"class":372},[2790],{"type":23,"value":680},{"type":17,"tag":305,"props":2792,"children":2793},{"class":318},[2794],{"type":23,"value":2593},{"type":17,"tag":305,"props":2796,"children":2797},{"class":312},[2798],{"type":23,"value":619},{"type":17,"tag":305,"props":2800,"children":2801},{"class":318},[2802],{"type":23,"value":2454},{"type":17,"tag":305,"props":2804,"children":2805},{"class":312},[2806],{"type":23,"value":776},{"type":17,"tag":305,"props":2808,"children":2809},{"class":318},[2810],{"type":23,"value":369},{"type":17,"tag":305,"props":2812,"children":2813},{"class":372},[2814],{"type":23,"value":680},{"type":17,"tag":305,"props":2816,"children":2817},{"class":318},[2818],{"type":23,"value":2618},{"type":17,"tag":305,"props":2820,"children":2821},{"class":312},[2822],{"type":23,"value":364},{"type":17,"tag":305,"props":2824,"children":2825},{"class":318},[2826],{"type":23,"value":2827}," y_max\n",{"type":17,"tag":305,"props":2829,"children":2830},{"class":307,"line":461},[2831,2835,2839,2843,2847,2851,2855,2859,2863,2867,2871],{"type":17,"tag":305,"props":2832,"children":2833},{"class":318},[2834],{"type":23,"value":2738},{"type":17,"tag":305,"props":2836,"children":2837},{"class":372},[2838],{"type":23,"value":629},{"type":17,"tag":305,"props":2840,"children":2841},{"class":318},[2842],{"type":23,"value":2593},{"type":17,"tag":305,"props":2844,"children":2845},{"class":312},[2846],{"type":23,"value":619},{"type":17,"tag":305,"props":2848,"children":2849},{"class":318},[2850],{"type":23,"value":2454},{"type":17,"tag":305,"props":2852,"children":2853},{"class":312},[2854],{"type":23,"value":776},{"type":17,"tag":305,"props":2856,"children":2857},{"class":318},[2858],{"type":23,"value":369},{"type":17,"tag":305,"props":2860,"children":2861},{"class":372},[2862],{"type":23,"value":680},{"type":17,"tag":305,"props":2864,"children":2865},{"class":318},[2866],{"type":23,"value":2618},{"type":17,"tag":305,"props":2868,"children":2869},{"class":312},[2870],{"type":23,"value":364},{"type":17,"tag":305,"props":2872,"children":2873},{"class":318},[2874],{"type":23,"value":2875}," theta_max\n",{"type":17,"tag":305,"props":2877,"children":2878},{"class":307,"line":482},[2879],{"type":17,"tag":305,"props":2880,"children":2881},{},[2882],{"type":23,"value":340},{"type":17,"tag":305,"props":2884,"children":2885},{"class":307,"line":491},[2886,2891,2895,2899,2903,2907,2911,2916,2920,2924,2928,2932,2936,2940,2944,2948,2952,2957,2961],{"type":17,"tag":305,"props":2887,"children":2888},{"class":318},[2889],{"type":23,"value":2890},"lbx[num_states ",{"type":17,"tag":305,"props":2892,"children":2893},{"class":312},[2894],{"type":23,"value":619},{"type":17,"tag":305,"props":2896,"children":2897},{"class":318},[2898],{"type":23,"value":2454},{"type":17,"tag":305,"props":2900,"children":2901},{"class":312},[2902],{"type":23,"value":776},{"type":17,"tag":305,"props":2904,"children":2905},{"class":318},[2906],{"type":23,"value":369},{"type":17,"tag":305,"props":2908,"children":2909},{"class":372},[2910],{"type":23,"value":680},{"type":17,"tag":305,"props":2912,"children":2913},{"class":318},[2914],{"type":23,"value":2915},"): num_states ",{"type":17,"tag":305,"props":2917,"children":2918},{"class":312},[2919],{"type":23,"value":619},{"type":17,"tag":305,"props":2921,"children":2922},{"class":318},[2923],{"type":23,"value":2454},{"type":17,"tag":305,"props":2925,"children":2926},{"class":312},[2927],{"type":23,"value":776},{"type":17,"tag":305,"props":2929,"children":2930},{"class":318},[2931],{"type":23,"value":369},{"type":17,"tag":305,"props":2933,"children":2934},{"class":372},[2935],{"type":23,"value":680},{"type":17,"tag":305,"props":2937,"children":2938},{"class":318},[2939],{"type":23,"value":799},{"type":17,"tag":305,"props":2941,"children":2942},{"class":312},[2943],{"type":23,"value":776},{"type":17,"tag":305,"props":2945,"children":2946},{"class":318},[2947],{"type":23,"value":2479},{"type":17,"tag":305,"props":2949,"children":2950},{"class":312},[2951],{"type":23,"value":619},{"type":17,"tag":305,"props":2953,"children":2954},{"class":318},[2955],{"type":23,"value":2956}," prediction_horizons: num_controls] ",{"type":17,"tag":305,"props":2958,"children":2959},{"class":312},[2960],{"type":23,"value":364},{"type":17,"tag":305,"props":2962,"children":2963},{"class":318},[2964],{"type":23,"value":2965}," u_min\n",{"type":17,"tag":305,"props":2967,"children":2968},{"class":307,"line":522},[2969,2973,2977,2981,2985,2989,2993,2997,3001,3005,3009,3013,3017,3021,3025,3029,3033,3037,3041,3045,3049,3053,3057],{"type":17,"tag":305,"props":2970,"children":2971},{"class":318},[2972],{"type":23,"value":2890},{"type":17,"tag":305,"props":2974,"children":2975},{"class":312},[2976],{"type":23,"value":619},{"type":17,"tag":305,"props":2978,"children":2979},{"class":318},[2980],{"type":23,"value":2454},{"type":17,"tag":305,"props":2982,"children":2983},{"class":312},[2984],{"type":23,"value":776},{"type":17,"tag":305,"props":2986,"children":2987},{"class":318},[2988],{"type":23,"value":369},{"type":17,"tag":305,"props":2990,"children":2991},{"class":372},[2992],{"type":23,"value":680},{"type":17,"tag":305,"props":2994,"children":2995},{"class":318},[2996],{"type":23,"value":799},{"type":17,"tag":305,"props":2998,"children":2999},{"class":312},[3000],{"type":23,"value":776},{"type":17,"tag":305,"props":3002,"children":3003},{"class":318},[3004],{"type":23,"value":369},{"type":17,"tag":305,"props":3006,"children":3007},{"class":372},[3008],{"type":23,"value":680},{"type":17,"tag":305,"props":3010,"children":3011},{"class":318},[3012],{"type":23,"value":2593},{"type":17,"tag":305,"props":3014,"children":3015},{"class":312},[3016],{"type":23,"value":619},{"type":17,"tag":305,"props":3018,"children":3019},{"class":318},[3020],{"type":23,"value":2454},{"type":17,"tag":305,"props":3022,"children":3023},{"class":312},[3024],{"type":23,"value":776},{"type":17,"tag":305,"props":3026,"children":3027},{"class":318},[3028],{"type":23,"value":369},{"type":17,"tag":305,"props":3030,"children":3031},{"class":372},[3032],{"type":23,"value":680},{"type":17,"tag":305,"props":3034,"children":3035},{"class":318},[3036],{"type":23,"value":799},{"type":17,"tag":305,"props":3038,"children":3039},{"class":312},[3040],{"type":23,"value":776},{"type":17,"tag":305,"props":3042,"children":3043},{"class":318},[3044],{"type":23,"value":2479},{"type":17,"tag":305,"props":3046,"children":3047},{"class":312},[3048],{"type":23,"value":619},{"type":17,"tag":305,"props":3050,"children":3051},{"class":318},[3052],{"type":23,"value":2956},{"type":17,"tag":305,"props":3054,"children":3055},{"class":312},[3056],{"type":23,"value":364},{"type":17,"tag":305,"props":3058,"children":3059},{"class":318},[3060],{"type":23,"value":2965},{"type":17,"tag":305,"props":3062,"children":3063},{"class":307,"line":553},[3064],{"type":17,"tag":305,"props":3065,"children":3066},{},[3067],{"type":23,"value":340},{"type":17,"tag":305,"props":3069,"children":3070},{"class":307,"line":562},[3071,3076,3080,3084,3088,3092,3096,3100,3104,3108,3112,3116,3120,3124,3128,3132,3136,3140,3144],{"type":17,"tag":305,"props":3072,"children":3073},{"class":318},[3074],{"type":23,"value":3075},"ubx[num_states ",{"type":17,"tag":305,"props":3077,"children":3078},{"class":312},[3079],{"type":23,"value":619},{"type":17,"tag":305,"props":3081,"children":3082},{"class":318},[3083],{"type":23,"value":2454},{"type":17,"tag":305,"props":3085,"children":3086},{"class":312},[3087],{"type":23,"value":776},{"type":17,"tag":305,"props":3089,"children":3090},{"class":318},[3091],{"type":23,"value":369},{"type":17,"tag":305,"props":3093,"children":3094},{"class":372},[3095],{"type":23,"value":680},{"type":17,"tag":305,"props":3097,"children":3098},{"class":318},[3099],{"type":23,"value":2915},{"type":17,"tag":305,"props":3101,"children":3102},{"class":312},[3103],{"type":23,"value":619},{"type":17,"tag":305,"props":3105,"children":3106},{"class":318},[3107],{"type":23,"value":2454},{"type":17,"tag":305,"props":3109,"children":3110},{"class":312},[3111],{"type":23,"value":776},{"type":17,"tag":305,"props":3113,"children":3114},{"class":318},[3115],{"type":23,"value":369},{"type":17,"tag":305,"props":3117,"children":3118},{"class":372},[3119],{"type":23,"value":680},{"type":17,"tag":305,"props":3121,"children":3122},{"class":318},[3123],{"type":23,"value":799},{"type":17,"tag":305,"props":3125,"children":3126},{"class":312},[3127],{"type":23,"value":776},{"type":17,"tag":305,"props":3129,"children":3130},{"class":318},[3131],{"type":23,"value":2479},{"type":17,"tag":305,"props":3133,"children":3134},{"class":312},[3135],{"type":23,"value":619},{"type":17,"tag":305,"props":3137,"children":3138},{"class":318},[3139],{"type":23,"value":2956},{"type":17,"tag":305,"props":3141,"children":3142},{"class":312},[3143],{"type":23,"value":364},{"type":17,"tag":305,"props":3145,"children":3146},{"class":318},[3147],{"type":23,"value":3148}," u_max\n",{"type":17,"tag":305,"props":3150,"children":3151},{"class":307,"line":571},[3152,3156,3160,3164,3168,3172,3176,3180,3184,3188,3192,3196,3200,3204,3208,3212,3216,3220,3224,3228,3232,3236,3240],{"type":17,"tag":305,"props":3153,"children":3154},{"class":318},[3155],{"type":23,"value":3075},{"type":17,"tag":305,"props":3157,"children":3158},{"class":312},[3159],{"type":23,"value":619},{"type":17,"tag":305,"props":3161,"children":3162},{"class":318},[3163],{"type":23,"value":2454},{"type":17,"tag":305,"props":3165,"children":3166},{"class":312},[3167],{"type":23,"value":776},{"type":17,"tag":305,"props":3169,"children":3170},{"class":318},[3171],{"type":23,"value":369},{"type":17,"tag":305,"props":3173,"children":3174},{"class":372},[3175],{"type":23,"value":680},{"type":17,"tag":305,"props":3177,"children":3178},{"class":318},[3179],{"type":23,"value":799},{"type":17,"tag":305,"props":3181,"children":3182},{"class":312},[3183],{"type":23,"value":776},{"type":17,"tag":305,"props":3185,"children":3186},{"class":318},[3187],{"type":23,"value":369},{"type":17,"tag":305,"props":3189,"children":3190},{"class":372},[3191],{"type":23,"value":680},{"type":17,"tag":305,"props":3193,"children":3194},{"class":318},[3195],{"type":23,"value":2593},{"type":17,"tag":305,"props":3197,"children":3198},{"class":312},[3199],{"type":23,"value":619},{"type":17,"tag":305,"props":3201,"children":3202},{"class":318},[3203],{"type":23,"value":2454},{"type":17,"tag":305,"props":3205,"children":3206},{"class":312},[3207],{"type":23,"value":776},{"type":17,"tag":305,"props":3209,"children":3210},{"class":318},[3211],{"type":23,"value":369},{"type":17,"tag":305,"props":3213,"children":3214},{"class":372},[3215],{"type":23,"value":680},{"type":17,"tag":305,"props":3217,"children":3218},{"class":318},[3219],{"type":23,"value":799},{"type":17,"tag":305,"props":3221,"children":3222},{"class":312},[3223],{"type":23,"value":776},{"type":17,"tag":305,"props":3225,"children":3226},{"class":318},[3227],{"type":23,"value":2479},{"type":17,"tag":305,"props":3229,"children":3230},{"class":312},[3231],{"type":23,"value":619},{"type":17,"tag":305,"props":3233,"children":3234},{"class":318},[3235],{"type":23,"value":2956},{"type":17,"tag":305,"props":3237,"children":3238},{"class":312},[3239],{"type":23,"value":364},{"type":17,"tag":305,"props":3241,"children":3242},{"class":318},[3243],{"type":23,"value":3148},{"type":17,"tag":305,"props":3245,"children":3246},{"class":307,"line":598},[3247],{"type":17,"tag":305,"props":3248,"children":3249},{},[3250],{"type":23,"value":340},{"type":17,"tag":305,"props":3252,"children":3253},{"class":307,"line":637},[3254,3259,3263],{"type":17,"tag":305,"props":3255,"children":3256},{"class":318},[3257],{"type":23,"value":3258},"args ",{"type":17,"tag":305,"props":3260,"children":3261},{"class":312},[3262],{"type":23,"value":364},{"type":17,"tag":305,"props":3264,"children":3265},{"class":318},[3266],{"type":23,"value":3267}," {\n",{"type":17,"tag":305,"props":3269,"children":3270},{"class":307,"line":670},[3271,3275,3280,3285,3289,3293,3297,3301,3305,3309,3313,3318,3322],{"type":17,"tag":305,"props":3272,"children":3273},{"class":318},[3274],{"type":23,"value":1145},{"type":17,"tag":305,"props":3276,"children":3277},{"class":1727},[3278],{"type":23,"value":3279},"'lbg'",{"type":17,"tag":305,"props":3281,"children":3282},{"class":318},[3283],{"type":23,"value":3284},": ca.",{"type":17,"tag":305,"props":3286,"children":3287},{"class":372},[3288],{"type":23,"value":2440},{"type":17,"tag":305,"props":3290,"children":3291},{"class":318},[3292],{"type":23,"value":2445},{"type":17,"tag":305,"props":3294,"children":3295},{"class":312},[3296],{"type":23,"value":619},{"type":17,"tag":305,"props":3298,"children":3299},{"class":318},[3300],{"type":23,"value":2454},{"type":17,"tag":305,"props":3302,"children":3303},{"class":312},[3304],{"type":23,"value":776},{"type":17,"tag":305,"props":3306,"children":3307},{"class":318},[3308],{"type":23,"value":369},{"type":17,"tag":305,"props":3310,"children":3311},{"class":372},[3312],{"type":23,"value":680},{"type":17,"tag":305,"props":3314,"children":3315},{"class":318},[3316],{"type":23,"value":3317},"), ",{"type":17,"tag":305,"props":3319,"children":3320},{"class":372},[3321],{"type":23,"value":680},{"type":17,"tag":305,"props":3323,"children":3324},{"class":318},[3325],{"type":23,"value":3326},")),\n",{"type":17,"tag":305,"props":3328,"children":3329},{"class":307,"line":688},[3330,3334,3339,3343,3347,3351,3355,3359,3363,3367,3371,3375,3379],{"type":17,"tag":305,"props":3331,"children":3332},{"class":318},[3333],{"type":23,"value":1145},{"type":17,"tag":305,"props":3335,"children":3336},{"class":1727},[3337],{"type":23,"value":3338},"'ubg'",{"type":17,"tag":305,"props":3340,"children":3341},{"class":318},[3342],{"type":23,"value":3284},{"type":17,"tag":305,"props":3344,"children":3345},{"class":372},[3346],{"type":23,"value":2440},{"type":17,"tag":305,"props":3348,"children":3349},{"class":318},[3350],{"type":23,"value":2445},{"type":17,"tag":305,"props":3352,"children":3353},{"class":312},[3354],{"type":23,"value":619},{"type":17,"tag":305,"props":3356,"children":3357},{"class":318},[3358],{"type":23,"value":2454},{"type":17,"tag":305,"props":3360,"children":3361},{"class":312},[3362],{"type":23,"value":776},{"type":17,"tag":305,"props":3364,"children":3365},{"class":318},[3366],{"type":23,"value":369},{"type":17,"tag":305,"props":3368,"children":3369},{"class":372},[3370],{"type":23,"value":680},{"type":17,"tag":305,"props":3372,"children":3373},{"class":318},[3374],{"type":23,"value":3317},{"type":17,"tag":305,"props":3376,"children":3377},{"class":372},[3378],{"type":23,"value":680},{"type":17,"tag":305,"props":3380,"children":3381},{"class":318},[3382],{"type":23,"value":3326},{"type":17,"tag":305,"props":3384,"children":3385},{"class":307,"line":697},[3386,3390,3395],{"type":17,"tag":305,"props":3387,"children":3388},{"class":318},[3389],{"type":23,"value":1145},{"type":17,"tag":305,"props":3391,"children":3392},{"class":1727},[3393],{"type":23,"value":3394},"'lbx'",{"type":17,"tag":305,"props":3396,"children":3397},{"class":318},[3398],{"type":23,"value":3399},": lbx,\n",{"type":17,"tag":305,"props":3401,"children":3402},{"class":307,"line":705},[3403,3407,3412],{"type":17,"tag":305,"props":3404,"children":3405},{"class":318},[3406],{"type":23,"value":1145},{"type":17,"tag":305,"props":3408,"children":3409},{"class":1727},[3410],{"type":23,"value":3411},"'ubx'",{"type":17,"tag":305,"props":3413,"children":3414},{"class":318},[3415],{"type":23,"value":3416},": ubx\n",{"type":17,"tag":305,"props":3418,"children":3419},{"class":307,"line":738},[3420],{"type":17,"tag":305,"props":3421,"children":3422},{"class":318},[3423],{"type":23,"value":3424},"}",{"type":17,"tag":26,"props":3426,"children":3427},{},[3428],{"type":23,"value":3429},"Obtain the solution from the solver at eact iteration",{"type":17,"tag":290,"props":3431,"children":3434},{"className":3432,"code":3433,"language":295,"meta":7},[293],"sol = solver(\n            x0=args['x0'],\n            p=args['p'],\n            lbx=args['lbx'],\n            ubx=args['ubx'],\n            lbg=args['lbg'],\n            ubg=args['ubg'],\n        )\n\n        sol_x = ca.reshape(sol['x'][:num_states * (prediction_horizons + 1)], 3, prediction_horizons + 1)\n        sol_u = ca.reshape(sol['x'][num_states * (prediction_horizons + 1):], 2, prediction_horizons)\n",[3435],{"type":17,"tag":298,"props":3436,"children":3437},{},[3438],{"type":17,"tag":290,"props":3439,"children":3440},{"__ignoreMap":7},[3441,3458,3491,3519,3547,3575,3603,3631,3639,3646,3724],{"type":17,"tag":305,"props":3442,"children":3443},{"class":307,"line":308},[3444,3449,3453],{"type":17,"tag":305,"props":3445,"children":3446},{"class":318},[3447],{"type":23,"value":3448},"sol ",{"type":17,"tag":305,"props":3450,"children":3451},{"class":312},[3452],{"type":23,"value":364},{"type":17,"tag":305,"props":3454,"children":3455},{"class":318},[3456],{"type":23,"value":3457}," solver(\n",{"type":17,"tag":305,"props":3459,"children":3460},{"class":307,"line":334},[3461,3466,3472,3476,3481,3486],{"type":17,"tag":305,"props":3462,"children":3463},{"class":318},[3464],{"type":23,"value":3465},"            ",{"type":17,"tag":305,"props":3467,"children":3469},{"class":3468},"ct-657843",[3470],{"type":23,"value":3471},"x0",{"type":17,"tag":305,"props":3473,"children":3474},{"class":312},[3475],{"type":23,"value":364},{"type":17,"tag":305,"props":3477,"children":3478},{"class":318},[3479],{"type":23,"value":3480},"args[",{"type":17,"tag":305,"props":3482,"children":3483},{"class":1727},[3484],{"type":23,"value":3485},"'x0'",{"type":17,"tag":305,"props":3487,"children":3488},{"class":318},[3489],{"type":23,"value":3490},"],\n",{"type":17,"tag":305,"props":3492,"children":3493},{"class":307,"line":343},[3494,3498,3502,3506,3510,3515],{"type":17,"tag":305,"props":3495,"children":3496},{"class":318},[3497],{"type":23,"value":3465},{"type":17,"tag":305,"props":3499,"children":3500},{"class":3468},[3501],{"type":23,"value":26},{"type":17,"tag":305,"props":3503,"children":3504},{"class":312},[3505],{"type":23,"value":364},{"type":17,"tag":305,"props":3507,"children":3508},{"class":318},[3509],{"type":23,"value":3480},{"type":17,"tag":305,"props":3511,"children":3512},{"class":1727},[3513],{"type":23,"value":3514},"'p'",{"type":17,"tag":305,"props":3516,"children":3517},{"class":318},[3518],{"type":23,"value":3490},{"type":17,"tag":305,"props":3520,"children":3521},{"class":307,"line":353},[3522,3526,3531,3535,3539,3543],{"type":17,"tag":305,"props":3523,"children":3524},{"class":318},[3525],{"type":23,"value":3465},{"type":17,"tag":305,"props":3527,"children":3528},{"class":3468},[3529],{"type":23,"value":3530},"lbx",{"type":17,"tag":305,"props":3532,"children":3533},{"class":312},[3534],{"type":23,"value":364},{"type":17,"tag":305,"props":3536,"children":3537},{"class":318},[3538],{"type":23,"value":3480},{"type":17,"tag":305,"props":3540,"children":3541},{"class":1727},[3542],{"type":23,"value":3394},{"type":17,"tag":305,"props":3544,"children":3545},{"class":318},[3546],{"type":23,"value":3490},{"type":17,"tag":305,"props":3548,"children":3549},{"class":307,"line":378},[3550,3554,3559,3563,3567,3571],{"type":17,"tag":305,"props":3551,"children":3552},{"class":318},[3553],{"type":23,"value":3465},{"type":17,"tag":305,"props":3555,"children":3556},{"class":3468},[3557],{"type":23,"value":3558},"ubx",{"type":17,"tag":305,"props":3560,"children":3561},{"class":312},[3562],{"type":23,"value":364},{"type":17,"tag":305,"props":3564,"children":3565},{"class":318},[3566],{"type":23,"value":3480},{"type":17,"tag":305,"props":3568,"children":3569},{"class":1727},[3570],{"type":23,"value":3411},{"type":17,"tag":305,"props":3572,"children":3573},{"class":318},[3574],{"type":23,"value":3490},{"type":17,"tag":305,"props":3576,"children":3577},{"class":307,"line":387},[3578,3582,3587,3591,3595,3599],{"type":17,"tag":305,"props":3579,"children":3580},{"class":318},[3581],{"type":23,"value":3465},{"type":17,"tag":305,"props":3583,"children":3584},{"class":3468},[3585],{"type":23,"value":3586},"lbg",{"type":17,"tag":305,"props":3588,"children":3589},{"class":312},[3590],{"type":23,"value":364},{"type":17,"tag":305,"props":3592,"children":3593},{"class":318},[3594],{"type":23,"value":3480},{"type":17,"tag":305,"props":3596,"children":3597},{"class":1727},[3598],{"type":23,"value":3279},{"type":17,"tag":305,"props":3600,"children":3601},{"class":318},[3602],{"type":23,"value":3490},{"type":17,"tag":305,"props":3604,"children":3605},{"class":307,"line":409},[3606,3610,3615,3619,3623,3627],{"type":17,"tag":305,"props":3607,"children":3608},{"class":318},[3609],{"type":23,"value":3465},{"type":17,"tag":305,"props":3611,"children":3612},{"class":3468},[3613],{"type":23,"value":3614},"ubg",{"type":17,"tag":305,"props":3616,"children":3617},{"class":312},[3618],{"type":23,"value":364},{"type":17,"tag":305,"props":3620,"children":3621},{"class":318},[3622],{"type":23,"value":3480},{"type":17,"tag":305,"props":3624,"children":3625},{"class":1727},[3626],{"type":23,"value":3338},{"type":17,"tag":305,"props":3628,"children":3629},{"class":318},[3630],{"type":23,"value":3490},{"type":17,"tag":305,"props":3632,"children":3633},{"class":307,"line":418},[3634],{"type":17,"tag":305,"props":3635,"children":3636},{"class":318},[3637],{"type":23,"value":3638},"        )\n",{"type":17,"tag":305,"props":3640,"children":3641},{"class":307,"line":440},[3642],{"type":17,"tag":305,"props":3643,"children":3644},{},[3645],{"type":23,"value":340},{"type":17,"tag":305,"props":3647,"children":3648},{"class":307,"line":461},[3649,3654,3658,3663,3668,3673,3677,3681,3685,3689,3693,3698,3703,3708,3712,3716,3720],{"type":17,"tag":305,"props":3650,"children":3651},{"class":318},[3652],{"type":23,"value":3653},"        sol_x ",{"type":17,"tag":305,"props":3655,"children":3656},{"class":312},[3657],{"type":23,"value":364},{"type":17,"tag":305,"props":3659,"children":3660},{"class":318},[3661],{"type":23,"value":3662}," ca.reshape(sol[",{"type":17,"tag":305,"props":3664,"children":3665},{"class":1727},[3666],{"type":23,"value":3667},"'x'",{"type":17,"tag":305,"props":3669,"children":3670},{"class":318},[3671],{"type":23,"value":3672},"][:num_states ",{"type":17,"tag":305,"props":3674,"children":3675},{"class":312},[3676],{"type":23,"value":619},{"type":17,"tag":305,"props":3678,"children":3679},{"class":318},[3680],{"type":23,"value":2454},{"type":17,"tag":305,"props":3682,"children":3683},{"class":312},[3684],{"type":23,"value":776},{"type":17,"tag":305,"props":3686,"children":3687},{"class":318},[3688],{"type":23,"value":369},{"type":17,"tag":305,"props":3690,"children":3691},{"class":372},[3692],{"type":23,"value":680},{"type":17,"tag":305,"props":3694,"children":3695},{"class":318},[3696],{"type":23,"value":3697},")], ",{"type":17,"tag":305,"props":3699,"children":3700},{"class":372},[3701],{"type":23,"value":3702},"3",{"type":17,"tag":305,"props":3704,"children":3705},{"class":318},[3706],{"type":23,"value":3707},", prediction_horizons ",{"type":17,"tag":305,"props":3709,"children":3710},{"class":312},[3711],{"type":23,"value":776},{"type":17,"tag":305,"props":3713,"children":3714},{"class":318},[3715],{"type":23,"value":369},{"type":17,"tag":305,"props":3717,"children":3718},{"class":372},[3719],{"type":23,"value":680},{"type":17,"tag":305,"props":3721,"children":3722},{"class":318},[3723],{"type":23,"value":1735},{"type":17,"tag":305,"props":3725,"children":3726},{"class":307,"line":482},[3727,3732,3736,3740,3744,3749,3753,3757,3761,3765,3769,3774,3778],{"type":17,"tag":305,"props":3728,"children":3729},{"class":318},[3730],{"type":23,"value":3731},"        sol_u ",{"type":17,"tag":305,"props":3733,"children":3734},{"class":312},[3735],{"type":23,"value":364},{"type":17,"tag":305,"props":3737,"children":3738},{"class":318},[3739],{"type":23,"value":3662},{"type":17,"tag":305,"props":3741,"children":3742},{"class":1727},[3743],{"type":23,"value":3667},{"type":17,"tag":305,"props":3745,"children":3746},{"class":318},[3747],{"type":23,"value":3748},"][num_states ",{"type":17,"tag":305,"props":3750,"children":3751},{"class":312},[3752],{"type":23,"value":619},{"type":17,"tag":305,"props":3754,"children":3755},{"class":318},[3756],{"type":23,"value":2454},{"type":17,"tag":305,"props":3758,"children":3759},{"class":312},[3760],{"type":23,"value":776},{"type":17,"tag":305,"props":3762,"children":3763},{"class":318},[3764],{"type":23,"value":369},{"type":17,"tag":305,"props":3766,"children":3767},{"class":372},[3768],{"type":23,"value":680},{"type":17,"tag":305,"props":3770,"children":3771},{"class":318},[3772],{"type":23,"value":3773},"):], ",{"type":17,"tag":305,"props":3775,"children":3776},{"class":372},[3777],{"type":23,"value":629},{"type":17,"tag":305,"props":3779,"children":3780},{"class":318},[3781],{"type":23,"value":3782},", prediction_horizons)",{"type":17,"tag":18,"props":3784,"children":3786},{"id":3785},"result",[3787],{"type":23,"value":3788},"Result",{"type":17,"tag":3790,"props":3791,"children":3796},"figure",{"className":3792},[3793,3794,3795],"mb-4","inline-block","max-w-sm",[3797,3799],{"type":23,"value":3798},"\n  ",{"type":17,"tag":42,"props":3800,"children":3803},{"className":3801,"src":3802,"width":46,"height":47},[45],"/topics/robotics/nmpc/diff_mpc.png",[],{"type":17,"tag":55,"props":3805,"children":3807},{"className":3806},[58,59,60,61],[3808],{"type":23,"value":3809},"\n    Plot of differential drive robot follow the circle trajectory !!!.\n",{"type":17,"tag":18,"props":3811,"children":3813},{"id":3812},"in-conclusion",[3814],{"type":23,"value":3815},"In conclusion",{"type":17,"tag":26,"props":3817,"children":3818},{},[3819],{"type":23,"value":3820},"In my opinion, I think MPC is suitable for the control system, since it can provide the significant control input that was predicted over the finite future of time. This can ensure the safety of the system and also can provide a quick look or reaction to the control action of the system too. Next post, I will explain about Nonlinear Model Predictive Control by using Casadi framework for mathematical optimization.",{"type":17,"tag":18,"props":3822,"children":3824},{"id":3823},"reference",[3825],{"type":23,"value":3826},"Reference",{"type":17,"tag":3828,"props":3829,"children":3830},"ol",{},[3831,3842],{"type":17,"tag":135,"props":3832,"children":3833},{},[3834,3836],{"type":23,"value":3835},"MPC-and-MHE-implementation-in-MATLAB-using-Casadi: ",{"type":17,"tag":85,"props":3837,"children":3840},{"href":3838,"rel":3839},"https://github.com/MMehrez/MPC-and-MHE-implementation-in-MATLAB-using-Casadi",[89],[3841],{"type":23,"value":3838},{"type":17,"tag":135,"props":3843,"children":3844},{},[3845,3847],{"type":23,"value":3846},"CasAdi: ",{"type":17,"tag":85,"props":3848,"children":3851},{"href":3849,"rel":3850},"https://web.casadi.org",[89],[3852],{"type":23,"value":3849},{"type":17,"tag":3854,"children":3855},"style",[3856],{"type":23,"value":3857},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-326375{color:#6A737D;}\n.ct-533739{color:#79B8FF;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":7,"searchDepth":334,"depth":334,"links":3859},[3860,3861,3862,3863,3864,3865,3866,3867,3868],{"id":20,"depth":334,"text":24},{"id":67,"depth":334,"text":70},{"id":237,"depth":334,"text":240},{"id":1535,"depth":334,"text":1538},{"id":1578,"depth":334,"text":1581},{"id":1618,"depth":334,"text":1621},{"id":3785,"depth":334,"text":3788},{"id":3812,"depth":334,"text":3815},{"id":3823,"depth":334,"text":3826},"markdown","content:topics:robotics:nonlinear-mpc.md","content","topics/robotics/nonlinear-mpc.md","md",1694081775223]