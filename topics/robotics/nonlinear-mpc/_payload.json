[{"data":1,"prerenderedAt":3858},["Reactive",2],{"content-/topics/robotics/nonlinear-mpc":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"_empty":6,"title":8,"description":9,"author":10,"slug":11,"tag":11,"img":12,"body":13,"_type":3853,"_id":3854,"_source":3855,"_file":3856,"_extension":3857},"/topics/robotics/nonlinear-mpc","robotics",false,"","Nonlinear Model Predictive Control","Introduction to Nonlinear Model Predictive Control","Din Sokheng","nonlinear-mpc","/topics/robotics/nmpc/predict_horizon.png",{"type":14,"children":15,"toc":3842},"root",[16,25,31,54,65,71,85,90,96,101,106,111,153,158,164,169,216,222,235,239,244,249,253,258,262,266,271,1515,1521,1526,1530,1545,1549,1554,1558,1564,1569,1573,1586,1590,1594,1598,1604,1617,1649,1654,2187,2192,2370,2381,2386,2391,3407,3412,3765,3771,3786,3792,3798,3803,3809,3837],{"type":17,"tag":18,"props":19,"children":21},"element","h2",{"id":20},"what-is-model-predictive-control",[22],{"type":23,"value":24},"text","What is Model Predictive Control ?",{"type":17,"tag":26,"props":27,"children":28},"p",{},[29],{"type":23,"value":30},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":17,"tag":32,"props":33,"children":40},"div",{"className":34},[35,36,37,38,39],"grid","grid-cols-2","space-x-10","justify-center","items-center",[41,49],{"type":17,"tag":42,"props":43,"children":48},"img",{"className":44,"src":12,"width":46,"height":47},[45],"mx-auto","600px","300px",[],{"type":17,"tag":42,"props":50,"children":53},{"className":51,"src":52,"width":46,"height":47},[45],"/topics/robotics/nmpc/set_points.png",[],{"type":17,"tag":55,"props":56,"children":62},"figcaption",{"className":57},[58,59,60,61],"text-center","text-sm","text-neutral-600","dark:text-neutral-400",[63],{"type":23,"value":64},"\n      A car with finite horizons prediction and set point prediction over finite horizons.\n",{"type":17,"tag":18,"props":66,"children":68},{"id":67},"nonlinear-model-predictive-control",[69],{"type":23,"value":70},"Nonlinear Model Predictive Control ?",{"type":17,"tag":26,"props":72,"children":73},{},[74,76,80,82],{"type":23,"value":75},"Nonlinear Model Predictive Control has the same basic core of its control algorithms. The different is about the mathematical solving over the system. ",{"type":17,"tag":77,"props":78,"children":79},"br",{},[],{"type":23,"value":81},"\nIn the real-life application, most of the system certainly nonlinear and it's more complex than linear model. Linear systems are mostly time-invariant, meaning that the response of the system input is time-independent. Nonlinear systems are time-varying meaning that the response of the system to any input is time-dependent.",{"type":17,"tag":77,"props":83,"children":84},{},[],{"type":17,"tag":26,"props":86,"children":87},{},[88],{"type":23,"value":89},"The system model can be represent as state-space model",{"type":17,"tag":91,"props":92,"children":95},"math-render",{"latex-express":93,"styles":58,"dist-cond":94}," \\dot{X} = f(X,U) ","true",[],{"type":17,"tag":26,"props":97,"children":98},{},[99],{"type":23,"value":100},"Nonlinear Model Predictive Control also works by solving the quardratic cost subject to the nonlinear function over a future finite horizons. The quadractic cost can be define as",{"type":17,"tag":91,"props":102,"children":105},{"latex-express":103,"styles":58,"dist-cond":104},"J(x,u) = \\displaystyle\\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})","false",[],{"type":17,"tag":26,"props":107,"children":108},{},[109],{"type":23,"value":110},"Notation",{"type":17,"tag":112,"props":113,"children":114},"ul",{},[115,126,135,144],{"type":17,"tag":116,"props":117,"children":118},"li",{},[119,124],{"type":17,"tag":91,"props":120,"children":123},{"latex-express":121,"styles":122,"dist-cond":104},"X","inline-flex",[],{"type":23,"value":125}," is the state of the system. This shall be obtained from the optimiztion problem.",{"type":17,"tag":116,"props":127,"children":128},{},[129,133],{"type":17,"tag":91,"props":130,"children":132},{"latex-express":131,"styles":122,"dist-cond":104},"X_{ref}",[],{"type":23,"value":134}," is the reference state of the system or desired input state.",{"type":17,"tag":116,"props":136,"children":137},{},[138,142],{"type":17,"tag":91,"props":139,"children":141},{"latex-express":140,"styles":122,"dist-cond":104},"U",[],{"type":23,"value":143}," is the input control of the system. This is a solution obtained from the optimization problem.",{"type":17,"tag":116,"props":145,"children":146},{},[147,151],{"type":17,"tag":91,"props":148,"children":150},{"latex-express":149,"styles":122,"dist-cond":104},"U_{ref}",[],{"type":23,"value":152}," is the reference control of the system or desired input control.",{"type":17,"tag":26,"props":154,"children":155},{},[156],{"type":23,"value":157},"Rewrite the optimization of NMPC problem.",{"type":17,"tag":159,"props":160,"children":163},"math-render-b",{"latex-express":161,"styles":162,"dist-cond":94},"\n      \\begin{align*}\n            \\min_{u_{0}, u_{1}, ..., u_{N-1} } \\quad \\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}&Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})\\\\\n            \\text{subject to} \\quad & x_{k+1} = f(x_k, u_k) \\quad \\text{(System dynamics)} \\\\\n            & g(x_k, x_k) \\leq 0 \\quad \\text{(State constraints)} \\\\\n            & h(x_k, x_k) \\leq 0 \\quad \\text{(Input constraints)} \\\\\n            & p(x_k) \\leq 0 \\quad \\text{(Path constraints)} \\\\\n            & x_0=x(0)  \\quad \\text{(Initial condition)}\n      \\end{align*}\n            ","text-center -sm:mx-auto -md:mx-auto -sm:max-w-sm -md:max-w-md",[],{"type":17,"tag":26,"props":165,"children":166},{},[167],{"type":23,"value":168},"Which,",{"type":17,"tag":112,"props":170,"children":171},{},[172,181,190,199,207],{"type":17,"tag":116,"props":173,"children":174},{},[175,179],{"type":17,"tag":91,"props":176,"children":178},{"latex-express":177,"styles":122,"dist-cond":104},"f",[],{"type":23,"value":180}," is the system dynamics model.",{"type":17,"tag":116,"props":182,"children":183},{},[184,188],{"type":17,"tag":91,"props":185,"children":187},{"latex-express":186,"styles":122,"dist-cond":104},"g",[],{"type":23,"value":189}," is the state constraints of the system.",{"type":17,"tag":116,"props":191,"children":192},{},[193,197],{"type":17,"tag":91,"props":194,"children":196},{"latex-express":195,"styles":122,"dist-cond":104},"h",[],{"type":23,"value":198}," is the input constraints of the system.",{"type":17,"tag":116,"props":200,"children":201},{},[202,205],{"type":17,"tag":91,"props":203,"children":204},{"latex-express":26,"styles":122,"dist-cond":104},[],{"type":23,"value":206}," is the path constraint, it help to ensure the safety following path of our system.",{"type":17,"tag":116,"props":208,"children":209},{},[210,214],{"type":17,"tag":91,"props":211,"children":213},{"latex-express":212,"styles":122,"dist-cond":104},"\\phi(X_{N})",[],{"type":23,"value":215}," is the terminal cost of the system.",{"type":17,"tag":18,"props":217,"children":219},{"id":218},"discretize-the-system-model-with-runge-kutta-4th-order",[220],{"type":23,"value":221},"Discretize the system model with Runge-Kutta 4th order",{"type":17,"tag":26,"props":223,"children":224},{},[225,227,233],{"type":23,"value":226},"I will choose a simple system mode robot ",{"type":17,"tag":228,"props":229,"children":230},"strong",{},[231],{"type":23,"value":232}," DifferentialDrive ",{"type":23,"value":234},".\nThe forward kinematic equation",{"type":17,"tag":91,"props":236,"children":238},{"latex-express":237,"styles":58},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":17,"tag":26,"props":240,"children":241},{},[242],{"type":23,"value":243},"State constraints are the restriction imposed on the state variable of the system. It helps our optimizer not to obtain the solution that is outside the boundary region and also ensure the system to always perform the minimal action control in any critical condition.",{"type":17,"tag":26,"props":245,"children":246},{},[247],{"type":23,"value":248},"We, then can do the approximation",{"type":17,"tag":159,"props":250,"children":252},{"latex-express":251,"styles":58,"dist-cond":94},"\n    \\begin{align*}\n        k_{1} &= f(x^{*}, u^{*}) \\\\\n        k_{2} &= f(x^{*}+k_{1}\\frac{dt}{2}, u^{*}) \\\\ \n        k_{3} &= f(x^{*}+k_{2}\\frac{dt}{2}, u^{*}) \\\\\n        k_{4} &= f(x^{*}+k_{3}dt, u^{*}) \\\\ \n        \\Rightarrow{x_{k+1} } &= x_{k} + (k_{1}+2k_{2}+2k_{3}+k_{4})\\frac{dt}{6}\n    \\end{align*}\n",[],{"type":17,"tag":26,"props":254,"children":255},{},[256],{"type":23,"value":257},"Let's evaluate it with our model.",{"type":17,"tag":159,"props":259,"children":261},{"latex-express":260,"styles":58},"\n      \\begin{align*}\n        k_{1} &= \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n        k_{2} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{3} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{4} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n    \\end{align*}\n      ",[],{"type":17,"tag":159,"props":263,"children":265},{"latex-express":264,"styles":58},"\n      \\Rightarrow{x_{k+1} } = x_{k} + \\left( \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} + \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix}   \\right) \\frac{dt}{6}\n",[],{"type":17,"tag":26,"props":267,"children":268},{},[269],{"type":23,"value":270},"How to implement it in Python ???",{"type":17,"tag":272,"props":273,"children":278},"code",{"className":274,"code":276,"language":277,"meta":7},[275],"language-python","import numpy as np\n\n## Define sampling time dt 100Hz\ndt = 0.01\n## Define the num steps for function approximation \nnum_steps = 100\n## Define initial states\nx = 0.0\ny = 0.0\nyaw = 0.0\n## Define input control\nv = 1.5 #m/s\nomega = 1.57 #rad/s\n## Define state represent model\n### define lambda function take variable x\nf = lambda x, u :  np.array([\n      [u[0]*np.cos(x[2])],\n      [u[0]*np.sin(x[2])],\n      [u[1]]\n])\n\nfor _ in range(num_steps):\n    k1 = f([x, y, yaw], [v, omega])\n    k2 = f([x + (dt / 2) * k1[0], y + (dt / 2) * k1[1], yaw + (dt / 2) * k1[2]], [v, omega])\n    k3 = f([x + (dt / 2) * k2[0], y + (dt / 2) * k2[1], yaw + (dt / 2) * k2[2]], [v, omega])\n    k4 = f([x + dt * k3[0], y + dt * k3[1], yaw + dt * k3[2]], [v, omega])\n\n    # Update state of the robot\n    x += (k1[0] + 2 * k2[0] + 2 * k3[0] + k4[0]) * dt / 6\n    y += (k1[1] + 2 * k2[1] + 2 * k3[1] + k4[1]) * dt / 6\n    yaw += (k1[2] + 2 * k2[2] + 2 * k3[2] + k4[2]) * dt / 6\n","python",[279],{"type":17,"tag":280,"props":281,"children":282},"pre",{},[283],{"type":17,"tag":272,"props":284,"children":285},{"__ignoreMap":7},[286,314,323,333,358,367,389,398,420,441,462,471,502,533,542,551,578,617,650,668,677,685,718,736,882,1020,1111,1119,1133,1264,1389],{"type":17,"tag":287,"props":288,"children":291},"span",{"class":289,"line":290},"line",1,[292,298,304,309],{"type":17,"tag":287,"props":293,"children":295},{"class":294},"ct-857441",[296],{"type":23,"value":297},"import",{"type":17,"tag":287,"props":299,"children":301},{"class":300},"ct-767297",[302],{"type":23,"value":303}," numpy ",{"type":17,"tag":287,"props":305,"children":306},{"class":294},[307],{"type":23,"value":308},"as",{"type":17,"tag":287,"props":310,"children":311},{"class":300},[312],{"type":23,"value":313}," np\n",{"type":17,"tag":287,"props":315,"children":317},{"class":289,"line":316},2,[318],{"type":17,"tag":287,"props":319,"children":320},{},[321],{"type":23,"value":322},"\n",{"type":17,"tag":287,"props":324,"children":326},{"class":289,"line":325},3,[327],{"type":17,"tag":287,"props":328,"children":330},{"class":329},"ct-326375",[331],{"type":23,"value":332},"## Define sampling time dt 100Hz\n",{"type":17,"tag":287,"props":334,"children":336},{"class":289,"line":335},4,[337,342,347,352],{"type":17,"tag":287,"props":338,"children":339},{"class":300},[340],{"type":23,"value":341},"dt ",{"type":17,"tag":287,"props":343,"children":344},{"class":294},[345],{"type":23,"value":346},"=",{"type":17,"tag":287,"props":348,"children":349},{"class":300},[350],{"type":23,"value":351}," ",{"type":17,"tag":287,"props":353,"children":355},{"class":354},"ct-533739",[356],{"type":23,"value":357},"0.01\n",{"type":17,"tag":287,"props":359,"children":361},{"class":289,"line":360},5,[362],{"type":17,"tag":287,"props":363,"children":364},{"class":329},[365],{"type":23,"value":366},"## Define the num steps for function approximation \n",{"type":17,"tag":287,"props":368,"children":370},{"class":289,"line":369},6,[371,376,380,384],{"type":17,"tag":287,"props":372,"children":373},{"class":300},[374],{"type":23,"value":375},"num_steps ",{"type":17,"tag":287,"props":377,"children":378},{"class":294},[379],{"type":23,"value":346},{"type":17,"tag":287,"props":381,"children":382},{"class":300},[383],{"type":23,"value":351},{"type":17,"tag":287,"props":385,"children":386},{"class":354},[387],{"type":23,"value":388},"100\n",{"type":17,"tag":287,"props":390,"children":392},{"class":289,"line":391},7,[393],{"type":17,"tag":287,"props":394,"children":395},{"class":329},[396],{"type":23,"value":397},"## Define initial states\n",{"type":17,"tag":287,"props":399,"children":401},{"class":289,"line":400},8,[402,407,411,415],{"type":17,"tag":287,"props":403,"children":404},{"class":300},[405],{"type":23,"value":406},"x ",{"type":17,"tag":287,"props":408,"children":409},{"class":294},[410],{"type":23,"value":346},{"type":17,"tag":287,"props":412,"children":413},{"class":300},[414],{"type":23,"value":351},{"type":17,"tag":287,"props":416,"children":417},{"class":354},[418],{"type":23,"value":419},"0.0\n",{"type":17,"tag":287,"props":421,"children":423},{"class":289,"line":422},9,[424,429,433,437],{"type":17,"tag":287,"props":425,"children":426},{"class":300},[427],{"type":23,"value":428},"y ",{"type":17,"tag":287,"props":430,"children":431},{"class":294},[432],{"type":23,"value":346},{"type":17,"tag":287,"props":434,"children":435},{"class":300},[436],{"type":23,"value":351},{"type":17,"tag":287,"props":438,"children":439},{"class":354},[440],{"type":23,"value":419},{"type":17,"tag":287,"props":442,"children":444},{"class":289,"line":443},10,[445,450,454,458],{"type":17,"tag":287,"props":446,"children":447},{"class":300},[448],{"type":23,"value":449},"yaw ",{"type":17,"tag":287,"props":451,"children":452},{"class":294},[453],{"type":23,"value":346},{"type":17,"tag":287,"props":455,"children":456},{"class":300},[457],{"type":23,"value":351},{"type":17,"tag":287,"props":459,"children":460},{"class":354},[461],{"type":23,"value":419},{"type":17,"tag":287,"props":463,"children":465},{"class":289,"line":464},11,[466],{"type":17,"tag":287,"props":467,"children":468},{"class":329},[469],{"type":23,"value":470},"## Define input control\n",{"type":17,"tag":287,"props":472,"children":474},{"class":289,"line":473},12,[475,480,484,488,493,497],{"type":17,"tag":287,"props":476,"children":477},{"class":300},[478],{"type":23,"value":479},"v ",{"type":17,"tag":287,"props":481,"children":482},{"class":294},[483],{"type":23,"value":346},{"type":17,"tag":287,"props":485,"children":486},{"class":300},[487],{"type":23,"value":351},{"type":17,"tag":287,"props":489,"children":490},{"class":354},[491],{"type":23,"value":492},"1.5",{"type":17,"tag":287,"props":494,"children":495},{"class":300},[496],{"type":23,"value":351},{"type":17,"tag":287,"props":498,"children":499},{"class":329},[500],{"type":23,"value":501},"#m/s\n",{"type":17,"tag":287,"props":503,"children":505},{"class":289,"line":504},13,[506,511,515,519,524,528],{"type":17,"tag":287,"props":507,"children":508},{"class":300},[509],{"type":23,"value":510},"omega ",{"type":17,"tag":287,"props":512,"children":513},{"class":294},[514],{"type":23,"value":346},{"type":17,"tag":287,"props":516,"children":517},{"class":300},[518],{"type":23,"value":351},{"type":17,"tag":287,"props":520,"children":521},{"class":354},[522],{"type":23,"value":523},"1.57",{"type":17,"tag":287,"props":525,"children":526},{"class":300},[527],{"type":23,"value":351},{"type":17,"tag":287,"props":529,"children":530},{"class":329},[531],{"type":23,"value":532},"#rad/s\n",{"type":17,"tag":287,"props":534,"children":536},{"class":289,"line":535},14,[537],{"type":17,"tag":287,"props":538,"children":539},{"class":329},[540],{"type":23,"value":541},"## Define state represent model\n",{"type":17,"tag":287,"props":543,"children":545},{"class":289,"line":544},15,[546],{"type":17,"tag":287,"props":547,"children":548},{"class":329},[549],{"type":23,"value":550},"### define lambda function take variable x\n",{"type":17,"tag":287,"props":552,"children":554},{"class":289,"line":553},16,[555,560,564,568,573],{"type":17,"tag":287,"props":556,"children":557},{"class":300},[558],{"type":23,"value":559},"f ",{"type":17,"tag":287,"props":561,"children":562},{"class":294},[563],{"type":23,"value":346},{"type":17,"tag":287,"props":565,"children":566},{"class":300},[567],{"type":23,"value":351},{"type":17,"tag":287,"props":569,"children":570},{"class":294},[571],{"type":23,"value":572},"lambda",{"type":17,"tag":287,"props":574,"children":575},{"class":300},[576],{"type":23,"value":577}," x, u :  np.array([\n",{"type":17,"tag":287,"props":579,"children":581},{"class":289,"line":580},17,[582,587,592,597,602,607,612],{"type":17,"tag":287,"props":583,"children":584},{"class":300},[585],{"type":23,"value":586},"      [u[",{"type":17,"tag":287,"props":588,"children":589},{"class":354},[590],{"type":23,"value":591},"0",{"type":17,"tag":287,"props":593,"children":594},{"class":300},[595],{"type":23,"value":596},"]",{"type":17,"tag":287,"props":598,"children":599},{"class":294},[600],{"type":23,"value":601},"*",{"type":17,"tag":287,"props":603,"children":604},{"class":300},[605],{"type":23,"value":606},"np.cos(x[",{"type":17,"tag":287,"props":608,"children":609},{"class":354},[610],{"type":23,"value":611},"2",{"type":17,"tag":287,"props":613,"children":614},{"class":300},[615],{"type":23,"value":616},"])],\n",{"type":17,"tag":287,"props":618,"children":620},{"class":289,"line":619},18,[621,625,629,633,637,642,646],{"type":17,"tag":287,"props":622,"children":623},{"class":300},[624],{"type":23,"value":586},{"type":17,"tag":287,"props":626,"children":627},{"class":354},[628],{"type":23,"value":591},{"type":17,"tag":287,"props":630,"children":631},{"class":300},[632],{"type":23,"value":596},{"type":17,"tag":287,"props":634,"children":635},{"class":294},[636],{"type":23,"value":601},{"type":17,"tag":287,"props":638,"children":639},{"class":300},[640],{"type":23,"value":641},"np.sin(x[",{"type":17,"tag":287,"props":643,"children":644},{"class":354},[645],{"type":23,"value":611},{"type":17,"tag":287,"props":647,"children":648},{"class":300},[649],{"type":23,"value":616},{"type":17,"tag":287,"props":651,"children":653},{"class":289,"line":652},19,[654,658,663],{"type":17,"tag":287,"props":655,"children":656},{"class":300},[657],{"type":23,"value":586},{"type":17,"tag":287,"props":659,"children":660},{"class":354},[661],{"type":23,"value":662},"1",{"type":17,"tag":287,"props":664,"children":665},{"class":300},[666],{"type":23,"value":667},"]]\n",{"type":17,"tag":287,"props":669,"children":671},{"class":289,"line":670},20,[672],{"type":17,"tag":287,"props":673,"children":674},{"class":300},[675],{"type":23,"value":676},"])\n",{"type":17,"tag":287,"props":678,"children":680},{"class":289,"line":679},21,[681],{"type":17,"tag":287,"props":682,"children":683},{},[684],{"type":23,"value":322},{"type":17,"tag":287,"props":686,"children":688},{"class":289,"line":687},22,[689,694,699,704,708,713],{"type":17,"tag":287,"props":690,"children":691},{"class":294},[692],{"type":23,"value":693},"for",{"type":17,"tag":287,"props":695,"children":696},{"class":300},[697],{"type":23,"value":698}," _ ",{"type":17,"tag":287,"props":700,"children":701},{"class":294},[702],{"type":23,"value":703},"in",{"type":17,"tag":287,"props":705,"children":706},{"class":300},[707],{"type":23,"value":351},{"type":17,"tag":287,"props":709,"children":710},{"class":354},[711],{"type":23,"value":712},"range",{"type":17,"tag":287,"props":714,"children":715},{"class":300},[716],{"type":23,"value":717},"(num_steps):\n",{"type":17,"tag":287,"props":719,"children":721},{"class":289,"line":720},23,[722,727,731],{"type":17,"tag":287,"props":723,"children":724},{"class":300},[725],{"type":23,"value":726},"    k1 ",{"type":17,"tag":287,"props":728,"children":729},{"class":294},[730],{"type":23,"value":346},{"type":17,"tag":287,"props":732,"children":733},{"class":300},[734],{"type":23,"value":735}," f([x, y, yaw], [v, omega])\n",{"type":17,"tag":287,"props":737,"children":739},{"class":289,"line":738},24,[740,745,749,754,759,764,769,773,777,782,786,791,795,800,804,808,812,816,820,824,828,832,836,841,845,849,853,857,861,865,869,873,877],{"type":17,"tag":287,"props":741,"children":742},{"class":300},[743],{"type":23,"value":744},"    k2 ",{"type":17,"tag":287,"props":746,"children":747},{"class":294},[748],{"type":23,"value":346},{"type":17,"tag":287,"props":750,"children":751},{"class":300},[752],{"type":23,"value":753}," f([x ",{"type":17,"tag":287,"props":755,"children":756},{"class":294},[757],{"type":23,"value":758},"+",{"type":17,"tag":287,"props":760,"children":761},{"class":300},[762],{"type":23,"value":763}," (dt ",{"type":17,"tag":287,"props":765,"children":766},{"class":294},[767],{"type":23,"value":768},"/",{"type":17,"tag":287,"props":770,"children":771},{"class":300},[772],{"type":23,"value":351},{"type":17,"tag":287,"props":774,"children":775},{"class":354},[776],{"type":23,"value":611},{"type":17,"tag":287,"props":778,"children":779},{"class":300},[780],{"type":23,"value":781},") ",{"type":17,"tag":287,"props":783,"children":784},{"class":294},[785],{"type":23,"value":601},{"type":17,"tag":287,"props":787,"children":788},{"class":300},[789],{"type":23,"value":790}," k1[",{"type":17,"tag":287,"props":792,"children":793},{"class":354},[794],{"type":23,"value":591},{"type":17,"tag":287,"props":796,"children":797},{"class":300},[798],{"type":23,"value":799},"], y ",{"type":17,"tag":287,"props":801,"children":802},{"class":294},[803],{"type":23,"value":758},{"type":17,"tag":287,"props":805,"children":806},{"class":300},[807],{"type":23,"value":763},{"type":17,"tag":287,"props":809,"children":810},{"class":294},[811],{"type":23,"value":768},{"type":17,"tag":287,"props":813,"children":814},{"class":300},[815],{"type":23,"value":351},{"type":17,"tag":287,"props":817,"children":818},{"class":354},[819],{"type":23,"value":611},{"type":17,"tag":287,"props":821,"children":822},{"class":300},[823],{"type":23,"value":781},{"type":17,"tag":287,"props":825,"children":826},{"class":294},[827],{"type":23,"value":601},{"type":17,"tag":287,"props":829,"children":830},{"class":300},[831],{"type":23,"value":790},{"type":17,"tag":287,"props":833,"children":834},{"class":354},[835],{"type":23,"value":662},{"type":17,"tag":287,"props":837,"children":838},{"class":300},[839],{"type":23,"value":840},"], yaw ",{"type":17,"tag":287,"props":842,"children":843},{"class":294},[844],{"type":23,"value":758},{"type":17,"tag":287,"props":846,"children":847},{"class":300},[848],{"type":23,"value":763},{"type":17,"tag":287,"props":850,"children":851},{"class":294},[852],{"type":23,"value":768},{"type":17,"tag":287,"props":854,"children":855},{"class":300},[856],{"type":23,"value":351},{"type":17,"tag":287,"props":858,"children":859},{"class":354},[860],{"type":23,"value":611},{"type":17,"tag":287,"props":862,"children":863},{"class":300},[864],{"type":23,"value":781},{"type":17,"tag":287,"props":866,"children":867},{"class":294},[868],{"type":23,"value":601},{"type":17,"tag":287,"props":870,"children":871},{"class":300},[872],{"type":23,"value":790},{"type":17,"tag":287,"props":874,"children":875},{"class":354},[876],{"type":23,"value":611},{"type":17,"tag":287,"props":878,"children":879},{"class":300},[880],{"type":23,"value":881},"]], [v, omega])\n",{"type":17,"tag":287,"props":883,"children":885},{"class":289,"line":884},25,[886,891,895,899,903,907,911,915,919,923,927,932,936,940,944,948,952,956,960,964,968,972,976,980,984,988,992,996,1000,1004,1008,1012,1016],{"type":17,"tag":287,"props":887,"children":888},{"class":300},[889],{"type":23,"value":890},"    k3 ",{"type":17,"tag":287,"props":892,"children":893},{"class":294},[894],{"type":23,"value":346},{"type":17,"tag":287,"props":896,"children":897},{"class":300},[898],{"type":23,"value":753},{"type":17,"tag":287,"props":900,"children":901},{"class":294},[902],{"type":23,"value":758},{"type":17,"tag":287,"props":904,"children":905},{"class":300},[906],{"type":23,"value":763},{"type":17,"tag":287,"props":908,"children":909},{"class":294},[910],{"type":23,"value":768},{"type":17,"tag":287,"props":912,"children":913},{"class":300},[914],{"type":23,"value":351},{"type":17,"tag":287,"props":916,"children":917},{"class":354},[918],{"type":23,"value":611},{"type":17,"tag":287,"props":920,"children":921},{"class":300},[922],{"type":23,"value":781},{"type":17,"tag":287,"props":924,"children":925},{"class":294},[926],{"type":23,"value":601},{"type":17,"tag":287,"props":928,"children":929},{"class":300},[930],{"type":23,"value":931}," k2[",{"type":17,"tag":287,"props":933,"children":934},{"class":354},[935],{"type":23,"value":591},{"type":17,"tag":287,"props":937,"children":938},{"class":300},[939],{"type":23,"value":799},{"type":17,"tag":287,"props":941,"children":942},{"class":294},[943],{"type":23,"value":758},{"type":17,"tag":287,"props":945,"children":946},{"class":300},[947],{"type":23,"value":763},{"type":17,"tag":287,"props":949,"children":950},{"class":294},[951],{"type":23,"value":768},{"type":17,"tag":287,"props":953,"children":954},{"class":300},[955],{"type":23,"value":351},{"type":17,"tag":287,"props":957,"children":958},{"class":354},[959],{"type":23,"value":611},{"type":17,"tag":287,"props":961,"children":962},{"class":300},[963],{"type":23,"value":781},{"type":17,"tag":287,"props":965,"children":966},{"class":294},[967],{"type":23,"value":601},{"type":17,"tag":287,"props":969,"children":970},{"class":300},[971],{"type":23,"value":931},{"type":17,"tag":287,"props":973,"children":974},{"class":354},[975],{"type":23,"value":662},{"type":17,"tag":287,"props":977,"children":978},{"class":300},[979],{"type":23,"value":840},{"type":17,"tag":287,"props":981,"children":982},{"class":294},[983],{"type":23,"value":758},{"type":17,"tag":287,"props":985,"children":986},{"class":300},[987],{"type":23,"value":763},{"type":17,"tag":287,"props":989,"children":990},{"class":294},[991],{"type":23,"value":768},{"type":17,"tag":287,"props":993,"children":994},{"class":300},[995],{"type":23,"value":351},{"type":17,"tag":287,"props":997,"children":998},{"class":354},[999],{"type":23,"value":611},{"type":17,"tag":287,"props":1001,"children":1002},{"class":300},[1003],{"type":23,"value":781},{"type":17,"tag":287,"props":1005,"children":1006},{"class":294},[1007],{"type":23,"value":601},{"type":17,"tag":287,"props":1009,"children":1010},{"class":300},[1011],{"type":23,"value":931},{"type":17,"tag":287,"props":1013,"children":1014},{"class":354},[1015],{"type":23,"value":611},{"type":17,"tag":287,"props":1017,"children":1018},{"class":300},[1019],{"type":23,"value":881},{"type":17,"tag":287,"props":1021,"children":1023},{"class":289,"line":1022},26,[1024,1029,1033,1037,1041,1046,1050,1055,1059,1063,1067,1071,1075,1079,1083,1087,1091,1095,1099,1103,1107],{"type":17,"tag":287,"props":1025,"children":1026},{"class":300},[1027],{"type":23,"value":1028},"    k4 ",{"type":17,"tag":287,"props":1030,"children":1031},{"class":294},[1032],{"type":23,"value":346},{"type":17,"tag":287,"props":1034,"children":1035},{"class":300},[1036],{"type":23,"value":753},{"type":17,"tag":287,"props":1038,"children":1039},{"class":294},[1040],{"type":23,"value":758},{"type":17,"tag":287,"props":1042,"children":1043},{"class":300},[1044],{"type":23,"value":1045}," dt ",{"type":17,"tag":287,"props":1047,"children":1048},{"class":294},[1049],{"type":23,"value":601},{"type":17,"tag":287,"props":1051,"children":1052},{"class":300},[1053],{"type":23,"value":1054}," k3[",{"type":17,"tag":287,"props":1056,"children":1057},{"class":354},[1058],{"type":23,"value":591},{"type":17,"tag":287,"props":1060,"children":1061},{"class":300},[1062],{"type":23,"value":799},{"type":17,"tag":287,"props":1064,"children":1065},{"class":294},[1066],{"type":23,"value":758},{"type":17,"tag":287,"props":1068,"children":1069},{"class":300},[1070],{"type":23,"value":1045},{"type":17,"tag":287,"props":1072,"children":1073},{"class":294},[1074],{"type":23,"value":601},{"type":17,"tag":287,"props":1076,"children":1077},{"class":300},[1078],{"type":23,"value":1054},{"type":17,"tag":287,"props":1080,"children":1081},{"class":354},[1082],{"type":23,"value":662},{"type":17,"tag":287,"props":1084,"children":1085},{"class":300},[1086],{"type":23,"value":840},{"type":17,"tag":287,"props":1088,"children":1089},{"class":294},[1090],{"type":23,"value":758},{"type":17,"tag":287,"props":1092,"children":1093},{"class":300},[1094],{"type":23,"value":1045},{"type":17,"tag":287,"props":1096,"children":1097},{"class":294},[1098],{"type":23,"value":601},{"type":17,"tag":287,"props":1100,"children":1101},{"class":300},[1102],{"type":23,"value":1054},{"type":17,"tag":287,"props":1104,"children":1105},{"class":354},[1106],{"type":23,"value":611},{"type":17,"tag":287,"props":1108,"children":1109},{"class":300},[1110],{"type":23,"value":881},{"type":17,"tag":287,"props":1112,"children":1114},{"class":289,"line":1113},27,[1115],{"type":17,"tag":287,"props":1116,"children":1117},{},[1118],{"type":23,"value":322},{"type":17,"tag":287,"props":1120,"children":1122},{"class":289,"line":1121},28,[1123,1128],{"type":17,"tag":287,"props":1124,"children":1125},{"class":300},[1126],{"type":23,"value":1127},"    ",{"type":17,"tag":287,"props":1129,"children":1130},{"class":329},[1131],{"type":23,"value":1132},"# Update state of the robot\n",{"type":17,"tag":287,"props":1134,"children":1136},{"class":289,"line":1135},29,[1137,1142,1147,1152,1156,1161,1165,1169,1173,1177,1181,1185,1189,1193,1197,1201,1205,1209,1213,1217,1221,1225,1229,1234,1238,1243,1247,1251,1255,1259],{"type":17,"tag":287,"props":1138,"children":1139},{"class":300},[1140],{"type":23,"value":1141},"    x ",{"type":17,"tag":287,"props":1143,"children":1144},{"class":294},[1145],{"type":23,"value":1146},"+=",{"type":17,"tag":287,"props":1148,"children":1149},{"class":300},[1150],{"type":23,"value":1151}," (k1[",{"type":17,"tag":287,"props":1153,"children":1154},{"class":354},[1155],{"type":23,"value":591},{"type":17,"tag":287,"props":1157,"children":1158},{"class":300},[1159],{"type":23,"value":1160},"] ",{"type":17,"tag":287,"props":1162,"children":1163},{"class":294},[1164],{"type":23,"value":758},{"type":17,"tag":287,"props":1166,"children":1167},{"class":300},[1168],{"type":23,"value":351},{"type":17,"tag":287,"props":1170,"children":1171},{"class":354},[1172],{"type":23,"value":611},{"type":17,"tag":287,"props":1174,"children":1175},{"class":300},[1176],{"type":23,"value":351},{"type":17,"tag":287,"props":1178,"children":1179},{"class":294},[1180],{"type":23,"value":601},{"type":17,"tag":287,"props":1182,"children":1183},{"class":300},[1184],{"type":23,"value":931},{"type":17,"tag":287,"props":1186,"children":1187},{"class":354},[1188],{"type":23,"value":591},{"type":17,"tag":287,"props":1190,"children":1191},{"class":300},[1192],{"type":23,"value":1160},{"type":17,"tag":287,"props":1194,"children":1195},{"class":294},[1196],{"type":23,"value":758},{"type":17,"tag":287,"props":1198,"children":1199},{"class":300},[1200],{"type":23,"value":351},{"type":17,"tag":287,"props":1202,"children":1203},{"class":354},[1204],{"type":23,"value":611},{"type":17,"tag":287,"props":1206,"children":1207},{"class":300},[1208],{"type":23,"value":351},{"type":17,"tag":287,"props":1210,"children":1211},{"class":294},[1212],{"type":23,"value":601},{"type":17,"tag":287,"props":1214,"children":1215},{"class":300},[1216],{"type":23,"value":1054},{"type":17,"tag":287,"props":1218,"children":1219},{"class":354},[1220],{"type":23,"value":591},{"type":17,"tag":287,"props":1222,"children":1223},{"class":300},[1224],{"type":23,"value":1160},{"type":17,"tag":287,"props":1226,"children":1227},{"class":294},[1228],{"type":23,"value":758},{"type":17,"tag":287,"props":1230,"children":1231},{"class":300},[1232],{"type":23,"value":1233}," k4[",{"type":17,"tag":287,"props":1235,"children":1236},{"class":354},[1237],{"type":23,"value":591},{"type":17,"tag":287,"props":1239,"children":1240},{"class":300},[1241],{"type":23,"value":1242},"]) ",{"type":17,"tag":287,"props":1244,"children":1245},{"class":294},[1246],{"type":23,"value":601},{"type":17,"tag":287,"props":1248,"children":1249},{"class":300},[1250],{"type":23,"value":1045},{"type":17,"tag":287,"props":1252,"children":1253},{"class":294},[1254],{"type":23,"value":768},{"type":17,"tag":287,"props":1256,"children":1257},{"class":300},[1258],{"type":23,"value":351},{"type":17,"tag":287,"props":1260,"children":1261},{"class":354},[1262],{"type":23,"value":1263},"6\n",{"type":17,"tag":287,"props":1265,"children":1267},{"class":289,"line":1266},30,[1268,1273,1277,1281,1285,1289,1293,1297,1301,1305,1309,1313,1317,1321,1325,1329,1333,1337,1341,1345,1349,1353,1357,1361,1365,1369,1373,1377,1381,1385],{"type":17,"tag":287,"props":1269,"children":1270},{"class":300},[1271],{"type":23,"value":1272},"    y ",{"type":17,"tag":287,"props":1274,"children":1275},{"class":294},[1276],{"type":23,"value":1146},{"type":17,"tag":287,"props":1278,"children":1279},{"class":300},[1280],{"type":23,"value":1151},{"type":17,"tag":287,"props":1282,"children":1283},{"class":354},[1284],{"type":23,"value":662},{"type":17,"tag":287,"props":1286,"children":1287},{"class":300},[1288],{"type":23,"value":1160},{"type":17,"tag":287,"props":1290,"children":1291},{"class":294},[1292],{"type":23,"value":758},{"type":17,"tag":287,"props":1294,"children":1295},{"class":300},[1296],{"type":23,"value":351},{"type":17,"tag":287,"props":1298,"children":1299},{"class":354},[1300],{"type":23,"value":611},{"type":17,"tag":287,"props":1302,"children":1303},{"class":300},[1304],{"type":23,"value":351},{"type":17,"tag":287,"props":1306,"children":1307},{"class":294},[1308],{"type":23,"value":601},{"type":17,"tag":287,"props":1310,"children":1311},{"class":300},[1312],{"type":23,"value":931},{"type":17,"tag":287,"props":1314,"children":1315},{"class":354},[1316],{"type":23,"value":662},{"type":17,"tag":287,"props":1318,"children":1319},{"class":300},[1320],{"type":23,"value":1160},{"type":17,"tag":287,"props":1322,"children":1323},{"class":294},[1324],{"type":23,"value":758},{"type":17,"tag":287,"props":1326,"children":1327},{"class":300},[1328],{"type":23,"value":351},{"type":17,"tag":287,"props":1330,"children":1331},{"class":354},[1332],{"type":23,"value":611},{"type":17,"tag":287,"props":1334,"children":1335},{"class":300},[1336],{"type":23,"value":351},{"type":17,"tag":287,"props":1338,"children":1339},{"class":294},[1340],{"type":23,"value":601},{"type":17,"tag":287,"props":1342,"children":1343},{"class":300},[1344],{"type":23,"value":1054},{"type":17,"tag":287,"props":1346,"children":1347},{"class":354},[1348],{"type":23,"value":662},{"type":17,"tag":287,"props":1350,"children":1351},{"class":300},[1352],{"type":23,"value":1160},{"type":17,"tag":287,"props":1354,"children":1355},{"class":294},[1356],{"type":23,"value":758},{"type":17,"tag":287,"props":1358,"children":1359},{"class":300},[1360],{"type":23,"value":1233},{"type":17,"tag":287,"props":1362,"children":1363},{"class":354},[1364],{"type":23,"value":662},{"type":17,"tag":287,"props":1366,"children":1367},{"class":300},[1368],{"type":23,"value":1242},{"type":17,"tag":287,"props":1370,"children":1371},{"class":294},[1372],{"type":23,"value":601},{"type":17,"tag":287,"props":1374,"children":1375},{"class":300},[1376],{"type":23,"value":1045},{"type":17,"tag":287,"props":1378,"children":1379},{"class":294},[1380],{"type":23,"value":768},{"type":17,"tag":287,"props":1382,"children":1383},{"class":300},[1384],{"type":23,"value":351},{"type":17,"tag":287,"props":1386,"children":1387},{"class":354},[1388],{"type":23,"value":1263},{"type":17,"tag":287,"props":1390,"children":1392},{"class":289,"line":1391},31,[1393,1398,1402,1406,1410,1414,1418,1422,1426,1430,1434,1438,1442,1446,1450,1454,1458,1462,1466,1470,1474,1478,1482,1486,1490,1494,1498,1502,1506,1510],{"type":17,"tag":287,"props":1394,"children":1395},{"class":300},[1396],{"type":23,"value":1397},"    yaw ",{"type":17,"tag":287,"props":1399,"children":1400},{"class":294},[1401],{"type":23,"value":1146},{"type":17,"tag":287,"props":1403,"children":1404},{"class":300},[1405],{"type":23,"value":1151},{"type":17,"tag":287,"props":1407,"children":1408},{"class":354},[1409],{"type":23,"value":611},{"type":17,"tag":287,"props":1411,"children":1412},{"class":300},[1413],{"type":23,"value":1160},{"type":17,"tag":287,"props":1415,"children":1416},{"class":294},[1417],{"type":23,"value":758},{"type":17,"tag":287,"props":1419,"children":1420},{"class":300},[1421],{"type":23,"value":351},{"type":17,"tag":287,"props":1423,"children":1424},{"class":354},[1425],{"type":23,"value":611},{"type":17,"tag":287,"props":1427,"children":1428},{"class":300},[1429],{"type":23,"value":351},{"type":17,"tag":287,"props":1431,"children":1432},{"class":294},[1433],{"type":23,"value":601},{"type":17,"tag":287,"props":1435,"children":1436},{"class":300},[1437],{"type":23,"value":931},{"type":17,"tag":287,"props":1439,"children":1440},{"class":354},[1441],{"type":23,"value":611},{"type":17,"tag":287,"props":1443,"children":1444},{"class":300},[1445],{"type":23,"value":1160},{"type":17,"tag":287,"props":1447,"children":1448},{"class":294},[1449],{"type":23,"value":758},{"type":17,"tag":287,"props":1451,"children":1452},{"class":300},[1453],{"type":23,"value":351},{"type":17,"tag":287,"props":1455,"children":1456},{"class":354},[1457],{"type":23,"value":611},{"type":17,"tag":287,"props":1459,"children":1460},{"class":300},[1461],{"type":23,"value":351},{"type":17,"tag":287,"props":1463,"children":1464},{"class":294},[1465],{"type":23,"value":601},{"type":17,"tag":287,"props":1467,"children":1468},{"class":300},[1469],{"type":23,"value":1054},{"type":17,"tag":287,"props":1471,"children":1472},{"class":354},[1473],{"type":23,"value":611},{"type":17,"tag":287,"props":1475,"children":1476},{"class":300},[1477],{"type":23,"value":1160},{"type":17,"tag":287,"props":1479,"children":1480},{"class":294},[1481],{"type":23,"value":758},{"type":17,"tag":287,"props":1483,"children":1484},{"class":300},[1485],{"type":23,"value":1233},{"type":17,"tag":287,"props":1487,"children":1488},{"class":354},[1489],{"type":23,"value":611},{"type":17,"tag":287,"props":1491,"children":1492},{"class":300},[1493],{"type":23,"value":1242},{"type":17,"tag":287,"props":1495,"children":1496},{"class":294},[1497],{"type":23,"value":601},{"type":17,"tag":287,"props":1499,"children":1500},{"class":300},[1501],{"type":23,"value":1045},{"type":17,"tag":287,"props":1503,"children":1504},{"class":294},[1505],{"type":23,"value":768},{"type":17,"tag":287,"props":1507,"children":1508},{"class":300},[1509],{"type":23,"value":351},{"type":17,"tag":287,"props":1511,"children":1512},{"class":354},[1513],{"type":23,"value":1514},"6",{"type":17,"tag":18,"props":1516,"children":1518},{"id":1517},"single-shooting-method",[1519],{"type":23,"value":1520},"Single Shooting Method",{"type":17,"tag":26,"props":1522,"children":1523},{},[1524],{"type":23,"value":1525},"Single Shooting Method is a method that we transform the optimal control problem to the nonlinear programming problem with just one decision variable.",{"type":17,"tag":159,"props":1527,"children":1529},{"latex-express":1528,"styles":58},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}\\right]\n        \\end{align*}\n",[],{"type":17,"tag":26,"props":1531,"children":1532},{},[1533,1535,1539,1541],{"type":23,"value":1534},"Get ",{"type":17,"tag":91,"props":1536,"children":1538},{"latex-express":1537,"styles":122},"x_{u}",[],{"type":23,"value":1540}," as a function of ",{"type":17,"tag":91,"props":1542,"children":1544},{"latex-express":1543,"styles":122},"w, x, t_{k}",[],{"type":17,"tag":159,"props":1546,"children":1548},{"latex-express":1547,"styles":58},"\n      \\begin{align*}\n            x_{u} &= F(w,x_{0},t_{k}) \\\\\n            F(w,x_{0},t_{0}) &= x_{0} \\\\\n        \\end{align*}\n",[],{"type":17,"tag":26,"props":1550,"children":1551},{},[1552],{"type":23,"value":1553},"Then solve the NLP",{"type":17,"tag":159,"props":1555,"children":1557},{"latex-express":1556,"styles":58},"\n      \\begin{align*}\n            \\min_{w}\\Phi(F(w,x_{0},t_{k}), w) \\\\ \n            \\text{Subject to} \\hspace{1cm}  g_{1}(F(w,x_{0},t_{k}),w) \\leq{0}\n        \\end{align*}\n",[],{"type":17,"tag":18,"props":1559,"children":1561},{"id":1560},"multiple-shooting",[1562],{"type":23,"value":1563},"Multiple Shooting",{"type":17,"tag":26,"props":1565,"children":1566},{},[1567],{"type":23,"value":1568},"Multiple Shooting Method is a method that consist of transforming of optimal control problem to the nonlinear programming problem with multiple decision variables.",{"type":17,"tag":159,"props":1570,"children":1572},{"latex-express":1571,"styles":58},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}, x_{0}, ..., x_{N}\\right]\n        \\end{align*}\n",[],{"type":17,"tag":112,"props":1574,"children":1575},{},[1576,1581],{"type":17,"tag":116,"props":1577,"children":1578},{},[1579],{"type":23,"value":1580},"X becoming decision variable in the opimization problem as well as u",{"type":17,"tag":116,"props":1582,"children":1583},{},[1584],{"type":23,"value":1585},"We apply path constraint at each iteration step",{"type":17,"tag":159,"props":1587,"children":1589},{"latex-express":1588,"styles":58},"\n      \\begin{equation*}\n                x_{k+1}-f(x_{k},u_{k}) = 0\n            \\end{equation*}\n",[],{"type":17,"tag":26,"props":1591,"children":1592},{},[1593],{"type":23,"value":1553},{"type":17,"tag":159,"props":1595,"children":1597},{"latex-express":1596,"styles":58},"\n      \\begin{align*}\n            \\min_{w}  \\Phi(F(w,x_{0},t_{k}),& w) \\\\ \n            \\text{s.t}\\hspace{0.5cm}  g_{1}(F(w,x_{0},t_{k}),w) &\\leq{0} \\\\ \n                               g_{2}(w) = \\begin{bmatrix}\n                                  \\bar{x}_{0}-x_{0} \\\\\n                                  f(x_{0},u_{0})-x_{1} \\\\ \n                                  \\vdots \\\\\n                                  f(x_{N-1}, u_{N-1}-x_{N})\n                              \\end{bmatrix} &= 0\n        \\end{align*}\n",[],{"type":17,"tag":18,"props":1599,"children":1601},{"id":1600},"implement-in-python",[1602],{"type":23,"value":1603},"Implement in Python",{"type":17,"tag":26,"props":1605,"children":1606},{},[1607,1609,1615],{"type":23,"value":1608},"We will use ",{"type":17,"tag":1610,"props":1611,"children":1612},"code-inline",{},[1613],{"type":23,"value":1614},"Casadi",{"type":23,"value":1616}," as a numerical optimization framework.",{"type":17,"tag":272,"props":1618,"children":1621},{"className":1619,"code":1620,"language":277,"meta":7},[275],"import casadi as ca\n",[1622],{"type":17,"tag":280,"props":1623,"children":1624},{},[1625],{"type":17,"tag":272,"props":1626,"children":1627},{"__ignoreMap":7},[1628],{"type":17,"tag":287,"props":1629,"children":1630},{"class":289,"line":290},[1631,1635,1640,1644],{"type":17,"tag":287,"props":1632,"children":1633},{"class":294},[1634],{"type":23,"value":297},{"type":17,"tag":287,"props":1636,"children":1637},{"class":300},[1638],{"type":23,"value":1639}," casadi ",{"type":17,"tag":287,"props":1641,"children":1642},{"class":294},[1643],{"type":23,"value":308},{"type":17,"tag":287,"props":1645,"children":1646},{"class":300},[1647],{"type":23,"value":1648}," ca",{"type":17,"tag":26,"props":1650,"children":1651},{},[1652],{"type":23,"value":1653},"Define state representation and input control of our nonlinear model.",{"type":17,"tag":272,"props":1655,"children":1658},{"className":1656,"code":1657,"language":277,"meta":7},[275],"# Symbolic Variables\n## States\nx = ca.SX.sym(\"x\")\ny = ca.SX.sym(\"y\")\ntheta = ca.SX.sym(\"theta\")\nstates = ca.vertcat(x, y, theta)\nnum_states = states.numel()\n\n## Control\nu1 = ca.SX.sym(\"u1\")\nu2 = ca.SX.sym(\"u2\")\ncontrols = ca.vertcat(u1, u2)\nnum_controls = controls.numel()\n\n# Define Nonlinear model\n## Rotation Matrix\nrot_mat = ca.vertcat(\n    ca.horzcat(ca.cos(theta), ca.sin(theta), 0),\n    ca.horzcat(-ca.sin(theta), ca.cos(theta), 0),\n    ca.horzcat(0, 0, 1)\n)\n\nvx = u1 * ca.cos(theta)\nvy = u1 * ca.sin(theta)\nvyaw = u2\n\nrhs = ca.vertcat(vx, vy, vyaw)\n## Define mapped nonlinear function f(x,u) -> rhs\nf = ca.Function('f', [states, controls], [rhs])\n",[1659],{"type":17,"tag":280,"props":1660,"children":1661},{},[1662],{"type":17,"tag":272,"props":1663,"children":1664},{"__ignoreMap":7},[1665,1673,1681,1718,1750,1783,1800,1817,1824,1832,1865,1898,1915,1932,1939,1947,1955,1972,1989,2015,2047,2054,2061,2087,2112,2129,2136,2153,2161],{"type":17,"tag":287,"props":1666,"children":1667},{"class":289,"line":290},[1668],{"type":17,"tag":287,"props":1669,"children":1670},{"class":329},[1671],{"type":23,"value":1672},"# Symbolic Variables\n",{"type":17,"tag":287,"props":1674,"children":1675},{"class":289,"line":316},[1676],{"type":17,"tag":287,"props":1677,"children":1678},{"class":329},[1679],{"type":23,"value":1680},"## States\n",{"type":17,"tag":287,"props":1682,"children":1683},{"class":289,"line":325},[1684,1688,1692,1697,1702,1707,1713],{"type":17,"tag":287,"props":1685,"children":1686},{"class":300},[1687],{"type":23,"value":406},{"type":17,"tag":287,"props":1689,"children":1690},{"class":294},[1691],{"type":23,"value":346},{"type":17,"tag":287,"props":1693,"children":1694},{"class":300},[1695],{"type":23,"value":1696}," ca.",{"type":17,"tag":287,"props":1698,"children":1699},{"class":354},[1700],{"type":23,"value":1701},"SX",{"type":17,"tag":287,"props":1703,"children":1704},{"class":300},[1705],{"type":23,"value":1706},".sym(",{"type":17,"tag":287,"props":1708,"children":1710},{"class":1709},"ct-244866",[1711],{"type":23,"value":1712},"\"x\"",{"type":17,"tag":287,"props":1714,"children":1715},{"class":300},[1716],{"type":23,"value":1717},")\n",{"type":17,"tag":287,"props":1719,"children":1720},{"class":289,"line":335},[1721,1725,1729,1733,1737,1741,1746],{"type":17,"tag":287,"props":1722,"children":1723},{"class":300},[1724],{"type":23,"value":428},{"type":17,"tag":287,"props":1726,"children":1727},{"class":294},[1728],{"type":23,"value":346},{"type":17,"tag":287,"props":1730,"children":1731},{"class":300},[1732],{"type":23,"value":1696},{"type":17,"tag":287,"props":1734,"children":1735},{"class":354},[1736],{"type":23,"value":1701},{"type":17,"tag":287,"props":1738,"children":1739},{"class":300},[1740],{"type":23,"value":1706},{"type":17,"tag":287,"props":1742,"children":1743},{"class":1709},[1744],{"type":23,"value":1745},"\"y\"",{"type":17,"tag":287,"props":1747,"children":1748},{"class":300},[1749],{"type":23,"value":1717},{"type":17,"tag":287,"props":1751,"children":1752},{"class":289,"line":360},[1753,1758,1762,1766,1770,1774,1779],{"type":17,"tag":287,"props":1754,"children":1755},{"class":300},[1756],{"type":23,"value":1757},"theta ",{"type":17,"tag":287,"props":1759,"children":1760},{"class":294},[1761],{"type":23,"value":346},{"type":17,"tag":287,"props":1763,"children":1764},{"class":300},[1765],{"type":23,"value":1696},{"type":17,"tag":287,"props":1767,"children":1768},{"class":354},[1769],{"type":23,"value":1701},{"type":17,"tag":287,"props":1771,"children":1772},{"class":300},[1773],{"type":23,"value":1706},{"type":17,"tag":287,"props":1775,"children":1776},{"class":1709},[1777],{"type":23,"value":1778},"\"theta\"",{"type":17,"tag":287,"props":1780,"children":1781},{"class":300},[1782],{"type":23,"value":1717},{"type":17,"tag":287,"props":1784,"children":1785},{"class":289,"line":369},[1786,1791,1795],{"type":17,"tag":287,"props":1787,"children":1788},{"class":300},[1789],{"type":23,"value":1790},"states ",{"type":17,"tag":287,"props":1792,"children":1793},{"class":294},[1794],{"type":23,"value":346},{"type":17,"tag":287,"props":1796,"children":1797},{"class":300},[1798],{"type":23,"value":1799}," ca.vertcat(x, y, theta)\n",{"type":17,"tag":287,"props":1801,"children":1802},{"class":289,"line":391},[1803,1808,1812],{"type":17,"tag":287,"props":1804,"children":1805},{"class":300},[1806],{"type":23,"value":1807},"num_states ",{"type":17,"tag":287,"props":1809,"children":1810},{"class":294},[1811],{"type":23,"value":346},{"type":17,"tag":287,"props":1813,"children":1814},{"class":300},[1815],{"type":23,"value":1816}," states.numel()\n",{"type":17,"tag":287,"props":1818,"children":1819},{"class":289,"line":400},[1820],{"type":17,"tag":287,"props":1821,"children":1822},{},[1823],{"type":23,"value":322},{"type":17,"tag":287,"props":1825,"children":1826},{"class":289,"line":422},[1827],{"type":17,"tag":287,"props":1828,"children":1829},{"class":329},[1830],{"type":23,"value":1831},"## Control\n",{"type":17,"tag":287,"props":1833,"children":1834},{"class":289,"line":443},[1835,1840,1844,1848,1852,1856,1861],{"type":17,"tag":287,"props":1836,"children":1837},{"class":300},[1838],{"type":23,"value":1839},"u1 ",{"type":17,"tag":287,"props":1841,"children":1842},{"class":294},[1843],{"type":23,"value":346},{"type":17,"tag":287,"props":1845,"children":1846},{"class":300},[1847],{"type":23,"value":1696},{"type":17,"tag":287,"props":1849,"children":1850},{"class":354},[1851],{"type":23,"value":1701},{"type":17,"tag":287,"props":1853,"children":1854},{"class":300},[1855],{"type":23,"value":1706},{"type":17,"tag":287,"props":1857,"children":1858},{"class":1709},[1859],{"type":23,"value":1860},"\"u1\"",{"type":17,"tag":287,"props":1862,"children":1863},{"class":300},[1864],{"type":23,"value":1717},{"type":17,"tag":287,"props":1866,"children":1867},{"class":289,"line":464},[1868,1873,1877,1881,1885,1889,1894],{"type":17,"tag":287,"props":1869,"children":1870},{"class":300},[1871],{"type":23,"value":1872},"u2 ",{"type":17,"tag":287,"props":1874,"children":1875},{"class":294},[1876],{"type":23,"value":346},{"type":17,"tag":287,"props":1878,"children":1879},{"class":300},[1880],{"type":23,"value":1696},{"type":17,"tag":287,"props":1882,"children":1883},{"class":354},[1884],{"type":23,"value":1701},{"type":17,"tag":287,"props":1886,"children":1887},{"class":300},[1888],{"type":23,"value":1706},{"type":17,"tag":287,"props":1890,"children":1891},{"class":1709},[1892],{"type":23,"value":1893},"\"u2\"",{"type":17,"tag":287,"props":1895,"children":1896},{"class":300},[1897],{"type":23,"value":1717},{"type":17,"tag":287,"props":1899,"children":1900},{"class":289,"line":473},[1901,1906,1910],{"type":17,"tag":287,"props":1902,"children":1903},{"class":300},[1904],{"type":23,"value":1905},"controls ",{"type":17,"tag":287,"props":1907,"children":1908},{"class":294},[1909],{"type":23,"value":346},{"type":17,"tag":287,"props":1911,"children":1912},{"class":300},[1913],{"type":23,"value":1914}," ca.vertcat(u1, u2)\n",{"type":17,"tag":287,"props":1916,"children":1917},{"class":289,"line":504},[1918,1923,1927],{"type":17,"tag":287,"props":1919,"children":1920},{"class":300},[1921],{"type":23,"value":1922},"num_controls ",{"type":17,"tag":287,"props":1924,"children":1925},{"class":294},[1926],{"type":23,"value":346},{"type":17,"tag":287,"props":1928,"children":1929},{"class":300},[1930],{"type":23,"value":1931}," controls.numel()\n",{"type":17,"tag":287,"props":1933,"children":1934},{"class":289,"line":535},[1935],{"type":17,"tag":287,"props":1936,"children":1937},{},[1938],{"type":23,"value":322},{"type":17,"tag":287,"props":1940,"children":1941},{"class":289,"line":544},[1942],{"type":17,"tag":287,"props":1943,"children":1944},{"class":329},[1945],{"type":23,"value":1946},"# Define Nonlinear model\n",{"type":17,"tag":287,"props":1948,"children":1949},{"class":289,"line":553},[1950],{"type":17,"tag":287,"props":1951,"children":1952},{"class":329},[1953],{"type":23,"value":1954},"## Rotation Matrix\n",{"type":17,"tag":287,"props":1956,"children":1957},{"class":289,"line":580},[1958,1963,1967],{"type":17,"tag":287,"props":1959,"children":1960},{"class":300},[1961],{"type":23,"value":1962},"rot_mat ",{"type":17,"tag":287,"props":1964,"children":1965},{"class":294},[1966],{"type":23,"value":346},{"type":17,"tag":287,"props":1968,"children":1969},{"class":300},[1970],{"type":23,"value":1971}," ca.vertcat(\n",{"type":17,"tag":287,"props":1973,"children":1974},{"class":289,"line":619},[1975,1980,1984],{"type":17,"tag":287,"props":1976,"children":1977},{"class":300},[1978],{"type":23,"value":1979},"    ca.horzcat(ca.cos(theta), ca.sin(theta), ",{"type":17,"tag":287,"props":1981,"children":1982},{"class":354},[1983],{"type":23,"value":591},{"type":17,"tag":287,"props":1985,"children":1986},{"class":300},[1987],{"type":23,"value":1988},"),\n",{"type":17,"tag":287,"props":1990,"children":1991},{"class":289,"line":652},[1992,1997,2002,2007,2011],{"type":17,"tag":287,"props":1993,"children":1994},{"class":300},[1995],{"type":23,"value":1996},"    ca.horzcat(",{"type":17,"tag":287,"props":1998,"children":1999},{"class":294},[2000],{"type":23,"value":2001},"-",{"type":17,"tag":287,"props":2003,"children":2004},{"class":300},[2005],{"type":23,"value":2006},"ca.sin(theta), ca.cos(theta), ",{"type":17,"tag":287,"props":2008,"children":2009},{"class":354},[2010],{"type":23,"value":591},{"type":17,"tag":287,"props":2012,"children":2013},{"class":300},[2014],{"type":23,"value":1988},{"type":17,"tag":287,"props":2016,"children":2017},{"class":289,"line":670},[2018,2022,2026,2031,2035,2039,2043],{"type":17,"tag":287,"props":2019,"children":2020},{"class":300},[2021],{"type":23,"value":1996},{"type":17,"tag":287,"props":2023,"children":2024},{"class":354},[2025],{"type":23,"value":591},{"type":17,"tag":287,"props":2027,"children":2028},{"class":300},[2029],{"type":23,"value":2030},", ",{"type":17,"tag":287,"props":2032,"children":2033},{"class":354},[2034],{"type":23,"value":591},{"type":17,"tag":287,"props":2036,"children":2037},{"class":300},[2038],{"type":23,"value":2030},{"type":17,"tag":287,"props":2040,"children":2041},{"class":354},[2042],{"type":23,"value":662},{"type":17,"tag":287,"props":2044,"children":2045},{"class":300},[2046],{"type":23,"value":1717},{"type":17,"tag":287,"props":2048,"children":2049},{"class":289,"line":679},[2050],{"type":17,"tag":287,"props":2051,"children":2052},{"class":300},[2053],{"type":23,"value":1717},{"type":17,"tag":287,"props":2055,"children":2056},{"class":289,"line":687},[2057],{"type":17,"tag":287,"props":2058,"children":2059},{},[2060],{"type":23,"value":322},{"type":17,"tag":287,"props":2062,"children":2063},{"class":289,"line":720},[2064,2069,2073,2078,2082],{"type":17,"tag":287,"props":2065,"children":2066},{"class":300},[2067],{"type":23,"value":2068},"vx ",{"type":17,"tag":287,"props":2070,"children":2071},{"class":294},[2072],{"type":23,"value":346},{"type":17,"tag":287,"props":2074,"children":2075},{"class":300},[2076],{"type":23,"value":2077}," u1 ",{"type":17,"tag":287,"props":2079,"children":2080},{"class":294},[2081],{"type":23,"value":601},{"type":17,"tag":287,"props":2083,"children":2084},{"class":300},[2085],{"type":23,"value":2086}," ca.cos(theta)\n",{"type":17,"tag":287,"props":2088,"children":2089},{"class":289,"line":738},[2090,2095,2099,2103,2107],{"type":17,"tag":287,"props":2091,"children":2092},{"class":300},[2093],{"type":23,"value":2094},"vy ",{"type":17,"tag":287,"props":2096,"children":2097},{"class":294},[2098],{"type":23,"value":346},{"type":17,"tag":287,"props":2100,"children":2101},{"class":300},[2102],{"type":23,"value":2077},{"type":17,"tag":287,"props":2104,"children":2105},{"class":294},[2106],{"type":23,"value":601},{"type":17,"tag":287,"props":2108,"children":2109},{"class":300},[2110],{"type":23,"value":2111}," ca.sin(theta)\n",{"type":17,"tag":287,"props":2113,"children":2114},{"class":289,"line":884},[2115,2120,2124],{"type":17,"tag":287,"props":2116,"children":2117},{"class":300},[2118],{"type":23,"value":2119},"vyaw ",{"type":17,"tag":287,"props":2121,"children":2122},{"class":294},[2123],{"type":23,"value":346},{"type":17,"tag":287,"props":2125,"children":2126},{"class":300},[2127],{"type":23,"value":2128}," u2\n",{"type":17,"tag":287,"props":2130,"children":2131},{"class":289,"line":1022},[2132],{"type":17,"tag":287,"props":2133,"children":2134},{},[2135],{"type":23,"value":322},{"type":17,"tag":287,"props":2137,"children":2138},{"class":289,"line":1113},[2139,2144,2148],{"type":17,"tag":287,"props":2140,"children":2141},{"class":300},[2142],{"type":23,"value":2143},"rhs ",{"type":17,"tag":287,"props":2145,"children":2146},{"class":294},[2147],{"type":23,"value":346},{"type":17,"tag":287,"props":2149,"children":2150},{"class":300},[2151],{"type":23,"value":2152}," ca.vertcat(vx, vy, vyaw)\n",{"type":17,"tag":287,"props":2154,"children":2155},{"class":289,"line":1121},[2156],{"type":17,"tag":287,"props":2157,"children":2158},{"class":329},[2159],{"type":23,"value":2160},"## Define mapped nonlinear function f(x,u) -> rhs\n",{"type":17,"tag":287,"props":2162,"children":2163},{"class":289,"line":1135},[2164,2168,2172,2177,2182],{"type":17,"tag":287,"props":2165,"children":2166},{"class":300},[2167],{"type":23,"value":559},{"type":17,"tag":287,"props":2169,"children":2170},{"class":294},[2171],{"type":23,"value":346},{"type":17,"tag":287,"props":2173,"children":2174},{"class":300},[2175],{"type":23,"value":2176}," ca.Function(",{"type":17,"tag":287,"props":2178,"children":2179},{"class":1709},[2180],{"type":23,"value":2181},"'f'",{"type":17,"tag":287,"props":2183,"children":2184},{"class":300},[2185],{"type":23,"value":2186},", [states, controls], [rhs])",{"type":17,"tag":26,"props":2188,"children":2189},{},[2190],{"type":23,"value":2191},"Declare symbolic matrix",{"type":17,"tag":272,"props":2193,"children":2196},{"className":2194,"code":2195,"language":277,"meta":7},[275],"X = ca.SX.sym('X', num_states, prediction_horizons + 1)\nX_ref = ca.SX.sym('X_ref', num_states, prediction_horizons + 1)\nU = ca.SX.sym('U', num_controls, prediction_horizons)\nU_ref = ca.SX.sym('U_ref', num_controls, prediction_horizons)\n",[2197],{"type":17,"tag":280,"props":2198,"children":2199},{},[2200],{"type":17,"tag":272,"props":2201,"children":2202},{"__ignoreMap":7},[2203,2253,2302,2336],{"type":17,"tag":287,"props":2204,"children":2205},{"class":289,"line":290},[2206,2211,2215,2219,2223,2227,2232,2237,2241,2245,2249],{"type":17,"tag":287,"props":2207,"children":2208},{"class":300},[2209],{"type":23,"value":2210},"X ",{"type":17,"tag":287,"props":2212,"children":2213},{"class":294},[2214],{"type":23,"value":346},{"type":17,"tag":287,"props":2216,"children":2217},{"class":300},[2218],{"type":23,"value":1696},{"type":17,"tag":287,"props":2220,"children":2221},{"class":354},[2222],{"type":23,"value":1701},{"type":17,"tag":287,"props":2224,"children":2225},{"class":300},[2226],{"type":23,"value":1706},{"type":17,"tag":287,"props":2228,"children":2229},{"class":1709},[2230],{"type":23,"value":2231},"'X'",{"type":17,"tag":287,"props":2233,"children":2234},{"class":300},[2235],{"type":23,"value":2236},", num_states, prediction_horizons ",{"type":17,"tag":287,"props":2238,"children":2239},{"class":294},[2240],{"type":23,"value":758},{"type":17,"tag":287,"props":2242,"children":2243},{"class":300},[2244],{"type":23,"value":351},{"type":17,"tag":287,"props":2246,"children":2247},{"class":354},[2248],{"type":23,"value":662},{"type":17,"tag":287,"props":2250,"children":2251},{"class":300},[2252],{"type":23,"value":1717},{"type":17,"tag":287,"props":2254,"children":2255},{"class":289,"line":316},[2256,2261,2265,2269,2273,2277,2282,2286,2290,2294,2298],{"type":17,"tag":287,"props":2257,"children":2258},{"class":300},[2259],{"type":23,"value":2260},"X_ref ",{"type":17,"tag":287,"props":2262,"children":2263},{"class":294},[2264],{"type":23,"value":346},{"type":17,"tag":287,"props":2266,"children":2267},{"class":300},[2268],{"type":23,"value":1696},{"type":17,"tag":287,"props":2270,"children":2271},{"class":354},[2272],{"type":23,"value":1701},{"type":17,"tag":287,"props":2274,"children":2275},{"class":300},[2276],{"type":23,"value":1706},{"type":17,"tag":287,"props":2278,"children":2279},{"class":1709},[2280],{"type":23,"value":2281},"'X_ref'",{"type":17,"tag":287,"props":2283,"children":2284},{"class":300},[2285],{"type":23,"value":2236},{"type":17,"tag":287,"props":2287,"children":2288},{"class":294},[2289],{"type":23,"value":758},{"type":17,"tag":287,"props":2291,"children":2292},{"class":300},[2293],{"type":23,"value":351},{"type":17,"tag":287,"props":2295,"children":2296},{"class":354},[2297],{"type":23,"value":662},{"type":17,"tag":287,"props":2299,"children":2300},{"class":300},[2301],{"type":23,"value":1717},{"type":17,"tag":287,"props":2303,"children":2304},{"class":289,"line":325},[2305,2310,2314,2318,2322,2326,2331],{"type":17,"tag":287,"props":2306,"children":2307},{"class":300},[2308],{"type":23,"value":2309},"U ",{"type":17,"tag":287,"props":2311,"children":2312},{"class":294},[2313],{"type":23,"value":346},{"type":17,"tag":287,"props":2315,"children":2316},{"class":300},[2317],{"type":23,"value":1696},{"type":17,"tag":287,"props":2319,"children":2320},{"class":354},[2321],{"type":23,"value":1701},{"type":17,"tag":287,"props":2323,"children":2324},{"class":300},[2325],{"type":23,"value":1706},{"type":17,"tag":287,"props":2327,"children":2328},{"class":1709},[2329],{"type":23,"value":2330},"'U'",{"type":17,"tag":287,"props":2332,"children":2333},{"class":300},[2334],{"type":23,"value":2335},", num_controls, prediction_horizons)\n",{"type":17,"tag":287,"props":2337,"children":2338},{"class":289,"line":335},[2339,2344,2348,2352,2356,2360,2365],{"type":17,"tag":287,"props":2340,"children":2341},{"class":300},[2342],{"type":23,"value":2343},"U_ref ",{"type":17,"tag":287,"props":2345,"children":2346},{"class":294},[2347],{"type":23,"value":346},{"type":17,"tag":287,"props":2349,"children":2350},{"class":300},[2351],{"type":23,"value":1696},{"type":17,"tag":287,"props":2353,"children":2354},{"class":354},[2355],{"type":23,"value":1701},{"type":17,"tag":287,"props":2357,"children":2358},{"class":300},[2359],{"type":23,"value":1706},{"type":17,"tag":287,"props":2361,"children":2362},{"class":1709},[2363],{"type":23,"value":2364},"'U_ref'",{"type":17,"tag":287,"props":2366,"children":2367},{"class":300},[2368],{"type":23,"value":2369},", num_controls, prediction_horizons)",{"type":17,"tag":26,"props":2371,"children":2372},{},[2373,2375,2379],{"type":23,"value":2374},"Define nonlinear programming and options for ",{"type":17,"tag":1610,"props":2376,"children":2377},{},[2378],{"type":23,"value":1614},{"type":23,"value":2380},"\nnlp_prob = {\n'f': cost_fn,\n'x': opt_var,\n'p': opt_dec,\n'g': g\n}",{"type":17,"tag":26,"props":2382,"children":2383},{},[2384],{"type":23,"value":2385},"nlp_opts = {\n'ipopt.max_iter': 5000,\n'ipopt.print_level': 0,\n'ipopt.acceptable_tol': 1e-6,\n'ipopt.acceptable_obj_change_tol': 1e-4,\n'print_time': 0\n}",{"type":17,"tag":26,"props":2387,"children":2388},{},[2389],{"type":23,"value":2390},"Determine boundary and constraint for our optimizer",{"type":17,"tag":272,"props":2392,"children":2395},{"className":2393,"code":2394,"language":277,"meta":7},[275],"lbx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\nubx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\n\nlbx[0: num_states * (prediction_horizons + 1): num_states] = x_min\nlbx[1: num_states * (prediction_horizons + 1): num_states] = y_min\nlbx[2: num_states * (prediction_horizons + 1): num_states] = theta_min\n\nubx[0: num_states * (prediction_horizons + 1): num_states] = x_max\nubx[1: num_states * (prediction_horizons + 1): num_states] = y_max\nubx[2: num_states * (prediction_horizons + 1): num_states] = theta_max\n\nlbx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\nlbx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\n\nubx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\nubx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\n\nargs = {\n    'lbg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'ubg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'lbx': lbx,\n    'ubx': ubx\n}\n",[2396],{"type":17,"tag":280,"props":2397,"children":2398},{},[2399],{"type":17,"tag":272,"props":2400,"children":2401},{"__ignoreMap":7},[2402,2480,2552,2559,2610,2658,2706,2713,2762,2810,2858,2865,2948,3043,3050,3131,3226,3233,3250,3309,3365,3382,3399],{"type":17,"tag":287,"props":2403,"children":2404},{"class":289,"line":290},[2405,2410,2414,2418,2423,2428,2432,2437,2441,2445,2449,2453,2457,2462,2466,2471,2475],{"type":17,"tag":287,"props":2406,"children":2407},{"class":300},[2408],{"type":23,"value":2409},"lbx ",{"type":17,"tag":287,"props":2411,"children":2412},{"class":294},[2413],{"type":23,"value":346},{"type":17,"tag":287,"props":2415,"children":2416},{"class":300},[2417],{"type":23,"value":1696},{"type":17,"tag":287,"props":2419,"children":2420},{"class":354},[2421],{"type":23,"value":2422},"DM",{"type":17,"tag":287,"props":2424,"children":2425},{"class":300},[2426],{"type":23,"value":2427},".zeros((num_states ",{"type":17,"tag":287,"props":2429,"children":2430},{"class":294},[2431],{"type":23,"value":601},{"type":17,"tag":287,"props":2433,"children":2434},{"class":300},[2435],{"type":23,"value":2436}," (prediction_horizons ",{"type":17,"tag":287,"props":2438,"children":2439},{"class":294},[2440],{"type":23,"value":758},{"type":17,"tag":287,"props":2442,"children":2443},{"class":300},[2444],{"type":23,"value":351},{"type":17,"tag":287,"props":2446,"children":2447},{"class":354},[2448],{"type":23,"value":662},{"type":17,"tag":287,"props":2450,"children":2451},{"class":300},[2452],{"type":23,"value":781},{"type":17,"tag":287,"props":2454,"children":2455},{"class":294},[2456],{"type":23,"value":758},{"type":17,"tag":287,"props":2458,"children":2459},{"class":300},[2460],{"type":23,"value":2461}," num_controls ",{"type":17,"tag":287,"props":2463,"children":2464},{"class":294},[2465],{"type":23,"value":601},{"type":17,"tag":287,"props":2467,"children":2468},{"class":300},[2469],{"type":23,"value":2470}," prediction_horizons, ",{"type":17,"tag":287,"props":2472,"children":2473},{"class":354},[2474],{"type":23,"value":662},{"type":17,"tag":287,"props":2476,"children":2477},{"class":300},[2478],{"type":23,"value":2479},"))\n",{"type":17,"tag":287,"props":2481,"children":2482},{"class":289,"line":316},[2483,2488,2492,2496,2500,2504,2508,2512,2516,2520,2524,2528,2532,2536,2540,2544,2548],{"type":17,"tag":287,"props":2484,"children":2485},{"class":300},[2486],{"type":23,"value":2487},"ubx ",{"type":17,"tag":287,"props":2489,"children":2490},{"class":294},[2491],{"type":23,"value":346},{"type":17,"tag":287,"props":2493,"children":2494},{"class":300},[2495],{"type":23,"value":1696},{"type":17,"tag":287,"props":2497,"children":2498},{"class":354},[2499],{"type":23,"value":2422},{"type":17,"tag":287,"props":2501,"children":2502},{"class":300},[2503],{"type":23,"value":2427},{"type":17,"tag":287,"props":2505,"children":2506},{"class":294},[2507],{"type":23,"value":601},{"type":17,"tag":287,"props":2509,"children":2510},{"class":300},[2511],{"type":23,"value":2436},{"type":17,"tag":287,"props":2513,"children":2514},{"class":294},[2515],{"type":23,"value":758},{"type":17,"tag":287,"props":2517,"children":2518},{"class":300},[2519],{"type":23,"value":351},{"type":17,"tag":287,"props":2521,"children":2522},{"class":354},[2523],{"type":23,"value":662},{"type":17,"tag":287,"props":2525,"children":2526},{"class":300},[2527],{"type":23,"value":781},{"type":17,"tag":287,"props":2529,"children":2530},{"class":294},[2531],{"type":23,"value":758},{"type":17,"tag":287,"props":2533,"children":2534},{"class":300},[2535],{"type":23,"value":2461},{"type":17,"tag":287,"props":2537,"children":2538},{"class":294},[2539],{"type":23,"value":601},{"type":17,"tag":287,"props":2541,"children":2542},{"class":300},[2543],{"type":23,"value":2470},{"type":17,"tag":287,"props":2545,"children":2546},{"class":354},[2547],{"type":23,"value":662},{"type":17,"tag":287,"props":2549,"children":2550},{"class":300},[2551],{"type":23,"value":2479},{"type":17,"tag":287,"props":2553,"children":2554},{"class":289,"line":325},[2555],{"type":17,"tag":287,"props":2556,"children":2557},{},[2558],{"type":23,"value":322},{"type":17,"tag":287,"props":2560,"children":2561},{"class":289,"line":335},[2562,2567,2571,2576,2580,2584,2588,2592,2596,2601,2605],{"type":17,"tag":287,"props":2563,"children":2564},{"class":300},[2565],{"type":23,"value":2566},"lbx[",{"type":17,"tag":287,"props":2568,"children":2569},{"class":354},[2570],{"type":23,"value":591},{"type":17,"tag":287,"props":2572,"children":2573},{"class":300},[2574],{"type":23,"value":2575},": num_states ",{"type":17,"tag":287,"props":2577,"children":2578},{"class":294},[2579],{"type":23,"value":601},{"type":17,"tag":287,"props":2581,"children":2582},{"class":300},[2583],{"type":23,"value":2436},{"type":17,"tag":287,"props":2585,"children":2586},{"class":294},[2587],{"type":23,"value":758},{"type":17,"tag":287,"props":2589,"children":2590},{"class":300},[2591],{"type":23,"value":351},{"type":17,"tag":287,"props":2593,"children":2594},{"class":354},[2595],{"type":23,"value":662},{"type":17,"tag":287,"props":2597,"children":2598},{"class":300},[2599],{"type":23,"value":2600},"): num_states] ",{"type":17,"tag":287,"props":2602,"children":2603},{"class":294},[2604],{"type":23,"value":346},{"type":17,"tag":287,"props":2606,"children":2607},{"class":300},[2608],{"type":23,"value":2609}," x_min\n",{"type":17,"tag":287,"props":2611,"children":2612},{"class":289,"line":360},[2613,2617,2621,2625,2629,2633,2637,2641,2645,2649,2653],{"type":17,"tag":287,"props":2614,"children":2615},{"class":300},[2616],{"type":23,"value":2566},{"type":17,"tag":287,"props":2618,"children":2619},{"class":354},[2620],{"type":23,"value":662},{"type":17,"tag":287,"props":2622,"children":2623},{"class":300},[2624],{"type":23,"value":2575},{"type":17,"tag":287,"props":2626,"children":2627},{"class":294},[2628],{"type":23,"value":601},{"type":17,"tag":287,"props":2630,"children":2631},{"class":300},[2632],{"type":23,"value":2436},{"type":17,"tag":287,"props":2634,"children":2635},{"class":294},[2636],{"type":23,"value":758},{"type":17,"tag":287,"props":2638,"children":2639},{"class":300},[2640],{"type":23,"value":351},{"type":17,"tag":287,"props":2642,"children":2643},{"class":354},[2644],{"type":23,"value":662},{"type":17,"tag":287,"props":2646,"children":2647},{"class":300},[2648],{"type":23,"value":2600},{"type":17,"tag":287,"props":2650,"children":2651},{"class":294},[2652],{"type":23,"value":346},{"type":17,"tag":287,"props":2654,"children":2655},{"class":300},[2656],{"type":23,"value":2657}," y_min\n",{"type":17,"tag":287,"props":2659,"children":2660},{"class":289,"line":369},[2661,2665,2669,2673,2677,2681,2685,2689,2693,2697,2701],{"type":17,"tag":287,"props":2662,"children":2663},{"class":300},[2664],{"type":23,"value":2566},{"type":17,"tag":287,"props":2666,"children":2667},{"class":354},[2668],{"type":23,"value":611},{"type":17,"tag":287,"props":2670,"children":2671},{"class":300},[2672],{"type":23,"value":2575},{"type":17,"tag":287,"props":2674,"children":2675},{"class":294},[2676],{"type":23,"value":601},{"type":17,"tag":287,"props":2678,"children":2679},{"class":300},[2680],{"type":23,"value":2436},{"type":17,"tag":287,"props":2682,"children":2683},{"class":294},[2684],{"type":23,"value":758},{"type":17,"tag":287,"props":2686,"children":2687},{"class":300},[2688],{"type":23,"value":351},{"type":17,"tag":287,"props":2690,"children":2691},{"class":354},[2692],{"type":23,"value":662},{"type":17,"tag":287,"props":2694,"children":2695},{"class":300},[2696],{"type":23,"value":2600},{"type":17,"tag":287,"props":2698,"children":2699},{"class":294},[2700],{"type":23,"value":346},{"type":17,"tag":287,"props":2702,"children":2703},{"class":300},[2704],{"type":23,"value":2705}," theta_min\n",{"type":17,"tag":287,"props":2707,"children":2708},{"class":289,"line":391},[2709],{"type":17,"tag":287,"props":2710,"children":2711},{},[2712],{"type":23,"value":322},{"type":17,"tag":287,"props":2714,"children":2715},{"class":289,"line":400},[2716,2721,2725,2729,2733,2737,2741,2745,2749,2753,2757],{"type":17,"tag":287,"props":2717,"children":2718},{"class":300},[2719],{"type":23,"value":2720},"ubx[",{"type":17,"tag":287,"props":2722,"children":2723},{"class":354},[2724],{"type":23,"value":591},{"type":17,"tag":287,"props":2726,"children":2727},{"class":300},[2728],{"type":23,"value":2575},{"type":17,"tag":287,"props":2730,"children":2731},{"class":294},[2732],{"type":23,"value":601},{"type":17,"tag":287,"props":2734,"children":2735},{"class":300},[2736],{"type":23,"value":2436},{"type":17,"tag":287,"props":2738,"children":2739},{"class":294},[2740],{"type":23,"value":758},{"type":17,"tag":287,"props":2742,"children":2743},{"class":300},[2744],{"type":23,"value":351},{"type":17,"tag":287,"props":2746,"children":2747},{"class":354},[2748],{"type":23,"value":662},{"type":17,"tag":287,"props":2750,"children":2751},{"class":300},[2752],{"type":23,"value":2600},{"type":17,"tag":287,"props":2754,"children":2755},{"class":294},[2756],{"type":23,"value":346},{"type":17,"tag":287,"props":2758,"children":2759},{"class":300},[2760],{"type":23,"value":2761}," x_max\n",{"type":17,"tag":287,"props":2763,"children":2764},{"class":289,"line":422},[2765,2769,2773,2777,2781,2785,2789,2793,2797,2801,2805],{"type":17,"tag":287,"props":2766,"children":2767},{"class":300},[2768],{"type":23,"value":2720},{"type":17,"tag":287,"props":2770,"children":2771},{"class":354},[2772],{"type":23,"value":662},{"type":17,"tag":287,"props":2774,"children":2775},{"class":300},[2776],{"type":23,"value":2575},{"type":17,"tag":287,"props":2778,"children":2779},{"class":294},[2780],{"type":23,"value":601},{"type":17,"tag":287,"props":2782,"children":2783},{"class":300},[2784],{"type":23,"value":2436},{"type":17,"tag":287,"props":2786,"children":2787},{"class":294},[2788],{"type":23,"value":758},{"type":17,"tag":287,"props":2790,"children":2791},{"class":300},[2792],{"type":23,"value":351},{"type":17,"tag":287,"props":2794,"children":2795},{"class":354},[2796],{"type":23,"value":662},{"type":17,"tag":287,"props":2798,"children":2799},{"class":300},[2800],{"type":23,"value":2600},{"type":17,"tag":287,"props":2802,"children":2803},{"class":294},[2804],{"type":23,"value":346},{"type":17,"tag":287,"props":2806,"children":2807},{"class":300},[2808],{"type":23,"value":2809}," y_max\n",{"type":17,"tag":287,"props":2811,"children":2812},{"class":289,"line":443},[2813,2817,2821,2825,2829,2833,2837,2841,2845,2849,2853],{"type":17,"tag":287,"props":2814,"children":2815},{"class":300},[2816],{"type":23,"value":2720},{"type":17,"tag":287,"props":2818,"children":2819},{"class":354},[2820],{"type":23,"value":611},{"type":17,"tag":287,"props":2822,"children":2823},{"class":300},[2824],{"type":23,"value":2575},{"type":17,"tag":287,"props":2826,"children":2827},{"class":294},[2828],{"type":23,"value":601},{"type":17,"tag":287,"props":2830,"children":2831},{"class":300},[2832],{"type":23,"value":2436},{"type":17,"tag":287,"props":2834,"children":2835},{"class":294},[2836],{"type":23,"value":758},{"type":17,"tag":287,"props":2838,"children":2839},{"class":300},[2840],{"type":23,"value":351},{"type":17,"tag":287,"props":2842,"children":2843},{"class":354},[2844],{"type":23,"value":662},{"type":17,"tag":287,"props":2846,"children":2847},{"class":300},[2848],{"type":23,"value":2600},{"type":17,"tag":287,"props":2850,"children":2851},{"class":294},[2852],{"type":23,"value":346},{"type":17,"tag":287,"props":2854,"children":2855},{"class":300},[2856],{"type":23,"value":2857}," theta_max\n",{"type":17,"tag":287,"props":2859,"children":2860},{"class":289,"line":464},[2861],{"type":17,"tag":287,"props":2862,"children":2863},{},[2864],{"type":23,"value":322},{"type":17,"tag":287,"props":2866,"children":2867},{"class":289,"line":473},[2868,2873,2877,2881,2885,2889,2893,2898,2902,2906,2910,2914,2918,2922,2926,2930,2934,2939,2943],{"type":17,"tag":287,"props":2869,"children":2870},{"class":300},[2871],{"type":23,"value":2872},"lbx[num_states ",{"type":17,"tag":287,"props":2874,"children":2875},{"class":294},[2876],{"type":23,"value":601},{"type":17,"tag":287,"props":2878,"children":2879},{"class":300},[2880],{"type":23,"value":2436},{"type":17,"tag":287,"props":2882,"children":2883},{"class":294},[2884],{"type":23,"value":758},{"type":17,"tag":287,"props":2886,"children":2887},{"class":300},[2888],{"type":23,"value":351},{"type":17,"tag":287,"props":2890,"children":2891},{"class":354},[2892],{"type":23,"value":662},{"type":17,"tag":287,"props":2894,"children":2895},{"class":300},[2896],{"type":23,"value":2897},"): num_states ",{"type":17,"tag":287,"props":2899,"children":2900},{"class":294},[2901],{"type":23,"value":601},{"type":17,"tag":287,"props":2903,"children":2904},{"class":300},[2905],{"type":23,"value":2436},{"type":17,"tag":287,"props":2907,"children":2908},{"class":294},[2909],{"type":23,"value":758},{"type":17,"tag":287,"props":2911,"children":2912},{"class":300},[2913],{"type":23,"value":351},{"type":17,"tag":287,"props":2915,"children":2916},{"class":354},[2917],{"type":23,"value":662},{"type":17,"tag":287,"props":2919,"children":2920},{"class":300},[2921],{"type":23,"value":781},{"type":17,"tag":287,"props":2923,"children":2924},{"class":294},[2925],{"type":23,"value":758},{"type":17,"tag":287,"props":2927,"children":2928},{"class":300},[2929],{"type":23,"value":2461},{"type":17,"tag":287,"props":2931,"children":2932},{"class":294},[2933],{"type":23,"value":601},{"type":17,"tag":287,"props":2935,"children":2936},{"class":300},[2937],{"type":23,"value":2938}," prediction_horizons: num_controls] ",{"type":17,"tag":287,"props":2940,"children":2941},{"class":294},[2942],{"type":23,"value":346},{"type":17,"tag":287,"props":2944,"children":2945},{"class":300},[2946],{"type":23,"value":2947}," u_min\n",{"type":17,"tag":287,"props":2949,"children":2950},{"class":289,"line":504},[2951,2955,2959,2963,2967,2971,2975,2979,2983,2987,2991,2995,2999,3003,3007,3011,3015,3019,3023,3027,3031,3035,3039],{"type":17,"tag":287,"props":2952,"children":2953},{"class":300},[2954],{"type":23,"value":2872},{"type":17,"tag":287,"props":2956,"children":2957},{"class":294},[2958],{"type":23,"value":601},{"type":17,"tag":287,"props":2960,"children":2961},{"class":300},[2962],{"type":23,"value":2436},{"type":17,"tag":287,"props":2964,"children":2965},{"class":294},[2966],{"type":23,"value":758},{"type":17,"tag":287,"props":2968,"children":2969},{"class":300},[2970],{"type":23,"value":351},{"type":17,"tag":287,"props":2972,"children":2973},{"class":354},[2974],{"type":23,"value":662},{"type":17,"tag":287,"props":2976,"children":2977},{"class":300},[2978],{"type":23,"value":781},{"type":17,"tag":287,"props":2980,"children":2981},{"class":294},[2982],{"type":23,"value":758},{"type":17,"tag":287,"props":2984,"children":2985},{"class":300},[2986],{"type":23,"value":351},{"type":17,"tag":287,"props":2988,"children":2989},{"class":354},[2990],{"type":23,"value":662},{"type":17,"tag":287,"props":2992,"children":2993},{"class":300},[2994],{"type":23,"value":2575},{"type":17,"tag":287,"props":2996,"children":2997},{"class":294},[2998],{"type":23,"value":601},{"type":17,"tag":287,"props":3000,"children":3001},{"class":300},[3002],{"type":23,"value":2436},{"type":17,"tag":287,"props":3004,"children":3005},{"class":294},[3006],{"type":23,"value":758},{"type":17,"tag":287,"props":3008,"children":3009},{"class":300},[3010],{"type":23,"value":351},{"type":17,"tag":287,"props":3012,"children":3013},{"class":354},[3014],{"type":23,"value":662},{"type":17,"tag":287,"props":3016,"children":3017},{"class":300},[3018],{"type":23,"value":781},{"type":17,"tag":287,"props":3020,"children":3021},{"class":294},[3022],{"type":23,"value":758},{"type":17,"tag":287,"props":3024,"children":3025},{"class":300},[3026],{"type":23,"value":2461},{"type":17,"tag":287,"props":3028,"children":3029},{"class":294},[3030],{"type":23,"value":601},{"type":17,"tag":287,"props":3032,"children":3033},{"class":300},[3034],{"type":23,"value":2938},{"type":17,"tag":287,"props":3036,"children":3037},{"class":294},[3038],{"type":23,"value":346},{"type":17,"tag":287,"props":3040,"children":3041},{"class":300},[3042],{"type":23,"value":2947},{"type":17,"tag":287,"props":3044,"children":3045},{"class":289,"line":535},[3046],{"type":17,"tag":287,"props":3047,"children":3048},{},[3049],{"type":23,"value":322},{"type":17,"tag":287,"props":3051,"children":3052},{"class":289,"line":544},[3053,3058,3062,3066,3070,3074,3078,3082,3086,3090,3094,3098,3102,3106,3110,3114,3118,3122,3126],{"type":17,"tag":287,"props":3054,"children":3055},{"class":300},[3056],{"type":23,"value":3057},"ubx[num_states ",{"type":17,"tag":287,"props":3059,"children":3060},{"class":294},[3061],{"type":23,"value":601},{"type":17,"tag":287,"props":3063,"children":3064},{"class":300},[3065],{"type":23,"value":2436},{"type":17,"tag":287,"props":3067,"children":3068},{"class":294},[3069],{"type":23,"value":758},{"type":17,"tag":287,"props":3071,"children":3072},{"class":300},[3073],{"type":23,"value":351},{"type":17,"tag":287,"props":3075,"children":3076},{"class":354},[3077],{"type":23,"value":662},{"type":17,"tag":287,"props":3079,"children":3080},{"class":300},[3081],{"type":23,"value":2897},{"type":17,"tag":287,"props":3083,"children":3084},{"class":294},[3085],{"type":23,"value":601},{"type":17,"tag":287,"props":3087,"children":3088},{"class":300},[3089],{"type":23,"value":2436},{"type":17,"tag":287,"props":3091,"children":3092},{"class":294},[3093],{"type":23,"value":758},{"type":17,"tag":287,"props":3095,"children":3096},{"class":300},[3097],{"type":23,"value":351},{"type":17,"tag":287,"props":3099,"children":3100},{"class":354},[3101],{"type":23,"value":662},{"type":17,"tag":287,"props":3103,"children":3104},{"class":300},[3105],{"type":23,"value":781},{"type":17,"tag":287,"props":3107,"children":3108},{"class":294},[3109],{"type":23,"value":758},{"type":17,"tag":287,"props":3111,"children":3112},{"class":300},[3113],{"type":23,"value":2461},{"type":17,"tag":287,"props":3115,"children":3116},{"class":294},[3117],{"type":23,"value":601},{"type":17,"tag":287,"props":3119,"children":3120},{"class":300},[3121],{"type":23,"value":2938},{"type":17,"tag":287,"props":3123,"children":3124},{"class":294},[3125],{"type":23,"value":346},{"type":17,"tag":287,"props":3127,"children":3128},{"class":300},[3129],{"type":23,"value":3130}," u_max\n",{"type":17,"tag":287,"props":3132,"children":3133},{"class":289,"line":553},[3134,3138,3142,3146,3150,3154,3158,3162,3166,3170,3174,3178,3182,3186,3190,3194,3198,3202,3206,3210,3214,3218,3222],{"type":17,"tag":287,"props":3135,"children":3136},{"class":300},[3137],{"type":23,"value":3057},{"type":17,"tag":287,"props":3139,"children":3140},{"class":294},[3141],{"type":23,"value":601},{"type":17,"tag":287,"props":3143,"children":3144},{"class":300},[3145],{"type":23,"value":2436},{"type":17,"tag":287,"props":3147,"children":3148},{"class":294},[3149],{"type":23,"value":758},{"type":17,"tag":287,"props":3151,"children":3152},{"class":300},[3153],{"type":23,"value":351},{"type":17,"tag":287,"props":3155,"children":3156},{"class":354},[3157],{"type":23,"value":662},{"type":17,"tag":287,"props":3159,"children":3160},{"class":300},[3161],{"type":23,"value":781},{"type":17,"tag":287,"props":3163,"children":3164},{"class":294},[3165],{"type":23,"value":758},{"type":17,"tag":287,"props":3167,"children":3168},{"class":300},[3169],{"type":23,"value":351},{"type":17,"tag":287,"props":3171,"children":3172},{"class":354},[3173],{"type":23,"value":662},{"type":17,"tag":287,"props":3175,"children":3176},{"class":300},[3177],{"type":23,"value":2575},{"type":17,"tag":287,"props":3179,"children":3180},{"class":294},[3181],{"type":23,"value":601},{"type":17,"tag":287,"props":3183,"children":3184},{"class":300},[3185],{"type":23,"value":2436},{"type":17,"tag":287,"props":3187,"children":3188},{"class":294},[3189],{"type":23,"value":758},{"type":17,"tag":287,"props":3191,"children":3192},{"class":300},[3193],{"type":23,"value":351},{"type":17,"tag":287,"props":3195,"children":3196},{"class":354},[3197],{"type":23,"value":662},{"type":17,"tag":287,"props":3199,"children":3200},{"class":300},[3201],{"type":23,"value":781},{"type":17,"tag":287,"props":3203,"children":3204},{"class":294},[3205],{"type":23,"value":758},{"type":17,"tag":287,"props":3207,"children":3208},{"class":300},[3209],{"type":23,"value":2461},{"type":17,"tag":287,"props":3211,"children":3212},{"class":294},[3213],{"type":23,"value":601},{"type":17,"tag":287,"props":3215,"children":3216},{"class":300},[3217],{"type":23,"value":2938},{"type":17,"tag":287,"props":3219,"children":3220},{"class":294},[3221],{"type":23,"value":346},{"type":17,"tag":287,"props":3223,"children":3224},{"class":300},[3225],{"type":23,"value":3130},{"type":17,"tag":287,"props":3227,"children":3228},{"class":289,"line":580},[3229],{"type":17,"tag":287,"props":3230,"children":3231},{},[3232],{"type":23,"value":322},{"type":17,"tag":287,"props":3234,"children":3235},{"class":289,"line":619},[3236,3241,3245],{"type":17,"tag":287,"props":3237,"children":3238},{"class":300},[3239],{"type":23,"value":3240},"args ",{"type":17,"tag":287,"props":3242,"children":3243},{"class":294},[3244],{"type":23,"value":346},{"type":17,"tag":287,"props":3246,"children":3247},{"class":300},[3248],{"type":23,"value":3249}," {\n",{"type":17,"tag":287,"props":3251,"children":3252},{"class":289,"line":652},[3253,3257,3262,3267,3271,3275,3279,3283,3287,3291,3295,3300,3304],{"type":17,"tag":287,"props":3254,"children":3255},{"class":300},[3256],{"type":23,"value":1127},{"type":17,"tag":287,"props":3258,"children":3259},{"class":1709},[3260],{"type":23,"value":3261},"'lbg'",{"type":17,"tag":287,"props":3263,"children":3264},{"class":300},[3265],{"type":23,"value":3266},": ca.",{"type":17,"tag":287,"props":3268,"children":3269},{"class":354},[3270],{"type":23,"value":2422},{"type":17,"tag":287,"props":3272,"children":3273},{"class":300},[3274],{"type":23,"value":2427},{"type":17,"tag":287,"props":3276,"children":3277},{"class":294},[3278],{"type":23,"value":601},{"type":17,"tag":287,"props":3280,"children":3281},{"class":300},[3282],{"type":23,"value":2436},{"type":17,"tag":287,"props":3284,"children":3285},{"class":294},[3286],{"type":23,"value":758},{"type":17,"tag":287,"props":3288,"children":3289},{"class":300},[3290],{"type":23,"value":351},{"type":17,"tag":287,"props":3292,"children":3293},{"class":354},[3294],{"type":23,"value":662},{"type":17,"tag":287,"props":3296,"children":3297},{"class":300},[3298],{"type":23,"value":3299},"), ",{"type":17,"tag":287,"props":3301,"children":3302},{"class":354},[3303],{"type":23,"value":662},{"type":17,"tag":287,"props":3305,"children":3306},{"class":300},[3307],{"type":23,"value":3308},")),\n",{"type":17,"tag":287,"props":3310,"children":3311},{"class":289,"line":670},[3312,3316,3321,3325,3329,3333,3337,3341,3345,3349,3353,3357,3361],{"type":17,"tag":287,"props":3313,"children":3314},{"class":300},[3315],{"type":23,"value":1127},{"type":17,"tag":287,"props":3317,"children":3318},{"class":1709},[3319],{"type":23,"value":3320},"'ubg'",{"type":17,"tag":287,"props":3322,"children":3323},{"class":300},[3324],{"type":23,"value":3266},{"type":17,"tag":287,"props":3326,"children":3327},{"class":354},[3328],{"type":23,"value":2422},{"type":17,"tag":287,"props":3330,"children":3331},{"class":300},[3332],{"type":23,"value":2427},{"type":17,"tag":287,"props":3334,"children":3335},{"class":294},[3336],{"type":23,"value":601},{"type":17,"tag":287,"props":3338,"children":3339},{"class":300},[3340],{"type":23,"value":2436},{"type":17,"tag":287,"props":3342,"children":3343},{"class":294},[3344],{"type":23,"value":758},{"type":17,"tag":287,"props":3346,"children":3347},{"class":300},[3348],{"type":23,"value":351},{"type":17,"tag":287,"props":3350,"children":3351},{"class":354},[3352],{"type":23,"value":662},{"type":17,"tag":287,"props":3354,"children":3355},{"class":300},[3356],{"type":23,"value":3299},{"type":17,"tag":287,"props":3358,"children":3359},{"class":354},[3360],{"type":23,"value":662},{"type":17,"tag":287,"props":3362,"children":3363},{"class":300},[3364],{"type":23,"value":3308},{"type":17,"tag":287,"props":3366,"children":3367},{"class":289,"line":679},[3368,3372,3377],{"type":17,"tag":287,"props":3369,"children":3370},{"class":300},[3371],{"type":23,"value":1127},{"type":17,"tag":287,"props":3373,"children":3374},{"class":1709},[3375],{"type":23,"value":3376},"'lbx'",{"type":17,"tag":287,"props":3378,"children":3379},{"class":300},[3380],{"type":23,"value":3381},": lbx,\n",{"type":17,"tag":287,"props":3383,"children":3384},{"class":289,"line":687},[3385,3389,3394],{"type":17,"tag":287,"props":3386,"children":3387},{"class":300},[3388],{"type":23,"value":1127},{"type":17,"tag":287,"props":3390,"children":3391},{"class":1709},[3392],{"type":23,"value":3393},"'ubx'",{"type":17,"tag":287,"props":3395,"children":3396},{"class":300},[3397],{"type":23,"value":3398},": ubx\n",{"type":17,"tag":287,"props":3400,"children":3401},{"class":289,"line":720},[3402],{"type":17,"tag":287,"props":3403,"children":3404},{"class":300},[3405],{"type":23,"value":3406},"}",{"type":17,"tag":26,"props":3408,"children":3409},{},[3410],{"type":23,"value":3411},"Obtain the solution from the solver at eact iteration",{"type":17,"tag":272,"props":3413,"children":3416},{"className":3414,"code":3415,"language":277,"meta":7},[275],"sol = solver(\n            x0=args['x0'],\n            p=args['p'],\n            lbx=args['lbx'],\n            ubx=args['ubx'],\n            lbg=args['lbg'],\n            ubg=args['ubg'],\n        )\n\n        sol_x = ca.reshape(sol['x'][:num_states * (prediction_horizons + 1)], 3, prediction_horizons + 1)\n        sol_u = ca.reshape(sol['x'][num_states * (prediction_horizons + 1):], 2, prediction_horizons)\n",[3417],{"type":17,"tag":280,"props":3418,"children":3419},{},[3420],{"type":17,"tag":272,"props":3421,"children":3422},{"__ignoreMap":7},[3423,3440,3473,3501,3529,3557,3585,3613,3621,3628,3706],{"type":17,"tag":287,"props":3424,"children":3425},{"class":289,"line":290},[3426,3431,3435],{"type":17,"tag":287,"props":3427,"children":3428},{"class":300},[3429],{"type":23,"value":3430},"sol ",{"type":17,"tag":287,"props":3432,"children":3433},{"class":294},[3434],{"type":23,"value":346},{"type":17,"tag":287,"props":3436,"children":3437},{"class":300},[3438],{"type":23,"value":3439}," solver(\n",{"type":17,"tag":287,"props":3441,"children":3442},{"class":289,"line":316},[3443,3448,3454,3458,3463,3468],{"type":17,"tag":287,"props":3444,"children":3445},{"class":300},[3446],{"type":23,"value":3447},"            ",{"type":17,"tag":287,"props":3449,"children":3451},{"class":3450},"ct-657843",[3452],{"type":23,"value":3453},"x0",{"type":17,"tag":287,"props":3455,"children":3456},{"class":294},[3457],{"type":23,"value":346},{"type":17,"tag":287,"props":3459,"children":3460},{"class":300},[3461],{"type":23,"value":3462},"args[",{"type":17,"tag":287,"props":3464,"children":3465},{"class":1709},[3466],{"type":23,"value":3467},"'x0'",{"type":17,"tag":287,"props":3469,"children":3470},{"class":300},[3471],{"type":23,"value":3472},"],\n",{"type":17,"tag":287,"props":3474,"children":3475},{"class":289,"line":325},[3476,3480,3484,3488,3492,3497],{"type":17,"tag":287,"props":3477,"children":3478},{"class":300},[3479],{"type":23,"value":3447},{"type":17,"tag":287,"props":3481,"children":3482},{"class":3450},[3483],{"type":23,"value":26},{"type":17,"tag":287,"props":3485,"children":3486},{"class":294},[3487],{"type":23,"value":346},{"type":17,"tag":287,"props":3489,"children":3490},{"class":300},[3491],{"type":23,"value":3462},{"type":17,"tag":287,"props":3493,"children":3494},{"class":1709},[3495],{"type":23,"value":3496},"'p'",{"type":17,"tag":287,"props":3498,"children":3499},{"class":300},[3500],{"type":23,"value":3472},{"type":17,"tag":287,"props":3502,"children":3503},{"class":289,"line":335},[3504,3508,3513,3517,3521,3525],{"type":17,"tag":287,"props":3505,"children":3506},{"class":300},[3507],{"type":23,"value":3447},{"type":17,"tag":287,"props":3509,"children":3510},{"class":3450},[3511],{"type":23,"value":3512},"lbx",{"type":17,"tag":287,"props":3514,"children":3515},{"class":294},[3516],{"type":23,"value":346},{"type":17,"tag":287,"props":3518,"children":3519},{"class":300},[3520],{"type":23,"value":3462},{"type":17,"tag":287,"props":3522,"children":3523},{"class":1709},[3524],{"type":23,"value":3376},{"type":17,"tag":287,"props":3526,"children":3527},{"class":300},[3528],{"type":23,"value":3472},{"type":17,"tag":287,"props":3530,"children":3531},{"class":289,"line":360},[3532,3536,3541,3545,3549,3553],{"type":17,"tag":287,"props":3533,"children":3534},{"class":300},[3535],{"type":23,"value":3447},{"type":17,"tag":287,"props":3537,"children":3538},{"class":3450},[3539],{"type":23,"value":3540},"ubx",{"type":17,"tag":287,"props":3542,"children":3543},{"class":294},[3544],{"type":23,"value":346},{"type":17,"tag":287,"props":3546,"children":3547},{"class":300},[3548],{"type":23,"value":3462},{"type":17,"tag":287,"props":3550,"children":3551},{"class":1709},[3552],{"type":23,"value":3393},{"type":17,"tag":287,"props":3554,"children":3555},{"class":300},[3556],{"type":23,"value":3472},{"type":17,"tag":287,"props":3558,"children":3559},{"class":289,"line":369},[3560,3564,3569,3573,3577,3581],{"type":17,"tag":287,"props":3561,"children":3562},{"class":300},[3563],{"type":23,"value":3447},{"type":17,"tag":287,"props":3565,"children":3566},{"class":3450},[3567],{"type":23,"value":3568},"lbg",{"type":17,"tag":287,"props":3570,"children":3571},{"class":294},[3572],{"type":23,"value":346},{"type":17,"tag":287,"props":3574,"children":3575},{"class":300},[3576],{"type":23,"value":3462},{"type":17,"tag":287,"props":3578,"children":3579},{"class":1709},[3580],{"type":23,"value":3261},{"type":17,"tag":287,"props":3582,"children":3583},{"class":300},[3584],{"type":23,"value":3472},{"type":17,"tag":287,"props":3586,"children":3587},{"class":289,"line":391},[3588,3592,3597,3601,3605,3609],{"type":17,"tag":287,"props":3589,"children":3590},{"class":300},[3591],{"type":23,"value":3447},{"type":17,"tag":287,"props":3593,"children":3594},{"class":3450},[3595],{"type":23,"value":3596},"ubg",{"type":17,"tag":287,"props":3598,"children":3599},{"class":294},[3600],{"type":23,"value":346},{"type":17,"tag":287,"props":3602,"children":3603},{"class":300},[3604],{"type":23,"value":3462},{"type":17,"tag":287,"props":3606,"children":3607},{"class":1709},[3608],{"type":23,"value":3320},{"type":17,"tag":287,"props":3610,"children":3611},{"class":300},[3612],{"type":23,"value":3472},{"type":17,"tag":287,"props":3614,"children":3615},{"class":289,"line":400},[3616],{"type":17,"tag":287,"props":3617,"children":3618},{"class":300},[3619],{"type":23,"value":3620},"        )\n",{"type":17,"tag":287,"props":3622,"children":3623},{"class":289,"line":422},[3624],{"type":17,"tag":287,"props":3625,"children":3626},{},[3627],{"type":23,"value":322},{"type":17,"tag":287,"props":3629,"children":3630},{"class":289,"line":443},[3631,3636,3640,3645,3650,3655,3659,3663,3667,3671,3675,3680,3685,3690,3694,3698,3702],{"type":17,"tag":287,"props":3632,"children":3633},{"class":300},[3634],{"type":23,"value":3635},"        sol_x ",{"type":17,"tag":287,"props":3637,"children":3638},{"class":294},[3639],{"type":23,"value":346},{"type":17,"tag":287,"props":3641,"children":3642},{"class":300},[3643],{"type":23,"value":3644}," ca.reshape(sol[",{"type":17,"tag":287,"props":3646,"children":3647},{"class":1709},[3648],{"type":23,"value":3649},"'x'",{"type":17,"tag":287,"props":3651,"children":3652},{"class":300},[3653],{"type":23,"value":3654},"][:num_states ",{"type":17,"tag":287,"props":3656,"children":3657},{"class":294},[3658],{"type":23,"value":601},{"type":17,"tag":287,"props":3660,"children":3661},{"class":300},[3662],{"type":23,"value":2436},{"type":17,"tag":287,"props":3664,"children":3665},{"class":294},[3666],{"type":23,"value":758},{"type":17,"tag":287,"props":3668,"children":3669},{"class":300},[3670],{"type":23,"value":351},{"type":17,"tag":287,"props":3672,"children":3673},{"class":354},[3674],{"type":23,"value":662},{"type":17,"tag":287,"props":3676,"children":3677},{"class":300},[3678],{"type":23,"value":3679},")], ",{"type":17,"tag":287,"props":3681,"children":3682},{"class":354},[3683],{"type":23,"value":3684},"3",{"type":17,"tag":287,"props":3686,"children":3687},{"class":300},[3688],{"type":23,"value":3689},", prediction_horizons ",{"type":17,"tag":287,"props":3691,"children":3692},{"class":294},[3693],{"type":23,"value":758},{"type":17,"tag":287,"props":3695,"children":3696},{"class":300},[3697],{"type":23,"value":351},{"type":17,"tag":287,"props":3699,"children":3700},{"class":354},[3701],{"type":23,"value":662},{"type":17,"tag":287,"props":3703,"children":3704},{"class":300},[3705],{"type":23,"value":1717},{"type":17,"tag":287,"props":3707,"children":3708},{"class":289,"line":464},[3709,3714,3718,3722,3726,3731,3735,3739,3743,3747,3751,3756,3760],{"type":17,"tag":287,"props":3710,"children":3711},{"class":300},[3712],{"type":23,"value":3713},"        sol_u ",{"type":17,"tag":287,"props":3715,"children":3716},{"class":294},[3717],{"type":23,"value":346},{"type":17,"tag":287,"props":3719,"children":3720},{"class":300},[3721],{"type":23,"value":3644},{"type":17,"tag":287,"props":3723,"children":3724},{"class":1709},[3725],{"type":23,"value":3649},{"type":17,"tag":287,"props":3727,"children":3728},{"class":300},[3729],{"type":23,"value":3730},"][num_states ",{"type":17,"tag":287,"props":3732,"children":3733},{"class":294},[3734],{"type":23,"value":601},{"type":17,"tag":287,"props":3736,"children":3737},{"class":300},[3738],{"type":23,"value":2436},{"type":17,"tag":287,"props":3740,"children":3741},{"class":294},[3742],{"type":23,"value":758},{"type":17,"tag":287,"props":3744,"children":3745},{"class":300},[3746],{"type":23,"value":351},{"type":17,"tag":287,"props":3748,"children":3749},{"class":354},[3750],{"type":23,"value":662},{"type":17,"tag":287,"props":3752,"children":3753},{"class":300},[3754],{"type":23,"value":3755},"):], ",{"type":17,"tag":287,"props":3757,"children":3758},{"class":354},[3759],{"type":23,"value":611},{"type":17,"tag":287,"props":3761,"children":3762},{"class":300},[3763],{"type":23,"value":3764},", prediction_horizons)",{"type":17,"tag":18,"props":3766,"children":3768},{"id":3767},"result",[3769],{"type":23,"value":3770},"Result",{"type":17,"tag":3772,"props":3773,"children":3778},"figure",{"className":3774},[3775,3776,3777],"mb-4","inline-block","max-w-sm",[3779,3781],{"type":23,"value":3780},"\n  ",{"type":17,"tag":42,"props":3782,"children":3785},{"className":3783,"src":3784,"width":46,"height":47},[45],"/topics/robotics/nmpc/diff_mpc.png",[],{"type":17,"tag":55,"props":3787,"children":3789},{"className":3788},[58,59,60,61],[3790],{"type":23,"value":3791},"\n    Plot of differential drive robot follow the circle trajectory !!!.\n",{"type":17,"tag":18,"props":3793,"children":3795},{"id":3794},"in-conclusion",[3796],{"type":23,"value":3797},"In conclusion",{"type":17,"tag":26,"props":3799,"children":3800},{},[3801],{"type":23,"value":3802},"In my opinion, I think MPC is suitable for the control system, since it can provide the significant control input that was predicted over the finite future of time. This can ensure the safety of the system and also can provide a quick look or reaction to the control action of the system too.",{"type":17,"tag":18,"props":3804,"children":3806},{"id":3805},"reference",[3807],{"type":23,"value":3808},"Reference",{"type":17,"tag":3810,"props":3811,"children":3812},"ol",{},[3813,3826],{"type":17,"tag":116,"props":3814,"children":3815},{},[3816,3818],{"type":23,"value":3817},"MPC-and-MHE-implementation-in-MATLAB-using-Casadi: ",{"type":17,"tag":3819,"props":3820,"children":3824},"a",{"href":3821,"rel":3822},"https://github.com/MMehrez/MPC-and-MHE-implementation-in-MATLAB-using-Casadi",[3823],"nofollow",[3825],{"type":23,"value":3821},{"type":17,"tag":116,"props":3827,"children":3828},{},[3829,3831],{"type":23,"value":3830},"CasAdi: ",{"type":17,"tag":3819,"props":3832,"children":3835},{"href":3833,"rel":3834},"https://web.casadi.org",[3823],[3836],{"type":23,"value":3833},{"type":17,"tag":3838,"children":3839},"style",[3840],{"type":23,"value":3841},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-326375{color:#6A737D;}\n.ct-533739{color:#79B8FF;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":7,"searchDepth":316,"depth":316,"links":3843},[3844,3845,3846,3847,3848,3849,3850,3851,3852],{"id":20,"depth":316,"text":24},{"id":67,"depth":316,"text":70},{"id":218,"depth":316,"text":221},{"id":1517,"depth":316,"text":1520},{"id":1560,"depth":316,"text":1563},{"id":1600,"depth":316,"text":1603},{"id":3767,"depth":316,"text":3770},{"id":3794,"depth":316,"text":3797},{"id":3805,"depth":316,"text":3808},"markdown","content:topics:robotics:nonlinear-mpc.md","content","topics/robotics/nonlinear-mpc.md","md",1694082075628]