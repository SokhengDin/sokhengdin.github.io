[{"data":1,"prerenderedAt":6436},["Reactive",2],{"topics/robotics":3},[4,4104,6030,6228],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":9,"description":10,"author":11,"slug":12,"tag":12,"img":13,"body":14,"_type":4099,"_id":4100,"_source":4101,"_file":4102,"_extension":4103},"/topics/robotics/nonlinear-mpc","robotics",false,"","Nonlinear Model Predictive Control","Introduction to Nonlinear Model Predictive Control","Din Sokheng","nonlinear-mpc","/topics/robotics/nmpc/predict_horizon.png",{"type":15,"children":16,"toc":4088},"root",[17,26,32,55,66,72,86,91,96,101,105,110,154,159,163,168,215,221,234,238,243,248,253,258,262,266,271,1515,1521,1526,1530,1534,1539,1543,1549,1554,1558,1571,1575,1579,1583,1589,1602,1634,1639,2172,2177,2355,2364,2620,2625,3639,3644,3995,4001,4006,4021,4027,4033,4038,4044,4083],{"type":18,"tag":19,"props":20,"children":22},"element","h2",{"id":21},"what-is-model-predictive-control",[23],{"type":24,"value":25},"text","What is Model Predictive Control ?",{"type":18,"tag":27,"props":28,"children":29},"p",{},[30],{"type":24,"value":31},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":18,"tag":33,"props":34,"children":41},"div",{"className":35},[36,37,38,39,40],"grid","grid-cols-2","space-x-10","justify-center","items-center",[42,50],{"type":18,"tag":43,"props":44,"children":49},"img",{"className":45,"src":13,"width":47,"height":48},[46],"mx-auto","600px","300px",[],{"type":18,"tag":43,"props":51,"children":54},{"className":52,"src":53,"width":47,"height":48},[46],"/topics/robotics/nmpc/set_points.png",[],{"type":18,"tag":56,"props":57,"children":63},"figcaption",{"className":58},[59,60,61,62],"text-center","text-sm","text-neutral-600","dark:text-neutral-400",[64],{"type":24,"value":65},"\n      A car with finite horizons prediction and set point prediction over finite horizons.\n",{"type":18,"tag":19,"props":67,"children":69},{"id":68},"nonlinear-model-predictive-control",[70],{"type":24,"value":71},"Nonlinear Model Predictive Control ?",{"type":18,"tag":27,"props":73,"children":74},{},[75,77,81,83],{"type":24,"value":76},"Nonlinear Model Predictive Control has the same basic core of its control algorithms. The different is about the mathematical solving over the system. ",{"type":18,"tag":78,"props":79,"children":80},"br",{},[],{"type":24,"value":82},"\nIn the real-life application, most of the system certainly nonlinear and it's more complex than linear model. Linear systems are mostly time-invariant, meaning that the response of the system input is time-independent. Nonlinear systems are time-varying meaning that the response of the system to any input is time-dependent.",{"type":18,"tag":78,"props":84,"children":85},{},[],{"type":18,"tag":27,"props":87,"children":88},{},[89],{"type":24,"value":90},"The system model can be represent as state-space model",{"type":18,"tag":92,"props":93,"children":95},"math-render-b",{"latex-express":94,"styles":59}," \\dot{X} = f(X,U) ",[],{"type":18,"tag":27,"props":97,"children":98},{},[99],{"type":24,"value":100},"Nonlinear Model Predictive Control also works by solving the quardratic cost subject to the nonlinear function over a future finite horizons. The quadractic cost can be define as",{"type":18,"tag":92,"props":102,"children":104},{"latex-express":103,"styles":59},"J(x,u) = \\displaystyle\\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})",[],{"type":18,"tag":27,"props":106,"children":107},{},[108],{"type":24,"value":109},"Notation",{"type":18,"tag":111,"props":112,"children":113},"ul",{},[114,127,136,145],{"type":18,"tag":115,"props":116,"children":117},"li",{},[118,125],{"type":18,"tag":119,"props":120,"children":124},"math-render",{"latex-express":121,"styles":122,"dist-cond":123},"X","inline-flex","false",[],{"type":24,"value":126}," is the state of the system. This shall be obtained from the optimiztion problem.",{"type":18,"tag":115,"props":128,"children":129},{},[130,134],{"type":18,"tag":119,"props":131,"children":133},{"latex-express":132,"styles":122,"dist-cond":123},"X_{ref}",[],{"type":24,"value":135}," is the reference state of the system or desired input state.",{"type":18,"tag":115,"props":137,"children":138},{},[139,143],{"type":18,"tag":119,"props":140,"children":142},{"latex-express":141,"styles":122,"dist-cond":123},"U",[],{"type":24,"value":144}," is the input control of the system. This is a solution obtained from the optimization problem.",{"type":18,"tag":115,"props":146,"children":147},{},[148,152],{"type":18,"tag":119,"props":149,"children":151},{"latex-express":150,"styles":122,"dist-cond":123},"U_{ref}",[],{"type":24,"value":153}," is the reference control of the system or desired input control.",{"type":18,"tag":27,"props":155,"children":156},{},[157],{"type":24,"value":158},"Rewrite the optimization of NMPC problem.",{"type":18,"tag":92,"props":160,"children":162},{"latex-express":161,"styles":59},"\n      \\begin{align*}\n            \\min_{u_{0}, u_{1}, ..., u_{N-1} } \\quad \\sum_{k=0}^{N-1}(X_{k, ref}-X_{k})^{T}&Q(X_{k, ref}-X_{k})+(U_{k,ref}-U_{k})^{T}R(U_{k,ref}-U_{k}) + \\phi(X_{N})\\\\\n            \\text{subject to} \\quad & x_{k+1} = f(x_k, u_k) \\quad \\text{(System dynamics)} \\\\\n            & g(x_k, x_k) \\leq 0 \\quad \\text{(State constraints)} \\\\\n            & h(x_k, x_k) \\leq 0 \\quad \\text{(Input constraints)} \\\\\n            & p(x_k) \\leq 0 \\quad \\text{(Path constraints)} \\\\\n            & x_0=x(0)  \\quad \\text{(Initial condition)}\n      \\end{align*}\n            ",[],{"type":18,"tag":27,"props":164,"children":165},{},[166],{"type":24,"value":167},"Which,",{"type":18,"tag":111,"props":169,"children":170},{},[171,180,189,198,206],{"type":18,"tag":115,"props":172,"children":173},{},[174,178],{"type":18,"tag":119,"props":175,"children":177},{"latex-express":176,"styles":122},"f",[],{"type":24,"value":179}," is the system dynamics model.",{"type":18,"tag":115,"props":181,"children":182},{},[183,187],{"type":18,"tag":119,"props":184,"children":186},{"latex-express":185,"styles":122},"g",[],{"type":24,"value":188}," is the state constraints of the system.",{"type":18,"tag":115,"props":190,"children":191},{},[192,196],{"type":18,"tag":119,"props":193,"children":195},{"latex-express":194,"styles":122},"h",[],{"type":24,"value":197}," is the input constraints of the system.",{"type":18,"tag":115,"props":199,"children":200},{},[201,204],{"type":18,"tag":119,"props":202,"children":203},{"latex-express":27,"styles":122},[],{"type":24,"value":205}," is the path constraint, it help to ensure the safety following path of our system.",{"type":18,"tag":115,"props":207,"children":208},{},[209,213],{"type":18,"tag":119,"props":210,"children":212},{"latex-express":211,"styles":122,"dist-cond":123},"\\phi(X_{N})",[],{"type":24,"value":214}," is the terminal cost of the system.",{"type":18,"tag":19,"props":216,"children":218},{"id":217},"discretize-the-system-model-with-runge-kutta-4th-order",[219],{"type":24,"value":220},"Discretize the system model with Runge-Kutta 4th order",{"type":18,"tag":27,"props":222,"children":223},{},[224,226,232],{"type":24,"value":225},"I will choose a simple system mode robot ",{"type":18,"tag":227,"props":228,"children":229},"strong",{},[230],{"type":24,"value":231}," DifferentialDrive ",{"type":24,"value":233},".\nThe forward kinematic equation",{"type":18,"tag":92,"props":235,"children":237},{"latex-express":236,"styles":59},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":239,"children":240},{},[241],{"type":24,"value":242},"State constraints are the restriction imposed on the state variable of the system. It helps our optimizer not to obtain the solution that is outside the boundary region and also ensure the system to always perform the minimal action control in any critical condition.",{"type":18,"tag":27,"props":244,"children":245},{},[246],{"type":24,"value":247},"We, then can do the approximation",{"type":18,"tag":92,"props":249,"children":252},{"latex-express":250,"styles":59,"dist-cond":251},"\n    \\begin{align*}\n        k_{1} &= f(x^{*}, u^{*}) \\\\\n        k_{2} &= f(x^{*}+k_{1}\\frac{dt}{2}, u^{*}) \\\\ \n        k_{3} &= f(x^{*}+k_{2}\\frac{dt}{2}, u^{*}) \\\\\n        k_{4} &= f(x^{*}+k_{3}dt, u^{*}) \\\\ \n        \\Rightarrow{x_{k+1} } &= x_{k} + (k_{1}+2k_{2}+2k_{3}+k_{4})\\frac{dt}{6}\n    \\end{align*}\n","true",[],{"type":18,"tag":27,"props":254,"children":255},{},[256],{"type":24,"value":257},"Let's evaluate it with our model.",{"type":18,"tag":92,"props":259,"children":261},{"latex-express":260,"styles":59},"\n      \\begin{align*}\n        k_{1} &= \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n        k_{2} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{3} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} \\\\\n        k_{4} &= \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix} \\\\\n    \\end{align*}\n      ",[],{"type":18,"tag":92,"props":263,"children":265},{"latex-express":264,"styles":59},"\n      \\Rightarrow{x_{k+1} } = x_{k} + \\left( \\begin{bmatrix} v^{*}\\cos{(\\theta)} \\\\ v^{*}\\sin{(\\theta)} \\\\ \\omega^{*}  \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{1})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{1})} \\\\ \\omega^{*} \\end{bmatrix} + 2 \\times \\begin{bmatrix} v^{*}\\cos{(\\theta + \\frac{dt}{2} \\times k_{2})} \\\\ v^{*}\\sin{(\\theta+ \\frac{dt}{2}\\times k_{2})} \\\\ \\omega^{*} \\end{bmatrix} + \\begin{bmatrix} v^{*}\\cos{(\\theta + dt \\times k_{3})} \\\\ v^{*}\\sin{(\\theta+ dt\\times k_{3})} \\\\ \\omega^{*}  \\end{bmatrix}   \\right) \\frac{dt}{6}\n",[],{"type":18,"tag":27,"props":267,"children":268},{},[269],{"type":24,"value":270},"How to implement it in Python ???",{"type":18,"tag":272,"props":273,"children":278},"code",{"className":274,"code":276,"language":277,"meta":8},[275],"language-python","import numpy as np\n\n## Define sampling time dt 100Hz\ndt = 0.01\n## Define the num steps for function approximation \nnum_steps = 100\n## Define initial states\nx = 0.0\ny = 0.0\nyaw = 0.0\n## Define input control\nv = 1.5 #m/s\nomega = 1.57 #rad/s\n## Define state represent model\n### define lambda function take variable x\nf = lambda x, u :  np.array([\n      [u[0]*np.cos(x[2])],\n      [u[0]*np.sin(x[2])],\n      [u[1]]\n])\n\nfor _ in range(num_steps):\n    k1 = f([x, y, yaw], [v, omega])\n    k2 = f([x + (dt / 2) * k1[0], y + (dt / 2) * k1[1], yaw + (dt / 2) * k1[2]], [v, omega])\n    k3 = f([x + (dt / 2) * k2[0], y + (dt / 2) * k2[1], yaw + (dt / 2) * k2[2]], [v, omega])\n    k4 = f([x + dt * k3[0], y + dt * k3[1], yaw + dt * k3[2]], [v, omega])\n\n    # Update state of the robot\n    x += (k1[0] + 2 * k2[0] + 2 * k3[0] + k4[0]) * dt / 6\n    y += (k1[1] + 2 * k2[1] + 2 * k3[1] + k4[1]) * dt / 6\n    yaw += (k1[2] + 2 * k2[2] + 2 * k3[2] + k4[2]) * dt / 6\n","python",[279],{"type":18,"tag":280,"props":281,"children":282},"pre",{},[283],{"type":18,"tag":272,"props":284,"children":285},{"__ignoreMap":8},[286,314,323,333,358,367,389,398,420,441,462,471,502,533,542,551,578,617,650,668,677,685,718,736,882,1020,1111,1119,1133,1264,1389],{"type":18,"tag":287,"props":288,"children":291},"span",{"class":289,"line":290},"line",1,[292,298,304,309],{"type":18,"tag":287,"props":293,"children":295},{"class":294},"ct-857441",[296],{"type":24,"value":297},"import",{"type":18,"tag":287,"props":299,"children":301},{"class":300},"ct-767297",[302],{"type":24,"value":303}," numpy ",{"type":18,"tag":287,"props":305,"children":306},{"class":294},[307],{"type":24,"value":308},"as",{"type":18,"tag":287,"props":310,"children":311},{"class":300},[312],{"type":24,"value":313}," np\n",{"type":18,"tag":287,"props":315,"children":317},{"class":289,"line":316},2,[318],{"type":18,"tag":287,"props":319,"children":320},{},[321],{"type":24,"value":322},"\n",{"type":18,"tag":287,"props":324,"children":326},{"class":289,"line":325},3,[327],{"type":18,"tag":287,"props":328,"children":330},{"class":329},"ct-326375",[331],{"type":24,"value":332},"## Define sampling time dt 100Hz\n",{"type":18,"tag":287,"props":334,"children":336},{"class":289,"line":335},4,[337,342,347,352],{"type":18,"tag":287,"props":338,"children":339},{"class":300},[340],{"type":24,"value":341},"dt ",{"type":18,"tag":287,"props":343,"children":344},{"class":294},[345],{"type":24,"value":346},"=",{"type":18,"tag":287,"props":348,"children":349},{"class":300},[350],{"type":24,"value":351}," ",{"type":18,"tag":287,"props":353,"children":355},{"class":354},"ct-533739",[356],{"type":24,"value":357},"0.01\n",{"type":18,"tag":287,"props":359,"children":361},{"class":289,"line":360},5,[362],{"type":18,"tag":287,"props":363,"children":364},{"class":329},[365],{"type":24,"value":366},"## Define the num steps for function approximation \n",{"type":18,"tag":287,"props":368,"children":370},{"class":289,"line":369},6,[371,376,380,384],{"type":18,"tag":287,"props":372,"children":373},{"class":300},[374],{"type":24,"value":375},"num_steps ",{"type":18,"tag":287,"props":377,"children":378},{"class":294},[379],{"type":24,"value":346},{"type":18,"tag":287,"props":381,"children":382},{"class":300},[383],{"type":24,"value":351},{"type":18,"tag":287,"props":385,"children":386},{"class":354},[387],{"type":24,"value":388},"100\n",{"type":18,"tag":287,"props":390,"children":392},{"class":289,"line":391},7,[393],{"type":18,"tag":287,"props":394,"children":395},{"class":329},[396],{"type":24,"value":397},"## Define initial states\n",{"type":18,"tag":287,"props":399,"children":401},{"class":289,"line":400},8,[402,407,411,415],{"type":18,"tag":287,"props":403,"children":404},{"class":300},[405],{"type":24,"value":406},"x ",{"type":18,"tag":287,"props":408,"children":409},{"class":294},[410],{"type":24,"value":346},{"type":18,"tag":287,"props":412,"children":413},{"class":300},[414],{"type":24,"value":351},{"type":18,"tag":287,"props":416,"children":417},{"class":354},[418],{"type":24,"value":419},"0.0\n",{"type":18,"tag":287,"props":421,"children":423},{"class":289,"line":422},9,[424,429,433,437],{"type":18,"tag":287,"props":425,"children":426},{"class":300},[427],{"type":24,"value":428},"y ",{"type":18,"tag":287,"props":430,"children":431},{"class":294},[432],{"type":24,"value":346},{"type":18,"tag":287,"props":434,"children":435},{"class":300},[436],{"type":24,"value":351},{"type":18,"tag":287,"props":438,"children":439},{"class":354},[440],{"type":24,"value":419},{"type":18,"tag":287,"props":442,"children":444},{"class":289,"line":443},10,[445,450,454,458],{"type":18,"tag":287,"props":446,"children":447},{"class":300},[448],{"type":24,"value":449},"yaw ",{"type":18,"tag":287,"props":451,"children":452},{"class":294},[453],{"type":24,"value":346},{"type":18,"tag":287,"props":455,"children":456},{"class":300},[457],{"type":24,"value":351},{"type":18,"tag":287,"props":459,"children":460},{"class":354},[461],{"type":24,"value":419},{"type":18,"tag":287,"props":463,"children":465},{"class":289,"line":464},11,[466],{"type":18,"tag":287,"props":467,"children":468},{"class":329},[469],{"type":24,"value":470},"## Define input control\n",{"type":18,"tag":287,"props":472,"children":474},{"class":289,"line":473},12,[475,480,484,488,493,497],{"type":18,"tag":287,"props":476,"children":477},{"class":300},[478],{"type":24,"value":479},"v ",{"type":18,"tag":287,"props":481,"children":482},{"class":294},[483],{"type":24,"value":346},{"type":18,"tag":287,"props":485,"children":486},{"class":300},[487],{"type":24,"value":351},{"type":18,"tag":287,"props":489,"children":490},{"class":354},[491],{"type":24,"value":492},"1.5",{"type":18,"tag":287,"props":494,"children":495},{"class":300},[496],{"type":24,"value":351},{"type":18,"tag":287,"props":498,"children":499},{"class":329},[500],{"type":24,"value":501},"#m/s\n",{"type":18,"tag":287,"props":503,"children":505},{"class":289,"line":504},13,[506,511,515,519,524,528],{"type":18,"tag":287,"props":507,"children":508},{"class":300},[509],{"type":24,"value":510},"omega ",{"type":18,"tag":287,"props":512,"children":513},{"class":294},[514],{"type":24,"value":346},{"type":18,"tag":287,"props":516,"children":517},{"class":300},[518],{"type":24,"value":351},{"type":18,"tag":287,"props":520,"children":521},{"class":354},[522],{"type":24,"value":523},"1.57",{"type":18,"tag":287,"props":525,"children":526},{"class":300},[527],{"type":24,"value":351},{"type":18,"tag":287,"props":529,"children":530},{"class":329},[531],{"type":24,"value":532},"#rad/s\n",{"type":18,"tag":287,"props":534,"children":536},{"class":289,"line":535},14,[537],{"type":18,"tag":287,"props":538,"children":539},{"class":329},[540],{"type":24,"value":541},"## Define state represent model\n",{"type":18,"tag":287,"props":543,"children":545},{"class":289,"line":544},15,[546],{"type":18,"tag":287,"props":547,"children":548},{"class":329},[549],{"type":24,"value":550},"### define lambda function take variable x\n",{"type":18,"tag":287,"props":552,"children":554},{"class":289,"line":553},16,[555,560,564,568,573],{"type":18,"tag":287,"props":556,"children":557},{"class":300},[558],{"type":24,"value":559},"f ",{"type":18,"tag":287,"props":561,"children":562},{"class":294},[563],{"type":24,"value":346},{"type":18,"tag":287,"props":565,"children":566},{"class":300},[567],{"type":24,"value":351},{"type":18,"tag":287,"props":569,"children":570},{"class":294},[571],{"type":24,"value":572},"lambda",{"type":18,"tag":287,"props":574,"children":575},{"class":300},[576],{"type":24,"value":577}," x, u :  np.array([\n",{"type":18,"tag":287,"props":579,"children":581},{"class":289,"line":580},17,[582,587,592,597,602,607,612],{"type":18,"tag":287,"props":583,"children":584},{"class":300},[585],{"type":24,"value":586},"      [u[",{"type":18,"tag":287,"props":588,"children":589},{"class":354},[590],{"type":24,"value":591},"0",{"type":18,"tag":287,"props":593,"children":594},{"class":300},[595],{"type":24,"value":596},"]",{"type":18,"tag":287,"props":598,"children":599},{"class":294},[600],{"type":24,"value":601},"*",{"type":18,"tag":287,"props":603,"children":604},{"class":300},[605],{"type":24,"value":606},"np.cos(x[",{"type":18,"tag":287,"props":608,"children":609},{"class":354},[610],{"type":24,"value":611},"2",{"type":18,"tag":287,"props":613,"children":614},{"class":300},[615],{"type":24,"value":616},"])],\n",{"type":18,"tag":287,"props":618,"children":620},{"class":289,"line":619},18,[621,625,629,633,637,642,646],{"type":18,"tag":287,"props":622,"children":623},{"class":300},[624],{"type":24,"value":586},{"type":18,"tag":287,"props":626,"children":627},{"class":354},[628],{"type":24,"value":591},{"type":18,"tag":287,"props":630,"children":631},{"class":300},[632],{"type":24,"value":596},{"type":18,"tag":287,"props":634,"children":635},{"class":294},[636],{"type":24,"value":601},{"type":18,"tag":287,"props":638,"children":639},{"class":300},[640],{"type":24,"value":641},"np.sin(x[",{"type":18,"tag":287,"props":643,"children":644},{"class":354},[645],{"type":24,"value":611},{"type":18,"tag":287,"props":647,"children":648},{"class":300},[649],{"type":24,"value":616},{"type":18,"tag":287,"props":651,"children":653},{"class":289,"line":652},19,[654,658,663],{"type":18,"tag":287,"props":655,"children":656},{"class":300},[657],{"type":24,"value":586},{"type":18,"tag":287,"props":659,"children":660},{"class":354},[661],{"type":24,"value":662},"1",{"type":18,"tag":287,"props":664,"children":665},{"class":300},[666],{"type":24,"value":667},"]]\n",{"type":18,"tag":287,"props":669,"children":671},{"class":289,"line":670},20,[672],{"type":18,"tag":287,"props":673,"children":674},{"class":300},[675],{"type":24,"value":676},"])\n",{"type":18,"tag":287,"props":678,"children":680},{"class":289,"line":679},21,[681],{"type":18,"tag":287,"props":682,"children":683},{},[684],{"type":24,"value":322},{"type":18,"tag":287,"props":686,"children":688},{"class":289,"line":687},22,[689,694,699,704,708,713],{"type":18,"tag":287,"props":690,"children":691},{"class":294},[692],{"type":24,"value":693},"for",{"type":18,"tag":287,"props":695,"children":696},{"class":300},[697],{"type":24,"value":698}," _ ",{"type":18,"tag":287,"props":700,"children":701},{"class":294},[702],{"type":24,"value":703},"in",{"type":18,"tag":287,"props":705,"children":706},{"class":300},[707],{"type":24,"value":351},{"type":18,"tag":287,"props":709,"children":710},{"class":354},[711],{"type":24,"value":712},"range",{"type":18,"tag":287,"props":714,"children":715},{"class":300},[716],{"type":24,"value":717},"(num_steps):\n",{"type":18,"tag":287,"props":719,"children":721},{"class":289,"line":720},23,[722,727,731],{"type":18,"tag":287,"props":723,"children":724},{"class":300},[725],{"type":24,"value":726},"    k1 ",{"type":18,"tag":287,"props":728,"children":729},{"class":294},[730],{"type":24,"value":346},{"type":18,"tag":287,"props":732,"children":733},{"class":300},[734],{"type":24,"value":735}," f([x, y, yaw], [v, omega])\n",{"type":18,"tag":287,"props":737,"children":739},{"class":289,"line":738},24,[740,745,749,754,759,764,769,773,777,782,786,791,795,800,804,808,812,816,820,824,828,832,836,841,845,849,853,857,861,865,869,873,877],{"type":18,"tag":287,"props":741,"children":742},{"class":300},[743],{"type":24,"value":744},"    k2 ",{"type":18,"tag":287,"props":746,"children":747},{"class":294},[748],{"type":24,"value":346},{"type":18,"tag":287,"props":750,"children":751},{"class":300},[752],{"type":24,"value":753}," f([x ",{"type":18,"tag":287,"props":755,"children":756},{"class":294},[757],{"type":24,"value":758},"+",{"type":18,"tag":287,"props":760,"children":761},{"class":300},[762],{"type":24,"value":763}," (dt ",{"type":18,"tag":287,"props":765,"children":766},{"class":294},[767],{"type":24,"value":768},"/",{"type":18,"tag":287,"props":770,"children":771},{"class":300},[772],{"type":24,"value":351},{"type":18,"tag":287,"props":774,"children":775},{"class":354},[776],{"type":24,"value":611},{"type":18,"tag":287,"props":778,"children":779},{"class":300},[780],{"type":24,"value":781},") ",{"type":18,"tag":287,"props":783,"children":784},{"class":294},[785],{"type":24,"value":601},{"type":18,"tag":287,"props":787,"children":788},{"class":300},[789],{"type":24,"value":790}," k1[",{"type":18,"tag":287,"props":792,"children":793},{"class":354},[794],{"type":24,"value":591},{"type":18,"tag":287,"props":796,"children":797},{"class":300},[798],{"type":24,"value":799},"], y ",{"type":18,"tag":287,"props":801,"children":802},{"class":294},[803],{"type":24,"value":758},{"type":18,"tag":287,"props":805,"children":806},{"class":300},[807],{"type":24,"value":763},{"type":18,"tag":287,"props":809,"children":810},{"class":294},[811],{"type":24,"value":768},{"type":18,"tag":287,"props":813,"children":814},{"class":300},[815],{"type":24,"value":351},{"type":18,"tag":287,"props":817,"children":818},{"class":354},[819],{"type":24,"value":611},{"type":18,"tag":287,"props":821,"children":822},{"class":300},[823],{"type":24,"value":781},{"type":18,"tag":287,"props":825,"children":826},{"class":294},[827],{"type":24,"value":601},{"type":18,"tag":287,"props":829,"children":830},{"class":300},[831],{"type":24,"value":790},{"type":18,"tag":287,"props":833,"children":834},{"class":354},[835],{"type":24,"value":662},{"type":18,"tag":287,"props":837,"children":838},{"class":300},[839],{"type":24,"value":840},"], yaw ",{"type":18,"tag":287,"props":842,"children":843},{"class":294},[844],{"type":24,"value":758},{"type":18,"tag":287,"props":846,"children":847},{"class":300},[848],{"type":24,"value":763},{"type":18,"tag":287,"props":850,"children":851},{"class":294},[852],{"type":24,"value":768},{"type":18,"tag":287,"props":854,"children":855},{"class":300},[856],{"type":24,"value":351},{"type":18,"tag":287,"props":858,"children":859},{"class":354},[860],{"type":24,"value":611},{"type":18,"tag":287,"props":862,"children":863},{"class":300},[864],{"type":24,"value":781},{"type":18,"tag":287,"props":866,"children":867},{"class":294},[868],{"type":24,"value":601},{"type":18,"tag":287,"props":870,"children":871},{"class":300},[872],{"type":24,"value":790},{"type":18,"tag":287,"props":874,"children":875},{"class":354},[876],{"type":24,"value":611},{"type":18,"tag":287,"props":878,"children":879},{"class":300},[880],{"type":24,"value":881},"]], [v, omega])\n",{"type":18,"tag":287,"props":883,"children":885},{"class":289,"line":884},25,[886,891,895,899,903,907,911,915,919,923,927,932,936,940,944,948,952,956,960,964,968,972,976,980,984,988,992,996,1000,1004,1008,1012,1016],{"type":18,"tag":287,"props":887,"children":888},{"class":300},[889],{"type":24,"value":890},"    k3 ",{"type":18,"tag":287,"props":892,"children":893},{"class":294},[894],{"type":24,"value":346},{"type":18,"tag":287,"props":896,"children":897},{"class":300},[898],{"type":24,"value":753},{"type":18,"tag":287,"props":900,"children":901},{"class":294},[902],{"type":24,"value":758},{"type":18,"tag":287,"props":904,"children":905},{"class":300},[906],{"type":24,"value":763},{"type":18,"tag":287,"props":908,"children":909},{"class":294},[910],{"type":24,"value":768},{"type":18,"tag":287,"props":912,"children":913},{"class":300},[914],{"type":24,"value":351},{"type":18,"tag":287,"props":916,"children":917},{"class":354},[918],{"type":24,"value":611},{"type":18,"tag":287,"props":920,"children":921},{"class":300},[922],{"type":24,"value":781},{"type":18,"tag":287,"props":924,"children":925},{"class":294},[926],{"type":24,"value":601},{"type":18,"tag":287,"props":928,"children":929},{"class":300},[930],{"type":24,"value":931}," k2[",{"type":18,"tag":287,"props":933,"children":934},{"class":354},[935],{"type":24,"value":591},{"type":18,"tag":287,"props":937,"children":938},{"class":300},[939],{"type":24,"value":799},{"type":18,"tag":287,"props":941,"children":942},{"class":294},[943],{"type":24,"value":758},{"type":18,"tag":287,"props":945,"children":946},{"class":300},[947],{"type":24,"value":763},{"type":18,"tag":287,"props":949,"children":950},{"class":294},[951],{"type":24,"value":768},{"type":18,"tag":287,"props":953,"children":954},{"class":300},[955],{"type":24,"value":351},{"type":18,"tag":287,"props":957,"children":958},{"class":354},[959],{"type":24,"value":611},{"type":18,"tag":287,"props":961,"children":962},{"class":300},[963],{"type":24,"value":781},{"type":18,"tag":287,"props":965,"children":966},{"class":294},[967],{"type":24,"value":601},{"type":18,"tag":287,"props":969,"children":970},{"class":300},[971],{"type":24,"value":931},{"type":18,"tag":287,"props":973,"children":974},{"class":354},[975],{"type":24,"value":662},{"type":18,"tag":287,"props":977,"children":978},{"class":300},[979],{"type":24,"value":840},{"type":18,"tag":287,"props":981,"children":982},{"class":294},[983],{"type":24,"value":758},{"type":18,"tag":287,"props":985,"children":986},{"class":300},[987],{"type":24,"value":763},{"type":18,"tag":287,"props":989,"children":990},{"class":294},[991],{"type":24,"value":768},{"type":18,"tag":287,"props":993,"children":994},{"class":300},[995],{"type":24,"value":351},{"type":18,"tag":287,"props":997,"children":998},{"class":354},[999],{"type":24,"value":611},{"type":18,"tag":287,"props":1001,"children":1002},{"class":300},[1003],{"type":24,"value":781},{"type":18,"tag":287,"props":1005,"children":1006},{"class":294},[1007],{"type":24,"value":601},{"type":18,"tag":287,"props":1009,"children":1010},{"class":300},[1011],{"type":24,"value":931},{"type":18,"tag":287,"props":1013,"children":1014},{"class":354},[1015],{"type":24,"value":611},{"type":18,"tag":287,"props":1017,"children":1018},{"class":300},[1019],{"type":24,"value":881},{"type":18,"tag":287,"props":1021,"children":1023},{"class":289,"line":1022},26,[1024,1029,1033,1037,1041,1046,1050,1055,1059,1063,1067,1071,1075,1079,1083,1087,1091,1095,1099,1103,1107],{"type":18,"tag":287,"props":1025,"children":1026},{"class":300},[1027],{"type":24,"value":1028},"    k4 ",{"type":18,"tag":287,"props":1030,"children":1031},{"class":294},[1032],{"type":24,"value":346},{"type":18,"tag":287,"props":1034,"children":1035},{"class":300},[1036],{"type":24,"value":753},{"type":18,"tag":287,"props":1038,"children":1039},{"class":294},[1040],{"type":24,"value":758},{"type":18,"tag":287,"props":1042,"children":1043},{"class":300},[1044],{"type":24,"value":1045}," dt ",{"type":18,"tag":287,"props":1047,"children":1048},{"class":294},[1049],{"type":24,"value":601},{"type":18,"tag":287,"props":1051,"children":1052},{"class":300},[1053],{"type":24,"value":1054}," k3[",{"type":18,"tag":287,"props":1056,"children":1057},{"class":354},[1058],{"type":24,"value":591},{"type":18,"tag":287,"props":1060,"children":1061},{"class":300},[1062],{"type":24,"value":799},{"type":18,"tag":287,"props":1064,"children":1065},{"class":294},[1066],{"type":24,"value":758},{"type":18,"tag":287,"props":1068,"children":1069},{"class":300},[1070],{"type":24,"value":1045},{"type":18,"tag":287,"props":1072,"children":1073},{"class":294},[1074],{"type":24,"value":601},{"type":18,"tag":287,"props":1076,"children":1077},{"class":300},[1078],{"type":24,"value":1054},{"type":18,"tag":287,"props":1080,"children":1081},{"class":354},[1082],{"type":24,"value":662},{"type":18,"tag":287,"props":1084,"children":1085},{"class":300},[1086],{"type":24,"value":840},{"type":18,"tag":287,"props":1088,"children":1089},{"class":294},[1090],{"type":24,"value":758},{"type":18,"tag":287,"props":1092,"children":1093},{"class":300},[1094],{"type":24,"value":1045},{"type":18,"tag":287,"props":1096,"children":1097},{"class":294},[1098],{"type":24,"value":601},{"type":18,"tag":287,"props":1100,"children":1101},{"class":300},[1102],{"type":24,"value":1054},{"type":18,"tag":287,"props":1104,"children":1105},{"class":354},[1106],{"type":24,"value":611},{"type":18,"tag":287,"props":1108,"children":1109},{"class":300},[1110],{"type":24,"value":881},{"type":18,"tag":287,"props":1112,"children":1114},{"class":289,"line":1113},27,[1115],{"type":18,"tag":287,"props":1116,"children":1117},{},[1118],{"type":24,"value":322},{"type":18,"tag":287,"props":1120,"children":1122},{"class":289,"line":1121},28,[1123,1128],{"type":18,"tag":287,"props":1124,"children":1125},{"class":300},[1126],{"type":24,"value":1127},"    ",{"type":18,"tag":287,"props":1129,"children":1130},{"class":329},[1131],{"type":24,"value":1132},"# Update state of the robot\n",{"type":18,"tag":287,"props":1134,"children":1136},{"class":289,"line":1135},29,[1137,1142,1147,1152,1156,1161,1165,1169,1173,1177,1181,1185,1189,1193,1197,1201,1205,1209,1213,1217,1221,1225,1229,1234,1238,1243,1247,1251,1255,1259],{"type":18,"tag":287,"props":1138,"children":1139},{"class":300},[1140],{"type":24,"value":1141},"    x ",{"type":18,"tag":287,"props":1143,"children":1144},{"class":294},[1145],{"type":24,"value":1146},"+=",{"type":18,"tag":287,"props":1148,"children":1149},{"class":300},[1150],{"type":24,"value":1151}," (k1[",{"type":18,"tag":287,"props":1153,"children":1154},{"class":354},[1155],{"type":24,"value":591},{"type":18,"tag":287,"props":1157,"children":1158},{"class":300},[1159],{"type":24,"value":1160},"] ",{"type":18,"tag":287,"props":1162,"children":1163},{"class":294},[1164],{"type":24,"value":758},{"type":18,"tag":287,"props":1166,"children":1167},{"class":300},[1168],{"type":24,"value":351},{"type":18,"tag":287,"props":1170,"children":1171},{"class":354},[1172],{"type":24,"value":611},{"type":18,"tag":287,"props":1174,"children":1175},{"class":300},[1176],{"type":24,"value":351},{"type":18,"tag":287,"props":1178,"children":1179},{"class":294},[1180],{"type":24,"value":601},{"type":18,"tag":287,"props":1182,"children":1183},{"class":300},[1184],{"type":24,"value":931},{"type":18,"tag":287,"props":1186,"children":1187},{"class":354},[1188],{"type":24,"value":591},{"type":18,"tag":287,"props":1190,"children":1191},{"class":300},[1192],{"type":24,"value":1160},{"type":18,"tag":287,"props":1194,"children":1195},{"class":294},[1196],{"type":24,"value":758},{"type":18,"tag":287,"props":1198,"children":1199},{"class":300},[1200],{"type":24,"value":351},{"type":18,"tag":287,"props":1202,"children":1203},{"class":354},[1204],{"type":24,"value":611},{"type":18,"tag":287,"props":1206,"children":1207},{"class":300},[1208],{"type":24,"value":351},{"type":18,"tag":287,"props":1210,"children":1211},{"class":294},[1212],{"type":24,"value":601},{"type":18,"tag":287,"props":1214,"children":1215},{"class":300},[1216],{"type":24,"value":1054},{"type":18,"tag":287,"props":1218,"children":1219},{"class":354},[1220],{"type":24,"value":591},{"type":18,"tag":287,"props":1222,"children":1223},{"class":300},[1224],{"type":24,"value":1160},{"type":18,"tag":287,"props":1226,"children":1227},{"class":294},[1228],{"type":24,"value":758},{"type":18,"tag":287,"props":1230,"children":1231},{"class":300},[1232],{"type":24,"value":1233}," k4[",{"type":18,"tag":287,"props":1235,"children":1236},{"class":354},[1237],{"type":24,"value":591},{"type":18,"tag":287,"props":1239,"children":1240},{"class":300},[1241],{"type":24,"value":1242},"]) ",{"type":18,"tag":287,"props":1244,"children":1245},{"class":294},[1246],{"type":24,"value":601},{"type":18,"tag":287,"props":1248,"children":1249},{"class":300},[1250],{"type":24,"value":1045},{"type":18,"tag":287,"props":1252,"children":1253},{"class":294},[1254],{"type":24,"value":768},{"type":18,"tag":287,"props":1256,"children":1257},{"class":300},[1258],{"type":24,"value":351},{"type":18,"tag":287,"props":1260,"children":1261},{"class":354},[1262],{"type":24,"value":1263},"6\n",{"type":18,"tag":287,"props":1265,"children":1267},{"class":289,"line":1266},30,[1268,1273,1277,1281,1285,1289,1293,1297,1301,1305,1309,1313,1317,1321,1325,1329,1333,1337,1341,1345,1349,1353,1357,1361,1365,1369,1373,1377,1381,1385],{"type":18,"tag":287,"props":1269,"children":1270},{"class":300},[1271],{"type":24,"value":1272},"    y ",{"type":18,"tag":287,"props":1274,"children":1275},{"class":294},[1276],{"type":24,"value":1146},{"type":18,"tag":287,"props":1278,"children":1279},{"class":300},[1280],{"type":24,"value":1151},{"type":18,"tag":287,"props":1282,"children":1283},{"class":354},[1284],{"type":24,"value":662},{"type":18,"tag":287,"props":1286,"children":1287},{"class":300},[1288],{"type":24,"value":1160},{"type":18,"tag":287,"props":1290,"children":1291},{"class":294},[1292],{"type":24,"value":758},{"type":18,"tag":287,"props":1294,"children":1295},{"class":300},[1296],{"type":24,"value":351},{"type":18,"tag":287,"props":1298,"children":1299},{"class":354},[1300],{"type":24,"value":611},{"type":18,"tag":287,"props":1302,"children":1303},{"class":300},[1304],{"type":24,"value":351},{"type":18,"tag":287,"props":1306,"children":1307},{"class":294},[1308],{"type":24,"value":601},{"type":18,"tag":287,"props":1310,"children":1311},{"class":300},[1312],{"type":24,"value":931},{"type":18,"tag":287,"props":1314,"children":1315},{"class":354},[1316],{"type":24,"value":662},{"type":18,"tag":287,"props":1318,"children":1319},{"class":300},[1320],{"type":24,"value":1160},{"type":18,"tag":287,"props":1322,"children":1323},{"class":294},[1324],{"type":24,"value":758},{"type":18,"tag":287,"props":1326,"children":1327},{"class":300},[1328],{"type":24,"value":351},{"type":18,"tag":287,"props":1330,"children":1331},{"class":354},[1332],{"type":24,"value":611},{"type":18,"tag":287,"props":1334,"children":1335},{"class":300},[1336],{"type":24,"value":351},{"type":18,"tag":287,"props":1338,"children":1339},{"class":294},[1340],{"type":24,"value":601},{"type":18,"tag":287,"props":1342,"children":1343},{"class":300},[1344],{"type":24,"value":1054},{"type":18,"tag":287,"props":1346,"children":1347},{"class":354},[1348],{"type":24,"value":662},{"type":18,"tag":287,"props":1350,"children":1351},{"class":300},[1352],{"type":24,"value":1160},{"type":18,"tag":287,"props":1354,"children":1355},{"class":294},[1356],{"type":24,"value":758},{"type":18,"tag":287,"props":1358,"children":1359},{"class":300},[1360],{"type":24,"value":1233},{"type":18,"tag":287,"props":1362,"children":1363},{"class":354},[1364],{"type":24,"value":662},{"type":18,"tag":287,"props":1366,"children":1367},{"class":300},[1368],{"type":24,"value":1242},{"type":18,"tag":287,"props":1370,"children":1371},{"class":294},[1372],{"type":24,"value":601},{"type":18,"tag":287,"props":1374,"children":1375},{"class":300},[1376],{"type":24,"value":1045},{"type":18,"tag":287,"props":1378,"children":1379},{"class":294},[1380],{"type":24,"value":768},{"type":18,"tag":287,"props":1382,"children":1383},{"class":300},[1384],{"type":24,"value":351},{"type":18,"tag":287,"props":1386,"children":1387},{"class":354},[1388],{"type":24,"value":1263},{"type":18,"tag":287,"props":1390,"children":1392},{"class":289,"line":1391},31,[1393,1398,1402,1406,1410,1414,1418,1422,1426,1430,1434,1438,1442,1446,1450,1454,1458,1462,1466,1470,1474,1478,1482,1486,1490,1494,1498,1502,1506,1510],{"type":18,"tag":287,"props":1394,"children":1395},{"class":300},[1396],{"type":24,"value":1397},"    yaw ",{"type":18,"tag":287,"props":1399,"children":1400},{"class":294},[1401],{"type":24,"value":1146},{"type":18,"tag":287,"props":1403,"children":1404},{"class":300},[1405],{"type":24,"value":1151},{"type":18,"tag":287,"props":1407,"children":1408},{"class":354},[1409],{"type":24,"value":611},{"type":18,"tag":287,"props":1411,"children":1412},{"class":300},[1413],{"type":24,"value":1160},{"type":18,"tag":287,"props":1415,"children":1416},{"class":294},[1417],{"type":24,"value":758},{"type":18,"tag":287,"props":1419,"children":1420},{"class":300},[1421],{"type":24,"value":351},{"type":18,"tag":287,"props":1423,"children":1424},{"class":354},[1425],{"type":24,"value":611},{"type":18,"tag":287,"props":1427,"children":1428},{"class":300},[1429],{"type":24,"value":351},{"type":18,"tag":287,"props":1431,"children":1432},{"class":294},[1433],{"type":24,"value":601},{"type":18,"tag":287,"props":1435,"children":1436},{"class":300},[1437],{"type":24,"value":931},{"type":18,"tag":287,"props":1439,"children":1440},{"class":354},[1441],{"type":24,"value":611},{"type":18,"tag":287,"props":1443,"children":1444},{"class":300},[1445],{"type":24,"value":1160},{"type":18,"tag":287,"props":1447,"children":1448},{"class":294},[1449],{"type":24,"value":758},{"type":18,"tag":287,"props":1451,"children":1452},{"class":300},[1453],{"type":24,"value":351},{"type":18,"tag":287,"props":1455,"children":1456},{"class":354},[1457],{"type":24,"value":611},{"type":18,"tag":287,"props":1459,"children":1460},{"class":300},[1461],{"type":24,"value":351},{"type":18,"tag":287,"props":1463,"children":1464},{"class":294},[1465],{"type":24,"value":601},{"type":18,"tag":287,"props":1467,"children":1468},{"class":300},[1469],{"type":24,"value":1054},{"type":18,"tag":287,"props":1471,"children":1472},{"class":354},[1473],{"type":24,"value":611},{"type":18,"tag":287,"props":1475,"children":1476},{"class":300},[1477],{"type":24,"value":1160},{"type":18,"tag":287,"props":1479,"children":1480},{"class":294},[1481],{"type":24,"value":758},{"type":18,"tag":287,"props":1483,"children":1484},{"class":300},[1485],{"type":24,"value":1233},{"type":18,"tag":287,"props":1487,"children":1488},{"class":354},[1489],{"type":24,"value":611},{"type":18,"tag":287,"props":1491,"children":1492},{"class":300},[1493],{"type":24,"value":1242},{"type":18,"tag":287,"props":1495,"children":1496},{"class":294},[1497],{"type":24,"value":601},{"type":18,"tag":287,"props":1499,"children":1500},{"class":300},[1501],{"type":24,"value":1045},{"type":18,"tag":287,"props":1503,"children":1504},{"class":294},[1505],{"type":24,"value":768},{"type":18,"tag":287,"props":1507,"children":1508},{"class":300},[1509],{"type":24,"value":351},{"type":18,"tag":287,"props":1511,"children":1512},{"class":354},[1513],{"type":24,"value":1514},"6",{"type":18,"tag":19,"props":1516,"children":1518},{"id":1517},"single-shooting-method",[1519],{"type":24,"value":1520},"Single Shooting Method",{"type":18,"tag":27,"props":1522,"children":1523},{},[1524],{"type":24,"value":1525},"Single Shooting Method is a method that we transform the optimal control problem to the nonlinear programming problem with just one decision variable.",{"type":18,"tag":92,"props":1527,"children":1529},{"latex-express":1528,"styles":59},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":92,"props":1531,"children":1533},{"latex-express":1532,"styles":59},"\n      \\begin{align*}\n            x_{u} &= F(w,x_{0},t_{k}) \\\\\n            F(w,x_{0},t_{0}) &= x_{0} \\\\\n        \\end{align*}\n",[],{"type":18,"tag":27,"props":1535,"children":1536},{},[1537],{"type":24,"value":1538},"Then solve the NLP",{"type":18,"tag":92,"props":1540,"children":1542},{"latex-express":1541,"styles":59},"\n      \\begin{align*}\n            \\min_{w}\\Phi(F(w,x_{0},t_{k}), w) \\\\ \n            \\text{Subject to} \\hspace{1cm}  g_{1}(F(w,x_{0},t_{k}),w) \\leq{0}\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1544,"children":1546},{"id":1545},"multiple-shooting-method",[1547],{"type":24,"value":1548},"Multiple Shooting Method",{"type":18,"tag":27,"props":1550,"children":1551},{},[1552],{"type":24,"value":1553},"Multiple Shooting Method is a method that consist of transforming of optimal control problem to the nonlinear programming problem with multiple decision variables.",{"type":18,"tag":92,"props":1555,"children":1557},{"latex-express":1556,"styles":59},"\n      \\begin{align*}\n            \\text{Problem Decision Variable} \\\\\n            w = \\left [ u_{0}, ..., u_{N-1}, x_{0}, ..., x_{N}\\right]\n        \\end{align*}\n",[],{"type":18,"tag":111,"props":1559,"children":1560},{},[1561,1566],{"type":18,"tag":115,"props":1562,"children":1563},{},[1564],{"type":24,"value":1565},"X becoming decision variable in the opimization problem as well as u",{"type":18,"tag":115,"props":1567,"children":1568},{},[1569],{"type":24,"value":1570},"We apply path constraint at each iteration step",{"type":18,"tag":92,"props":1572,"children":1574},{"latex-express":1573,"styles":59},"\n      \\begin{equation*}\n                x_{k+1}-f(x_{k},u_{k}) = 0\n            \\end{equation*}\n",[],{"type":18,"tag":27,"props":1576,"children":1577},{},[1578],{"type":24,"value":1538},{"type":18,"tag":92,"props":1580,"children":1582},{"latex-express":1581,"styles":59},"\n      \\begin{align*}\n            \\min_{w}  \\Phi(F(w,x_{0},t_{k}),& w) \\\\ \n            \\text{s.t}\\hspace{0.5cm}  g_{1}(F(w,x_{0},t_{k}),w) &\\leq{0} \\\\ \n                               g_{2}(w) = \\begin{bmatrix}\n                                  \\bar{x}_{0}-x_{0} \\\\\n                                  f(x_{0},u_{0})-x_{1} \\\\ \n                                  \\vdots \\\\\n                                  f(x_{N-1}, u_{N-1}-x_{N})\n                              \\end{bmatrix} &= 0\n        \\end{align*}\n",[],{"type":18,"tag":19,"props":1584,"children":1586},{"id":1585},"full-implement-in-python",[1587],{"type":24,"value":1588},"Full Implement in Python",{"type":18,"tag":27,"props":1590,"children":1591},{},[1592,1594,1600],{"type":24,"value":1593},"We will use ",{"type":18,"tag":1595,"props":1596,"children":1597},"code-inline",{},[1598],{"type":24,"value":1599},"Casadi",{"type":24,"value":1601}," as a numerical optimization framework.",{"type":18,"tag":272,"props":1603,"children":1606},{"className":1604,"code":1605,"language":277,"meta":8},[275],"import casadi as ca\n",[1607],{"type":18,"tag":280,"props":1608,"children":1609},{},[1610],{"type":18,"tag":272,"props":1611,"children":1612},{"__ignoreMap":8},[1613],{"type":18,"tag":287,"props":1614,"children":1615},{"class":289,"line":290},[1616,1620,1625,1629],{"type":18,"tag":287,"props":1617,"children":1618},{"class":294},[1619],{"type":24,"value":297},{"type":18,"tag":287,"props":1621,"children":1622},{"class":300},[1623],{"type":24,"value":1624}," casadi ",{"type":18,"tag":287,"props":1626,"children":1627},{"class":294},[1628],{"type":24,"value":308},{"type":18,"tag":287,"props":1630,"children":1631},{"class":300},[1632],{"type":24,"value":1633}," ca",{"type":18,"tag":27,"props":1635,"children":1636},{},[1637],{"type":24,"value":1638},"Define state representation and input control of our nonlinear model.",{"type":18,"tag":272,"props":1640,"children":1643},{"className":1641,"code":1642,"language":277,"meta":8},[275],"# Symbolic Variables\n## States\nx = ca.SX.sym(\"x\")\ny = ca.SX.sym(\"y\")\ntheta = ca.SX.sym(\"theta\")\nstates = ca.vertcat(x, y, theta)\nnum_states = states.numel()\n\n## Control\nu1 = ca.SX.sym(\"u1\")\nu2 = ca.SX.sym(\"u2\")\ncontrols = ca.vertcat(u1, u2)\nnum_controls = controls.numel()\n\n# Define Nonlinear model\n## Rotation Matrix\nrot_mat = ca.vertcat(\n    ca.horzcat(ca.cos(theta), ca.sin(theta), 0),\n    ca.horzcat(-ca.sin(theta), ca.cos(theta), 0),\n    ca.horzcat(0, 0, 1)\n)\n\nvx = u1 * ca.cos(theta)\nvy = u1 * ca.sin(theta)\nvyaw = u2\n\nrhs = ca.vertcat(vx, vy, vyaw)\n## Define mapped nonlinear function f(x,u) -> rhs\nf = ca.Function('f', [states, controls], [rhs])\n",[1644],{"type":18,"tag":280,"props":1645,"children":1646},{},[1647],{"type":18,"tag":272,"props":1648,"children":1649},{"__ignoreMap":8},[1650,1658,1666,1703,1735,1768,1785,1802,1809,1817,1850,1883,1900,1917,1924,1932,1940,1957,1974,2000,2032,2039,2046,2072,2097,2114,2121,2138,2146],{"type":18,"tag":287,"props":1651,"children":1652},{"class":289,"line":290},[1653],{"type":18,"tag":287,"props":1654,"children":1655},{"class":329},[1656],{"type":24,"value":1657},"# Symbolic Variables\n",{"type":18,"tag":287,"props":1659,"children":1660},{"class":289,"line":316},[1661],{"type":18,"tag":287,"props":1662,"children":1663},{"class":329},[1664],{"type":24,"value":1665},"## States\n",{"type":18,"tag":287,"props":1667,"children":1668},{"class":289,"line":325},[1669,1673,1677,1682,1687,1692,1698],{"type":18,"tag":287,"props":1670,"children":1671},{"class":300},[1672],{"type":24,"value":406},{"type":18,"tag":287,"props":1674,"children":1675},{"class":294},[1676],{"type":24,"value":346},{"type":18,"tag":287,"props":1678,"children":1679},{"class":300},[1680],{"type":24,"value":1681}," ca.",{"type":18,"tag":287,"props":1683,"children":1684},{"class":354},[1685],{"type":24,"value":1686},"SX",{"type":18,"tag":287,"props":1688,"children":1689},{"class":300},[1690],{"type":24,"value":1691},".sym(",{"type":18,"tag":287,"props":1693,"children":1695},{"class":1694},"ct-244866",[1696],{"type":24,"value":1697},"\"x\"",{"type":18,"tag":287,"props":1699,"children":1700},{"class":300},[1701],{"type":24,"value":1702},")\n",{"type":18,"tag":287,"props":1704,"children":1705},{"class":289,"line":335},[1706,1710,1714,1718,1722,1726,1731],{"type":18,"tag":287,"props":1707,"children":1708},{"class":300},[1709],{"type":24,"value":428},{"type":18,"tag":287,"props":1711,"children":1712},{"class":294},[1713],{"type":24,"value":346},{"type":18,"tag":287,"props":1715,"children":1716},{"class":300},[1717],{"type":24,"value":1681},{"type":18,"tag":287,"props":1719,"children":1720},{"class":354},[1721],{"type":24,"value":1686},{"type":18,"tag":287,"props":1723,"children":1724},{"class":300},[1725],{"type":24,"value":1691},{"type":18,"tag":287,"props":1727,"children":1728},{"class":1694},[1729],{"type":24,"value":1730},"\"y\"",{"type":18,"tag":287,"props":1732,"children":1733},{"class":300},[1734],{"type":24,"value":1702},{"type":18,"tag":287,"props":1736,"children":1737},{"class":289,"line":360},[1738,1743,1747,1751,1755,1759,1764],{"type":18,"tag":287,"props":1739,"children":1740},{"class":300},[1741],{"type":24,"value":1742},"theta ",{"type":18,"tag":287,"props":1744,"children":1745},{"class":294},[1746],{"type":24,"value":346},{"type":18,"tag":287,"props":1748,"children":1749},{"class":300},[1750],{"type":24,"value":1681},{"type":18,"tag":287,"props":1752,"children":1753},{"class":354},[1754],{"type":24,"value":1686},{"type":18,"tag":287,"props":1756,"children":1757},{"class":300},[1758],{"type":24,"value":1691},{"type":18,"tag":287,"props":1760,"children":1761},{"class":1694},[1762],{"type":24,"value":1763},"\"theta\"",{"type":18,"tag":287,"props":1765,"children":1766},{"class":300},[1767],{"type":24,"value":1702},{"type":18,"tag":287,"props":1769,"children":1770},{"class":289,"line":369},[1771,1776,1780],{"type":18,"tag":287,"props":1772,"children":1773},{"class":300},[1774],{"type":24,"value":1775},"states ",{"type":18,"tag":287,"props":1777,"children":1778},{"class":294},[1779],{"type":24,"value":346},{"type":18,"tag":287,"props":1781,"children":1782},{"class":300},[1783],{"type":24,"value":1784}," ca.vertcat(x, y, theta)\n",{"type":18,"tag":287,"props":1786,"children":1787},{"class":289,"line":391},[1788,1793,1797],{"type":18,"tag":287,"props":1789,"children":1790},{"class":300},[1791],{"type":24,"value":1792},"num_states ",{"type":18,"tag":287,"props":1794,"children":1795},{"class":294},[1796],{"type":24,"value":346},{"type":18,"tag":287,"props":1798,"children":1799},{"class":300},[1800],{"type":24,"value":1801}," states.numel()\n",{"type":18,"tag":287,"props":1803,"children":1804},{"class":289,"line":400},[1805],{"type":18,"tag":287,"props":1806,"children":1807},{},[1808],{"type":24,"value":322},{"type":18,"tag":287,"props":1810,"children":1811},{"class":289,"line":422},[1812],{"type":18,"tag":287,"props":1813,"children":1814},{"class":329},[1815],{"type":24,"value":1816},"## Control\n",{"type":18,"tag":287,"props":1818,"children":1819},{"class":289,"line":443},[1820,1825,1829,1833,1837,1841,1846],{"type":18,"tag":287,"props":1821,"children":1822},{"class":300},[1823],{"type":24,"value":1824},"u1 ",{"type":18,"tag":287,"props":1826,"children":1827},{"class":294},[1828],{"type":24,"value":346},{"type":18,"tag":287,"props":1830,"children":1831},{"class":300},[1832],{"type":24,"value":1681},{"type":18,"tag":287,"props":1834,"children":1835},{"class":354},[1836],{"type":24,"value":1686},{"type":18,"tag":287,"props":1838,"children":1839},{"class":300},[1840],{"type":24,"value":1691},{"type":18,"tag":287,"props":1842,"children":1843},{"class":1694},[1844],{"type":24,"value":1845},"\"u1\"",{"type":18,"tag":287,"props":1847,"children":1848},{"class":300},[1849],{"type":24,"value":1702},{"type":18,"tag":287,"props":1851,"children":1852},{"class":289,"line":464},[1853,1858,1862,1866,1870,1874,1879],{"type":18,"tag":287,"props":1854,"children":1855},{"class":300},[1856],{"type":24,"value":1857},"u2 ",{"type":18,"tag":287,"props":1859,"children":1860},{"class":294},[1861],{"type":24,"value":346},{"type":18,"tag":287,"props":1863,"children":1864},{"class":300},[1865],{"type":24,"value":1681},{"type":18,"tag":287,"props":1867,"children":1868},{"class":354},[1869],{"type":24,"value":1686},{"type":18,"tag":287,"props":1871,"children":1872},{"class":300},[1873],{"type":24,"value":1691},{"type":18,"tag":287,"props":1875,"children":1876},{"class":1694},[1877],{"type":24,"value":1878},"\"u2\"",{"type":18,"tag":287,"props":1880,"children":1881},{"class":300},[1882],{"type":24,"value":1702},{"type":18,"tag":287,"props":1884,"children":1885},{"class":289,"line":473},[1886,1891,1895],{"type":18,"tag":287,"props":1887,"children":1888},{"class":300},[1889],{"type":24,"value":1890},"controls ",{"type":18,"tag":287,"props":1892,"children":1893},{"class":294},[1894],{"type":24,"value":346},{"type":18,"tag":287,"props":1896,"children":1897},{"class":300},[1898],{"type":24,"value":1899}," ca.vertcat(u1, u2)\n",{"type":18,"tag":287,"props":1901,"children":1902},{"class":289,"line":504},[1903,1908,1912],{"type":18,"tag":287,"props":1904,"children":1905},{"class":300},[1906],{"type":24,"value":1907},"num_controls ",{"type":18,"tag":287,"props":1909,"children":1910},{"class":294},[1911],{"type":24,"value":346},{"type":18,"tag":287,"props":1913,"children":1914},{"class":300},[1915],{"type":24,"value":1916}," controls.numel()\n",{"type":18,"tag":287,"props":1918,"children":1919},{"class":289,"line":535},[1920],{"type":18,"tag":287,"props":1921,"children":1922},{},[1923],{"type":24,"value":322},{"type":18,"tag":287,"props":1925,"children":1926},{"class":289,"line":544},[1927],{"type":18,"tag":287,"props":1928,"children":1929},{"class":329},[1930],{"type":24,"value":1931},"# Define Nonlinear model\n",{"type":18,"tag":287,"props":1933,"children":1934},{"class":289,"line":553},[1935],{"type":18,"tag":287,"props":1936,"children":1937},{"class":329},[1938],{"type":24,"value":1939},"## Rotation Matrix\n",{"type":18,"tag":287,"props":1941,"children":1942},{"class":289,"line":580},[1943,1948,1952],{"type":18,"tag":287,"props":1944,"children":1945},{"class":300},[1946],{"type":24,"value":1947},"rot_mat ",{"type":18,"tag":287,"props":1949,"children":1950},{"class":294},[1951],{"type":24,"value":346},{"type":18,"tag":287,"props":1953,"children":1954},{"class":300},[1955],{"type":24,"value":1956}," ca.vertcat(\n",{"type":18,"tag":287,"props":1958,"children":1959},{"class":289,"line":619},[1960,1965,1969],{"type":18,"tag":287,"props":1961,"children":1962},{"class":300},[1963],{"type":24,"value":1964},"    ca.horzcat(ca.cos(theta), ca.sin(theta), ",{"type":18,"tag":287,"props":1966,"children":1967},{"class":354},[1968],{"type":24,"value":591},{"type":18,"tag":287,"props":1970,"children":1971},{"class":300},[1972],{"type":24,"value":1973},"),\n",{"type":18,"tag":287,"props":1975,"children":1976},{"class":289,"line":652},[1977,1982,1987,1992,1996],{"type":18,"tag":287,"props":1978,"children":1979},{"class":300},[1980],{"type":24,"value":1981},"    ca.horzcat(",{"type":18,"tag":287,"props":1983,"children":1984},{"class":294},[1985],{"type":24,"value":1986},"-",{"type":18,"tag":287,"props":1988,"children":1989},{"class":300},[1990],{"type":24,"value":1991},"ca.sin(theta), ca.cos(theta), ",{"type":18,"tag":287,"props":1993,"children":1994},{"class":354},[1995],{"type":24,"value":591},{"type":18,"tag":287,"props":1997,"children":1998},{"class":300},[1999],{"type":24,"value":1973},{"type":18,"tag":287,"props":2001,"children":2002},{"class":289,"line":670},[2003,2007,2011,2016,2020,2024,2028],{"type":18,"tag":287,"props":2004,"children":2005},{"class":300},[2006],{"type":24,"value":1981},{"type":18,"tag":287,"props":2008,"children":2009},{"class":354},[2010],{"type":24,"value":591},{"type":18,"tag":287,"props":2012,"children":2013},{"class":300},[2014],{"type":24,"value":2015},", ",{"type":18,"tag":287,"props":2017,"children":2018},{"class":354},[2019],{"type":24,"value":591},{"type":18,"tag":287,"props":2021,"children":2022},{"class":300},[2023],{"type":24,"value":2015},{"type":18,"tag":287,"props":2025,"children":2026},{"class":354},[2027],{"type":24,"value":662},{"type":18,"tag":287,"props":2029,"children":2030},{"class":300},[2031],{"type":24,"value":1702},{"type":18,"tag":287,"props":2033,"children":2034},{"class":289,"line":679},[2035],{"type":18,"tag":287,"props":2036,"children":2037},{"class":300},[2038],{"type":24,"value":1702},{"type":18,"tag":287,"props":2040,"children":2041},{"class":289,"line":687},[2042],{"type":18,"tag":287,"props":2043,"children":2044},{},[2045],{"type":24,"value":322},{"type":18,"tag":287,"props":2047,"children":2048},{"class":289,"line":720},[2049,2054,2058,2063,2067],{"type":18,"tag":287,"props":2050,"children":2051},{"class":300},[2052],{"type":24,"value":2053},"vx ",{"type":18,"tag":287,"props":2055,"children":2056},{"class":294},[2057],{"type":24,"value":346},{"type":18,"tag":287,"props":2059,"children":2060},{"class":300},[2061],{"type":24,"value":2062}," u1 ",{"type":18,"tag":287,"props":2064,"children":2065},{"class":294},[2066],{"type":24,"value":601},{"type":18,"tag":287,"props":2068,"children":2069},{"class":300},[2070],{"type":24,"value":2071}," ca.cos(theta)\n",{"type":18,"tag":287,"props":2073,"children":2074},{"class":289,"line":738},[2075,2080,2084,2088,2092],{"type":18,"tag":287,"props":2076,"children":2077},{"class":300},[2078],{"type":24,"value":2079},"vy ",{"type":18,"tag":287,"props":2081,"children":2082},{"class":294},[2083],{"type":24,"value":346},{"type":18,"tag":287,"props":2085,"children":2086},{"class":300},[2087],{"type":24,"value":2062},{"type":18,"tag":287,"props":2089,"children":2090},{"class":294},[2091],{"type":24,"value":601},{"type":18,"tag":287,"props":2093,"children":2094},{"class":300},[2095],{"type":24,"value":2096}," ca.sin(theta)\n",{"type":18,"tag":287,"props":2098,"children":2099},{"class":289,"line":884},[2100,2105,2109],{"type":18,"tag":287,"props":2101,"children":2102},{"class":300},[2103],{"type":24,"value":2104},"vyaw ",{"type":18,"tag":287,"props":2106,"children":2107},{"class":294},[2108],{"type":24,"value":346},{"type":18,"tag":287,"props":2110,"children":2111},{"class":300},[2112],{"type":24,"value":2113}," u2\n",{"type":18,"tag":287,"props":2115,"children":2116},{"class":289,"line":1022},[2117],{"type":18,"tag":287,"props":2118,"children":2119},{},[2120],{"type":24,"value":322},{"type":18,"tag":287,"props":2122,"children":2123},{"class":289,"line":1113},[2124,2129,2133],{"type":18,"tag":287,"props":2125,"children":2126},{"class":300},[2127],{"type":24,"value":2128},"rhs ",{"type":18,"tag":287,"props":2130,"children":2131},{"class":294},[2132],{"type":24,"value":346},{"type":18,"tag":287,"props":2134,"children":2135},{"class":300},[2136],{"type":24,"value":2137}," ca.vertcat(vx, vy, vyaw)\n",{"type":18,"tag":287,"props":2139,"children":2140},{"class":289,"line":1121},[2141],{"type":18,"tag":287,"props":2142,"children":2143},{"class":329},[2144],{"type":24,"value":2145},"## Define mapped nonlinear function f(x,u) -> rhs\n",{"type":18,"tag":287,"props":2147,"children":2148},{"class":289,"line":1135},[2149,2153,2157,2162,2167],{"type":18,"tag":287,"props":2150,"children":2151},{"class":300},[2152],{"type":24,"value":559},{"type":18,"tag":287,"props":2154,"children":2155},{"class":294},[2156],{"type":24,"value":346},{"type":18,"tag":287,"props":2158,"children":2159},{"class":300},[2160],{"type":24,"value":2161}," ca.Function(",{"type":18,"tag":287,"props":2163,"children":2164},{"class":1694},[2165],{"type":24,"value":2166},"'f'",{"type":18,"tag":287,"props":2168,"children":2169},{"class":300},[2170],{"type":24,"value":2171},", [states, controls], [rhs])",{"type":18,"tag":27,"props":2173,"children":2174},{},[2175],{"type":24,"value":2176},"Declare symbolic matrix",{"type":18,"tag":272,"props":2178,"children":2181},{"className":2179,"code":2180,"language":277,"meta":8},[275],"X = ca.SX.sym('X', num_states, prediction_horizons + 1)\nX_ref = ca.SX.sym('X_ref', num_states, prediction_horizons + 1)\nU = ca.SX.sym('U', num_controls, prediction_horizons)\nU_ref = ca.SX.sym('U_ref', num_controls, prediction_horizons)\n",[2182],{"type":18,"tag":280,"props":2183,"children":2184},{},[2185],{"type":18,"tag":272,"props":2186,"children":2187},{"__ignoreMap":8},[2188,2238,2287,2321],{"type":18,"tag":287,"props":2189,"children":2190},{"class":289,"line":290},[2191,2196,2200,2204,2208,2212,2217,2222,2226,2230,2234],{"type":18,"tag":287,"props":2192,"children":2193},{"class":300},[2194],{"type":24,"value":2195},"X ",{"type":18,"tag":287,"props":2197,"children":2198},{"class":294},[2199],{"type":24,"value":346},{"type":18,"tag":287,"props":2201,"children":2202},{"class":300},[2203],{"type":24,"value":1681},{"type":18,"tag":287,"props":2205,"children":2206},{"class":354},[2207],{"type":24,"value":1686},{"type":18,"tag":287,"props":2209,"children":2210},{"class":300},[2211],{"type":24,"value":1691},{"type":18,"tag":287,"props":2213,"children":2214},{"class":1694},[2215],{"type":24,"value":2216},"'X'",{"type":18,"tag":287,"props":2218,"children":2219},{"class":300},[2220],{"type":24,"value":2221},", num_states, prediction_horizons ",{"type":18,"tag":287,"props":2223,"children":2224},{"class":294},[2225],{"type":24,"value":758},{"type":18,"tag":287,"props":2227,"children":2228},{"class":300},[2229],{"type":24,"value":351},{"type":18,"tag":287,"props":2231,"children":2232},{"class":354},[2233],{"type":24,"value":662},{"type":18,"tag":287,"props":2235,"children":2236},{"class":300},[2237],{"type":24,"value":1702},{"type":18,"tag":287,"props":2239,"children":2240},{"class":289,"line":316},[2241,2246,2250,2254,2258,2262,2267,2271,2275,2279,2283],{"type":18,"tag":287,"props":2242,"children":2243},{"class":300},[2244],{"type":24,"value":2245},"X_ref ",{"type":18,"tag":287,"props":2247,"children":2248},{"class":294},[2249],{"type":24,"value":346},{"type":18,"tag":287,"props":2251,"children":2252},{"class":300},[2253],{"type":24,"value":1681},{"type":18,"tag":287,"props":2255,"children":2256},{"class":354},[2257],{"type":24,"value":1686},{"type":18,"tag":287,"props":2259,"children":2260},{"class":300},[2261],{"type":24,"value":1691},{"type":18,"tag":287,"props":2263,"children":2264},{"class":1694},[2265],{"type":24,"value":2266},"'X_ref'",{"type":18,"tag":287,"props":2268,"children":2269},{"class":300},[2270],{"type":24,"value":2221},{"type":18,"tag":287,"props":2272,"children":2273},{"class":294},[2274],{"type":24,"value":758},{"type":18,"tag":287,"props":2276,"children":2277},{"class":300},[2278],{"type":24,"value":351},{"type":18,"tag":287,"props":2280,"children":2281},{"class":354},[2282],{"type":24,"value":662},{"type":18,"tag":287,"props":2284,"children":2285},{"class":300},[2286],{"type":24,"value":1702},{"type":18,"tag":287,"props":2288,"children":2289},{"class":289,"line":325},[2290,2295,2299,2303,2307,2311,2316],{"type":18,"tag":287,"props":2291,"children":2292},{"class":300},[2293],{"type":24,"value":2294},"U ",{"type":18,"tag":287,"props":2296,"children":2297},{"class":294},[2298],{"type":24,"value":346},{"type":18,"tag":287,"props":2300,"children":2301},{"class":300},[2302],{"type":24,"value":1681},{"type":18,"tag":287,"props":2304,"children":2305},{"class":354},[2306],{"type":24,"value":1686},{"type":18,"tag":287,"props":2308,"children":2309},{"class":300},[2310],{"type":24,"value":1691},{"type":18,"tag":287,"props":2312,"children":2313},{"class":1694},[2314],{"type":24,"value":2315},"'U'",{"type":18,"tag":287,"props":2317,"children":2318},{"class":300},[2319],{"type":24,"value":2320},", num_controls, prediction_horizons)\n",{"type":18,"tag":287,"props":2322,"children":2323},{"class":289,"line":335},[2324,2329,2333,2337,2341,2345,2350],{"type":18,"tag":287,"props":2325,"children":2326},{"class":300},[2327],{"type":24,"value":2328},"U_ref ",{"type":18,"tag":287,"props":2330,"children":2331},{"class":294},[2332],{"type":24,"value":346},{"type":18,"tag":287,"props":2334,"children":2335},{"class":300},[2336],{"type":24,"value":1681},{"type":18,"tag":287,"props":2338,"children":2339},{"class":354},[2340],{"type":24,"value":1686},{"type":18,"tag":287,"props":2342,"children":2343},{"class":300},[2344],{"type":24,"value":1691},{"type":18,"tag":287,"props":2346,"children":2347},{"class":1694},[2348],{"type":24,"value":2349},"'U_ref'",{"type":18,"tag":287,"props":2351,"children":2352},{"class":300},[2353],{"type":24,"value":2354},", num_controls, prediction_horizons)",{"type":18,"tag":27,"props":2356,"children":2357},{},[2358,2360],{"type":24,"value":2359},"Define nonlinear programming and options for ",{"type":18,"tag":1595,"props":2361,"children":2362},{},[2363],{"type":24,"value":1599},{"type":18,"tag":272,"props":2365,"children":2368},{"className":2366,"code":2367,"language":277,"meta":8},[275],"nlp_prob = {\n    'f': cost_fn,\n    'x': opt_var,\n    'p': opt_dec,\n    'g': g\n}\n\nnlp_opts = {\n    'ipopt.max_iter': 5000,\n    'ipopt.print_level': 0,\n    'ipopt.acceptable_tol': 1e-6,\n    'ipopt.acceptable_obj_change_tol': 1e-4,\n    'print_time': 0\n}\n",[2369],{"type":18,"tag":280,"props":2370,"children":2371},{},[2372],{"type":18,"tag":272,"props":2373,"children":2374},{"__ignoreMap":8},[2375,2392,2408,2425,2442,2459,2467,2474,2490,2517,2541,2566,2591,2612],{"type":18,"tag":287,"props":2376,"children":2377},{"class":289,"line":290},[2378,2383,2387],{"type":18,"tag":287,"props":2379,"children":2380},{"class":300},[2381],{"type":24,"value":2382},"nlp_prob ",{"type":18,"tag":287,"props":2384,"children":2385},{"class":294},[2386],{"type":24,"value":346},{"type":18,"tag":287,"props":2388,"children":2389},{"class":300},[2390],{"type":24,"value":2391}," {\n",{"type":18,"tag":287,"props":2393,"children":2394},{"class":289,"line":316},[2395,2399,2403],{"type":18,"tag":287,"props":2396,"children":2397},{"class":300},[2398],{"type":24,"value":1127},{"type":18,"tag":287,"props":2400,"children":2401},{"class":1694},[2402],{"type":24,"value":2166},{"type":18,"tag":287,"props":2404,"children":2405},{"class":300},[2406],{"type":24,"value":2407},": cost_fn,\n",{"type":18,"tag":287,"props":2409,"children":2410},{"class":289,"line":325},[2411,2415,2420],{"type":18,"tag":287,"props":2412,"children":2413},{"class":300},[2414],{"type":24,"value":1127},{"type":18,"tag":287,"props":2416,"children":2417},{"class":1694},[2418],{"type":24,"value":2419},"'x'",{"type":18,"tag":287,"props":2421,"children":2422},{"class":300},[2423],{"type":24,"value":2424},": opt_var,\n",{"type":18,"tag":287,"props":2426,"children":2427},{"class":289,"line":335},[2428,2432,2437],{"type":18,"tag":287,"props":2429,"children":2430},{"class":300},[2431],{"type":24,"value":1127},{"type":18,"tag":287,"props":2433,"children":2434},{"class":1694},[2435],{"type":24,"value":2436},"'p'",{"type":18,"tag":287,"props":2438,"children":2439},{"class":300},[2440],{"type":24,"value":2441},": opt_dec,\n",{"type":18,"tag":287,"props":2443,"children":2444},{"class":289,"line":360},[2445,2449,2454],{"type":18,"tag":287,"props":2446,"children":2447},{"class":300},[2448],{"type":24,"value":1127},{"type":18,"tag":287,"props":2450,"children":2451},{"class":1694},[2452],{"type":24,"value":2453},"'g'",{"type":18,"tag":287,"props":2455,"children":2456},{"class":300},[2457],{"type":24,"value":2458},": g\n",{"type":18,"tag":287,"props":2460,"children":2461},{"class":289,"line":369},[2462],{"type":18,"tag":287,"props":2463,"children":2464},{"class":300},[2465],{"type":24,"value":2466},"}\n",{"type":18,"tag":287,"props":2468,"children":2469},{"class":289,"line":391},[2470],{"type":18,"tag":287,"props":2471,"children":2472},{},[2473],{"type":24,"value":322},{"type":18,"tag":287,"props":2475,"children":2476},{"class":289,"line":400},[2477,2482,2486],{"type":18,"tag":287,"props":2478,"children":2479},{"class":300},[2480],{"type":24,"value":2481},"nlp_opts ",{"type":18,"tag":287,"props":2483,"children":2484},{"class":294},[2485],{"type":24,"value":346},{"type":18,"tag":287,"props":2487,"children":2488},{"class":300},[2489],{"type":24,"value":2391},{"type":18,"tag":287,"props":2491,"children":2492},{"class":289,"line":422},[2493,2497,2502,2507,2512],{"type":18,"tag":287,"props":2494,"children":2495},{"class":300},[2496],{"type":24,"value":1127},{"type":18,"tag":287,"props":2498,"children":2499},{"class":1694},[2500],{"type":24,"value":2501},"'ipopt.max_iter'",{"type":18,"tag":287,"props":2503,"children":2504},{"class":300},[2505],{"type":24,"value":2506},": ",{"type":18,"tag":287,"props":2508,"children":2509},{"class":354},[2510],{"type":24,"value":2511},"5000",{"type":18,"tag":287,"props":2513,"children":2514},{"class":300},[2515],{"type":24,"value":2516},",\n",{"type":18,"tag":287,"props":2518,"children":2519},{"class":289,"line":443},[2520,2524,2529,2533,2537],{"type":18,"tag":287,"props":2521,"children":2522},{"class":300},[2523],{"type":24,"value":1127},{"type":18,"tag":287,"props":2525,"children":2526},{"class":1694},[2527],{"type":24,"value":2528},"'ipopt.print_level'",{"type":18,"tag":287,"props":2530,"children":2531},{"class":300},[2532],{"type":24,"value":2506},{"type":18,"tag":287,"props":2534,"children":2535},{"class":354},[2536],{"type":24,"value":591},{"type":18,"tag":287,"props":2538,"children":2539},{"class":300},[2540],{"type":24,"value":2516},{"type":18,"tag":287,"props":2542,"children":2543},{"class":289,"line":464},[2544,2548,2553,2557,2562],{"type":18,"tag":287,"props":2545,"children":2546},{"class":300},[2547],{"type":24,"value":1127},{"type":18,"tag":287,"props":2549,"children":2550},{"class":1694},[2551],{"type":24,"value":2552},"'ipopt.acceptable_tol'",{"type":18,"tag":287,"props":2554,"children":2555},{"class":300},[2556],{"type":24,"value":2506},{"type":18,"tag":287,"props":2558,"children":2559},{"class":354},[2560],{"type":24,"value":2561},"1e-6",{"type":18,"tag":287,"props":2563,"children":2564},{"class":300},[2565],{"type":24,"value":2516},{"type":18,"tag":287,"props":2567,"children":2568},{"class":289,"line":473},[2569,2573,2578,2582,2587],{"type":18,"tag":287,"props":2570,"children":2571},{"class":300},[2572],{"type":24,"value":1127},{"type":18,"tag":287,"props":2574,"children":2575},{"class":1694},[2576],{"type":24,"value":2577},"'ipopt.acceptable_obj_change_tol'",{"type":18,"tag":287,"props":2579,"children":2580},{"class":300},[2581],{"type":24,"value":2506},{"type":18,"tag":287,"props":2583,"children":2584},{"class":354},[2585],{"type":24,"value":2586},"1e-4",{"type":18,"tag":287,"props":2588,"children":2589},{"class":300},[2590],{"type":24,"value":2516},{"type":18,"tag":287,"props":2592,"children":2593},{"class":289,"line":504},[2594,2598,2603,2607],{"type":18,"tag":287,"props":2595,"children":2596},{"class":300},[2597],{"type":24,"value":1127},{"type":18,"tag":287,"props":2599,"children":2600},{"class":1694},[2601],{"type":24,"value":2602},"'print_time'",{"type":18,"tag":287,"props":2604,"children":2605},{"class":300},[2606],{"type":24,"value":2506},{"type":18,"tag":287,"props":2608,"children":2609},{"class":354},[2610],{"type":24,"value":2611},"0\n",{"type":18,"tag":287,"props":2613,"children":2614},{"class":289,"line":535},[2615],{"type":18,"tag":287,"props":2616,"children":2617},{"class":300},[2618],{"type":24,"value":2619},"}",{"type":18,"tag":27,"props":2621,"children":2622},{},[2623],{"type":24,"value":2624},"Determine boundary and constraint for our optimizer",{"type":18,"tag":272,"props":2626,"children":2629},{"className":2627,"code":2628,"language":277,"meta":8},[275],"lbx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\nubx = ca.DM.zeros((num_states * (prediction_horizons + 1) + num_controls * prediction_horizons, 1))\n\nlbx[0: num_states * (prediction_horizons + 1): num_states] = x_min\nlbx[1: num_states * (prediction_horizons + 1): num_states] = y_min\nlbx[2: num_states * (prediction_horizons + 1): num_states] = theta_min\n\nubx[0: num_states * (prediction_horizons + 1): num_states] = x_max\nubx[1: num_states * (prediction_horizons + 1): num_states] = y_max\nubx[2: num_states * (prediction_horizons + 1): num_states] = theta_max\n\nlbx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\nlbx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_min\n\nubx[num_states * (prediction_horizons + 1): num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\nubx[num_states * (prediction_horizons + 1) + 1: num_states * (prediction_horizons + 1) + num_controls * prediction_horizons: num_controls] = u_max\n\nargs = {\n    'lbg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'ubg': ca.DM.zeros((num_states * (prediction_horizons + 1), 1)),\n    'lbx': lbx,\n    'ubx': ubx\n}\n",[2630],{"type":18,"tag":280,"props":2631,"children":2632},{},[2633],{"type":18,"tag":272,"props":2634,"children":2635},{"__ignoreMap":8},[2636,2714,2786,2793,2844,2892,2940,2947,2996,3044,3092,3099,3182,3277,3284,3365,3460,3467,3483,3542,3598,3615,3632],{"type":18,"tag":287,"props":2637,"children":2638},{"class":289,"line":290},[2639,2644,2648,2652,2657,2662,2666,2671,2675,2679,2683,2687,2691,2696,2700,2705,2709],{"type":18,"tag":287,"props":2640,"children":2641},{"class":300},[2642],{"type":24,"value":2643},"lbx ",{"type":18,"tag":287,"props":2645,"children":2646},{"class":294},[2647],{"type":24,"value":346},{"type":18,"tag":287,"props":2649,"children":2650},{"class":300},[2651],{"type":24,"value":1681},{"type":18,"tag":287,"props":2653,"children":2654},{"class":354},[2655],{"type":24,"value":2656},"DM",{"type":18,"tag":287,"props":2658,"children":2659},{"class":300},[2660],{"type":24,"value":2661},".zeros((num_states ",{"type":18,"tag":287,"props":2663,"children":2664},{"class":294},[2665],{"type":24,"value":601},{"type":18,"tag":287,"props":2667,"children":2668},{"class":300},[2669],{"type":24,"value":2670}," (prediction_horizons ",{"type":18,"tag":287,"props":2672,"children":2673},{"class":294},[2674],{"type":24,"value":758},{"type":18,"tag":287,"props":2676,"children":2677},{"class":300},[2678],{"type":24,"value":351},{"type":18,"tag":287,"props":2680,"children":2681},{"class":354},[2682],{"type":24,"value":662},{"type":18,"tag":287,"props":2684,"children":2685},{"class":300},[2686],{"type":24,"value":781},{"type":18,"tag":287,"props":2688,"children":2689},{"class":294},[2690],{"type":24,"value":758},{"type":18,"tag":287,"props":2692,"children":2693},{"class":300},[2694],{"type":24,"value":2695}," num_controls ",{"type":18,"tag":287,"props":2697,"children":2698},{"class":294},[2699],{"type":24,"value":601},{"type":18,"tag":287,"props":2701,"children":2702},{"class":300},[2703],{"type":24,"value":2704}," prediction_horizons, ",{"type":18,"tag":287,"props":2706,"children":2707},{"class":354},[2708],{"type":24,"value":662},{"type":18,"tag":287,"props":2710,"children":2711},{"class":300},[2712],{"type":24,"value":2713},"))\n",{"type":18,"tag":287,"props":2715,"children":2716},{"class":289,"line":316},[2717,2722,2726,2730,2734,2738,2742,2746,2750,2754,2758,2762,2766,2770,2774,2778,2782],{"type":18,"tag":287,"props":2718,"children":2719},{"class":300},[2720],{"type":24,"value":2721},"ubx ",{"type":18,"tag":287,"props":2723,"children":2724},{"class":294},[2725],{"type":24,"value":346},{"type":18,"tag":287,"props":2727,"children":2728},{"class":300},[2729],{"type":24,"value":1681},{"type":18,"tag":287,"props":2731,"children":2732},{"class":354},[2733],{"type":24,"value":2656},{"type":18,"tag":287,"props":2735,"children":2736},{"class":300},[2737],{"type":24,"value":2661},{"type":18,"tag":287,"props":2739,"children":2740},{"class":294},[2741],{"type":24,"value":601},{"type":18,"tag":287,"props":2743,"children":2744},{"class":300},[2745],{"type":24,"value":2670},{"type":18,"tag":287,"props":2747,"children":2748},{"class":294},[2749],{"type":24,"value":758},{"type":18,"tag":287,"props":2751,"children":2752},{"class":300},[2753],{"type":24,"value":351},{"type":18,"tag":287,"props":2755,"children":2756},{"class":354},[2757],{"type":24,"value":662},{"type":18,"tag":287,"props":2759,"children":2760},{"class":300},[2761],{"type":24,"value":781},{"type":18,"tag":287,"props":2763,"children":2764},{"class":294},[2765],{"type":24,"value":758},{"type":18,"tag":287,"props":2767,"children":2768},{"class":300},[2769],{"type":24,"value":2695},{"type":18,"tag":287,"props":2771,"children":2772},{"class":294},[2773],{"type":24,"value":601},{"type":18,"tag":287,"props":2775,"children":2776},{"class":300},[2777],{"type":24,"value":2704},{"type":18,"tag":287,"props":2779,"children":2780},{"class":354},[2781],{"type":24,"value":662},{"type":18,"tag":287,"props":2783,"children":2784},{"class":300},[2785],{"type":24,"value":2713},{"type":18,"tag":287,"props":2787,"children":2788},{"class":289,"line":325},[2789],{"type":18,"tag":287,"props":2790,"children":2791},{},[2792],{"type":24,"value":322},{"type":18,"tag":287,"props":2794,"children":2795},{"class":289,"line":335},[2796,2801,2805,2810,2814,2818,2822,2826,2830,2835,2839],{"type":18,"tag":287,"props":2797,"children":2798},{"class":300},[2799],{"type":24,"value":2800},"lbx[",{"type":18,"tag":287,"props":2802,"children":2803},{"class":354},[2804],{"type":24,"value":591},{"type":18,"tag":287,"props":2806,"children":2807},{"class":300},[2808],{"type":24,"value":2809},": num_states ",{"type":18,"tag":287,"props":2811,"children":2812},{"class":294},[2813],{"type":24,"value":601},{"type":18,"tag":287,"props":2815,"children":2816},{"class":300},[2817],{"type":24,"value":2670},{"type":18,"tag":287,"props":2819,"children":2820},{"class":294},[2821],{"type":24,"value":758},{"type":18,"tag":287,"props":2823,"children":2824},{"class":300},[2825],{"type":24,"value":351},{"type":18,"tag":287,"props":2827,"children":2828},{"class":354},[2829],{"type":24,"value":662},{"type":18,"tag":287,"props":2831,"children":2832},{"class":300},[2833],{"type":24,"value":2834},"): num_states] ",{"type":18,"tag":287,"props":2836,"children":2837},{"class":294},[2838],{"type":24,"value":346},{"type":18,"tag":287,"props":2840,"children":2841},{"class":300},[2842],{"type":24,"value":2843}," x_min\n",{"type":18,"tag":287,"props":2845,"children":2846},{"class":289,"line":360},[2847,2851,2855,2859,2863,2867,2871,2875,2879,2883,2887],{"type":18,"tag":287,"props":2848,"children":2849},{"class":300},[2850],{"type":24,"value":2800},{"type":18,"tag":287,"props":2852,"children":2853},{"class":354},[2854],{"type":24,"value":662},{"type":18,"tag":287,"props":2856,"children":2857},{"class":300},[2858],{"type":24,"value":2809},{"type":18,"tag":287,"props":2860,"children":2861},{"class":294},[2862],{"type":24,"value":601},{"type":18,"tag":287,"props":2864,"children":2865},{"class":300},[2866],{"type":24,"value":2670},{"type":18,"tag":287,"props":2868,"children":2869},{"class":294},[2870],{"type":24,"value":758},{"type":18,"tag":287,"props":2872,"children":2873},{"class":300},[2874],{"type":24,"value":351},{"type":18,"tag":287,"props":2876,"children":2877},{"class":354},[2878],{"type":24,"value":662},{"type":18,"tag":287,"props":2880,"children":2881},{"class":300},[2882],{"type":24,"value":2834},{"type":18,"tag":287,"props":2884,"children":2885},{"class":294},[2886],{"type":24,"value":346},{"type":18,"tag":287,"props":2888,"children":2889},{"class":300},[2890],{"type":24,"value":2891}," y_min\n",{"type":18,"tag":287,"props":2893,"children":2894},{"class":289,"line":369},[2895,2899,2903,2907,2911,2915,2919,2923,2927,2931,2935],{"type":18,"tag":287,"props":2896,"children":2897},{"class":300},[2898],{"type":24,"value":2800},{"type":18,"tag":287,"props":2900,"children":2901},{"class":354},[2902],{"type":24,"value":611},{"type":18,"tag":287,"props":2904,"children":2905},{"class":300},[2906],{"type":24,"value":2809},{"type":18,"tag":287,"props":2908,"children":2909},{"class":294},[2910],{"type":24,"value":601},{"type":18,"tag":287,"props":2912,"children":2913},{"class":300},[2914],{"type":24,"value":2670},{"type":18,"tag":287,"props":2916,"children":2917},{"class":294},[2918],{"type":24,"value":758},{"type":18,"tag":287,"props":2920,"children":2921},{"class":300},[2922],{"type":24,"value":351},{"type":18,"tag":287,"props":2924,"children":2925},{"class":354},[2926],{"type":24,"value":662},{"type":18,"tag":287,"props":2928,"children":2929},{"class":300},[2930],{"type":24,"value":2834},{"type":18,"tag":287,"props":2932,"children":2933},{"class":294},[2934],{"type":24,"value":346},{"type":18,"tag":287,"props":2936,"children":2937},{"class":300},[2938],{"type":24,"value":2939}," theta_min\n",{"type":18,"tag":287,"props":2941,"children":2942},{"class":289,"line":391},[2943],{"type":18,"tag":287,"props":2944,"children":2945},{},[2946],{"type":24,"value":322},{"type":18,"tag":287,"props":2948,"children":2949},{"class":289,"line":400},[2950,2955,2959,2963,2967,2971,2975,2979,2983,2987,2991],{"type":18,"tag":287,"props":2951,"children":2952},{"class":300},[2953],{"type":24,"value":2954},"ubx[",{"type":18,"tag":287,"props":2956,"children":2957},{"class":354},[2958],{"type":24,"value":591},{"type":18,"tag":287,"props":2960,"children":2961},{"class":300},[2962],{"type":24,"value":2809},{"type":18,"tag":287,"props":2964,"children":2965},{"class":294},[2966],{"type":24,"value":601},{"type":18,"tag":287,"props":2968,"children":2969},{"class":300},[2970],{"type":24,"value":2670},{"type":18,"tag":287,"props":2972,"children":2973},{"class":294},[2974],{"type":24,"value":758},{"type":18,"tag":287,"props":2976,"children":2977},{"class":300},[2978],{"type":24,"value":351},{"type":18,"tag":287,"props":2980,"children":2981},{"class":354},[2982],{"type":24,"value":662},{"type":18,"tag":287,"props":2984,"children":2985},{"class":300},[2986],{"type":24,"value":2834},{"type":18,"tag":287,"props":2988,"children":2989},{"class":294},[2990],{"type":24,"value":346},{"type":18,"tag":287,"props":2992,"children":2993},{"class":300},[2994],{"type":24,"value":2995}," x_max\n",{"type":18,"tag":287,"props":2997,"children":2998},{"class":289,"line":422},[2999,3003,3007,3011,3015,3019,3023,3027,3031,3035,3039],{"type":18,"tag":287,"props":3000,"children":3001},{"class":300},[3002],{"type":24,"value":2954},{"type":18,"tag":287,"props":3004,"children":3005},{"class":354},[3006],{"type":24,"value":662},{"type":18,"tag":287,"props":3008,"children":3009},{"class":300},[3010],{"type":24,"value":2809},{"type":18,"tag":287,"props":3012,"children":3013},{"class":294},[3014],{"type":24,"value":601},{"type":18,"tag":287,"props":3016,"children":3017},{"class":300},[3018],{"type":24,"value":2670},{"type":18,"tag":287,"props":3020,"children":3021},{"class":294},[3022],{"type":24,"value":758},{"type":18,"tag":287,"props":3024,"children":3025},{"class":300},[3026],{"type":24,"value":351},{"type":18,"tag":287,"props":3028,"children":3029},{"class":354},[3030],{"type":24,"value":662},{"type":18,"tag":287,"props":3032,"children":3033},{"class":300},[3034],{"type":24,"value":2834},{"type":18,"tag":287,"props":3036,"children":3037},{"class":294},[3038],{"type":24,"value":346},{"type":18,"tag":287,"props":3040,"children":3041},{"class":300},[3042],{"type":24,"value":3043}," y_max\n",{"type":18,"tag":287,"props":3045,"children":3046},{"class":289,"line":443},[3047,3051,3055,3059,3063,3067,3071,3075,3079,3083,3087],{"type":18,"tag":287,"props":3048,"children":3049},{"class":300},[3050],{"type":24,"value":2954},{"type":18,"tag":287,"props":3052,"children":3053},{"class":354},[3054],{"type":24,"value":611},{"type":18,"tag":287,"props":3056,"children":3057},{"class":300},[3058],{"type":24,"value":2809},{"type":18,"tag":287,"props":3060,"children":3061},{"class":294},[3062],{"type":24,"value":601},{"type":18,"tag":287,"props":3064,"children":3065},{"class":300},[3066],{"type":24,"value":2670},{"type":18,"tag":287,"props":3068,"children":3069},{"class":294},[3070],{"type":24,"value":758},{"type":18,"tag":287,"props":3072,"children":3073},{"class":300},[3074],{"type":24,"value":351},{"type":18,"tag":287,"props":3076,"children":3077},{"class":354},[3078],{"type":24,"value":662},{"type":18,"tag":287,"props":3080,"children":3081},{"class":300},[3082],{"type":24,"value":2834},{"type":18,"tag":287,"props":3084,"children":3085},{"class":294},[3086],{"type":24,"value":346},{"type":18,"tag":287,"props":3088,"children":3089},{"class":300},[3090],{"type":24,"value":3091}," theta_max\n",{"type":18,"tag":287,"props":3093,"children":3094},{"class":289,"line":464},[3095],{"type":18,"tag":287,"props":3096,"children":3097},{},[3098],{"type":24,"value":322},{"type":18,"tag":287,"props":3100,"children":3101},{"class":289,"line":473},[3102,3107,3111,3115,3119,3123,3127,3132,3136,3140,3144,3148,3152,3156,3160,3164,3168,3173,3177],{"type":18,"tag":287,"props":3103,"children":3104},{"class":300},[3105],{"type":24,"value":3106},"lbx[num_states ",{"type":18,"tag":287,"props":3108,"children":3109},{"class":294},[3110],{"type":24,"value":601},{"type":18,"tag":287,"props":3112,"children":3113},{"class":300},[3114],{"type":24,"value":2670},{"type":18,"tag":287,"props":3116,"children":3117},{"class":294},[3118],{"type":24,"value":758},{"type":18,"tag":287,"props":3120,"children":3121},{"class":300},[3122],{"type":24,"value":351},{"type":18,"tag":287,"props":3124,"children":3125},{"class":354},[3126],{"type":24,"value":662},{"type":18,"tag":287,"props":3128,"children":3129},{"class":300},[3130],{"type":24,"value":3131},"): num_states ",{"type":18,"tag":287,"props":3133,"children":3134},{"class":294},[3135],{"type":24,"value":601},{"type":18,"tag":287,"props":3137,"children":3138},{"class":300},[3139],{"type":24,"value":2670},{"type":18,"tag":287,"props":3141,"children":3142},{"class":294},[3143],{"type":24,"value":758},{"type":18,"tag":287,"props":3145,"children":3146},{"class":300},[3147],{"type":24,"value":351},{"type":18,"tag":287,"props":3149,"children":3150},{"class":354},[3151],{"type":24,"value":662},{"type":18,"tag":287,"props":3153,"children":3154},{"class":300},[3155],{"type":24,"value":781},{"type":18,"tag":287,"props":3157,"children":3158},{"class":294},[3159],{"type":24,"value":758},{"type":18,"tag":287,"props":3161,"children":3162},{"class":300},[3163],{"type":24,"value":2695},{"type":18,"tag":287,"props":3165,"children":3166},{"class":294},[3167],{"type":24,"value":601},{"type":18,"tag":287,"props":3169,"children":3170},{"class":300},[3171],{"type":24,"value":3172}," prediction_horizons: num_controls] ",{"type":18,"tag":287,"props":3174,"children":3175},{"class":294},[3176],{"type":24,"value":346},{"type":18,"tag":287,"props":3178,"children":3179},{"class":300},[3180],{"type":24,"value":3181}," u_min\n",{"type":18,"tag":287,"props":3183,"children":3184},{"class":289,"line":504},[3185,3189,3193,3197,3201,3205,3209,3213,3217,3221,3225,3229,3233,3237,3241,3245,3249,3253,3257,3261,3265,3269,3273],{"type":18,"tag":287,"props":3186,"children":3187},{"class":300},[3188],{"type":24,"value":3106},{"type":18,"tag":287,"props":3190,"children":3191},{"class":294},[3192],{"type":24,"value":601},{"type":18,"tag":287,"props":3194,"children":3195},{"class":300},[3196],{"type":24,"value":2670},{"type":18,"tag":287,"props":3198,"children":3199},{"class":294},[3200],{"type":24,"value":758},{"type":18,"tag":287,"props":3202,"children":3203},{"class":300},[3204],{"type":24,"value":351},{"type":18,"tag":287,"props":3206,"children":3207},{"class":354},[3208],{"type":24,"value":662},{"type":18,"tag":287,"props":3210,"children":3211},{"class":300},[3212],{"type":24,"value":781},{"type":18,"tag":287,"props":3214,"children":3215},{"class":294},[3216],{"type":24,"value":758},{"type":18,"tag":287,"props":3218,"children":3219},{"class":300},[3220],{"type":24,"value":351},{"type":18,"tag":287,"props":3222,"children":3223},{"class":354},[3224],{"type":24,"value":662},{"type":18,"tag":287,"props":3226,"children":3227},{"class":300},[3228],{"type":24,"value":2809},{"type":18,"tag":287,"props":3230,"children":3231},{"class":294},[3232],{"type":24,"value":601},{"type":18,"tag":287,"props":3234,"children":3235},{"class":300},[3236],{"type":24,"value":2670},{"type":18,"tag":287,"props":3238,"children":3239},{"class":294},[3240],{"type":24,"value":758},{"type":18,"tag":287,"props":3242,"children":3243},{"class":300},[3244],{"type":24,"value":351},{"type":18,"tag":287,"props":3246,"children":3247},{"class":354},[3248],{"type":24,"value":662},{"type":18,"tag":287,"props":3250,"children":3251},{"class":300},[3252],{"type":24,"value":781},{"type":18,"tag":287,"props":3254,"children":3255},{"class":294},[3256],{"type":24,"value":758},{"type":18,"tag":287,"props":3258,"children":3259},{"class":300},[3260],{"type":24,"value":2695},{"type":18,"tag":287,"props":3262,"children":3263},{"class":294},[3264],{"type":24,"value":601},{"type":18,"tag":287,"props":3266,"children":3267},{"class":300},[3268],{"type":24,"value":3172},{"type":18,"tag":287,"props":3270,"children":3271},{"class":294},[3272],{"type":24,"value":346},{"type":18,"tag":287,"props":3274,"children":3275},{"class":300},[3276],{"type":24,"value":3181},{"type":18,"tag":287,"props":3278,"children":3279},{"class":289,"line":535},[3280],{"type":18,"tag":287,"props":3281,"children":3282},{},[3283],{"type":24,"value":322},{"type":18,"tag":287,"props":3285,"children":3286},{"class":289,"line":544},[3287,3292,3296,3300,3304,3308,3312,3316,3320,3324,3328,3332,3336,3340,3344,3348,3352,3356,3360],{"type":18,"tag":287,"props":3288,"children":3289},{"class":300},[3290],{"type":24,"value":3291},"ubx[num_states ",{"type":18,"tag":287,"props":3293,"children":3294},{"class":294},[3295],{"type":24,"value":601},{"type":18,"tag":287,"props":3297,"children":3298},{"class":300},[3299],{"type":24,"value":2670},{"type":18,"tag":287,"props":3301,"children":3302},{"class":294},[3303],{"type":24,"value":758},{"type":18,"tag":287,"props":3305,"children":3306},{"class":300},[3307],{"type":24,"value":351},{"type":18,"tag":287,"props":3309,"children":3310},{"class":354},[3311],{"type":24,"value":662},{"type":18,"tag":287,"props":3313,"children":3314},{"class":300},[3315],{"type":24,"value":3131},{"type":18,"tag":287,"props":3317,"children":3318},{"class":294},[3319],{"type":24,"value":601},{"type":18,"tag":287,"props":3321,"children":3322},{"class":300},[3323],{"type":24,"value":2670},{"type":18,"tag":287,"props":3325,"children":3326},{"class":294},[3327],{"type":24,"value":758},{"type":18,"tag":287,"props":3329,"children":3330},{"class":300},[3331],{"type":24,"value":351},{"type":18,"tag":287,"props":3333,"children":3334},{"class":354},[3335],{"type":24,"value":662},{"type":18,"tag":287,"props":3337,"children":3338},{"class":300},[3339],{"type":24,"value":781},{"type":18,"tag":287,"props":3341,"children":3342},{"class":294},[3343],{"type":24,"value":758},{"type":18,"tag":287,"props":3345,"children":3346},{"class":300},[3347],{"type":24,"value":2695},{"type":18,"tag":287,"props":3349,"children":3350},{"class":294},[3351],{"type":24,"value":601},{"type":18,"tag":287,"props":3353,"children":3354},{"class":300},[3355],{"type":24,"value":3172},{"type":18,"tag":287,"props":3357,"children":3358},{"class":294},[3359],{"type":24,"value":346},{"type":18,"tag":287,"props":3361,"children":3362},{"class":300},[3363],{"type":24,"value":3364}," u_max\n",{"type":18,"tag":287,"props":3366,"children":3367},{"class":289,"line":553},[3368,3372,3376,3380,3384,3388,3392,3396,3400,3404,3408,3412,3416,3420,3424,3428,3432,3436,3440,3444,3448,3452,3456],{"type":18,"tag":287,"props":3369,"children":3370},{"class":300},[3371],{"type":24,"value":3291},{"type":18,"tag":287,"props":3373,"children":3374},{"class":294},[3375],{"type":24,"value":601},{"type":18,"tag":287,"props":3377,"children":3378},{"class":300},[3379],{"type":24,"value":2670},{"type":18,"tag":287,"props":3381,"children":3382},{"class":294},[3383],{"type":24,"value":758},{"type":18,"tag":287,"props":3385,"children":3386},{"class":300},[3387],{"type":24,"value":351},{"type":18,"tag":287,"props":3389,"children":3390},{"class":354},[3391],{"type":24,"value":662},{"type":18,"tag":287,"props":3393,"children":3394},{"class":300},[3395],{"type":24,"value":781},{"type":18,"tag":287,"props":3397,"children":3398},{"class":294},[3399],{"type":24,"value":758},{"type":18,"tag":287,"props":3401,"children":3402},{"class":300},[3403],{"type":24,"value":351},{"type":18,"tag":287,"props":3405,"children":3406},{"class":354},[3407],{"type":24,"value":662},{"type":18,"tag":287,"props":3409,"children":3410},{"class":300},[3411],{"type":24,"value":2809},{"type":18,"tag":287,"props":3413,"children":3414},{"class":294},[3415],{"type":24,"value":601},{"type":18,"tag":287,"props":3417,"children":3418},{"class":300},[3419],{"type":24,"value":2670},{"type":18,"tag":287,"props":3421,"children":3422},{"class":294},[3423],{"type":24,"value":758},{"type":18,"tag":287,"props":3425,"children":3426},{"class":300},[3427],{"type":24,"value":351},{"type":18,"tag":287,"props":3429,"children":3430},{"class":354},[3431],{"type":24,"value":662},{"type":18,"tag":287,"props":3433,"children":3434},{"class":300},[3435],{"type":24,"value":781},{"type":18,"tag":287,"props":3437,"children":3438},{"class":294},[3439],{"type":24,"value":758},{"type":18,"tag":287,"props":3441,"children":3442},{"class":300},[3443],{"type":24,"value":2695},{"type":18,"tag":287,"props":3445,"children":3446},{"class":294},[3447],{"type":24,"value":601},{"type":18,"tag":287,"props":3449,"children":3450},{"class":300},[3451],{"type":24,"value":3172},{"type":18,"tag":287,"props":3453,"children":3454},{"class":294},[3455],{"type":24,"value":346},{"type":18,"tag":287,"props":3457,"children":3458},{"class":300},[3459],{"type":24,"value":3364},{"type":18,"tag":287,"props":3461,"children":3462},{"class":289,"line":580},[3463],{"type":18,"tag":287,"props":3464,"children":3465},{},[3466],{"type":24,"value":322},{"type":18,"tag":287,"props":3468,"children":3469},{"class":289,"line":619},[3470,3475,3479],{"type":18,"tag":287,"props":3471,"children":3472},{"class":300},[3473],{"type":24,"value":3474},"args ",{"type":18,"tag":287,"props":3476,"children":3477},{"class":294},[3478],{"type":24,"value":346},{"type":18,"tag":287,"props":3480,"children":3481},{"class":300},[3482],{"type":24,"value":2391},{"type":18,"tag":287,"props":3484,"children":3485},{"class":289,"line":652},[3486,3490,3495,3500,3504,3508,3512,3516,3520,3524,3528,3533,3537],{"type":18,"tag":287,"props":3487,"children":3488},{"class":300},[3489],{"type":24,"value":1127},{"type":18,"tag":287,"props":3491,"children":3492},{"class":1694},[3493],{"type":24,"value":3494},"'lbg'",{"type":18,"tag":287,"props":3496,"children":3497},{"class":300},[3498],{"type":24,"value":3499},": ca.",{"type":18,"tag":287,"props":3501,"children":3502},{"class":354},[3503],{"type":24,"value":2656},{"type":18,"tag":287,"props":3505,"children":3506},{"class":300},[3507],{"type":24,"value":2661},{"type":18,"tag":287,"props":3509,"children":3510},{"class":294},[3511],{"type":24,"value":601},{"type":18,"tag":287,"props":3513,"children":3514},{"class":300},[3515],{"type":24,"value":2670},{"type":18,"tag":287,"props":3517,"children":3518},{"class":294},[3519],{"type":24,"value":758},{"type":18,"tag":287,"props":3521,"children":3522},{"class":300},[3523],{"type":24,"value":351},{"type":18,"tag":287,"props":3525,"children":3526},{"class":354},[3527],{"type":24,"value":662},{"type":18,"tag":287,"props":3529,"children":3530},{"class":300},[3531],{"type":24,"value":3532},"), ",{"type":18,"tag":287,"props":3534,"children":3535},{"class":354},[3536],{"type":24,"value":662},{"type":18,"tag":287,"props":3538,"children":3539},{"class":300},[3540],{"type":24,"value":3541},")),\n",{"type":18,"tag":287,"props":3543,"children":3544},{"class":289,"line":670},[3545,3549,3554,3558,3562,3566,3570,3574,3578,3582,3586,3590,3594],{"type":18,"tag":287,"props":3546,"children":3547},{"class":300},[3548],{"type":24,"value":1127},{"type":18,"tag":287,"props":3550,"children":3551},{"class":1694},[3552],{"type":24,"value":3553},"'ubg'",{"type":18,"tag":287,"props":3555,"children":3556},{"class":300},[3557],{"type":24,"value":3499},{"type":18,"tag":287,"props":3559,"children":3560},{"class":354},[3561],{"type":24,"value":2656},{"type":18,"tag":287,"props":3563,"children":3564},{"class":300},[3565],{"type":24,"value":2661},{"type":18,"tag":287,"props":3567,"children":3568},{"class":294},[3569],{"type":24,"value":601},{"type":18,"tag":287,"props":3571,"children":3572},{"class":300},[3573],{"type":24,"value":2670},{"type":18,"tag":287,"props":3575,"children":3576},{"class":294},[3577],{"type":24,"value":758},{"type":18,"tag":287,"props":3579,"children":3580},{"class":300},[3581],{"type":24,"value":351},{"type":18,"tag":287,"props":3583,"children":3584},{"class":354},[3585],{"type":24,"value":662},{"type":18,"tag":287,"props":3587,"children":3588},{"class":300},[3589],{"type":24,"value":3532},{"type":18,"tag":287,"props":3591,"children":3592},{"class":354},[3593],{"type":24,"value":662},{"type":18,"tag":287,"props":3595,"children":3596},{"class":300},[3597],{"type":24,"value":3541},{"type":18,"tag":287,"props":3599,"children":3600},{"class":289,"line":679},[3601,3605,3610],{"type":18,"tag":287,"props":3602,"children":3603},{"class":300},[3604],{"type":24,"value":1127},{"type":18,"tag":287,"props":3606,"children":3607},{"class":1694},[3608],{"type":24,"value":3609},"'lbx'",{"type":18,"tag":287,"props":3611,"children":3612},{"class":300},[3613],{"type":24,"value":3614},": lbx,\n",{"type":18,"tag":287,"props":3616,"children":3617},{"class":289,"line":687},[3618,3622,3627],{"type":18,"tag":287,"props":3619,"children":3620},{"class":300},[3621],{"type":24,"value":1127},{"type":18,"tag":287,"props":3623,"children":3624},{"class":1694},[3625],{"type":24,"value":3626},"'ubx'",{"type":18,"tag":287,"props":3628,"children":3629},{"class":300},[3630],{"type":24,"value":3631},": ubx\n",{"type":18,"tag":287,"props":3633,"children":3634},{"class":289,"line":720},[3635],{"type":18,"tag":287,"props":3636,"children":3637},{"class":300},[3638],{"type":24,"value":2619},{"type":18,"tag":27,"props":3640,"children":3641},{},[3642],{"type":24,"value":3643},"Obtain the solution from the solver at each iteration",{"type":18,"tag":272,"props":3645,"children":3648},{"className":3646,"code":3647,"language":277,"meta":8},[275],"sol = solver(\n            x0=args['x0'],\n            p=args['p'],\n            lbx=args['lbx'],\n            ubx=args['ubx'],\n            lbg=args['lbg'],\n            ubg=args['ubg'],\n        )\n\n        sol_x = ca.reshape(sol['x'][:num_states * (prediction_horizons + 1)], 3, prediction_horizons + 1)\n        sol_u = ca.reshape(sol['x'][num_states * (prediction_horizons + 1):], 2, prediction_horizons)\n",[3649],{"type":18,"tag":280,"props":3650,"children":3651},{},[3652],{"type":18,"tag":272,"props":3653,"children":3654},{"__ignoreMap":8},[3655,3672,3705,3732,3760,3788,3816,3844,3852,3859,3936],{"type":18,"tag":287,"props":3656,"children":3657},{"class":289,"line":290},[3658,3663,3667],{"type":18,"tag":287,"props":3659,"children":3660},{"class":300},[3661],{"type":24,"value":3662},"sol ",{"type":18,"tag":287,"props":3664,"children":3665},{"class":294},[3666],{"type":24,"value":346},{"type":18,"tag":287,"props":3668,"children":3669},{"class":300},[3670],{"type":24,"value":3671}," solver(\n",{"type":18,"tag":287,"props":3673,"children":3674},{"class":289,"line":316},[3675,3680,3686,3690,3695,3700],{"type":18,"tag":287,"props":3676,"children":3677},{"class":300},[3678],{"type":24,"value":3679},"            ",{"type":18,"tag":287,"props":3681,"children":3683},{"class":3682},"ct-657843",[3684],{"type":24,"value":3685},"x0",{"type":18,"tag":287,"props":3687,"children":3688},{"class":294},[3689],{"type":24,"value":346},{"type":18,"tag":287,"props":3691,"children":3692},{"class":300},[3693],{"type":24,"value":3694},"args[",{"type":18,"tag":287,"props":3696,"children":3697},{"class":1694},[3698],{"type":24,"value":3699},"'x0'",{"type":18,"tag":287,"props":3701,"children":3702},{"class":300},[3703],{"type":24,"value":3704},"],\n",{"type":18,"tag":287,"props":3706,"children":3707},{"class":289,"line":325},[3708,3712,3716,3720,3724,3728],{"type":18,"tag":287,"props":3709,"children":3710},{"class":300},[3711],{"type":24,"value":3679},{"type":18,"tag":287,"props":3713,"children":3714},{"class":3682},[3715],{"type":24,"value":27},{"type":18,"tag":287,"props":3717,"children":3718},{"class":294},[3719],{"type":24,"value":346},{"type":18,"tag":287,"props":3721,"children":3722},{"class":300},[3723],{"type":24,"value":3694},{"type":18,"tag":287,"props":3725,"children":3726},{"class":1694},[3727],{"type":24,"value":2436},{"type":18,"tag":287,"props":3729,"children":3730},{"class":300},[3731],{"type":24,"value":3704},{"type":18,"tag":287,"props":3733,"children":3734},{"class":289,"line":335},[3735,3739,3744,3748,3752,3756],{"type":18,"tag":287,"props":3736,"children":3737},{"class":300},[3738],{"type":24,"value":3679},{"type":18,"tag":287,"props":3740,"children":3741},{"class":3682},[3742],{"type":24,"value":3743},"lbx",{"type":18,"tag":287,"props":3745,"children":3746},{"class":294},[3747],{"type":24,"value":346},{"type":18,"tag":287,"props":3749,"children":3750},{"class":300},[3751],{"type":24,"value":3694},{"type":18,"tag":287,"props":3753,"children":3754},{"class":1694},[3755],{"type":24,"value":3609},{"type":18,"tag":287,"props":3757,"children":3758},{"class":300},[3759],{"type":24,"value":3704},{"type":18,"tag":287,"props":3761,"children":3762},{"class":289,"line":360},[3763,3767,3772,3776,3780,3784],{"type":18,"tag":287,"props":3764,"children":3765},{"class":300},[3766],{"type":24,"value":3679},{"type":18,"tag":287,"props":3768,"children":3769},{"class":3682},[3770],{"type":24,"value":3771},"ubx",{"type":18,"tag":287,"props":3773,"children":3774},{"class":294},[3775],{"type":24,"value":346},{"type":18,"tag":287,"props":3777,"children":3778},{"class":300},[3779],{"type":24,"value":3694},{"type":18,"tag":287,"props":3781,"children":3782},{"class":1694},[3783],{"type":24,"value":3626},{"type":18,"tag":287,"props":3785,"children":3786},{"class":300},[3787],{"type":24,"value":3704},{"type":18,"tag":287,"props":3789,"children":3790},{"class":289,"line":369},[3791,3795,3800,3804,3808,3812],{"type":18,"tag":287,"props":3792,"children":3793},{"class":300},[3794],{"type":24,"value":3679},{"type":18,"tag":287,"props":3796,"children":3797},{"class":3682},[3798],{"type":24,"value":3799},"lbg",{"type":18,"tag":287,"props":3801,"children":3802},{"class":294},[3803],{"type":24,"value":346},{"type":18,"tag":287,"props":3805,"children":3806},{"class":300},[3807],{"type":24,"value":3694},{"type":18,"tag":287,"props":3809,"children":3810},{"class":1694},[3811],{"type":24,"value":3494},{"type":18,"tag":287,"props":3813,"children":3814},{"class":300},[3815],{"type":24,"value":3704},{"type":18,"tag":287,"props":3817,"children":3818},{"class":289,"line":391},[3819,3823,3828,3832,3836,3840],{"type":18,"tag":287,"props":3820,"children":3821},{"class":300},[3822],{"type":24,"value":3679},{"type":18,"tag":287,"props":3824,"children":3825},{"class":3682},[3826],{"type":24,"value":3827},"ubg",{"type":18,"tag":287,"props":3829,"children":3830},{"class":294},[3831],{"type":24,"value":346},{"type":18,"tag":287,"props":3833,"children":3834},{"class":300},[3835],{"type":24,"value":3694},{"type":18,"tag":287,"props":3837,"children":3838},{"class":1694},[3839],{"type":24,"value":3553},{"type":18,"tag":287,"props":3841,"children":3842},{"class":300},[3843],{"type":24,"value":3704},{"type":18,"tag":287,"props":3845,"children":3846},{"class":289,"line":400},[3847],{"type":18,"tag":287,"props":3848,"children":3849},{"class":300},[3850],{"type":24,"value":3851},"        )\n",{"type":18,"tag":287,"props":3853,"children":3854},{"class":289,"line":422},[3855],{"type":18,"tag":287,"props":3856,"children":3857},{},[3858],{"type":24,"value":322},{"type":18,"tag":287,"props":3860,"children":3861},{"class":289,"line":443},[3862,3867,3871,3876,3880,3885,3889,3893,3897,3901,3905,3910,3915,3920,3924,3928,3932],{"type":18,"tag":287,"props":3863,"children":3864},{"class":300},[3865],{"type":24,"value":3866},"        sol_x ",{"type":18,"tag":287,"props":3868,"children":3869},{"class":294},[3870],{"type":24,"value":346},{"type":18,"tag":287,"props":3872,"children":3873},{"class":300},[3874],{"type":24,"value":3875}," ca.reshape(sol[",{"type":18,"tag":287,"props":3877,"children":3878},{"class":1694},[3879],{"type":24,"value":2419},{"type":18,"tag":287,"props":3881,"children":3882},{"class":300},[3883],{"type":24,"value":3884},"][:num_states ",{"type":18,"tag":287,"props":3886,"children":3887},{"class":294},[3888],{"type":24,"value":601},{"type":18,"tag":287,"props":3890,"children":3891},{"class":300},[3892],{"type":24,"value":2670},{"type":18,"tag":287,"props":3894,"children":3895},{"class":294},[3896],{"type":24,"value":758},{"type":18,"tag":287,"props":3898,"children":3899},{"class":300},[3900],{"type":24,"value":351},{"type":18,"tag":287,"props":3902,"children":3903},{"class":354},[3904],{"type":24,"value":662},{"type":18,"tag":287,"props":3906,"children":3907},{"class":300},[3908],{"type":24,"value":3909},")], ",{"type":18,"tag":287,"props":3911,"children":3912},{"class":354},[3913],{"type":24,"value":3914},"3",{"type":18,"tag":287,"props":3916,"children":3917},{"class":300},[3918],{"type":24,"value":3919},", prediction_horizons ",{"type":18,"tag":287,"props":3921,"children":3922},{"class":294},[3923],{"type":24,"value":758},{"type":18,"tag":287,"props":3925,"children":3926},{"class":300},[3927],{"type":24,"value":351},{"type":18,"tag":287,"props":3929,"children":3930},{"class":354},[3931],{"type":24,"value":662},{"type":18,"tag":287,"props":3933,"children":3934},{"class":300},[3935],{"type":24,"value":1702},{"type":18,"tag":287,"props":3937,"children":3938},{"class":289,"line":464},[3939,3944,3948,3952,3956,3961,3965,3969,3973,3977,3981,3986,3990],{"type":18,"tag":287,"props":3940,"children":3941},{"class":300},[3942],{"type":24,"value":3943},"        sol_u ",{"type":18,"tag":287,"props":3945,"children":3946},{"class":294},[3947],{"type":24,"value":346},{"type":18,"tag":287,"props":3949,"children":3950},{"class":300},[3951],{"type":24,"value":3875},{"type":18,"tag":287,"props":3953,"children":3954},{"class":1694},[3955],{"type":24,"value":2419},{"type":18,"tag":287,"props":3957,"children":3958},{"class":300},[3959],{"type":24,"value":3960},"][num_states ",{"type":18,"tag":287,"props":3962,"children":3963},{"class":294},[3964],{"type":24,"value":601},{"type":18,"tag":287,"props":3966,"children":3967},{"class":300},[3968],{"type":24,"value":2670},{"type":18,"tag":287,"props":3970,"children":3971},{"class":294},[3972],{"type":24,"value":758},{"type":18,"tag":287,"props":3974,"children":3975},{"class":300},[3976],{"type":24,"value":351},{"type":18,"tag":287,"props":3978,"children":3979},{"class":354},[3980],{"type":24,"value":662},{"type":18,"tag":287,"props":3982,"children":3983},{"class":300},[3984],{"type":24,"value":3985},"):], ",{"type":18,"tag":287,"props":3987,"children":3988},{"class":354},[3989],{"type":24,"value":611},{"type":18,"tag":287,"props":3991,"children":3992},{"class":300},[3993],{"type":24,"value":3994},", prediction_horizons)",{"type":18,"tag":19,"props":3996,"children":3998},{"id":3997},"result",[3999],{"type":24,"value":4000},"Result",{"type":18,"tag":27,"props":4002,"children":4003},{},[4004],{"type":24,"value":4005},"I use MPC to control the differential drive robot to move from it zero position the the desired postion that I want to follow !.\nI generate a circle trajectory and I fit this curve into my beautiful and robustness cost and then volia !!!.",{"type":18,"tag":4007,"props":4008,"children":4013},"figure",{"className":4009},[4010,4011,4012],"mb-4","inline-block","max-w-sm",[4014,4016],{"type":24,"value":4015},"\n  ",{"type":18,"tag":43,"props":4017,"children":4020},{"className":4018,"src":4019,"width":47,"height":48},[46],"/topics/robotics/nmpc/diff_mpc.png",[],{"type":18,"tag":56,"props":4022,"children":4024},{"className":4023},[59,60,61,62],[4025],{"type":24,"value":4026},"\n    Plot of differential drive robot follow the circle trajectory !!!.\n",{"type":18,"tag":19,"props":4028,"children":4030},{"id":4029},"in-conclusion",[4031],{"type":24,"value":4032},"In conclusion",{"type":18,"tag":27,"props":4034,"children":4035},{},[4036],{"type":24,"value":4037},"In my opinion, I think MPC is suitable for the control system, since it can provide the significant control input that was predicted over the finite future of time. This can ensure the safety of the system and also can provide a quick look or reaction to the control action of the system too.",{"type":18,"tag":19,"props":4039,"children":4041},{"id":4040},"reference",[4042],{"type":24,"value":4043},"Reference",{"type":18,"tag":4045,"props":4046,"children":4047},"ol",{},[4048,4061,4072],{"type":18,"tag":115,"props":4049,"children":4050},{},[4051,4053],{"type":24,"value":4052},"MPC-and-MHE-implementation-in-MATLAB-using-Casadi: ",{"type":18,"tag":4054,"props":4055,"children":4059},"a",{"href":4056,"rel":4057},"https://github.com/MMehrez/MPC-and-MHE-implementation-in-MATLAB-using-Casadi",[4058],"nofollow",[4060],{"type":24,"value":4056},{"type":18,"tag":115,"props":4062,"children":4063},{},[4064,4066],{"type":24,"value":4065},"CasAdi: ",{"type":18,"tag":4054,"props":4067,"children":4070},{"href":4068,"rel":4069},"https://web.casadi.org",[4058],[4071],{"type":24,"value":4068},{"type":18,"tag":115,"props":4073,"children":4074},{},[4075,4077],{"type":24,"value":4076},"PathTracking: ",{"type":18,"tag":4054,"props":4078,"children":4081},{"href":4079,"rel":4080},"https://github.com/SokhengDin/PathTracking",[4058],[4082],{"type":24,"value":4079},{"type":18,"tag":4084,"children":4085},"style",[4086],{"type":24,"value":4087},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-326375{color:#6A737D;}\n.ct-533739{color:#79B8FF;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":316,"depth":316,"links":4089},[4090,4091,4092,4093,4094,4095,4096,4097,4098],{"id":21,"depth":316,"text":25},{"id":68,"depth":316,"text":71},{"id":217,"depth":316,"text":220},{"id":1517,"depth":316,"text":1520},{"id":1545,"depth":316,"text":1548},{"id":1585,"depth":316,"text":1588},{"id":3997,"depth":316,"text":4000},{"id":4029,"depth":316,"text":4032},{"id":4040,"depth":316,"text":4043},"markdown","content:topics:robotics:nonlinear-mpc.md","content","topics/robotics/nonlinear-mpc.md","md",{"_path":4105,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":4106,"description":4107,"author":4108,"slug":4109,"tag":4109,"img":4110,"body":4111,"_type":4099,"_id":6028,"_source":4101,"_file":6029,"_extension":4103},"/topics/robotics/pid-controller","Introduction to PID Controller in Python","PID Control is a feedback control","DIN SOKHENG","pid","/topics/robotics/nmpc/PID.png",{"type":15,"children":4112,"toc":6014},[4113,4119,4130,4136,4141,4147,4151,4190,4199,4205,4211,4221,4227,4232,4266,4272,4277,4282,4292,4298,4303,4307,4312,4316,4321,4734,4751,5298,5303,5309,5316,5334,5420,5425,5487,5492,5576,5588,5876,5882,5901,5915,5919,5929,5935,5945,5951,5956,5961,5967,6010],{"type":18,"tag":19,"props":4114,"children":4116},{"id":4115},"what-is-pid-controller",[4117],{"type":24,"value":4118},"What is PID Controller ?",{"type":18,"tag":27,"props":4120,"children":4121},{},[4122,4124,4128],{"type":24,"value":4123},"The Proportional Integral Derivative (PID) controller is a traditional method in control systems that has found widespread use in control system engineering and industrial applications since its emergence in the 1940s. A PID controller is considered a feedback controller, aiming to minimize the error between the system's feedback and the desired setpoint by manually or automatically fine-tuning the coefficients ",{"type":18,"tag":119,"props":4125,"children":4127},{"latex-express":4126,"styles":122},"K_{P}, K_{I}, K_{D}",[],{"type":24,"value":4129},".",{"type":18,"tag":19,"props":4131,"children":4133},{"id":4132},"how-it-works",[4134],{"type":24,"value":4135},"How it works ?",{"type":18,"tag":27,"props":4137,"children":4138},{},[4139],{"type":24,"value":4140},"Imagine you want to control the speed of a DC motor to reach 300 RPM, but due to the natural response of the DC motor, it cannot reach the desired angular speed. PID offers a solution to this natural response by adjusting the system's time response using its three components, as shown in the formula below.",{"type":18,"tag":19,"props":4142,"children":4144},{"id":4143},"formulation",[4145],{"type":24,"value":4146},"Formulation",{"type":18,"tag":119,"props":4148,"children":4150},{"latex-express":4149,"styles":59},"u(t) = K_{p}e(t) + K_{I} \\int_{0}^{t} e(t) dt + K_{D} \\frac{d e(t)}{dt} ",[],{"type":18,"tag":111,"props":4152,"children":4153},{},[4154,4163,4172,4181],{"type":18,"tag":115,"props":4155,"children":4156},{},[4157,4161],{"type":18,"tag":119,"props":4158,"children":4160},{"latex-express":4159,"styles":122},"K_{P}",[],{"type":24,"value":4162}," represents the proportional gain.",{"type":18,"tag":115,"props":4164,"children":4165},{},[4166,4170],{"type":18,"tag":119,"props":4167,"children":4169},{"latex-express":4168,"styles":122},"K_{I}",[],{"type":24,"value":4171}," represents the integral gain.",{"type":18,"tag":115,"props":4173,"children":4174},{},[4175,4179],{"type":18,"tag":119,"props":4176,"children":4178},{"latex-express":4177,"styles":122},"K_{D}",[],{"type":24,"value":4180}," represents the derivative gain.",{"type":18,"tag":115,"props":4182,"children":4183},{},[4184,4188],{"type":18,"tag":119,"props":4185,"children":4187},{"latex-express":4186,"styles":122},"e(t)=target-feedback",[],{"type":24,"value":4189}," is the error between target point and feedback of the system",{"type":18,"tag":4007,"props":4191,"children":4193},{"className":4192},[4010,4011,4012],[4194,4195],{"type":24,"value":4015},{"type":18,"tag":43,"props":4196,"children":4198},{"className":4197,"src":4110},[46],[],{"type":18,"tag":56,"props":4200,"children":4202},{"className":4201},[59,60,61,62],[4203],{"type":24,"value":4204},"\n    The Block diagram of PID Controller\n",{"type":18,"tag":19,"props":4206,"children":4208},{"id":4207},"response-time",[4209],{"type":24,"value":4210},"Response Time",{"type":18,"tag":4007,"props":4212,"children":4214},{"className":4213},[4010,4011,4012],[4215,4216],{"type":24,"value":4015},{"type":18,"tag":43,"props":4217,"children":4220},{"className":4218,"src":4219},[46],"/topics/robotics/nmpc/response_timepid.png",[],{"type":18,"tag":56,"props":4222,"children":4224},{"className":4223},[59,60,61,62],[4225],{"type":24,"value":4226},"\n    The response time of the system with each K_P, K_I, K_D\n",{"type":18,"tag":27,"props":4228,"children":4229},{},[4230],{"type":24,"value":4231},"As you can see in the figure above, the response time of the system is difference.",{"type":18,"tag":111,"props":4233,"children":4234},{},[4235,4246,4256],{"type":18,"tag":115,"props":4236,"children":4237},{},[4238,4240,4244],{"type":24,"value":4239},"The response time with ",{"type":18,"tag":119,"props":4241,"children":4243},{"latex-express":4242,"styles":122},"K_{I}=2",[],{"type":24,"value":4245}," the system is likely to overshoot before reaching the steady-state, which may not be suitable for applications like controlling a DC motor.",{"type":18,"tag":115,"props":4247,"children":4248},{},[4249,4250,4254],{"type":24,"value":4239},{"type":18,"tag":119,"props":4251,"children":4253},{"latex-express":4252,"styles":122},"K_{i}=0.5, ",[],{"type":24,"value":4255},"  the response does not overshoot but has a slower response to reach the steady-state.",{"type":18,"tag":115,"props":4257,"children":4258},{},[4259,4260,4264],{"type":24,"value":4239},{"type":18,"tag":119,"props":4261,"children":4263},{"latex-express":4262,"styles":122},"K_{p}=1, K_{i}=1, K_{d}=1",[],{"type":24,"value":4265},"  there is a slight overshoot, but the steady-state is reached faster.",{"type":18,"tag":19,"props":4267,"children":4269},{"id":4268},"how-can-we-write-pid-code-in-python",[4270],{"type":24,"value":4271},"How can we write PID code in Python ?",{"type":18,"tag":27,"props":4273,"children":4274},{},[4275],{"type":24,"value":4276},"Let's use a differential drive robot as a case study system. A differential drive robot is commonly used in robotics and automation, making it an ideal choice for a demonstration.",{"type":18,"tag":27,"props":4278,"children":4279},{},[4280],{"type":24,"value":4281},"The configuration of Differential Drive Robot in axes OXY.",{"type":18,"tag":4007,"props":4283,"children":4285},{"className":4284},[4010,4011,4012],[4286,4287],{"type":24,"value":4015},{"type":18,"tag":43,"props":4288,"children":4291},{"className":4289,"src":4290},[46],"/topics/robotics/nmpc/diff_drive.png",[],{"type":18,"tag":56,"props":4293,"children":4295},{"className":4294},[59,60,61,62],[4296],{"type":24,"value":4297},"\n    The configuration of Differential Drive Robot in axes OXY.\n",{"type":18,"tag":27,"props":4299,"children":4300},{},[4301],{"type":24,"value":4302},"The forward kinematic equation",{"type":18,"tag":119,"props":4304,"children":4306},{"latex-express":4305,"styles":59},"\n\\begin{bmatrix} v_{x} \\\\ v_{y} \\\\ v_{\\theta} \\end{bmatrix} = \\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{\\theta} \\\\ \\omega \\end{bmatrix}\n ",[],{"type":18,"tag":27,"props":4308,"children":4309},{},[4310],{"type":24,"value":4311},"So, if we discretize the forward kinematic with a certain sampling time, we will get",{"type":18,"tag":119,"props":4313,"children":4315},{"latex-express":4314,"styles":59},"\n\\begin{bmatrix} x_{t+1} \\\\ y_{t+1} \\\\ \\theta_{t+1} \\end{bmatrix} = \\begin{bmatrix} x_{t} \\\\ y_{t} \\\\ \\theta_{t} \\end{bmatrix} +\\begin{bmatrix} v\\sin{(\\theta)} \\\\ v\\cos{(\\theta)} \\\\ \\omega \\end{bmatrix} \\times \\Delta t\n ",[],{"type":18,"tag":27,"props":4317,"children":4318},{},[4319],{"type":24,"value":4320},"In Python,",{"type":18,"tag":272,"props":4322,"children":4325},{"className":4323,"code":4324,"language":277,"meta":8},[275],"class DifferentialDrive:\n    def __init__(self):\n        self.r = 0.05\n        self.L = 0.25\n    def forward_kinematic(self, v, omega, yaw):\n        vx = v*np.cos(yaw)\n        vy = v*np.sin(yaw)\n        vyaw = omega\n\n        return vx, vy, vyaw\n    def discrete_state(self, x, y, yaw, v, omega, dt):\n        dx, dy, dyaw = self.forward_kinematic(v, omega, yaw)\n        x_next = x + dx * dt\n        y_next = y + dy * dt\n        yaw_next = yaw + dyaw * dt\n\n        return x_next, y_next, yaw_next\n",[4326],{"type":18,"tag":280,"props":4327,"children":4328},{},[4329],{"type":18,"tag":272,"props":4330,"children":4331},{"__ignoreMap":8},[4332,4355,4381,4412,4441,4466,4492,4517,4534,4541,4558,4583,4608,4643,4677,4711,4718],{"type":18,"tag":287,"props":4333,"children":4334},{"class":289,"line":290},[4335,4340,4344,4350],{"type":18,"tag":287,"props":4336,"children":4337},{"class":294},[4338],{"type":24,"value":4339},"class",{"type":18,"tag":287,"props":4341,"children":4342},{"class":300},[4343],{"type":24,"value":351},{"type":18,"tag":287,"props":4345,"children":4347},{"class":4346},"ct-806137",[4348],{"type":24,"value":4349},"DifferentialDrive",{"type":18,"tag":287,"props":4351,"children":4352},{"class":300},[4353],{"type":24,"value":4354},":\n",{"type":18,"tag":287,"props":4356,"children":4357},{"class":289,"line":316},[4358,4362,4367,4371,4376],{"type":18,"tag":287,"props":4359,"children":4360},{"class":300},[4361],{"type":24,"value":1127},{"type":18,"tag":287,"props":4363,"children":4364},{"class":294},[4365],{"type":24,"value":4366},"def",{"type":18,"tag":287,"props":4368,"children":4369},{"class":300},[4370],{"type":24,"value":351},{"type":18,"tag":287,"props":4372,"children":4373},{"class":354},[4374],{"type":24,"value":4375},"__init__",{"type":18,"tag":287,"props":4377,"children":4378},{"class":300},[4379],{"type":24,"value":4380},"(self):\n",{"type":18,"tag":287,"props":4382,"children":4383},{"class":289,"line":325},[4384,4389,4394,4399,4403,4407],{"type":18,"tag":287,"props":4385,"children":4386},{"class":300},[4387],{"type":24,"value":4388},"        ",{"type":18,"tag":287,"props":4390,"children":4391},{"class":354},[4392],{"type":24,"value":4393},"self",{"type":18,"tag":287,"props":4395,"children":4396},{"class":300},[4397],{"type":24,"value":4398},".r ",{"type":18,"tag":287,"props":4400,"children":4401},{"class":294},[4402],{"type":24,"value":346},{"type":18,"tag":287,"props":4404,"children":4405},{"class":300},[4406],{"type":24,"value":351},{"type":18,"tag":287,"props":4408,"children":4409},{"class":354},[4410],{"type":24,"value":4411},"0.05\n",{"type":18,"tag":287,"props":4413,"children":4414},{"class":289,"line":335},[4415,4419,4423,4428,4432,4436],{"type":18,"tag":287,"props":4416,"children":4417},{"class":300},[4418],{"type":24,"value":4388},{"type":18,"tag":287,"props":4420,"children":4421},{"class":354},[4422],{"type":24,"value":4393},{"type":18,"tag":287,"props":4424,"children":4425},{"class":300},[4426],{"type":24,"value":4427},".L ",{"type":18,"tag":287,"props":4429,"children":4430},{"class":294},[4431],{"type":24,"value":346},{"type":18,"tag":287,"props":4433,"children":4434},{"class":300},[4435],{"type":24,"value":351},{"type":18,"tag":287,"props":4437,"children":4438},{"class":354},[4439],{"type":24,"value":4440},"0.25\n",{"type":18,"tag":287,"props":4442,"children":4443},{"class":289,"line":360},[4444,4448,4452,4456,4461],{"type":18,"tag":287,"props":4445,"children":4446},{"class":300},[4447],{"type":24,"value":1127},{"type":18,"tag":287,"props":4449,"children":4450},{"class":294},[4451],{"type":24,"value":4366},{"type":18,"tag":287,"props":4453,"children":4454},{"class":300},[4455],{"type":24,"value":351},{"type":18,"tag":287,"props":4457,"children":4458},{"class":4346},[4459],{"type":24,"value":4460},"forward_kinematic",{"type":18,"tag":287,"props":4462,"children":4463},{"class":300},[4464],{"type":24,"value":4465},"(self, v, omega, yaw):\n",{"type":18,"tag":287,"props":4467,"children":4468},{"class":289,"line":369},[4469,4474,4478,4483,4487],{"type":18,"tag":287,"props":4470,"children":4471},{"class":300},[4472],{"type":24,"value":4473},"        vx ",{"type":18,"tag":287,"props":4475,"children":4476},{"class":294},[4477],{"type":24,"value":346},{"type":18,"tag":287,"props":4479,"children":4480},{"class":300},[4481],{"type":24,"value":4482}," v",{"type":18,"tag":287,"props":4484,"children":4485},{"class":294},[4486],{"type":24,"value":601},{"type":18,"tag":287,"props":4488,"children":4489},{"class":300},[4490],{"type":24,"value":4491},"np.cos(yaw)\n",{"type":18,"tag":287,"props":4493,"children":4494},{"class":289,"line":391},[4495,4500,4504,4508,4512],{"type":18,"tag":287,"props":4496,"children":4497},{"class":300},[4498],{"type":24,"value":4499},"        vy ",{"type":18,"tag":287,"props":4501,"children":4502},{"class":294},[4503],{"type":24,"value":346},{"type":18,"tag":287,"props":4505,"children":4506},{"class":300},[4507],{"type":24,"value":4482},{"type":18,"tag":287,"props":4509,"children":4510},{"class":294},[4511],{"type":24,"value":601},{"type":18,"tag":287,"props":4513,"children":4514},{"class":300},[4515],{"type":24,"value":4516},"np.sin(yaw)\n",{"type":18,"tag":287,"props":4518,"children":4519},{"class":289,"line":400},[4520,4525,4529],{"type":18,"tag":287,"props":4521,"children":4522},{"class":300},[4523],{"type":24,"value":4524},"        vyaw ",{"type":18,"tag":287,"props":4526,"children":4527},{"class":294},[4528],{"type":24,"value":346},{"type":18,"tag":287,"props":4530,"children":4531},{"class":300},[4532],{"type":24,"value":4533}," omega\n",{"type":18,"tag":287,"props":4535,"children":4536},{"class":289,"line":422},[4537],{"type":18,"tag":287,"props":4538,"children":4539},{},[4540],{"type":24,"value":322},{"type":18,"tag":287,"props":4542,"children":4543},{"class":289,"line":443},[4544,4548,4553],{"type":18,"tag":287,"props":4545,"children":4546},{"class":300},[4547],{"type":24,"value":4388},{"type":18,"tag":287,"props":4549,"children":4550},{"class":294},[4551],{"type":24,"value":4552},"return",{"type":18,"tag":287,"props":4554,"children":4555},{"class":300},[4556],{"type":24,"value":4557}," vx, vy, vyaw\n",{"type":18,"tag":287,"props":4559,"children":4560},{"class":289,"line":464},[4561,4565,4569,4573,4578],{"type":18,"tag":287,"props":4562,"children":4563},{"class":300},[4564],{"type":24,"value":1127},{"type":18,"tag":287,"props":4566,"children":4567},{"class":294},[4568],{"type":24,"value":4366},{"type":18,"tag":287,"props":4570,"children":4571},{"class":300},[4572],{"type":24,"value":351},{"type":18,"tag":287,"props":4574,"children":4575},{"class":4346},[4576],{"type":24,"value":4577},"discrete_state",{"type":18,"tag":287,"props":4579,"children":4580},{"class":300},[4581],{"type":24,"value":4582},"(self, x, y, yaw, v, omega, dt):\n",{"type":18,"tag":287,"props":4584,"children":4585},{"class":289,"line":473},[4586,4591,4595,4599,4603],{"type":18,"tag":287,"props":4587,"children":4588},{"class":300},[4589],{"type":24,"value":4590},"        dx, dy, dyaw ",{"type":18,"tag":287,"props":4592,"children":4593},{"class":294},[4594],{"type":24,"value":346},{"type":18,"tag":287,"props":4596,"children":4597},{"class":300},[4598],{"type":24,"value":351},{"type":18,"tag":287,"props":4600,"children":4601},{"class":354},[4602],{"type":24,"value":4393},{"type":18,"tag":287,"props":4604,"children":4605},{"class":300},[4606],{"type":24,"value":4607},".forward_kinematic(v, omega, yaw)\n",{"type":18,"tag":287,"props":4609,"children":4610},{"class":289,"line":504},[4611,4616,4620,4625,4629,4634,4638],{"type":18,"tag":287,"props":4612,"children":4613},{"class":300},[4614],{"type":24,"value":4615},"        x_next ",{"type":18,"tag":287,"props":4617,"children":4618},{"class":294},[4619],{"type":24,"value":346},{"type":18,"tag":287,"props":4621,"children":4622},{"class":300},[4623],{"type":24,"value":4624}," x ",{"type":18,"tag":287,"props":4626,"children":4627},{"class":294},[4628],{"type":24,"value":758},{"type":18,"tag":287,"props":4630,"children":4631},{"class":300},[4632],{"type":24,"value":4633}," dx ",{"type":18,"tag":287,"props":4635,"children":4636},{"class":294},[4637],{"type":24,"value":601},{"type":18,"tag":287,"props":4639,"children":4640},{"class":300},[4641],{"type":24,"value":4642}," dt\n",{"type":18,"tag":287,"props":4644,"children":4645},{"class":289,"line":535},[4646,4651,4655,4660,4664,4669,4673],{"type":18,"tag":287,"props":4647,"children":4648},{"class":300},[4649],{"type":24,"value":4650},"        y_next ",{"type":18,"tag":287,"props":4652,"children":4653},{"class":294},[4654],{"type":24,"value":346},{"type":18,"tag":287,"props":4656,"children":4657},{"class":300},[4658],{"type":24,"value":4659}," y ",{"type":18,"tag":287,"props":4661,"children":4662},{"class":294},[4663],{"type":24,"value":758},{"type":18,"tag":287,"props":4665,"children":4666},{"class":300},[4667],{"type":24,"value":4668}," dy ",{"type":18,"tag":287,"props":4670,"children":4671},{"class":294},[4672],{"type":24,"value":601},{"type":18,"tag":287,"props":4674,"children":4675},{"class":300},[4676],{"type":24,"value":4642},{"type":18,"tag":287,"props":4678,"children":4679},{"class":289,"line":544},[4680,4685,4689,4694,4698,4703,4707],{"type":18,"tag":287,"props":4681,"children":4682},{"class":300},[4683],{"type":24,"value":4684},"        yaw_next ",{"type":18,"tag":287,"props":4686,"children":4687},{"class":294},[4688],{"type":24,"value":346},{"type":18,"tag":287,"props":4690,"children":4691},{"class":300},[4692],{"type":24,"value":4693}," yaw ",{"type":18,"tag":287,"props":4695,"children":4696},{"class":294},[4697],{"type":24,"value":758},{"type":18,"tag":287,"props":4699,"children":4700},{"class":300},[4701],{"type":24,"value":4702}," dyaw ",{"type":18,"tag":287,"props":4704,"children":4705},{"class":294},[4706],{"type":24,"value":601},{"type":18,"tag":287,"props":4708,"children":4709},{"class":300},[4710],{"type":24,"value":4642},{"type":18,"tag":287,"props":4712,"children":4713},{"class":289,"line":553},[4714],{"type":18,"tag":287,"props":4715,"children":4716},{},[4717],{"type":24,"value":322},{"type":18,"tag":287,"props":4719,"children":4720},{"class":289,"line":580},[4721,4725,4729],{"type":18,"tag":287,"props":4722,"children":4723},{"class":300},[4724],{"type":24,"value":4388},{"type":18,"tag":287,"props":4726,"children":4727},{"class":294},[4728],{"type":24,"value":4552},{"type":18,"tag":287,"props":4730,"children":4731},{"class":300},[4732],{"type":24,"value":4733}," x_next, y_next, yaw_next",{"type":18,"tag":27,"props":4735,"children":4736},{},[4737,4739,4743,4745,4750],{"type":24,"value":4738},"The ",{"type":18,"tag":227,"props":4740,"children":4741},{},[4742],{"type":24,"value":231},{"type":24,"value":4744}," class that we defined, has all the need attribute to use for PID control !!. We just need to write another class for our ",{"type":18,"tag":227,"props":4746,"children":4747},{},[4748],{"type":24,"value":4749}," PID Controller ",{"type":24,"value":4129},{"type":18,"tag":272,"props":4752,"children":4755},{"className":4753,"code":4754,"language":277,"meta":8},[275],"class PIDController:\n    def __init__(self, kp, ki, kd, dt):\n\n        self.kp = kp\n        self.ki = ki\n        self.kd = kd\n        self.dt = dt\n        self.integral = 0\n\n    def calculate_pid(self, errors):\n        # Calculate proportional error\n        proportional = self.kp * errors[-1]\n        # Calculate integration error\n        integral = self.integral + self.ki * (errors[-1]) * self.dt\n        self.integral = integral\n        # Calculate derivative error\n        derivative = self.kd * (errors[-1] - errors[-2])/self.dt\n\n        output = proportional + integral + derivative\n\n        return output\n",[4756],{"type":18,"tag":280,"props":4757,"children":4758},{},[4759],{"type":18,"tag":272,"props":4760,"children":4761},{"__ignoreMap":8},[4762,4782,4806,4813,4838,4863,4888,4912,4940,4947,4972,4984,5030,5042,5120,5144,5156,5233,5240,5275,5282],{"type":18,"tag":287,"props":4763,"children":4764},{"class":289,"line":290},[4765,4769,4773,4778],{"type":18,"tag":287,"props":4766,"children":4767},{"class":294},[4768],{"type":24,"value":4339},{"type":18,"tag":287,"props":4770,"children":4771},{"class":300},[4772],{"type":24,"value":351},{"type":18,"tag":287,"props":4774,"children":4775},{"class":4346},[4776],{"type":24,"value":4777},"PIDController",{"type":18,"tag":287,"props":4779,"children":4780},{"class":300},[4781],{"type":24,"value":4354},{"type":18,"tag":287,"props":4783,"children":4784},{"class":289,"line":316},[4785,4789,4793,4797,4801],{"type":18,"tag":287,"props":4786,"children":4787},{"class":300},[4788],{"type":24,"value":1127},{"type":18,"tag":287,"props":4790,"children":4791},{"class":294},[4792],{"type":24,"value":4366},{"type":18,"tag":287,"props":4794,"children":4795},{"class":300},[4796],{"type":24,"value":351},{"type":18,"tag":287,"props":4798,"children":4799},{"class":354},[4800],{"type":24,"value":4375},{"type":18,"tag":287,"props":4802,"children":4803},{"class":300},[4804],{"type":24,"value":4805},"(self, kp, ki, kd, dt):\n",{"type":18,"tag":287,"props":4807,"children":4808},{"class":289,"line":325},[4809],{"type":18,"tag":287,"props":4810,"children":4811},{},[4812],{"type":24,"value":322},{"type":18,"tag":287,"props":4814,"children":4815},{"class":289,"line":335},[4816,4820,4824,4829,4833],{"type":18,"tag":287,"props":4817,"children":4818},{"class":300},[4819],{"type":24,"value":4388},{"type":18,"tag":287,"props":4821,"children":4822},{"class":354},[4823],{"type":24,"value":4393},{"type":18,"tag":287,"props":4825,"children":4826},{"class":300},[4827],{"type":24,"value":4828},".kp ",{"type":18,"tag":287,"props":4830,"children":4831},{"class":294},[4832],{"type":24,"value":346},{"type":18,"tag":287,"props":4834,"children":4835},{"class":300},[4836],{"type":24,"value":4837}," kp\n",{"type":18,"tag":287,"props":4839,"children":4840},{"class":289,"line":360},[4841,4845,4849,4854,4858],{"type":18,"tag":287,"props":4842,"children":4843},{"class":300},[4844],{"type":24,"value":4388},{"type":18,"tag":287,"props":4846,"children":4847},{"class":354},[4848],{"type":24,"value":4393},{"type":18,"tag":287,"props":4850,"children":4851},{"class":300},[4852],{"type":24,"value":4853},".ki ",{"type":18,"tag":287,"props":4855,"children":4856},{"class":294},[4857],{"type":24,"value":346},{"type":18,"tag":287,"props":4859,"children":4860},{"class":300},[4861],{"type":24,"value":4862}," ki\n",{"type":18,"tag":287,"props":4864,"children":4865},{"class":289,"line":369},[4866,4870,4874,4879,4883],{"type":18,"tag":287,"props":4867,"children":4868},{"class":300},[4869],{"type":24,"value":4388},{"type":18,"tag":287,"props":4871,"children":4872},{"class":354},[4873],{"type":24,"value":4393},{"type":18,"tag":287,"props":4875,"children":4876},{"class":300},[4877],{"type":24,"value":4878},".kd ",{"type":18,"tag":287,"props":4880,"children":4881},{"class":294},[4882],{"type":24,"value":346},{"type":18,"tag":287,"props":4884,"children":4885},{"class":300},[4886],{"type":24,"value":4887}," kd\n",{"type":18,"tag":287,"props":4889,"children":4890},{"class":289,"line":391},[4891,4895,4899,4904,4908],{"type":18,"tag":287,"props":4892,"children":4893},{"class":300},[4894],{"type":24,"value":4388},{"type":18,"tag":287,"props":4896,"children":4897},{"class":354},[4898],{"type":24,"value":4393},{"type":18,"tag":287,"props":4900,"children":4901},{"class":300},[4902],{"type":24,"value":4903},".dt ",{"type":18,"tag":287,"props":4905,"children":4906},{"class":294},[4907],{"type":24,"value":346},{"type":18,"tag":287,"props":4909,"children":4910},{"class":300},[4911],{"type":24,"value":4642},{"type":18,"tag":287,"props":4913,"children":4914},{"class":289,"line":400},[4915,4919,4923,4928,4932,4936],{"type":18,"tag":287,"props":4916,"children":4917},{"class":300},[4918],{"type":24,"value":4388},{"type":18,"tag":287,"props":4920,"children":4921},{"class":354},[4922],{"type":24,"value":4393},{"type":18,"tag":287,"props":4924,"children":4925},{"class":300},[4926],{"type":24,"value":4927},".integral ",{"type":18,"tag":287,"props":4929,"children":4930},{"class":294},[4931],{"type":24,"value":346},{"type":18,"tag":287,"props":4933,"children":4934},{"class":300},[4935],{"type":24,"value":351},{"type":18,"tag":287,"props":4937,"children":4938},{"class":354},[4939],{"type":24,"value":2611},{"type":18,"tag":287,"props":4941,"children":4942},{"class":289,"line":422},[4943],{"type":18,"tag":287,"props":4944,"children":4945},{},[4946],{"type":24,"value":322},{"type":18,"tag":287,"props":4948,"children":4949},{"class":289,"line":443},[4950,4954,4958,4962,4967],{"type":18,"tag":287,"props":4951,"children":4952},{"class":300},[4953],{"type":24,"value":1127},{"type":18,"tag":287,"props":4955,"children":4956},{"class":294},[4957],{"type":24,"value":4366},{"type":18,"tag":287,"props":4959,"children":4960},{"class":300},[4961],{"type":24,"value":351},{"type":18,"tag":287,"props":4963,"children":4964},{"class":4346},[4965],{"type":24,"value":4966},"calculate_pid",{"type":18,"tag":287,"props":4968,"children":4969},{"class":300},[4970],{"type":24,"value":4971},"(self, errors):\n",{"type":18,"tag":287,"props":4973,"children":4974},{"class":289,"line":464},[4975,4979],{"type":18,"tag":287,"props":4976,"children":4977},{"class":300},[4978],{"type":24,"value":4388},{"type":18,"tag":287,"props":4980,"children":4981},{"class":329},[4982],{"type":24,"value":4983},"# Calculate proportional error\n",{"type":18,"tag":287,"props":4985,"children":4986},{"class":289,"line":473},[4987,4992,4996,5000,5004,5008,5012,5017,5021,5025],{"type":18,"tag":287,"props":4988,"children":4989},{"class":300},[4990],{"type":24,"value":4991},"        proportional ",{"type":18,"tag":287,"props":4993,"children":4994},{"class":294},[4995],{"type":24,"value":346},{"type":18,"tag":287,"props":4997,"children":4998},{"class":300},[4999],{"type":24,"value":351},{"type":18,"tag":287,"props":5001,"children":5002},{"class":354},[5003],{"type":24,"value":4393},{"type":18,"tag":287,"props":5005,"children":5006},{"class":300},[5007],{"type":24,"value":4828},{"type":18,"tag":287,"props":5009,"children":5010},{"class":294},[5011],{"type":24,"value":601},{"type":18,"tag":287,"props":5013,"children":5014},{"class":300},[5015],{"type":24,"value":5016}," errors[",{"type":18,"tag":287,"props":5018,"children":5019},{"class":294},[5020],{"type":24,"value":1986},{"type":18,"tag":287,"props":5022,"children":5023},{"class":354},[5024],{"type":24,"value":662},{"type":18,"tag":287,"props":5026,"children":5027},{"class":300},[5028],{"type":24,"value":5029},"]\n",{"type":18,"tag":287,"props":5031,"children":5032},{"class":289,"line":504},[5033,5037],{"type":18,"tag":287,"props":5034,"children":5035},{"class":300},[5036],{"type":24,"value":4388},{"type":18,"tag":287,"props":5038,"children":5039},{"class":329},[5040],{"type":24,"value":5041},"# Calculate integration error\n",{"type":18,"tag":287,"props":5043,"children":5044},{"class":289,"line":535},[5045,5050,5054,5058,5062,5066,5070,5074,5078,5082,5086,5091,5095,5099,5103,5107,5111,5115],{"type":18,"tag":287,"props":5046,"children":5047},{"class":300},[5048],{"type":24,"value":5049},"        integral ",{"type":18,"tag":287,"props":5051,"children":5052},{"class":294},[5053],{"type":24,"value":346},{"type":18,"tag":287,"props":5055,"children":5056},{"class":300},[5057],{"type":24,"value":351},{"type":18,"tag":287,"props":5059,"children":5060},{"class":354},[5061],{"type":24,"value":4393},{"type":18,"tag":287,"props":5063,"children":5064},{"class":300},[5065],{"type":24,"value":4927},{"type":18,"tag":287,"props":5067,"children":5068},{"class":294},[5069],{"type":24,"value":758},{"type":18,"tag":287,"props":5071,"children":5072},{"class":300},[5073],{"type":24,"value":351},{"type":18,"tag":287,"props":5075,"children":5076},{"class":354},[5077],{"type":24,"value":4393},{"type":18,"tag":287,"props":5079,"children":5080},{"class":300},[5081],{"type":24,"value":4853},{"type":18,"tag":287,"props":5083,"children":5084},{"class":294},[5085],{"type":24,"value":601},{"type":18,"tag":287,"props":5087,"children":5088},{"class":300},[5089],{"type":24,"value":5090}," (errors[",{"type":18,"tag":287,"props":5092,"children":5093},{"class":294},[5094],{"type":24,"value":1986},{"type":18,"tag":287,"props":5096,"children":5097},{"class":354},[5098],{"type":24,"value":662},{"type":18,"tag":287,"props":5100,"children":5101},{"class":300},[5102],{"type":24,"value":1242},{"type":18,"tag":287,"props":5104,"children":5105},{"class":294},[5106],{"type":24,"value":601},{"type":18,"tag":287,"props":5108,"children":5109},{"class":300},[5110],{"type":24,"value":351},{"type":18,"tag":287,"props":5112,"children":5113},{"class":354},[5114],{"type":24,"value":4393},{"type":18,"tag":287,"props":5116,"children":5117},{"class":300},[5118],{"type":24,"value":5119},".dt\n",{"type":18,"tag":287,"props":5121,"children":5122},{"class":289,"line":544},[5123,5127,5131,5135,5139],{"type":18,"tag":287,"props":5124,"children":5125},{"class":300},[5126],{"type":24,"value":4388},{"type":18,"tag":287,"props":5128,"children":5129},{"class":354},[5130],{"type":24,"value":4393},{"type":18,"tag":287,"props":5132,"children":5133},{"class":300},[5134],{"type":24,"value":4927},{"type":18,"tag":287,"props":5136,"children":5137},{"class":294},[5138],{"type":24,"value":346},{"type":18,"tag":287,"props":5140,"children":5141},{"class":300},[5142],{"type":24,"value":5143}," integral\n",{"type":18,"tag":287,"props":5145,"children":5146},{"class":289,"line":553},[5147,5151],{"type":18,"tag":287,"props":5148,"children":5149},{"class":300},[5150],{"type":24,"value":4388},{"type":18,"tag":287,"props":5152,"children":5153},{"class":329},[5154],{"type":24,"value":5155},"# Calculate derivative error\n",{"type":18,"tag":287,"props":5157,"children":5158},{"class":289,"line":580},[5159,5164,5168,5172,5176,5180,5184,5188,5192,5196,5200,5204,5208,5212,5216,5221,5225,5229],{"type":18,"tag":287,"props":5160,"children":5161},{"class":300},[5162],{"type":24,"value":5163},"        derivative ",{"type":18,"tag":287,"props":5165,"children":5166},{"class":294},[5167],{"type":24,"value":346},{"type":18,"tag":287,"props":5169,"children":5170},{"class":300},[5171],{"type":24,"value":351},{"type":18,"tag":287,"props":5173,"children":5174},{"class":354},[5175],{"type":24,"value":4393},{"type":18,"tag":287,"props":5177,"children":5178},{"class":300},[5179],{"type":24,"value":4878},{"type":18,"tag":287,"props":5181,"children":5182},{"class":294},[5183],{"type":24,"value":601},{"type":18,"tag":287,"props":5185,"children":5186},{"class":300},[5187],{"type":24,"value":5090},{"type":18,"tag":287,"props":5189,"children":5190},{"class":294},[5191],{"type":24,"value":1986},{"type":18,"tag":287,"props":5193,"children":5194},{"class":354},[5195],{"type":24,"value":662},{"type":18,"tag":287,"props":5197,"children":5198},{"class":300},[5199],{"type":24,"value":1160},{"type":18,"tag":287,"props":5201,"children":5202},{"class":294},[5203],{"type":24,"value":1986},{"type":18,"tag":287,"props":5205,"children":5206},{"class":300},[5207],{"type":24,"value":5016},{"type":18,"tag":287,"props":5209,"children":5210},{"class":294},[5211],{"type":24,"value":1986},{"type":18,"tag":287,"props":5213,"children":5214},{"class":354},[5215],{"type":24,"value":611},{"type":18,"tag":287,"props":5217,"children":5218},{"class":300},[5219],{"type":24,"value":5220},"])",{"type":18,"tag":287,"props":5222,"children":5223},{"class":294},[5224],{"type":24,"value":768},{"type":18,"tag":287,"props":5226,"children":5227},{"class":354},[5228],{"type":24,"value":4393},{"type":18,"tag":287,"props":5230,"children":5231},{"class":300},[5232],{"type":24,"value":5119},{"type":18,"tag":287,"props":5234,"children":5235},{"class":289,"line":619},[5236],{"type":18,"tag":287,"props":5237,"children":5238},{},[5239],{"type":24,"value":322},{"type":18,"tag":287,"props":5241,"children":5242},{"class":289,"line":652},[5243,5248,5252,5257,5261,5266,5270],{"type":18,"tag":287,"props":5244,"children":5245},{"class":300},[5246],{"type":24,"value":5247},"        output ",{"type":18,"tag":287,"props":5249,"children":5250},{"class":294},[5251],{"type":24,"value":346},{"type":18,"tag":287,"props":5253,"children":5254},{"class":300},[5255],{"type":24,"value":5256}," proportional ",{"type":18,"tag":287,"props":5258,"children":5259},{"class":294},[5260],{"type":24,"value":758},{"type":18,"tag":287,"props":5262,"children":5263},{"class":300},[5264],{"type":24,"value":5265}," integral ",{"type":18,"tag":287,"props":5267,"children":5268},{"class":294},[5269],{"type":24,"value":758},{"type":18,"tag":287,"props":5271,"children":5272},{"class":300},[5273],{"type":24,"value":5274}," derivative\n",{"type":18,"tag":287,"props":5276,"children":5277},{"class":289,"line":670},[5278],{"type":18,"tag":287,"props":5279,"children":5280},{},[5281],{"type":24,"value":322},{"type":18,"tag":287,"props":5283,"children":5284},{"class":289,"line":679},[5285,5289,5293],{"type":18,"tag":287,"props":5286,"children":5287},{"class":300},[5288],{"type":24,"value":4388},{"type":18,"tag":287,"props":5290,"children":5291},{"class":294},[5292],{"type":24,"value":4552},{"type":18,"tag":287,"props":5294,"children":5295},{"class":300},[5296],{"type":24,"value":5297}," output",{"type":18,"tag":27,"props":5299,"children":5300},{},[5301],{"type":24,"value":5302},"Don't worry, this class just defined as the PID formula. So, by doing this, we will be able to use all the characteristic of our PID controller.",{"type":18,"tag":19,"props":5304,"children":5306},{"id":5305},"experiment",[5307],{"type":24,"value":5308},"Experiment",{"type":18,"tag":5310,"props":5311,"children":5313},"h3",{"id":5312},"pid-for-point-control",[5314],{"type":24,"value":5315},"PID for point control",{"type":18,"tag":27,"props":5317,"children":5318},{},[5319,5321,5325,5327,5332],{"type":24,"value":5320},"If I want my DifferentialDrive robot go to point ",{"type":18,"tag":119,"props":5322,"children":5324},{"latex-express":5323,"styles":122},"x_{ref}, y_{ref}, \\theta_{ref}",[],{"type":24,"value":5326},", Then I can calculate the error between the reference point and the feedback position of the robot. I simulated my robot in the  ",{"type":18,"tag":1595,"props":5328,"children":5329},{},[5330],{"type":24,"value":5331},"for loop",{"type":24,"value":5333}," and calculate this error recursively.",{"type":18,"tag":272,"props":5335,"children":5338},{"className":5336,"code":5337,"language":277,"meta":8},[275],"error_x.append(ref_path[0]-current_x)\nerror_y.append(ref_path[1]-current_y)\nerror_yaw.append(ref_path[2]-current_yaw)\n",[5339],{"type":18,"tag":280,"props":5340,"children":5341},{},[5342],{"type":18,"tag":272,"props":5343,"children":5344},{"__ignoreMap":8},[5345,5370,5395],{"type":18,"tag":287,"props":5346,"children":5347},{"class":289,"line":290},[5348,5353,5357,5361,5365],{"type":18,"tag":287,"props":5349,"children":5350},{"class":300},[5351],{"type":24,"value":5352},"error_x.append(ref_path[",{"type":18,"tag":287,"props":5354,"children":5355},{"class":354},[5356],{"type":24,"value":591},{"type":18,"tag":287,"props":5358,"children":5359},{"class":300},[5360],{"type":24,"value":596},{"type":18,"tag":287,"props":5362,"children":5363},{"class":294},[5364],{"type":24,"value":1986},{"type":18,"tag":287,"props":5366,"children":5367},{"class":300},[5368],{"type":24,"value":5369},"current_x)\n",{"type":18,"tag":287,"props":5371,"children":5372},{"class":289,"line":316},[5373,5378,5382,5386,5390],{"type":18,"tag":287,"props":5374,"children":5375},{"class":300},[5376],{"type":24,"value":5377},"error_y.append(ref_path[",{"type":18,"tag":287,"props":5379,"children":5380},{"class":354},[5381],{"type":24,"value":662},{"type":18,"tag":287,"props":5383,"children":5384},{"class":300},[5385],{"type":24,"value":596},{"type":18,"tag":287,"props":5387,"children":5388},{"class":294},[5389],{"type":24,"value":1986},{"type":18,"tag":287,"props":5391,"children":5392},{"class":300},[5393],{"type":24,"value":5394},"current_y)\n",{"type":18,"tag":287,"props":5396,"children":5397},{"class":289,"line":325},[5398,5403,5407,5411,5415],{"type":18,"tag":287,"props":5399,"children":5400},{"class":300},[5401],{"type":24,"value":5402},"error_yaw.append(ref_path[",{"type":18,"tag":287,"props":5404,"children":5405},{"class":354},[5406],{"type":24,"value":611},{"type":18,"tag":287,"props":5408,"children":5409},{"class":300},[5410],{"type":24,"value":596},{"type":18,"tag":287,"props":5412,"children":5413},{"class":294},[5414],{"type":24,"value":1986},{"type":18,"tag":287,"props":5416,"children":5417},{"class":300},[5418],{"type":24,"value":5419},"current_yaw)",{"type":18,"tag":27,"props":5421,"children":5422},{},[5423],{"type":24,"value":5424},"Then, let's apply PID",{"type":18,"tag":272,"props":5426,"children":5429},{"className":5427,"code":5428,"language":277,"meta":8},[275],"output_vx = pid_controller_x.calculate_pid(error_x)\noutput_vy = pid_controller_y.calculate_pid(error_y)\noutput_omega = pid_controller_yaw.calculate_pid(error_yaw)\n",[5430],{"type":18,"tag":280,"props":5431,"children":5432},{},[5433],{"type":18,"tag":272,"props":5434,"children":5435},{"__ignoreMap":8},[5436,5453,5470],{"type":18,"tag":287,"props":5437,"children":5438},{"class":289,"line":290},[5439,5444,5448],{"type":18,"tag":287,"props":5440,"children":5441},{"class":300},[5442],{"type":24,"value":5443},"output_vx ",{"type":18,"tag":287,"props":5445,"children":5446},{"class":294},[5447],{"type":24,"value":346},{"type":18,"tag":287,"props":5449,"children":5450},{"class":300},[5451],{"type":24,"value":5452}," pid_controller_x.calculate_pid(error_x)\n",{"type":18,"tag":287,"props":5454,"children":5455},{"class":289,"line":316},[5456,5461,5465],{"type":18,"tag":287,"props":5457,"children":5458},{"class":300},[5459],{"type":24,"value":5460},"output_vy ",{"type":18,"tag":287,"props":5462,"children":5463},{"class":294},[5464],{"type":24,"value":346},{"type":18,"tag":287,"props":5466,"children":5467},{"class":300},[5468],{"type":24,"value":5469}," pid_controller_y.calculate_pid(error_y)\n",{"type":18,"tag":287,"props":5471,"children":5472},{"class":289,"line":325},[5473,5478,5482],{"type":18,"tag":287,"props":5474,"children":5475},{"class":300},[5476],{"type":24,"value":5477},"output_omega ",{"type":18,"tag":287,"props":5479,"children":5480},{"class":294},[5481],{"type":24,"value":346},{"type":18,"tag":287,"props":5483,"children":5484},{"class":300},[5485],{"type":24,"value":5486}," pid_controller_yaw.calculate_pid(error_yaw)",{"type":18,"tag":27,"props":5488,"children":5489},{},[5490],{"type":24,"value":5491},"We will also need to update current position of the robot with the given optimal value from the PID controller.",{"type":18,"tag":272,"props":5493,"children":5496},{"className":5494,"code":5495,"language":277,"meta":8},[275],"x_next, y_next, yaw_next = diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) # Skip for omega we only look for x, y\ncurrent_x = x_next\ncurrent_y = y_next\ncurrent_yaw = yaw_next\n",[5497],{"type":18,"tag":280,"props":5498,"children":5499},{},[5500],{"type":18,"tag":272,"props":5501,"children":5502},{"__ignoreMap":8},[5503,5525,5542,5559],{"type":18,"tag":287,"props":5504,"children":5505},{"class":289,"line":290},[5506,5511,5515,5520],{"type":18,"tag":287,"props":5507,"children":5508},{"class":300},[5509],{"type":24,"value":5510},"x_next, y_next, yaw_next ",{"type":18,"tag":287,"props":5512,"children":5513},{"class":294},[5514],{"type":24,"value":346},{"type":18,"tag":287,"props":5516,"children":5517},{"class":300},[5518],{"type":24,"value":5519}," diff_drive.discrete_state(current_x, current_y, current_yaw, v_pid, omega_pid, sampling_time) ",{"type":18,"tag":287,"props":5521,"children":5522},{"class":329},[5523],{"type":24,"value":5524},"# Skip for omega we only look for x, y\n",{"type":18,"tag":287,"props":5526,"children":5527},{"class":289,"line":316},[5528,5533,5537],{"type":18,"tag":287,"props":5529,"children":5530},{"class":300},[5531],{"type":24,"value":5532},"current_x ",{"type":18,"tag":287,"props":5534,"children":5535},{"class":294},[5536],{"type":24,"value":346},{"type":18,"tag":287,"props":5538,"children":5539},{"class":300},[5540],{"type":24,"value":5541}," x_next\n",{"type":18,"tag":287,"props":5543,"children":5544},{"class":289,"line":325},[5545,5550,5554],{"type":18,"tag":287,"props":5546,"children":5547},{"class":300},[5548],{"type":24,"value":5549},"current_y ",{"type":18,"tag":287,"props":5551,"children":5552},{"class":294},[5553],{"type":24,"value":346},{"type":18,"tag":287,"props":5555,"children":5556},{"class":300},[5557],{"type":24,"value":5558}," y_next\n",{"type":18,"tag":287,"props":5560,"children":5561},{"class":289,"line":335},[5562,5567,5571],{"type":18,"tag":287,"props":5563,"children":5564},{"class":300},[5565],{"type":24,"value":5566},"current_yaw ",{"type":18,"tag":287,"props":5568,"children":5569},{"class":294},[5570],{"type":24,"value":346},{"type":18,"tag":287,"props":5572,"children":5573},{"class":300},[5574],{"type":24,"value":5575}," yaw_next",{"type":18,"tag":27,"props":5577,"children":5578},{},[5579,5581,5586],{"type":24,"value":5580},"I use ",{"type":18,"tag":1595,"props":5582,"children":5583},{},[5584],{"type":24,"value":5585},"matplotlib",{"type":24,"value":5587}," library to simulate my robot.",{"type":18,"tag":272,"props":5589,"children":5592},{"className":5590,"code":5591,"language":277,"meta":8},[275],"plt.clf()\nplt.gcf().canvas.mpl_connect('key_release_event',\n            lambda event: [exit(0) if event.key == 'escape' else None])\nplot_arrow(current_x, current_y, current_yaw)\nplt.plot(5, 5)\nplt.plot(ref_path[0], ref_path[1], marker=\"x\", color=\"blue\", label=\"Input Trajectory\")\nplt.axis(\"equal\")\nplt.grid(True)\nplt.legend()\nplt.pause(0.0001)\n",[5593],{"type":18,"tag":280,"props":5594,"children":5595},{},[5596],{"type":18,"tag":272,"props":5597,"children":5598},{"__ignoreMap":8},[5599,5607,5624,5704,5712,5737,5816,5833,5850,5858],{"type":18,"tag":287,"props":5600,"children":5601},{"class":289,"line":290},[5602],{"type":18,"tag":287,"props":5603,"children":5604},{"class":300},[5605],{"type":24,"value":5606},"plt.clf()\n",{"type":18,"tag":287,"props":5608,"children":5609},{"class":289,"line":316},[5610,5615,5620],{"type":18,"tag":287,"props":5611,"children":5612},{"class":300},[5613],{"type":24,"value":5614},"plt.gcf().canvas.mpl_connect(",{"type":18,"tag":287,"props":5616,"children":5617},{"class":1694},[5618],{"type":24,"value":5619},"'key_release_event'",{"type":18,"tag":287,"props":5621,"children":5622},{"class":300},[5623],{"type":24,"value":2516},{"type":18,"tag":287,"props":5625,"children":5626},{"class":289,"line":325},[5627,5631,5635,5640,5645,5650,5654,5658,5663,5668,5673,5677,5682,5686,5691,5695,5700],{"type":18,"tag":287,"props":5628,"children":5629},{"class":300},[5630],{"type":24,"value":3679},{"type":18,"tag":287,"props":5632,"children":5633},{"class":294},[5634],{"type":24,"value":572},{"type":18,"tag":287,"props":5636,"children":5637},{"class":300},[5638],{"type":24,"value":5639}," event: [",{"type":18,"tag":287,"props":5641,"children":5642},{"class":354},[5643],{"type":24,"value":5644},"exit",{"type":18,"tag":287,"props":5646,"children":5647},{"class":300},[5648],{"type":24,"value":5649},"(",{"type":18,"tag":287,"props":5651,"children":5652},{"class":354},[5653],{"type":24,"value":591},{"type":18,"tag":287,"props":5655,"children":5656},{"class":300},[5657],{"type":24,"value":781},{"type":18,"tag":287,"props":5659,"children":5660},{"class":294},[5661],{"type":24,"value":5662},"if",{"type":18,"tag":287,"props":5664,"children":5665},{"class":300},[5666],{"type":24,"value":5667}," event.key ",{"type":18,"tag":287,"props":5669,"children":5670},{"class":294},[5671],{"type":24,"value":5672},"==",{"type":18,"tag":287,"props":5674,"children":5675},{"class":300},[5676],{"type":24,"value":351},{"type":18,"tag":287,"props":5678,"children":5679},{"class":1694},[5680],{"type":24,"value":5681},"'escape'",{"type":18,"tag":287,"props":5683,"children":5684},{"class":300},[5685],{"type":24,"value":351},{"type":18,"tag":287,"props":5687,"children":5688},{"class":294},[5689],{"type":24,"value":5690},"else",{"type":18,"tag":287,"props":5692,"children":5693},{"class":300},[5694],{"type":24,"value":351},{"type":18,"tag":287,"props":5696,"children":5697},{"class":354},[5698],{"type":24,"value":5699},"None",{"type":18,"tag":287,"props":5701,"children":5702},{"class":300},[5703],{"type":24,"value":676},{"type":18,"tag":287,"props":5705,"children":5706},{"class":289,"line":335},[5707],{"type":18,"tag":287,"props":5708,"children":5709},{"class":300},[5710],{"type":24,"value":5711},"plot_arrow(current_x, current_y, current_yaw)\n",{"type":18,"tag":287,"props":5713,"children":5714},{"class":289,"line":360},[5715,5720,5725,5729,5733],{"type":18,"tag":287,"props":5716,"children":5717},{"class":300},[5718],{"type":24,"value":5719},"plt.plot(",{"type":18,"tag":287,"props":5721,"children":5722},{"class":354},[5723],{"type":24,"value":5724},"5",{"type":18,"tag":287,"props":5726,"children":5727},{"class":300},[5728],{"type":24,"value":2015},{"type":18,"tag":287,"props":5730,"children":5731},{"class":354},[5732],{"type":24,"value":5724},{"type":18,"tag":287,"props":5734,"children":5735},{"class":300},[5736],{"type":24,"value":1702},{"type":18,"tag":287,"props":5738,"children":5739},{"class":289,"line":369},[5740,5745,5749,5754,5758,5763,5768,5772,5776,5780,5785,5789,5794,5798,5803,5807,5812],{"type":18,"tag":287,"props":5741,"children":5742},{"class":300},[5743],{"type":24,"value":5744},"plt.plot(ref_path[",{"type":18,"tag":287,"props":5746,"children":5747},{"class":354},[5748],{"type":24,"value":591},{"type":18,"tag":287,"props":5750,"children":5751},{"class":300},[5752],{"type":24,"value":5753},"], ref_path[",{"type":18,"tag":287,"props":5755,"children":5756},{"class":354},[5757],{"type":24,"value":662},{"type":18,"tag":287,"props":5759,"children":5760},{"class":300},[5761],{"type":24,"value":5762},"], ",{"type":18,"tag":287,"props":5764,"children":5765},{"class":3682},[5766],{"type":24,"value":5767},"marker",{"type":18,"tag":287,"props":5769,"children":5770},{"class":294},[5771],{"type":24,"value":346},{"type":18,"tag":287,"props":5773,"children":5774},{"class":1694},[5775],{"type":24,"value":1697},{"type":18,"tag":287,"props":5777,"children":5778},{"class":300},[5779],{"type":24,"value":2015},{"type":18,"tag":287,"props":5781,"children":5782},{"class":3682},[5783],{"type":24,"value":5784},"color",{"type":18,"tag":287,"props":5786,"children":5787},{"class":294},[5788],{"type":24,"value":346},{"type":18,"tag":287,"props":5790,"children":5791},{"class":1694},[5792],{"type":24,"value":5793},"\"blue\"",{"type":18,"tag":287,"props":5795,"children":5796},{"class":300},[5797],{"type":24,"value":2015},{"type":18,"tag":287,"props":5799,"children":5800},{"class":3682},[5801],{"type":24,"value":5802},"label",{"type":18,"tag":287,"props":5804,"children":5805},{"class":294},[5806],{"type":24,"value":346},{"type":18,"tag":287,"props":5808,"children":5809},{"class":1694},[5810],{"type":24,"value":5811},"\"Input Trajectory\"",{"type":18,"tag":287,"props":5813,"children":5814},{"class":300},[5815],{"type":24,"value":1702},{"type":18,"tag":287,"props":5817,"children":5818},{"class":289,"line":391},[5819,5824,5829],{"type":18,"tag":287,"props":5820,"children":5821},{"class":300},[5822],{"type":24,"value":5823},"plt.axis(",{"type":18,"tag":287,"props":5825,"children":5826},{"class":1694},[5827],{"type":24,"value":5828},"\"equal\"",{"type":18,"tag":287,"props":5830,"children":5831},{"class":300},[5832],{"type":24,"value":1702},{"type":18,"tag":287,"props":5834,"children":5835},{"class":289,"line":400},[5836,5841,5846],{"type":18,"tag":287,"props":5837,"children":5838},{"class":300},[5839],{"type":24,"value":5840},"plt.grid(",{"type":18,"tag":287,"props":5842,"children":5843},{"class":354},[5844],{"type":24,"value":5845},"True",{"type":18,"tag":287,"props":5847,"children":5848},{"class":300},[5849],{"type":24,"value":1702},{"type":18,"tag":287,"props":5851,"children":5852},{"class":289,"line":422},[5853],{"type":18,"tag":287,"props":5854,"children":5855},{"class":300},[5856],{"type":24,"value":5857},"plt.legend()\n",{"type":18,"tag":287,"props":5859,"children":5860},{"class":289,"line":443},[5861,5866,5871],{"type":18,"tag":287,"props":5862,"children":5863},{"class":300},[5864],{"type":24,"value":5865},"plt.pause(",{"type":18,"tag":287,"props":5867,"children":5868},{"class":354},[5869],{"type":24,"value":5870},"0.0001",{"type":18,"tag":287,"props":5872,"children":5873},{"class":300},[5874],{"type":24,"value":5875},")",{"type":18,"tag":5310,"props":5877,"children":5879},{"id":5878},"path-tracking",[5880],{"type":24,"value":5881},"Path Tracking",{"type":18,"tag":27,"props":5883,"children":5884},{},[5885,5887,5892,5894,5899],{"type":24,"value":5886},"The code is all way the same. The different is that, I fit the continuous point into the robot instead of fixed goal point. I use ",{"type":18,"tag":1595,"props":5888,"children":5889},{},[5890],{"type":24,"value":5891},"BeizerCurve",{"type":24,"value":5893}," function to generate ",{"type":18,"tag":227,"props":5895,"children":5896},{},[5897],{"type":24,"value":5898}," Spline Trajectory ",{"type":24,"value":5900}," for the robot.",{"type":18,"tag":27,"props":5902,"children":5903},{},[5904,5906,5913],{"type":24,"value":5905},"The full code is published open-source on my Github. Link here ",{"type":18,"tag":4054,"props":5907,"children":5910},{"href":5908,"rel":5909},"https://github.com/SokhengDin/PathTracking/tree/main/PID",[4058],[5911],{"type":24,"value":5912},"Github",{"type":24,"value":5914},". Hit the star for me if you like my work 🙂.",{"type":18,"tag":5310,"props":5916,"children":5917},{"id":3997},[5918],{"type":24,"value":4000},{"type":18,"tag":4007,"props":5920,"children":5922},{"className":5921},[4010,4011,4012],[5923,5924],{"type":24,"value":4015},{"type":18,"tag":43,"props":5925,"children":5928},{"className":5926,"src":5927},[46],"/topics/robotics/nmpc/Figure_pid_p.png",[],{"type":18,"tag":56,"props":5930,"children":5932},{"className":5931},[59,60,61,62],[5933],{"type":24,"value":5934},"\n    PID Controller with position control on Differential Drive Robot\n",{"type":18,"tag":4007,"props":5936,"children":5938},{"className":5937},[4010,4011,4012],[5939,5940],{"type":24,"value":4015},{"type":18,"tag":43,"props":5941,"children":5944},{"className":5942,"src":5943},[46],"/topics/robotics/nmpc/Figure_pid_t.png",[],{"type":18,"tag":56,"props":5946,"children":5948},{"className":5947},[59,60,61,62],[5949],{"type":24,"value":5950},"\n    PID Controller with path tracking control on Differential Drive Robot\n",{"type":18,"tag":19,"props":5952,"children":5953},{"id":4029},[5954],{"type":24,"value":5955},"In Conclusion",{"type":18,"tag":27,"props":5957,"children":5958},{},[5959],{"type":24,"value":5960},"In my opinion, the PID Controller is an excellent choice for most control system applications due to its simplicity and powerful capabilities in handling complex control challenges arising from various systems.",{"type":18,"tag":19,"props":5962,"children":5964},{"id":5963},"references",[5965],{"type":24,"value":5966},"References",{"type":18,"tag":4045,"props":5968,"children":5969},{},[5970,5983,5988,5999],{"type":18,"tag":115,"props":5971,"children":5972},{},[5973,5975,5982],{"type":24,"value":5974},"BeizerCurve: ",{"type":18,"tag":4054,"props":5976,"children":5979},{"href":5977,"rel":5978},"https://en.wikipedia.org/wiki/B%C3%A9zier_curve",[4058],[5980],{"type":24,"value":5981},"https://en.wikipedia.org/wiki/Bézier_curve",{"type":24,"value":4129},{"type":18,"tag":115,"props":5984,"children":5985},{},[5986],{"type":24,"value":5987},"PID Controller: Control Systems Engineering by Normal S. Nise.",{"type":18,"tag":115,"props":5989,"children":5990},{},[5991,5993],{"type":24,"value":5992},"Beizer Path : ",{"type":18,"tag":4054,"props":5994,"children":5997},{"href":5995,"rel":5996},"https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathPlanning/BezierPath",[4058],[5998],{"type":24,"value":5995},{"type":18,"tag":115,"props":6000,"children":6001},{},[6002,6004],{"type":24,"value":6003},"PID Lecture : ",{"type":18,"tag":4054,"props":6005,"children":6008},{"href":6006,"rel":6007},"https://www.cds.caltech.edu/~murray/courses/cds101/fa02/caltech/astrom-ch6.pdf",[4058],[6009],{"type":24,"value":6006},{"type":18,"tag":4084,"children":6011},[6012],{"type":24,"value":6013},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-806137{color:#B392F0;}\n.ct-533739{color:#79B8FF;}\n.ct-326375{color:#6A737D;}\n.ct-244866{color:#9ECBFF;}\n.ct-657843{color:#FFAB70;}",{"title":8,"searchDepth":316,"depth":316,"links":6015},[6016,6017,6018,6019,6020,6021,6026,6027],{"id":4115,"depth":316,"text":4118},{"id":4132,"depth":316,"text":4135},{"id":4143,"depth":316,"text":4146},{"id":4207,"depth":316,"text":4210},{"id":4268,"depth":316,"text":4271},{"id":5305,"depth":316,"text":5308,"children":6022},[6023,6024,6025],{"id":5312,"depth":325,"text":5315},{"id":5878,"depth":325,"text":5881},{"id":3997,"depth":325,"text":4000},{"id":4029,"depth":316,"text":5955},{"id":5963,"depth":316,"text":5966},"content:topics:robotics:pid-controller.md","topics/robotics/pid-controller.md",{"_path":6031,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6032,"description":6033,"slug":6034,"tag":6034,"img":6035,"body":6036,"_type":4099,"_id":6226,"_source":4101,"_file":6227,"_extension":4103},"/topics/robotics/pure-pursuit","Pure Pursuit Controller","Introduction to Pure Pursuit Controller","pure-pursuit","/topics/robotics/nmpc/pure_pursuit.png",{"type":15,"children":6037,"toc":6219},[6038,6043,6053,6059,6064,6117,6123,6128,6180,6186,6191,6214],{"type":18,"tag":19,"props":6039,"children":6041},{"id":6040},"pure-pursuit-controller",[6042],{"type":24,"value":6032},{"type":18,"tag":27,"props":6044,"children":6045},{},[6046,6047,6051],{"type":24,"value":4738},{"type":18,"tag":227,"props":6048,"children":6049},{},[6050],{"type":24,"value":6032},{"type":24,"value":6052}," is a widely-used path-tracking algorithm in robotics and autonomous vehicle navigation. Its primary objective is to guide a vehicle or robot along a predefined path while ensuring precise path-following.",{"type":18,"tag":5310,"props":6054,"children":6056},{"id":6055},"principle-of-operation",[6057],{"type":24,"value":6058},"Principle of Operation",{"type":18,"tag":27,"props":6060,"children":6061},{},[6062],{"type":24,"value":6063},"The operation of the Pure Pursuit Controller is based on a straightforward concept:",{"type":18,"tag":4045,"props":6065,"children":6066},{},[6067,6077,6087,6097,6107],{"type":18,"tag":115,"props":6068,"children":6069},{},[6070,6075],{"type":18,"tag":227,"props":6071,"children":6072},{},[6073],{"type":24,"value":6074},"Path Definition",{"type":24,"value":6076},": The controller works with a defined path, often represented as a series of waypoints or a continuous curve, each associated with specific coordinates (x, y) and curvature information.",{"type":18,"tag":115,"props":6078,"children":6079},{},[6080,6085],{"type":18,"tag":227,"props":6081,"children":6082},{},[6083],{"type":24,"value":6084},"Target Point Selection",{"type":24,"value":6086},": The controller continuously selects a target point ahead of the vehicle. This target point is typically chosen as the point on the path that is a certain fixed distance (known as the \"lookahead distance\") in front of the vehicle.",{"type":18,"tag":115,"props":6088,"children":6089},{},[6090,6095],{"type":18,"tag":227,"props":6091,"children":6092},{},[6093],{"type":24,"value":6094},"Steering Command Calculation",{"type":24,"value":6096},": To navigate toward the target point, the controller calculates the steering command, often represented as the desired steering angle or curvature, required to reach the target point. Commonly, this involves computing the angle between the vehicle's current heading and the vector pointing from the current position to the target point.",{"type":18,"tag":115,"props":6098,"children":6099},{},[6100,6105],{"type":18,"tag":227,"props":6101,"children":6102},{},[6103],{"type":24,"value":6104},"Vehicle Control",{"type":24,"value":6106},": The calculated steering command is used to control the vehicle's steering mechanism (e.g., steering wheel or wheel angles) to guide it toward the target point.",{"type":18,"tag":115,"props":6108,"children":6109},{},[6110,6115],{"type":18,"tag":227,"props":6111,"children":6112},{},[6113],{"type":24,"value":6114},"Iterative Process",{"type":24,"value":6116},": The process is iterative, with the controller continuously selecting new target points ahead as the vehicle advances along the path and adjusting its steering to reach them.",{"type":18,"tag":5310,"props":6118,"children":6120},{"id":6119},"advantages",[6121],{"type":24,"value":6122},"Advantages",{"type":18,"tag":27,"props":6124,"children":6125},{},[6126],{"type":24,"value":6127},"The Pure Pursuit Controller offers several advantages:",{"type":18,"tag":111,"props":6129,"children":6130},{},[6131,6141,6150,6160,6170],{"type":18,"tag":115,"props":6132,"children":6133},{},[6134,6139],{"type":18,"tag":227,"props":6135,"children":6136},{},[6137],{"type":24,"value":6138},"Simplicity",{"type":24,"value":6140},": It is conceptually simple and easy to implement, making it suitable for a wide range of robotic and vehicle navigation applications.",{"type":18,"tag":115,"props":6142,"children":6143},{},[6144,6148],{"type":18,"tag":227,"props":6145,"children":6146},{},[6147],{"type":24,"value":5881},{"type":24,"value":6149},": The controller excels at accurate path tracking, even in complex environments with curves and turns.",{"type":18,"tag":115,"props":6151,"children":6152},{},[6153,6158],{"type":18,"tag":227,"props":6154,"children":6155},{},[6156],{"type":24,"value":6157},"Real-Time Operation",{"type":24,"value":6159},": It can operate in real-time, making it well-suited for dynamic environments where quick decision-making is crucial.",{"type":18,"tag":115,"props":6161,"children":6162},{},[6163,6168],{"type":18,"tag":227,"props":6164,"children":6165},{},[6166],{"type":24,"value":6167},"Adaptability",{"type":24,"value":6169},": The controller can adapt to changes in the path, such as deviations caused by obstacles or unexpected conditions, by continuously updating the target point.",{"type":18,"tag":115,"props":6171,"children":6172},{},[6173,6178],{"type":18,"tag":227,"props":6174,"children":6175},{},[6176],{"type":24,"value":6177},"Low Computational Overhead",{"type":24,"value":6179},": Compared to some other control algorithms, the Pure Pursuit Controller often has low computational requirements, which is advantageous for resource-constrained systems.",{"type":18,"tag":5310,"props":6181,"children":6183},{"id":6182},"limitations",[6184],{"type":24,"value":6185},"Limitations",{"type":18,"tag":27,"props":6187,"children":6188},{},[6189],{"type":24,"value":6190},"Despite its advantages, the Pure Pursuit Controller has some limitations:",{"type":18,"tag":111,"props":6192,"children":6193},{},[6194,6204],{"type":18,"tag":115,"props":6195,"children":6196},{},[6197,6202],{"type":18,"tag":227,"props":6198,"children":6199},{},[6200],{"type":24,"value":6201},"Lookahead Distance Sensitivity",{"type":24,"value":6203},": Its performance can be sensitive to the choice of the lookahead distance, which requires careful tuning for optimal path tracking.",{"type":18,"tag":115,"props":6205,"children":6206},{},[6207,6212],{"type":18,"tag":227,"props":6208,"children":6209},{},[6210],{"type":24,"value":6211},"Non-Holonomic Assumption",{"type":24,"value":6213},": The controller assumes that the vehicle is non-holonomic, meaning it cannot move sideways. This assumption may not hold for certain types of vehicles, such as omnidirectional robots.",{"type":18,"tag":27,"props":6215,"children":6216},{},[6217],{"type":24,"value":6218},"In summary, the Pure Pursuit Controller is a straightforward yet effective algorithm for path tracking and navigation. Its ability to calculate a steering command based on a selected target point ahead of the vehicle makes it a valuable tool for applications ranging from autonomous cars to mobile robots.",{"title":8,"searchDepth":316,"depth":316,"links":6220},[6221],{"id":6040,"depth":316,"text":6032,"children":6222},[6223,6224,6225],{"id":6055,"depth":325,"text":6058},{"id":6119,"depth":325,"text":6122},{"id":6182,"depth":325,"text":6185},"content:topics:robotics:pure-pursuit.md","topics/robotics/pure-pursuit.md",{"_path":6229,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"_empty":7,"title":6230,"description":6231,"slug":6232,"tag":6232,"body":6233,"_type":4099,"_id":6434,"_source":4101,"_file":6435,"_extension":4103},"/topics/robotics/stanley-controller","Stanley Controller","Introduction to Stanley Controller","stanley",{"type":15,"children":6234,"toc":6427},[6235,6240,6250,6254,6259,6320,6324,6329,6380,6384,6389,6422],{"type":18,"tag":19,"props":6236,"children":6238},{"id":6237},"stanley-controller",[6239],{"type":24,"value":6230},{"type":18,"tag":27,"props":6241,"children":6242},{},[6243,6244,6248],{"type":24,"value":4738},{"type":18,"tag":227,"props":6245,"children":6246},{},[6247],{"type":24,"value":6230},{"type":24,"value":6249}," is an advanced path-tracking algorithm primarily used in the field of autonomous vehicle navigation. It is named after its creator, Professor John K. Hedrick, who developed it at Stanford University. The Stanley Controller is designed to enable a vehicle to follow a predefined path with high accuracy and stability.",{"type":18,"tag":5310,"props":6251,"children":6252},{"id":6055},[6253],{"type":24,"value":6058},{"type":18,"tag":27,"props":6255,"children":6256},{},[6257],{"type":24,"value":6258},"The Stanley Controller operates based on a combination of control and feedback mechanisms:",{"type":18,"tag":4045,"props":6260,"children":6261},{},[6262,6271,6281,6291,6301,6310],{"type":18,"tag":115,"props":6263,"children":6264},{},[6265,6269],{"type":18,"tag":227,"props":6266,"children":6267},{},[6268],{"type":24,"value":6074},{"type":24,"value":6270},": A predefined path is represented as a series of waypoints or a continuous curve. Each waypoint is associated with specific coordinates (x, y) and often includes additional information like desired speed and curvature.",{"type":18,"tag":115,"props":6272,"children":6273},{},[6274,6279],{"type":18,"tag":227,"props":6275,"children":6276},{},[6277],{"type":24,"value":6278},"Cross-Track Error (CTE) Calculation",{"type":24,"value":6280},": The controller calculates the cross-track error, which is the perpendicular distance between the vehicle's current position and the desired path. This error represents how far the vehicle has deviated from the path.",{"type":18,"tag":115,"props":6282,"children":6283},{},[6284,6289],{"type":18,"tag":227,"props":6285,"children":6286},{},[6287],{"type":24,"value":6288},"Heading Error Calculation",{"type":24,"value":6290},": The heading error, which is the difference between the vehicle's current heading (yaw angle) and the desired path's tangent angle at the nearest waypoint, is also computed.",{"type":18,"tag":115,"props":6292,"children":6293},{},[6294,6299],{"type":18,"tag":227,"props":6295,"children":6296},{},[6297],{"type":24,"value":6298},"Control Command Generation",{"type":24,"value":6300},": Using the calculated cross-track error and heading error, the Stanley Controller generates control commands. These commands typically include steering angle adjustments and throttle/brake control to minimize both errors.",{"type":18,"tag":115,"props":6302,"children":6303},{},[6304,6308],{"type":18,"tag":227,"props":6305,"children":6306},{},[6307],{"type":24,"value":6104},{"type":24,"value":6309},": The generated control commands are applied to the vehicle's steering and throttle/brake systems to guide it back to the desired path.",{"type":18,"tag":115,"props":6311,"children":6312},{},[6313,6318],{"type":18,"tag":227,"props":6314,"children":6315},{},[6316],{"type":24,"value":6317},"Iterative Feedback",{"type":24,"value":6319},": The process is iterative, with the controller continuously recalculating the cross-track and heading errors and adjusting the control commands to keep the vehicle on track.",{"type":18,"tag":5310,"props":6321,"children":6322},{"id":6119},[6323],{"type":24,"value":6122},{"type":18,"tag":27,"props":6325,"children":6326},{},[6327],{"type":24,"value":6328},"The Stanley Controller offers several advantages:",{"type":18,"tag":111,"props":6330,"children":6331},{},[6332,6342,6352,6361,6370],{"type":18,"tag":115,"props":6333,"children":6334},{},[6335,6340],{"type":18,"tag":227,"props":6336,"children":6337},{},[6338],{"type":24,"value":6339},"High Accuracy",{"type":24,"value":6341},": It is known for its ability to achieve precise path-following, even in challenging conditions and complex road geometries.",{"type":18,"tag":115,"props":6343,"children":6344},{},[6345,6350],{"type":18,"tag":227,"props":6346,"children":6347},{},[6348],{"type":24,"value":6349},"Stability",{"type":24,"value":6351},": The controller's feedback mechanisms contribute to stable and smooth vehicle motion, reducing the risk of overshooting or oscillations.",{"type":18,"tag":115,"props":6353,"children":6354},{},[6355,6359],{"type":18,"tag":227,"props":6356,"children":6357},{},[6358],{"type":24,"value":6167},{"type":24,"value":6360},": The Stanley Controller can adapt to changes in the path, such as deviations caused by obstacles or dynamic road conditions.",{"type":18,"tag":115,"props":6362,"children":6363},{},[6364,6368],{"type":18,"tag":227,"props":6365,"children":6366},{},[6367],{"type":24,"value":6157},{"type":24,"value":6369},": It can operate in real-time, making it suitable for autonomous vehicle navigation in dynamic environments.",{"type":18,"tag":115,"props":6371,"children":6372},{},[6373,6378],{"type":18,"tag":227,"props":6374,"children":6375},{},[6376],{"type":24,"value":6377},"Versatility",{"type":24,"value":6379},": While primarily used in autonomous vehicles, the Stanley Controller's principles can be applied to various path-tracking tasks.",{"type":18,"tag":5310,"props":6381,"children":6382},{"id":6182},[6383],{"type":24,"value":6185},{"type":18,"tag":27,"props":6385,"children":6386},{},[6387],{"type":24,"value":6388},"Despite its advantages, the Stanley Controller has some limitations:",{"type":18,"tag":111,"props":6390,"children":6391},{},[6392,6402,6412],{"type":18,"tag":115,"props":6393,"children":6394},{},[6395,6400],{"type":18,"tag":227,"props":6396,"children":6397},{},[6398],{"type":24,"value":6399},"Complexity",{"type":24,"value":6401},": Implementing the Stanley Controller can be more complex than some other control algorithms due to its mathematical calculations and tuning requirements.",{"type":18,"tag":115,"props":6403,"children":6404},{},[6405,6410],{"type":18,"tag":227,"props":6406,"children":6407},{},[6408],{"type":24,"value":6409},"Initialization",{"type":24,"value":6411},": It relies on accurate initialization, including knowledge of the vehicle's initial position and heading relative to the path.",{"type":18,"tag":115,"props":6413,"children":6414},{},[6415,6420],{"type":18,"tag":227,"props":6416,"children":6417},{},[6418],{"type":24,"value":6419},"Sensitivity to Noise",{"type":24,"value":6421},": Like many feedback-based controllers, the Stanley Controller can be sensitive to noisy sensor data and require robust sensor fusion techniques.",{"type":18,"tag":27,"props":6423,"children":6424},{},[6425],{"type":24,"value":6426},"In summary, the Stanley Controller is an advanced path-tracking algorithm known for its accuracy and stability, making it a valuable tool in the field of autonomous vehicle navigation. Proper implementation and tuning are essential to harness its full potential.",{"title":8,"searchDepth":316,"depth":316,"links":6428},[6429],{"id":6237,"depth":316,"text":6230,"children":6430},[6431,6432,6433],{"id":6055,"depth":325,"text":6058},{"id":6119,"depth":325,"text":6122},{"id":6182,"depth":325,"text":6185},"content:topics:robotics:stanley-controller.md","topics/robotics/stanley-controller.md",1694100721162]