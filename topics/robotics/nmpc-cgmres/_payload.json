[{"data":1,"prerenderedAt":6451},["Reactive",2],{"content-/topics/robotics/nmpc-cgmres":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"_empty":6,"title":8,"description":9,"author":10,"slug":11,"tag":11,"img":12,"body":13,"_type":6446,"_id":6447,"_source":6448,"_file":6449,"_extension":6450},"/topics/robotics/nmpc-cgmres","robotics",false,"","Nonlinear Model Predictive Control with C/GMRES","Optimal Control theory","Din Sokheng","nmpc-cgmres","/topics/robotics/nmpc/nmpc_cgmres.png",{"type":14,"children":15,"toc":6434},"root",[16,25,31,38,43,49,58,63,69,74,163,179,197,202,211,215,226,232,241,245,249,264,270,275,282,482,493,498,502,506,544,549,553,558,562,566,571,577,585,597,1758,1772,2597,2602,2734,2739,3090,3095,3868,3873,4353,4373,4860,4871,6244,6255,6261,6293,6312,6322,6327,6339,6345,6359,6365,6370,6376,6429],{"type":17,"tag":18,"props":19,"children":21},"element","h2",{"id":20},"the-optimal-control-theory-in-control-system",[22],{"type":23,"value":24},"text","The Optimal Control Theory in Control System",{"type":17,"tag":26,"props":27,"children":28},"p",{},[29],{"type":23,"value":30},"Optimal Control is a branch of control theory in control system, the theory works by solving the optimization problem of the dynamical system in order to find the optimal solution for the system",{"type":17,"tag":32,"props":33,"children":35},"h3",{"id":34},"what-is-model-predictive-control",[36],{"type":23,"value":37},"What is Model Predictive Control ?",{"type":17,"tag":26,"props":39,"children":40},{},[41],{"type":23,"value":42},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":17,"tag":32,"props":44,"children":46},{"id":45},"hamilton-jacobian-bellman-equation-hjbe",[47],{"type":23,"value":48},"Hamilton Jacobian Bellman Equation (HJBE)",{"type":17,"tag":26,"props":50,"children":51},{},[52,54],{"type":23,"value":53},"Actually, the HJBE is a nonlinear partial differential equation that it consists necessary conditions for optimality of control by minimizing the loss function of the system. ",{"type":17,"tag":55,"props":56,"children":57},"br",{},[],{"type":17,"tag":26,"props":59,"children":60},{},[61],{"type":23,"value":62},"We have the Hamiltonian Jacobian Bellman Equation",{"type":17,"tag":64,"props":65,"children":68},"math-render-b",{"latex-express":66,"styles":67},"\n\\begin{equation*}\n    H(x,u,\\lambda,\\mu) = \\sum_{k=0}^{N-1}(x_{k}-x_{k,ref})^{T} Q(x_{k}-x_{k,ref}) + (u_{k}-u_{k,ref})^{T}R(u_{k}-u_{k,ref}) + \n                         \\phi(x) + \\lambda^{T}f(x,u) + \\mu^{T}C(x,u)\n\\end{equation*}","text-center",[],{"type":17,"tag":26,"props":70,"children":71},{},[72],{"type":23,"value":73},"Which",{"type":17,"tag":75,"props":76,"children":77},"ul",{},[78,90,105,118,127,136,145,154],{"type":17,"tag":79,"props":80,"children":81},"li",{},[82,88],{"type":17,"tag":83,"props":84,"children":87},"math-render",{"latex-express":85,"styles":86},"N","inline-flex",[],{"type":23,"value":89}," is the number of prediction future horizons or shooting node.",{"type":17,"tag":79,"props":91,"children":92},{},[93,97,99,103],{"type":17,"tag":83,"props":94,"children":96},{"latex-express":95,"styles":86},"x_{k}",[],{"type":23,"value":98}," is the state of the system at shooting node ",{"type":17,"tag":83,"props":100,"children":102},{"latex-express":101,"styles":86},"k",[],{"type":23,"value":104}," .",{"type":17,"tag":79,"props":106,"children":107},{},[108,112,114,117],{"type":17,"tag":83,"props":109,"children":111},{"latex-express":110,"styles":86},"u_{k}",[],{"type":23,"value":113}," is the input control of the system at shooting node ",{"type":17,"tag":83,"props":115,"children":116},{"latex-express":101,"styles":86},[],{"type":23,"value":104},{"type":17,"tag":79,"props":119,"children":120},{},[121,125],{"type":17,"tag":83,"props":122,"children":124},{"latex-express":123,"styles":86},"Q, R",[],{"type":23,"value":126}," are diagonal matrix which helps the optimization solving the nlp problem.",{"type":17,"tag":79,"props":128,"children":129},{},[130,134],{"type":17,"tag":83,"props":131,"children":133},{"latex-express":132,"styles":86},"f(x,u)",[],{"type":23,"value":135}," is the state representation of the system.",{"type":17,"tag":79,"props":137,"children":138},{},[139,143],{"type":17,"tag":83,"props":140,"children":142},{"latex-express":141,"styles":86},"C(x,u)",[],{"type":23,"value":144},"  is the constraint of the system.",{"type":17,"tag":79,"props":146,"children":147},{},[148,152],{"type":17,"tag":83,"props":149,"children":151},{"latex-express":150,"styles":86},"\\lambda",[],{"type":23,"value":153},"  is the costate vector for state representation.",{"type":17,"tag":79,"props":155,"children":156},{},[157,161],{"type":17,"tag":83,"props":158,"children":160},{"latex-express":159,"styles":86},"\\mu",[],{"type":23,"value":162},"  is the Lagrange multiplier vector for the equality constraint.",{"type":17,"tag":26,"props":164,"children":165},{},[166,168,174,176],{"type":23,"value":167},"Nonlinear Model Predictive Control has multiples solving method, but in this demonstration I will stick with the Continuation/GMRES method proposed by professor ",{"type":17,"tag":169,"props":170,"children":171},"strong",{},[172],{"type":23,"value":173}," Toshiyuki Ohtsuka ",{"type":23,"value":175},". ",{"type":17,"tag":55,"props":177,"children":178},{},[],{"type":17,"tag":26,"props":180,"children":181},{},[182,184,188,190,195],{"type":23,"value":183},"Supposed we want to obtain solution vector ",{"type":17,"tag":83,"props":185,"children":187},{"latex-express":186,"styles":86},"U(t) = [ u_{0}^{*}, \\mu_{0}^{*}, \\cdots, u_{N-1}^{*}, \\mu_{N-1}^{*} ]",[],{"type":23,"value":189},"   at sampling time $t$, we then define the discretization of ",{"type":17,"tag":169,"props":191,"children":192},{},[193],{"type":23,"value":194}," Euler Lagrangian Equation (ELE) ",{"type":23,"value":196},".",{"type":17,"tag":64,"props":198,"children":201},{"latex-express":199,"style":200},"\n\\begin{align}\n    x_{i+1}^{*}(t) &= x_{i}^{*}(t) + f(x_{i}^{*}(t), u_{i}^{*}(t))  \\\\\n    \\lambda_{i}^{*}(t) &= \\lambda_{i+1}^{*}(t) + \\frac{\\partial H}{\\partial x}\\left( x_{i}^{*}, u_{i}^{*}(t), \\lambda_{i+1}^{*}(t), \\mu_{i}^{*}(t) \\right) \\\\\n    \\lambda_{N}^{*}(t) &= \\frac{\\partial \\phi(x)}{\\partial x} \\\\\n    \\frac{\\partial H}{\\partial u} &\\left( x_{i}^{*}, u_{i}^{*}(t), \\lambda_{i+1}^{*}(t), \\mu_{i}^{*}(t) \\right) = 0 \\\\\n    C&(x_{i}^{*}(t),u_{i}^{*}(t)) = 0\n\\end{align}\n","text-ceneter",[],{"type":17,"tag":26,"props":203,"children":204},{},[205,207],{"type":23,"value":206},"To solve this nonlinear problem iteratively, we use Newton's method ",{"type":17,"tag":83,"props":208,"children":210},{"latex-express":209,"styles":86},"F(x,u)=0",[],{"type":17,"tag":64,"props":212,"children":214},{"latex-express":213,"styles":67},"\n\\begin{equation*}\n    F(x,u) = \\begin{bmatrix}\n        \\frac{\\partial H}{\\partial u} \\left( x_{0}^{*}, u_{0}^{*}(t), \\lambda_{1}^{*}(t), \\mu_{0}^{*}(t) \\right) \\\\\n        C(x_{0}^{*}(t),u_{0}^{*}(t))  \\\\\n        \\vdots \\\\\n        \\frac{\\partial H}{\\partial u} \\left( x_{N-1}^{*}, u_{N-1}^{*}(t), \\lambda_{N}^{*}(t), \\mu_{N-1}^{*}(t) \\right) \\\\\n        C(x_{N-1}^{*}(t),u_{N-1}^{*}(t)) \\\\\n    \\end{bmatrix} = 0\n\\end{equation*}",[],{"type":17,"tag":26,"props":216,"children":217},{},[218,220,224],{"type":23,"value":219},"Solving this problem directly will caused big computational complexity, hence we use Continuation to reduce the complexity of the ",{"type":17,"tag":83,"props":221,"children":223},{"latex-express":222,"styles":86},"F(x,u)",[],{"type":23,"value":225}," function and then solve it by using GMRES method.",{"type":17,"tag":32,"props":227,"children":229},{"id":228},"continuation",[230],{"type":23,"value":231},"Continuation",{"type":17,"tag":26,"props":233,"children":234},{},[235,237],{"type":23,"value":236},"Denote  ",{"type":17,"tag":83,"props":238,"children":240},{"latex-express":239,"styles":86},"\\zeta, \\alpha, h \\in{\\mathbb{R} }",[],{"type":17,"tag":64,"props":242,"children":244},{"latex-express":243,"styles":67},"\n\\begin{equation}\n    \\frac{\\partial F}{\\partial u}(x,u) \\dot{u}(t) = -\\zeta F(x,u)(t)-\\frac{\\partial F}{\\partial x}(x,u)(t)\\dot{x}-\\frac{\\partial F}{\\partial t}(x,u)(t) \n\\end{equation}",[],{"type":17,"tag":64,"props":246,"children":248},{"latex-express":247,"styles":67},"\n\\begin{equation}\n    \\frac{F(x(t)+h\\dot{x}(t),u(t)+h\\dot{u}(t),t+h)-F(x+h\\dot{x}(t),u(t),t+h)}{h} = -\\zeta F(x(t),u(t), t) - \\frac{F(x+h\\dot{x}(t), u(t),t+h)-F(x(t), u(t), t)}{h}\n\\end{equation}",[],{"type":17,"tag":26,"props":250,"children":251},{},[252,254,258,260],{"type":23,"value":253},"Let ",{"type":17,"tag":64,"props":255,"children":257},{"latex-express":256,"styles":67},"right=\\frac{F(x(t)+h\\dot{x}(t),u(t)+h\\dot{u}(t),t+h)-F(x+h\\dot{x}(t),u(t),t+h)}{h}",[],{"type":23,"value":259}," and ",{"type":17,"tag":64,"props":261,"children":263},{"latex-express":262,"styles":67},"left =  -\\zeta F(x(t),u(t), t) - \\frac{F(x+h\\dot{x}(t), u(t),t+h)-F(x(t), u(t), t)}{h}",[],{"type":17,"tag":32,"props":265,"children":267},{"id":266},"generalized-minimal-residue-method-gmres",[268],{"type":23,"value":269},"Generalized Minimal Residue Method (GMRES)",{"type":17,"tag":26,"props":271,"children":272},{},[273],{"type":23,"value":274},"The Generalized Minimal Residual (GMRES) algorithm is an iterative method for solving linear systems of equations. It is often used for large sparse linear systems.",{"type":17,"tag":276,"props":277,"children":279},"h4",{"id":278},"algorithm-description",[280],{"type":23,"value":281},"Algorithm Description",{"type":17,"tag":283,"props":284,"children":285},"ol",{},[286,341,448,467],{"type":17,"tag":79,"props":287,"children":288},{},[289,294,296],{"type":17,"tag":169,"props":290,"children":291},{},[292],{"type":23,"value":293},"Initialize",{"type":23,"value":295},":",{"type":17,"tag":75,"props":297,"children":298},{},[299,309,319],{"type":17,"tag":79,"props":300,"children":301},{},[302,304,308],{"type":23,"value":303},"Choose an initial guess for the solution, denoted as ",{"type":17,"tag":83,"props":305,"children":307},{"latex-express":306,"styles":86},"x_{0}",[],{"type":23,"value":196},{"type":17,"tag":79,"props":310,"children":311},{},[312,314,318],{"type":23,"value":313},"Set the residual vector ",{"type":17,"tag":83,"props":315,"children":317},{"latex-express":316,"styles":86},"r_{0}=\\left\\| Ax_{0}-b \\right\\|",[],{"type":23,"value":196},{"type":17,"tag":79,"props":320,"children":321},{},[322,324,328,330,334,336,340],{"type":23,"value":323},"Set ",{"type":17,"tag":83,"props":325,"children":327},{"latex-express":326,"styles":86},"v_{1}=\\frac{r_{0} }{\\left\\| r_{0} \\right\\|}",[],{"type":23,"value":329},", where ",{"type":17,"tag":83,"props":331,"children":333},{"latex-express":332,"styles":86},"\\left\\| r_{0} \\right\\|",[],{"type":23,"value":335},"  is the norm of ",{"type":17,"tag":83,"props":337,"children":339},{"latex-express":338,"styles":86},"r_{0}",[],{"type":23,"value":196},{"type":17,"tag":79,"props":342,"children":343},{},[344,349,350],{"type":17,"tag":169,"props":345,"children":346},{},[347],{"type":23,"value":348},"Iterative Process",{"type":23,"value":295},{"type":17,"tag":75,"props":351,"children":352},{},[353,363,437],{"type":17,"tag":79,"props":354,"children":355},{},[356,358,362],{"type":23,"value":357},"Choose a vector ",{"type":17,"tag":83,"props":359,"children":361},{"latex-express":360,"styles":86},"v_{1}",[],{"type":23,"value":196},{"type":17,"tag":79,"props":364,"children":365},{},[366,368,372,374,378,379],{"type":23,"value":367},"For ",{"type":17,"tag":83,"props":369,"children":371},{"latex-express":370,"styles":86},"k=0",[],{"type":23,"value":373}," to ",{"type":17,"tag":83,"props":375,"children":377},{"latex-express":376,"styles":86},"maxiteration",[],{"type":23,"value":295},{"type":17,"tag":75,"props":380,"children":381},{},[382,418],{"type":17,"tag":79,"props":383,"children":384},{},[385,387],{"type":23,"value":386},"Arnoldi process:",{"type":17,"tag":75,"props":388,"children":389},{},[390,397,404,411],{"type":17,"tag":79,"props":391,"children":392},{},[393],{"type":17,"tag":83,"props":394,"children":396},{"latex-express":395,"styles":86},"h_{i,j} = \\left(Av_{j}, v_{i} \\right)",[],{"type":17,"tag":79,"props":398,"children":399},{},[400],{"type":17,"tag":83,"props":401,"children":403},{"latex-express":402,"styles":86},"\\hat{v}_{j+1} = Av_{j} - \\sum_{i=1}^{j}h_{i,j}v_{i}",[],{"type":17,"tag":79,"props":405,"children":406},{},[407],{"type":17,"tag":83,"props":408,"children":410},{"latex-express":409,"styles":86},"h_{j+1,j} = \\left \\| \\hat{v}_{j+1}  \\right\\|_{2}",[],{"type":17,"tag":79,"props":412,"children":413},{},[414],{"type":17,"tag":83,"props":415,"children":417},{"latex-express":416,"styles":86},"v_{j+1} = \\frac{\\hat{v}_{j+1} }{h_{j+1,j} }",[],{"type":17,"tag":79,"props":419,"children":420},{},[421,423],{"type":23,"value":422},"Check for convergence:",{"type":17,"tag":75,"props":424,"children":425},{},[426],{"type":17,"tag":79,"props":427,"children":428},{},[429,431,435],{"type":23,"value":430},"If ",{"type":17,"tag":83,"props":432,"children":434},{"latex-express":433,"styles":86},"||r_k|| \u003C tolerance",[],{"type":23,"value":436},", exit the loop.",{"type":17,"tag":79,"props":438,"children":439},{},[440,442,446],{"type":23,"value":441},"If no convergence is achieved after ",{"type":17,"tag":83,"props":443,"children":445},{"latex-express":444,"styles":86},"maxiterations",[],{"type":23,"value":447},", exit with an error message.",{"type":17,"tag":79,"props":449,"children":450},{},[451,460,462,466],{"type":17,"tag":169,"props":452,"children":453},{},[454,456],{"type":23,"value":455},"Find ",{"type":17,"tag":83,"props":457,"children":459},{"latex-express":458,"styles":86},"y",[],{"type":23,"value":461},": which minimize ",{"type":17,"tag":83,"props":463,"children":465},{"latex-express":464,"styles":86},"\\left\\| r_{0}e_{1}-\\hat{H}_{m}y \\right \\|_{2}",[],{"type":23,"value":196},{"type":17,"tag":79,"props":468,"children":469},{},[470,475,477,481],{"type":17,"tag":169,"props":471,"children":472},{},[473],{"type":23,"value":474},"Compute",{"type":23,"value":476},": ",{"type":17,"tag":83,"props":478,"children":480},{"latex-express":479,"styles":86},"x_{m} = x_{0}+V_{m}y_{m}",[],{"type":23,"value":196},{"type":17,"tag":26,"props":483,"children":484},{},[485,487,491],{"type":23,"value":486},"For example differential model, let ",{"type":17,"tag":83,"props":488,"children":490},{"latex-express":489,"styles":86},"x, y, \\phi",[],{"type":23,"value":492}," is the state presentation of the model\n$$ \\dot{x} = f(x,u) $$",{"type":17,"tag":26,"props":494,"children":495},{},[496],{"type":23,"value":497},"Then the HJBE defined as",{"type":17,"tag":64,"props":499,"children":501},{"latex-express":500,"styles":67},"\n\\begin{equation*}\n    H(x,u,\\lambda,\\mu) = \\sum_{k=0}^{N-1}(x_{k}-x_{k,ref})^{T}Q(x_{k}-x_{k,ref}) + (u_{k}-u_{k,ref})^{T}R(u_{k}-u_{k,ref}) + \n                         \\phi(x) + \\lambda^{T}f(x,u) + \\mu^{T}C(x,u)\n\\end{equation*}\n",[],{"type":17,"tag":26,"props":503,"children":504},{},[505],{"type":23,"value":73},{"type":17,"tag":75,"props":507,"children":508},{},[509,516,523,530,537],{"type":17,"tag":79,"props":510,"children":511},{},[512],{"type":17,"tag":83,"props":513,"children":515},{"latex-express":514,"styles":86},"f(x,u) = \\begin{bmatrix} u_{1}*\\cos{(\\phi)} \\\\ u_{1}*\\sin{(\\phi)} \\\\ u_{2} \\end{bmatrix}",[],{"type":17,"tag":79,"props":517,"children":518},{},[519],{"type":17,"tag":83,"props":520,"children":522},{"latex-express":521,"styles":86},"C(x,u) = \\begin{bmatrix} \\left(u_{1}-\\frac{u_{1max}+u_{1min}}{2}\\right)^{2}+u_{1dummy}^{2}-(\\frac{u_{1max}-u_{1min} }{2})^{2} \\\\\n          \\left(u_{2}-\\frac{u_{2max}+u_{2min}}{2}\\right)^{2}+u_{2dummy}^{2}-(\\frac{u_{2max}-u_{2min}}{2})^{2}\n\\end{bmatrix}",[],{"type":17,"tag":79,"props":524,"children":525},{},[526],{"type":17,"tag":83,"props":527,"children":529},{"latex-express":528,"styles":86},"\\phi(x) = (x_{N}-x_{N,ref})^{T}Q(x_{N}-x_{N,ref})",[],{"type":17,"tag":79,"props":531,"children":532},{},[533],{"type":17,"tag":83,"props":534,"children":536},{"latex-express":535,"styles":86},"\\lambda = \\begin{bmatrix} \\lambda_{1} & \\lambda_{2} & \\lambda_{3} \\end{bmatrix}",[],{"type":17,"tag":79,"props":538,"children":539},{},[540],{"type":17,"tag":83,"props":541,"children":543},{"latex-express":542,"styles":86}," \\mu = \\begin{bmatrix} \\mu_{1} & \\mu_{2} \\end{bmatrix}",[],{"type":17,"tag":26,"props":545,"children":546},{},[547],{"type":23,"value":548},"Subtitute all of these term into HJBE",{"type":17,"tag":64,"props":550,"children":552},{"latex-express":551,"styles":67},"\n\\begin{align*}\nH(x,u,\\lambda,\\mu) &= \\sum_{k=0}^{N-1}(x_{k}-x_{k,ref})^{T}Q(x_{k}-x_{k,ref}) + (u_{k}-u_{k,ref})^{T}R(u_{k}-u_{k,ref})\n                     + (x_{N-1}-x_{N-1,ref})^{T}Q(x_{N-1}-x_{N-1,ref}) \\\\ & + \\begin{bmatrix} \\lambda_{1} \\\\ \\lambda_{2} \\\\ \\lambda_{3} \\end{bmatrix}^{T} \\begin{bmatrix} u_{1}*\\cos(\\phi) \\\\ u_{1}*\\sin(\\phi) \\\\ u_{2} \\end{bmatrix}\n                     + \\begin{bmatrix} \\mu_{1} \\\\ \\mu_{2} \\end{bmatrix}^{T} \\begin{bmatrix} \\left(u_{1}+\\frac{u_{1max}+u_{1min}}{2}\\right)^{2}+u_{1dummy}^{2}-(\\frac{u_{1max}-u_{1min}}{2})^{2} \\\\\n            \\left(u_{2}+\\frac{u_{2max}+u_{2min}}{2}\\right)^{2}+u_{2dummy}^{2}-(\\frac{u_{2max}-u_{2min}}{2})^{2} \n\\end{bmatrix}\n\\end{align*}",[],{"type":17,"tag":26,"props":554,"children":555},{},[556],{"type":23,"value":557},"By doing partial derivative of HJBE, we get",{"type":17,"tag":64,"props":559,"children":561},{"latex-express":560,"styles":67},"\n\\begin{equation*}\n    \\frac{\\partial H}{\\partial x} = \\begin{bmatrix}\n     (x-x_{ref})q_{1} \\\\\n     (y-y_{ref})q_{2} \\\\ \n     (\\phi-\\phi_{ref})q_{3} - \\lambda_{1}\\sin{(\\phi)}u_{1} + \\lambda_{2}\\cos{(\\phi)}u_{1}\n     \\end{bmatrix}\n\\end{equation*}\n",[],{"type":17,"tag":64,"props":563,"children":565},{"latex-express":564,"styles":67},"\n\\begin{equation*}\n    \\frac{\\partial H}{\\partial u} = \\begin{bmatrix}\n      (u_{1}-u_{1,ref})r_{1}+\\lambda_{1}\\cos{(\\phi)}+\\lambda_{2}\\sin{(\\phi)} \\\\ \n      (u_{2}-u_{2,ref})r_{2}+\\lambda_{3}\n     \\end{bmatrix}\n\\end{equation*}\n",[],{"type":17,"tag":26,"props":567,"children":568},{},[569],{"type":23,"value":570},"I know this is quite complicated, this is just only input control without constraint and solver with single shooting method.",{"type":17,"tag":18,"props":572,"children":574},{"id":573},"implementing-in-python",[575],{"type":23,"value":576},"Implementing in Python",{"type":17,"tag":26,"props":578,"children":579},{},[580,582],{"type":23,"value":581},"It is safe to say that you will need to start from basic first. Like creating class for model representation, but for now I will just go with CGMRES implementing only, since I have done many demonstration of how to create class for model. ",{"type":17,"tag":55,"props":583,"children":584},{},[],{"type":17,"tag":26,"props":586,"children":587},{},[588,590,595],{"type":23,"value":589},"Let's create class for ",{"type":17,"tag":169,"props":591,"children":592},{},[593],{"type":23,"value":594}," Hamiltion Jacobian Bellman Equation ",{"type":23,"value":596}," which we already derived from above equation.",{"type":17,"tag":598,"props":599,"children":604},"code",{"className":600,"code":602,"language":603,"meta":7},[601],"language-python","class HJBEquation:\n\n    def __init__(self, q1, q2, q3, r1, r2, u_max, u_min):\n\n        self.q1 = q1\n        self.q2 = q2\n        self.q3 = q3\n\n        self.r1 = r1\n        self.r2 = r2\n\n        self.u1_min = u_min[0]\n        self.u2_min = u_min[0]\n\n        self.u1_max = u_max[0]\n        self.u2_max = u_max[1]\n\n    def dhdx(self, x, y, yaw, x_r, y_r, yaw_r, u1, lam1, lam2):\n\n        dhdx1 = (x-x_r)*self.q1\n        dhdx2 = (y-y_r)*self.q2\n        dhdx3 = (yaw-yaw_r)*self.q3-u1*lam1*np.sin(yaw)+u1*lam2*np.cos(yaw)\n\n        return dhdx1, dhdx2, dhdx3\n\n    def dhdu(self, yaw, u1, u2, u1_r, u2_r, lam1, lam2, lam3, mu1, mu2):\n\n        dhdu1 = self.r1*(u1-u1_r)+lam1*np.cos(yaw)+lam2*np.sin(yaw)+2*mu1*u1*(u1+(self.u1_max+self.u1_min)/2)\n        dhdu2 = self.r2*(u2-u2_r)+lam3+2*mu2*(u2+(self.u2_max+self.u2_min)/2)\n\n        return dhdu1, dhdu2\n\n    def dphidx(self, x, y, yaw, x_r, y_r, yaw_r):\n        dphidx1 = self.q1*(x-x_r)\n        dphidx2 = self.q2*(y-y_r)\n        dphidx3 = self.q3*(yaw-yaw_r)\n\n        return dphidx1, dphidx2, dphidx3\n","python",[605],{"type":17,"tag":606,"props":607,"children":608},"pre",{},[609],{"type":17,"tag":598,"props":610,"children":611},{"__ignoreMap":7},[612,641,650,679,687,716,742,768,776,802,828,836,872,905,913,947,981,989,1015,1023,1065,1105,1199,1207,1225,1233,1259,1267,1423,1543,1551,1568,1576,1602,1646,1690,1733,1741],{"type":17,"tag":613,"props":614,"children":617},"span",{"class":615,"line":616},"line",1,[618,624,630,636],{"type":17,"tag":613,"props":619,"children":621},{"class":620},"ct-857441",[622],{"type":23,"value":623},"class",{"type":17,"tag":613,"props":625,"children":627},{"class":626},"ct-767297",[628],{"type":23,"value":629}," ",{"type":17,"tag":613,"props":631,"children":633},{"class":632},"ct-806137",[634],{"type":23,"value":635},"HJBEquation",{"type":17,"tag":613,"props":637,"children":638},{"class":626},[639],{"type":23,"value":640},":\n",{"type":17,"tag":613,"props":642,"children":644},{"class":615,"line":643},2,[645],{"type":17,"tag":613,"props":646,"children":647},{},[648],{"type":23,"value":649},"\n",{"type":17,"tag":613,"props":651,"children":653},{"class":615,"line":652},3,[654,659,664,668,674],{"type":17,"tag":613,"props":655,"children":656},{"class":626},[657],{"type":23,"value":658},"    ",{"type":17,"tag":613,"props":660,"children":661},{"class":620},[662],{"type":23,"value":663},"def",{"type":17,"tag":613,"props":665,"children":666},{"class":626},[667],{"type":23,"value":629},{"type":17,"tag":613,"props":669,"children":671},{"class":670},"ct-533739",[672],{"type":23,"value":673},"__init__",{"type":17,"tag":613,"props":675,"children":676},{"class":626},[677],{"type":23,"value":678},"(self, q1, q2, q3, r1, r2, u_max, u_min):\n",{"type":17,"tag":613,"props":680,"children":682},{"class":615,"line":681},4,[683],{"type":17,"tag":613,"props":684,"children":685},{},[686],{"type":23,"value":649},{"type":17,"tag":613,"props":688,"children":690},{"class":615,"line":689},5,[691,696,701,706,711],{"type":17,"tag":613,"props":692,"children":693},{"class":626},[694],{"type":23,"value":695},"        ",{"type":17,"tag":613,"props":697,"children":698},{"class":670},[699],{"type":23,"value":700},"self",{"type":17,"tag":613,"props":702,"children":703},{"class":626},[704],{"type":23,"value":705},".q1 ",{"type":17,"tag":613,"props":707,"children":708},{"class":620},[709],{"type":23,"value":710},"=",{"type":17,"tag":613,"props":712,"children":713},{"class":626},[714],{"type":23,"value":715}," q1\n",{"type":17,"tag":613,"props":717,"children":719},{"class":615,"line":718},6,[720,724,728,733,737],{"type":17,"tag":613,"props":721,"children":722},{"class":626},[723],{"type":23,"value":695},{"type":17,"tag":613,"props":725,"children":726},{"class":670},[727],{"type":23,"value":700},{"type":17,"tag":613,"props":729,"children":730},{"class":626},[731],{"type":23,"value":732},".q2 ",{"type":17,"tag":613,"props":734,"children":735},{"class":620},[736],{"type":23,"value":710},{"type":17,"tag":613,"props":738,"children":739},{"class":626},[740],{"type":23,"value":741}," q2\n",{"type":17,"tag":613,"props":743,"children":745},{"class":615,"line":744},7,[746,750,754,759,763],{"type":17,"tag":613,"props":747,"children":748},{"class":626},[749],{"type":23,"value":695},{"type":17,"tag":613,"props":751,"children":752},{"class":670},[753],{"type":23,"value":700},{"type":17,"tag":613,"props":755,"children":756},{"class":626},[757],{"type":23,"value":758},".q3 ",{"type":17,"tag":613,"props":760,"children":761},{"class":620},[762],{"type":23,"value":710},{"type":17,"tag":613,"props":764,"children":765},{"class":626},[766],{"type":23,"value":767}," q3\n",{"type":17,"tag":613,"props":769,"children":771},{"class":615,"line":770},8,[772],{"type":17,"tag":613,"props":773,"children":774},{},[775],{"type":23,"value":649},{"type":17,"tag":613,"props":777,"children":779},{"class":615,"line":778},9,[780,784,788,793,797],{"type":17,"tag":613,"props":781,"children":782},{"class":626},[783],{"type":23,"value":695},{"type":17,"tag":613,"props":785,"children":786},{"class":670},[787],{"type":23,"value":700},{"type":17,"tag":613,"props":789,"children":790},{"class":626},[791],{"type":23,"value":792},".r1 ",{"type":17,"tag":613,"props":794,"children":795},{"class":620},[796],{"type":23,"value":710},{"type":17,"tag":613,"props":798,"children":799},{"class":626},[800],{"type":23,"value":801}," r1\n",{"type":17,"tag":613,"props":803,"children":805},{"class":615,"line":804},10,[806,810,814,819,823],{"type":17,"tag":613,"props":807,"children":808},{"class":626},[809],{"type":23,"value":695},{"type":17,"tag":613,"props":811,"children":812},{"class":670},[813],{"type":23,"value":700},{"type":17,"tag":613,"props":815,"children":816},{"class":626},[817],{"type":23,"value":818},".r2 ",{"type":17,"tag":613,"props":820,"children":821},{"class":620},[822],{"type":23,"value":710},{"type":17,"tag":613,"props":824,"children":825},{"class":626},[826],{"type":23,"value":827}," r2\n",{"type":17,"tag":613,"props":829,"children":831},{"class":615,"line":830},11,[832],{"type":17,"tag":613,"props":833,"children":834},{},[835],{"type":23,"value":649},{"type":17,"tag":613,"props":837,"children":839},{"class":615,"line":838},12,[840,844,848,853,857,862,867],{"type":17,"tag":613,"props":841,"children":842},{"class":626},[843],{"type":23,"value":695},{"type":17,"tag":613,"props":845,"children":846},{"class":670},[847],{"type":23,"value":700},{"type":17,"tag":613,"props":849,"children":850},{"class":626},[851],{"type":23,"value":852},".u1_min ",{"type":17,"tag":613,"props":854,"children":855},{"class":620},[856],{"type":23,"value":710},{"type":17,"tag":613,"props":858,"children":859},{"class":626},[860],{"type":23,"value":861}," u_min[",{"type":17,"tag":613,"props":863,"children":864},{"class":670},[865],{"type":23,"value":866},"0",{"type":17,"tag":613,"props":868,"children":869},{"class":626},[870],{"type":23,"value":871},"]\n",{"type":17,"tag":613,"props":873,"children":875},{"class":615,"line":874},13,[876,880,884,889,893,897,901],{"type":17,"tag":613,"props":877,"children":878},{"class":626},[879],{"type":23,"value":695},{"type":17,"tag":613,"props":881,"children":882},{"class":670},[883],{"type":23,"value":700},{"type":17,"tag":613,"props":885,"children":886},{"class":626},[887],{"type":23,"value":888},".u2_min ",{"type":17,"tag":613,"props":890,"children":891},{"class":620},[892],{"type":23,"value":710},{"type":17,"tag":613,"props":894,"children":895},{"class":626},[896],{"type":23,"value":861},{"type":17,"tag":613,"props":898,"children":899},{"class":670},[900],{"type":23,"value":866},{"type":17,"tag":613,"props":902,"children":903},{"class":626},[904],{"type":23,"value":871},{"type":17,"tag":613,"props":906,"children":908},{"class":615,"line":907},14,[909],{"type":17,"tag":613,"props":910,"children":911},{},[912],{"type":23,"value":649},{"type":17,"tag":613,"props":914,"children":916},{"class":615,"line":915},15,[917,921,925,930,934,939,943],{"type":17,"tag":613,"props":918,"children":919},{"class":626},[920],{"type":23,"value":695},{"type":17,"tag":613,"props":922,"children":923},{"class":670},[924],{"type":23,"value":700},{"type":17,"tag":613,"props":926,"children":927},{"class":626},[928],{"type":23,"value":929},".u1_max ",{"type":17,"tag":613,"props":931,"children":932},{"class":620},[933],{"type":23,"value":710},{"type":17,"tag":613,"props":935,"children":936},{"class":626},[937],{"type":23,"value":938}," u_max[",{"type":17,"tag":613,"props":940,"children":941},{"class":670},[942],{"type":23,"value":866},{"type":17,"tag":613,"props":944,"children":945},{"class":626},[946],{"type":23,"value":871},{"type":17,"tag":613,"props":948,"children":950},{"class":615,"line":949},16,[951,955,959,964,968,972,977],{"type":17,"tag":613,"props":952,"children":953},{"class":626},[954],{"type":23,"value":695},{"type":17,"tag":613,"props":956,"children":957},{"class":670},[958],{"type":23,"value":700},{"type":17,"tag":613,"props":960,"children":961},{"class":626},[962],{"type":23,"value":963},".u2_max ",{"type":17,"tag":613,"props":965,"children":966},{"class":620},[967],{"type":23,"value":710},{"type":17,"tag":613,"props":969,"children":970},{"class":626},[971],{"type":23,"value":938},{"type":17,"tag":613,"props":973,"children":974},{"class":670},[975],{"type":23,"value":976},"1",{"type":17,"tag":613,"props":978,"children":979},{"class":626},[980],{"type":23,"value":871},{"type":17,"tag":613,"props":982,"children":984},{"class":615,"line":983},17,[985],{"type":17,"tag":613,"props":986,"children":987},{},[988],{"type":23,"value":649},{"type":17,"tag":613,"props":990,"children":992},{"class":615,"line":991},18,[993,997,1001,1005,1010],{"type":17,"tag":613,"props":994,"children":995},{"class":626},[996],{"type":23,"value":658},{"type":17,"tag":613,"props":998,"children":999},{"class":620},[1000],{"type":23,"value":663},{"type":17,"tag":613,"props":1002,"children":1003},{"class":626},[1004],{"type":23,"value":629},{"type":17,"tag":613,"props":1006,"children":1007},{"class":632},[1008],{"type":23,"value":1009},"dhdx",{"type":17,"tag":613,"props":1011,"children":1012},{"class":626},[1013],{"type":23,"value":1014},"(self, x, y, yaw, x_r, y_r, yaw_r, u1, lam1, lam2):\n",{"type":17,"tag":613,"props":1016,"children":1018},{"class":615,"line":1017},19,[1019],{"type":17,"tag":613,"props":1020,"children":1021},{},[1022],{"type":23,"value":649},{"type":17,"tag":613,"props":1024,"children":1026},{"class":615,"line":1025},20,[1027,1032,1036,1041,1046,1051,1056,1060],{"type":17,"tag":613,"props":1028,"children":1029},{"class":626},[1030],{"type":23,"value":1031},"        dhdx1 ",{"type":17,"tag":613,"props":1033,"children":1034},{"class":620},[1035],{"type":23,"value":710},{"type":17,"tag":613,"props":1037,"children":1038},{"class":626},[1039],{"type":23,"value":1040}," (x",{"type":17,"tag":613,"props":1042,"children":1043},{"class":620},[1044],{"type":23,"value":1045},"-",{"type":17,"tag":613,"props":1047,"children":1048},{"class":626},[1049],{"type":23,"value":1050},"x_r)",{"type":17,"tag":613,"props":1052,"children":1053},{"class":620},[1054],{"type":23,"value":1055},"*",{"type":17,"tag":613,"props":1057,"children":1058},{"class":670},[1059],{"type":23,"value":700},{"type":17,"tag":613,"props":1061,"children":1062},{"class":626},[1063],{"type":23,"value":1064},".q1\n",{"type":17,"tag":613,"props":1066,"children":1068},{"class":615,"line":1067},21,[1069,1074,1078,1083,1087,1092,1096,1100],{"type":17,"tag":613,"props":1070,"children":1071},{"class":626},[1072],{"type":23,"value":1073},"        dhdx2 ",{"type":17,"tag":613,"props":1075,"children":1076},{"class":620},[1077],{"type":23,"value":710},{"type":17,"tag":613,"props":1079,"children":1080},{"class":626},[1081],{"type":23,"value":1082}," (y",{"type":17,"tag":613,"props":1084,"children":1085},{"class":620},[1086],{"type":23,"value":1045},{"type":17,"tag":613,"props":1088,"children":1089},{"class":626},[1090],{"type":23,"value":1091},"y_r)",{"type":17,"tag":613,"props":1093,"children":1094},{"class":620},[1095],{"type":23,"value":1055},{"type":17,"tag":613,"props":1097,"children":1098},{"class":670},[1099],{"type":23,"value":700},{"type":17,"tag":613,"props":1101,"children":1102},{"class":626},[1103],{"type":23,"value":1104},".q2\n",{"type":17,"tag":613,"props":1106,"children":1108},{"class":615,"line":1107},22,[1109,1114,1118,1123,1127,1132,1136,1140,1145,1149,1154,1158,1163,1167,1172,1177,1181,1185,1190,1194],{"type":17,"tag":613,"props":1110,"children":1111},{"class":626},[1112],{"type":23,"value":1113},"        dhdx3 ",{"type":17,"tag":613,"props":1115,"children":1116},{"class":620},[1117],{"type":23,"value":710},{"type":17,"tag":613,"props":1119,"children":1120},{"class":626},[1121],{"type":23,"value":1122}," (yaw",{"type":17,"tag":613,"props":1124,"children":1125},{"class":620},[1126],{"type":23,"value":1045},{"type":17,"tag":613,"props":1128,"children":1129},{"class":626},[1130],{"type":23,"value":1131},"yaw_r)",{"type":17,"tag":613,"props":1133,"children":1134},{"class":620},[1135],{"type":23,"value":1055},{"type":17,"tag":613,"props":1137,"children":1138},{"class":670},[1139],{"type":23,"value":700},{"type":17,"tag":613,"props":1141,"children":1142},{"class":626},[1143],{"type":23,"value":1144},".q3",{"type":17,"tag":613,"props":1146,"children":1147},{"class":620},[1148],{"type":23,"value":1045},{"type":17,"tag":613,"props":1150,"children":1151},{"class":626},[1152],{"type":23,"value":1153},"u1",{"type":17,"tag":613,"props":1155,"children":1156},{"class":620},[1157],{"type":23,"value":1055},{"type":17,"tag":613,"props":1159,"children":1160},{"class":626},[1161],{"type":23,"value":1162},"lam1",{"type":17,"tag":613,"props":1164,"children":1165},{"class":620},[1166],{"type":23,"value":1055},{"type":17,"tag":613,"props":1168,"children":1169},{"class":626},[1170],{"type":23,"value":1171},"np.sin(yaw)",{"type":17,"tag":613,"props":1173,"children":1174},{"class":620},[1175],{"type":23,"value":1176},"+",{"type":17,"tag":613,"props":1178,"children":1179},{"class":626},[1180],{"type":23,"value":1153},{"type":17,"tag":613,"props":1182,"children":1183},{"class":620},[1184],{"type":23,"value":1055},{"type":17,"tag":613,"props":1186,"children":1187},{"class":626},[1188],{"type":23,"value":1189},"lam2",{"type":17,"tag":613,"props":1191,"children":1192},{"class":620},[1193],{"type":23,"value":1055},{"type":17,"tag":613,"props":1195,"children":1196},{"class":626},[1197],{"type":23,"value":1198},"np.cos(yaw)\n",{"type":17,"tag":613,"props":1200,"children":1202},{"class":615,"line":1201},23,[1203],{"type":17,"tag":613,"props":1204,"children":1205},{},[1206],{"type":23,"value":649},{"type":17,"tag":613,"props":1208,"children":1210},{"class":615,"line":1209},24,[1211,1215,1220],{"type":17,"tag":613,"props":1212,"children":1213},{"class":626},[1214],{"type":23,"value":695},{"type":17,"tag":613,"props":1216,"children":1217},{"class":620},[1218],{"type":23,"value":1219},"return",{"type":17,"tag":613,"props":1221,"children":1222},{"class":626},[1223],{"type":23,"value":1224}," dhdx1, dhdx2, dhdx3\n",{"type":17,"tag":613,"props":1226,"children":1228},{"class":615,"line":1227},25,[1229],{"type":17,"tag":613,"props":1230,"children":1231},{},[1232],{"type":23,"value":649},{"type":17,"tag":613,"props":1234,"children":1236},{"class":615,"line":1235},26,[1237,1241,1245,1249,1254],{"type":17,"tag":613,"props":1238,"children":1239},{"class":626},[1240],{"type":23,"value":658},{"type":17,"tag":613,"props":1242,"children":1243},{"class":620},[1244],{"type":23,"value":663},{"type":17,"tag":613,"props":1246,"children":1247},{"class":626},[1248],{"type":23,"value":629},{"type":17,"tag":613,"props":1250,"children":1251},{"class":632},[1252],{"type":23,"value":1253},"dhdu",{"type":17,"tag":613,"props":1255,"children":1256},{"class":626},[1257],{"type":23,"value":1258},"(self, yaw, u1, u2, u1_r, u2_r, lam1, lam2, lam3, mu1, mu2):\n",{"type":17,"tag":613,"props":1260,"children":1262},{"class":615,"line":1261},27,[1263],{"type":17,"tag":613,"props":1264,"children":1265},{},[1266],{"type":23,"value":649},{"type":17,"tag":613,"props":1268,"children":1270},{"class":615,"line":1269},28,[1271,1276,1280,1284,1288,1293,1297,1302,1306,1311,1315,1319,1323,1328,1332,1336,1340,1344,1348,1353,1357,1362,1366,1370,1374,1378,1382,1387,1391,1396,1400,1404,1409,1414,1418],{"type":17,"tag":613,"props":1272,"children":1273},{"class":626},[1274],{"type":23,"value":1275},"        dhdu1 ",{"type":17,"tag":613,"props":1277,"children":1278},{"class":620},[1279],{"type":23,"value":710},{"type":17,"tag":613,"props":1281,"children":1282},{"class":626},[1283],{"type":23,"value":629},{"type":17,"tag":613,"props":1285,"children":1286},{"class":670},[1287],{"type":23,"value":700},{"type":17,"tag":613,"props":1289,"children":1290},{"class":626},[1291],{"type":23,"value":1292},".r1",{"type":17,"tag":613,"props":1294,"children":1295},{"class":620},[1296],{"type":23,"value":1055},{"type":17,"tag":613,"props":1298,"children":1299},{"class":626},[1300],{"type":23,"value":1301},"(u1",{"type":17,"tag":613,"props":1303,"children":1304},{"class":620},[1305],{"type":23,"value":1045},{"type":17,"tag":613,"props":1307,"children":1308},{"class":626},[1309],{"type":23,"value":1310},"u1_r)",{"type":17,"tag":613,"props":1312,"children":1313},{"class":620},[1314],{"type":23,"value":1176},{"type":17,"tag":613,"props":1316,"children":1317},{"class":626},[1318],{"type":23,"value":1162},{"type":17,"tag":613,"props":1320,"children":1321},{"class":620},[1322],{"type":23,"value":1055},{"type":17,"tag":613,"props":1324,"children":1325},{"class":626},[1326],{"type":23,"value":1327},"np.cos(yaw)",{"type":17,"tag":613,"props":1329,"children":1330},{"class":620},[1331],{"type":23,"value":1176},{"type":17,"tag":613,"props":1333,"children":1334},{"class":626},[1335],{"type":23,"value":1189},{"type":17,"tag":613,"props":1337,"children":1338},{"class":620},[1339],{"type":23,"value":1055},{"type":17,"tag":613,"props":1341,"children":1342},{"class":626},[1343],{"type":23,"value":1171},{"type":17,"tag":613,"props":1345,"children":1346},{"class":620},[1347],{"type":23,"value":1176},{"type":17,"tag":613,"props":1349,"children":1350},{"class":670},[1351],{"type":23,"value":1352},"2",{"type":17,"tag":613,"props":1354,"children":1355},{"class":620},[1356],{"type":23,"value":1055},{"type":17,"tag":613,"props":1358,"children":1359},{"class":626},[1360],{"type":23,"value":1361},"mu1",{"type":17,"tag":613,"props":1363,"children":1364},{"class":620},[1365],{"type":23,"value":1055},{"type":17,"tag":613,"props":1367,"children":1368},{"class":626},[1369],{"type":23,"value":1153},{"type":17,"tag":613,"props":1371,"children":1372},{"class":620},[1373],{"type":23,"value":1055},{"type":17,"tag":613,"props":1375,"children":1376},{"class":626},[1377],{"type":23,"value":1301},{"type":17,"tag":613,"props":1379,"children":1380},{"class":620},[1381],{"type":23,"value":1176},{"type":17,"tag":613,"props":1383,"children":1384},{"class":626},[1385],{"type":23,"value":1386},"(",{"type":17,"tag":613,"props":1388,"children":1389},{"class":670},[1390],{"type":23,"value":700},{"type":17,"tag":613,"props":1392,"children":1393},{"class":626},[1394],{"type":23,"value":1395},".u1_max",{"type":17,"tag":613,"props":1397,"children":1398},{"class":620},[1399],{"type":23,"value":1176},{"type":17,"tag":613,"props":1401,"children":1402},{"class":670},[1403],{"type":23,"value":700},{"type":17,"tag":613,"props":1405,"children":1406},{"class":626},[1407],{"type":23,"value":1408},".u1_min)",{"type":17,"tag":613,"props":1410,"children":1411},{"class":620},[1412],{"type":23,"value":1413},"/",{"type":17,"tag":613,"props":1415,"children":1416},{"class":670},[1417],{"type":23,"value":1352},{"type":17,"tag":613,"props":1419,"children":1420},{"class":626},[1421],{"type":23,"value":1422},")\n",{"type":17,"tag":613,"props":1424,"children":1426},{"class":615,"line":1425},29,[1427,1432,1436,1440,1444,1449,1453,1458,1462,1467,1471,1476,1480,1484,1488,1493,1497,1501,1505,1509,1513,1518,1522,1526,1531,1535,1539],{"type":17,"tag":613,"props":1428,"children":1429},{"class":626},[1430],{"type":23,"value":1431},"        dhdu2 ",{"type":17,"tag":613,"props":1433,"children":1434},{"class":620},[1435],{"type":23,"value":710},{"type":17,"tag":613,"props":1437,"children":1438},{"class":626},[1439],{"type":23,"value":629},{"type":17,"tag":613,"props":1441,"children":1442},{"class":670},[1443],{"type":23,"value":700},{"type":17,"tag":613,"props":1445,"children":1446},{"class":626},[1447],{"type":23,"value":1448},".r2",{"type":17,"tag":613,"props":1450,"children":1451},{"class":620},[1452],{"type":23,"value":1055},{"type":17,"tag":613,"props":1454,"children":1455},{"class":626},[1456],{"type":23,"value":1457},"(u2",{"type":17,"tag":613,"props":1459,"children":1460},{"class":620},[1461],{"type":23,"value":1045},{"type":17,"tag":613,"props":1463,"children":1464},{"class":626},[1465],{"type":23,"value":1466},"u2_r)",{"type":17,"tag":613,"props":1468,"children":1469},{"class":620},[1470],{"type":23,"value":1176},{"type":17,"tag":613,"props":1472,"children":1473},{"class":626},[1474],{"type":23,"value":1475},"lam3",{"type":17,"tag":613,"props":1477,"children":1478},{"class":620},[1479],{"type":23,"value":1176},{"type":17,"tag":613,"props":1481,"children":1482},{"class":670},[1483],{"type":23,"value":1352},{"type":17,"tag":613,"props":1485,"children":1486},{"class":620},[1487],{"type":23,"value":1055},{"type":17,"tag":613,"props":1489,"children":1490},{"class":626},[1491],{"type":23,"value":1492},"mu2",{"type":17,"tag":613,"props":1494,"children":1495},{"class":620},[1496],{"type":23,"value":1055},{"type":17,"tag":613,"props":1498,"children":1499},{"class":626},[1500],{"type":23,"value":1457},{"type":17,"tag":613,"props":1502,"children":1503},{"class":620},[1504],{"type":23,"value":1176},{"type":17,"tag":613,"props":1506,"children":1507},{"class":626},[1508],{"type":23,"value":1386},{"type":17,"tag":613,"props":1510,"children":1511},{"class":670},[1512],{"type":23,"value":700},{"type":17,"tag":613,"props":1514,"children":1515},{"class":626},[1516],{"type":23,"value":1517},".u2_max",{"type":17,"tag":613,"props":1519,"children":1520},{"class":620},[1521],{"type":23,"value":1176},{"type":17,"tag":613,"props":1523,"children":1524},{"class":670},[1525],{"type":23,"value":700},{"type":17,"tag":613,"props":1527,"children":1528},{"class":626},[1529],{"type":23,"value":1530},".u2_min)",{"type":17,"tag":613,"props":1532,"children":1533},{"class":620},[1534],{"type":23,"value":1413},{"type":17,"tag":613,"props":1536,"children":1537},{"class":670},[1538],{"type":23,"value":1352},{"type":17,"tag":613,"props":1540,"children":1541},{"class":626},[1542],{"type":23,"value":1422},{"type":17,"tag":613,"props":1544,"children":1546},{"class":615,"line":1545},30,[1547],{"type":17,"tag":613,"props":1548,"children":1549},{},[1550],{"type":23,"value":649},{"type":17,"tag":613,"props":1552,"children":1554},{"class":615,"line":1553},31,[1555,1559,1563],{"type":17,"tag":613,"props":1556,"children":1557},{"class":626},[1558],{"type":23,"value":695},{"type":17,"tag":613,"props":1560,"children":1561},{"class":620},[1562],{"type":23,"value":1219},{"type":17,"tag":613,"props":1564,"children":1565},{"class":626},[1566],{"type":23,"value":1567}," dhdu1, dhdu2\n",{"type":17,"tag":613,"props":1569,"children":1571},{"class":615,"line":1570},32,[1572],{"type":17,"tag":613,"props":1573,"children":1574},{},[1575],{"type":23,"value":649},{"type":17,"tag":613,"props":1577,"children":1579},{"class":615,"line":1578},33,[1580,1584,1588,1592,1597],{"type":17,"tag":613,"props":1581,"children":1582},{"class":626},[1583],{"type":23,"value":658},{"type":17,"tag":613,"props":1585,"children":1586},{"class":620},[1587],{"type":23,"value":663},{"type":17,"tag":613,"props":1589,"children":1590},{"class":626},[1591],{"type":23,"value":629},{"type":17,"tag":613,"props":1593,"children":1594},{"class":632},[1595],{"type":23,"value":1596},"dphidx",{"type":17,"tag":613,"props":1598,"children":1599},{"class":626},[1600],{"type":23,"value":1601},"(self, x, y, yaw, x_r, y_r, yaw_r):\n",{"type":17,"tag":613,"props":1603,"children":1605},{"class":615,"line":1604},34,[1606,1611,1615,1619,1623,1628,1632,1637,1641],{"type":17,"tag":613,"props":1607,"children":1608},{"class":626},[1609],{"type":23,"value":1610},"        dphidx1 ",{"type":17,"tag":613,"props":1612,"children":1613},{"class":620},[1614],{"type":23,"value":710},{"type":17,"tag":613,"props":1616,"children":1617},{"class":626},[1618],{"type":23,"value":629},{"type":17,"tag":613,"props":1620,"children":1621},{"class":670},[1622],{"type":23,"value":700},{"type":17,"tag":613,"props":1624,"children":1625},{"class":626},[1626],{"type":23,"value":1627},".q1",{"type":17,"tag":613,"props":1629,"children":1630},{"class":620},[1631],{"type":23,"value":1055},{"type":17,"tag":613,"props":1633,"children":1634},{"class":626},[1635],{"type":23,"value":1636},"(x",{"type":17,"tag":613,"props":1638,"children":1639},{"class":620},[1640],{"type":23,"value":1045},{"type":17,"tag":613,"props":1642,"children":1643},{"class":626},[1644],{"type":23,"value":1645},"x_r)\n",{"type":17,"tag":613,"props":1647,"children":1649},{"class":615,"line":1648},35,[1650,1655,1659,1663,1667,1672,1676,1681,1685],{"type":17,"tag":613,"props":1651,"children":1652},{"class":626},[1653],{"type":23,"value":1654},"        dphidx2 ",{"type":17,"tag":613,"props":1656,"children":1657},{"class":620},[1658],{"type":23,"value":710},{"type":17,"tag":613,"props":1660,"children":1661},{"class":626},[1662],{"type":23,"value":629},{"type":17,"tag":613,"props":1664,"children":1665},{"class":670},[1666],{"type":23,"value":700},{"type":17,"tag":613,"props":1668,"children":1669},{"class":626},[1670],{"type":23,"value":1671},".q2",{"type":17,"tag":613,"props":1673,"children":1674},{"class":620},[1675],{"type":23,"value":1055},{"type":17,"tag":613,"props":1677,"children":1678},{"class":626},[1679],{"type":23,"value":1680},"(y",{"type":17,"tag":613,"props":1682,"children":1683},{"class":620},[1684],{"type":23,"value":1045},{"type":17,"tag":613,"props":1686,"children":1687},{"class":626},[1688],{"type":23,"value":1689},"y_r)\n",{"type":17,"tag":613,"props":1691,"children":1693},{"class":615,"line":1692},36,[1694,1699,1703,1707,1711,1715,1719,1724,1728],{"type":17,"tag":613,"props":1695,"children":1696},{"class":626},[1697],{"type":23,"value":1698},"        dphidx3 ",{"type":17,"tag":613,"props":1700,"children":1701},{"class":620},[1702],{"type":23,"value":710},{"type":17,"tag":613,"props":1704,"children":1705},{"class":626},[1706],{"type":23,"value":629},{"type":17,"tag":613,"props":1708,"children":1709},{"class":670},[1710],{"type":23,"value":700},{"type":17,"tag":613,"props":1712,"children":1713},{"class":626},[1714],{"type":23,"value":1144},{"type":17,"tag":613,"props":1716,"children":1717},{"class":620},[1718],{"type":23,"value":1055},{"type":17,"tag":613,"props":1720,"children":1721},{"class":626},[1722],{"type":23,"value":1723},"(yaw",{"type":17,"tag":613,"props":1725,"children":1726},{"class":620},[1727],{"type":23,"value":1045},{"type":17,"tag":613,"props":1729,"children":1730},{"class":626},[1731],{"type":23,"value":1732},"yaw_r)\n",{"type":17,"tag":613,"props":1734,"children":1736},{"class":615,"line":1735},37,[1737],{"type":17,"tag":613,"props":1738,"children":1739},{},[1740],{"type":23,"value":649},{"type":17,"tag":613,"props":1742,"children":1744},{"class":615,"line":1743},38,[1745,1749,1753],{"type":17,"tag":613,"props":1746,"children":1747},{"class":626},[1748],{"type":23,"value":695},{"type":17,"tag":613,"props":1750,"children":1751},{"class":620},[1752],{"type":23,"value":1219},{"type":17,"tag":613,"props":1754,"children":1755},{"class":626},[1756],{"type":23,"value":1757}," dphidx1, dphidx2, dphidx3",{"type":17,"tag":26,"props":1759,"children":1760},{},[1761,1763,1768,1769],{"type":23,"value":1762},"Here, I suggest that you should understand the mathematics equations above that I try to explain. It is easy to do it in Python programming language if you already understand its expression. Now I created another class for ",{"type":17,"tag":169,"props":1764,"children":1765},{},[1766],{"type":23,"value":1767}," NMPC with CGMRES ",{"type":23,"value":175},{"type":17,"tag":55,"props":1770,"children":1771},{},[],{"type":17,"tag":598,"props":1773,"children":1776},{"className":1774,"code":1775,"language":603,"meta":7},[601],"class NMPCCGMRES:\n\n    def __init__(self):\n\n        ## NMPC params\n        self.x_dim = 3\n        self.u_dim = 2\n        self.c_dim = 2\n        self.pred_horizons = 10\n\n        ### Continuations Params\n        self.ht = 1e-5\n        self.zeta = 1/self.ht\n        self.alpha = 0.5\n        self.tf = 1.0\n\n        ### Matrix\n\n        self.q1 = 1\n        self.q2 = 6\n        self.q3 = 1\n        self.r1 = 1\n        self.r2 = 0.1\n\n        ### Constraint\n        self.u_min = [ 0,  0]\n        self.u_max = [ 2,  1.57]\n        self.u_dummy = [0.01, 0.01]\n\n        ### Initialize matrix solution\n        self.dU = np.zeros((self.u_dim, self.pred_horizons))\n\n        ### Reference point\n        self.X_r = [3, 2, 0.0]\n        self.U_r = [0, 0]\n",[1777],{"type":17,"tag":606,"props":1778,"children":1779},{},[1780],{"type":17,"tag":598,"props":1781,"children":1782},{"__ignoreMap":7},[1783,1803,1810,1834,1841,1854,1883,1912,1940,1969,1976,1988,2017,2058,2087,2116,2123,2135,2142,2170,2198,2225,2252,2280,2287,2299,2341,2382,2425,2432,2444,2487,2494,2506,2556],{"type":17,"tag":613,"props":1784,"children":1785},{"class":615,"line":616},[1786,1790,1794,1799],{"type":17,"tag":613,"props":1787,"children":1788},{"class":620},[1789],{"type":23,"value":623},{"type":17,"tag":613,"props":1791,"children":1792},{"class":626},[1793],{"type":23,"value":629},{"type":17,"tag":613,"props":1795,"children":1796},{"class":632},[1797],{"type":23,"value":1798},"NMPCCGMRES",{"type":17,"tag":613,"props":1800,"children":1801},{"class":626},[1802],{"type":23,"value":640},{"type":17,"tag":613,"props":1804,"children":1805},{"class":615,"line":643},[1806],{"type":17,"tag":613,"props":1807,"children":1808},{},[1809],{"type":23,"value":649},{"type":17,"tag":613,"props":1811,"children":1812},{"class":615,"line":652},[1813,1817,1821,1825,1829],{"type":17,"tag":613,"props":1814,"children":1815},{"class":626},[1816],{"type":23,"value":658},{"type":17,"tag":613,"props":1818,"children":1819},{"class":620},[1820],{"type":23,"value":663},{"type":17,"tag":613,"props":1822,"children":1823},{"class":626},[1824],{"type":23,"value":629},{"type":17,"tag":613,"props":1826,"children":1827},{"class":670},[1828],{"type":23,"value":673},{"type":17,"tag":613,"props":1830,"children":1831},{"class":626},[1832],{"type":23,"value":1833},"(self):\n",{"type":17,"tag":613,"props":1835,"children":1836},{"class":615,"line":681},[1837],{"type":17,"tag":613,"props":1838,"children":1839},{},[1840],{"type":23,"value":649},{"type":17,"tag":613,"props":1842,"children":1843},{"class":615,"line":689},[1844,1848],{"type":17,"tag":613,"props":1845,"children":1846},{"class":626},[1847],{"type":23,"value":695},{"type":17,"tag":613,"props":1849,"children":1851},{"class":1850},"ct-326375",[1852],{"type":23,"value":1853},"## NMPC params\n",{"type":17,"tag":613,"props":1855,"children":1856},{"class":615,"line":718},[1857,1861,1865,1870,1874,1878],{"type":17,"tag":613,"props":1858,"children":1859},{"class":626},[1860],{"type":23,"value":695},{"type":17,"tag":613,"props":1862,"children":1863},{"class":670},[1864],{"type":23,"value":700},{"type":17,"tag":613,"props":1866,"children":1867},{"class":626},[1868],{"type":23,"value":1869},".x_dim ",{"type":17,"tag":613,"props":1871,"children":1872},{"class":620},[1873],{"type":23,"value":710},{"type":17,"tag":613,"props":1875,"children":1876},{"class":626},[1877],{"type":23,"value":629},{"type":17,"tag":613,"props":1879,"children":1880},{"class":670},[1881],{"type":23,"value":1882},"3\n",{"type":17,"tag":613,"props":1884,"children":1885},{"class":615,"line":744},[1886,1890,1894,1899,1903,1907],{"type":17,"tag":613,"props":1887,"children":1888},{"class":626},[1889],{"type":23,"value":695},{"type":17,"tag":613,"props":1891,"children":1892},{"class":670},[1893],{"type":23,"value":700},{"type":17,"tag":613,"props":1895,"children":1896},{"class":626},[1897],{"type":23,"value":1898},".u_dim ",{"type":17,"tag":613,"props":1900,"children":1901},{"class":620},[1902],{"type":23,"value":710},{"type":17,"tag":613,"props":1904,"children":1905},{"class":626},[1906],{"type":23,"value":629},{"type":17,"tag":613,"props":1908,"children":1909},{"class":670},[1910],{"type":23,"value":1911},"2\n",{"type":17,"tag":613,"props":1913,"children":1914},{"class":615,"line":770},[1915,1919,1923,1928,1932,1936],{"type":17,"tag":613,"props":1916,"children":1917},{"class":626},[1918],{"type":23,"value":695},{"type":17,"tag":613,"props":1920,"children":1921},{"class":670},[1922],{"type":23,"value":700},{"type":17,"tag":613,"props":1924,"children":1925},{"class":626},[1926],{"type":23,"value":1927},".c_dim ",{"type":17,"tag":613,"props":1929,"children":1930},{"class":620},[1931],{"type":23,"value":710},{"type":17,"tag":613,"props":1933,"children":1934},{"class":626},[1935],{"type":23,"value":629},{"type":17,"tag":613,"props":1937,"children":1938},{"class":670},[1939],{"type":23,"value":1911},{"type":17,"tag":613,"props":1941,"children":1942},{"class":615,"line":778},[1943,1947,1951,1956,1960,1964],{"type":17,"tag":613,"props":1944,"children":1945},{"class":626},[1946],{"type":23,"value":695},{"type":17,"tag":613,"props":1948,"children":1949},{"class":670},[1950],{"type":23,"value":700},{"type":17,"tag":613,"props":1952,"children":1953},{"class":626},[1954],{"type":23,"value":1955},".pred_horizons ",{"type":17,"tag":613,"props":1957,"children":1958},{"class":620},[1959],{"type":23,"value":710},{"type":17,"tag":613,"props":1961,"children":1962},{"class":626},[1963],{"type":23,"value":629},{"type":17,"tag":613,"props":1965,"children":1966},{"class":670},[1967],{"type":23,"value":1968},"10\n",{"type":17,"tag":613,"props":1970,"children":1971},{"class":615,"line":804},[1972],{"type":17,"tag":613,"props":1973,"children":1974},{},[1975],{"type":23,"value":649},{"type":17,"tag":613,"props":1977,"children":1978},{"class":615,"line":830},[1979,1983],{"type":17,"tag":613,"props":1980,"children":1981},{"class":626},[1982],{"type":23,"value":695},{"type":17,"tag":613,"props":1984,"children":1985},{"class":1850},[1986],{"type":23,"value":1987},"### Continuations Params\n",{"type":17,"tag":613,"props":1989,"children":1990},{"class":615,"line":838},[1991,1995,1999,2004,2008,2012],{"type":17,"tag":613,"props":1992,"children":1993},{"class":626},[1994],{"type":23,"value":695},{"type":17,"tag":613,"props":1996,"children":1997},{"class":670},[1998],{"type":23,"value":700},{"type":17,"tag":613,"props":2000,"children":2001},{"class":626},[2002],{"type":23,"value":2003},".ht ",{"type":17,"tag":613,"props":2005,"children":2006},{"class":620},[2007],{"type":23,"value":710},{"type":17,"tag":613,"props":2009,"children":2010},{"class":626},[2011],{"type":23,"value":629},{"type":17,"tag":613,"props":2013,"children":2014},{"class":670},[2015],{"type":23,"value":2016},"1e-5\n",{"type":17,"tag":613,"props":2018,"children":2019},{"class":615,"line":874},[2020,2024,2028,2033,2037,2041,2045,2049,2053],{"type":17,"tag":613,"props":2021,"children":2022},{"class":626},[2023],{"type":23,"value":695},{"type":17,"tag":613,"props":2025,"children":2026},{"class":670},[2027],{"type":23,"value":700},{"type":17,"tag":613,"props":2029,"children":2030},{"class":626},[2031],{"type":23,"value":2032},".zeta ",{"type":17,"tag":613,"props":2034,"children":2035},{"class":620},[2036],{"type":23,"value":710},{"type":17,"tag":613,"props":2038,"children":2039},{"class":626},[2040],{"type":23,"value":629},{"type":17,"tag":613,"props":2042,"children":2043},{"class":670},[2044],{"type":23,"value":976},{"type":17,"tag":613,"props":2046,"children":2047},{"class":620},[2048],{"type":23,"value":1413},{"type":17,"tag":613,"props":2050,"children":2051},{"class":670},[2052],{"type":23,"value":700},{"type":17,"tag":613,"props":2054,"children":2055},{"class":626},[2056],{"type":23,"value":2057},".ht\n",{"type":17,"tag":613,"props":2059,"children":2060},{"class":615,"line":907},[2061,2065,2069,2074,2078,2082],{"type":17,"tag":613,"props":2062,"children":2063},{"class":626},[2064],{"type":23,"value":695},{"type":17,"tag":613,"props":2066,"children":2067},{"class":670},[2068],{"type":23,"value":700},{"type":17,"tag":613,"props":2070,"children":2071},{"class":626},[2072],{"type":23,"value":2073},".alpha ",{"type":17,"tag":613,"props":2075,"children":2076},{"class":620},[2077],{"type":23,"value":710},{"type":17,"tag":613,"props":2079,"children":2080},{"class":626},[2081],{"type":23,"value":629},{"type":17,"tag":613,"props":2083,"children":2084},{"class":670},[2085],{"type":23,"value":2086},"0.5\n",{"type":17,"tag":613,"props":2088,"children":2089},{"class":615,"line":915},[2090,2094,2098,2103,2107,2111],{"type":17,"tag":613,"props":2091,"children":2092},{"class":626},[2093],{"type":23,"value":695},{"type":17,"tag":613,"props":2095,"children":2096},{"class":670},[2097],{"type":23,"value":700},{"type":17,"tag":613,"props":2099,"children":2100},{"class":626},[2101],{"type":23,"value":2102},".tf ",{"type":17,"tag":613,"props":2104,"children":2105},{"class":620},[2106],{"type":23,"value":710},{"type":17,"tag":613,"props":2108,"children":2109},{"class":626},[2110],{"type":23,"value":629},{"type":17,"tag":613,"props":2112,"children":2113},{"class":670},[2114],{"type":23,"value":2115},"1.0\n",{"type":17,"tag":613,"props":2117,"children":2118},{"class":615,"line":949},[2119],{"type":17,"tag":613,"props":2120,"children":2121},{},[2122],{"type":23,"value":649},{"type":17,"tag":613,"props":2124,"children":2125},{"class":615,"line":983},[2126,2130],{"type":17,"tag":613,"props":2127,"children":2128},{"class":626},[2129],{"type":23,"value":695},{"type":17,"tag":613,"props":2131,"children":2132},{"class":1850},[2133],{"type":23,"value":2134},"### Matrix\n",{"type":17,"tag":613,"props":2136,"children":2137},{"class":615,"line":991},[2138],{"type":17,"tag":613,"props":2139,"children":2140},{},[2141],{"type":23,"value":649},{"type":17,"tag":613,"props":2143,"children":2144},{"class":615,"line":1017},[2145,2149,2153,2157,2161,2165],{"type":17,"tag":613,"props":2146,"children":2147},{"class":626},[2148],{"type":23,"value":695},{"type":17,"tag":613,"props":2150,"children":2151},{"class":670},[2152],{"type":23,"value":700},{"type":17,"tag":613,"props":2154,"children":2155},{"class":626},[2156],{"type":23,"value":705},{"type":17,"tag":613,"props":2158,"children":2159},{"class":620},[2160],{"type":23,"value":710},{"type":17,"tag":613,"props":2162,"children":2163},{"class":626},[2164],{"type":23,"value":629},{"type":17,"tag":613,"props":2166,"children":2167},{"class":670},[2168],{"type":23,"value":2169},"1\n",{"type":17,"tag":613,"props":2171,"children":2172},{"class":615,"line":1025},[2173,2177,2181,2185,2189,2193],{"type":17,"tag":613,"props":2174,"children":2175},{"class":626},[2176],{"type":23,"value":695},{"type":17,"tag":613,"props":2178,"children":2179},{"class":670},[2180],{"type":23,"value":700},{"type":17,"tag":613,"props":2182,"children":2183},{"class":626},[2184],{"type":23,"value":732},{"type":17,"tag":613,"props":2186,"children":2187},{"class":620},[2188],{"type":23,"value":710},{"type":17,"tag":613,"props":2190,"children":2191},{"class":626},[2192],{"type":23,"value":629},{"type":17,"tag":613,"props":2194,"children":2195},{"class":670},[2196],{"type":23,"value":2197},"6\n",{"type":17,"tag":613,"props":2199,"children":2200},{"class":615,"line":1067},[2201,2205,2209,2213,2217,2221],{"type":17,"tag":613,"props":2202,"children":2203},{"class":626},[2204],{"type":23,"value":695},{"type":17,"tag":613,"props":2206,"children":2207},{"class":670},[2208],{"type":23,"value":700},{"type":17,"tag":613,"props":2210,"children":2211},{"class":626},[2212],{"type":23,"value":758},{"type":17,"tag":613,"props":2214,"children":2215},{"class":620},[2216],{"type":23,"value":710},{"type":17,"tag":613,"props":2218,"children":2219},{"class":626},[2220],{"type":23,"value":629},{"type":17,"tag":613,"props":2222,"children":2223},{"class":670},[2224],{"type":23,"value":2169},{"type":17,"tag":613,"props":2226,"children":2227},{"class":615,"line":1107},[2228,2232,2236,2240,2244,2248],{"type":17,"tag":613,"props":2229,"children":2230},{"class":626},[2231],{"type":23,"value":695},{"type":17,"tag":613,"props":2233,"children":2234},{"class":670},[2235],{"type":23,"value":700},{"type":17,"tag":613,"props":2237,"children":2238},{"class":626},[2239],{"type":23,"value":792},{"type":17,"tag":613,"props":2241,"children":2242},{"class":620},[2243],{"type":23,"value":710},{"type":17,"tag":613,"props":2245,"children":2246},{"class":626},[2247],{"type":23,"value":629},{"type":17,"tag":613,"props":2249,"children":2250},{"class":670},[2251],{"type":23,"value":2169},{"type":17,"tag":613,"props":2253,"children":2254},{"class":615,"line":1201},[2255,2259,2263,2267,2271,2275],{"type":17,"tag":613,"props":2256,"children":2257},{"class":626},[2258],{"type":23,"value":695},{"type":17,"tag":613,"props":2260,"children":2261},{"class":670},[2262],{"type":23,"value":700},{"type":17,"tag":613,"props":2264,"children":2265},{"class":626},[2266],{"type":23,"value":818},{"type":17,"tag":613,"props":2268,"children":2269},{"class":620},[2270],{"type":23,"value":710},{"type":17,"tag":613,"props":2272,"children":2273},{"class":626},[2274],{"type":23,"value":629},{"type":17,"tag":613,"props":2276,"children":2277},{"class":670},[2278],{"type":23,"value":2279},"0.1\n",{"type":17,"tag":613,"props":2281,"children":2282},{"class":615,"line":1209},[2283],{"type":17,"tag":613,"props":2284,"children":2285},{},[2286],{"type":23,"value":649},{"type":17,"tag":613,"props":2288,"children":2289},{"class":615,"line":1227},[2290,2294],{"type":17,"tag":613,"props":2291,"children":2292},{"class":626},[2293],{"type":23,"value":695},{"type":17,"tag":613,"props":2295,"children":2296},{"class":1850},[2297],{"type":23,"value":2298},"### Constraint\n",{"type":17,"tag":613,"props":2300,"children":2301},{"class":615,"line":1235},[2302,2306,2310,2315,2319,2324,2328,2333,2337],{"type":17,"tag":613,"props":2303,"children":2304},{"class":626},[2305],{"type":23,"value":695},{"type":17,"tag":613,"props":2307,"children":2308},{"class":670},[2309],{"type":23,"value":700},{"type":17,"tag":613,"props":2311,"children":2312},{"class":626},[2313],{"type":23,"value":2314},".u_min ",{"type":17,"tag":613,"props":2316,"children":2317},{"class":620},[2318],{"type":23,"value":710},{"type":17,"tag":613,"props":2320,"children":2321},{"class":626},[2322],{"type":23,"value":2323}," [ ",{"type":17,"tag":613,"props":2325,"children":2326},{"class":670},[2327],{"type":23,"value":866},{"type":17,"tag":613,"props":2329,"children":2330},{"class":626},[2331],{"type":23,"value":2332},",  ",{"type":17,"tag":613,"props":2334,"children":2335},{"class":670},[2336],{"type":23,"value":866},{"type":17,"tag":613,"props":2338,"children":2339},{"class":626},[2340],{"type":23,"value":871},{"type":17,"tag":613,"props":2342,"children":2343},{"class":615,"line":1261},[2344,2348,2352,2357,2361,2365,2369,2373,2378],{"type":17,"tag":613,"props":2345,"children":2346},{"class":626},[2347],{"type":23,"value":695},{"type":17,"tag":613,"props":2349,"children":2350},{"class":670},[2351],{"type":23,"value":700},{"type":17,"tag":613,"props":2353,"children":2354},{"class":626},[2355],{"type":23,"value":2356},".u_max ",{"type":17,"tag":613,"props":2358,"children":2359},{"class":620},[2360],{"type":23,"value":710},{"type":17,"tag":613,"props":2362,"children":2363},{"class":626},[2364],{"type":23,"value":2323},{"type":17,"tag":613,"props":2366,"children":2367},{"class":670},[2368],{"type":23,"value":1352},{"type":17,"tag":613,"props":2370,"children":2371},{"class":626},[2372],{"type":23,"value":2332},{"type":17,"tag":613,"props":2374,"children":2375},{"class":670},[2376],{"type":23,"value":2377},"1.57",{"type":17,"tag":613,"props":2379,"children":2380},{"class":626},[2381],{"type":23,"value":871},{"type":17,"tag":613,"props":2383,"children":2384},{"class":615,"line":1269},[2385,2389,2393,2398,2402,2407,2412,2417,2421],{"type":17,"tag":613,"props":2386,"children":2387},{"class":626},[2388],{"type":23,"value":695},{"type":17,"tag":613,"props":2390,"children":2391},{"class":670},[2392],{"type":23,"value":700},{"type":17,"tag":613,"props":2394,"children":2395},{"class":626},[2396],{"type":23,"value":2397},".u_dummy ",{"type":17,"tag":613,"props":2399,"children":2400},{"class":620},[2401],{"type":23,"value":710},{"type":17,"tag":613,"props":2403,"children":2404},{"class":626},[2405],{"type":23,"value":2406}," [",{"type":17,"tag":613,"props":2408,"children":2409},{"class":670},[2410],{"type":23,"value":2411},"0.01",{"type":17,"tag":613,"props":2413,"children":2414},{"class":626},[2415],{"type":23,"value":2416},", ",{"type":17,"tag":613,"props":2418,"children":2419},{"class":670},[2420],{"type":23,"value":2411},{"type":17,"tag":613,"props":2422,"children":2423},{"class":626},[2424],{"type":23,"value":871},{"type":17,"tag":613,"props":2426,"children":2427},{"class":615,"line":1425},[2428],{"type":17,"tag":613,"props":2429,"children":2430},{},[2431],{"type":23,"value":649},{"type":17,"tag":613,"props":2433,"children":2434},{"class":615,"line":1545},[2435,2439],{"type":17,"tag":613,"props":2436,"children":2437},{"class":626},[2438],{"type":23,"value":695},{"type":17,"tag":613,"props":2440,"children":2441},{"class":1850},[2442],{"type":23,"value":2443},"### Initialize matrix solution\n",{"type":17,"tag":613,"props":2445,"children":2446},{"class":615,"line":1553},[2447,2451,2455,2460,2464,2469,2473,2478,2482],{"type":17,"tag":613,"props":2448,"children":2449},{"class":626},[2450],{"type":23,"value":695},{"type":17,"tag":613,"props":2452,"children":2453},{"class":670},[2454],{"type":23,"value":700},{"type":17,"tag":613,"props":2456,"children":2457},{"class":626},[2458],{"type":23,"value":2459},".dU ",{"type":17,"tag":613,"props":2461,"children":2462},{"class":620},[2463],{"type":23,"value":710},{"type":17,"tag":613,"props":2465,"children":2466},{"class":626},[2467],{"type":23,"value":2468}," np.zeros((",{"type":17,"tag":613,"props":2470,"children":2471},{"class":670},[2472],{"type":23,"value":700},{"type":17,"tag":613,"props":2474,"children":2475},{"class":626},[2476],{"type":23,"value":2477},".u_dim, ",{"type":17,"tag":613,"props":2479,"children":2480},{"class":670},[2481],{"type":23,"value":700},{"type":17,"tag":613,"props":2483,"children":2484},{"class":626},[2485],{"type":23,"value":2486},".pred_horizons))\n",{"type":17,"tag":613,"props":2488,"children":2489},{"class":615,"line":1570},[2490],{"type":17,"tag":613,"props":2491,"children":2492},{},[2493],{"type":23,"value":649},{"type":17,"tag":613,"props":2495,"children":2496},{"class":615,"line":1578},[2497,2501],{"type":17,"tag":613,"props":2498,"children":2499},{"class":626},[2500],{"type":23,"value":695},{"type":17,"tag":613,"props":2502,"children":2503},{"class":1850},[2504],{"type":23,"value":2505},"### Reference point\n",{"type":17,"tag":613,"props":2507,"children":2508},{"class":615,"line":1604},[2509,2513,2517,2522,2526,2530,2535,2539,2543,2547,2552],{"type":17,"tag":613,"props":2510,"children":2511},{"class":626},[2512],{"type":23,"value":695},{"type":17,"tag":613,"props":2514,"children":2515},{"class":670},[2516],{"type":23,"value":700},{"type":17,"tag":613,"props":2518,"children":2519},{"class":626},[2520],{"type":23,"value":2521},".X_r ",{"type":17,"tag":613,"props":2523,"children":2524},{"class":620},[2525],{"type":23,"value":710},{"type":17,"tag":613,"props":2527,"children":2528},{"class":626},[2529],{"type":23,"value":2406},{"type":17,"tag":613,"props":2531,"children":2532},{"class":670},[2533],{"type":23,"value":2534},"3",{"type":17,"tag":613,"props":2536,"children":2537},{"class":626},[2538],{"type":23,"value":2416},{"type":17,"tag":613,"props":2540,"children":2541},{"class":670},[2542],{"type":23,"value":1352},{"type":17,"tag":613,"props":2544,"children":2545},{"class":626},[2546],{"type":23,"value":2416},{"type":17,"tag":613,"props":2548,"children":2549},{"class":670},[2550],{"type":23,"value":2551},"0.0",{"type":17,"tag":613,"props":2553,"children":2554},{"class":626},[2555],{"type":23,"value":871},{"type":17,"tag":613,"props":2557,"children":2558},{"class":615,"line":1648},[2559,2563,2567,2572,2576,2580,2584,2588,2592],{"type":17,"tag":613,"props":2560,"children":2561},{"class":626},[2562],{"type":23,"value":695},{"type":17,"tag":613,"props":2564,"children":2565},{"class":670},[2566],{"type":23,"value":700},{"type":17,"tag":613,"props":2568,"children":2569},{"class":626},[2570],{"type":23,"value":2571},".U_r ",{"type":17,"tag":613,"props":2573,"children":2574},{"class":620},[2575],{"type":23,"value":710},{"type":17,"tag":613,"props":2577,"children":2578},{"class":626},[2579],{"type":23,"value":2406},{"type":17,"tag":613,"props":2581,"children":2582},{"class":670},[2583],{"type":23,"value":866},{"type":17,"tag":613,"props":2585,"children":2586},{"class":626},[2587],{"type":23,"value":2416},{"type":17,"tag":613,"props":2589,"children":2590},{"class":670},[2591],{"type":23,"value":866},{"type":17,"tag":613,"props":2593,"children":2594},{"class":626},[2595],{"type":23,"value":2596},"]",{"type":17,"tag":26,"props":2598,"children":2599},{},[2600],{"type":23,"value":2601},"These are just for tuning parameters and initialize parameters, let's focus on CGMRES method. As the expression above at equation (1).\nLet's denote that",{"type":17,"tag":598,"props":2603,"children":2606},{"className":2604,"code":2605,"language":603,"meta":7},[601],"X = np.zeros((x_dim, pred_horizons+1))      ## State for N-prediction+1\nU = np.zeros((u_dim, pred_horizons))        ## Input Control for N-prediction\nLambda = np.zeros((x_dim, pred_horizons+1)) ## Costate vector for N-prediction+1\ndt = 0.01                                   ## Sampling Time\n",[2607],{"type":17,"tag":606,"props":2608,"children":2609},{},[2610],{"type":17,"tag":598,"props":2611,"children":2612},{"__ignoreMap":7},[2613,2648,2670,2704],{"type":17,"tag":613,"props":2614,"children":2615},{"class":615,"line":616},[2616,2621,2625,2630,2634,2638,2643],{"type":17,"tag":613,"props":2617,"children":2618},{"class":626},[2619],{"type":23,"value":2620},"X ",{"type":17,"tag":613,"props":2622,"children":2623},{"class":620},[2624],{"type":23,"value":710},{"type":17,"tag":613,"props":2626,"children":2627},{"class":626},[2628],{"type":23,"value":2629}," np.zeros((x_dim, pred_horizons",{"type":17,"tag":613,"props":2631,"children":2632},{"class":620},[2633],{"type":23,"value":1176},{"type":17,"tag":613,"props":2635,"children":2636},{"class":670},[2637],{"type":23,"value":976},{"type":17,"tag":613,"props":2639,"children":2640},{"class":626},[2641],{"type":23,"value":2642},"))      ",{"type":17,"tag":613,"props":2644,"children":2645},{"class":1850},[2646],{"type":23,"value":2647},"## State for N-prediction+1\n",{"type":17,"tag":613,"props":2649,"children":2650},{"class":615,"line":643},[2651,2656,2660,2665],{"type":17,"tag":613,"props":2652,"children":2653},{"class":626},[2654],{"type":23,"value":2655},"U ",{"type":17,"tag":613,"props":2657,"children":2658},{"class":620},[2659],{"type":23,"value":710},{"type":17,"tag":613,"props":2661,"children":2662},{"class":626},[2663],{"type":23,"value":2664}," np.zeros((u_dim, pred_horizons))        ",{"type":17,"tag":613,"props":2666,"children":2667},{"class":1850},[2668],{"type":23,"value":2669},"## Input Control for N-prediction\n",{"type":17,"tag":613,"props":2671,"children":2672},{"class":615,"line":652},[2673,2678,2682,2686,2690,2694,2699],{"type":17,"tag":613,"props":2674,"children":2675},{"class":626},[2676],{"type":23,"value":2677},"Lambda ",{"type":17,"tag":613,"props":2679,"children":2680},{"class":620},[2681],{"type":23,"value":710},{"type":17,"tag":613,"props":2683,"children":2684},{"class":626},[2685],{"type":23,"value":2629},{"type":17,"tag":613,"props":2687,"children":2688},{"class":620},[2689],{"type":23,"value":1176},{"type":17,"tag":613,"props":2691,"children":2692},{"class":670},[2693],{"type":23,"value":976},{"type":17,"tag":613,"props":2695,"children":2696},{"class":626},[2697],{"type":23,"value":2698},")) ",{"type":17,"tag":613,"props":2700,"children":2701},{"class":1850},[2702],{"type":23,"value":2703},"## Costate vector for N-prediction+1\n",{"type":17,"tag":613,"props":2705,"children":2706},{"class":615,"line":681},[2707,2712,2716,2720,2724,2729],{"type":17,"tag":613,"props":2708,"children":2709},{"class":626},[2710],{"type":23,"value":2711},"dt ",{"type":17,"tag":613,"props":2713,"children":2714},{"class":620},[2715],{"type":23,"value":710},{"type":17,"tag":613,"props":2717,"children":2718},{"class":626},[2719],{"type":23,"value":629},{"type":17,"tag":613,"props":2721,"children":2722},{"class":670},[2723],{"type":23,"value":2411},{"type":17,"tag":613,"props":2725,"children":2726},{"class":626},[2727],{"type":23,"value":2728},"                                   ",{"type":17,"tag":613,"props":2730,"children":2731},{"class":1850},[2732],{"type":23,"value":2733},"## Sampling Time",{"type":17,"tag":26,"props":2735,"children":2736},{},[2737],{"type":23,"value":2738},"Then, we can perform equation (1) as",{"type":17,"tag":598,"props":2740,"children":2743},{"className":2741,"code":2742,"language":603,"meta":7},[601],"def calc_state(self, X, U, dt):\n\n        for i in range(self.pred_horizons):\n            x_dot, y_dot, yaw_dot = self.robot_model.forward_kinematic(X[2, i], U[0, i], U[1, i])\n            \n            X[0, i+1] = X[0, i] + x_dot * dt\n            X[1, i+1] = X[1, i] + y_dot * dt\n            X[2, i+1] = X[2, i] + yaw_dot * dt\n\n        return X\n",[2744],{"type":17,"tag":606,"props":2745,"children":2746},{},[2747],{"type":17,"tag":598,"props":2748,"children":2749},{"__ignoreMap":7},[2750,2771,2778,2822,2873,2881,2947,3007,3067,3074],{"type":17,"tag":613,"props":2751,"children":2752},{"class":615,"line":616},[2753,2757,2761,2766],{"type":17,"tag":613,"props":2754,"children":2755},{"class":620},[2756],{"type":23,"value":663},{"type":17,"tag":613,"props":2758,"children":2759},{"class":626},[2760],{"type":23,"value":629},{"type":17,"tag":613,"props":2762,"children":2763},{"class":632},[2764],{"type":23,"value":2765},"calc_state",{"type":17,"tag":613,"props":2767,"children":2768},{"class":626},[2769],{"type":23,"value":2770},"(self, X, U, dt):\n",{"type":17,"tag":613,"props":2772,"children":2773},{"class":615,"line":643},[2774],{"type":17,"tag":613,"props":2775,"children":2776},{},[2777],{"type":23,"value":649},{"type":17,"tag":613,"props":2779,"children":2780},{"class":615,"line":652},[2781,2785,2790,2795,2800,2804,2809,2813,2817],{"type":17,"tag":613,"props":2782,"children":2783},{"class":626},[2784],{"type":23,"value":695},{"type":17,"tag":613,"props":2786,"children":2787},{"class":620},[2788],{"type":23,"value":2789},"for",{"type":17,"tag":613,"props":2791,"children":2792},{"class":626},[2793],{"type":23,"value":2794}," i ",{"type":17,"tag":613,"props":2796,"children":2797},{"class":620},[2798],{"type":23,"value":2799},"in",{"type":17,"tag":613,"props":2801,"children":2802},{"class":626},[2803],{"type":23,"value":629},{"type":17,"tag":613,"props":2805,"children":2806},{"class":670},[2807],{"type":23,"value":2808},"range",{"type":17,"tag":613,"props":2810,"children":2811},{"class":626},[2812],{"type":23,"value":1386},{"type":17,"tag":613,"props":2814,"children":2815},{"class":670},[2816],{"type":23,"value":700},{"type":17,"tag":613,"props":2818,"children":2819},{"class":626},[2820],{"type":23,"value":2821},".pred_horizons):\n",{"type":17,"tag":613,"props":2823,"children":2824},{"class":615,"line":681},[2825,2830,2834,2838,2842,2847,2851,2856,2860,2864,2868],{"type":17,"tag":613,"props":2826,"children":2827},{"class":626},[2828],{"type":23,"value":2829},"            x_dot, y_dot, yaw_dot ",{"type":17,"tag":613,"props":2831,"children":2832},{"class":620},[2833],{"type":23,"value":710},{"type":17,"tag":613,"props":2835,"children":2836},{"class":626},[2837],{"type":23,"value":629},{"type":17,"tag":613,"props":2839,"children":2840},{"class":670},[2841],{"type":23,"value":700},{"type":17,"tag":613,"props":2843,"children":2844},{"class":626},[2845],{"type":23,"value":2846},".robot_model.forward_kinematic(X[",{"type":17,"tag":613,"props":2848,"children":2849},{"class":670},[2850],{"type":23,"value":1352},{"type":17,"tag":613,"props":2852,"children":2853},{"class":626},[2854],{"type":23,"value":2855},", i], U[",{"type":17,"tag":613,"props":2857,"children":2858},{"class":670},[2859],{"type":23,"value":866},{"type":17,"tag":613,"props":2861,"children":2862},{"class":626},[2863],{"type":23,"value":2855},{"type":17,"tag":613,"props":2865,"children":2866},{"class":670},[2867],{"type":23,"value":976},{"type":17,"tag":613,"props":2869,"children":2870},{"class":626},[2871],{"type":23,"value":2872},", i])\n",{"type":17,"tag":613,"props":2874,"children":2875},{"class":615,"line":689},[2876],{"type":17,"tag":613,"props":2877,"children":2878},{"class":626},[2879],{"type":23,"value":2880},"            \n",{"type":17,"tag":613,"props":2882,"children":2883},{"class":615,"line":718},[2884,2889,2893,2898,2902,2906,2911,2915,2920,2924,2929,2933,2938,2942],{"type":17,"tag":613,"props":2885,"children":2886},{"class":626},[2887],{"type":23,"value":2888},"            X[",{"type":17,"tag":613,"props":2890,"children":2891},{"class":670},[2892],{"type":23,"value":866},{"type":17,"tag":613,"props":2894,"children":2895},{"class":626},[2896],{"type":23,"value":2897},", i",{"type":17,"tag":613,"props":2899,"children":2900},{"class":620},[2901],{"type":23,"value":1176},{"type":17,"tag":613,"props":2903,"children":2904},{"class":670},[2905],{"type":23,"value":976},{"type":17,"tag":613,"props":2907,"children":2908},{"class":626},[2909],{"type":23,"value":2910},"] ",{"type":17,"tag":613,"props":2912,"children":2913},{"class":620},[2914],{"type":23,"value":710},{"type":17,"tag":613,"props":2916,"children":2917},{"class":626},[2918],{"type":23,"value":2919}," X[",{"type":17,"tag":613,"props":2921,"children":2922},{"class":670},[2923],{"type":23,"value":866},{"type":17,"tag":613,"props":2925,"children":2926},{"class":626},[2927],{"type":23,"value":2928},", i] ",{"type":17,"tag":613,"props":2930,"children":2931},{"class":620},[2932],{"type":23,"value":1176},{"type":17,"tag":613,"props":2934,"children":2935},{"class":626},[2936],{"type":23,"value":2937}," x_dot ",{"type":17,"tag":613,"props":2939,"children":2940},{"class":620},[2941],{"type":23,"value":1055},{"type":17,"tag":613,"props":2943,"children":2944},{"class":626},[2945],{"type":23,"value":2946}," dt\n",{"type":17,"tag":613,"props":2948,"children":2949},{"class":615,"line":744},[2950,2954,2958,2962,2966,2970,2974,2978,2982,2986,2990,2994,2999,3003],{"type":17,"tag":613,"props":2951,"children":2952},{"class":626},[2953],{"type":23,"value":2888},{"type":17,"tag":613,"props":2955,"children":2956},{"class":670},[2957],{"type":23,"value":976},{"type":17,"tag":613,"props":2959,"children":2960},{"class":626},[2961],{"type":23,"value":2897},{"type":17,"tag":613,"props":2963,"children":2964},{"class":620},[2965],{"type":23,"value":1176},{"type":17,"tag":613,"props":2967,"children":2968},{"class":670},[2969],{"type":23,"value":976},{"type":17,"tag":613,"props":2971,"children":2972},{"class":626},[2973],{"type":23,"value":2910},{"type":17,"tag":613,"props":2975,"children":2976},{"class":620},[2977],{"type":23,"value":710},{"type":17,"tag":613,"props":2979,"children":2980},{"class":626},[2981],{"type":23,"value":2919},{"type":17,"tag":613,"props":2983,"children":2984},{"class":670},[2985],{"type":23,"value":976},{"type":17,"tag":613,"props":2987,"children":2988},{"class":626},[2989],{"type":23,"value":2928},{"type":17,"tag":613,"props":2991,"children":2992},{"class":620},[2993],{"type":23,"value":1176},{"type":17,"tag":613,"props":2995,"children":2996},{"class":626},[2997],{"type":23,"value":2998}," y_dot ",{"type":17,"tag":613,"props":3000,"children":3001},{"class":620},[3002],{"type":23,"value":1055},{"type":17,"tag":613,"props":3004,"children":3005},{"class":626},[3006],{"type":23,"value":2946},{"type":17,"tag":613,"props":3008,"children":3009},{"class":615,"line":770},[3010,3014,3018,3022,3026,3030,3034,3038,3042,3046,3050,3054,3059,3063],{"type":17,"tag":613,"props":3011,"children":3012},{"class":626},[3013],{"type":23,"value":2888},{"type":17,"tag":613,"props":3015,"children":3016},{"class":670},[3017],{"type":23,"value":1352},{"type":17,"tag":613,"props":3019,"children":3020},{"class":626},[3021],{"type":23,"value":2897},{"type":17,"tag":613,"props":3023,"children":3024},{"class":620},[3025],{"type":23,"value":1176},{"type":17,"tag":613,"props":3027,"children":3028},{"class":670},[3029],{"type":23,"value":976},{"type":17,"tag":613,"props":3031,"children":3032},{"class":626},[3033],{"type":23,"value":2910},{"type":17,"tag":613,"props":3035,"children":3036},{"class":620},[3037],{"type":23,"value":710},{"type":17,"tag":613,"props":3039,"children":3040},{"class":626},[3041],{"type":23,"value":2919},{"type":17,"tag":613,"props":3043,"children":3044},{"class":670},[3045],{"type":23,"value":1352},{"type":17,"tag":613,"props":3047,"children":3048},{"class":626},[3049],{"type":23,"value":2928},{"type":17,"tag":613,"props":3051,"children":3052},{"class":620},[3053],{"type":23,"value":1176},{"type":17,"tag":613,"props":3055,"children":3056},{"class":626},[3057],{"type":23,"value":3058}," yaw_dot ",{"type":17,"tag":613,"props":3060,"children":3061},{"class":620},[3062],{"type":23,"value":1055},{"type":17,"tag":613,"props":3064,"children":3065},{"class":626},[3066],{"type":23,"value":2946},{"type":17,"tag":613,"props":3068,"children":3069},{"class":615,"line":778},[3070],{"type":17,"tag":613,"props":3071,"children":3072},{},[3073],{"type":23,"value":649},{"type":17,"tag":613,"props":3075,"children":3076},{"class":615,"line":804},[3077,3081,3085],{"type":17,"tag":613,"props":3078,"children":3079},{"class":626},[3080],{"type":23,"value":695},{"type":17,"tag":613,"props":3082,"children":3083},{"class":620},[3084],{"type":23,"value":1219},{"type":17,"tag":613,"props":3086,"children":3087},{"class":626},[3088],{"type":23,"value":3089}," X",{"type":17,"tag":26,"props":3091,"children":3092},{},[3093],{"type":23,"value":3094},"Next we calculating costate, we are going in backward direction",{"type":17,"tag":598,"props":3096,"children":3099},{"className":3097,"code":3098,"language":603,"meta":7},[601],"def calc_costate(self, X, U, Lambda, dt):\n\n        x_N, y_N, yaw_N = self.hjb_equation.dphidx(X[0, -1], X[1, -1], X[2, -1],\n                                                   self.X_r[0], self.X_r[1], self.X_r[2])\n        Lambda[0, -1] = x_N\n        Lambda[1, -1] = y_N\n        Lambda[2, -1] = yaw_N\n\n\n        for i in reversed(range(1, self.pred_horizons)):\n\n            dhdx1, dhdx2, dhdx3 = self.hjb_equation.dhdx(\n                X[0, i], X[1, i], X[2, i],\n                self.X_r[0], self.X_r[1], self.X_r[2],\n                U[0, i], Lambda[0, i+1], Lambda[1, i+1]\n            )\n\n            Lambda[0, i] = Lambda[0, i+1] + dhdx1 * dt\n            Lambda[1, i] = Lambda[1, i+1] + dhdx2 * dt\n            Lambda[2, i] = Lambda[2, i+1] + dhdx3 * dt\n    \n\n        return Lambda\n",[3100],{"type":17,"tag":606,"props":3101,"children":3102},{},[3103],{"type":17,"tag":598,"props":3104,"children":3105},{"__ignoreMap":7},[3106,3127,3134,3221,3280,3317,3353,3389,3396,3403,3460,3467,3492,3526,3582,3640,3648,3655,3717,3777,3837,3845,3852],{"type":17,"tag":613,"props":3107,"children":3108},{"class":615,"line":616},[3109,3113,3117,3122],{"type":17,"tag":613,"props":3110,"children":3111},{"class":620},[3112],{"type":23,"value":663},{"type":17,"tag":613,"props":3114,"children":3115},{"class":626},[3116],{"type":23,"value":629},{"type":17,"tag":613,"props":3118,"children":3119},{"class":632},[3120],{"type":23,"value":3121},"calc_costate",{"type":17,"tag":613,"props":3123,"children":3124},{"class":626},[3125],{"type":23,"value":3126},"(self, X, U, Lambda, dt):\n",{"type":17,"tag":613,"props":3128,"children":3129},{"class":615,"line":643},[3130],{"type":17,"tag":613,"props":3131,"children":3132},{},[3133],{"type":23,"value":649},{"type":17,"tag":613,"props":3135,"children":3136},{"class":615,"line":652},[3137,3142,3146,3150,3154,3159,3163,3167,3171,3175,3180,3184,3188,3192,3196,3200,3204,3208,3212,3216],{"type":17,"tag":613,"props":3138,"children":3139},{"class":626},[3140],{"type":23,"value":3141},"        x_N, y_N, yaw_N ",{"type":17,"tag":613,"props":3143,"children":3144},{"class":620},[3145],{"type":23,"value":710},{"type":17,"tag":613,"props":3147,"children":3148},{"class":626},[3149],{"type":23,"value":629},{"type":17,"tag":613,"props":3151,"children":3152},{"class":670},[3153],{"type":23,"value":700},{"type":17,"tag":613,"props":3155,"children":3156},{"class":626},[3157],{"type":23,"value":3158},".hjb_equation.dphidx(X[",{"type":17,"tag":613,"props":3160,"children":3161},{"class":670},[3162],{"type":23,"value":866},{"type":17,"tag":613,"props":3164,"children":3165},{"class":626},[3166],{"type":23,"value":2416},{"type":17,"tag":613,"props":3168,"children":3169},{"class":620},[3170],{"type":23,"value":1045},{"type":17,"tag":613,"props":3172,"children":3173},{"class":670},[3174],{"type":23,"value":976},{"type":17,"tag":613,"props":3176,"children":3177},{"class":626},[3178],{"type":23,"value":3179},"], X[",{"type":17,"tag":613,"props":3181,"children":3182},{"class":670},[3183],{"type":23,"value":976},{"type":17,"tag":613,"props":3185,"children":3186},{"class":626},[3187],{"type":23,"value":2416},{"type":17,"tag":613,"props":3189,"children":3190},{"class":620},[3191],{"type":23,"value":1045},{"type":17,"tag":613,"props":3193,"children":3194},{"class":670},[3195],{"type":23,"value":976},{"type":17,"tag":613,"props":3197,"children":3198},{"class":626},[3199],{"type":23,"value":3179},{"type":17,"tag":613,"props":3201,"children":3202},{"class":670},[3203],{"type":23,"value":1352},{"type":17,"tag":613,"props":3205,"children":3206},{"class":626},[3207],{"type":23,"value":2416},{"type":17,"tag":613,"props":3209,"children":3210},{"class":620},[3211],{"type":23,"value":1045},{"type":17,"tag":613,"props":3213,"children":3214},{"class":670},[3215],{"type":23,"value":976},{"type":17,"tag":613,"props":3217,"children":3218},{"class":626},[3219],{"type":23,"value":3220},"],\n",{"type":17,"tag":613,"props":3222,"children":3223},{"class":615,"line":681},[3224,3229,3233,3238,3242,3247,3251,3255,3259,3263,3267,3271,3275],{"type":17,"tag":613,"props":3225,"children":3226},{"class":626},[3227],{"type":23,"value":3228},"                                                   ",{"type":17,"tag":613,"props":3230,"children":3231},{"class":670},[3232],{"type":23,"value":700},{"type":17,"tag":613,"props":3234,"children":3235},{"class":626},[3236],{"type":23,"value":3237},".X_r[",{"type":17,"tag":613,"props":3239,"children":3240},{"class":670},[3241],{"type":23,"value":866},{"type":17,"tag":613,"props":3243,"children":3244},{"class":626},[3245],{"type":23,"value":3246},"], ",{"type":17,"tag":613,"props":3248,"children":3249},{"class":670},[3250],{"type":23,"value":700},{"type":17,"tag":613,"props":3252,"children":3253},{"class":626},[3254],{"type":23,"value":3237},{"type":17,"tag":613,"props":3256,"children":3257},{"class":670},[3258],{"type":23,"value":976},{"type":17,"tag":613,"props":3260,"children":3261},{"class":626},[3262],{"type":23,"value":3246},{"type":17,"tag":613,"props":3264,"children":3265},{"class":670},[3266],{"type":23,"value":700},{"type":17,"tag":613,"props":3268,"children":3269},{"class":626},[3270],{"type":23,"value":3237},{"type":17,"tag":613,"props":3272,"children":3273},{"class":670},[3274],{"type":23,"value":1352},{"type":17,"tag":613,"props":3276,"children":3277},{"class":626},[3278],{"type":23,"value":3279},"])\n",{"type":17,"tag":613,"props":3281,"children":3282},{"class":615,"line":689},[3283,3288,3292,3296,3300,3304,3308,3312],{"type":17,"tag":613,"props":3284,"children":3285},{"class":626},[3286],{"type":23,"value":3287},"        Lambda[",{"type":17,"tag":613,"props":3289,"children":3290},{"class":670},[3291],{"type":23,"value":866},{"type":17,"tag":613,"props":3293,"children":3294},{"class":626},[3295],{"type":23,"value":2416},{"type":17,"tag":613,"props":3297,"children":3298},{"class":620},[3299],{"type":23,"value":1045},{"type":17,"tag":613,"props":3301,"children":3302},{"class":670},[3303],{"type":23,"value":976},{"type":17,"tag":613,"props":3305,"children":3306},{"class":626},[3307],{"type":23,"value":2910},{"type":17,"tag":613,"props":3309,"children":3310},{"class":620},[3311],{"type":23,"value":710},{"type":17,"tag":613,"props":3313,"children":3314},{"class":626},[3315],{"type":23,"value":3316}," x_N\n",{"type":17,"tag":613,"props":3318,"children":3319},{"class":615,"line":718},[3320,3324,3328,3332,3336,3340,3344,3348],{"type":17,"tag":613,"props":3321,"children":3322},{"class":626},[3323],{"type":23,"value":3287},{"type":17,"tag":613,"props":3325,"children":3326},{"class":670},[3327],{"type":23,"value":976},{"type":17,"tag":613,"props":3329,"children":3330},{"class":626},[3331],{"type":23,"value":2416},{"type":17,"tag":613,"props":3333,"children":3334},{"class":620},[3335],{"type":23,"value":1045},{"type":17,"tag":613,"props":3337,"children":3338},{"class":670},[3339],{"type":23,"value":976},{"type":17,"tag":613,"props":3341,"children":3342},{"class":626},[3343],{"type":23,"value":2910},{"type":17,"tag":613,"props":3345,"children":3346},{"class":620},[3347],{"type":23,"value":710},{"type":17,"tag":613,"props":3349,"children":3350},{"class":626},[3351],{"type":23,"value":3352}," y_N\n",{"type":17,"tag":613,"props":3354,"children":3355},{"class":615,"line":744},[3356,3360,3364,3368,3372,3376,3380,3384],{"type":17,"tag":613,"props":3357,"children":3358},{"class":626},[3359],{"type":23,"value":3287},{"type":17,"tag":613,"props":3361,"children":3362},{"class":670},[3363],{"type":23,"value":1352},{"type":17,"tag":613,"props":3365,"children":3366},{"class":626},[3367],{"type":23,"value":2416},{"type":17,"tag":613,"props":3369,"children":3370},{"class":620},[3371],{"type":23,"value":1045},{"type":17,"tag":613,"props":3373,"children":3374},{"class":670},[3375],{"type":23,"value":976},{"type":17,"tag":613,"props":3377,"children":3378},{"class":626},[3379],{"type":23,"value":2910},{"type":17,"tag":613,"props":3381,"children":3382},{"class":620},[3383],{"type":23,"value":710},{"type":17,"tag":613,"props":3385,"children":3386},{"class":626},[3387],{"type":23,"value":3388}," yaw_N\n",{"type":17,"tag":613,"props":3390,"children":3391},{"class":615,"line":770},[3392],{"type":17,"tag":613,"props":3393,"children":3394},{},[3395],{"type":23,"value":649},{"type":17,"tag":613,"props":3397,"children":3398},{"class":615,"line":778},[3399],{"type":17,"tag":613,"props":3400,"children":3401},{},[3402],{"type":23,"value":649},{"type":17,"tag":613,"props":3404,"children":3405},{"class":615,"line":804},[3406,3410,3414,3418,3422,3426,3431,3435,3439,3443,3447,3451,3455],{"type":17,"tag":613,"props":3407,"children":3408},{"class":626},[3409],{"type":23,"value":695},{"type":17,"tag":613,"props":3411,"children":3412},{"class":620},[3413],{"type":23,"value":2789},{"type":17,"tag":613,"props":3415,"children":3416},{"class":626},[3417],{"type":23,"value":2794},{"type":17,"tag":613,"props":3419,"children":3420},{"class":620},[3421],{"type":23,"value":2799},{"type":17,"tag":613,"props":3423,"children":3424},{"class":626},[3425],{"type":23,"value":629},{"type":17,"tag":613,"props":3427,"children":3428},{"class":670},[3429],{"type":23,"value":3430},"reversed",{"type":17,"tag":613,"props":3432,"children":3433},{"class":626},[3434],{"type":23,"value":1386},{"type":17,"tag":613,"props":3436,"children":3437},{"class":670},[3438],{"type":23,"value":2808},{"type":17,"tag":613,"props":3440,"children":3441},{"class":626},[3442],{"type":23,"value":1386},{"type":17,"tag":613,"props":3444,"children":3445},{"class":670},[3446],{"type":23,"value":976},{"type":17,"tag":613,"props":3448,"children":3449},{"class":626},[3450],{"type":23,"value":2416},{"type":17,"tag":613,"props":3452,"children":3453},{"class":670},[3454],{"type":23,"value":700},{"type":17,"tag":613,"props":3456,"children":3457},{"class":626},[3458],{"type":23,"value":3459},".pred_horizons)):\n",{"type":17,"tag":613,"props":3461,"children":3462},{"class":615,"line":830},[3463],{"type":17,"tag":613,"props":3464,"children":3465},{},[3466],{"type":23,"value":649},{"type":17,"tag":613,"props":3468,"children":3469},{"class":615,"line":838},[3470,3475,3479,3483,3487],{"type":17,"tag":613,"props":3471,"children":3472},{"class":626},[3473],{"type":23,"value":3474},"            dhdx1, dhdx2, dhdx3 ",{"type":17,"tag":613,"props":3476,"children":3477},{"class":620},[3478],{"type":23,"value":710},{"type":17,"tag":613,"props":3480,"children":3481},{"class":626},[3482],{"type":23,"value":629},{"type":17,"tag":613,"props":3484,"children":3485},{"class":670},[3486],{"type":23,"value":700},{"type":17,"tag":613,"props":3488,"children":3489},{"class":626},[3490],{"type":23,"value":3491},".hjb_equation.dhdx(\n",{"type":17,"tag":613,"props":3493,"children":3494},{"class":615,"line":874},[3495,3500,3504,3509,3513,3517,3521],{"type":17,"tag":613,"props":3496,"children":3497},{"class":626},[3498],{"type":23,"value":3499},"                X[",{"type":17,"tag":613,"props":3501,"children":3502},{"class":670},[3503],{"type":23,"value":866},{"type":17,"tag":613,"props":3505,"children":3506},{"class":626},[3507],{"type":23,"value":3508},", i], X[",{"type":17,"tag":613,"props":3510,"children":3511},{"class":670},[3512],{"type":23,"value":976},{"type":17,"tag":613,"props":3514,"children":3515},{"class":626},[3516],{"type":23,"value":3508},{"type":17,"tag":613,"props":3518,"children":3519},{"class":670},[3520],{"type":23,"value":1352},{"type":17,"tag":613,"props":3522,"children":3523},{"class":626},[3524],{"type":23,"value":3525},", i],\n",{"type":17,"tag":613,"props":3527,"children":3528},{"class":615,"line":907},[3529,3534,3538,3542,3546,3550,3554,3558,3562,3566,3570,3574,3578],{"type":17,"tag":613,"props":3530,"children":3531},{"class":626},[3532],{"type":23,"value":3533},"                ",{"type":17,"tag":613,"props":3535,"children":3536},{"class":670},[3537],{"type":23,"value":700},{"type":17,"tag":613,"props":3539,"children":3540},{"class":626},[3541],{"type":23,"value":3237},{"type":17,"tag":613,"props":3543,"children":3544},{"class":670},[3545],{"type":23,"value":866},{"type":17,"tag":613,"props":3547,"children":3548},{"class":626},[3549],{"type":23,"value":3246},{"type":17,"tag":613,"props":3551,"children":3552},{"class":670},[3553],{"type":23,"value":700},{"type":17,"tag":613,"props":3555,"children":3556},{"class":626},[3557],{"type":23,"value":3237},{"type":17,"tag":613,"props":3559,"children":3560},{"class":670},[3561],{"type":23,"value":976},{"type":17,"tag":613,"props":3563,"children":3564},{"class":626},[3565],{"type":23,"value":3246},{"type":17,"tag":613,"props":3567,"children":3568},{"class":670},[3569],{"type":23,"value":700},{"type":17,"tag":613,"props":3571,"children":3572},{"class":626},[3573],{"type":23,"value":3237},{"type":17,"tag":613,"props":3575,"children":3576},{"class":670},[3577],{"type":23,"value":1352},{"type":17,"tag":613,"props":3579,"children":3580},{"class":626},[3581],{"type":23,"value":3220},{"type":17,"tag":613,"props":3583,"children":3584},{"class":615,"line":915},[3585,3590,3594,3599,3603,3607,3611,3615,3620,3624,3628,3632,3636],{"type":17,"tag":613,"props":3586,"children":3587},{"class":626},[3588],{"type":23,"value":3589},"                U[",{"type":17,"tag":613,"props":3591,"children":3592},{"class":670},[3593],{"type":23,"value":866},{"type":17,"tag":613,"props":3595,"children":3596},{"class":626},[3597],{"type":23,"value":3598},", i], Lambda[",{"type":17,"tag":613,"props":3600,"children":3601},{"class":670},[3602],{"type":23,"value":866},{"type":17,"tag":613,"props":3604,"children":3605},{"class":626},[3606],{"type":23,"value":2897},{"type":17,"tag":613,"props":3608,"children":3609},{"class":620},[3610],{"type":23,"value":1176},{"type":17,"tag":613,"props":3612,"children":3613},{"class":670},[3614],{"type":23,"value":976},{"type":17,"tag":613,"props":3616,"children":3617},{"class":626},[3618],{"type":23,"value":3619},"], Lambda[",{"type":17,"tag":613,"props":3621,"children":3622},{"class":670},[3623],{"type":23,"value":976},{"type":17,"tag":613,"props":3625,"children":3626},{"class":626},[3627],{"type":23,"value":2897},{"type":17,"tag":613,"props":3629,"children":3630},{"class":620},[3631],{"type":23,"value":1176},{"type":17,"tag":613,"props":3633,"children":3634},{"class":670},[3635],{"type":23,"value":976},{"type":17,"tag":613,"props":3637,"children":3638},{"class":626},[3639],{"type":23,"value":871},{"type":17,"tag":613,"props":3641,"children":3642},{"class":615,"line":949},[3643],{"type":17,"tag":613,"props":3644,"children":3645},{"class":626},[3646],{"type":23,"value":3647},"            )\n",{"type":17,"tag":613,"props":3649,"children":3650},{"class":615,"line":983},[3651],{"type":17,"tag":613,"props":3652,"children":3653},{},[3654],{"type":23,"value":649},{"type":17,"tag":613,"props":3656,"children":3657},{"class":615,"line":991},[3658,3663,3667,3671,3675,3680,3684,3688,3692,3696,3700,3704,3709,3713],{"type":17,"tag":613,"props":3659,"children":3660},{"class":626},[3661],{"type":23,"value":3662},"            Lambda[",{"type":17,"tag":613,"props":3664,"children":3665},{"class":670},[3666],{"type":23,"value":866},{"type":17,"tag":613,"props":3668,"children":3669},{"class":626},[3670],{"type":23,"value":2928},{"type":17,"tag":613,"props":3672,"children":3673},{"class":620},[3674],{"type":23,"value":710},{"type":17,"tag":613,"props":3676,"children":3677},{"class":626},[3678],{"type":23,"value":3679}," Lambda[",{"type":17,"tag":613,"props":3681,"children":3682},{"class":670},[3683],{"type":23,"value":866},{"type":17,"tag":613,"props":3685,"children":3686},{"class":626},[3687],{"type":23,"value":2897},{"type":17,"tag":613,"props":3689,"children":3690},{"class":620},[3691],{"type":23,"value":1176},{"type":17,"tag":613,"props":3693,"children":3694},{"class":670},[3695],{"type":23,"value":976},{"type":17,"tag":613,"props":3697,"children":3698},{"class":626},[3699],{"type":23,"value":2910},{"type":17,"tag":613,"props":3701,"children":3702},{"class":620},[3703],{"type":23,"value":1176},{"type":17,"tag":613,"props":3705,"children":3706},{"class":626},[3707],{"type":23,"value":3708}," dhdx1 ",{"type":17,"tag":613,"props":3710,"children":3711},{"class":620},[3712],{"type":23,"value":1055},{"type":17,"tag":613,"props":3714,"children":3715},{"class":626},[3716],{"type":23,"value":2946},{"type":17,"tag":613,"props":3718,"children":3719},{"class":615,"line":1017},[3720,3724,3728,3732,3736,3740,3744,3748,3752,3756,3760,3764,3769,3773],{"type":17,"tag":613,"props":3721,"children":3722},{"class":626},[3723],{"type":23,"value":3662},{"type":17,"tag":613,"props":3725,"children":3726},{"class":670},[3727],{"type":23,"value":976},{"type":17,"tag":613,"props":3729,"children":3730},{"class":626},[3731],{"type":23,"value":2928},{"type":17,"tag":613,"props":3733,"children":3734},{"class":620},[3735],{"type":23,"value":710},{"type":17,"tag":613,"props":3737,"children":3738},{"class":626},[3739],{"type":23,"value":3679},{"type":17,"tag":613,"props":3741,"children":3742},{"class":670},[3743],{"type":23,"value":976},{"type":17,"tag":613,"props":3745,"children":3746},{"class":626},[3747],{"type":23,"value":2897},{"type":17,"tag":613,"props":3749,"children":3750},{"class":620},[3751],{"type":23,"value":1176},{"type":17,"tag":613,"props":3753,"children":3754},{"class":670},[3755],{"type":23,"value":976},{"type":17,"tag":613,"props":3757,"children":3758},{"class":626},[3759],{"type":23,"value":2910},{"type":17,"tag":613,"props":3761,"children":3762},{"class":620},[3763],{"type":23,"value":1176},{"type":17,"tag":613,"props":3765,"children":3766},{"class":626},[3767],{"type":23,"value":3768}," dhdx2 ",{"type":17,"tag":613,"props":3770,"children":3771},{"class":620},[3772],{"type":23,"value":1055},{"type":17,"tag":613,"props":3774,"children":3775},{"class":626},[3776],{"type":23,"value":2946},{"type":17,"tag":613,"props":3778,"children":3779},{"class":615,"line":1025},[3780,3784,3788,3792,3796,3800,3804,3808,3812,3816,3820,3824,3829,3833],{"type":17,"tag":613,"props":3781,"children":3782},{"class":626},[3783],{"type":23,"value":3662},{"type":17,"tag":613,"props":3785,"children":3786},{"class":670},[3787],{"type":23,"value":1352},{"type":17,"tag":613,"props":3789,"children":3790},{"class":626},[3791],{"type":23,"value":2928},{"type":17,"tag":613,"props":3793,"children":3794},{"class":620},[3795],{"type":23,"value":710},{"type":17,"tag":613,"props":3797,"children":3798},{"class":626},[3799],{"type":23,"value":3679},{"type":17,"tag":613,"props":3801,"children":3802},{"class":670},[3803],{"type":23,"value":1352},{"type":17,"tag":613,"props":3805,"children":3806},{"class":626},[3807],{"type":23,"value":2897},{"type":17,"tag":613,"props":3809,"children":3810},{"class":620},[3811],{"type":23,"value":1176},{"type":17,"tag":613,"props":3813,"children":3814},{"class":670},[3815],{"type":23,"value":976},{"type":17,"tag":613,"props":3817,"children":3818},{"class":626},[3819],{"type":23,"value":2910},{"type":17,"tag":613,"props":3821,"children":3822},{"class":620},[3823],{"type":23,"value":1176},{"type":17,"tag":613,"props":3825,"children":3826},{"class":626},[3827],{"type":23,"value":3828}," dhdx3 ",{"type":17,"tag":613,"props":3830,"children":3831},{"class":620},[3832],{"type":23,"value":1055},{"type":17,"tag":613,"props":3834,"children":3835},{"class":626},[3836],{"type":23,"value":2946},{"type":17,"tag":613,"props":3838,"children":3839},{"class":615,"line":1067},[3840],{"type":17,"tag":613,"props":3841,"children":3842},{"class":626},[3843],{"type":23,"value":3844},"    \n",{"type":17,"tag":613,"props":3846,"children":3847},{"class":615,"line":1107},[3848],{"type":17,"tag":613,"props":3849,"children":3850},{},[3851],{"type":23,"value":649},{"type":17,"tag":613,"props":3853,"children":3854},{"class":615,"line":1201},[3855,3859,3863],{"type":17,"tag":613,"props":3856,"children":3857},{"class":626},[3858],{"type":23,"value":695},{"type":17,"tag":613,"props":3860,"children":3861},{"class":620},[3862],{"type":23,"value":1219},{"type":17,"tag":613,"props":3864,"children":3865},{"class":626},[3866],{"type":23,"value":3867}," Lambda",{"type":17,"tag":26,"props":3869,"children":3870},{},[3871],{"type":23,"value":3872},"And finally, calculating Newton F Function",{"type":17,"tag":598,"props":3874,"children":3877},{"className":3875,"code":3876,"language":603,"meta":7},[601],"def calc_f(self, X, U, Lambda, Mu, dt):\n\n        X_new = self.calc_state(X, U, dt)\n\n        Lambda_new = self.calc_costate(X_new, U, Lambda, dt)\n\n        F = np.zeros((self.u_dim, self.pred_horizons))\n\n        for i in range(self.pred_horizons):\n            dhdu1, dhdu2 = self.hjb_equation.dhdu(X_new[2, i], U[0, i], U[1, i],\n                                                  self.U_r[0], self.U_r[1],\n                                                  Lambda_new[0, i+1], Lambda_new[1, i+1], Lambda_new[2, i+1],\n                                                  Mu[0, i], Mu[1, i])\n            F[0, i] = dhdu1\n            F[1, i] = dhdu2\n            \n        F = F.T.ravel().reshape(-1, 1)\n\n        return F\n",[3878],{"type":17,"tag":606,"props":3879,"children":3880},{},[3881],{"type":17,"tag":598,"props":3882,"children":3883},{"__ignoreMap":7},[3884,3905,3912,3937,3944,3969,3976,4008,4015,4054,4103,4144,4213,4238,4263,4287,4294,4330,4337],{"type":17,"tag":613,"props":3885,"children":3886},{"class":615,"line":616},[3887,3891,3895,3900],{"type":17,"tag":613,"props":3888,"children":3889},{"class":620},[3890],{"type":23,"value":663},{"type":17,"tag":613,"props":3892,"children":3893},{"class":626},[3894],{"type":23,"value":629},{"type":17,"tag":613,"props":3896,"children":3897},{"class":632},[3898],{"type":23,"value":3899},"calc_f",{"type":17,"tag":613,"props":3901,"children":3902},{"class":626},[3903],{"type":23,"value":3904},"(self, X, U, Lambda, Mu, dt):\n",{"type":17,"tag":613,"props":3906,"children":3907},{"class":615,"line":643},[3908],{"type":17,"tag":613,"props":3909,"children":3910},{},[3911],{"type":23,"value":649},{"type":17,"tag":613,"props":3913,"children":3914},{"class":615,"line":652},[3915,3920,3924,3928,3932],{"type":17,"tag":613,"props":3916,"children":3917},{"class":626},[3918],{"type":23,"value":3919},"        X_new ",{"type":17,"tag":613,"props":3921,"children":3922},{"class":620},[3923],{"type":23,"value":710},{"type":17,"tag":613,"props":3925,"children":3926},{"class":626},[3927],{"type":23,"value":629},{"type":17,"tag":613,"props":3929,"children":3930},{"class":670},[3931],{"type":23,"value":700},{"type":17,"tag":613,"props":3933,"children":3934},{"class":626},[3935],{"type":23,"value":3936},".calc_state(X, U, dt)\n",{"type":17,"tag":613,"props":3938,"children":3939},{"class":615,"line":681},[3940],{"type":17,"tag":613,"props":3941,"children":3942},{},[3943],{"type":23,"value":649},{"type":17,"tag":613,"props":3945,"children":3946},{"class":615,"line":689},[3947,3952,3956,3960,3964],{"type":17,"tag":613,"props":3948,"children":3949},{"class":626},[3950],{"type":23,"value":3951},"        Lambda_new ",{"type":17,"tag":613,"props":3953,"children":3954},{"class":620},[3955],{"type":23,"value":710},{"type":17,"tag":613,"props":3957,"children":3958},{"class":626},[3959],{"type":23,"value":629},{"type":17,"tag":613,"props":3961,"children":3962},{"class":670},[3963],{"type":23,"value":700},{"type":17,"tag":613,"props":3965,"children":3966},{"class":626},[3967],{"type":23,"value":3968},".calc_costate(X_new, U, Lambda, dt)\n",{"type":17,"tag":613,"props":3970,"children":3971},{"class":615,"line":718},[3972],{"type":17,"tag":613,"props":3973,"children":3974},{},[3975],{"type":23,"value":649},{"type":17,"tag":613,"props":3977,"children":3978},{"class":615,"line":744},[3979,3984,3988,3992,3996,4000,4004],{"type":17,"tag":613,"props":3980,"children":3981},{"class":626},[3982],{"type":23,"value":3983},"        F ",{"type":17,"tag":613,"props":3985,"children":3986},{"class":620},[3987],{"type":23,"value":710},{"type":17,"tag":613,"props":3989,"children":3990},{"class":626},[3991],{"type":23,"value":2468},{"type":17,"tag":613,"props":3993,"children":3994},{"class":670},[3995],{"type":23,"value":700},{"type":17,"tag":613,"props":3997,"children":3998},{"class":626},[3999],{"type":23,"value":2477},{"type":17,"tag":613,"props":4001,"children":4002},{"class":670},[4003],{"type":23,"value":700},{"type":17,"tag":613,"props":4005,"children":4006},{"class":626},[4007],{"type":23,"value":2486},{"type":17,"tag":613,"props":4009,"children":4010},{"class":615,"line":770},[4011],{"type":17,"tag":613,"props":4012,"children":4013},{},[4014],{"type":23,"value":649},{"type":17,"tag":613,"props":4016,"children":4017},{"class":615,"line":778},[4018,4022,4026,4030,4034,4038,4042,4046,4050],{"type":17,"tag":613,"props":4019,"children":4020},{"class":626},[4021],{"type":23,"value":695},{"type":17,"tag":613,"props":4023,"children":4024},{"class":620},[4025],{"type":23,"value":2789},{"type":17,"tag":613,"props":4027,"children":4028},{"class":626},[4029],{"type":23,"value":2794},{"type":17,"tag":613,"props":4031,"children":4032},{"class":620},[4033],{"type":23,"value":2799},{"type":17,"tag":613,"props":4035,"children":4036},{"class":626},[4037],{"type":23,"value":629},{"type":17,"tag":613,"props":4039,"children":4040},{"class":670},[4041],{"type":23,"value":2808},{"type":17,"tag":613,"props":4043,"children":4044},{"class":626},[4045],{"type":23,"value":1386},{"type":17,"tag":613,"props":4047,"children":4048},{"class":670},[4049],{"type":23,"value":700},{"type":17,"tag":613,"props":4051,"children":4052},{"class":626},[4053],{"type":23,"value":2821},{"type":17,"tag":613,"props":4055,"children":4056},{"class":615,"line":804},[4057,4062,4066,4070,4074,4079,4083,4087,4091,4095,4099],{"type":17,"tag":613,"props":4058,"children":4059},{"class":626},[4060],{"type":23,"value":4061},"            dhdu1, dhdu2 ",{"type":17,"tag":613,"props":4063,"children":4064},{"class":620},[4065],{"type":23,"value":710},{"type":17,"tag":613,"props":4067,"children":4068},{"class":626},[4069],{"type":23,"value":629},{"type":17,"tag":613,"props":4071,"children":4072},{"class":670},[4073],{"type":23,"value":700},{"type":17,"tag":613,"props":4075,"children":4076},{"class":626},[4077],{"type":23,"value":4078},".hjb_equation.dhdu(X_new[",{"type":17,"tag":613,"props":4080,"children":4081},{"class":670},[4082],{"type":23,"value":1352},{"type":17,"tag":613,"props":4084,"children":4085},{"class":626},[4086],{"type":23,"value":2855},{"type":17,"tag":613,"props":4088,"children":4089},{"class":670},[4090],{"type":23,"value":866},{"type":17,"tag":613,"props":4092,"children":4093},{"class":626},[4094],{"type":23,"value":2855},{"type":17,"tag":613,"props":4096,"children":4097},{"class":670},[4098],{"type":23,"value":976},{"type":17,"tag":613,"props":4100,"children":4101},{"class":626},[4102],{"type":23,"value":3525},{"type":17,"tag":613,"props":4104,"children":4105},{"class":615,"line":830},[4106,4111,4115,4120,4124,4128,4132,4136,4140],{"type":17,"tag":613,"props":4107,"children":4108},{"class":626},[4109],{"type":23,"value":4110},"                                                  ",{"type":17,"tag":613,"props":4112,"children":4113},{"class":670},[4114],{"type":23,"value":700},{"type":17,"tag":613,"props":4116,"children":4117},{"class":626},[4118],{"type":23,"value":4119},".U_r[",{"type":17,"tag":613,"props":4121,"children":4122},{"class":670},[4123],{"type":23,"value":866},{"type":17,"tag":613,"props":4125,"children":4126},{"class":626},[4127],{"type":23,"value":3246},{"type":17,"tag":613,"props":4129,"children":4130},{"class":670},[4131],{"type":23,"value":700},{"type":17,"tag":613,"props":4133,"children":4134},{"class":626},[4135],{"type":23,"value":4119},{"type":17,"tag":613,"props":4137,"children":4138},{"class":670},[4139],{"type":23,"value":976},{"type":17,"tag":613,"props":4141,"children":4142},{"class":626},[4143],{"type":23,"value":3220},{"type":17,"tag":613,"props":4145,"children":4146},{"class":615,"line":838},[4147,4152,4156,4160,4164,4168,4173,4177,4181,4185,4189,4193,4197,4201,4205,4209],{"type":17,"tag":613,"props":4148,"children":4149},{"class":626},[4150],{"type":23,"value":4151},"                                                  Lambda_new[",{"type":17,"tag":613,"props":4153,"children":4154},{"class":670},[4155],{"type":23,"value":866},{"type":17,"tag":613,"props":4157,"children":4158},{"class":626},[4159],{"type":23,"value":2897},{"type":17,"tag":613,"props":4161,"children":4162},{"class":620},[4163],{"type":23,"value":1176},{"type":17,"tag":613,"props":4165,"children":4166},{"class":670},[4167],{"type":23,"value":976},{"type":17,"tag":613,"props":4169,"children":4170},{"class":626},[4171],{"type":23,"value":4172},"], Lambda_new[",{"type":17,"tag":613,"props":4174,"children":4175},{"class":670},[4176],{"type":23,"value":976},{"type":17,"tag":613,"props":4178,"children":4179},{"class":626},[4180],{"type":23,"value":2897},{"type":17,"tag":613,"props":4182,"children":4183},{"class":620},[4184],{"type":23,"value":1176},{"type":17,"tag":613,"props":4186,"children":4187},{"class":670},[4188],{"type":23,"value":976},{"type":17,"tag":613,"props":4190,"children":4191},{"class":626},[4192],{"type":23,"value":4172},{"type":17,"tag":613,"props":4194,"children":4195},{"class":670},[4196],{"type":23,"value":1352},{"type":17,"tag":613,"props":4198,"children":4199},{"class":626},[4200],{"type":23,"value":2897},{"type":17,"tag":613,"props":4202,"children":4203},{"class":620},[4204],{"type":23,"value":1176},{"type":17,"tag":613,"props":4206,"children":4207},{"class":670},[4208],{"type":23,"value":976},{"type":17,"tag":613,"props":4210,"children":4211},{"class":626},[4212],{"type":23,"value":3220},{"type":17,"tag":613,"props":4214,"children":4215},{"class":615,"line":874},[4216,4221,4225,4230,4234],{"type":17,"tag":613,"props":4217,"children":4218},{"class":626},[4219],{"type":23,"value":4220},"                                                  Mu[",{"type":17,"tag":613,"props":4222,"children":4223},{"class":670},[4224],{"type":23,"value":866},{"type":17,"tag":613,"props":4226,"children":4227},{"class":626},[4228],{"type":23,"value":4229},", i], Mu[",{"type":17,"tag":613,"props":4231,"children":4232},{"class":670},[4233],{"type":23,"value":976},{"type":17,"tag":613,"props":4235,"children":4236},{"class":626},[4237],{"type":23,"value":2872},{"type":17,"tag":613,"props":4239,"children":4240},{"class":615,"line":907},[4241,4246,4250,4254,4258],{"type":17,"tag":613,"props":4242,"children":4243},{"class":626},[4244],{"type":23,"value":4245},"            F[",{"type":17,"tag":613,"props":4247,"children":4248},{"class":670},[4249],{"type":23,"value":866},{"type":17,"tag":613,"props":4251,"children":4252},{"class":626},[4253],{"type":23,"value":2928},{"type":17,"tag":613,"props":4255,"children":4256},{"class":620},[4257],{"type":23,"value":710},{"type":17,"tag":613,"props":4259,"children":4260},{"class":626},[4261],{"type":23,"value":4262}," dhdu1\n",{"type":17,"tag":613,"props":4264,"children":4265},{"class":615,"line":915},[4266,4270,4274,4278,4282],{"type":17,"tag":613,"props":4267,"children":4268},{"class":626},[4269],{"type":23,"value":4245},{"type":17,"tag":613,"props":4271,"children":4272},{"class":670},[4273],{"type":23,"value":976},{"type":17,"tag":613,"props":4275,"children":4276},{"class":626},[4277],{"type":23,"value":2928},{"type":17,"tag":613,"props":4279,"children":4280},{"class":620},[4281],{"type":23,"value":710},{"type":17,"tag":613,"props":4283,"children":4284},{"class":626},[4285],{"type":23,"value":4286}," dhdu2\n",{"type":17,"tag":613,"props":4288,"children":4289},{"class":615,"line":949},[4290],{"type":17,"tag":613,"props":4291,"children":4292},{"class":626},[4293],{"type":23,"value":2880},{"type":17,"tag":613,"props":4295,"children":4296},{"class":615,"line":983},[4297,4301,4305,4310,4314,4318,4322,4326],{"type":17,"tag":613,"props":4298,"children":4299},{"class":626},[4300],{"type":23,"value":3983},{"type":17,"tag":613,"props":4302,"children":4303},{"class":620},[4304],{"type":23,"value":710},{"type":17,"tag":613,"props":4306,"children":4307},{"class":626},[4308],{"type":23,"value":4309}," F.T.ravel().reshape(",{"type":17,"tag":613,"props":4311,"children":4312},{"class":620},[4313],{"type":23,"value":1045},{"type":17,"tag":613,"props":4315,"children":4316},{"class":670},[4317],{"type":23,"value":976},{"type":17,"tag":613,"props":4319,"children":4320},{"class":626},[4321],{"type":23,"value":2416},{"type":17,"tag":613,"props":4323,"children":4324},{"class":670},[4325],{"type":23,"value":976},{"type":17,"tag":613,"props":4327,"children":4328},{"class":626},[4329],{"type":23,"value":1422},{"type":17,"tag":613,"props":4331,"children":4332},{"class":615,"line":991},[4333],{"type":17,"tag":613,"props":4334,"children":4335},{},[4336],{"type":23,"value":649},{"type":17,"tag":613,"props":4338,"children":4339},{"class":615,"line":1017},[4340,4344,4348],{"type":17,"tag":613,"props":4341,"children":4342},{"class":626},[4343],{"type":23,"value":695},{"type":17,"tag":613,"props":4345,"children":4346},{"class":620},[4347],{"type":23,"value":1219},{"type":17,"tag":613,"props":4349,"children":4350},{"class":626},[4351],{"type":23,"value":4352}," F",{"type":17,"tag":26,"props":4354,"children":4355},{},[4356,4358,4364,4366,4371],{"type":23,"value":4357},"Now let's introduce Continuation method for Function ",{"type":17,"tag":4359,"props":4360,"children":4361},"code-inline",{},[4362],{"type":23,"value":4363},"F",{"type":23,"value":4365},", you can look at the ",{"type":17,"tag":169,"props":4367,"children":4368},{},[4369],{"type":23,"value":4370}," Continuation ",{"type":23,"value":4372}," part.",{"type":17,"tag":598,"props":4374,"children":4377},{"className":4375,"code":4376,"language":603,"meta":7},[601],"# Time step horizons\ndt = self.tf * (1-np.exp(-self.alpha*time)) / self.pred_horizons\n# F(x,u,t+h)\nF = self.calc_f(X, U, Lambda, Mu, dt)\n# F(x+hdx,u,t+h)\nx_dot, y_dot, yaw_dot = self.robot_model.forward_kinematic(X[2, 0], U[0, 0], U[1, 0])\nX[:, 0] = X[:, 0] + np.array([x_dot, y_dot, yaw_dot]) * self.ht\nFxt = self.calc_f(X, U, Lambda, Mu, dt)\n# F(x+hdx,u+hdx,t+h)\nFuxt = self.calc_f(X, U + self.dU*self.ht, Lambda, Mu , dt)\n\n# Define right-left handside equation\nleft = (Fuxt - Fxt) / self.ht\nright = -self.zeta * F - (Fxt - F)/self.ht\n",[4378],{"type":17,"tag":606,"props":4379,"children":4380},{},[4381],{"type":17,"tag":598,"props":4382,"children":4383},{"__ignoreMap":7},[4384,4392,4476,4484,4509,4517,4590,4648,4672,4680,4735,4742,4750,4792],{"type":17,"tag":613,"props":4385,"children":4386},{"class":615,"line":616},[4387],{"type":17,"tag":613,"props":4388,"children":4389},{"class":1850},[4390],{"type":23,"value":4391},"# Time step horizons\n",{"type":17,"tag":613,"props":4393,"children":4394},{"class":615,"line":643},[4395,4399,4403,4407,4411,4415,4419,4424,4428,4432,4437,4441,4445,4450,4454,4459,4463,4467,4471],{"type":17,"tag":613,"props":4396,"children":4397},{"class":626},[4398],{"type":23,"value":2711},{"type":17,"tag":613,"props":4400,"children":4401},{"class":620},[4402],{"type":23,"value":710},{"type":17,"tag":613,"props":4404,"children":4405},{"class":626},[4406],{"type":23,"value":629},{"type":17,"tag":613,"props":4408,"children":4409},{"class":670},[4410],{"type":23,"value":700},{"type":17,"tag":613,"props":4412,"children":4413},{"class":626},[4414],{"type":23,"value":2102},{"type":17,"tag":613,"props":4416,"children":4417},{"class":620},[4418],{"type":23,"value":1055},{"type":17,"tag":613,"props":4420,"children":4421},{"class":626},[4422],{"type":23,"value":4423}," (",{"type":17,"tag":613,"props":4425,"children":4426},{"class":670},[4427],{"type":23,"value":976},{"type":17,"tag":613,"props":4429,"children":4430},{"class":620},[4431],{"type":23,"value":1045},{"type":17,"tag":613,"props":4433,"children":4434},{"class":626},[4435],{"type":23,"value":4436},"np.exp(",{"type":17,"tag":613,"props":4438,"children":4439},{"class":620},[4440],{"type":23,"value":1045},{"type":17,"tag":613,"props":4442,"children":4443},{"class":670},[4444],{"type":23,"value":700},{"type":17,"tag":613,"props":4446,"children":4447},{"class":626},[4448],{"type":23,"value":4449},".alpha",{"type":17,"tag":613,"props":4451,"children":4452},{"class":620},[4453],{"type":23,"value":1055},{"type":17,"tag":613,"props":4455,"children":4456},{"class":626},[4457],{"type":23,"value":4458},"time)) ",{"type":17,"tag":613,"props":4460,"children":4461},{"class":620},[4462],{"type":23,"value":1413},{"type":17,"tag":613,"props":4464,"children":4465},{"class":626},[4466],{"type":23,"value":629},{"type":17,"tag":613,"props":4468,"children":4469},{"class":670},[4470],{"type":23,"value":700},{"type":17,"tag":613,"props":4472,"children":4473},{"class":626},[4474],{"type":23,"value":4475},".pred_horizons\n",{"type":17,"tag":613,"props":4477,"children":4478},{"class":615,"line":652},[4479],{"type":17,"tag":613,"props":4480,"children":4481},{"class":1850},[4482],{"type":23,"value":4483},"# F(x,u,t+h)\n",{"type":17,"tag":613,"props":4485,"children":4486},{"class":615,"line":681},[4487,4492,4496,4500,4504],{"type":17,"tag":613,"props":4488,"children":4489},{"class":626},[4490],{"type":23,"value":4491},"F ",{"type":17,"tag":613,"props":4493,"children":4494},{"class":620},[4495],{"type":23,"value":710},{"type":17,"tag":613,"props":4497,"children":4498},{"class":626},[4499],{"type":23,"value":629},{"type":17,"tag":613,"props":4501,"children":4502},{"class":670},[4503],{"type":23,"value":700},{"type":17,"tag":613,"props":4505,"children":4506},{"class":626},[4507],{"type":23,"value":4508},".calc_f(X, U, Lambda, Mu, dt)\n",{"type":17,"tag":613,"props":4510,"children":4511},{"class":615,"line":689},[4512],{"type":17,"tag":613,"props":4513,"children":4514},{"class":1850},[4515],{"type":23,"value":4516},"# F(x+hdx,u,t+h)\n",{"type":17,"tag":613,"props":4518,"children":4519},{"class":615,"line":718},[4520,4525,4529,4533,4537,4541,4545,4549,4553,4558,4562,4566,4570,4574,4578,4582,4586],{"type":17,"tag":613,"props":4521,"children":4522},{"class":626},[4523],{"type":23,"value":4524},"x_dot, y_dot, yaw_dot ",{"type":17,"tag":613,"props":4526,"children":4527},{"class":620},[4528],{"type":23,"value":710},{"type":17,"tag":613,"props":4530,"children":4531},{"class":626},[4532],{"type":23,"value":629},{"type":17,"tag":613,"props":4534,"children":4535},{"class":670},[4536],{"type":23,"value":700},{"type":17,"tag":613,"props":4538,"children":4539},{"class":626},[4540],{"type":23,"value":2846},{"type":17,"tag":613,"props":4542,"children":4543},{"class":670},[4544],{"type":23,"value":1352},{"type":17,"tag":613,"props":4546,"children":4547},{"class":626},[4548],{"type":23,"value":2416},{"type":17,"tag":613,"props":4550,"children":4551},{"class":670},[4552],{"type":23,"value":866},{"type":17,"tag":613,"props":4554,"children":4555},{"class":626},[4556],{"type":23,"value":4557},"], U[",{"type":17,"tag":613,"props":4559,"children":4560},{"class":670},[4561],{"type":23,"value":866},{"type":17,"tag":613,"props":4563,"children":4564},{"class":626},[4565],{"type":23,"value":2416},{"type":17,"tag":613,"props":4567,"children":4568},{"class":670},[4569],{"type":23,"value":866},{"type":17,"tag":613,"props":4571,"children":4572},{"class":626},[4573],{"type":23,"value":4557},{"type":17,"tag":613,"props":4575,"children":4576},{"class":670},[4577],{"type":23,"value":976},{"type":17,"tag":613,"props":4579,"children":4580},{"class":626},[4581],{"type":23,"value":2416},{"type":17,"tag":613,"props":4583,"children":4584},{"class":670},[4585],{"type":23,"value":866},{"type":17,"tag":613,"props":4587,"children":4588},{"class":626},[4589],{"type":23,"value":3279},{"type":17,"tag":613,"props":4591,"children":4592},{"class":615,"line":744},[4593,4598,4602,4606,4610,4615,4619,4623,4627,4632,4636,4640,4644],{"type":17,"tag":613,"props":4594,"children":4595},{"class":626},[4596],{"type":23,"value":4597},"X[:, ",{"type":17,"tag":613,"props":4599,"children":4600},{"class":670},[4601],{"type":23,"value":866},{"type":17,"tag":613,"props":4603,"children":4604},{"class":626},[4605],{"type":23,"value":2910},{"type":17,"tag":613,"props":4607,"children":4608},{"class":620},[4609],{"type":23,"value":710},{"type":17,"tag":613,"props":4611,"children":4612},{"class":626},[4613],{"type":23,"value":4614}," X[:, ",{"type":17,"tag":613,"props":4616,"children":4617},{"class":670},[4618],{"type":23,"value":866},{"type":17,"tag":613,"props":4620,"children":4621},{"class":626},[4622],{"type":23,"value":2910},{"type":17,"tag":613,"props":4624,"children":4625},{"class":620},[4626],{"type":23,"value":1176},{"type":17,"tag":613,"props":4628,"children":4629},{"class":626},[4630],{"type":23,"value":4631}," np.array([x_dot, y_dot, yaw_dot]) ",{"type":17,"tag":613,"props":4633,"children":4634},{"class":620},[4635],{"type":23,"value":1055},{"type":17,"tag":613,"props":4637,"children":4638},{"class":626},[4639],{"type":23,"value":629},{"type":17,"tag":613,"props":4641,"children":4642},{"class":670},[4643],{"type":23,"value":700},{"type":17,"tag":613,"props":4645,"children":4646},{"class":626},[4647],{"type":23,"value":2057},{"type":17,"tag":613,"props":4649,"children":4650},{"class":615,"line":770},[4651,4656,4660,4664,4668],{"type":17,"tag":613,"props":4652,"children":4653},{"class":626},[4654],{"type":23,"value":4655},"Fxt ",{"type":17,"tag":613,"props":4657,"children":4658},{"class":620},[4659],{"type":23,"value":710},{"type":17,"tag":613,"props":4661,"children":4662},{"class":626},[4663],{"type":23,"value":629},{"type":17,"tag":613,"props":4665,"children":4666},{"class":670},[4667],{"type":23,"value":700},{"type":17,"tag":613,"props":4669,"children":4670},{"class":626},[4671],{"type":23,"value":4508},{"type":17,"tag":613,"props":4673,"children":4674},{"class":615,"line":778},[4675],{"type":17,"tag":613,"props":4676,"children":4677},{"class":1850},[4678],{"type":23,"value":4679},"# F(x+hdx,u+hdx,t+h)\n",{"type":17,"tag":613,"props":4681,"children":4682},{"class":615,"line":804},[4683,4688,4692,4696,4700,4705,4709,4713,4717,4722,4726,4730],{"type":17,"tag":613,"props":4684,"children":4685},{"class":626},[4686],{"type":23,"value":4687},"Fuxt ",{"type":17,"tag":613,"props":4689,"children":4690},{"class":620},[4691],{"type":23,"value":710},{"type":17,"tag":613,"props":4693,"children":4694},{"class":626},[4695],{"type":23,"value":629},{"type":17,"tag":613,"props":4697,"children":4698},{"class":670},[4699],{"type":23,"value":700},{"type":17,"tag":613,"props":4701,"children":4702},{"class":626},[4703],{"type":23,"value":4704},".calc_f(X, U ",{"type":17,"tag":613,"props":4706,"children":4707},{"class":620},[4708],{"type":23,"value":1176},{"type":17,"tag":613,"props":4710,"children":4711},{"class":626},[4712],{"type":23,"value":629},{"type":17,"tag":613,"props":4714,"children":4715},{"class":670},[4716],{"type":23,"value":700},{"type":17,"tag":613,"props":4718,"children":4719},{"class":626},[4720],{"type":23,"value":4721},".dU",{"type":17,"tag":613,"props":4723,"children":4724},{"class":620},[4725],{"type":23,"value":1055},{"type":17,"tag":613,"props":4727,"children":4728},{"class":670},[4729],{"type":23,"value":700},{"type":17,"tag":613,"props":4731,"children":4732},{"class":626},[4733],{"type":23,"value":4734},".ht, Lambda, Mu , dt)\n",{"type":17,"tag":613,"props":4736,"children":4737},{"class":615,"line":830},[4738],{"type":17,"tag":613,"props":4739,"children":4740},{},[4741],{"type":23,"value":649},{"type":17,"tag":613,"props":4743,"children":4744},{"class":615,"line":838},[4745],{"type":17,"tag":613,"props":4746,"children":4747},{"class":1850},[4748],{"type":23,"value":4749},"# Define right-left handside equation\n",{"type":17,"tag":613,"props":4751,"children":4752},{"class":615,"line":874},[4753,4758,4762,4767,4771,4776,4780,4784,4788],{"type":17,"tag":613,"props":4754,"children":4755},{"class":626},[4756],{"type":23,"value":4757},"left ",{"type":17,"tag":613,"props":4759,"children":4760},{"class":620},[4761],{"type":23,"value":710},{"type":17,"tag":613,"props":4763,"children":4764},{"class":626},[4765],{"type":23,"value":4766}," (Fuxt ",{"type":17,"tag":613,"props":4768,"children":4769},{"class":620},[4770],{"type":23,"value":1045},{"type":17,"tag":613,"props":4772,"children":4773},{"class":626},[4774],{"type":23,"value":4775}," Fxt) ",{"type":17,"tag":613,"props":4777,"children":4778},{"class":620},[4779],{"type":23,"value":1413},{"type":17,"tag":613,"props":4781,"children":4782},{"class":626},[4783],{"type":23,"value":629},{"type":17,"tag":613,"props":4785,"children":4786},{"class":670},[4787],{"type":23,"value":700},{"type":17,"tag":613,"props":4789,"children":4790},{"class":626},[4791],{"type":23,"value":2057},{"type":17,"tag":613,"props":4793,"children":4794},{"class":615,"line":907},[4795,4800,4804,4808,4812,4816,4820,4824,4829,4833,4838,4842,4847,4851,4855],{"type":17,"tag":613,"props":4796,"children":4797},{"class":626},[4798],{"type":23,"value":4799},"right ",{"type":17,"tag":613,"props":4801,"children":4802},{"class":620},[4803],{"type":23,"value":710},{"type":17,"tag":613,"props":4805,"children":4806},{"class":626},[4807],{"type":23,"value":629},{"type":17,"tag":613,"props":4809,"children":4810},{"class":620},[4811],{"type":23,"value":1045},{"type":17,"tag":613,"props":4813,"children":4814},{"class":670},[4815],{"type":23,"value":700},{"type":17,"tag":613,"props":4817,"children":4818},{"class":626},[4819],{"type":23,"value":2032},{"type":17,"tag":613,"props":4821,"children":4822},{"class":620},[4823],{"type":23,"value":1055},{"type":17,"tag":613,"props":4825,"children":4826},{"class":626},[4827],{"type":23,"value":4828}," F ",{"type":17,"tag":613,"props":4830,"children":4831},{"class":620},[4832],{"type":23,"value":1045},{"type":17,"tag":613,"props":4834,"children":4835},{"class":626},[4836],{"type":23,"value":4837}," (Fxt ",{"type":17,"tag":613,"props":4839,"children":4840},{"class":620},[4841],{"type":23,"value":1045},{"type":17,"tag":613,"props":4843,"children":4844},{"class":626},[4845],{"type":23,"value":4846}," F)",{"type":17,"tag":613,"props":4848,"children":4849},{"class":620},[4850],{"type":23,"value":1413},{"type":17,"tag":613,"props":4852,"children":4853},{"class":670},[4854],{"type":23,"value":700},{"type":17,"tag":613,"props":4856,"children":4857},{"class":626},[4858],{"type":23,"value":4859},".ht",{"type":17,"tag":26,"props":4861,"children":4862},{},[4863,4865,4869],{"type":23,"value":4864},"Here is the crucial part, we need to implement GMRES solver for our ",{"type":17,"tag":4359,"props":4866,"children":4867},{},[4868],{"type":23,"value":4363},{"type":23,"value":4870}," function to obtain solution vector.",{"type":17,"tag":598,"props":4872,"children":4875},{"className":4873,"code":4874,"language":603,"meta":7},[601],"# Define right-left handside equation\nleft = (Fuxt - Fxt) / self.ht\nright = -self.zeta * F - (Fxt - F)/self.ht\n\n# Define iterations\nm = (self.u_dim ) * self.pred_horizons\n# Define r0\nr0 = right - left\n# print(r0)\n\n# GMRES\nVm = np.zeros((m, m+1))\nVm[:, 0:1] = r0 / np.linalg.norm(r0)\n# print(\"Vm\", Vm[:, 0])\nHm = np.zeros((m+1, m))\n# print(Vm[:, 0])\n\n\nfor i in range(m):\n    Fuxt = self.calc_f(\n        X, U + Vm[:, i:i+1].reshape(self.u_dim, self.pred_horizons, order='F') * self.ht,\n        Lambda, Mu,\n        dt\n    )\n\n    Av = (Fuxt - Fxt) / self.ht\n\n    for k in range(i+1):\n        Hm[k, i] = np.dot(Av.T, Vm[:, k:k+1])\n\n    temp_vec = np.zeros((m, 1))\n\n    for k in range(i+1):\n        temp_vec = temp_vec + np.dot(Hm[k, i], Vm[:, k:k+1])\n\n    v_hat = Av - temp_vec\n\n    Hm[i+1, i] = np.linalg.norm(v_hat)\n\n    Vm[:,i+1:i+2] = v_hat/Hm[i+1, i]\n\ne = np.zeros((m+1, 1))\ne[0, 0] = 1.0\ngm = np.linalg.norm(r0) * e\n# print(gm)\n\nUTMat, gm = self.ToUTMat(Hm, gm, m)\n\nmin_y = np.zeros((m, 1))\n\nfor i in range(m):\n    min_y[i][0] = (gm[i, 0] - np.dot(UTMat[i:i+1 ,:] ,min_y))/UTMat[i, i]\n\ndU_new = self.dU + np.dot(Vm[:, 0:m], min_y).reshape(self.u_dim, self.pred_horizons, order='F')\n\nself.dU = dU_new\n\nU = U + self.dU * self.ht\n",[4876],{"type":17,"tag":606,"props":4877,"children":4878},{},[4879],{"type":17,"tag":598,"props":4880,"children":4881},{"__ignoreMap":7},[4882,4889,4928,4991,4998,5006,5047,5055,5081,5089,5096,5104,5134,5176,5184,5214,5222,5229,5236,5264,5289,5374,5382,5390,5398,5405,5445,5452,5498,5527,5534,5559,5566,5609,5647,5654,5680,5687,5716,5724,5789,5797,5834,5871,5898,5907,5915,5941,5949,5974,5982,6010,6075,6083,6158,6166,6187,6195],{"type":17,"tag":613,"props":4883,"children":4884},{"class":615,"line":616},[4885],{"type":17,"tag":613,"props":4886,"children":4887},{"class":1850},[4888],{"type":23,"value":4749},{"type":17,"tag":613,"props":4890,"children":4891},{"class":615,"line":643},[4892,4896,4900,4904,4908,4912,4916,4920,4924],{"type":17,"tag":613,"props":4893,"children":4894},{"class":626},[4895],{"type":23,"value":4757},{"type":17,"tag":613,"props":4897,"children":4898},{"class":620},[4899],{"type":23,"value":710},{"type":17,"tag":613,"props":4901,"children":4902},{"class":626},[4903],{"type":23,"value":4766},{"type":17,"tag":613,"props":4905,"children":4906},{"class":620},[4907],{"type":23,"value":1045},{"type":17,"tag":613,"props":4909,"children":4910},{"class":626},[4911],{"type":23,"value":4775},{"type":17,"tag":613,"props":4913,"children":4914},{"class":620},[4915],{"type":23,"value":1413},{"type":17,"tag":613,"props":4917,"children":4918},{"class":626},[4919],{"type":23,"value":629},{"type":17,"tag":613,"props":4921,"children":4922},{"class":670},[4923],{"type":23,"value":700},{"type":17,"tag":613,"props":4925,"children":4926},{"class":626},[4927],{"type":23,"value":2057},{"type":17,"tag":613,"props":4929,"children":4930},{"class":615,"line":652},[4931,4935,4939,4943,4947,4951,4955,4959,4963,4967,4971,4975,4979,4983,4987],{"type":17,"tag":613,"props":4932,"children":4933},{"class":626},[4934],{"type":23,"value":4799},{"type":17,"tag":613,"props":4936,"children":4937},{"class":620},[4938],{"type":23,"value":710},{"type":17,"tag":613,"props":4940,"children":4941},{"class":626},[4942],{"type":23,"value":629},{"type":17,"tag":613,"props":4944,"children":4945},{"class":620},[4946],{"type":23,"value":1045},{"type":17,"tag":613,"props":4948,"children":4949},{"class":670},[4950],{"type":23,"value":700},{"type":17,"tag":613,"props":4952,"children":4953},{"class":626},[4954],{"type":23,"value":2032},{"type":17,"tag":613,"props":4956,"children":4957},{"class":620},[4958],{"type":23,"value":1055},{"type":17,"tag":613,"props":4960,"children":4961},{"class":626},[4962],{"type":23,"value":4828},{"type":17,"tag":613,"props":4964,"children":4965},{"class":620},[4966],{"type":23,"value":1045},{"type":17,"tag":613,"props":4968,"children":4969},{"class":626},[4970],{"type":23,"value":4837},{"type":17,"tag":613,"props":4972,"children":4973},{"class":620},[4974],{"type":23,"value":1045},{"type":17,"tag":613,"props":4976,"children":4977},{"class":626},[4978],{"type":23,"value":4846},{"type":17,"tag":613,"props":4980,"children":4981},{"class":620},[4982],{"type":23,"value":1413},{"type":17,"tag":613,"props":4984,"children":4985},{"class":670},[4986],{"type":23,"value":700},{"type":17,"tag":613,"props":4988,"children":4989},{"class":626},[4990],{"type":23,"value":2057},{"type":17,"tag":613,"props":4992,"children":4993},{"class":615,"line":681},[4994],{"type":17,"tag":613,"props":4995,"children":4996},{},[4997],{"type":23,"value":649},{"type":17,"tag":613,"props":4999,"children":5000},{"class":615,"line":689},[5001],{"type":17,"tag":613,"props":5002,"children":5003},{"class":1850},[5004],{"type":23,"value":5005},"# Define iterations\n",{"type":17,"tag":613,"props":5007,"children":5008},{"class":615,"line":718},[5009,5014,5018,5022,5026,5031,5035,5039,5043],{"type":17,"tag":613,"props":5010,"children":5011},{"class":626},[5012],{"type":23,"value":5013},"m ",{"type":17,"tag":613,"props":5015,"children":5016},{"class":620},[5017],{"type":23,"value":710},{"type":17,"tag":613,"props":5019,"children":5020},{"class":626},[5021],{"type":23,"value":4423},{"type":17,"tag":613,"props":5023,"children":5024},{"class":670},[5025],{"type":23,"value":700},{"type":17,"tag":613,"props":5027,"children":5028},{"class":626},[5029],{"type":23,"value":5030},".u_dim ) ",{"type":17,"tag":613,"props":5032,"children":5033},{"class":620},[5034],{"type":23,"value":1055},{"type":17,"tag":613,"props":5036,"children":5037},{"class":626},[5038],{"type":23,"value":629},{"type":17,"tag":613,"props":5040,"children":5041},{"class":670},[5042],{"type":23,"value":700},{"type":17,"tag":613,"props":5044,"children":5045},{"class":626},[5046],{"type":23,"value":4475},{"type":17,"tag":613,"props":5048,"children":5049},{"class":615,"line":744},[5050],{"type":17,"tag":613,"props":5051,"children":5052},{"class":1850},[5053],{"type":23,"value":5054},"# Define r0\n",{"type":17,"tag":613,"props":5056,"children":5057},{"class":615,"line":770},[5058,5063,5067,5072,5076],{"type":17,"tag":613,"props":5059,"children":5060},{"class":626},[5061],{"type":23,"value":5062},"r0 ",{"type":17,"tag":613,"props":5064,"children":5065},{"class":620},[5066],{"type":23,"value":710},{"type":17,"tag":613,"props":5068,"children":5069},{"class":626},[5070],{"type":23,"value":5071}," right ",{"type":17,"tag":613,"props":5073,"children":5074},{"class":620},[5075],{"type":23,"value":1045},{"type":17,"tag":613,"props":5077,"children":5078},{"class":626},[5079],{"type":23,"value":5080}," left\n",{"type":17,"tag":613,"props":5082,"children":5083},{"class":615,"line":778},[5084],{"type":17,"tag":613,"props":5085,"children":5086},{"class":1850},[5087],{"type":23,"value":5088},"# print(r0)\n",{"type":17,"tag":613,"props":5090,"children":5091},{"class":615,"line":804},[5092],{"type":17,"tag":613,"props":5093,"children":5094},{},[5095],{"type":23,"value":649},{"type":17,"tag":613,"props":5097,"children":5098},{"class":615,"line":830},[5099],{"type":17,"tag":613,"props":5100,"children":5101},{"class":1850},[5102],{"type":23,"value":5103},"# GMRES\n",{"type":17,"tag":613,"props":5105,"children":5106},{"class":615,"line":838},[5107,5112,5116,5121,5125,5129],{"type":17,"tag":613,"props":5108,"children":5109},{"class":626},[5110],{"type":23,"value":5111},"Vm ",{"type":17,"tag":613,"props":5113,"children":5114},{"class":620},[5115],{"type":23,"value":710},{"type":17,"tag":613,"props":5117,"children":5118},{"class":626},[5119],{"type":23,"value":5120}," np.zeros((m, m",{"type":17,"tag":613,"props":5122,"children":5123},{"class":620},[5124],{"type":23,"value":1176},{"type":17,"tag":613,"props":5126,"children":5127},{"class":670},[5128],{"type":23,"value":976},{"type":17,"tag":613,"props":5130,"children":5131},{"class":626},[5132],{"type":23,"value":5133},"))\n",{"type":17,"tag":613,"props":5135,"children":5136},{"class":615,"line":874},[5137,5142,5146,5150,5154,5158,5162,5167,5171],{"type":17,"tag":613,"props":5138,"children":5139},{"class":626},[5140],{"type":23,"value":5141},"Vm[:, ",{"type":17,"tag":613,"props":5143,"children":5144},{"class":670},[5145],{"type":23,"value":866},{"type":17,"tag":613,"props":5147,"children":5148},{"class":626},[5149],{"type":23,"value":295},{"type":17,"tag":613,"props":5151,"children":5152},{"class":670},[5153],{"type":23,"value":976},{"type":17,"tag":613,"props":5155,"children":5156},{"class":626},[5157],{"type":23,"value":2910},{"type":17,"tag":613,"props":5159,"children":5160},{"class":620},[5161],{"type":23,"value":710},{"type":17,"tag":613,"props":5163,"children":5164},{"class":626},[5165],{"type":23,"value":5166}," r0 ",{"type":17,"tag":613,"props":5168,"children":5169},{"class":620},[5170],{"type":23,"value":1413},{"type":17,"tag":613,"props":5172,"children":5173},{"class":626},[5174],{"type":23,"value":5175}," np.linalg.norm(r0)\n",{"type":17,"tag":613,"props":5177,"children":5178},{"class":615,"line":907},[5179],{"type":17,"tag":613,"props":5180,"children":5181},{"class":1850},[5182],{"type":23,"value":5183},"# print(\"Vm\", Vm[:, 0])\n",{"type":17,"tag":613,"props":5185,"children":5186},{"class":615,"line":915},[5187,5192,5196,5201,5205,5209],{"type":17,"tag":613,"props":5188,"children":5189},{"class":626},[5190],{"type":23,"value":5191},"Hm ",{"type":17,"tag":613,"props":5193,"children":5194},{"class":620},[5195],{"type":23,"value":710},{"type":17,"tag":613,"props":5197,"children":5198},{"class":626},[5199],{"type":23,"value":5200}," np.zeros((m",{"type":17,"tag":613,"props":5202,"children":5203},{"class":620},[5204],{"type":23,"value":1176},{"type":17,"tag":613,"props":5206,"children":5207},{"class":670},[5208],{"type":23,"value":976},{"type":17,"tag":613,"props":5210,"children":5211},{"class":626},[5212],{"type":23,"value":5213},", m))\n",{"type":17,"tag":613,"props":5215,"children":5216},{"class":615,"line":949},[5217],{"type":17,"tag":613,"props":5218,"children":5219},{"class":1850},[5220],{"type":23,"value":5221},"# print(Vm[:, 0])\n",{"type":17,"tag":613,"props":5223,"children":5224},{"class":615,"line":983},[5225],{"type":17,"tag":613,"props":5226,"children":5227},{},[5228],{"type":23,"value":649},{"type":17,"tag":613,"props":5230,"children":5231},{"class":615,"line":991},[5232],{"type":17,"tag":613,"props":5233,"children":5234},{},[5235],{"type":23,"value":649},{"type":17,"tag":613,"props":5237,"children":5238},{"class":615,"line":1017},[5239,5243,5247,5251,5255,5259],{"type":17,"tag":613,"props":5240,"children":5241},{"class":620},[5242],{"type":23,"value":2789},{"type":17,"tag":613,"props":5244,"children":5245},{"class":626},[5246],{"type":23,"value":2794},{"type":17,"tag":613,"props":5248,"children":5249},{"class":620},[5250],{"type":23,"value":2799},{"type":17,"tag":613,"props":5252,"children":5253},{"class":626},[5254],{"type":23,"value":629},{"type":17,"tag":613,"props":5256,"children":5257},{"class":670},[5258],{"type":23,"value":2808},{"type":17,"tag":613,"props":5260,"children":5261},{"class":626},[5262],{"type":23,"value":5263},"(m):\n",{"type":17,"tag":613,"props":5265,"children":5266},{"class":615,"line":1025},[5267,5272,5276,5280,5284],{"type":17,"tag":613,"props":5268,"children":5269},{"class":626},[5270],{"type":23,"value":5271},"    Fuxt ",{"type":17,"tag":613,"props":5273,"children":5274},{"class":620},[5275],{"type":23,"value":710},{"type":17,"tag":613,"props":5277,"children":5278},{"class":626},[5279],{"type":23,"value":629},{"type":17,"tag":613,"props":5281,"children":5282},{"class":670},[5283],{"type":23,"value":700},{"type":17,"tag":613,"props":5285,"children":5286},{"class":626},[5287],{"type":23,"value":5288},".calc_f(\n",{"type":17,"tag":613,"props":5290,"children":5291},{"class":615,"line":1067},[5292,5297,5301,5306,5310,5314,5319,5323,5327,5331,5336,5342,5346,5352,5357,5361,5365,5369],{"type":17,"tag":613,"props":5293,"children":5294},{"class":626},[5295],{"type":23,"value":5296},"        X, U ",{"type":17,"tag":613,"props":5298,"children":5299},{"class":620},[5300],{"type":23,"value":1176},{"type":17,"tag":613,"props":5302,"children":5303},{"class":626},[5304],{"type":23,"value":5305}," Vm[:, i:i",{"type":17,"tag":613,"props":5307,"children":5308},{"class":620},[5309],{"type":23,"value":1176},{"type":17,"tag":613,"props":5311,"children":5312},{"class":670},[5313],{"type":23,"value":976},{"type":17,"tag":613,"props":5315,"children":5316},{"class":626},[5317],{"type":23,"value":5318},"].reshape(",{"type":17,"tag":613,"props":5320,"children":5321},{"class":670},[5322],{"type":23,"value":700},{"type":17,"tag":613,"props":5324,"children":5325},{"class":626},[5326],{"type":23,"value":2477},{"type":17,"tag":613,"props":5328,"children":5329},{"class":670},[5330],{"type":23,"value":700},{"type":17,"tag":613,"props":5332,"children":5333},{"class":626},[5334],{"type":23,"value":5335},".pred_horizons, ",{"type":17,"tag":613,"props":5337,"children":5339},{"class":5338},"ct-657843",[5340],{"type":23,"value":5341},"order",{"type":17,"tag":613,"props":5343,"children":5344},{"class":620},[5345],{"type":23,"value":710},{"type":17,"tag":613,"props":5347,"children":5349},{"class":5348},"ct-244866",[5350],{"type":23,"value":5351},"'F'",{"type":17,"tag":613,"props":5353,"children":5354},{"class":626},[5355],{"type":23,"value":5356},") ",{"type":17,"tag":613,"props":5358,"children":5359},{"class":620},[5360],{"type":23,"value":1055},{"type":17,"tag":613,"props":5362,"children":5363},{"class":626},[5364],{"type":23,"value":629},{"type":17,"tag":613,"props":5366,"children":5367},{"class":670},[5368],{"type":23,"value":700},{"type":17,"tag":613,"props":5370,"children":5371},{"class":626},[5372],{"type":23,"value":5373},".ht,\n",{"type":17,"tag":613,"props":5375,"children":5376},{"class":615,"line":1107},[5377],{"type":17,"tag":613,"props":5378,"children":5379},{"class":626},[5380],{"type":23,"value":5381},"        Lambda, Mu,\n",{"type":17,"tag":613,"props":5383,"children":5384},{"class":615,"line":1201},[5385],{"type":17,"tag":613,"props":5386,"children":5387},{"class":626},[5388],{"type":23,"value":5389},"        dt\n",{"type":17,"tag":613,"props":5391,"children":5392},{"class":615,"line":1209},[5393],{"type":17,"tag":613,"props":5394,"children":5395},{"class":626},[5396],{"type":23,"value":5397},"    )\n",{"type":17,"tag":613,"props":5399,"children":5400},{"class":615,"line":1227},[5401],{"type":17,"tag":613,"props":5402,"children":5403},{},[5404],{"type":23,"value":649},{"type":17,"tag":613,"props":5406,"children":5407},{"class":615,"line":1235},[5408,5413,5417,5421,5425,5429,5433,5437,5441],{"type":17,"tag":613,"props":5409,"children":5410},{"class":626},[5411],{"type":23,"value":5412},"    Av ",{"type":17,"tag":613,"props":5414,"children":5415},{"class":620},[5416],{"type":23,"value":710},{"type":17,"tag":613,"props":5418,"children":5419},{"class":626},[5420],{"type":23,"value":4766},{"type":17,"tag":613,"props":5422,"children":5423},{"class":620},[5424],{"type":23,"value":1045},{"type":17,"tag":613,"props":5426,"children":5427},{"class":626},[5428],{"type":23,"value":4775},{"type":17,"tag":613,"props":5430,"children":5431},{"class":620},[5432],{"type":23,"value":1413},{"type":17,"tag":613,"props":5434,"children":5435},{"class":626},[5436],{"type":23,"value":629},{"type":17,"tag":613,"props":5438,"children":5439},{"class":670},[5440],{"type":23,"value":700},{"type":17,"tag":613,"props":5442,"children":5443},{"class":626},[5444],{"type":23,"value":2057},{"type":17,"tag":613,"props":5446,"children":5447},{"class":615,"line":1261},[5448],{"type":17,"tag":613,"props":5449,"children":5450},{},[5451],{"type":23,"value":649},{"type":17,"tag":613,"props":5453,"children":5454},{"class":615,"line":1269},[5455,5459,5463,5468,5472,5476,5480,5485,5489,5493],{"type":17,"tag":613,"props":5456,"children":5457},{"class":626},[5458],{"type":23,"value":658},{"type":17,"tag":613,"props":5460,"children":5461},{"class":620},[5462],{"type":23,"value":2789},{"type":17,"tag":613,"props":5464,"children":5465},{"class":626},[5466],{"type":23,"value":5467}," k ",{"type":17,"tag":613,"props":5469,"children":5470},{"class":620},[5471],{"type":23,"value":2799},{"type":17,"tag":613,"props":5473,"children":5474},{"class":626},[5475],{"type":23,"value":629},{"type":17,"tag":613,"props":5477,"children":5478},{"class":670},[5479],{"type":23,"value":2808},{"type":17,"tag":613,"props":5481,"children":5482},{"class":626},[5483],{"type":23,"value":5484},"(i",{"type":17,"tag":613,"props":5486,"children":5487},{"class":620},[5488],{"type":23,"value":1176},{"type":17,"tag":613,"props":5490,"children":5491},{"class":670},[5492],{"type":23,"value":976},{"type":17,"tag":613,"props":5494,"children":5495},{"class":626},[5496],{"type":23,"value":5497},"):\n",{"type":17,"tag":613,"props":5499,"children":5500},{"class":615,"line":1425},[5501,5506,5510,5515,5519,5523],{"type":17,"tag":613,"props":5502,"children":5503},{"class":626},[5504],{"type":23,"value":5505},"        Hm[k, i] ",{"type":17,"tag":613,"props":5507,"children":5508},{"class":620},[5509],{"type":23,"value":710},{"type":17,"tag":613,"props":5511,"children":5512},{"class":626},[5513],{"type":23,"value":5514}," np.dot(Av.T, Vm[:, k:k",{"type":17,"tag":613,"props":5516,"children":5517},{"class":620},[5518],{"type":23,"value":1176},{"type":17,"tag":613,"props":5520,"children":5521},{"class":670},[5522],{"type":23,"value":976},{"type":17,"tag":613,"props":5524,"children":5525},{"class":626},[5526],{"type":23,"value":3279},{"type":17,"tag":613,"props":5528,"children":5529},{"class":615,"line":1545},[5530],{"type":17,"tag":613,"props":5531,"children":5532},{},[5533],{"type":23,"value":649},{"type":17,"tag":613,"props":5535,"children":5536},{"class":615,"line":1553},[5537,5542,5546,5551,5555],{"type":17,"tag":613,"props":5538,"children":5539},{"class":626},[5540],{"type":23,"value":5541},"    temp_vec ",{"type":17,"tag":613,"props":5543,"children":5544},{"class":620},[5545],{"type":23,"value":710},{"type":17,"tag":613,"props":5547,"children":5548},{"class":626},[5549],{"type":23,"value":5550}," np.zeros((m, ",{"type":17,"tag":613,"props":5552,"children":5553},{"class":670},[5554],{"type":23,"value":976},{"type":17,"tag":613,"props":5556,"children":5557},{"class":626},[5558],{"type":23,"value":5133},{"type":17,"tag":613,"props":5560,"children":5561},{"class":615,"line":1570},[5562],{"type":17,"tag":613,"props":5563,"children":5564},{},[5565],{"type":23,"value":649},{"type":17,"tag":613,"props":5567,"children":5568},{"class":615,"line":1578},[5569,5573,5577,5581,5585,5589,5593,5597,5601,5605],{"type":17,"tag":613,"props":5570,"children":5571},{"class":626},[5572],{"type":23,"value":658},{"type":17,"tag":613,"props":5574,"children":5575},{"class":620},[5576],{"type":23,"value":2789},{"type":17,"tag":613,"props":5578,"children":5579},{"class":626},[5580],{"type":23,"value":5467},{"type":17,"tag":613,"props":5582,"children":5583},{"class":620},[5584],{"type":23,"value":2799},{"type":17,"tag":613,"props":5586,"children":5587},{"class":626},[5588],{"type":23,"value":629},{"type":17,"tag":613,"props":5590,"children":5591},{"class":670},[5592],{"type":23,"value":2808},{"type":17,"tag":613,"props":5594,"children":5595},{"class":626},[5596],{"type":23,"value":5484},{"type":17,"tag":613,"props":5598,"children":5599},{"class":620},[5600],{"type":23,"value":1176},{"type":17,"tag":613,"props":5602,"children":5603},{"class":670},[5604],{"type":23,"value":976},{"type":17,"tag":613,"props":5606,"children":5607},{"class":626},[5608],{"type":23,"value":5497},{"type":17,"tag":613,"props":5610,"children":5611},{"class":615,"line":1604},[5612,5617,5621,5626,5630,5635,5639,5643],{"type":17,"tag":613,"props":5613,"children":5614},{"class":626},[5615],{"type":23,"value":5616},"        temp_vec ",{"type":17,"tag":613,"props":5618,"children":5619},{"class":620},[5620],{"type":23,"value":710},{"type":17,"tag":613,"props":5622,"children":5623},{"class":626},[5624],{"type":23,"value":5625}," temp_vec ",{"type":17,"tag":613,"props":5627,"children":5628},{"class":620},[5629],{"type":23,"value":1176},{"type":17,"tag":613,"props":5631,"children":5632},{"class":626},[5633],{"type":23,"value":5634}," np.dot(Hm[k, i], Vm[:, k:k",{"type":17,"tag":613,"props":5636,"children":5637},{"class":620},[5638],{"type":23,"value":1176},{"type":17,"tag":613,"props":5640,"children":5641},{"class":670},[5642],{"type":23,"value":976},{"type":17,"tag":613,"props":5644,"children":5645},{"class":626},[5646],{"type":23,"value":3279},{"type":17,"tag":613,"props":5648,"children":5649},{"class":615,"line":1648},[5650],{"type":17,"tag":613,"props":5651,"children":5652},{},[5653],{"type":23,"value":649},{"type":17,"tag":613,"props":5655,"children":5656},{"class":615,"line":1692},[5657,5662,5666,5671,5675],{"type":17,"tag":613,"props":5658,"children":5659},{"class":626},[5660],{"type":23,"value":5661},"    v_hat ",{"type":17,"tag":613,"props":5663,"children":5664},{"class":620},[5665],{"type":23,"value":710},{"type":17,"tag":613,"props":5667,"children":5668},{"class":626},[5669],{"type":23,"value":5670}," Av ",{"type":17,"tag":613,"props":5672,"children":5673},{"class":620},[5674],{"type":23,"value":1045},{"type":17,"tag":613,"props":5676,"children":5677},{"class":626},[5678],{"type":23,"value":5679}," temp_vec\n",{"type":17,"tag":613,"props":5681,"children":5682},{"class":615,"line":1735},[5683],{"type":17,"tag":613,"props":5684,"children":5685},{},[5686],{"type":23,"value":649},{"type":17,"tag":613,"props":5688,"children":5689},{"class":615,"line":1743},[5690,5695,5699,5703,5707,5711],{"type":17,"tag":613,"props":5691,"children":5692},{"class":626},[5693],{"type":23,"value":5694},"    Hm[i",{"type":17,"tag":613,"props":5696,"children":5697},{"class":620},[5698],{"type":23,"value":1176},{"type":17,"tag":613,"props":5700,"children":5701},{"class":670},[5702],{"type":23,"value":976},{"type":17,"tag":613,"props":5704,"children":5705},{"class":626},[5706],{"type":23,"value":2928},{"type":17,"tag":613,"props":5708,"children":5709},{"class":620},[5710],{"type":23,"value":710},{"type":17,"tag":613,"props":5712,"children":5713},{"class":626},[5714],{"type":23,"value":5715}," np.linalg.norm(v_hat)\n",{"type":17,"tag":613,"props":5717,"children":5719},{"class":615,"line":5718},39,[5720],{"type":17,"tag":613,"props":5721,"children":5722},{},[5723],{"type":23,"value":649},{"type":17,"tag":613,"props":5725,"children":5727},{"class":615,"line":5726},40,[5728,5733,5737,5741,5746,5750,5754,5758,5762,5767,5771,5776,5780,5784],{"type":17,"tag":613,"props":5729,"children":5730},{"class":626},[5731],{"type":23,"value":5732},"    Vm[:,i",{"type":17,"tag":613,"props":5734,"children":5735},{"class":620},[5736],{"type":23,"value":1176},{"type":17,"tag":613,"props":5738,"children":5739},{"class":670},[5740],{"type":23,"value":976},{"type":17,"tag":613,"props":5742,"children":5743},{"class":626},[5744],{"type":23,"value":5745},":i",{"type":17,"tag":613,"props":5747,"children":5748},{"class":620},[5749],{"type":23,"value":1176},{"type":17,"tag":613,"props":5751,"children":5752},{"class":670},[5753],{"type":23,"value":1352},{"type":17,"tag":613,"props":5755,"children":5756},{"class":626},[5757],{"type":23,"value":2910},{"type":17,"tag":613,"props":5759,"children":5760},{"class":620},[5761],{"type":23,"value":710},{"type":17,"tag":613,"props":5763,"children":5764},{"class":626},[5765],{"type":23,"value":5766}," v_hat",{"type":17,"tag":613,"props":5768,"children":5769},{"class":620},[5770],{"type":23,"value":1413},{"type":17,"tag":613,"props":5772,"children":5773},{"class":626},[5774],{"type":23,"value":5775},"Hm[i",{"type":17,"tag":613,"props":5777,"children":5778},{"class":620},[5779],{"type":23,"value":1176},{"type":17,"tag":613,"props":5781,"children":5782},{"class":670},[5783],{"type":23,"value":976},{"type":17,"tag":613,"props":5785,"children":5786},{"class":626},[5787],{"type":23,"value":5788},", i]\n",{"type":17,"tag":613,"props":5790,"children":5792},{"class":615,"line":5791},41,[5793],{"type":17,"tag":613,"props":5794,"children":5795},{},[5796],{"type":23,"value":649},{"type":17,"tag":613,"props":5798,"children":5800},{"class":615,"line":5799},42,[5801,5806,5810,5814,5818,5822,5826,5830],{"type":17,"tag":613,"props":5802,"children":5803},{"class":626},[5804],{"type":23,"value":5805},"e ",{"type":17,"tag":613,"props":5807,"children":5808},{"class":620},[5809],{"type":23,"value":710},{"type":17,"tag":613,"props":5811,"children":5812},{"class":626},[5813],{"type":23,"value":5200},{"type":17,"tag":613,"props":5815,"children":5816},{"class":620},[5817],{"type":23,"value":1176},{"type":17,"tag":613,"props":5819,"children":5820},{"class":670},[5821],{"type":23,"value":976},{"type":17,"tag":613,"props":5823,"children":5824},{"class":626},[5825],{"type":23,"value":2416},{"type":17,"tag":613,"props":5827,"children":5828},{"class":670},[5829],{"type":23,"value":976},{"type":17,"tag":613,"props":5831,"children":5832},{"class":626},[5833],{"type":23,"value":5133},{"type":17,"tag":613,"props":5835,"children":5837},{"class":615,"line":5836},43,[5838,5843,5847,5851,5855,5859,5863,5867],{"type":17,"tag":613,"props":5839,"children":5840},{"class":626},[5841],{"type":23,"value":5842},"e[",{"type":17,"tag":613,"props":5844,"children":5845},{"class":670},[5846],{"type":23,"value":866},{"type":17,"tag":613,"props":5848,"children":5849},{"class":626},[5850],{"type":23,"value":2416},{"type":17,"tag":613,"props":5852,"children":5853},{"class":670},[5854],{"type":23,"value":866},{"type":17,"tag":613,"props":5856,"children":5857},{"class":626},[5858],{"type":23,"value":2910},{"type":17,"tag":613,"props":5860,"children":5861},{"class":620},[5862],{"type":23,"value":710},{"type":17,"tag":613,"props":5864,"children":5865},{"class":626},[5866],{"type":23,"value":629},{"type":17,"tag":613,"props":5868,"children":5869},{"class":670},[5870],{"type":23,"value":2115},{"type":17,"tag":613,"props":5872,"children":5874},{"class":615,"line":5873},44,[5875,5880,5884,5889,5893],{"type":17,"tag":613,"props":5876,"children":5877},{"class":626},[5878],{"type":23,"value":5879},"gm ",{"type":17,"tag":613,"props":5881,"children":5882},{"class":620},[5883],{"type":23,"value":710},{"type":17,"tag":613,"props":5885,"children":5886},{"class":626},[5887],{"type":23,"value":5888}," np.linalg.norm(r0) ",{"type":17,"tag":613,"props":5890,"children":5891},{"class":620},[5892],{"type":23,"value":1055},{"type":17,"tag":613,"props":5894,"children":5895},{"class":626},[5896],{"type":23,"value":5897}," e\n",{"type":17,"tag":613,"props":5899,"children":5901},{"class":615,"line":5900},45,[5902],{"type":17,"tag":613,"props":5903,"children":5904},{"class":1850},[5905],{"type":23,"value":5906},"# print(gm)\n",{"type":17,"tag":613,"props":5908,"children":5910},{"class":615,"line":5909},46,[5911],{"type":17,"tag":613,"props":5912,"children":5913},{},[5914],{"type":23,"value":649},{"type":17,"tag":613,"props":5916,"children":5918},{"class":615,"line":5917},47,[5919,5924,5928,5932,5936],{"type":17,"tag":613,"props":5920,"children":5921},{"class":626},[5922],{"type":23,"value":5923},"UTMat, gm ",{"type":17,"tag":613,"props":5925,"children":5926},{"class":620},[5927],{"type":23,"value":710},{"type":17,"tag":613,"props":5929,"children":5930},{"class":626},[5931],{"type":23,"value":629},{"type":17,"tag":613,"props":5933,"children":5934},{"class":670},[5935],{"type":23,"value":700},{"type":17,"tag":613,"props":5937,"children":5938},{"class":626},[5939],{"type":23,"value":5940},".ToUTMat(Hm, gm, m)\n",{"type":17,"tag":613,"props":5942,"children":5944},{"class":615,"line":5943},48,[5945],{"type":17,"tag":613,"props":5946,"children":5947},{},[5948],{"type":23,"value":649},{"type":17,"tag":613,"props":5950,"children":5952},{"class":615,"line":5951},49,[5953,5958,5962,5966,5970],{"type":17,"tag":613,"props":5954,"children":5955},{"class":626},[5956],{"type":23,"value":5957},"min_y ",{"type":17,"tag":613,"props":5959,"children":5960},{"class":620},[5961],{"type":23,"value":710},{"type":17,"tag":613,"props":5963,"children":5964},{"class":626},[5965],{"type":23,"value":5550},{"type":17,"tag":613,"props":5967,"children":5968},{"class":670},[5969],{"type":23,"value":976},{"type":17,"tag":613,"props":5971,"children":5972},{"class":626},[5973],{"type":23,"value":5133},{"type":17,"tag":613,"props":5975,"children":5977},{"class":615,"line":5976},50,[5978],{"type":17,"tag":613,"props":5979,"children":5980},{},[5981],{"type":23,"value":649},{"type":17,"tag":613,"props":5983,"children":5985},{"class":615,"line":5984},51,[5986,5990,5994,5998,6002,6006],{"type":17,"tag":613,"props":5987,"children":5988},{"class":620},[5989],{"type":23,"value":2789},{"type":17,"tag":613,"props":5991,"children":5992},{"class":626},[5993],{"type":23,"value":2794},{"type":17,"tag":613,"props":5995,"children":5996},{"class":620},[5997],{"type":23,"value":2799},{"type":17,"tag":613,"props":5999,"children":6000},{"class":626},[6001],{"type":23,"value":629},{"type":17,"tag":613,"props":6003,"children":6004},{"class":670},[6005],{"type":23,"value":2808},{"type":17,"tag":613,"props":6007,"children":6008},{"class":626},[6009],{"type":23,"value":5263},{"type":17,"tag":613,"props":6011,"children":6013},{"class":615,"line":6012},52,[6014,6019,6023,6027,6031,6036,6040,6044,6048,6053,6057,6061,6066,6070],{"type":17,"tag":613,"props":6015,"children":6016},{"class":626},[6017],{"type":23,"value":6018},"    min_y[i][",{"type":17,"tag":613,"props":6020,"children":6021},{"class":670},[6022],{"type":23,"value":866},{"type":17,"tag":613,"props":6024,"children":6025},{"class":626},[6026],{"type":23,"value":2910},{"type":17,"tag":613,"props":6028,"children":6029},{"class":620},[6030],{"type":23,"value":710},{"type":17,"tag":613,"props":6032,"children":6033},{"class":626},[6034],{"type":23,"value":6035}," (gm[i, ",{"type":17,"tag":613,"props":6037,"children":6038},{"class":670},[6039],{"type":23,"value":866},{"type":17,"tag":613,"props":6041,"children":6042},{"class":626},[6043],{"type":23,"value":2910},{"type":17,"tag":613,"props":6045,"children":6046},{"class":620},[6047],{"type":23,"value":1045},{"type":17,"tag":613,"props":6049,"children":6050},{"class":626},[6051],{"type":23,"value":6052}," np.dot(UTMat[i:i",{"type":17,"tag":613,"props":6054,"children":6055},{"class":620},[6056],{"type":23,"value":1176},{"type":17,"tag":613,"props":6058,"children":6059},{"class":670},[6060],{"type":23,"value":976},{"type":17,"tag":613,"props":6062,"children":6063},{"class":626},[6064],{"type":23,"value":6065}," ,:] ,min_y))",{"type":17,"tag":613,"props":6067,"children":6068},{"class":620},[6069],{"type":23,"value":1413},{"type":17,"tag":613,"props":6071,"children":6072},{"class":626},[6073],{"type":23,"value":6074},"UTMat[i, i]\n",{"type":17,"tag":613,"props":6076,"children":6078},{"class":615,"line":6077},53,[6079],{"type":17,"tag":613,"props":6080,"children":6081},{},[6082],{"type":23,"value":649},{"type":17,"tag":613,"props":6084,"children":6086},{"class":615,"line":6085},54,[6087,6092,6096,6100,6104,6108,6112,6117,6121,6126,6130,6134,6138,6142,6146,6150,6154],{"type":17,"tag":613,"props":6088,"children":6089},{"class":626},[6090],{"type":23,"value":6091},"dU_new ",{"type":17,"tag":613,"props":6093,"children":6094},{"class":620},[6095],{"type":23,"value":710},{"type":17,"tag":613,"props":6097,"children":6098},{"class":626},[6099],{"type":23,"value":629},{"type":17,"tag":613,"props":6101,"children":6102},{"class":670},[6103],{"type":23,"value":700},{"type":17,"tag":613,"props":6105,"children":6106},{"class":626},[6107],{"type":23,"value":2459},{"type":17,"tag":613,"props":6109,"children":6110},{"class":620},[6111],{"type":23,"value":1176},{"type":17,"tag":613,"props":6113,"children":6114},{"class":626},[6115],{"type":23,"value":6116}," np.dot(Vm[:, ",{"type":17,"tag":613,"props":6118,"children":6119},{"class":670},[6120],{"type":23,"value":866},{"type":17,"tag":613,"props":6122,"children":6123},{"class":626},[6124],{"type":23,"value":6125},":m], min_y).reshape(",{"type":17,"tag":613,"props":6127,"children":6128},{"class":670},[6129],{"type":23,"value":700},{"type":17,"tag":613,"props":6131,"children":6132},{"class":626},[6133],{"type":23,"value":2477},{"type":17,"tag":613,"props":6135,"children":6136},{"class":670},[6137],{"type":23,"value":700},{"type":17,"tag":613,"props":6139,"children":6140},{"class":626},[6141],{"type":23,"value":5335},{"type":17,"tag":613,"props":6143,"children":6144},{"class":5338},[6145],{"type":23,"value":5341},{"type":17,"tag":613,"props":6147,"children":6148},{"class":620},[6149],{"type":23,"value":710},{"type":17,"tag":613,"props":6151,"children":6152},{"class":5348},[6153],{"type":23,"value":5351},{"type":17,"tag":613,"props":6155,"children":6156},{"class":626},[6157],{"type":23,"value":1422},{"type":17,"tag":613,"props":6159,"children":6161},{"class":615,"line":6160},55,[6162],{"type":17,"tag":613,"props":6163,"children":6164},{},[6165],{"type":23,"value":649},{"type":17,"tag":613,"props":6167,"children":6169},{"class":615,"line":6168},56,[6170,6174,6178,6182],{"type":17,"tag":613,"props":6171,"children":6172},{"class":670},[6173],{"type":23,"value":700},{"type":17,"tag":613,"props":6175,"children":6176},{"class":626},[6177],{"type":23,"value":2459},{"type":17,"tag":613,"props":6179,"children":6180},{"class":620},[6181],{"type":23,"value":710},{"type":17,"tag":613,"props":6183,"children":6184},{"class":626},[6185],{"type":23,"value":6186}," dU_new\n",{"type":17,"tag":613,"props":6188,"children":6190},{"class":615,"line":6189},57,[6191],{"type":17,"tag":613,"props":6192,"children":6193},{},[6194],{"type":23,"value":649},{"type":17,"tag":613,"props":6196,"children":6198},{"class":615,"line":6197},58,[6199,6203,6207,6212,6216,6220,6224,6228,6232,6236,6240],{"type":17,"tag":613,"props":6200,"children":6201},{"class":626},[6202],{"type":23,"value":2655},{"type":17,"tag":613,"props":6204,"children":6205},{"class":620},[6206],{"type":23,"value":710},{"type":17,"tag":613,"props":6208,"children":6209},{"class":626},[6210],{"type":23,"value":6211}," U ",{"type":17,"tag":613,"props":6213,"children":6214},{"class":620},[6215],{"type":23,"value":1176},{"type":17,"tag":613,"props":6217,"children":6218},{"class":626},[6219],{"type":23,"value":629},{"type":17,"tag":613,"props":6221,"children":6222},{"class":670},[6223],{"type":23,"value":700},{"type":17,"tag":613,"props":6225,"children":6226},{"class":626},[6227],{"type":23,"value":2459},{"type":17,"tag":613,"props":6229,"children":6230},{"class":620},[6231],{"type":23,"value":1055},{"type":17,"tag":613,"props":6233,"children":6234},{"class":626},[6235],{"type":23,"value":629},{"type":17,"tag":613,"props":6237,"children":6238},{"class":670},[6239],{"type":23,"value":700},{"type":17,"tag":613,"props":6241,"children":6242},{"class":626},[6243],{"type":23,"value":4859},{"type":17,"tag":26,"props":6245,"children":6246},{},[6247,6249,6254],{"type":23,"value":6248},"You can look in my code inside function ",{"type":17,"tag":169,"props":6250,"children":6251},{},[6252],{"type":23,"value":6253}," solve_nmpc ",{"type":23,"value":196},{"type":17,"tag":18,"props":6256,"children":6258},{"id":6257},"experiment-in-python",[6259],{"type":23,"value":6260},"Experiment in Python",{"type":17,"tag":26,"props":6262,"children":6263},{},[6264,6266,6269,6271,6274,6276,6280,6282,6286,6288,6292],{"type":23,"value":6265},"GMRES was consider one of the fastest solver for sparse linear algebra problem, so I will include the link for the GMRES algorithms. ",{"type":17,"tag":55,"props":6267,"children":6268},{},[],{"type":23,"value":6270},"\nIn my experiment, I use differential drive robot. ",{"type":17,"tag":55,"props":6272,"children":6273},{},[],{"type":23,"value":6275},"\nConsider as our state representation ",{"type":17,"tag":83,"props":6277,"children":6279},{"latex-express":6278,"styles":86}," x = \\begin{bmatrix} x \\\\ y \\\\ \\phi \\end{bmatrix} ",[],{"type":23,"value":6281}," and of course setting initialization ",{"type":17,"tag":83,"props":6283,"children":6285},{"latex-express":6284,"styles":86}," x_{0} = [0.0, 0.0, 0.0] ",[],{"type":23,"value":6287},", also ",{"type":17,"tag":83,"props":6289,"children":6291},{"latex-express":6290,"styles":86}," u_{0} = [0.0, 0.0] ",[],{"type":23,"value":196},{"type":17,"tag":6294,"props":6295,"children":6300},"figure",{"className":6296},[6297,6298,6299],"mb-4","inline-block","max-w-sm",[6301,6303],{"type":23,"value":6302},"\n  ",{"type":17,"tag":6304,"props":6305,"children":6311},"img",{"className":6306,"src":6308,"width":6309,"height":6310},[6307],"mx-auto","/topics/robotics/nmpc/nmpc_cgmres.gif",700,350,[],{"type":17,"tag":6313,"props":6314,"children":6319},"figcaption",{"className":6315},[67,6316,6317,6318],"text-sm","text-neutral-600","dark:text-neutral-400",[6320],{"type":23,"value":6321},"\n    Animation of Differential Drive robot on optimal trajectory !!!\n",{"type":17,"tag":26,"props":6323,"children":6324},{},[6325],{"type":23,"value":6326},"And here are the optimal data for all state and input control.",{"type":17,"tag":6294,"props":6328,"children":6330},{"className":6329},[6297,6298,6299],[6331,6332],{"type":23,"value":6302},{"type":17,"tag":6304,"props":6333,"children":6338},{"className":6334,"src":6335,"width":6336,"height":6337},[6307],"/topics/robotics/nmpc/cgmreDat1.png",600,300,[],{"type":17,"tag":6313,"props":6340,"children":6342},{"className":6341},[67,6316,6317,6318],[6343],{"type":23,"value":6344},"\n    All data obtained after simulation.\n",{"type":17,"tag":26,"props":6346,"children":6347},{},[6348,6350],{"type":23,"value":6349},"You can find all the code of NMPC even with CasAdi and CGMRES here in my github: ",{"type":17,"tag":6351,"props":6352,"children":6356},"a",{"href":6353,"rel":6354},"https://github.com/SokhengDin/Path-Tracking/tree/main",[6355],"nofollow",[6357],{"type":23,"value":6358},"Path-Tracking",{"type":17,"tag":18,"props":6360,"children":6362},{"id":6361},"in-conclusion",[6363],{"type":23,"value":6364},"In Conclusion",{"type":17,"tag":26,"props":6366,"children":6367},{},[6368],{"type":23,"value":6369},"Nonlinear Model Predictive Control with CGMRES is one of the great NMPC method that you should try, since it provides a very fast numerical calculation thank to the GMRES algorithms with Given Rotation method. Even though compare to another NMPC solver, NMPC with CGMRES sometime is hard for finding the optimal parameters in order to not cause unstable numerical calculation. Next time, I will bring the multiple shooting method which is consider in the promise of more robust numerical stability tha single shooting method.",{"type":17,"tag":18,"props":6371,"children":6373},{"id":6372},"references",[6374],{"type":23,"value":6375},"References",{"type":17,"tag":283,"props":6377,"children":6378},{},[6379,6389,6399,6409,6419],{"type":17,"tag":79,"props":6380,"children":6381},{},[6382],{"type":17,"tag":6351,"props":6383,"children":6386},{"href":6384,"rel":6385},"https://www.researchgate.net/publication/228007717_A_real-time_algorithm_for_nonlinear_receding_horizon_control_using_multiple_shooting_and_continuationKrylov_method",[6355],[6387],{"type":23,"value":6388},"A realtime algorithm for nonlinear receding horizon control using multiple shooting and continuation/Krylov method",{"type":17,"tag":79,"props":6390,"children":6391},{},[6392],{"type":17,"tag":6351,"props":6393,"children":6396},{"href":6394,"rel":6395},"https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathTracking/cgmres_nmpc",[6355],[6397],{"type":23,"value":6398},"Nonlinear Model Predictive Control with CGMRES of Steering Car ",{"type":17,"tag":79,"props":6400,"children":6401},{},[6402],{"type":17,"tag":6351,"props":6403,"children":6406},{"href":6404,"rel":6405},"https://qiita.com/PozihameBaystar/items/650cc839da5d9c974f5d",[6355],[6407],{"type":23,"value":6408},"C/GMRES3",{"type":17,"tag":79,"props":6410,"children":6411},{},[6412],{"type":17,"tag":6351,"props":6413,"children":6416},{"href":6414,"rel":6415},"https://qiita.com/opticont/items/b3518b470d9e327144be",[6355],[6417],{"type":23,"value":6418},"KrylovGMRES",{"type":17,"tag":79,"props":6420,"children":6421},{},[6422],{"type":17,"tag":6351,"props":6423,"children":6426},{"href":6424,"rel":6425},"https://www.sciencedirect.com/science/article/pii/S2405896318326727",[6355],[6427],{"type":23,"value":6428},"Nonlinear Model Predictive Control of Position and Attitude in a Hexacopter with Three Failed Rotors",{"type":17,"tag":6430,"children":6431},"style",[6432],{"type":23,"value":6433},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-806137{color:#B392F0;}\n.ct-533739{color:#79B8FF;}\n.ct-326375{color:#6A737D;}\n.ct-657843{color:#FFAB70;}\n.ct-244866{color:#9ECBFF;}",{"title":7,"searchDepth":643,"depth":643,"links":6435},[6436,6442,6443,6444,6445],{"id":20,"depth":643,"text":24,"children":6437},[6438,6439,6440,6441],{"id":34,"depth":652,"text":37},{"id":45,"depth":652,"text":48},{"id":228,"depth":652,"text":231},{"id":266,"depth":652,"text":269},{"id":573,"depth":643,"text":576},{"id":6257,"depth":643,"text":6260},{"id":6361,"depth":643,"text":6364},{"id":6372,"depth":643,"text":6375},"markdown","content:topics:robotics:nmpc-cgmres.md","content","topics/robotics/nmpc-cgmres.md","md",1697043610530]