[{"data":1,"prerenderedAt":6466},["Reactive",2],{"content-/topics/robotics/nmpc-cgmres":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"_empty":6,"title":8,"description":9,"author":10,"slug":11,"tag":11,"img":12,"body":13,"_type":6461,"_id":6462,"_source":6463,"_file":6464,"_extension":6465},"/topics/robotics/nmpc-cgmres","robotics",false,"","Nonlinear Model Predictive Control with C/GMRES","Optimal Control theory","Din Sokheng","nmpc-cgmres","/topics/robotics/nmpc/nmpc_cgmres.png",{"type":14,"children":15,"toc":6449},"root",[16,25,31,38,43,49,58,63,69,74,163,179,197,202,211,215,226,232,241,245,260,266,271,278,478,489,494,498,502,540,545,549,554,564,568,577,581,586,592,600,612,1773,1787,2612,2617,2749,2754,3105,3110,3883,3888,4368,4388,4875,4886,6259,6270,6276,6308,6327,6337,6342,6354,6360,6374,6380,6385,6391,6444],{"type":17,"tag":18,"props":19,"children":21},"element","h2",{"id":20},"the-optimal-control-theory-in-control-system",[22],{"type":23,"value":24},"text","The Optimal Control Theory in Control System",{"type":17,"tag":26,"props":27,"children":28},"p",{},[29],{"type":23,"value":30},"Optimal Control is a branch of control theory in control system, the theory works by solving the optimization problem of the dynamical system in order to find the optimal solution for the system",{"type":17,"tag":32,"props":33,"children":35},"h3",{"id":34},"what-is-model-predictive-control",[36],{"type":23,"value":37},"What is Model Predictive Control ?",{"type":17,"tag":26,"props":39,"children":40},{},[41],{"type":23,"value":42},"Model Predictive Control (MPC) is the optimal control method that use optimization algorithms to solve the cost function the occurs from the desired input and obtain back the optimal input control over the finite and infinite horizons. Recently, MPC is hyping up among the control system researcher, since it is fast, efficiency and robustness for any high complex system.",{"type":17,"tag":32,"props":44,"children":46},{"id":45},"hamilton-jacobian-bellman-equation-hjbe",[47],{"type":23,"value":48},"Hamilton Jacobian Bellman Equation (HJBE)",{"type":17,"tag":26,"props":50,"children":51},{},[52,54],{"type":23,"value":53},"Actually, the HJBE is a nonlinear partial differential equation that it consists necessary conditions for optimality of control by minimizing the loss function of the system. ",{"type":17,"tag":55,"props":56,"children":57},"br",{},[],{"type":17,"tag":26,"props":59,"children":60},{},[61],{"type":23,"value":62},"We have the Hamiltonian Jacobian Bellman Equation",{"type":17,"tag":64,"props":65,"children":68},"math-render-b",{"latex-express":66,"styles":67},"\n\\begin{equation*}\n    H(x,u,\\lambda,\\mu) = \\sum_{k=0}^{N-1}(x_{k}-x_{k,ref})^{T} Q(x_{k}-x_{k,ref}) + (u_{k}-u_{k,ref})^{T}R(u_{k}-u_{k,ref}) + \n                         \\phi(x) + \\lambda^{T}f(x,u) + \\mu^{T}C(x,u)\n\\end{equation*}","text-center",[],{"type":17,"tag":26,"props":70,"children":71},{},[72],{"type":23,"value":73},"Which",{"type":17,"tag":75,"props":76,"children":77},"ul",{},[78,90,105,118,127,136,145,154],{"type":17,"tag":79,"props":80,"children":81},"li",{},[82,88],{"type":17,"tag":83,"props":84,"children":87},"math-render",{"latex-express":85,"styles":86},"N","inline-flex",[],{"type":23,"value":89}," is the number of prediction future horizons or shooting node.",{"type":17,"tag":79,"props":91,"children":92},{},[93,97,99,103],{"type":17,"tag":83,"props":94,"children":96},{"latex-express":95,"styles":86},"x_{k}",[],{"type":23,"value":98}," is the state of the system at shooting node ",{"type":17,"tag":83,"props":100,"children":102},{"latex-express":101,"styles":86},"k",[],{"type":23,"value":104}," .",{"type":17,"tag":79,"props":106,"children":107},{},[108,112,114,117],{"type":17,"tag":83,"props":109,"children":111},{"latex-express":110,"styles":86},"u_{k}",[],{"type":23,"value":113}," is the input control of the system at shooting node ",{"type":17,"tag":83,"props":115,"children":116},{"latex-express":101,"styles":86},[],{"type":23,"value":104},{"type":17,"tag":79,"props":119,"children":120},{},[121,125],{"type":17,"tag":83,"props":122,"children":124},{"latex-express":123,"styles":86},"Q, R",[],{"type":23,"value":126}," are diagonal matrix which helps the optimization solving the nlp problem.",{"type":17,"tag":79,"props":128,"children":129},{},[130,134],{"type":17,"tag":83,"props":131,"children":133},{"latex-express":132,"styles":86},"f(x,u)",[],{"type":23,"value":135}," is the state representation of the system.",{"type":17,"tag":79,"props":137,"children":138},{},[139,143],{"type":17,"tag":83,"props":140,"children":142},{"latex-express":141,"styles":86},"C(x,u)",[],{"type":23,"value":144},"  is the constraint of the system.",{"type":17,"tag":79,"props":146,"children":147},{},[148,152],{"type":17,"tag":83,"props":149,"children":151},{"latex-express":150,"styles":86},"\\lambda",[],{"type":23,"value":153},"  is the costate vector for state representation.",{"type":17,"tag":79,"props":155,"children":156},{},[157,161],{"type":17,"tag":83,"props":158,"children":160},{"latex-express":159,"styles":86},"\\mu",[],{"type":23,"value":162},"  is the Lagrange multiplier vector for the equality constraint.",{"type":17,"tag":26,"props":164,"children":165},{},[166,168,174,176],{"type":23,"value":167},"Nonlinear Model Predictive Control has multiples solving method, but in this demonstration I will stick with the Continuation/GMRES method proposed by professor ",{"type":17,"tag":169,"props":170,"children":171},"strong",{},[172],{"type":23,"value":173}," Toshiyuki Ohtsuka ",{"type":23,"value":175},". ",{"type":17,"tag":55,"props":177,"children":178},{},[],{"type":17,"tag":26,"props":180,"children":181},{},[182,184,188,190,195],{"type":23,"value":183},"Supposed we want to obtain solution vector ",{"type":17,"tag":83,"props":185,"children":187},{"latex-express":186,"styles":86},"U(t) = [ u_{0}^{*}, \\mu_{0}^{*}, \\cdots, u_{N-1}^{*}, \\mu_{N-1}^{*} ]",[],{"type":23,"value":189},"   at sampling time $t$, we then define the discretization of ",{"type":17,"tag":169,"props":191,"children":192},{},[193],{"type":23,"value":194}," Euler Lagrangian Equation (ELE) ",{"type":23,"value":196},".",{"type":17,"tag":64,"props":198,"children":201},{"latex-express":199,"style":200},"\n\\begin{align}\n    x_{i+1}^{*}(t) &= x_{i}^{*}(t) + f(x_{i}^{*}(t), u_{i}^{*}(t))  \\\\\n    \\lambda_{i}^{*}(t) &= \\lambda_{i+1}^{*}(t) + \\frac{\\partial H}{\\partial x}\\left( x_{i}^{*}, u_{i}^{*}(t), \\lambda_{i+1}^{*}(t), \\mu_{i}^{*}(t) \\right) \\\\\n    \\lambda_{N}^{*}(t) &= \\frac{\\partial \\phi(x)}{\\partial x} \\\\\n    \\frac{\\partial H}{\\partial u} &\\left( x_{i}^{*}, u_{i}^{*}(t), \\lambda_{i+1}^{*}(t), \\mu_{i}^{*}(t) \\right) = 0 \\\\\n    C&(x_{i}^{*}(t),u_{i}^{*}(t)) = 0\n\\end{align}\n","text-ceneter",[],{"type":17,"tag":26,"props":203,"children":204},{},[205,207],{"type":23,"value":206},"To solve this nonlinear problem iteratively, we use Newton's method ",{"type":17,"tag":83,"props":208,"children":210},{"latex-express":209,"styles":86},"F(x,u)=0",[],{"type":17,"tag":64,"props":212,"children":214},{"latex-express":213,"styles":67},"\n\\begin{equation*}\n    F(x,u) = \\begin{bmatrix}\n        \\frac{\\partial H}{\\partial u} \\left( x_{0}^{*}, u_{0}^{*}(t), \\lambda_{1}^{*}(t), \\mu_{0}^{*}(t) \\right) \\\\\n        C(x_{0}^{*}(t),u_{0}^{*}(t))  \\\\\n        \\vdots \\\\\n        \\frac{\\partial H}{\\partial u} \\left( x_{N-1}^{*}, u_{N-1}^{*}(t), \\lambda_{N}^{*}(t), \\mu_{N-1}^{*}(t) \\right) \\\\\n        C(x_{N-1}^{*}(t),u_{N-1}^{*}(t)) \\\\\n    \\end{bmatrix} = 0\n\\end{equation*}",[],{"type":17,"tag":26,"props":216,"children":217},{},[218,220,224],{"type":23,"value":219},"Solving this problem directly will caused big computational complexity, hence we use Continuation to reduce the complexity of the ",{"type":17,"tag":83,"props":221,"children":223},{"latex-express":222,"styles":86},"F(x,u)",[],{"type":23,"value":225}," function and then solve it by using GMRES method.",{"type":17,"tag":32,"props":227,"children":229},{"id":228},"continuation",[230],{"type":23,"value":231},"Continuation",{"type":17,"tag":26,"props":233,"children":234},{},[235,237],{"type":23,"value":236},"Denote  ",{"type":17,"tag":83,"props":238,"children":240},{"latex-express":239,"styles":86},"\\zeta, \\alpha, h \\in{\\mathbb{R} }",[],{"type":17,"tag":64,"props":242,"children":244},{"latex-express":243,"styles":67},"\n\\begin{equation*}\n    \\frac{\\partial F}{\\partial u}(x,u) \\dot{u}(t) = -\\zeta F(x,u)(t)-\\frac{\\partial F}{\\partial x}(x,u)(t)\\dot{x}-\\frac{\\partial F}{\\partial t}(x,u)(t) \n\\end{equation*}",[],{"type":17,"tag":26,"props":246,"children":247},{},[248,250,254,256],{"type":23,"value":249},"Let ",{"type":17,"tag":64,"props":251,"children":253},{"latex-express":252,"styles":67},"right=\\frac{F(x(t)+h\\dot{x}(t),u(t)+h\\dot{u}(t),t+h)-F(x+h\\dot{x}(t),u(t),t+h)}{h}",[],{"type":23,"value":255}," and ",{"type":17,"tag":64,"props":257,"children":259},{"latex-express":258,"styles":67},"left =  -\\zeta F(x(t),u(t), t) - \\frac{F(x+h\\dot{x}(t), u(t),t+h)-F(x(t), u(t), t)}{h}",[],{"type":17,"tag":32,"props":261,"children":263},{"id":262},"generalized-minimal-residue-method-gmres",[264],{"type":23,"value":265},"Generalized Minimal Residue Method (GMRES)",{"type":17,"tag":26,"props":267,"children":268},{},[269],{"type":23,"value":270},"The Generalized Minimal Residual (GMRES) algorithm is an iterative method for solving linear systems of equations. It is often used for large sparse linear systems.",{"type":17,"tag":272,"props":273,"children":275},"h4",{"id":274},"algorithm-description",[276],{"type":23,"value":277},"Algorithm Description",{"type":17,"tag":279,"props":280,"children":281},"ol",{},[282,337,444,463],{"type":17,"tag":79,"props":283,"children":284},{},[285,290,292],{"type":17,"tag":169,"props":286,"children":287},{},[288],{"type":23,"value":289},"Initialize",{"type":23,"value":291},":",{"type":17,"tag":75,"props":293,"children":294},{},[295,305,315],{"type":17,"tag":79,"props":296,"children":297},{},[298,300,304],{"type":23,"value":299},"Choose an initial guess for the solution, denoted as ",{"type":17,"tag":83,"props":301,"children":303},{"latex-express":302,"styles":86},"x_{0}",[],{"type":23,"value":196},{"type":17,"tag":79,"props":306,"children":307},{},[308,310,314],{"type":23,"value":309},"Set the residual vector ",{"type":17,"tag":83,"props":311,"children":313},{"latex-express":312,"styles":86},"r_{0}=\\left\\| Ax_{0}-b \\right\\|",[],{"type":23,"value":196},{"type":17,"tag":79,"props":316,"children":317},{},[318,320,324,326,330,332,336],{"type":23,"value":319},"Set ",{"type":17,"tag":83,"props":321,"children":323},{"latex-express":322,"styles":86},"v_{1}=\\frac{r_{0} }{\\left\\| r_{0} \\right\\|}",[],{"type":23,"value":325},", where ",{"type":17,"tag":83,"props":327,"children":329},{"latex-express":328,"styles":86},"\\left\\| r_{0} \\right\\|",[],{"type":23,"value":331},"  is the norm of ",{"type":17,"tag":83,"props":333,"children":335},{"latex-express":334,"styles":86},"r_{0}",[],{"type":23,"value":196},{"type":17,"tag":79,"props":338,"children":339},{},[340,345,346],{"type":17,"tag":169,"props":341,"children":342},{},[343],{"type":23,"value":344},"Iterative Process",{"type":23,"value":291},{"type":17,"tag":75,"props":347,"children":348},{},[349,359,433],{"type":17,"tag":79,"props":350,"children":351},{},[352,354,358],{"type":23,"value":353},"Choose a vector ",{"type":17,"tag":83,"props":355,"children":357},{"latex-express":356,"styles":86},"v_{1}",[],{"type":23,"value":196},{"type":17,"tag":79,"props":360,"children":361},{},[362,364,368,370,374,375],{"type":23,"value":363},"For ",{"type":17,"tag":83,"props":365,"children":367},{"latex-express":366,"styles":86},"k=0",[],{"type":23,"value":369}," to ",{"type":17,"tag":83,"props":371,"children":373},{"latex-express":372,"styles":86},"maxiteration",[],{"type":23,"value":291},{"type":17,"tag":75,"props":376,"children":377},{},[378,414],{"type":17,"tag":79,"props":379,"children":380},{},[381,383],{"type":23,"value":382},"Arnoldi process:",{"type":17,"tag":75,"props":384,"children":385},{},[386,393,400,407],{"type":17,"tag":79,"props":387,"children":388},{},[389],{"type":17,"tag":83,"props":390,"children":392},{"latex-express":391,"styles":86},"h_{i,j} = \\left(Av_{j}, v_{i} \\right)",[],{"type":17,"tag":79,"props":394,"children":395},{},[396],{"type":17,"tag":83,"props":397,"children":399},{"latex-express":398,"styles":86},"\\hat{v}_{j+1} = Av_{j} - \\sum_{i=1}^{j}h_{i,j}v_{i}",[],{"type":17,"tag":79,"props":401,"children":402},{},[403],{"type":17,"tag":83,"props":404,"children":406},{"latex-express":405,"styles":86},"h_{j+1,j} = \\left \\| \\hat{v}_{j+1}  \\right\\|_{2}",[],{"type":17,"tag":79,"props":408,"children":409},{},[410],{"type":17,"tag":83,"props":411,"children":413},{"latex-express":412,"styles":86},"v_{j+1} = \\frac{\\hat{v}_{j+1} }{h_{j+1,j} }",[],{"type":17,"tag":79,"props":415,"children":416},{},[417,419],{"type":23,"value":418},"Check for convergence:",{"type":17,"tag":75,"props":420,"children":421},{},[422],{"type":17,"tag":79,"props":423,"children":424},{},[425,427,431],{"type":23,"value":426},"If ",{"type":17,"tag":83,"props":428,"children":430},{"latex-express":429,"styles":86},"||r_k|| \u003C tolerance",[],{"type":23,"value":432},", exit the loop.",{"type":17,"tag":79,"props":434,"children":435},{},[436,438,442],{"type":23,"value":437},"If no convergence is achieved after ",{"type":17,"tag":83,"props":439,"children":441},{"latex-express":440,"styles":86},"maxiterations",[],{"type":23,"value":443},", exit with an error message.",{"type":17,"tag":79,"props":445,"children":446},{},[447,456,458,462],{"type":17,"tag":169,"props":448,"children":449},{},[450,452],{"type":23,"value":451},"Find ",{"type":17,"tag":83,"props":453,"children":455},{"latex-express":454,"styles":86},"y",[],{"type":23,"value":457},": which minimize ",{"type":17,"tag":83,"props":459,"children":461},{"latex-express":460,"styles":86},"\\left\\| r_{0}e_{1}-\\hat{H}_{m}y \\right \\|_{2}",[],{"type":23,"value":196},{"type":17,"tag":79,"props":464,"children":465},{},[466,471,473,477],{"type":17,"tag":169,"props":467,"children":468},{},[469],{"type":23,"value":470},"Compute",{"type":23,"value":472},": ",{"type":17,"tag":83,"props":474,"children":476},{"latex-express":475,"styles":86},"x_{m} = x_{0}+V_{m}y_{m}",[],{"type":23,"value":196},{"type":17,"tag":26,"props":479,"children":480},{},[481,483,487],{"type":23,"value":482},"For example differential model, let ",{"type":17,"tag":83,"props":484,"children":486},{"latex-express":485,"styles":86},"x, y, \\phi",[],{"type":23,"value":488}," is the state presentation of the model\n$$ \\dot{x} = f(x,u) $$",{"type":17,"tag":26,"props":490,"children":491},{},[492],{"type":23,"value":493},"Then the HJBE defined as",{"type":17,"tag":64,"props":495,"children":497},{"latex-express":496,"styles":67},"\n\\begin{equation*}\n    H(x,u,\\lambda,\\mu) = \\sum_{k=0}^{N-1}(x_{k}-x_{k,ref})^{T}Q(x_{k}-x_{k,ref}) + (u_{k}-u_{k,ref})^{T}R(u_{k}-u_{k,ref}) + \n                         \\phi(x) + \\lambda^{T}f(x,u) + \\mu^{T}C(x,u)\n\\end{equation*}\n",[],{"type":17,"tag":26,"props":499,"children":500},{},[501],{"type":23,"value":73},{"type":17,"tag":75,"props":503,"children":504},{},[505,512,519,526,533],{"type":17,"tag":79,"props":506,"children":507},{},[508],{"type":17,"tag":83,"props":509,"children":511},{"latex-express":510,"styles":86},"f(x,u) = \\begin{bmatrix} u_{1}*\\cos{(\\phi)} \\\\ u_{1}*\\sin{(\\phi)} \\\\ u_{2} \\end{bmatrix}",[],{"type":17,"tag":79,"props":513,"children":514},{},[515],{"type":17,"tag":83,"props":516,"children":518},{"latex-express":517,"styles":86},"C(x,u) = \\begin{bmatrix} \\left(u_{1}-\\frac{u_{1max}+u_{1min}}{2}\\right)^{2}+u_{1dummy}^{2}-(\\frac{u_{1max}-u_{1min} }{2})^{2} \\\\\n          \\left(u_{2}-\\frac{u_{2max}+u_{2min} }{2}\\right)^{2}+u_{2dummy}^{2}-(\\frac{u_{2max}-u_{2min}}{2})^{2}\n\\end{bmatrix}",[],{"type":17,"tag":79,"props":520,"children":521},{},[522],{"type":17,"tag":83,"props":523,"children":525},{"latex-express":524,"styles":86},"\\phi(x) = (x_{N}-x_{N,ref})^{T}Q(x_{N}-x_{N,ref})",[],{"type":17,"tag":79,"props":527,"children":528},{},[529],{"type":17,"tag":83,"props":530,"children":532},{"latex-express":531,"styles":86},"\\lambda = \\begin{bmatrix} \\lambda_{1} & \\lambda_{2} & \\lambda_{3} \\end{bmatrix}",[],{"type":17,"tag":79,"props":534,"children":535},{},[536],{"type":17,"tag":83,"props":537,"children":539},{"latex-express":538,"styles":86}," \\mu = \\begin{bmatrix} \\mu_{1} & \\mu_{2} \\end{bmatrix}",[],{"type":17,"tag":26,"props":541,"children":542},{},[543],{"type":23,"value":544},"Subtitute all of these term into HJBE",{"type":17,"tag":64,"props":546,"children":548},{"latex-express":547,"styles":67},"\n\\begin{align*}\nH(x,u,\\lambda,\\mu) &= \\sum_{k=0}^{N-1}(x_{k}-x_{k,ref})^{T}Q(x_{k}-x_{k,ref}) + (u_{k}-u_{k,ref})^{T}R(u_{k}-u_{k,ref})\n                     + (x_{N}-x_{N,ref})^{T}Q(x_{N}-x_{N,ref}) \\\\ & + \\begin{bmatrix} \\lambda_{1} \\\\ \\lambda_{2} \\\\ \\lambda_{3} \\end{bmatrix}^{T} \\begin{bmatrix} u_{1}*\\cos(\\phi) \\\\ u_{1}*\\sin(\\phi) \\\\ u_{2} \\end{bmatrix}\n                     + \\begin{bmatrix} \\mu_{1} \\\\ \\mu_{2} \\end{bmatrix}^{T} \\begin{bmatrix} \\left(u_{1}-\\frac{u_{1max}+u_{1min}}{2}\\right)^{2}+u_{1dummy}^{2}-(\\frac{u_{1max}-u_{1min}}{2})^{2} \\\\\n            \\left(u_{2}\\frac{u_{2max}+u_{2min}}{2}\\right)^{2}+u_{2dummy}^{2}-(\\frac{u_{2max}-u_{2min}}{2})^{2} \n\\end{bmatrix}\n\\end{align*}",[],{"type":17,"tag":26,"props":550,"children":551},{},[552],{"type":23,"value":553},"By doing partial derivative of HJBE, we get",{"type":17,"tag":272,"props":555,"children":557},{"id":556},"hamiltonian-respect-to-states",[558,560],{"type":23,"value":559},"Hamiltonian respect to states ",{"type":17,"tag":83,"props":561,"children":563},{"latex-express":562,"styles":86},"\\frac{\\partial H}{\\partial x}",[],{"type":17,"tag":64,"props":565,"children":567},{"latex-express":566,"styles":67},"\n\\begin{equation*}\n    \\frac{\\partial H}{\\partial x} = \\begin{bmatrix}\n     (x-x_{ref})q_{1} \\\\\n     (y-y_{ref})q_{2} \\\\ \n     (\\phi-\\phi_{ref})q_{3} - \\lambda_{1}\\sin{(\\phi)}u_{1} + \\lambda_{2}\\cos{(\\phi)}u_{1}\n     \\end{bmatrix}\n\\end{equation*}\n",[],{"type":17,"tag":272,"props":569,"children":571},{"id":570},"hamiltonian-respect-to-input-control",[572,574],{"type":23,"value":573},"Hamiltonian respect to input control ",{"type":17,"tag":83,"props":575,"children":576},{"latex-express":562,"styles":86},[],{"type":17,"tag":64,"props":578,"children":580},{"latex-express":579,"styles":67},"\n\\begin{equation*}\n    \\frac{\\partial H}{\\partial u} = \\begin{bmatrix}\n      (u_{1}-u_{1,ref})r_{1}+\\lambda_{1}\\cos{(\\phi)}+\\lambda_{2}\\sin{(\\phi)} \\\\ \n      (u_{2}-u_{2,ref})r_{2}+\\lambda_{3}\n     \\end{bmatrix}\n\\end{equation*}\n",[],{"type":17,"tag":26,"props":582,"children":583},{},[584],{"type":23,"value":585},"I know this is quite complicated, this is just only input control without constraint and solver with single shooting method.",{"type":17,"tag":18,"props":587,"children":589},{"id":588},"implementing-in-python",[590],{"type":23,"value":591},"Implementing in Python",{"type":17,"tag":26,"props":593,"children":594},{},[595,597],{"type":23,"value":596},"It is safe to say that you will need to start from basic first. Like creating class for model representation, but for now I will just go with CGMRES implementing only, since I have done many demonstration of how to create class for model. ",{"type":17,"tag":55,"props":598,"children":599},{},[],{"type":17,"tag":26,"props":601,"children":602},{},[603,605,610],{"type":23,"value":604},"Let's create class for ",{"type":17,"tag":169,"props":606,"children":607},{},[608],{"type":23,"value":609}," Hamiltion Jacobian Bellman Equation ",{"type":23,"value":611}," which we already derived from above equation.",{"type":17,"tag":613,"props":614,"children":619},"code",{"className":615,"code":617,"language":618,"meta":7},[616],"language-python","class HJBEquation:\n\n    def __init__(self, q1, q2, q3, r1, r2, u_max, u_min):\n\n        self.q1 = q1\n        self.q2 = q2\n        self.q3 = q3\n\n        self.r1 = r1\n        self.r2 = r2\n\n        self.u1_min = u_min[0]\n        self.u2_min = u_min[0]\n\n        self.u1_max = u_max[0]\n        self.u2_max = u_max[1]\n\n    def dhdx(self, x, y, yaw, x_r, y_r, yaw_r, u1, lam1, lam2):\n\n        dhdx1 = (x-x_r)*self.q1\n        dhdx2 = (y-y_r)*self.q2\n        dhdx3 = (yaw-yaw_r)*self.q3-u1*lam1*np.sin(yaw)+u1*lam2*np.cos(yaw)\n\n        return dhdx1, dhdx2, dhdx3\n\n    def dhdu(self, yaw, u1, u2, u1_r, u2_r, lam1, lam2, lam3, mu1, mu2):\n\n        dhdu1 = self.r1*(u1-u1_r)+lam1*np.cos(yaw)+lam2*np.sin(yaw)+2*mu1*u1*(u1+(self.u1_max+self.u1_min)/2)\n        dhdu2 = self.r2*(u2-u2_r)+lam3+2*mu2*(u2+(self.u2_max+self.u2_min)/2)\n\n        return dhdu1, dhdu2\n\n    def dphidx(self, x, y, yaw, x_r, y_r, yaw_r):\n        dphidx1 = self.q1*(x-x_r)\n        dphidx2 = self.q2*(y-y_r)\n        dphidx3 = self.q3*(yaw-yaw_r)\n\n        return dphidx1, dphidx2, dphidx3\n","python",[620],{"type":17,"tag":621,"props":622,"children":623},"pre",{},[624],{"type":17,"tag":613,"props":625,"children":626},{"__ignoreMap":7},[627,656,665,694,702,731,757,783,791,817,843,851,887,920,928,962,996,1004,1030,1038,1080,1120,1214,1222,1240,1248,1274,1282,1438,1558,1566,1583,1591,1617,1661,1705,1748,1756],{"type":17,"tag":628,"props":629,"children":632},"span",{"class":630,"line":631},"line",1,[633,639,645,651],{"type":17,"tag":628,"props":634,"children":636},{"class":635},"ct-857441",[637],{"type":23,"value":638},"class",{"type":17,"tag":628,"props":640,"children":642},{"class":641},"ct-767297",[643],{"type":23,"value":644}," ",{"type":17,"tag":628,"props":646,"children":648},{"class":647},"ct-806137",[649],{"type":23,"value":650},"HJBEquation",{"type":17,"tag":628,"props":652,"children":653},{"class":641},[654],{"type":23,"value":655},":\n",{"type":17,"tag":628,"props":657,"children":659},{"class":630,"line":658},2,[660],{"type":17,"tag":628,"props":661,"children":662},{},[663],{"type":23,"value":664},"\n",{"type":17,"tag":628,"props":666,"children":668},{"class":630,"line":667},3,[669,674,679,683,689],{"type":17,"tag":628,"props":670,"children":671},{"class":641},[672],{"type":23,"value":673},"    ",{"type":17,"tag":628,"props":675,"children":676},{"class":635},[677],{"type":23,"value":678},"def",{"type":17,"tag":628,"props":680,"children":681},{"class":641},[682],{"type":23,"value":644},{"type":17,"tag":628,"props":684,"children":686},{"class":685},"ct-533739",[687],{"type":23,"value":688},"__init__",{"type":17,"tag":628,"props":690,"children":691},{"class":641},[692],{"type":23,"value":693},"(self, q1, q2, q3, r1, r2, u_max, u_min):\n",{"type":17,"tag":628,"props":695,"children":697},{"class":630,"line":696},4,[698],{"type":17,"tag":628,"props":699,"children":700},{},[701],{"type":23,"value":664},{"type":17,"tag":628,"props":703,"children":705},{"class":630,"line":704},5,[706,711,716,721,726],{"type":17,"tag":628,"props":707,"children":708},{"class":641},[709],{"type":23,"value":710},"        ",{"type":17,"tag":628,"props":712,"children":713},{"class":685},[714],{"type":23,"value":715},"self",{"type":17,"tag":628,"props":717,"children":718},{"class":641},[719],{"type":23,"value":720},".q1 ",{"type":17,"tag":628,"props":722,"children":723},{"class":635},[724],{"type":23,"value":725},"=",{"type":17,"tag":628,"props":727,"children":728},{"class":641},[729],{"type":23,"value":730}," q1\n",{"type":17,"tag":628,"props":732,"children":734},{"class":630,"line":733},6,[735,739,743,748,752],{"type":17,"tag":628,"props":736,"children":737},{"class":641},[738],{"type":23,"value":710},{"type":17,"tag":628,"props":740,"children":741},{"class":685},[742],{"type":23,"value":715},{"type":17,"tag":628,"props":744,"children":745},{"class":641},[746],{"type":23,"value":747},".q2 ",{"type":17,"tag":628,"props":749,"children":750},{"class":635},[751],{"type":23,"value":725},{"type":17,"tag":628,"props":753,"children":754},{"class":641},[755],{"type":23,"value":756}," q2\n",{"type":17,"tag":628,"props":758,"children":760},{"class":630,"line":759},7,[761,765,769,774,778],{"type":17,"tag":628,"props":762,"children":763},{"class":641},[764],{"type":23,"value":710},{"type":17,"tag":628,"props":766,"children":767},{"class":685},[768],{"type":23,"value":715},{"type":17,"tag":628,"props":770,"children":771},{"class":641},[772],{"type":23,"value":773},".q3 ",{"type":17,"tag":628,"props":775,"children":776},{"class":635},[777],{"type":23,"value":725},{"type":17,"tag":628,"props":779,"children":780},{"class":641},[781],{"type":23,"value":782}," q3\n",{"type":17,"tag":628,"props":784,"children":786},{"class":630,"line":785},8,[787],{"type":17,"tag":628,"props":788,"children":789},{},[790],{"type":23,"value":664},{"type":17,"tag":628,"props":792,"children":794},{"class":630,"line":793},9,[795,799,803,808,812],{"type":17,"tag":628,"props":796,"children":797},{"class":641},[798],{"type":23,"value":710},{"type":17,"tag":628,"props":800,"children":801},{"class":685},[802],{"type":23,"value":715},{"type":17,"tag":628,"props":804,"children":805},{"class":641},[806],{"type":23,"value":807},".r1 ",{"type":17,"tag":628,"props":809,"children":810},{"class":635},[811],{"type":23,"value":725},{"type":17,"tag":628,"props":813,"children":814},{"class":641},[815],{"type":23,"value":816}," r1\n",{"type":17,"tag":628,"props":818,"children":820},{"class":630,"line":819},10,[821,825,829,834,838],{"type":17,"tag":628,"props":822,"children":823},{"class":641},[824],{"type":23,"value":710},{"type":17,"tag":628,"props":826,"children":827},{"class":685},[828],{"type":23,"value":715},{"type":17,"tag":628,"props":830,"children":831},{"class":641},[832],{"type":23,"value":833},".r2 ",{"type":17,"tag":628,"props":835,"children":836},{"class":635},[837],{"type":23,"value":725},{"type":17,"tag":628,"props":839,"children":840},{"class":641},[841],{"type":23,"value":842}," r2\n",{"type":17,"tag":628,"props":844,"children":846},{"class":630,"line":845},11,[847],{"type":17,"tag":628,"props":848,"children":849},{},[850],{"type":23,"value":664},{"type":17,"tag":628,"props":852,"children":854},{"class":630,"line":853},12,[855,859,863,868,872,877,882],{"type":17,"tag":628,"props":856,"children":857},{"class":641},[858],{"type":23,"value":710},{"type":17,"tag":628,"props":860,"children":861},{"class":685},[862],{"type":23,"value":715},{"type":17,"tag":628,"props":864,"children":865},{"class":641},[866],{"type":23,"value":867},".u1_min ",{"type":17,"tag":628,"props":869,"children":870},{"class":635},[871],{"type":23,"value":725},{"type":17,"tag":628,"props":873,"children":874},{"class":641},[875],{"type":23,"value":876}," u_min[",{"type":17,"tag":628,"props":878,"children":879},{"class":685},[880],{"type":23,"value":881},"0",{"type":17,"tag":628,"props":883,"children":884},{"class":641},[885],{"type":23,"value":886},"]\n",{"type":17,"tag":628,"props":888,"children":890},{"class":630,"line":889},13,[891,895,899,904,908,912,916],{"type":17,"tag":628,"props":892,"children":893},{"class":641},[894],{"type":23,"value":710},{"type":17,"tag":628,"props":896,"children":897},{"class":685},[898],{"type":23,"value":715},{"type":17,"tag":628,"props":900,"children":901},{"class":641},[902],{"type":23,"value":903},".u2_min ",{"type":17,"tag":628,"props":905,"children":906},{"class":635},[907],{"type":23,"value":725},{"type":17,"tag":628,"props":909,"children":910},{"class":641},[911],{"type":23,"value":876},{"type":17,"tag":628,"props":913,"children":914},{"class":685},[915],{"type":23,"value":881},{"type":17,"tag":628,"props":917,"children":918},{"class":641},[919],{"type":23,"value":886},{"type":17,"tag":628,"props":921,"children":923},{"class":630,"line":922},14,[924],{"type":17,"tag":628,"props":925,"children":926},{},[927],{"type":23,"value":664},{"type":17,"tag":628,"props":929,"children":931},{"class":630,"line":930},15,[932,936,940,945,949,954,958],{"type":17,"tag":628,"props":933,"children":934},{"class":641},[935],{"type":23,"value":710},{"type":17,"tag":628,"props":937,"children":938},{"class":685},[939],{"type":23,"value":715},{"type":17,"tag":628,"props":941,"children":942},{"class":641},[943],{"type":23,"value":944},".u1_max ",{"type":17,"tag":628,"props":946,"children":947},{"class":635},[948],{"type":23,"value":725},{"type":17,"tag":628,"props":950,"children":951},{"class":641},[952],{"type":23,"value":953}," u_max[",{"type":17,"tag":628,"props":955,"children":956},{"class":685},[957],{"type":23,"value":881},{"type":17,"tag":628,"props":959,"children":960},{"class":641},[961],{"type":23,"value":886},{"type":17,"tag":628,"props":963,"children":965},{"class":630,"line":964},16,[966,970,974,979,983,987,992],{"type":17,"tag":628,"props":967,"children":968},{"class":641},[969],{"type":23,"value":710},{"type":17,"tag":628,"props":971,"children":972},{"class":685},[973],{"type":23,"value":715},{"type":17,"tag":628,"props":975,"children":976},{"class":641},[977],{"type":23,"value":978},".u2_max ",{"type":17,"tag":628,"props":980,"children":981},{"class":635},[982],{"type":23,"value":725},{"type":17,"tag":628,"props":984,"children":985},{"class":641},[986],{"type":23,"value":953},{"type":17,"tag":628,"props":988,"children":989},{"class":685},[990],{"type":23,"value":991},"1",{"type":17,"tag":628,"props":993,"children":994},{"class":641},[995],{"type":23,"value":886},{"type":17,"tag":628,"props":997,"children":999},{"class":630,"line":998},17,[1000],{"type":17,"tag":628,"props":1001,"children":1002},{},[1003],{"type":23,"value":664},{"type":17,"tag":628,"props":1005,"children":1007},{"class":630,"line":1006},18,[1008,1012,1016,1020,1025],{"type":17,"tag":628,"props":1009,"children":1010},{"class":641},[1011],{"type":23,"value":673},{"type":17,"tag":628,"props":1013,"children":1014},{"class":635},[1015],{"type":23,"value":678},{"type":17,"tag":628,"props":1017,"children":1018},{"class":641},[1019],{"type":23,"value":644},{"type":17,"tag":628,"props":1021,"children":1022},{"class":647},[1023],{"type":23,"value":1024},"dhdx",{"type":17,"tag":628,"props":1026,"children":1027},{"class":641},[1028],{"type":23,"value":1029},"(self, x, y, yaw, x_r, y_r, yaw_r, u1, lam1, lam2):\n",{"type":17,"tag":628,"props":1031,"children":1033},{"class":630,"line":1032},19,[1034],{"type":17,"tag":628,"props":1035,"children":1036},{},[1037],{"type":23,"value":664},{"type":17,"tag":628,"props":1039,"children":1041},{"class":630,"line":1040},20,[1042,1047,1051,1056,1061,1066,1071,1075],{"type":17,"tag":628,"props":1043,"children":1044},{"class":641},[1045],{"type":23,"value":1046},"        dhdx1 ",{"type":17,"tag":628,"props":1048,"children":1049},{"class":635},[1050],{"type":23,"value":725},{"type":17,"tag":628,"props":1052,"children":1053},{"class":641},[1054],{"type":23,"value":1055}," (x",{"type":17,"tag":628,"props":1057,"children":1058},{"class":635},[1059],{"type":23,"value":1060},"-",{"type":17,"tag":628,"props":1062,"children":1063},{"class":641},[1064],{"type":23,"value":1065},"x_r)",{"type":17,"tag":628,"props":1067,"children":1068},{"class":635},[1069],{"type":23,"value":1070},"*",{"type":17,"tag":628,"props":1072,"children":1073},{"class":685},[1074],{"type":23,"value":715},{"type":17,"tag":628,"props":1076,"children":1077},{"class":641},[1078],{"type":23,"value":1079},".q1\n",{"type":17,"tag":628,"props":1081,"children":1083},{"class":630,"line":1082},21,[1084,1089,1093,1098,1102,1107,1111,1115],{"type":17,"tag":628,"props":1085,"children":1086},{"class":641},[1087],{"type":23,"value":1088},"        dhdx2 ",{"type":17,"tag":628,"props":1090,"children":1091},{"class":635},[1092],{"type":23,"value":725},{"type":17,"tag":628,"props":1094,"children":1095},{"class":641},[1096],{"type":23,"value":1097}," (y",{"type":17,"tag":628,"props":1099,"children":1100},{"class":635},[1101],{"type":23,"value":1060},{"type":17,"tag":628,"props":1103,"children":1104},{"class":641},[1105],{"type":23,"value":1106},"y_r)",{"type":17,"tag":628,"props":1108,"children":1109},{"class":635},[1110],{"type":23,"value":1070},{"type":17,"tag":628,"props":1112,"children":1113},{"class":685},[1114],{"type":23,"value":715},{"type":17,"tag":628,"props":1116,"children":1117},{"class":641},[1118],{"type":23,"value":1119},".q2\n",{"type":17,"tag":628,"props":1121,"children":1123},{"class":630,"line":1122},22,[1124,1129,1133,1138,1142,1147,1151,1155,1160,1164,1169,1173,1178,1182,1187,1192,1196,1200,1205,1209],{"type":17,"tag":628,"props":1125,"children":1126},{"class":641},[1127],{"type":23,"value":1128},"        dhdx3 ",{"type":17,"tag":628,"props":1130,"children":1131},{"class":635},[1132],{"type":23,"value":725},{"type":17,"tag":628,"props":1134,"children":1135},{"class":641},[1136],{"type":23,"value":1137}," (yaw",{"type":17,"tag":628,"props":1139,"children":1140},{"class":635},[1141],{"type":23,"value":1060},{"type":17,"tag":628,"props":1143,"children":1144},{"class":641},[1145],{"type":23,"value":1146},"yaw_r)",{"type":17,"tag":628,"props":1148,"children":1149},{"class":635},[1150],{"type":23,"value":1070},{"type":17,"tag":628,"props":1152,"children":1153},{"class":685},[1154],{"type":23,"value":715},{"type":17,"tag":628,"props":1156,"children":1157},{"class":641},[1158],{"type":23,"value":1159},".q3",{"type":17,"tag":628,"props":1161,"children":1162},{"class":635},[1163],{"type":23,"value":1060},{"type":17,"tag":628,"props":1165,"children":1166},{"class":641},[1167],{"type":23,"value":1168},"u1",{"type":17,"tag":628,"props":1170,"children":1171},{"class":635},[1172],{"type":23,"value":1070},{"type":17,"tag":628,"props":1174,"children":1175},{"class":641},[1176],{"type":23,"value":1177},"lam1",{"type":17,"tag":628,"props":1179,"children":1180},{"class":635},[1181],{"type":23,"value":1070},{"type":17,"tag":628,"props":1183,"children":1184},{"class":641},[1185],{"type":23,"value":1186},"np.sin(yaw)",{"type":17,"tag":628,"props":1188,"children":1189},{"class":635},[1190],{"type":23,"value":1191},"+",{"type":17,"tag":628,"props":1193,"children":1194},{"class":641},[1195],{"type":23,"value":1168},{"type":17,"tag":628,"props":1197,"children":1198},{"class":635},[1199],{"type":23,"value":1070},{"type":17,"tag":628,"props":1201,"children":1202},{"class":641},[1203],{"type":23,"value":1204},"lam2",{"type":17,"tag":628,"props":1206,"children":1207},{"class":635},[1208],{"type":23,"value":1070},{"type":17,"tag":628,"props":1210,"children":1211},{"class":641},[1212],{"type":23,"value":1213},"np.cos(yaw)\n",{"type":17,"tag":628,"props":1215,"children":1217},{"class":630,"line":1216},23,[1218],{"type":17,"tag":628,"props":1219,"children":1220},{},[1221],{"type":23,"value":664},{"type":17,"tag":628,"props":1223,"children":1225},{"class":630,"line":1224},24,[1226,1230,1235],{"type":17,"tag":628,"props":1227,"children":1228},{"class":641},[1229],{"type":23,"value":710},{"type":17,"tag":628,"props":1231,"children":1232},{"class":635},[1233],{"type":23,"value":1234},"return",{"type":17,"tag":628,"props":1236,"children":1237},{"class":641},[1238],{"type":23,"value":1239}," dhdx1, dhdx2, dhdx3\n",{"type":17,"tag":628,"props":1241,"children":1243},{"class":630,"line":1242},25,[1244],{"type":17,"tag":628,"props":1245,"children":1246},{},[1247],{"type":23,"value":664},{"type":17,"tag":628,"props":1249,"children":1251},{"class":630,"line":1250},26,[1252,1256,1260,1264,1269],{"type":17,"tag":628,"props":1253,"children":1254},{"class":641},[1255],{"type":23,"value":673},{"type":17,"tag":628,"props":1257,"children":1258},{"class":635},[1259],{"type":23,"value":678},{"type":17,"tag":628,"props":1261,"children":1262},{"class":641},[1263],{"type":23,"value":644},{"type":17,"tag":628,"props":1265,"children":1266},{"class":647},[1267],{"type":23,"value":1268},"dhdu",{"type":17,"tag":628,"props":1270,"children":1271},{"class":641},[1272],{"type":23,"value":1273},"(self, yaw, u1, u2, u1_r, u2_r, lam1, lam2, lam3, mu1, mu2):\n",{"type":17,"tag":628,"props":1275,"children":1277},{"class":630,"line":1276},27,[1278],{"type":17,"tag":628,"props":1279,"children":1280},{},[1281],{"type":23,"value":664},{"type":17,"tag":628,"props":1283,"children":1285},{"class":630,"line":1284},28,[1286,1291,1295,1299,1303,1308,1312,1317,1321,1326,1330,1334,1338,1343,1347,1351,1355,1359,1363,1368,1372,1377,1381,1385,1389,1393,1397,1402,1406,1411,1415,1419,1424,1429,1433],{"type":17,"tag":628,"props":1287,"children":1288},{"class":641},[1289],{"type":23,"value":1290},"        dhdu1 ",{"type":17,"tag":628,"props":1292,"children":1293},{"class":635},[1294],{"type":23,"value":725},{"type":17,"tag":628,"props":1296,"children":1297},{"class":641},[1298],{"type":23,"value":644},{"type":17,"tag":628,"props":1300,"children":1301},{"class":685},[1302],{"type":23,"value":715},{"type":17,"tag":628,"props":1304,"children":1305},{"class":641},[1306],{"type":23,"value":1307},".r1",{"type":17,"tag":628,"props":1309,"children":1310},{"class":635},[1311],{"type":23,"value":1070},{"type":17,"tag":628,"props":1313,"children":1314},{"class":641},[1315],{"type":23,"value":1316},"(u1",{"type":17,"tag":628,"props":1318,"children":1319},{"class":635},[1320],{"type":23,"value":1060},{"type":17,"tag":628,"props":1322,"children":1323},{"class":641},[1324],{"type":23,"value":1325},"u1_r)",{"type":17,"tag":628,"props":1327,"children":1328},{"class":635},[1329],{"type":23,"value":1191},{"type":17,"tag":628,"props":1331,"children":1332},{"class":641},[1333],{"type":23,"value":1177},{"type":17,"tag":628,"props":1335,"children":1336},{"class":635},[1337],{"type":23,"value":1070},{"type":17,"tag":628,"props":1339,"children":1340},{"class":641},[1341],{"type":23,"value":1342},"np.cos(yaw)",{"type":17,"tag":628,"props":1344,"children":1345},{"class":635},[1346],{"type":23,"value":1191},{"type":17,"tag":628,"props":1348,"children":1349},{"class":641},[1350],{"type":23,"value":1204},{"type":17,"tag":628,"props":1352,"children":1353},{"class":635},[1354],{"type":23,"value":1070},{"type":17,"tag":628,"props":1356,"children":1357},{"class":641},[1358],{"type":23,"value":1186},{"type":17,"tag":628,"props":1360,"children":1361},{"class":635},[1362],{"type":23,"value":1191},{"type":17,"tag":628,"props":1364,"children":1365},{"class":685},[1366],{"type":23,"value":1367},"2",{"type":17,"tag":628,"props":1369,"children":1370},{"class":635},[1371],{"type":23,"value":1070},{"type":17,"tag":628,"props":1373,"children":1374},{"class":641},[1375],{"type":23,"value":1376},"mu1",{"type":17,"tag":628,"props":1378,"children":1379},{"class":635},[1380],{"type":23,"value":1070},{"type":17,"tag":628,"props":1382,"children":1383},{"class":641},[1384],{"type":23,"value":1168},{"type":17,"tag":628,"props":1386,"children":1387},{"class":635},[1388],{"type":23,"value":1070},{"type":17,"tag":628,"props":1390,"children":1391},{"class":641},[1392],{"type":23,"value":1316},{"type":17,"tag":628,"props":1394,"children":1395},{"class":635},[1396],{"type":23,"value":1191},{"type":17,"tag":628,"props":1398,"children":1399},{"class":641},[1400],{"type":23,"value":1401},"(",{"type":17,"tag":628,"props":1403,"children":1404},{"class":685},[1405],{"type":23,"value":715},{"type":17,"tag":628,"props":1407,"children":1408},{"class":641},[1409],{"type":23,"value":1410},".u1_max",{"type":17,"tag":628,"props":1412,"children":1413},{"class":635},[1414],{"type":23,"value":1191},{"type":17,"tag":628,"props":1416,"children":1417},{"class":685},[1418],{"type":23,"value":715},{"type":17,"tag":628,"props":1420,"children":1421},{"class":641},[1422],{"type":23,"value":1423},".u1_min)",{"type":17,"tag":628,"props":1425,"children":1426},{"class":635},[1427],{"type":23,"value":1428},"/",{"type":17,"tag":628,"props":1430,"children":1431},{"class":685},[1432],{"type":23,"value":1367},{"type":17,"tag":628,"props":1434,"children":1435},{"class":641},[1436],{"type":23,"value":1437},")\n",{"type":17,"tag":628,"props":1439,"children":1441},{"class":630,"line":1440},29,[1442,1447,1451,1455,1459,1464,1468,1473,1477,1482,1486,1491,1495,1499,1503,1508,1512,1516,1520,1524,1528,1533,1537,1541,1546,1550,1554],{"type":17,"tag":628,"props":1443,"children":1444},{"class":641},[1445],{"type":23,"value":1446},"        dhdu2 ",{"type":17,"tag":628,"props":1448,"children":1449},{"class":635},[1450],{"type":23,"value":725},{"type":17,"tag":628,"props":1452,"children":1453},{"class":641},[1454],{"type":23,"value":644},{"type":17,"tag":628,"props":1456,"children":1457},{"class":685},[1458],{"type":23,"value":715},{"type":17,"tag":628,"props":1460,"children":1461},{"class":641},[1462],{"type":23,"value":1463},".r2",{"type":17,"tag":628,"props":1465,"children":1466},{"class":635},[1467],{"type":23,"value":1070},{"type":17,"tag":628,"props":1469,"children":1470},{"class":641},[1471],{"type":23,"value":1472},"(u2",{"type":17,"tag":628,"props":1474,"children":1475},{"class":635},[1476],{"type":23,"value":1060},{"type":17,"tag":628,"props":1478,"children":1479},{"class":641},[1480],{"type":23,"value":1481},"u2_r)",{"type":17,"tag":628,"props":1483,"children":1484},{"class":635},[1485],{"type":23,"value":1191},{"type":17,"tag":628,"props":1487,"children":1488},{"class":641},[1489],{"type":23,"value":1490},"lam3",{"type":17,"tag":628,"props":1492,"children":1493},{"class":635},[1494],{"type":23,"value":1191},{"type":17,"tag":628,"props":1496,"children":1497},{"class":685},[1498],{"type":23,"value":1367},{"type":17,"tag":628,"props":1500,"children":1501},{"class":635},[1502],{"type":23,"value":1070},{"type":17,"tag":628,"props":1504,"children":1505},{"class":641},[1506],{"type":23,"value":1507},"mu2",{"type":17,"tag":628,"props":1509,"children":1510},{"class":635},[1511],{"type":23,"value":1070},{"type":17,"tag":628,"props":1513,"children":1514},{"class":641},[1515],{"type":23,"value":1472},{"type":17,"tag":628,"props":1517,"children":1518},{"class":635},[1519],{"type":23,"value":1191},{"type":17,"tag":628,"props":1521,"children":1522},{"class":641},[1523],{"type":23,"value":1401},{"type":17,"tag":628,"props":1525,"children":1526},{"class":685},[1527],{"type":23,"value":715},{"type":17,"tag":628,"props":1529,"children":1530},{"class":641},[1531],{"type":23,"value":1532},".u2_max",{"type":17,"tag":628,"props":1534,"children":1535},{"class":635},[1536],{"type":23,"value":1191},{"type":17,"tag":628,"props":1538,"children":1539},{"class":685},[1540],{"type":23,"value":715},{"type":17,"tag":628,"props":1542,"children":1543},{"class":641},[1544],{"type":23,"value":1545},".u2_min)",{"type":17,"tag":628,"props":1547,"children":1548},{"class":635},[1549],{"type":23,"value":1428},{"type":17,"tag":628,"props":1551,"children":1552},{"class":685},[1553],{"type":23,"value":1367},{"type":17,"tag":628,"props":1555,"children":1556},{"class":641},[1557],{"type":23,"value":1437},{"type":17,"tag":628,"props":1559,"children":1561},{"class":630,"line":1560},30,[1562],{"type":17,"tag":628,"props":1563,"children":1564},{},[1565],{"type":23,"value":664},{"type":17,"tag":628,"props":1567,"children":1569},{"class":630,"line":1568},31,[1570,1574,1578],{"type":17,"tag":628,"props":1571,"children":1572},{"class":641},[1573],{"type":23,"value":710},{"type":17,"tag":628,"props":1575,"children":1576},{"class":635},[1577],{"type":23,"value":1234},{"type":17,"tag":628,"props":1579,"children":1580},{"class":641},[1581],{"type":23,"value":1582}," dhdu1, dhdu2\n",{"type":17,"tag":628,"props":1584,"children":1586},{"class":630,"line":1585},32,[1587],{"type":17,"tag":628,"props":1588,"children":1589},{},[1590],{"type":23,"value":664},{"type":17,"tag":628,"props":1592,"children":1594},{"class":630,"line":1593},33,[1595,1599,1603,1607,1612],{"type":17,"tag":628,"props":1596,"children":1597},{"class":641},[1598],{"type":23,"value":673},{"type":17,"tag":628,"props":1600,"children":1601},{"class":635},[1602],{"type":23,"value":678},{"type":17,"tag":628,"props":1604,"children":1605},{"class":641},[1606],{"type":23,"value":644},{"type":17,"tag":628,"props":1608,"children":1609},{"class":647},[1610],{"type":23,"value":1611},"dphidx",{"type":17,"tag":628,"props":1613,"children":1614},{"class":641},[1615],{"type":23,"value":1616},"(self, x, y, yaw, x_r, y_r, yaw_r):\n",{"type":17,"tag":628,"props":1618,"children":1620},{"class":630,"line":1619},34,[1621,1626,1630,1634,1638,1643,1647,1652,1656],{"type":17,"tag":628,"props":1622,"children":1623},{"class":641},[1624],{"type":23,"value":1625},"        dphidx1 ",{"type":17,"tag":628,"props":1627,"children":1628},{"class":635},[1629],{"type":23,"value":725},{"type":17,"tag":628,"props":1631,"children":1632},{"class":641},[1633],{"type":23,"value":644},{"type":17,"tag":628,"props":1635,"children":1636},{"class":685},[1637],{"type":23,"value":715},{"type":17,"tag":628,"props":1639,"children":1640},{"class":641},[1641],{"type":23,"value":1642},".q1",{"type":17,"tag":628,"props":1644,"children":1645},{"class":635},[1646],{"type":23,"value":1070},{"type":17,"tag":628,"props":1648,"children":1649},{"class":641},[1650],{"type":23,"value":1651},"(x",{"type":17,"tag":628,"props":1653,"children":1654},{"class":635},[1655],{"type":23,"value":1060},{"type":17,"tag":628,"props":1657,"children":1658},{"class":641},[1659],{"type":23,"value":1660},"x_r)\n",{"type":17,"tag":628,"props":1662,"children":1664},{"class":630,"line":1663},35,[1665,1670,1674,1678,1682,1687,1691,1696,1700],{"type":17,"tag":628,"props":1666,"children":1667},{"class":641},[1668],{"type":23,"value":1669},"        dphidx2 ",{"type":17,"tag":628,"props":1671,"children":1672},{"class":635},[1673],{"type":23,"value":725},{"type":17,"tag":628,"props":1675,"children":1676},{"class":641},[1677],{"type":23,"value":644},{"type":17,"tag":628,"props":1679,"children":1680},{"class":685},[1681],{"type":23,"value":715},{"type":17,"tag":628,"props":1683,"children":1684},{"class":641},[1685],{"type":23,"value":1686},".q2",{"type":17,"tag":628,"props":1688,"children":1689},{"class":635},[1690],{"type":23,"value":1070},{"type":17,"tag":628,"props":1692,"children":1693},{"class":641},[1694],{"type":23,"value":1695},"(y",{"type":17,"tag":628,"props":1697,"children":1698},{"class":635},[1699],{"type":23,"value":1060},{"type":17,"tag":628,"props":1701,"children":1702},{"class":641},[1703],{"type":23,"value":1704},"y_r)\n",{"type":17,"tag":628,"props":1706,"children":1708},{"class":630,"line":1707},36,[1709,1714,1718,1722,1726,1730,1734,1739,1743],{"type":17,"tag":628,"props":1710,"children":1711},{"class":641},[1712],{"type":23,"value":1713},"        dphidx3 ",{"type":17,"tag":628,"props":1715,"children":1716},{"class":635},[1717],{"type":23,"value":725},{"type":17,"tag":628,"props":1719,"children":1720},{"class":641},[1721],{"type":23,"value":644},{"type":17,"tag":628,"props":1723,"children":1724},{"class":685},[1725],{"type":23,"value":715},{"type":17,"tag":628,"props":1727,"children":1728},{"class":641},[1729],{"type":23,"value":1159},{"type":17,"tag":628,"props":1731,"children":1732},{"class":635},[1733],{"type":23,"value":1070},{"type":17,"tag":628,"props":1735,"children":1736},{"class":641},[1737],{"type":23,"value":1738},"(yaw",{"type":17,"tag":628,"props":1740,"children":1741},{"class":635},[1742],{"type":23,"value":1060},{"type":17,"tag":628,"props":1744,"children":1745},{"class":641},[1746],{"type":23,"value":1747},"yaw_r)\n",{"type":17,"tag":628,"props":1749,"children":1751},{"class":630,"line":1750},37,[1752],{"type":17,"tag":628,"props":1753,"children":1754},{},[1755],{"type":23,"value":664},{"type":17,"tag":628,"props":1757,"children":1759},{"class":630,"line":1758},38,[1760,1764,1768],{"type":17,"tag":628,"props":1761,"children":1762},{"class":641},[1763],{"type":23,"value":710},{"type":17,"tag":628,"props":1765,"children":1766},{"class":635},[1767],{"type":23,"value":1234},{"type":17,"tag":628,"props":1769,"children":1770},{"class":641},[1771],{"type":23,"value":1772}," dphidx1, dphidx2, dphidx3",{"type":17,"tag":26,"props":1774,"children":1775},{},[1776,1778,1783,1784],{"type":23,"value":1777},"Here, I suggest that you should understand the mathematics equations above that I try to explain. It is easy to do it in Python programming language if you already understand its expression. Now I created another class for ",{"type":17,"tag":169,"props":1779,"children":1780},{},[1781],{"type":23,"value":1782}," NMPC with CGMRES ",{"type":23,"value":175},{"type":17,"tag":55,"props":1785,"children":1786},{},[],{"type":17,"tag":613,"props":1788,"children":1791},{"className":1789,"code":1790,"language":618,"meta":7},[616],"class NMPCCGMRES:\n\n    def __init__(self):\n\n        ## NMPC params\n        self.x_dim = 3\n        self.u_dim = 2\n        self.c_dim = 2\n        self.pred_horizons = 10\n\n        ### Continuations Params\n        self.ht = 1e-5\n        self.zeta = 1/self.ht\n        self.alpha = 0.5\n        self.tf = 1.0\n\n        ### Matrix\n\n        self.q1 = 1\n        self.q2 = 6\n        self.q3 = 1\n        self.r1 = 1\n        self.r2 = 0.1\n\n        ### Constraint\n        self.u_min = [ 0,  0]\n        self.u_max = [ 2,  1.57]\n        self.u_dummy = [0.01, 0.01]\n\n        ### Initialize matrix solution\n        self.dU = np.zeros((self.u_dim, self.pred_horizons))\n\n        ### Reference point\n        self.X_r = [3, 2, 0.0]\n        self.U_r = [0, 0]\n",[1792],{"type":17,"tag":621,"props":1793,"children":1794},{},[1795],{"type":17,"tag":613,"props":1796,"children":1797},{"__ignoreMap":7},[1798,1818,1825,1849,1856,1869,1898,1927,1955,1984,1991,2003,2032,2073,2102,2131,2138,2150,2157,2185,2213,2240,2267,2295,2302,2314,2356,2397,2440,2447,2459,2502,2509,2521,2571],{"type":17,"tag":628,"props":1799,"children":1800},{"class":630,"line":631},[1801,1805,1809,1814],{"type":17,"tag":628,"props":1802,"children":1803},{"class":635},[1804],{"type":23,"value":638},{"type":17,"tag":628,"props":1806,"children":1807},{"class":641},[1808],{"type":23,"value":644},{"type":17,"tag":628,"props":1810,"children":1811},{"class":647},[1812],{"type":23,"value":1813},"NMPCCGMRES",{"type":17,"tag":628,"props":1815,"children":1816},{"class":641},[1817],{"type":23,"value":655},{"type":17,"tag":628,"props":1819,"children":1820},{"class":630,"line":658},[1821],{"type":17,"tag":628,"props":1822,"children":1823},{},[1824],{"type":23,"value":664},{"type":17,"tag":628,"props":1826,"children":1827},{"class":630,"line":667},[1828,1832,1836,1840,1844],{"type":17,"tag":628,"props":1829,"children":1830},{"class":641},[1831],{"type":23,"value":673},{"type":17,"tag":628,"props":1833,"children":1834},{"class":635},[1835],{"type":23,"value":678},{"type":17,"tag":628,"props":1837,"children":1838},{"class":641},[1839],{"type":23,"value":644},{"type":17,"tag":628,"props":1841,"children":1842},{"class":685},[1843],{"type":23,"value":688},{"type":17,"tag":628,"props":1845,"children":1846},{"class":641},[1847],{"type":23,"value":1848},"(self):\n",{"type":17,"tag":628,"props":1850,"children":1851},{"class":630,"line":696},[1852],{"type":17,"tag":628,"props":1853,"children":1854},{},[1855],{"type":23,"value":664},{"type":17,"tag":628,"props":1857,"children":1858},{"class":630,"line":704},[1859,1863],{"type":17,"tag":628,"props":1860,"children":1861},{"class":641},[1862],{"type":23,"value":710},{"type":17,"tag":628,"props":1864,"children":1866},{"class":1865},"ct-326375",[1867],{"type":23,"value":1868},"## NMPC params\n",{"type":17,"tag":628,"props":1870,"children":1871},{"class":630,"line":733},[1872,1876,1880,1885,1889,1893],{"type":17,"tag":628,"props":1873,"children":1874},{"class":641},[1875],{"type":23,"value":710},{"type":17,"tag":628,"props":1877,"children":1878},{"class":685},[1879],{"type":23,"value":715},{"type":17,"tag":628,"props":1881,"children":1882},{"class":641},[1883],{"type":23,"value":1884},".x_dim ",{"type":17,"tag":628,"props":1886,"children":1887},{"class":635},[1888],{"type":23,"value":725},{"type":17,"tag":628,"props":1890,"children":1891},{"class":641},[1892],{"type":23,"value":644},{"type":17,"tag":628,"props":1894,"children":1895},{"class":685},[1896],{"type":23,"value":1897},"3\n",{"type":17,"tag":628,"props":1899,"children":1900},{"class":630,"line":759},[1901,1905,1909,1914,1918,1922],{"type":17,"tag":628,"props":1902,"children":1903},{"class":641},[1904],{"type":23,"value":710},{"type":17,"tag":628,"props":1906,"children":1907},{"class":685},[1908],{"type":23,"value":715},{"type":17,"tag":628,"props":1910,"children":1911},{"class":641},[1912],{"type":23,"value":1913},".u_dim ",{"type":17,"tag":628,"props":1915,"children":1916},{"class":635},[1917],{"type":23,"value":725},{"type":17,"tag":628,"props":1919,"children":1920},{"class":641},[1921],{"type":23,"value":644},{"type":17,"tag":628,"props":1923,"children":1924},{"class":685},[1925],{"type":23,"value":1926},"2\n",{"type":17,"tag":628,"props":1928,"children":1929},{"class":630,"line":785},[1930,1934,1938,1943,1947,1951],{"type":17,"tag":628,"props":1931,"children":1932},{"class":641},[1933],{"type":23,"value":710},{"type":17,"tag":628,"props":1935,"children":1936},{"class":685},[1937],{"type":23,"value":715},{"type":17,"tag":628,"props":1939,"children":1940},{"class":641},[1941],{"type":23,"value":1942},".c_dim ",{"type":17,"tag":628,"props":1944,"children":1945},{"class":635},[1946],{"type":23,"value":725},{"type":17,"tag":628,"props":1948,"children":1949},{"class":641},[1950],{"type":23,"value":644},{"type":17,"tag":628,"props":1952,"children":1953},{"class":685},[1954],{"type":23,"value":1926},{"type":17,"tag":628,"props":1956,"children":1957},{"class":630,"line":793},[1958,1962,1966,1971,1975,1979],{"type":17,"tag":628,"props":1959,"children":1960},{"class":641},[1961],{"type":23,"value":710},{"type":17,"tag":628,"props":1963,"children":1964},{"class":685},[1965],{"type":23,"value":715},{"type":17,"tag":628,"props":1967,"children":1968},{"class":641},[1969],{"type":23,"value":1970},".pred_horizons ",{"type":17,"tag":628,"props":1972,"children":1973},{"class":635},[1974],{"type":23,"value":725},{"type":17,"tag":628,"props":1976,"children":1977},{"class":641},[1978],{"type":23,"value":644},{"type":17,"tag":628,"props":1980,"children":1981},{"class":685},[1982],{"type":23,"value":1983},"10\n",{"type":17,"tag":628,"props":1985,"children":1986},{"class":630,"line":819},[1987],{"type":17,"tag":628,"props":1988,"children":1989},{},[1990],{"type":23,"value":664},{"type":17,"tag":628,"props":1992,"children":1993},{"class":630,"line":845},[1994,1998],{"type":17,"tag":628,"props":1995,"children":1996},{"class":641},[1997],{"type":23,"value":710},{"type":17,"tag":628,"props":1999,"children":2000},{"class":1865},[2001],{"type":23,"value":2002},"### Continuations Params\n",{"type":17,"tag":628,"props":2004,"children":2005},{"class":630,"line":853},[2006,2010,2014,2019,2023,2027],{"type":17,"tag":628,"props":2007,"children":2008},{"class":641},[2009],{"type":23,"value":710},{"type":17,"tag":628,"props":2011,"children":2012},{"class":685},[2013],{"type":23,"value":715},{"type":17,"tag":628,"props":2015,"children":2016},{"class":641},[2017],{"type":23,"value":2018},".ht ",{"type":17,"tag":628,"props":2020,"children":2021},{"class":635},[2022],{"type":23,"value":725},{"type":17,"tag":628,"props":2024,"children":2025},{"class":641},[2026],{"type":23,"value":644},{"type":17,"tag":628,"props":2028,"children":2029},{"class":685},[2030],{"type":23,"value":2031},"1e-5\n",{"type":17,"tag":628,"props":2033,"children":2034},{"class":630,"line":889},[2035,2039,2043,2048,2052,2056,2060,2064,2068],{"type":17,"tag":628,"props":2036,"children":2037},{"class":641},[2038],{"type":23,"value":710},{"type":17,"tag":628,"props":2040,"children":2041},{"class":685},[2042],{"type":23,"value":715},{"type":17,"tag":628,"props":2044,"children":2045},{"class":641},[2046],{"type":23,"value":2047},".zeta ",{"type":17,"tag":628,"props":2049,"children":2050},{"class":635},[2051],{"type":23,"value":725},{"type":17,"tag":628,"props":2053,"children":2054},{"class":641},[2055],{"type":23,"value":644},{"type":17,"tag":628,"props":2057,"children":2058},{"class":685},[2059],{"type":23,"value":991},{"type":17,"tag":628,"props":2061,"children":2062},{"class":635},[2063],{"type":23,"value":1428},{"type":17,"tag":628,"props":2065,"children":2066},{"class":685},[2067],{"type":23,"value":715},{"type":17,"tag":628,"props":2069,"children":2070},{"class":641},[2071],{"type":23,"value":2072},".ht\n",{"type":17,"tag":628,"props":2074,"children":2075},{"class":630,"line":922},[2076,2080,2084,2089,2093,2097],{"type":17,"tag":628,"props":2077,"children":2078},{"class":641},[2079],{"type":23,"value":710},{"type":17,"tag":628,"props":2081,"children":2082},{"class":685},[2083],{"type":23,"value":715},{"type":17,"tag":628,"props":2085,"children":2086},{"class":641},[2087],{"type":23,"value":2088},".alpha ",{"type":17,"tag":628,"props":2090,"children":2091},{"class":635},[2092],{"type":23,"value":725},{"type":17,"tag":628,"props":2094,"children":2095},{"class":641},[2096],{"type":23,"value":644},{"type":17,"tag":628,"props":2098,"children":2099},{"class":685},[2100],{"type":23,"value":2101},"0.5\n",{"type":17,"tag":628,"props":2103,"children":2104},{"class":630,"line":930},[2105,2109,2113,2118,2122,2126],{"type":17,"tag":628,"props":2106,"children":2107},{"class":641},[2108],{"type":23,"value":710},{"type":17,"tag":628,"props":2110,"children":2111},{"class":685},[2112],{"type":23,"value":715},{"type":17,"tag":628,"props":2114,"children":2115},{"class":641},[2116],{"type":23,"value":2117},".tf ",{"type":17,"tag":628,"props":2119,"children":2120},{"class":635},[2121],{"type":23,"value":725},{"type":17,"tag":628,"props":2123,"children":2124},{"class":641},[2125],{"type":23,"value":644},{"type":17,"tag":628,"props":2127,"children":2128},{"class":685},[2129],{"type":23,"value":2130},"1.0\n",{"type":17,"tag":628,"props":2132,"children":2133},{"class":630,"line":964},[2134],{"type":17,"tag":628,"props":2135,"children":2136},{},[2137],{"type":23,"value":664},{"type":17,"tag":628,"props":2139,"children":2140},{"class":630,"line":998},[2141,2145],{"type":17,"tag":628,"props":2142,"children":2143},{"class":641},[2144],{"type":23,"value":710},{"type":17,"tag":628,"props":2146,"children":2147},{"class":1865},[2148],{"type":23,"value":2149},"### Matrix\n",{"type":17,"tag":628,"props":2151,"children":2152},{"class":630,"line":1006},[2153],{"type":17,"tag":628,"props":2154,"children":2155},{},[2156],{"type":23,"value":664},{"type":17,"tag":628,"props":2158,"children":2159},{"class":630,"line":1032},[2160,2164,2168,2172,2176,2180],{"type":17,"tag":628,"props":2161,"children":2162},{"class":641},[2163],{"type":23,"value":710},{"type":17,"tag":628,"props":2165,"children":2166},{"class":685},[2167],{"type":23,"value":715},{"type":17,"tag":628,"props":2169,"children":2170},{"class":641},[2171],{"type":23,"value":720},{"type":17,"tag":628,"props":2173,"children":2174},{"class":635},[2175],{"type":23,"value":725},{"type":17,"tag":628,"props":2177,"children":2178},{"class":641},[2179],{"type":23,"value":644},{"type":17,"tag":628,"props":2181,"children":2182},{"class":685},[2183],{"type":23,"value":2184},"1\n",{"type":17,"tag":628,"props":2186,"children":2187},{"class":630,"line":1040},[2188,2192,2196,2200,2204,2208],{"type":17,"tag":628,"props":2189,"children":2190},{"class":641},[2191],{"type":23,"value":710},{"type":17,"tag":628,"props":2193,"children":2194},{"class":685},[2195],{"type":23,"value":715},{"type":17,"tag":628,"props":2197,"children":2198},{"class":641},[2199],{"type":23,"value":747},{"type":17,"tag":628,"props":2201,"children":2202},{"class":635},[2203],{"type":23,"value":725},{"type":17,"tag":628,"props":2205,"children":2206},{"class":641},[2207],{"type":23,"value":644},{"type":17,"tag":628,"props":2209,"children":2210},{"class":685},[2211],{"type":23,"value":2212},"6\n",{"type":17,"tag":628,"props":2214,"children":2215},{"class":630,"line":1082},[2216,2220,2224,2228,2232,2236],{"type":17,"tag":628,"props":2217,"children":2218},{"class":641},[2219],{"type":23,"value":710},{"type":17,"tag":628,"props":2221,"children":2222},{"class":685},[2223],{"type":23,"value":715},{"type":17,"tag":628,"props":2225,"children":2226},{"class":641},[2227],{"type":23,"value":773},{"type":17,"tag":628,"props":2229,"children":2230},{"class":635},[2231],{"type":23,"value":725},{"type":17,"tag":628,"props":2233,"children":2234},{"class":641},[2235],{"type":23,"value":644},{"type":17,"tag":628,"props":2237,"children":2238},{"class":685},[2239],{"type":23,"value":2184},{"type":17,"tag":628,"props":2241,"children":2242},{"class":630,"line":1122},[2243,2247,2251,2255,2259,2263],{"type":17,"tag":628,"props":2244,"children":2245},{"class":641},[2246],{"type":23,"value":710},{"type":17,"tag":628,"props":2248,"children":2249},{"class":685},[2250],{"type":23,"value":715},{"type":17,"tag":628,"props":2252,"children":2253},{"class":641},[2254],{"type":23,"value":807},{"type":17,"tag":628,"props":2256,"children":2257},{"class":635},[2258],{"type":23,"value":725},{"type":17,"tag":628,"props":2260,"children":2261},{"class":641},[2262],{"type":23,"value":644},{"type":17,"tag":628,"props":2264,"children":2265},{"class":685},[2266],{"type":23,"value":2184},{"type":17,"tag":628,"props":2268,"children":2269},{"class":630,"line":1216},[2270,2274,2278,2282,2286,2290],{"type":17,"tag":628,"props":2271,"children":2272},{"class":641},[2273],{"type":23,"value":710},{"type":17,"tag":628,"props":2275,"children":2276},{"class":685},[2277],{"type":23,"value":715},{"type":17,"tag":628,"props":2279,"children":2280},{"class":641},[2281],{"type":23,"value":833},{"type":17,"tag":628,"props":2283,"children":2284},{"class":635},[2285],{"type":23,"value":725},{"type":17,"tag":628,"props":2287,"children":2288},{"class":641},[2289],{"type":23,"value":644},{"type":17,"tag":628,"props":2291,"children":2292},{"class":685},[2293],{"type":23,"value":2294},"0.1\n",{"type":17,"tag":628,"props":2296,"children":2297},{"class":630,"line":1224},[2298],{"type":17,"tag":628,"props":2299,"children":2300},{},[2301],{"type":23,"value":664},{"type":17,"tag":628,"props":2303,"children":2304},{"class":630,"line":1242},[2305,2309],{"type":17,"tag":628,"props":2306,"children":2307},{"class":641},[2308],{"type":23,"value":710},{"type":17,"tag":628,"props":2310,"children":2311},{"class":1865},[2312],{"type":23,"value":2313},"### Constraint\n",{"type":17,"tag":628,"props":2315,"children":2316},{"class":630,"line":1250},[2317,2321,2325,2330,2334,2339,2343,2348,2352],{"type":17,"tag":628,"props":2318,"children":2319},{"class":641},[2320],{"type":23,"value":710},{"type":17,"tag":628,"props":2322,"children":2323},{"class":685},[2324],{"type":23,"value":715},{"type":17,"tag":628,"props":2326,"children":2327},{"class":641},[2328],{"type":23,"value":2329},".u_min ",{"type":17,"tag":628,"props":2331,"children":2332},{"class":635},[2333],{"type":23,"value":725},{"type":17,"tag":628,"props":2335,"children":2336},{"class":641},[2337],{"type":23,"value":2338}," [ ",{"type":17,"tag":628,"props":2340,"children":2341},{"class":685},[2342],{"type":23,"value":881},{"type":17,"tag":628,"props":2344,"children":2345},{"class":641},[2346],{"type":23,"value":2347},",  ",{"type":17,"tag":628,"props":2349,"children":2350},{"class":685},[2351],{"type":23,"value":881},{"type":17,"tag":628,"props":2353,"children":2354},{"class":641},[2355],{"type":23,"value":886},{"type":17,"tag":628,"props":2357,"children":2358},{"class":630,"line":1276},[2359,2363,2367,2372,2376,2380,2384,2388,2393],{"type":17,"tag":628,"props":2360,"children":2361},{"class":641},[2362],{"type":23,"value":710},{"type":17,"tag":628,"props":2364,"children":2365},{"class":685},[2366],{"type":23,"value":715},{"type":17,"tag":628,"props":2368,"children":2369},{"class":641},[2370],{"type":23,"value":2371},".u_max ",{"type":17,"tag":628,"props":2373,"children":2374},{"class":635},[2375],{"type":23,"value":725},{"type":17,"tag":628,"props":2377,"children":2378},{"class":641},[2379],{"type":23,"value":2338},{"type":17,"tag":628,"props":2381,"children":2382},{"class":685},[2383],{"type":23,"value":1367},{"type":17,"tag":628,"props":2385,"children":2386},{"class":641},[2387],{"type":23,"value":2347},{"type":17,"tag":628,"props":2389,"children":2390},{"class":685},[2391],{"type":23,"value":2392},"1.57",{"type":17,"tag":628,"props":2394,"children":2395},{"class":641},[2396],{"type":23,"value":886},{"type":17,"tag":628,"props":2398,"children":2399},{"class":630,"line":1284},[2400,2404,2408,2413,2417,2422,2427,2432,2436],{"type":17,"tag":628,"props":2401,"children":2402},{"class":641},[2403],{"type":23,"value":710},{"type":17,"tag":628,"props":2405,"children":2406},{"class":685},[2407],{"type":23,"value":715},{"type":17,"tag":628,"props":2409,"children":2410},{"class":641},[2411],{"type":23,"value":2412},".u_dummy ",{"type":17,"tag":628,"props":2414,"children":2415},{"class":635},[2416],{"type":23,"value":725},{"type":17,"tag":628,"props":2418,"children":2419},{"class":641},[2420],{"type":23,"value":2421}," [",{"type":17,"tag":628,"props":2423,"children":2424},{"class":685},[2425],{"type":23,"value":2426},"0.01",{"type":17,"tag":628,"props":2428,"children":2429},{"class":641},[2430],{"type":23,"value":2431},", ",{"type":17,"tag":628,"props":2433,"children":2434},{"class":685},[2435],{"type":23,"value":2426},{"type":17,"tag":628,"props":2437,"children":2438},{"class":641},[2439],{"type":23,"value":886},{"type":17,"tag":628,"props":2441,"children":2442},{"class":630,"line":1440},[2443],{"type":17,"tag":628,"props":2444,"children":2445},{},[2446],{"type":23,"value":664},{"type":17,"tag":628,"props":2448,"children":2449},{"class":630,"line":1560},[2450,2454],{"type":17,"tag":628,"props":2451,"children":2452},{"class":641},[2453],{"type":23,"value":710},{"type":17,"tag":628,"props":2455,"children":2456},{"class":1865},[2457],{"type":23,"value":2458},"### Initialize matrix solution\n",{"type":17,"tag":628,"props":2460,"children":2461},{"class":630,"line":1568},[2462,2466,2470,2475,2479,2484,2488,2493,2497],{"type":17,"tag":628,"props":2463,"children":2464},{"class":641},[2465],{"type":23,"value":710},{"type":17,"tag":628,"props":2467,"children":2468},{"class":685},[2469],{"type":23,"value":715},{"type":17,"tag":628,"props":2471,"children":2472},{"class":641},[2473],{"type":23,"value":2474},".dU ",{"type":17,"tag":628,"props":2476,"children":2477},{"class":635},[2478],{"type":23,"value":725},{"type":17,"tag":628,"props":2480,"children":2481},{"class":641},[2482],{"type":23,"value":2483}," np.zeros((",{"type":17,"tag":628,"props":2485,"children":2486},{"class":685},[2487],{"type":23,"value":715},{"type":17,"tag":628,"props":2489,"children":2490},{"class":641},[2491],{"type":23,"value":2492},".u_dim, ",{"type":17,"tag":628,"props":2494,"children":2495},{"class":685},[2496],{"type":23,"value":715},{"type":17,"tag":628,"props":2498,"children":2499},{"class":641},[2500],{"type":23,"value":2501},".pred_horizons))\n",{"type":17,"tag":628,"props":2503,"children":2504},{"class":630,"line":1585},[2505],{"type":17,"tag":628,"props":2506,"children":2507},{},[2508],{"type":23,"value":664},{"type":17,"tag":628,"props":2510,"children":2511},{"class":630,"line":1593},[2512,2516],{"type":17,"tag":628,"props":2513,"children":2514},{"class":641},[2515],{"type":23,"value":710},{"type":17,"tag":628,"props":2517,"children":2518},{"class":1865},[2519],{"type":23,"value":2520},"### Reference point\n",{"type":17,"tag":628,"props":2522,"children":2523},{"class":630,"line":1619},[2524,2528,2532,2537,2541,2545,2550,2554,2558,2562,2567],{"type":17,"tag":628,"props":2525,"children":2526},{"class":641},[2527],{"type":23,"value":710},{"type":17,"tag":628,"props":2529,"children":2530},{"class":685},[2531],{"type":23,"value":715},{"type":17,"tag":628,"props":2533,"children":2534},{"class":641},[2535],{"type":23,"value":2536},".X_r ",{"type":17,"tag":628,"props":2538,"children":2539},{"class":635},[2540],{"type":23,"value":725},{"type":17,"tag":628,"props":2542,"children":2543},{"class":641},[2544],{"type":23,"value":2421},{"type":17,"tag":628,"props":2546,"children":2547},{"class":685},[2548],{"type":23,"value":2549},"3",{"type":17,"tag":628,"props":2551,"children":2552},{"class":641},[2553],{"type":23,"value":2431},{"type":17,"tag":628,"props":2555,"children":2556},{"class":685},[2557],{"type":23,"value":1367},{"type":17,"tag":628,"props":2559,"children":2560},{"class":641},[2561],{"type":23,"value":2431},{"type":17,"tag":628,"props":2563,"children":2564},{"class":685},[2565],{"type":23,"value":2566},"0.0",{"type":17,"tag":628,"props":2568,"children":2569},{"class":641},[2570],{"type":23,"value":886},{"type":17,"tag":628,"props":2572,"children":2573},{"class":630,"line":1663},[2574,2578,2582,2587,2591,2595,2599,2603,2607],{"type":17,"tag":628,"props":2575,"children":2576},{"class":641},[2577],{"type":23,"value":710},{"type":17,"tag":628,"props":2579,"children":2580},{"class":685},[2581],{"type":23,"value":715},{"type":17,"tag":628,"props":2583,"children":2584},{"class":641},[2585],{"type":23,"value":2586},".U_r ",{"type":17,"tag":628,"props":2588,"children":2589},{"class":635},[2590],{"type":23,"value":725},{"type":17,"tag":628,"props":2592,"children":2593},{"class":641},[2594],{"type":23,"value":2421},{"type":17,"tag":628,"props":2596,"children":2597},{"class":685},[2598],{"type":23,"value":881},{"type":17,"tag":628,"props":2600,"children":2601},{"class":641},[2602],{"type":23,"value":2431},{"type":17,"tag":628,"props":2604,"children":2605},{"class":685},[2606],{"type":23,"value":881},{"type":17,"tag":628,"props":2608,"children":2609},{"class":641},[2610],{"type":23,"value":2611},"]",{"type":17,"tag":26,"props":2613,"children":2614},{},[2615],{"type":23,"value":2616},"These are just for tuning parameters and initialize parameters, let's focus on CGMRES method. As the expression above at equation (1).\nLet's denote that",{"type":17,"tag":613,"props":2618,"children":2621},{"className":2619,"code":2620,"language":618,"meta":7},[616],"X = np.zeros((x_dim, pred_horizons+1))      ## State for N-prediction+1\nU = np.zeros((u_dim, pred_horizons))        ## Input Control for N-prediction\nLambda = np.zeros((x_dim, pred_horizons+1)) ## Costate vector for N-prediction+1\ndt = 0.01                                   ## Sampling Time\n",[2622],{"type":17,"tag":621,"props":2623,"children":2624},{},[2625],{"type":17,"tag":613,"props":2626,"children":2627},{"__ignoreMap":7},[2628,2663,2685,2719],{"type":17,"tag":628,"props":2629,"children":2630},{"class":630,"line":631},[2631,2636,2640,2645,2649,2653,2658],{"type":17,"tag":628,"props":2632,"children":2633},{"class":641},[2634],{"type":23,"value":2635},"X ",{"type":17,"tag":628,"props":2637,"children":2638},{"class":635},[2639],{"type":23,"value":725},{"type":17,"tag":628,"props":2641,"children":2642},{"class":641},[2643],{"type":23,"value":2644}," np.zeros((x_dim, pred_horizons",{"type":17,"tag":628,"props":2646,"children":2647},{"class":635},[2648],{"type":23,"value":1191},{"type":17,"tag":628,"props":2650,"children":2651},{"class":685},[2652],{"type":23,"value":991},{"type":17,"tag":628,"props":2654,"children":2655},{"class":641},[2656],{"type":23,"value":2657},"))      ",{"type":17,"tag":628,"props":2659,"children":2660},{"class":1865},[2661],{"type":23,"value":2662},"## State for N-prediction+1\n",{"type":17,"tag":628,"props":2664,"children":2665},{"class":630,"line":658},[2666,2671,2675,2680],{"type":17,"tag":628,"props":2667,"children":2668},{"class":641},[2669],{"type":23,"value":2670},"U ",{"type":17,"tag":628,"props":2672,"children":2673},{"class":635},[2674],{"type":23,"value":725},{"type":17,"tag":628,"props":2676,"children":2677},{"class":641},[2678],{"type":23,"value":2679}," np.zeros((u_dim, pred_horizons))        ",{"type":17,"tag":628,"props":2681,"children":2682},{"class":1865},[2683],{"type":23,"value":2684},"## Input Control for N-prediction\n",{"type":17,"tag":628,"props":2686,"children":2687},{"class":630,"line":667},[2688,2693,2697,2701,2705,2709,2714],{"type":17,"tag":628,"props":2689,"children":2690},{"class":641},[2691],{"type":23,"value":2692},"Lambda ",{"type":17,"tag":628,"props":2694,"children":2695},{"class":635},[2696],{"type":23,"value":725},{"type":17,"tag":628,"props":2698,"children":2699},{"class":641},[2700],{"type":23,"value":2644},{"type":17,"tag":628,"props":2702,"children":2703},{"class":635},[2704],{"type":23,"value":1191},{"type":17,"tag":628,"props":2706,"children":2707},{"class":685},[2708],{"type":23,"value":991},{"type":17,"tag":628,"props":2710,"children":2711},{"class":641},[2712],{"type":23,"value":2713},")) ",{"type":17,"tag":628,"props":2715,"children":2716},{"class":1865},[2717],{"type":23,"value":2718},"## Costate vector for N-prediction+1\n",{"type":17,"tag":628,"props":2720,"children":2721},{"class":630,"line":696},[2722,2727,2731,2735,2739,2744],{"type":17,"tag":628,"props":2723,"children":2724},{"class":641},[2725],{"type":23,"value":2726},"dt ",{"type":17,"tag":628,"props":2728,"children":2729},{"class":635},[2730],{"type":23,"value":725},{"type":17,"tag":628,"props":2732,"children":2733},{"class":641},[2734],{"type":23,"value":644},{"type":17,"tag":628,"props":2736,"children":2737},{"class":685},[2738],{"type":23,"value":2426},{"type":17,"tag":628,"props":2740,"children":2741},{"class":641},[2742],{"type":23,"value":2743},"                                   ",{"type":17,"tag":628,"props":2745,"children":2746},{"class":1865},[2747],{"type":23,"value":2748},"## Sampling Time",{"type":17,"tag":26,"props":2750,"children":2751},{},[2752],{"type":23,"value":2753},"Then, we can perform equation (1) as",{"type":17,"tag":613,"props":2755,"children":2758},{"className":2756,"code":2757,"language":618,"meta":7},[616],"def calc_state(self, X, U, dt):\n\n        for i in range(self.pred_horizons):\n            x_dot, y_dot, yaw_dot = self.robot_model.forward_kinematic(X[2, i], U[0, i], U[1, i])\n            \n            X[0, i+1] = X[0, i] + x_dot * dt\n            X[1, i+1] = X[1, i] + y_dot * dt\n            X[2, i+1] = X[2, i] + yaw_dot * dt\n\n        return X\n",[2759],{"type":17,"tag":621,"props":2760,"children":2761},{},[2762],{"type":17,"tag":613,"props":2763,"children":2764},{"__ignoreMap":7},[2765,2786,2793,2837,2888,2896,2962,3022,3082,3089],{"type":17,"tag":628,"props":2766,"children":2767},{"class":630,"line":631},[2768,2772,2776,2781],{"type":17,"tag":628,"props":2769,"children":2770},{"class":635},[2771],{"type":23,"value":678},{"type":17,"tag":628,"props":2773,"children":2774},{"class":641},[2775],{"type":23,"value":644},{"type":17,"tag":628,"props":2777,"children":2778},{"class":647},[2779],{"type":23,"value":2780},"calc_state",{"type":17,"tag":628,"props":2782,"children":2783},{"class":641},[2784],{"type":23,"value":2785},"(self, X, U, dt):\n",{"type":17,"tag":628,"props":2787,"children":2788},{"class":630,"line":658},[2789],{"type":17,"tag":628,"props":2790,"children":2791},{},[2792],{"type":23,"value":664},{"type":17,"tag":628,"props":2794,"children":2795},{"class":630,"line":667},[2796,2800,2805,2810,2815,2819,2824,2828,2832],{"type":17,"tag":628,"props":2797,"children":2798},{"class":641},[2799],{"type":23,"value":710},{"type":17,"tag":628,"props":2801,"children":2802},{"class":635},[2803],{"type":23,"value":2804},"for",{"type":17,"tag":628,"props":2806,"children":2807},{"class":641},[2808],{"type":23,"value":2809}," i ",{"type":17,"tag":628,"props":2811,"children":2812},{"class":635},[2813],{"type":23,"value":2814},"in",{"type":17,"tag":628,"props":2816,"children":2817},{"class":641},[2818],{"type":23,"value":644},{"type":17,"tag":628,"props":2820,"children":2821},{"class":685},[2822],{"type":23,"value":2823},"range",{"type":17,"tag":628,"props":2825,"children":2826},{"class":641},[2827],{"type":23,"value":1401},{"type":17,"tag":628,"props":2829,"children":2830},{"class":685},[2831],{"type":23,"value":715},{"type":17,"tag":628,"props":2833,"children":2834},{"class":641},[2835],{"type":23,"value":2836},".pred_horizons):\n",{"type":17,"tag":628,"props":2838,"children":2839},{"class":630,"line":696},[2840,2845,2849,2853,2857,2862,2866,2871,2875,2879,2883],{"type":17,"tag":628,"props":2841,"children":2842},{"class":641},[2843],{"type":23,"value":2844},"            x_dot, y_dot, yaw_dot ",{"type":17,"tag":628,"props":2846,"children":2847},{"class":635},[2848],{"type":23,"value":725},{"type":17,"tag":628,"props":2850,"children":2851},{"class":641},[2852],{"type":23,"value":644},{"type":17,"tag":628,"props":2854,"children":2855},{"class":685},[2856],{"type":23,"value":715},{"type":17,"tag":628,"props":2858,"children":2859},{"class":641},[2860],{"type":23,"value":2861},".robot_model.forward_kinematic(X[",{"type":17,"tag":628,"props":2863,"children":2864},{"class":685},[2865],{"type":23,"value":1367},{"type":17,"tag":628,"props":2867,"children":2868},{"class":641},[2869],{"type":23,"value":2870},", i], U[",{"type":17,"tag":628,"props":2872,"children":2873},{"class":685},[2874],{"type":23,"value":881},{"type":17,"tag":628,"props":2876,"children":2877},{"class":641},[2878],{"type":23,"value":2870},{"type":17,"tag":628,"props":2880,"children":2881},{"class":685},[2882],{"type":23,"value":991},{"type":17,"tag":628,"props":2884,"children":2885},{"class":641},[2886],{"type":23,"value":2887},", i])\n",{"type":17,"tag":628,"props":2889,"children":2890},{"class":630,"line":704},[2891],{"type":17,"tag":628,"props":2892,"children":2893},{"class":641},[2894],{"type":23,"value":2895},"            \n",{"type":17,"tag":628,"props":2897,"children":2898},{"class":630,"line":733},[2899,2904,2908,2913,2917,2921,2926,2930,2935,2939,2944,2948,2953,2957],{"type":17,"tag":628,"props":2900,"children":2901},{"class":641},[2902],{"type":23,"value":2903},"            X[",{"type":17,"tag":628,"props":2905,"children":2906},{"class":685},[2907],{"type":23,"value":881},{"type":17,"tag":628,"props":2909,"children":2910},{"class":641},[2911],{"type":23,"value":2912},", i",{"type":17,"tag":628,"props":2914,"children":2915},{"class":635},[2916],{"type":23,"value":1191},{"type":17,"tag":628,"props":2918,"children":2919},{"class":685},[2920],{"type":23,"value":991},{"type":17,"tag":628,"props":2922,"children":2923},{"class":641},[2924],{"type":23,"value":2925},"] ",{"type":17,"tag":628,"props":2927,"children":2928},{"class":635},[2929],{"type":23,"value":725},{"type":17,"tag":628,"props":2931,"children":2932},{"class":641},[2933],{"type":23,"value":2934}," X[",{"type":17,"tag":628,"props":2936,"children":2937},{"class":685},[2938],{"type":23,"value":881},{"type":17,"tag":628,"props":2940,"children":2941},{"class":641},[2942],{"type":23,"value":2943},", i] ",{"type":17,"tag":628,"props":2945,"children":2946},{"class":635},[2947],{"type":23,"value":1191},{"type":17,"tag":628,"props":2949,"children":2950},{"class":641},[2951],{"type":23,"value":2952}," x_dot ",{"type":17,"tag":628,"props":2954,"children":2955},{"class":635},[2956],{"type":23,"value":1070},{"type":17,"tag":628,"props":2958,"children":2959},{"class":641},[2960],{"type":23,"value":2961}," dt\n",{"type":17,"tag":628,"props":2963,"children":2964},{"class":630,"line":759},[2965,2969,2973,2977,2981,2985,2989,2993,2997,3001,3005,3009,3014,3018],{"type":17,"tag":628,"props":2966,"children":2967},{"class":641},[2968],{"type":23,"value":2903},{"type":17,"tag":628,"props":2970,"children":2971},{"class":685},[2972],{"type":23,"value":991},{"type":17,"tag":628,"props":2974,"children":2975},{"class":641},[2976],{"type":23,"value":2912},{"type":17,"tag":628,"props":2978,"children":2979},{"class":635},[2980],{"type":23,"value":1191},{"type":17,"tag":628,"props":2982,"children":2983},{"class":685},[2984],{"type":23,"value":991},{"type":17,"tag":628,"props":2986,"children":2987},{"class":641},[2988],{"type":23,"value":2925},{"type":17,"tag":628,"props":2990,"children":2991},{"class":635},[2992],{"type":23,"value":725},{"type":17,"tag":628,"props":2994,"children":2995},{"class":641},[2996],{"type":23,"value":2934},{"type":17,"tag":628,"props":2998,"children":2999},{"class":685},[3000],{"type":23,"value":991},{"type":17,"tag":628,"props":3002,"children":3003},{"class":641},[3004],{"type":23,"value":2943},{"type":17,"tag":628,"props":3006,"children":3007},{"class":635},[3008],{"type":23,"value":1191},{"type":17,"tag":628,"props":3010,"children":3011},{"class":641},[3012],{"type":23,"value":3013}," y_dot ",{"type":17,"tag":628,"props":3015,"children":3016},{"class":635},[3017],{"type":23,"value":1070},{"type":17,"tag":628,"props":3019,"children":3020},{"class":641},[3021],{"type":23,"value":2961},{"type":17,"tag":628,"props":3023,"children":3024},{"class":630,"line":785},[3025,3029,3033,3037,3041,3045,3049,3053,3057,3061,3065,3069,3074,3078],{"type":17,"tag":628,"props":3026,"children":3027},{"class":641},[3028],{"type":23,"value":2903},{"type":17,"tag":628,"props":3030,"children":3031},{"class":685},[3032],{"type":23,"value":1367},{"type":17,"tag":628,"props":3034,"children":3035},{"class":641},[3036],{"type":23,"value":2912},{"type":17,"tag":628,"props":3038,"children":3039},{"class":635},[3040],{"type":23,"value":1191},{"type":17,"tag":628,"props":3042,"children":3043},{"class":685},[3044],{"type":23,"value":991},{"type":17,"tag":628,"props":3046,"children":3047},{"class":641},[3048],{"type":23,"value":2925},{"type":17,"tag":628,"props":3050,"children":3051},{"class":635},[3052],{"type":23,"value":725},{"type":17,"tag":628,"props":3054,"children":3055},{"class":641},[3056],{"type":23,"value":2934},{"type":17,"tag":628,"props":3058,"children":3059},{"class":685},[3060],{"type":23,"value":1367},{"type":17,"tag":628,"props":3062,"children":3063},{"class":641},[3064],{"type":23,"value":2943},{"type":17,"tag":628,"props":3066,"children":3067},{"class":635},[3068],{"type":23,"value":1191},{"type":17,"tag":628,"props":3070,"children":3071},{"class":641},[3072],{"type":23,"value":3073}," yaw_dot ",{"type":17,"tag":628,"props":3075,"children":3076},{"class":635},[3077],{"type":23,"value":1070},{"type":17,"tag":628,"props":3079,"children":3080},{"class":641},[3081],{"type":23,"value":2961},{"type":17,"tag":628,"props":3083,"children":3084},{"class":630,"line":793},[3085],{"type":17,"tag":628,"props":3086,"children":3087},{},[3088],{"type":23,"value":664},{"type":17,"tag":628,"props":3090,"children":3091},{"class":630,"line":819},[3092,3096,3100],{"type":17,"tag":628,"props":3093,"children":3094},{"class":641},[3095],{"type":23,"value":710},{"type":17,"tag":628,"props":3097,"children":3098},{"class":635},[3099],{"type":23,"value":1234},{"type":17,"tag":628,"props":3101,"children":3102},{"class":641},[3103],{"type":23,"value":3104}," X",{"type":17,"tag":26,"props":3106,"children":3107},{},[3108],{"type":23,"value":3109},"Next we calculating costate, we are going in backward direction",{"type":17,"tag":613,"props":3111,"children":3114},{"className":3112,"code":3113,"language":618,"meta":7},[616],"def calc_costate(self, X, U, Lambda, dt):\n\n        x_N, y_N, yaw_N = self.hjb_equation.dphidx(X[0, -1], X[1, -1], X[2, -1],\n                                                   self.X_r[0], self.X_r[1], self.X_r[2])\n        Lambda[0, -1] = x_N\n        Lambda[1, -1] = y_N\n        Lambda[2, -1] = yaw_N\n\n\n        for i in reversed(range(1, self.pred_horizons)):\n\n            dhdx1, dhdx2, dhdx3 = self.hjb_equation.dhdx(\n                X[0, i], X[1, i], X[2, i],\n                self.X_r[0], self.X_r[1], self.X_r[2],\n                U[0, i], Lambda[0, i+1], Lambda[1, i+1]\n            )\n\n            Lambda[0, i] = Lambda[0, i+1] + dhdx1 * dt\n            Lambda[1, i] = Lambda[1, i+1] + dhdx2 * dt\n            Lambda[2, i] = Lambda[2, i+1] + dhdx3 * dt\n    \n\n        return Lambda\n",[3115],{"type":17,"tag":621,"props":3116,"children":3117},{},[3118],{"type":17,"tag":613,"props":3119,"children":3120},{"__ignoreMap":7},[3121,3142,3149,3236,3295,3332,3368,3404,3411,3418,3475,3482,3507,3541,3597,3655,3663,3670,3732,3792,3852,3860,3867],{"type":17,"tag":628,"props":3122,"children":3123},{"class":630,"line":631},[3124,3128,3132,3137],{"type":17,"tag":628,"props":3125,"children":3126},{"class":635},[3127],{"type":23,"value":678},{"type":17,"tag":628,"props":3129,"children":3130},{"class":641},[3131],{"type":23,"value":644},{"type":17,"tag":628,"props":3133,"children":3134},{"class":647},[3135],{"type":23,"value":3136},"calc_costate",{"type":17,"tag":628,"props":3138,"children":3139},{"class":641},[3140],{"type":23,"value":3141},"(self, X, U, Lambda, dt):\n",{"type":17,"tag":628,"props":3143,"children":3144},{"class":630,"line":658},[3145],{"type":17,"tag":628,"props":3146,"children":3147},{},[3148],{"type":23,"value":664},{"type":17,"tag":628,"props":3150,"children":3151},{"class":630,"line":667},[3152,3157,3161,3165,3169,3174,3178,3182,3186,3190,3195,3199,3203,3207,3211,3215,3219,3223,3227,3231],{"type":17,"tag":628,"props":3153,"children":3154},{"class":641},[3155],{"type":23,"value":3156},"        x_N, y_N, yaw_N ",{"type":17,"tag":628,"props":3158,"children":3159},{"class":635},[3160],{"type":23,"value":725},{"type":17,"tag":628,"props":3162,"children":3163},{"class":641},[3164],{"type":23,"value":644},{"type":17,"tag":628,"props":3166,"children":3167},{"class":685},[3168],{"type":23,"value":715},{"type":17,"tag":628,"props":3170,"children":3171},{"class":641},[3172],{"type":23,"value":3173},".hjb_equation.dphidx(X[",{"type":17,"tag":628,"props":3175,"children":3176},{"class":685},[3177],{"type":23,"value":881},{"type":17,"tag":628,"props":3179,"children":3180},{"class":641},[3181],{"type":23,"value":2431},{"type":17,"tag":628,"props":3183,"children":3184},{"class":635},[3185],{"type":23,"value":1060},{"type":17,"tag":628,"props":3187,"children":3188},{"class":685},[3189],{"type":23,"value":991},{"type":17,"tag":628,"props":3191,"children":3192},{"class":641},[3193],{"type":23,"value":3194},"], X[",{"type":17,"tag":628,"props":3196,"children":3197},{"class":685},[3198],{"type":23,"value":991},{"type":17,"tag":628,"props":3200,"children":3201},{"class":641},[3202],{"type":23,"value":2431},{"type":17,"tag":628,"props":3204,"children":3205},{"class":635},[3206],{"type":23,"value":1060},{"type":17,"tag":628,"props":3208,"children":3209},{"class":685},[3210],{"type":23,"value":991},{"type":17,"tag":628,"props":3212,"children":3213},{"class":641},[3214],{"type":23,"value":3194},{"type":17,"tag":628,"props":3216,"children":3217},{"class":685},[3218],{"type":23,"value":1367},{"type":17,"tag":628,"props":3220,"children":3221},{"class":641},[3222],{"type":23,"value":2431},{"type":17,"tag":628,"props":3224,"children":3225},{"class":635},[3226],{"type":23,"value":1060},{"type":17,"tag":628,"props":3228,"children":3229},{"class":685},[3230],{"type":23,"value":991},{"type":17,"tag":628,"props":3232,"children":3233},{"class":641},[3234],{"type":23,"value":3235},"],\n",{"type":17,"tag":628,"props":3237,"children":3238},{"class":630,"line":696},[3239,3244,3248,3253,3257,3262,3266,3270,3274,3278,3282,3286,3290],{"type":17,"tag":628,"props":3240,"children":3241},{"class":641},[3242],{"type":23,"value":3243},"                                                   ",{"type":17,"tag":628,"props":3245,"children":3246},{"class":685},[3247],{"type":23,"value":715},{"type":17,"tag":628,"props":3249,"children":3250},{"class":641},[3251],{"type":23,"value":3252},".X_r[",{"type":17,"tag":628,"props":3254,"children":3255},{"class":685},[3256],{"type":23,"value":881},{"type":17,"tag":628,"props":3258,"children":3259},{"class":641},[3260],{"type":23,"value":3261},"], ",{"type":17,"tag":628,"props":3263,"children":3264},{"class":685},[3265],{"type":23,"value":715},{"type":17,"tag":628,"props":3267,"children":3268},{"class":641},[3269],{"type":23,"value":3252},{"type":17,"tag":628,"props":3271,"children":3272},{"class":685},[3273],{"type":23,"value":991},{"type":17,"tag":628,"props":3275,"children":3276},{"class":641},[3277],{"type":23,"value":3261},{"type":17,"tag":628,"props":3279,"children":3280},{"class":685},[3281],{"type":23,"value":715},{"type":17,"tag":628,"props":3283,"children":3284},{"class":641},[3285],{"type":23,"value":3252},{"type":17,"tag":628,"props":3287,"children":3288},{"class":685},[3289],{"type":23,"value":1367},{"type":17,"tag":628,"props":3291,"children":3292},{"class":641},[3293],{"type":23,"value":3294},"])\n",{"type":17,"tag":628,"props":3296,"children":3297},{"class":630,"line":704},[3298,3303,3307,3311,3315,3319,3323,3327],{"type":17,"tag":628,"props":3299,"children":3300},{"class":641},[3301],{"type":23,"value":3302},"        Lambda[",{"type":17,"tag":628,"props":3304,"children":3305},{"class":685},[3306],{"type":23,"value":881},{"type":17,"tag":628,"props":3308,"children":3309},{"class":641},[3310],{"type":23,"value":2431},{"type":17,"tag":628,"props":3312,"children":3313},{"class":635},[3314],{"type":23,"value":1060},{"type":17,"tag":628,"props":3316,"children":3317},{"class":685},[3318],{"type":23,"value":991},{"type":17,"tag":628,"props":3320,"children":3321},{"class":641},[3322],{"type":23,"value":2925},{"type":17,"tag":628,"props":3324,"children":3325},{"class":635},[3326],{"type":23,"value":725},{"type":17,"tag":628,"props":3328,"children":3329},{"class":641},[3330],{"type":23,"value":3331}," x_N\n",{"type":17,"tag":628,"props":3333,"children":3334},{"class":630,"line":733},[3335,3339,3343,3347,3351,3355,3359,3363],{"type":17,"tag":628,"props":3336,"children":3337},{"class":641},[3338],{"type":23,"value":3302},{"type":17,"tag":628,"props":3340,"children":3341},{"class":685},[3342],{"type":23,"value":991},{"type":17,"tag":628,"props":3344,"children":3345},{"class":641},[3346],{"type":23,"value":2431},{"type":17,"tag":628,"props":3348,"children":3349},{"class":635},[3350],{"type":23,"value":1060},{"type":17,"tag":628,"props":3352,"children":3353},{"class":685},[3354],{"type":23,"value":991},{"type":17,"tag":628,"props":3356,"children":3357},{"class":641},[3358],{"type":23,"value":2925},{"type":17,"tag":628,"props":3360,"children":3361},{"class":635},[3362],{"type":23,"value":725},{"type":17,"tag":628,"props":3364,"children":3365},{"class":641},[3366],{"type":23,"value":3367}," y_N\n",{"type":17,"tag":628,"props":3369,"children":3370},{"class":630,"line":759},[3371,3375,3379,3383,3387,3391,3395,3399],{"type":17,"tag":628,"props":3372,"children":3373},{"class":641},[3374],{"type":23,"value":3302},{"type":17,"tag":628,"props":3376,"children":3377},{"class":685},[3378],{"type":23,"value":1367},{"type":17,"tag":628,"props":3380,"children":3381},{"class":641},[3382],{"type":23,"value":2431},{"type":17,"tag":628,"props":3384,"children":3385},{"class":635},[3386],{"type":23,"value":1060},{"type":17,"tag":628,"props":3388,"children":3389},{"class":685},[3390],{"type":23,"value":991},{"type":17,"tag":628,"props":3392,"children":3393},{"class":641},[3394],{"type":23,"value":2925},{"type":17,"tag":628,"props":3396,"children":3397},{"class":635},[3398],{"type":23,"value":725},{"type":17,"tag":628,"props":3400,"children":3401},{"class":641},[3402],{"type":23,"value":3403}," yaw_N\n",{"type":17,"tag":628,"props":3405,"children":3406},{"class":630,"line":785},[3407],{"type":17,"tag":628,"props":3408,"children":3409},{},[3410],{"type":23,"value":664},{"type":17,"tag":628,"props":3412,"children":3413},{"class":630,"line":793},[3414],{"type":17,"tag":628,"props":3415,"children":3416},{},[3417],{"type":23,"value":664},{"type":17,"tag":628,"props":3419,"children":3420},{"class":630,"line":819},[3421,3425,3429,3433,3437,3441,3446,3450,3454,3458,3462,3466,3470],{"type":17,"tag":628,"props":3422,"children":3423},{"class":641},[3424],{"type":23,"value":710},{"type":17,"tag":628,"props":3426,"children":3427},{"class":635},[3428],{"type":23,"value":2804},{"type":17,"tag":628,"props":3430,"children":3431},{"class":641},[3432],{"type":23,"value":2809},{"type":17,"tag":628,"props":3434,"children":3435},{"class":635},[3436],{"type":23,"value":2814},{"type":17,"tag":628,"props":3438,"children":3439},{"class":641},[3440],{"type":23,"value":644},{"type":17,"tag":628,"props":3442,"children":3443},{"class":685},[3444],{"type":23,"value":3445},"reversed",{"type":17,"tag":628,"props":3447,"children":3448},{"class":641},[3449],{"type":23,"value":1401},{"type":17,"tag":628,"props":3451,"children":3452},{"class":685},[3453],{"type":23,"value":2823},{"type":17,"tag":628,"props":3455,"children":3456},{"class":641},[3457],{"type":23,"value":1401},{"type":17,"tag":628,"props":3459,"children":3460},{"class":685},[3461],{"type":23,"value":991},{"type":17,"tag":628,"props":3463,"children":3464},{"class":641},[3465],{"type":23,"value":2431},{"type":17,"tag":628,"props":3467,"children":3468},{"class":685},[3469],{"type":23,"value":715},{"type":17,"tag":628,"props":3471,"children":3472},{"class":641},[3473],{"type":23,"value":3474},".pred_horizons)):\n",{"type":17,"tag":628,"props":3476,"children":3477},{"class":630,"line":845},[3478],{"type":17,"tag":628,"props":3479,"children":3480},{},[3481],{"type":23,"value":664},{"type":17,"tag":628,"props":3483,"children":3484},{"class":630,"line":853},[3485,3490,3494,3498,3502],{"type":17,"tag":628,"props":3486,"children":3487},{"class":641},[3488],{"type":23,"value":3489},"            dhdx1, dhdx2, dhdx3 ",{"type":17,"tag":628,"props":3491,"children":3492},{"class":635},[3493],{"type":23,"value":725},{"type":17,"tag":628,"props":3495,"children":3496},{"class":641},[3497],{"type":23,"value":644},{"type":17,"tag":628,"props":3499,"children":3500},{"class":685},[3501],{"type":23,"value":715},{"type":17,"tag":628,"props":3503,"children":3504},{"class":641},[3505],{"type":23,"value":3506},".hjb_equation.dhdx(\n",{"type":17,"tag":628,"props":3508,"children":3509},{"class":630,"line":889},[3510,3515,3519,3524,3528,3532,3536],{"type":17,"tag":628,"props":3511,"children":3512},{"class":641},[3513],{"type":23,"value":3514},"                X[",{"type":17,"tag":628,"props":3516,"children":3517},{"class":685},[3518],{"type":23,"value":881},{"type":17,"tag":628,"props":3520,"children":3521},{"class":641},[3522],{"type":23,"value":3523},", i], X[",{"type":17,"tag":628,"props":3525,"children":3526},{"class":685},[3527],{"type":23,"value":991},{"type":17,"tag":628,"props":3529,"children":3530},{"class":641},[3531],{"type":23,"value":3523},{"type":17,"tag":628,"props":3533,"children":3534},{"class":685},[3535],{"type":23,"value":1367},{"type":17,"tag":628,"props":3537,"children":3538},{"class":641},[3539],{"type":23,"value":3540},", i],\n",{"type":17,"tag":628,"props":3542,"children":3543},{"class":630,"line":922},[3544,3549,3553,3557,3561,3565,3569,3573,3577,3581,3585,3589,3593],{"type":17,"tag":628,"props":3545,"children":3546},{"class":641},[3547],{"type":23,"value":3548},"                ",{"type":17,"tag":628,"props":3550,"children":3551},{"class":685},[3552],{"type":23,"value":715},{"type":17,"tag":628,"props":3554,"children":3555},{"class":641},[3556],{"type":23,"value":3252},{"type":17,"tag":628,"props":3558,"children":3559},{"class":685},[3560],{"type":23,"value":881},{"type":17,"tag":628,"props":3562,"children":3563},{"class":641},[3564],{"type":23,"value":3261},{"type":17,"tag":628,"props":3566,"children":3567},{"class":685},[3568],{"type":23,"value":715},{"type":17,"tag":628,"props":3570,"children":3571},{"class":641},[3572],{"type":23,"value":3252},{"type":17,"tag":628,"props":3574,"children":3575},{"class":685},[3576],{"type":23,"value":991},{"type":17,"tag":628,"props":3578,"children":3579},{"class":641},[3580],{"type":23,"value":3261},{"type":17,"tag":628,"props":3582,"children":3583},{"class":685},[3584],{"type":23,"value":715},{"type":17,"tag":628,"props":3586,"children":3587},{"class":641},[3588],{"type":23,"value":3252},{"type":17,"tag":628,"props":3590,"children":3591},{"class":685},[3592],{"type":23,"value":1367},{"type":17,"tag":628,"props":3594,"children":3595},{"class":641},[3596],{"type":23,"value":3235},{"type":17,"tag":628,"props":3598,"children":3599},{"class":630,"line":930},[3600,3605,3609,3614,3618,3622,3626,3630,3635,3639,3643,3647,3651],{"type":17,"tag":628,"props":3601,"children":3602},{"class":641},[3603],{"type":23,"value":3604},"                U[",{"type":17,"tag":628,"props":3606,"children":3607},{"class":685},[3608],{"type":23,"value":881},{"type":17,"tag":628,"props":3610,"children":3611},{"class":641},[3612],{"type":23,"value":3613},", i], Lambda[",{"type":17,"tag":628,"props":3615,"children":3616},{"class":685},[3617],{"type":23,"value":881},{"type":17,"tag":628,"props":3619,"children":3620},{"class":641},[3621],{"type":23,"value":2912},{"type":17,"tag":628,"props":3623,"children":3624},{"class":635},[3625],{"type":23,"value":1191},{"type":17,"tag":628,"props":3627,"children":3628},{"class":685},[3629],{"type":23,"value":991},{"type":17,"tag":628,"props":3631,"children":3632},{"class":641},[3633],{"type":23,"value":3634},"], Lambda[",{"type":17,"tag":628,"props":3636,"children":3637},{"class":685},[3638],{"type":23,"value":991},{"type":17,"tag":628,"props":3640,"children":3641},{"class":641},[3642],{"type":23,"value":2912},{"type":17,"tag":628,"props":3644,"children":3645},{"class":635},[3646],{"type":23,"value":1191},{"type":17,"tag":628,"props":3648,"children":3649},{"class":685},[3650],{"type":23,"value":991},{"type":17,"tag":628,"props":3652,"children":3653},{"class":641},[3654],{"type":23,"value":886},{"type":17,"tag":628,"props":3656,"children":3657},{"class":630,"line":964},[3658],{"type":17,"tag":628,"props":3659,"children":3660},{"class":641},[3661],{"type":23,"value":3662},"            )\n",{"type":17,"tag":628,"props":3664,"children":3665},{"class":630,"line":998},[3666],{"type":17,"tag":628,"props":3667,"children":3668},{},[3669],{"type":23,"value":664},{"type":17,"tag":628,"props":3671,"children":3672},{"class":630,"line":1006},[3673,3678,3682,3686,3690,3695,3699,3703,3707,3711,3715,3719,3724,3728],{"type":17,"tag":628,"props":3674,"children":3675},{"class":641},[3676],{"type":23,"value":3677},"            Lambda[",{"type":17,"tag":628,"props":3679,"children":3680},{"class":685},[3681],{"type":23,"value":881},{"type":17,"tag":628,"props":3683,"children":3684},{"class":641},[3685],{"type":23,"value":2943},{"type":17,"tag":628,"props":3687,"children":3688},{"class":635},[3689],{"type":23,"value":725},{"type":17,"tag":628,"props":3691,"children":3692},{"class":641},[3693],{"type":23,"value":3694}," Lambda[",{"type":17,"tag":628,"props":3696,"children":3697},{"class":685},[3698],{"type":23,"value":881},{"type":17,"tag":628,"props":3700,"children":3701},{"class":641},[3702],{"type":23,"value":2912},{"type":17,"tag":628,"props":3704,"children":3705},{"class":635},[3706],{"type":23,"value":1191},{"type":17,"tag":628,"props":3708,"children":3709},{"class":685},[3710],{"type":23,"value":991},{"type":17,"tag":628,"props":3712,"children":3713},{"class":641},[3714],{"type":23,"value":2925},{"type":17,"tag":628,"props":3716,"children":3717},{"class":635},[3718],{"type":23,"value":1191},{"type":17,"tag":628,"props":3720,"children":3721},{"class":641},[3722],{"type":23,"value":3723}," dhdx1 ",{"type":17,"tag":628,"props":3725,"children":3726},{"class":635},[3727],{"type":23,"value":1070},{"type":17,"tag":628,"props":3729,"children":3730},{"class":641},[3731],{"type":23,"value":2961},{"type":17,"tag":628,"props":3733,"children":3734},{"class":630,"line":1032},[3735,3739,3743,3747,3751,3755,3759,3763,3767,3771,3775,3779,3784,3788],{"type":17,"tag":628,"props":3736,"children":3737},{"class":641},[3738],{"type":23,"value":3677},{"type":17,"tag":628,"props":3740,"children":3741},{"class":685},[3742],{"type":23,"value":991},{"type":17,"tag":628,"props":3744,"children":3745},{"class":641},[3746],{"type":23,"value":2943},{"type":17,"tag":628,"props":3748,"children":3749},{"class":635},[3750],{"type":23,"value":725},{"type":17,"tag":628,"props":3752,"children":3753},{"class":641},[3754],{"type":23,"value":3694},{"type":17,"tag":628,"props":3756,"children":3757},{"class":685},[3758],{"type":23,"value":991},{"type":17,"tag":628,"props":3760,"children":3761},{"class":641},[3762],{"type":23,"value":2912},{"type":17,"tag":628,"props":3764,"children":3765},{"class":635},[3766],{"type":23,"value":1191},{"type":17,"tag":628,"props":3768,"children":3769},{"class":685},[3770],{"type":23,"value":991},{"type":17,"tag":628,"props":3772,"children":3773},{"class":641},[3774],{"type":23,"value":2925},{"type":17,"tag":628,"props":3776,"children":3777},{"class":635},[3778],{"type":23,"value":1191},{"type":17,"tag":628,"props":3780,"children":3781},{"class":641},[3782],{"type":23,"value":3783}," dhdx2 ",{"type":17,"tag":628,"props":3785,"children":3786},{"class":635},[3787],{"type":23,"value":1070},{"type":17,"tag":628,"props":3789,"children":3790},{"class":641},[3791],{"type":23,"value":2961},{"type":17,"tag":628,"props":3793,"children":3794},{"class":630,"line":1040},[3795,3799,3803,3807,3811,3815,3819,3823,3827,3831,3835,3839,3844,3848],{"type":17,"tag":628,"props":3796,"children":3797},{"class":641},[3798],{"type":23,"value":3677},{"type":17,"tag":628,"props":3800,"children":3801},{"class":685},[3802],{"type":23,"value":1367},{"type":17,"tag":628,"props":3804,"children":3805},{"class":641},[3806],{"type":23,"value":2943},{"type":17,"tag":628,"props":3808,"children":3809},{"class":635},[3810],{"type":23,"value":725},{"type":17,"tag":628,"props":3812,"children":3813},{"class":641},[3814],{"type":23,"value":3694},{"type":17,"tag":628,"props":3816,"children":3817},{"class":685},[3818],{"type":23,"value":1367},{"type":17,"tag":628,"props":3820,"children":3821},{"class":641},[3822],{"type":23,"value":2912},{"type":17,"tag":628,"props":3824,"children":3825},{"class":635},[3826],{"type":23,"value":1191},{"type":17,"tag":628,"props":3828,"children":3829},{"class":685},[3830],{"type":23,"value":991},{"type":17,"tag":628,"props":3832,"children":3833},{"class":641},[3834],{"type":23,"value":2925},{"type":17,"tag":628,"props":3836,"children":3837},{"class":635},[3838],{"type":23,"value":1191},{"type":17,"tag":628,"props":3840,"children":3841},{"class":641},[3842],{"type":23,"value":3843}," dhdx3 ",{"type":17,"tag":628,"props":3845,"children":3846},{"class":635},[3847],{"type":23,"value":1070},{"type":17,"tag":628,"props":3849,"children":3850},{"class":641},[3851],{"type":23,"value":2961},{"type":17,"tag":628,"props":3853,"children":3854},{"class":630,"line":1082},[3855],{"type":17,"tag":628,"props":3856,"children":3857},{"class":641},[3858],{"type":23,"value":3859},"    \n",{"type":17,"tag":628,"props":3861,"children":3862},{"class":630,"line":1122},[3863],{"type":17,"tag":628,"props":3864,"children":3865},{},[3866],{"type":23,"value":664},{"type":17,"tag":628,"props":3868,"children":3869},{"class":630,"line":1216},[3870,3874,3878],{"type":17,"tag":628,"props":3871,"children":3872},{"class":641},[3873],{"type":23,"value":710},{"type":17,"tag":628,"props":3875,"children":3876},{"class":635},[3877],{"type":23,"value":1234},{"type":17,"tag":628,"props":3879,"children":3880},{"class":641},[3881],{"type":23,"value":3882}," Lambda",{"type":17,"tag":26,"props":3884,"children":3885},{},[3886],{"type":23,"value":3887},"And finally, calculating Newton F Function",{"type":17,"tag":613,"props":3889,"children":3892},{"className":3890,"code":3891,"language":618,"meta":7},[616],"def calc_f(self, X, U, Lambda, Mu, dt):\n\n        X_new = self.calc_state(X, U, dt)\n\n        Lambda_new = self.calc_costate(X_new, U, Lambda, dt)\n\n        F = np.zeros((self.u_dim, self.pred_horizons))\n\n        for i in range(self.pred_horizons):\n            dhdu1, dhdu2 = self.hjb_equation.dhdu(X_new[2, i], U[0, i], U[1, i],\n                                                  self.U_r[0], self.U_r[1],\n                                                  Lambda_new[0, i+1], Lambda_new[1, i+1], Lambda_new[2, i+1],\n                                                  Mu[0, i], Mu[1, i])\n            F[0, i] = dhdu1\n            F[1, i] = dhdu2\n            \n        F = F.T.ravel().reshape(-1, 1)\n\n        return F\n",[3893],{"type":17,"tag":621,"props":3894,"children":3895},{},[3896],{"type":17,"tag":613,"props":3897,"children":3898},{"__ignoreMap":7},[3899,3920,3927,3952,3959,3984,3991,4023,4030,4069,4118,4159,4228,4253,4278,4302,4309,4345,4352],{"type":17,"tag":628,"props":3900,"children":3901},{"class":630,"line":631},[3902,3906,3910,3915],{"type":17,"tag":628,"props":3903,"children":3904},{"class":635},[3905],{"type":23,"value":678},{"type":17,"tag":628,"props":3907,"children":3908},{"class":641},[3909],{"type":23,"value":644},{"type":17,"tag":628,"props":3911,"children":3912},{"class":647},[3913],{"type":23,"value":3914},"calc_f",{"type":17,"tag":628,"props":3916,"children":3917},{"class":641},[3918],{"type":23,"value":3919},"(self, X, U, Lambda, Mu, dt):\n",{"type":17,"tag":628,"props":3921,"children":3922},{"class":630,"line":658},[3923],{"type":17,"tag":628,"props":3924,"children":3925},{},[3926],{"type":23,"value":664},{"type":17,"tag":628,"props":3928,"children":3929},{"class":630,"line":667},[3930,3935,3939,3943,3947],{"type":17,"tag":628,"props":3931,"children":3932},{"class":641},[3933],{"type":23,"value":3934},"        X_new ",{"type":17,"tag":628,"props":3936,"children":3937},{"class":635},[3938],{"type":23,"value":725},{"type":17,"tag":628,"props":3940,"children":3941},{"class":641},[3942],{"type":23,"value":644},{"type":17,"tag":628,"props":3944,"children":3945},{"class":685},[3946],{"type":23,"value":715},{"type":17,"tag":628,"props":3948,"children":3949},{"class":641},[3950],{"type":23,"value":3951},".calc_state(X, U, dt)\n",{"type":17,"tag":628,"props":3953,"children":3954},{"class":630,"line":696},[3955],{"type":17,"tag":628,"props":3956,"children":3957},{},[3958],{"type":23,"value":664},{"type":17,"tag":628,"props":3960,"children":3961},{"class":630,"line":704},[3962,3967,3971,3975,3979],{"type":17,"tag":628,"props":3963,"children":3964},{"class":641},[3965],{"type":23,"value":3966},"        Lambda_new ",{"type":17,"tag":628,"props":3968,"children":3969},{"class":635},[3970],{"type":23,"value":725},{"type":17,"tag":628,"props":3972,"children":3973},{"class":641},[3974],{"type":23,"value":644},{"type":17,"tag":628,"props":3976,"children":3977},{"class":685},[3978],{"type":23,"value":715},{"type":17,"tag":628,"props":3980,"children":3981},{"class":641},[3982],{"type":23,"value":3983},".calc_costate(X_new, U, Lambda, dt)\n",{"type":17,"tag":628,"props":3985,"children":3986},{"class":630,"line":733},[3987],{"type":17,"tag":628,"props":3988,"children":3989},{},[3990],{"type":23,"value":664},{"type":17,"tag":628,"props":3992,"children":3993},{"class":630,"line":759},[3994,3999,4003,4007,4011,4015,4019],{"type":17,"tag":628,"props":3995,"children":3996},{"class":641},[3997],{"type":23,"value":3998},"        F ",{"type":17,"tag":628,"props":4000,"children":4001},{"class":635},[4002],{"type":23,"value":725},{"type":17,"tag":628,"props":4004,"children":4005},{"class":641},[4006],{"type":23,"value":2483},{"type":17,"tag":628,"props":4008,"children":4009},{"class":685},[4010],{"type":23,"value":715},{"type":17,"tag":628,"props":4012,"children":4013},{"class":641},[4014],{"type":23,"value":2492},{"type":17,"tag":628,"props":4016,"children":4017},{"class":685},[4018],{"type":23,"value":715},{"type":17,"tag":628,"props":4020,"children":4021},{"class":641},[4022],{"type":23,"value":2501},{"type":17,"tag":628,"props":4024,"children":4025},{"class":630,"line":785},[4026],{"type":17,"tag":628,"props":4027,"children":4028},{},[4029],{"type":23,"value":664},{"type":17,"tag":628,"props":4031,"children":4032},{"class":630,"line":793},[4033,4037,4041,4045,4049,4053,4057,4061,4065],{"type":17,"tag":628,"props":4034,"children":4035},{"class":641},[4036],{"type":23,"value":710},{"type":17,"tag":628,"props":4038,"children":4039},{"class":635},[4040],{"type":23,"value":2804},{"type":17,"tag":628,"props":4042,"children":4043},{"class":641},[4044],{"type":23,"value":2809},{"type":17,"tag":628,"props":4046,"children":4047},{"class":635},[4048],{"type":23,"value":2814},{"type":17,"tag":628,"props":4050,"children":4051},{"class":641},[4052],{"type":23,"value":644},{"type":17,"tag":628,"props":4054,"children":4055},{"class":685},[4056],{"type":23,"value":2823},{"type":17,"tag":628,"props":4058,"children":4059},{"class":641},[4060],{"type":23,"value":1401},{"type":17,"tag":628,"props":4062,"children":4063},{"class":685},[4064],{"type":23,"value":715},{"type":17,"tag":628,"props":4066,"children":4067},{"class":641},[4068],{"type":23,"value":2836},{"type":17,"tag":628,"props":4070,"children":4071},{"class":630,"line":819},[4072,4077,4081,4085,4089,4094,4098,4102,4106,4110,4114],{"type":17,"tag":628,"props":4073,"children":4074},{"class":641},[4075],{"type":23,"value":4076},"            dhdu1, dhdu2 ",{"type":17,"tag":628,"props":4078,"children":4079},{"class":635},[4080],{"type":23,"value":725},{"type":17,"tag":628,"props":4082,"children":4083},{"class":641},[4084],{"type":23,"value":644},{"type":17,"tag":628,"props":4086,"children":4087},{"class":685},[4088],{"type":23,"value":715},{"type":17,"tag":628,"props":4090,"children":4091},{"class":641},[4092],{"type":23,"value":4093},".hjb_equation.dhdu(X_new[",{"type":17,"tag":628,"props":4095,"children":4096},{"class":685},[4097],{"type":23,"value":1367},{"type":17,"tag":628,"props":4099,"children":4100},{"class":641},[4101],{"type":23,"value":2870},{"type":17,"tag":628,"props":4103,"children":4104},{"class":685},[4105],{"type":23,"value":881},{"type":17,"tag":628,"props":4107,"children":4108},{"class":641},[4109],{"type":23,"value":2870},{"type":17,"tag":628,"props":4111,"children":4112},{"class":685},[4113],{"type":23,"value":991},{"type":17,"tag":628,"props":4115,"children":4116},{"class":641},[4117],{"type":23,"value":3540},{"type":17,"tag":628,"props":4119,"children":4120},{"class":630,"line":845},[4121,4126,4130,4135,4139,4143,4147,4151,4155],{"type":17,"tag":628,"props":4122,"children":4123},{"class":641},[4124],{"type":23,"value":4125},"                                                  ",{"type":17,"tag":628,"props":4127,"children":4128},{"class":685},[4129],{"type":23,"value":715},{"type":17,"tag":628,"props":4131,"children":4132},{"class":641},[4133],{"type":23,"value":4134},".U_r[",{"type":17,"tag":628,"props":4136,"children":4137},{"class":685},[4138],{"type":23,"value":881},{"type":17,"tag":628,"props":4140,"children":4141},{"class":641},[4142],{"type":23,"value":3261},{"type":17,"tag":628,"props":4144,"children":4145},{"class":685},[4146],{"type":23,"value":715},{"type":17,"tag":628,"props":4148,"children":4149},{"class":641},[4150],{"type":23,"value":4134},{"type":17,"tag":628,"props":4152,"children":4153},{"class":685},[4154],{"type":23,"value":991},{"type":17,"tag":628,"props":4156,"children":4157},{"class":641},[4158],{"type":23,"value":3235},{"type":17,"tag":628,"props":4160,"children":4161},{"class":630,"line":853},[4162,4167,4171,4175,4179,4183,4188,4192,4196,4200,4204,4208,4212,4216,4220,4224],{"type":17,"tag":628,"props":4163,"children":4164},{"class":641},[4165],{"type":23,"value":4166},"                                                  Lambda_new[",{"type":17,"tag":628,"props":4168,"children":4169},{"class":685},[4170],{"type":23,"value":881},{"type":17,"tag":628,"props":4172,"children":4173},{"class":641},[4174],{"type":23,"value":2912},{"type":17,"tag":628,"props":4176,"children":4177},{"class":635},[4178],{"type":23,"value":1191},{"type":17,"tag":628,"props":4180,"children":4181},{"class":685},[4182],{"type":23,"value":991},{"type":17,"tag":628,"props":4184,"children":4185},{"class":641},[4186],{"type":23,"value":4187},"], Lambda_new[",{"type":17,"tag":628,"props":4189,"children":4190},{"class":685},[4191],{"type":23,"value":991},{"type":17,"tag":628,"props":4193,"children":4194},{"class":641},[4195],{"type":23,"value":2912},{"type":17,"tag":628,"props":4197,"children":4198},{"class":635},[4199],{"type":23,"value":1191},{"type":17,"tag":628,"props":4201,"children":4202},{"class":685},[4203],{"type":23,"value":991},{"type":17,"tag":628,"props":4205,"children":4206},{"class":641},[4207],{"type":23,"value":4187},{"type":17,"tag":628,"props":4209,"children":4210},{"class":685},[4211],{"type":23,"value":1367},{"type":17,"tag":628,"props":4213,"children":4214},{"class":641},[4215],{"type":23,"value":2912},{"type":17,"tag":628,"props":4217,"children":4218},{"class":635},[4219],{"type":23,"value":1191},{"type":17,"tag":628,"props":4221,"children":4222},{"class":685},[4223],{"type":23,"value":991},{"type":17,"tag":628,"props":4225,"children":4226},{"class":641},[4227],{"type":23,"value":3235},{"type":17,"tag":628,"props":4229,"children":4230},{"class":630,"line":889},[4231,4236,4240,4245,4249],{"type":17,"tag":628,"props":4232,"children":4233},{"class":641},[4234],{"type":23,"value":4235},"                                                  Mu[",{"type":17,"tag":628,"props":4237,"children":4238},{"class":685},[4239],{"type":23,"value":881},{"type":17,"tag":628,"props":4241,"children":4242},{"class":641},[4243],{"type":23,"value":4244},", i], Mu[",{"type":17,"tag":628,"props":4246,"children":4247},{"class":685},[4248],{"type":23,"value":991},{"type":17,"tag":628,"props":4250,"children":4251},{"class":641},[4252],{"type":23,"value":2887},{"type":17,"tag":628,"props":4254,"children":4255},{"class":630,"line":922},[4256,4261,4265,4269,4273],{"type":17,"tag":628,"props":4257,"children":4258},{"class":641},[4259],{"type":23,"value":4260},"            F[",{"type":17,"tag":628,"props":4262,"children":4263},{"class":685},[4264],{"type":23,"value":881},{"type":17,"tag":628,"props":4266,"children":4267},{"class":641},[4268],{"type":23,"value":2943},{"type":17,"tag":628,"props":4270,"children":4271},{"class":635},[4272],{"type":23,"value":725},{"type":17,"tag":628,"props":4274,"children":4275},{"class":641},[4276],{"type":23,"value":4277}," dhdu1\n",{"type":17,"tag":628,"props":4279,"children":4280},{"class":630,"line":930},[4281,4285,4289,4293,4297],{"type":17,"tag":628,"props":4282,"children":4283},{"class":641},[4284],{"type":23,"value":4260},{"type":17,"tag":628,"props":4286,"children":4287},{"class":685},[4288],{"type":23,"value":991},{"type":17,"tag":628,"props":4290,"children":4291},{"class":641},[4292],{"type":23,"value":2943},{"type":17,"tag":628,"props":4294,"children":4295},{"class":635},[4296],{"type":23,"value":725},{"type":17,"tag":628,"props":4298,"children":4299},{"class":641},[4300],{"type":23,"value":4301}," dhdu2\n",{"type":17,"tag":628,"props":4303,"children":4304},{"class":630,"line":964},[4305],{"type":17,"tag":628,"props":4306,"children":4307},{"class":641},[4308],{"type":23,"value":2895},{"type":17,"tag":628,"props":4310,"children":4311},{"class":630,"line":998},[4312,4316,4320,4325,4329,4333,4337,4341],{"type":17,"tag":628,"props":4313,"children":4314},{"class":641},[4315],{"type":23,"value":3998},{"type":17,"tag":628,"props":4317,"children":4318},{"class":635},[4319],{"type":23,"value":725},{"type":17,"tag":628,"props":4321,"children":4322},{"class":641},[4323],{"type":23,"value":4324}," F.T.ravel().reshape(",{"type":17,"tag":628,"props":4326,"children":4327},{"class":635},[4328],{"type":23,"value":1060},{"type":17,"tag":628,"props":4330,"children":4331},{"class":685},[4332],{"type":23,"value":991},{"type":17,"tag":628,"props":4334,"children":4335},{"class":641},[4336],{"type":23,"value":2431},{"type":17,"tag":628,"props":4338,"children":4339},{"class":685},[4340],{"type":23,"value":991},{"type":17,"tag":628,"props":4342,"children":4343},{"class":641},[4344],{"type":23,"value":1437},{"type":17,"tag":628,"props":4346,"children":4347},{"class":630,"line":1006},[4348],{"type":17,"tag":628,"props":4349,"children":4350},{},[4351],{"type":23,"value":664},{"type":17,"tag":628,"props":4353,"children":4354},{"class":630,"line":1032},[4355,4359,4363],{"type":17,"tag":628,"props":4356,"children":4357},{"class":641},[4358],{"type":23,"value":710},{"type":17,"tag":628,"props":4360,"children":4361},{"class":635},[4362],{"type":23,"value":1234},{"type":17,"tag":628,"props":4364,"children":4365},{"class":641},[4366],{"type":23,"value":4367}," F",{"type":17,"tag":26,"props":4369,"children":4370},{},[4371,4373,4379,4381,4386],{"type":23,"value":4372},"Now let's introduce Continuation method for Function ",{"type":17,"tag":4374,"props":4375,"children":4376},"code-inline",{},[4377],{"type":23,"value":4378},"F",{"type":23,"value":4380},", you can look at the ",{"type":17,"tag":169,"props":4382,"children":4383},{},[4384],{"type":23,"value":4385}," Continuation ",{"type":23,"value":4387}," part.",{"type":17,"tag":613,"props":4389,"children":4392},{"className":4390,"code":4391,"language":618,"meta":7},[616],"# Time step horizons\ndt = self.tf * (1-np.exp(-self.alpha*time)) / self.pred_horizons\n# F(x,u,t+h)\nF = self.calc_f(X, U, Lambda, Mu, dt)\n# F(x+hdx,u,t+h)\nx_dot, y_dot, yaw_dot = self.robot_model.forward_kinematic(X[2, 0], U[0, 0], U[1, 0])\nX[:, 0] = X[:, 0] + np.array([x_dot, y_dot, yaw_dot]) * self.ht\nFxt = self.calc_f(X, U, Lambda, Mu, dt)\n# F(x+hdx,u+hdx,t+h)\nFuxt = self.calc_f(X, U + self.dU*self.ht, Lambda, Mu , dt)\n\n# Define right-left handside equation\nleft = (Fuxt - Fxt) / self.ht\nright = -self.zeta * F - (Fxt - F)/self.ht\n",[4393],{"type":17,"tag":621,"props":4394,"children":4395},{},[4396],{"type":17,"tag":613,"props":4397,"children":4398},{"__ignoreMap":7},[4399,4407,4491,4499,4524,4532,4605,4663,4687,4695,4750,4757,4765,4807],{"type":17,"tag":628,"props":4400,"children":4401},{"class":630,"line":631},[4402],{"type":17,"tag":628,"props":4403,"children":4404},{"class":1865},[4405],{"type":23,"value":4406},"# Time step horizons\n",{"type":17,"tag":628,"props":4408,"children":4409},{"class":630,"line":658},[4410,4414,4418,4422,4426,4430,4434,4439,4443,4447,4452,4456,4460,4465,4469,4474,4478,4482,4486],{"type":17,"tag":628,"props":4411,"children":4412},{"class":641},[4413],{"type":23,"value":2726},{"type":17,"tag":628,"props":4415,"children":4416},{"class":635},[4417],{"type":23,"value":725},{"type":17,"tag":628,"props":4419,"children":4420},{"class":641},[4421],{"type":23,"value":644},{"type":17,"tag":628,"props":4423,"children":4424},{"class":685},[4425],{"type":23,"value":715},{"type":17,"tag":628,"props":4427,"children":4428},{"class":641},[4429],{"type":23,"value":2117},{"type":17,"tag":628,"props":4431,"children":4432},{"class":635},[4433],{"type":23,"value":1070},{"type":17,"tag":628,"props":4435,"children":4436},{"class":641},[4437],{"type":23,"value":4438}," (",{"type":17,"tag":628,"props":4440,"children":4441},{"class":685},[4442],{"type":23,"value":991},{"type":17,"tag":628,"props":4444,"children":4445},{"class":635},[4446],{"type":23,"value":1060},{"type":17,"tag":628,"props":4448,"children":4449},{"class":641},[4450],{"type":23,"value":4451},"np.exp(",{"type":17,"tag":628,"props":4453,"children":4454},{"class":635},[4455],{"type":23,"value":1060},{"type":17,"tag":628,"props":4457,"children":4458},{"class":685},[4459],{"type":23,"value":715},{"type":17,"tag":628,"props":4461,"children":4462},{"class":641},[4463],{"type":23,"value":4464},".alpha",{"type":17,"tag":628,"props":4466,"children":4467},{"class":635},[4468],{"type":23,"value":1070},{"type":17,"tag":628,"props":4470,"children":4471},{"class":641},[4472],{"type":23,"value":4473},"time)) ",{"type":17,"tag":628,"props":4475,"children":4476},{"class":635},[4477],{"type":23,"value":1428},{"type":17,"tag":628,"props":4479,"children":4480},{"class":641},[4481],{"type":23,"value":644},{"type":17,"tag":628,"props":4483,"children":4484},{"class":685},[4485],{"type":23,"value":715},{"type":17,"tag":628,"props":4487,"children":4488},{"class":641},[4489],{"type":23,"value":4490},".pred_horizons\n",{"type":17,"tag":628,"props":4492,"children":4493},{"class":630,"line":667},[4494],{"type":17,"tag":628,"props":4495,"children":4496},{"class":1865},[4497],{"type":23,"value":4498},"# F(x,u,t+h)\n",{"type":17,"tag":628,"props":4500,"children":4501},{"class":630,"line":696},[4502,4507,4511,4515,4519],{"type":17,"tag":628,"props":4503,"children":4504},{"class":641},[4505],{"type":23,"value":4506},"F ",{"type":17,"tag":628,"props":4508,"children":4509},{"class":635},[4510],{"type":23,"value":725},{"type":17,"tag":628,"props":4512,"children":4513},{"class":641},[4514],{"type":23,"value":644},{"type":17,"tag":628,"props":4516,"children":4517},{"class":685},[4518],{"type":23,"value":715},{"type":17,"tag":628,"props":4520,"children":4521},{"class":641},[4522],{"type":23,"value":4523},".calc_f(X, U, Lambda, Mu, dt)\n",{"type":17,"tag":628,"props":4525,"children":4526},{"class":630,"line":704},[4527],{"type":17,"tag":628,"props":4528,"children":4529},{"class":1865},[4530],{"type":23,"value":4531},"# F(x+hdx,u,t+h)\n",{"type":17,"tag":628,"props":4533,"children":4534},{"class":630,"line":733},[4535,4540,4544,4548,4552,4556,4560,4564,4568,4573,4577,4581,4585,4589,4593,4597,4601],{"type":17,"tag":628,"props":4536,"children":4537},{"class":641},[4538],{"type":23,"value":4539},"x_dot, y_dot, yaw_dot ",{"type":17,"tag":628,"props":4541,"children":4542},{"class":635},[4543],{"type":23,"value":725},{"type":17,"tag":628,"props":4545,"children":4546},{"class":641},[4547],{"type":23,"value":644},{"type":17,"tag":628,"props":4549,"children":4550},{"class":685},[4551],{"type":23,"value":715},{"type":17,"tag":628,"props":4553,"children":4554},{"class":641},[4555],{"type":23,"value":2861},{"type":17,"tag":628,"props":4557,"children":4558},{"class":685},[4559],{"type":23,"value":1367},{"type":17,"tag":628,"props":4561,"children":4562},{"class":641},[4563],{"type":23,"value":2431},{"type":17,"tag":628,"props":4565,"children":4566},{"class":685},[4567],{"type":23,"value":881},{"type":17,"tag":628,"props":4569,"children":4570},{"class":641},[4571],{"type":23,"value":4572},"], U[",{"type":17,"tag":628,"props":4574,"children":4575},{"class":685},[4576],{"type":23,"value":881},{"type":17,"tag":628,"props":4578,"children":4579},{"class":641},[4580],{"type":23,"value":2431},{"type":17,"tag":628,"props":4582,"children":4583},{"class":685},[4584],{"type":23,"value":881},{"type":17,"tag":628,"props":4586,"children":4587},{"class":641},[4588],{"type":23,"value":4572},{"type":17,"tag":628,"props":4590,"children":4591},{"class":685},[4592],{"type":23,"value":991},{"type":17,"tag":628,"props":4594,"children":4595},{"class":641},[4596],{"type":23,"value":2431},{"type":17,"tag":628,"props":4598,"children":4599},{"class":685},[4600],{"type":23,"value":881},{"type":17,"tag":628,"props":4602,"children":4603},{"class":641},[4604],{"type":23,"value":3294},{"type":17,"tag":628,"props":4606,"children":4607},{"class":630,"line":759},[4608,4613,4617,4621,4625,4630,4634,4638,4642,4647,4651,4655,4659],{"type":17,"tag":628,"props":4609,"children":4610},{"class":641},[4611],{"type":23,"value":4612},"X[:, ",{"type":17,"tag":628,"props":4614,"children":4615},{"class":685},[4616],{"type":23,"value":881},{"type":17,"tag":628,"props":4618,"children":4619},{"class":641},[4620],{"type":23,"value":2925},{"type":17,"tag":628,"props":4622,"children":4623},{"class":635},[4624],{"type":23,"value":725},{"type":17,"tag":628,"props":4626,"children":4627},{"class":641},[4628],{"type":23,"value":4629}," X[:, ",{"type":17,"tag":628,"props":4631,"children":4632},{"class":685},[4633],{"type":23,"value":881},{"type":17,"tag":628,"props":4635,"children":4636},{"class":641},[4637],{"type":23,"value":2925},{"type":17,"tag":628,"props":4639,"children":4640},{"class":635},[4641],{"type":23,"value":1191},{"type":17,"tag":628,"props":4643,"children":4644},{"class":641},[4645],{"type":23,"value":4646}," np.array([x_dot, y_dot, yaw_dot]) ",{"type":17,"tag":628,"props":4648,"children":4649},{"class":635},[4650],{"type":23,"value":1070},{"type":17,"tag":628,"props":4652,"children":4653},{"class":641},[4654],{"type":23,"value":644},{"type":17,"tag":628,"props":4656,"children":4657},{"class":685},[4658],{"type":23,"value":715},{"type":17,"tag":628,"props":4660,"children":4661},{"class":641},[4662],{"type":23,"value":2072},{"type":17,"tag":628,"props":4664,"children":4665},{"class":630,"line":785},[4666,4671,4675,4679,4683],{"type":17,"tag":628,"props":4667,"children":4668},{"class":641},[4669],{"type":23,"value":4670},"Fxt ",{"type":17,"tag":628,"props":4672,"children":4673},{"class":635},[4674],{"type":23,"value":725},{"type":17,"tag":628,"props":4676,"children":4677},{"class":641},[4678],{"type":23,"value":644},{"type":17,"tag":628,"props":4680,"children":4681},{"class":685},[4682],{"type":23,"value":715},{"type":17,"tag":628,"props":4684,"children":4685},{"class":641},[4686],{"type":23,"value":4523},{"type":17,"tag":628,"props":4688,"children":4689},{"class":630,"line":793},[4690],{"type":17,"tag":628,"props":4691,"children":4692},{"class":1865},[4693],{"type":23,"value":4694},"# F(x+hdx,u+hdx,t+h)\n",{"type":17,"tag":628,"props":4696,"children":4697},{"class":630,"line":819},[4698,4703,4707,4711,4715,4720,4724,4728,4732,4737,4741,4745],{"type":17,"tag":628,"props":4699,"children":4700},{"class":641},[4701],{"type":23,"value":4702},"Fuxt ",{"type":17,"tag":628,"props":4704,"children":4705},{"class":635},[4706],{"type":23,"value":725},{"type":17,"tag":628,"props":4708,"children":4709},{"class":641},[4710],{"type":23,"value":644},{"type":17,"tag":628,"props":4712,"children":4713},{"class":685},[4714],{"type":23,"value":715},{"type":17,"tag":628,"props":4716,"children":4717},{"class":641},[4718],{"type":23,"value":4719},".calc_f(X, U ",{"type":17,"tag":628,"props":4721,"children":4722},{"class":635},[4723],{"type":23,"value":1191},{"type":17,"tag":628,"props":4725,"children":4726},{"class":641},[4727],{"type":23,"value":644},{"type":17,"tag":628,"props":4729,"children":4730},{"class":685},[4731],{"type":23,"value":715},{"type":17,"tag":628,"props":4733,"children":4734},{"class":641},[4735],{"type":23,"value":4736},".dU",{"type":17,"tag":628,"props":4738,"children":4739},{"class":635},[4740],{"type":23,"value":1070},{"type":17,"tag":628,"props":4742,"children":4743},{"class":685},[4744],{"type":23,"value":715},{"type":17,"tag":628,"props":4746,"children":4747},{"class":641},[4748],{"type":23,"value":4749},".ht, Lambda, Mu , dt)\n",{"type":17,"tag":628,"props":4751,"children":4752},{"class":630,"line":845},[4753],{"type":17,"tag":628,"props":4754,"children":4755},{},[4756],{"type":23,"value":664},{"type":17,"tag":628,"props":4758,"children":4759},{"class":630,"line":853},[4760],{"type":17,"tag":628,"props":4761,"children":4762},{"class":1865},[4763],{"type":23,"value":4764},"# Define right-left handside equation\n",{"type":17,"tag":628,"props":4766,"children":4767},{"class":630,"line":889},[4768,4773,4777,4782,4786,4791,4795,4799,4803],{"type":17,"tag":628,"props":4769,"children":4770},{"class":641},[4771],{"type":23,"value":4772},"left ",{"type":17,"tag":628,"props":4774,"children":4775},{"class":635},[4776],{"type":23,"value":725},{"type":17,"tag":628,"props":4778,"children":4779},{"class":641},[4780],{"type":23,"value":4781}," (Fuxt ",{"type":17,"tag":628,"props":4783,"children":4784},{"class":635},[4785],{"type":23,"value":1060},{"type":17,"tag":628,"props":4787,"children":4788},{"class":641},[4789],{"type":23,"value":4790}," Fxt) ",{"type":17,"tag":628,"props":4792,"children":4793},{"class":635},[4794],{"type":23,"value":1428},{"type":17,"tag":628,"props":4796,"children":4797},{"class":641},[4798],{"type":23,"value":644},{"type":17,"tag":628,"props":4800,"children":4801},{"class":685},[4802],{"type":23,"value":715},{"type":17,"tag":628,"props":4804,"children":4805},{"class":641},[4806],{"type":23,"value":2072},{"type":17,"tag":628,"props":4808,"children":4809},{"class":630,"line":922},[4810,4815,4819,4823,4827,4831,4835,4839,4844,4848,4853,4857,4862,4866,4870],{"type":17,"tag":628,"props":4811,"children":4812},{"class":641},[4813],{"type":23,"value":4814},"right ",{"type":17,"tag":628,"props":4816,"children":4817},{"class":635},[4818],{"type":23,"value":725},{"type":17,"tag":628,"props":4820,"children":4821},{"class":641},[4822],{"type":23,"value":644},{"type":17,"tag":628,"props":4824,"children":4825},{"class":635},[4826],{"type":23,"value":1060},{"type":17,"tag":628,"props":4828,"children":4829},{"class":685},[4830],{"type":23,"value":715},{"type":17,"tag":628,"props":4832,"children":4833},{"class":641},[4834],{"type":23,"value":2047},{"type":17,"tag":628,"props":4836,"children":4837},{"class":635},[4838],{"type":23,"value":1070},{"type":17,"tag":628,"props":4840,"children":4841},{"class":641},[4842],{"type":23,"value":4843}," F ",{"type":17,"tag":628,"props":4845,"children":4846},{"class":635},[4847],{"type":23,"value":1060},{"type":17,"tag":628,"props":4849,"children":4850},{"class":641},[4851],{"type":23,"value":4852}," (Fxt ",{"type":17,"tag":628,"props":4854,"children":4855},{"class":635},[4856],{"type":23,"value":1060},{"type":17,"tag":628,"props":4858,"children":4859},{"class":641},[4860],{"type":23,"value":4861}," F)",{"type":17,"tag":628,"props":4863,"children":4864},{"class":635},[4865],{"type":23,"value":1428},{"type":17,"tag":628,"props":4867,"children":4868},{"class":685},[4869],{"type":23,"value":715},{"type":17,"tag":628,"props":4871,"children":4872},{"class":641},[4873],{"type":23,"value":4874},".ht",{"type":17,"tag":26,"props":4876,"children":4877},{},[4878,4880,4884],{"type":23,"value":4879},"Here is the crucial part, we need to implement GMRES solver for our ",{"type":17,"tag":4374,"props":4881,"children":4882},{},[4883],{"type":23,"value":4378},{"type":23,"value":4885}," function to obtain solution vector.",{"type":17,"tag":613,"props":4887,"children":4890},{"className":4888,"code":4889,"language":618,"meta":7},[616],"# Define right-left handside equation\nleft = (Fuxt - Fxt) / self.ht\nright = -self.zeta * F - (Fxt - F)/self.ht\n\n# Define iterations\nm = (self.u_dim ) * self.pred_horizons\n# Define r0\nr0 = right - left\n# print(r0)\n\n# GMRES\nVm = np.zeros((m, m+1))\nVm[:, 0:1] = r0 / np.linalg.norm(r0)\n# print(\"Vm\", Vm[:, 0])\nHm = np.zeros((m+1, m))\n# print(Vm[:, 0])\n\n\nfor i in range(m):\n    Fuxt = self.calc_f(\n        X, U + Vm[:, i:i+1].reshape(self.u_dim, self.pred_horizons, order='F') * self.ht,\n        Lambda, Mu,\n        dt\n    )\n\n    Av = (Fuxt - Fxt) / self.ht\n\n    for k in range(i+1):\n        Hm[k, i] = np.dot(Av.T, Vm[:, k:k+1])\n\n    temp_vec = np.zeros((m, 1))\n\n    for k in range(i+1):\n        temp_vec = temp_vec + np.dot(Hm[k, i], Vm[:, k:k+1])\n\n    v_hat = Av - temp_vec\n\n    Hm[i+1, i] = np.linalg.norm(v_hat)\n\n    Vm[:,i+1:i+2] = v_hat/Hm[i+1, i]\n\ne = np.zeros((m+1, 1))\ne[0, 0] = 1.0\ngm = np.linalg.norm(r0) * e\n# print(gm)\n\nUTMat, gm = self.ToUTMat(Hm, gm, m)\n\nmin_y = np.zeros((m, 1))\n\nfor i in range(m):\n    min_y[i][0] = (gm[i, 0] - np.dot(UTMat[i:i+1 ,:] ,min_y))/UTMat[i, i]\n\ndU_new = self.dU + np.dot(Vm[:, 0:m], min_y).reshape(self.u_dim, self.pred_horizons, order='F')\n\nself.dU = dU_new\n\nU = U + self.dU * self.ht\n",[4891],{"type":17,"tag":621,"props":4892,"children":4893},{},[4894],{"type":17,"tag":613,"props":4895,"children":4896},{"__ignoreMap":7},[4897,4904,4943,5006,5013,5021,5062,5070,5096,5104,5111,5119,5149,5191,5199,5229,5237,5244,5251,5279,5304,5389,5397,5405,5413,5420,5460,5467,5513,5542,5549,5574,5581,5624,5662,5669,5695,5702,5731,5739,5804,5812,5849,5886,5913,5922,5930,5956,5964,5989,5997,6025,6090,6098,6173,6181,6202,6210],{"type":17,"tag":628,"props":4898,"children":4899},{"class":630,"line":631},[4900],{"type":17,"tag":628,"props":4901,"children":4902},{"class":1865},[4903],{"type":23,"value":4764},{"type":17,"tag":628,"props":4905,"children":4906},{"class":630,"line":658},[4907,4911,4915,4919,4923,4927,4931,4935,4939],{"type":17,"tag":628,"props":4908,"children":4909},{"class":641},[4910],{"type":23,"value":4772},{"type":17,"tag":628,"props":4912,"children":4913},{"class":635},[4914],{"type":23,"value":725},{"type":17,"tag":628,"props":4916,"children":4917},{"class":641},[4918],{"type":23,"value":4781},{"type":17,"tag":628,"props":4920,"children":4921},{"class":635},[4922],{"type":23,"value":1060},{"type":17,"tag":628,"props":4924,"children":4925},{"class":641},[4926],{"type":23,"value":4790},{"type":17,"tag":628,"props":4928,"children":4929},{"class":635},[4930],{"type":23,"value":1428},{"type":17,"tag":628,"props":4932,"children":4933},{"class":641},[4934],{"type":23,"value":644},{"type":17,"tag":628,"props":4936,"children":4937},{"class":685},[4938],{"type":23,"value":715},{"type":17,"tag":628,"props":4940,"children":4941},{"class":641},[4942],{"type":23,"value":2072},{"type":17,"tag":628,"props":4944,"children":4945},{"class":630,"line":667},[4946,4950,4954,4958,4962,4966,4970,4974,4978,4982,4986,4990,4994,4998,5002],{"type":17,"tag":628,"props":4947,"children":4948},{"class":641},[4949],{"type":23,"value":4814},{"type":17,"tag":628,"props":4951,"children":4952},{"class":635},[4953],{"type":23,"value":725},{"type":17,"tag":628,"props":4955,"children":4956},{"class":641},[4957],{"type":23,"value":644},{"type":17,"tag":628,"props":4959,"children":4960},{"class":635},[4961],{"type":23,"value":1060},{"type":17,"tag":628,"props":4963,"children":4964},{"class":685},[4965],{"type":23,"value":715},{"type":17,"tag":628,"props":4967,"children":4968},{"class":641},[4969],{"type":23,"value":2047},{"type":17,"tag":628,"props":4971,"children":4972},{"class":635},[4973],{"type":23,"value":1070},{"type":17,"tag":628,"props":4975,"children":4976},{"class":641},[4977],{"type":23,"value":4843},{"type":17,"tag":628,"props":4979,"children":4980},{"class":635},[4981],{"type":23,"value":1060},{"type":17,"tag":628,"props":4983,"children":4984},{"class":641},[4985],{"type":23,"value":4852},{"type":17,"tag":628,"props":4987,"children":4988},{"class":635},[4989],{"type":23,"value":1060},{"type":17,"tag":628,"props":4991,"children":4992},{"class":641},[4993],{"type":23,"value":4861},{"type":17,"tag":628,"props":4995,"children":4996},{"class":635},[4997],{"type":23,"value":1428},{"type":17,"tag":628,"props":4999,"children":5000},{"class":685},[5001],{"type":23,"value":715},{"type":17,"tag":628,"props":5003,"children":5004},{"class":641},[5005],{"type":23,"value":2072},{"type":17,"tag":628,"props":5007,"children":5008},{"class":630,"line":696},[5009],{"type":17,"tag":628,"props":5010,"children":5011},{},[5012],{"type":23,"value":664},{"type":17,"tag":628,"props":5014,"children":5015},{"class":630,"line":704},[5016],{"type":17,"tag":628,"props":5017,"children":5018},{"class":1865},[5019],{"type":23,"value":5020},"# Define iterations\n",{"type":17,"tag":628,"props":5022,"children":5023},{"class":630,"line":733},[5024,5029,5033,5037,5041,5046,5050,5054,5058],{"type":17,"tag":628,"props":5025,"children":5026},{"class":641},[5027],{"type":23,"value":5028},"m ",{"type":17,"tag":628,"props":5030,"children":5031},{"class":635},[5032],{"type":23,"value":725},{"type":17,"tag":628,"props":5034,"children":5035},{"class":641},[5036],{"type":23,"value":4438},{"type":17,"tag":628,"props":5038,"children":5039},{"class":685},[5040],{"type":23,"value":715},{"type":17,"tag":628,"props":5042,"children":5043},{"class":641},[5044],{"type":23,"value":5045},".u_dim ) ",{"type":17,"tag":628,"props":5047,"children":5048},{"class":635},[5049],{"type":23,"value":1070},{"type":17,"tag":628,"props":5051,"children":5052},{"class":641},[5053],{"type":23,"value":644},{"type":17,"tag":628,"props":5055,"children":5056},{"class":685},[5057],{"type":23,"value":715},{"type":17,"tag":628,"props":5059,"children":5060},{"class":641},[5061],{"type":23,"value":4490},{"type":17,"tag":628,"props":5063,"children":5064},{"class":630,"line":759},[5065],{"type":17,"tag":628,"props":5066,"children":5067},{"class":1865},[5068],{"type":23,"value":5069},"# Define r0\n",{"type":17,"tag":628,"props":5071,"children":5072},{"class":630,"line":785},[5073,5078,5082,5087,5091],{"type":17,"tag":628,"props":5074,"children":5075},{"class":641},[5076],{"type":23,"value":5077},"r0 ",{"type":17,"tag":628,"props":5079,"children":5080},{"class":635},[5081],{"type":23,"value":725},{"type":17,"tag":628,"props":5083,"children":5084},{"class":641},[5085],{"type":23,"value":5086}," right ",{"type":17,"tag":628,"props":5088,"children":5089},{"class":635},[5090],{"type":23,"value":1060},{"type":17,"tag":628,"props":5092,"children":5093},{"class":641},[5094],{"type":23,"value":5095}," left\n",{"type":17,"tag":628,"props":5097,"children":5098},{"class":630,"line":793},[5099],{"type":17,"tag":628,"props":5100,"children":5101},{"class":1865},[5102],{"type":23,"value":5103},"# print(r0)\n",{"type":17,"tag":628,"props":5105,"children":5106},{"class":630,"line":819},[5107],{"type":17,"tag":628,"props":5108,"children":5109},{},[5110],{"type":23,"value":664},{"type":17,"tag":628,"props":5112,"children":5113},{"class":630,"line":845},[5114],{"type":17,"tag":628,"props":5115,"children":5116},{"class":1865},[5117],{"type":23,"value":5118},"# GMRES\n",{"type":17,"tag":628,"props":5120,"children":5121},{"class":630,"line":853},[5122,5127,5131,5136,5140,5144],{"type":17,"tag":628,"props":5123,"children":5124},{"class":641},[5125],{"type":23,"value":5126},"Vm ",{"type":17,"tag":628,"props":5128,"children":5129},{"class":635},[5130],{"type":23,"value":725},{"type":17,"tag":628,"props":5132,"children":5133},{"class":641},[5134],{"type":23,"value":5135}," np.zeros((m, m",{"type":17,"tag":628,"props":5137,"children":5138},{"class":635},[5139],{"type":23,"value":1191},{"type":17,"tag":628,"props":5141,"children":5142},{"class":685},[5143],{"type":23,"value":991},{"type":17,"tag":628,"props":5145,"children":5146},{"class":641},[5147],{"type":23,"value":5148},"))\n",{"type":17,"tag":628,"props":5150,"children":5151},{"class":630,"line":889},[5152,5157,5161,5165,5169,5173,5177,5182,5186],{"type":17,"tag":628,"props":5153,"children":5154},{"class":641},[5155],{"type":23,"value":5156},"Vm[:, ",{"type":17,"tag":628,"props":5158,"children":5159},{"class":685},[5160],{"type":23,"value":881},{"type":17,"tag":628,"props":5162,"children":5163},{"class":641},[5164],{"type":23,"value":291},{"type":17,"tag":628,"props":5166,"children":5167},{"class":685},[5168],{"type":23,"value":991},{"type":17,"tag":628,"props":5170,"children":5171},{"class":641},[5172],{"type":23,"value":2925},{"type":17,"tag":628,"props":5174,"children":5175},{"class":635},[5176],{"type":23,"value":725},{"type":17,"tag":628,"props":5178,"children":5179},{"class":641},[5180],{"type":23,"value":5181}," r0 ",{"type":17,"tag":628,"props":5183,"children":5184},{"class":635},[5185],{"type":23,"value":1428},{"type":17,"tag":628,"props":5187,"children":5188},{"class":641},[5189],{"type":23,"value":5190}," np.linalg.norm(r0)\n",{"type":17,"tag":628,"props":5192,"children":5193},{"class":630,"line":922},[5194],{"type":17,"tag":628,"props":5195,"children":5196},{"class":1865},[5197],{"type":23,"value":5198},"# print(\"Vm\", Vm[:, 0])\n",{"type":17,"tag":628,"props":5200,"children":5201},{"class":630,"line":930},[5202,5207,5211,5216,5220,5224],{"type":17,"tag":628,"props":5203,"children":5204},{"class":641},[5205],{"type":23,"value":5206},"Hm ",{"type":17,"tag":628,"props":5208,"children":5209},{"class":635},[5210],{"type":23,"value":725},{"type":17,"tag":628,"props":5212,"children":5213},{"class":641},[5214],{"type":23,"value":5215}," np.zeros((m",{"type":17,"tag":628,"props":5217,"children":5218},{"class":635},[5219],{"type":23,"value":1191},{"type":17,"tag":628,"props":5221,"children":5222},{"class":685},[5223],{"type":23,"value":991},{"type":17,"tag":628,"props":5225,"children":5226},{"class":641},[5227],{"type":23,"value":5228},", m))\n",{"type":17,"tag":628,"props":5230,"children":5231},{"class":630,"line":964},[5232],{"type":17,"tag":628,"props":5233,"children":5234},{"class":1865},[5235],{"type":23,"value":5236},"# print(Vm[:, 0])\n",{"type":17,"tag":628,"props":5238,"children":5239},{"class":630,"line":998},[5240],{"type":17,"tag":628,"props":5241,"children":5242},{},[5243],{"type":23,"value":664},{"type":17,"tag":628,"props":5245,"children":5246},{"class":630,"line":1006},[5247],{"type":17,"tag":628,"props":5248,"children":5249},{},[5250],{"type":23,"value":664},{"type":17,"tag":628,"props":5252,"children":5253},{"class":630,"line":1032},[5254,5258,5262,5266,5270,5274],{"type":17,"tag":628,"props":5255,"children":5256},{"class":635},[5257],{"type":23,"value":2804},{"type":17,"tag":628,"props":5259,"children":5260},{"class":641},[5261],{"type":23,"value":2809},{"type":17,"tag":628,"props":5263,"children":5264},{"class":635},[5265],{"type":23,"value":2814},{"type":17,"tag":628,"props":5267,"children":5268},{"class":641},[5269],{"type":23,"value":644},{"type":17,"tag":628,"props":5271,"children":5272},{"class":685},[5273],{"type":23,"value":2823},{"type":17,"tag":628,"props":5275,"children":5276},{"class":641},[5277],{"type":23,"value":5278},"(m):\n",{"type":17,"tag":628,"props":5280,"children":5281},{"class":630,"line":1040},[5282,5287,5291,5295,5299],{"type":17,"tag":628,"props":5283,"children":5284},{"class":641},[5285],{"type":23,"value":5286},"    Fuxt ",{"type":17,"tag":628,"props":5288,"children":5289},{"class":635},[5290],{"type":23,"value":725},{"type":17,"tag":628,"props":5292,"children":5293},{"class":641},[5294],{"type":23,"value":644},{"type":17,"tag":628,"props":5296,"children":5297},{"class":685},[5298],{"type":23,"value":715},{"type":17,"tag":628,"props":5300,"children":5301},{"class":641},[5302],{"type":23,"value":5303},".calc_f(\n",{"type":17,"tag":628,"props":5305,"children":5306},{"class":630,"line":1082},[5307,5312,5316,5321,5325,5329,5334,5338,5342,5346,5351,5357,5361,5367,5372,5376,5380,5384],{"type":17,"tag":628,"props":5308,"children":5309},{"class":641},[5310],{"type":23,"value":5311},"        X, U ",{"type":17,"tag":628,"props":5313,"children":5314},{"class":635},[5315],{"type":23,"value":1191},{"type":17,"tag":628,"props":5317,"children":5318},{"class":641},[5319],{"type":23,"value":5320}," Vm[:, i:i",{"type":17,"tag":628,"props":5322,"children":5323},{"class":635},[5324],{"type":23,"value":1191},{"type":17,"tag":628,"props":5326,"children":5327},{"class":685},[5328],{"type":23,"value":991},{"type":17,"tag":628,"props":5330,"children":5331},{"class":641},[5332],{"type":23,"value":5333},"].reshape(",{"type":17,"tag":628,"props":5335,"children":5336},{"class":685},[5337],{"type":23,"value":715},{"type":17,"tag":628,"props":5339,"children":5340},{"class":641},[5341],{"type":23,"value":2492},{"type":17,"tag":628,"props":5343,"children":5344},{"class":685},[5345],{"type":23,"value":715},{"type":17,"tag":628,"props":5347,"children":5348},{"class":641},[5349],{"type":23,"value":5350},".pred_horizons, ",{"type":17,"tag":628,"props":5352,"children":5354},{"class":5353},"ct-657843",[5355],{"type":23,"value":5356},"order",{"type":17,"tag":628,"props":5358,"children":5359},{"class":635},[5360],{"type":23,"value":725},{"type":17,"tag":628,"props":5362,"children":5364},{"class":5363},"ct-244866",[5365],{"type":23,"value":5366},"'F'",{"type":17,"tag":628,"props":5368,"children":5369},{"class":641},[5370],{"type":23,"value":5371},") ",{"type":17,"tag":628,"props":5373,"children":5374},{"class":635},[5375],{"type":23,"value":1070},{"type":17,"tag":628,"props":5377,"children":5378},{"class":641},[5379],{"type":23,"value":644},{"type":17,"tag":628,"props":5381,"children":5382},{"class":685},[5383],{"type":23,"value":715},{"type":17,"tag":628,"props":5385,"children":5386},{"class":641},[5387],{"type":23,"value":5388},".ht,\n",{"type":17,"tag":628,"props":5390,"children":5391},{"class":630,"line":1122},[5392],{"type":17,"tag":628,"props":5393,"children":5394},{"class":641},[5395],{"type":23,"value":5396},"        Lambda, Mu,\n",{"type":17,"tag":628,"props":5398,"children":5399},{"class":630,"line":1216},[5400],{"type":17,"tag":628,"props":5401,"children":5402},{"class":641},[5403],{"type":23,"value":5404},"        dt\n",{"type":17,"tag":628,"props":5406,"children":5407},{"class":630,"line":1224},[5408],{"type":17,"tag":628,"props":5409,"children":5410},{"class":641},[5411],{"type":23,"value":5412},"    )\n",{"type":17,"tag":628,"props":5414,"children":5415},{"class":630,"line":1242},[5416],{"type":17,"tag":628,"props":5417,"children":5418},{},[5419],{"type":23,"value":664},{"type":17,"tag":628,"props":5421,"children":5422},{"class":630,"line":1250},[5423,5428,5432,5436,5440,5444,5448,5452,5456],{"type":17,"tag":628,"props":5424,"children":5425},{"class":641},[5426],{"type":23,"value":5427},"    Av ",{"type":17,"tag":628,"props":5429,"children":5430},{"class":635},[5431],{"type":23,"value":725},{"type":17,"tag":628,"props":5433,"children":5434},{"class":641},[5435],{"type":23,"value":4781},{"type":17,"tag":628,"props":5437,"children":5438},{"class":635},[5439],{"type":23,"value":1060},{"type":17,"tag":628,"props":5441,"children":5442},{"class":641},[5443],{"type":23,"value":4790},{"type":17,"tag":628,"props":5445,"children":5446},{"class":635},[5447],{"type":23,"value":1428},{"type":17,"tag":628,"props":5449,"children":5450},{"class":641},[5451],{"type":23,"value":644},{"type":17,"tag":628,"props":5453,"children":5454},{"class":685},[5455],{"type":23,"value":715},{"type":17,"tag":628,"props":5457,"children":5458},{"class":641},[5459],{"type":23,"value":2072},{"type":17,"tag":628,"props":5461,"children":5462},{"class":630,"line":1276},[5463],{"type":17,"tag":628,"props":5464,"children":5465},{},[5466],{"type":23,"value":664},{"type":17,"tag":628,"props":5468,"children":5469},{"class":630,"line":1284},[5470,5474,5478,5483,5487,5491,5495,5500,5504,5508],{"type":17,"tag":628,"props":5471,"children":5472},{"class":641},[5473],{"type":23,"value":673},{"type":17,"tag":628,"props":5475,"children":5476},{"class":635},[5477],{"type":23,"value":2804},{"type":17,"tag":628,"props":5479,"children":5480},{"class":641},[5481],{"type":23,"value":5482}," k ",{"type":17,"tag":628,"props":5484,"children":5485},{"class":635},[5486],{"type":23,"value":2814},{"type":17,"tag":628,"props":5488,"children":5489},{"class":641},[5490],{"type":23,"value":644},{"type":17,"tag":628,"props":5492,"children":5493},{"class":685},[5494],{"type":23,"value":2823},{"type":17,"tag":628,"props":5496,"children":5497},{"class":641},[5498],{"type":23,"value":5499},"(i",{"type":17,"tag":628,"props":5501,"children":5502},{"class":635},[5503],{"type":23,"value":1191},{"type":17,"tag":628,"props":5505,"children":5506},{"class":685},[5507],{"type":23,"value":991},{"type":17,"tag":628,"props":5509,"children":5510},{"class":641},[5511],{"type":23,"value":5512},"):\n",{"type":17,"tag":628,"props":5514,"children":5515},{"class":630,"line":1440},[5516,5521,5525,5530,5534,5538],{"type":17,"tag":628,"props":5517,"children":5518},{"class":641},[5519],{"type":23,"value":5520},"        Hm[k, i] ",{"type":17,"tag":628,"props":5522,"children":5523},{"class":635},[5524],{"type":23,"value":725},{"type":17,"tag":628,"props":5526,"children":5527},{"class":641},[5528],{"type":23,"value":5529}," np.dot(Av.T, Vm[:, k:k",{"type":17,"tag":628,"props":5531,"children":5532},{"class":635},[5533],{"type":23,"value":1191},{"type":17,"tag":628,"props":5535,"children":5536},{"class":685},[5537],{"type":23,"value":991},{"type":17,"tag":628,"props":5539,"children":5540},{"class":641},[5541],{"type":23,"value":3294},{"type":17,"tag":628,"props":5543,"children":5544},{"class":630,"line":1560},[5545],{"type":17,"tag":628,"props":5546,"children":5547},{},[5548],{"type":23,"value":664},{"type":17,"tag":628,"props":5550,"children":5551},{"class":630,"line":1568},[5552,5557,5561,5566,5570],{"type":17,"tag":628,"props":5553,"children":5554},{"class":641},[5555],{"type":23,"value":5556},"    temp_vec ",{"type":17,"tag":628,"props":5558,"children":5559},{"class":635},[5560],{"type":23,"value":725},{"type":17,"tag":628,"props":5562,"children":5563},{"class":641},[5564],{"type":23,"value":5565}," np.zeros((m, ",{"type":17,"tag":628,"props":5567,"children":5568},{"class":685},[5569],{"type":23,"value":991},{"type":17,"tag":628,"props":5571,"children":5572},{"class":641},[5573],{"type":23,"value":5148},{"type":17,"tag":628,"props":5575,"children":5576},{"class":630,"line":1585},[5577],{"type":17,"tag":628,"props":5578,"children":5579},{},[5580],{"type":23,"value":664},{"type":17,"tag":628,"props":5582,"children":5583},{"class":630,"line":1593},[5584,5588,5592,5596,5600,5604,5608,5612,5616,5620],{"type":17,"tag":628,"props":5585,"children":5586},{"class":641},[5587],{"type":23,"value":673},{"type":17,"tag":628,"props":5589,"children":5590},{"class":635},[5591],{"type":23,"value":2804},{"type":17,"tag":628,"props":5593,"children":5594},{"class":641},[5595],{"type":23,"value":5482},{"type":17,"tag":628,"props":5597,"children":5598},{"class":635},[5599],{"type":23,"value":2814},{"type":17,"tag":628,"props":5601,"children":5602},{"class":641},[5603],{"type":23,"value":644},{"type":17,"tag":628,"props":5605,"children":5606},{"class":685},[5607],{"type":23,"value":2823},{"type":17,"tag":628,"props":5609,"children":5610},{"class":641},[5611],{"type":23,"value":5499},{"type":17,"tag":628,"props":5613,"children":5614},{"class":635},[5615],{"type":23,"value":1191},{"type":17,"tag":628,"props":5617,"children":5618},{"class":685},[5619],{"type":23,"value":991},{"type":17,"tag":628,"props":5621,"children":5622},{"class":641},[5623],{"type":23,"value":5512},{"type":17,"tag":628,"props":5625,"children":5626},{"class":630,"line":1619},[5627,5632,5636,5641,5645,5650,5654,5658],{"type":17,"tag":628,"props":5628,"children":5629},{"class":641},[5630],{"type":23,"value":5631},"        temp_vec ",{"type":17,"tag":628,"props":5633,"children":5634},{"class":635},[5635],{"type":23,"value":725},{"type":17,"tag":628,"props":5637,"children":5638},{"class":641},[5639],{"type":23,"value":5640}," temp_vec ",{"type":17,"tag":628,"props":5642,"children":5643},{"class":635},[5644],{"type":23,"value":1191},{"type":17,"tag":628,"props":5646,"children":5647},{"class":641},[5648],{"type":23,"value":5649}," np.dot(Hm[k, i], Vm[:, k:k",{"type":17,"tag":628,"props":5651,"children":5652},{"class":635},[5653],{"type":23,"value":1191},{"type":17,"tag":628,"props":5655,"children":5656},{"class":685},[5657],{"type":23,"value":991},{"type":17,"tag":628,"props":5659,"children":5660},{"class":641},[5661],{"type":23,"value":3294},{"type":17,"tag":628,"props":5663,"children":5664},{"class":630,"line":1663},[5665],{"type":17,"tag":628,"props":5666,"children":5667},{},[5668],{"type":23,"value":664},{"type":17,"tag":628,"props":5670,"children":5671},{"class":630,"line":1707},[5672,5677,5681,5686,5690],{"type":17,"tag":628,"props":5673,"children":5674},{"class":641},[5675],{"type":23,"value":5676},"    v_hat ",{"type":17,"tag":628,"props":5678,"children":5679},{"class":635},[5680],{"type":23,"value":725},{"type":17,"tag":628,"props":5682,"children":5683},{"class":641},[5684],{"type":23,"value":5685}," Av ",{"type":17,"tag":628,"props":5687,"children":5688},{"class":635},[5689],{"type":23,"value":1060},{"type":17,"tag":628,"props":5691,"children":5692},{"class":641},[5693],{"type":23,"value":5694}," temp_vec\n",{"type":17,"tag":628,"props":5696,"children":5697},{"class":630,"line":1750},[5698],{"type":17,"tag":628,"props":5699,"children":5700},{},[5701],{"type":23,"value":664},{"type":17,"tag":628,"props":5703,"children":5704},{"class":630,"line":1758},[5705,5710,5714,5718,5722,5726],{"type":17,"tag":628,"props":5706,"children":5707},{"class":641},[5708],{"type":23,"value":5709},"    Hm[i",{"type":17,"tag":628,"props":5711,"children":5712},{"class":635},[5713],{"type":23,"value":1191},{"type":17,"tag":628,"props":5715,"children":5716},{"class":685},[5717],{"type":23,"value":991},{"type":17,"tag":628,"props":5719,"children":5720},{"class":641},[5721],{"type":23,"value":2943},{"type":17,"tag":628,"props":5723,"children":5724},{"class":635},[5725],{"type":23,"value":725},{"type":17,"tag":628,"props":5727,"children":5728},{"class":641},[5729],{"type":23,"value":5730}," np.linalg.norm(v_hat)\n",{"type":17,"tag":628,"props":5732,"children":5734},{"class":630,"line":5733},39,[5735],{"type":17,"tag":628,"props":5736,"children":5737},{},[5738],{"type":23,"value":664},{"type":17,"tag":628,"props":5740,"children":5742},{"class":630,"line":5741},40,[5743,5748,5752,5756,5761,5765,5769,5773,5777,5782,5786,5791,5795,5799],{"type":17,"tag":628,"props":5744,"children":5745},{"class":641},[5746],{"type":23,"value":5747},"    Vm[:,i",{"type":17,"tag":628,"props":5749,"children":5750},{"class":635},[5751],{"type":23,"value":1191},{"type":17,"tag":628,"props":5753,"children":5754},{"class":685},[5755],{"type":23,"value":991},{"type":17,"tag":628,"props":5757,"children":5758},{"class":641},[5759],{"type":23,"value":5760},":i",{"type":17,"tag":628,"props":5762,"children":5763},{"class":635},[5764],{"type":23,"value":1191},{"type":17,"tag":628,"props":5766,"children":5767},{"class":685},[5768],{"type":23,"value":1367},{"type":17,"tag":628,"props":5770,"children":5771},{"class":641},[5772],{"type":23,"value":2925},{"type":17,"tag":628,"props":5774,"children":5775},{"class":635},[5776],{"type":23,"value":725},{"type":17,"tag":628,"props":5778,"children":5779},{"class":641},[5780],{"type":23,"value":5781}," v_hat",{"type":17,"tag":628,"props":5783,"children":5784},{"class":635},[5785],{"type":23,"value":1428},{"type":17,"tag":628,"props":5787,"children":5788},{"class":641},[5789],{"type":23,"value":5790},"Hm[i",{"type":17,"tag":628,"props":5792,"children":5793},{"class":635},[5794],{"type":23,"value":1191},{"type":17,"tag":628,"props":5796,"children":5797},{"class":685},[5798],{"type":23,"value":991},{"type":17,"tag":628,"props":5800,"children":5801},{"class":641},[5802],{"type":23,"value":5803},", i]\n",{"type":17,"tag":628,"props":5805,"children":5807},{"class":630,"line":5806},41,[5808],{"type":17,"tag":628,"props":5809,"children":5810},{},[5811],{"type":23,"value":664},{"type":17,"tag":628,"props":5813,"children":5815},{"class":630,"line":5814},42,[5816,5821,5825,5829,5833,5837,5841,5845],{"type":17,"tag":628,"props":5817,"children":5818},{"class":641},[5819],{"type":23,"value":5820},"e ",{"type":17,"tag":628,"props":5822,"children":5823},{"class":635},[5824],{"type":23,"value":725},{"type":17,"tag":628,"props":5826,"children":5827},{"class":641},[5828],{"type":23,"value":5215},{"type":17,"tag":628,"props":5830,"children":5831},{"class":635},[5832],{"type":23,"value":1191},{"type":17,"tag":628,"props":5834,"children":5835},{"class":685},[5836],{"type":23,"value":991},{"type":17,"tag":628,"props":5838,"children":5839},{"class":641},[5840],{"type":23,"value":2431},{"type":17,"tag":628,"props":5842,"children":5843},{"class":685},[5844],{"type":23,"value":991},{"type":17,"tag":628,"props":5846,"children":5847},{"class":641},[5848],{"type":23,"value":5148},{"type":17,"tag":628,"props":5850,"children":5852},{"class":630,"line":5851},43,[5853,5858,5862,5866,5870,5874,5878,5882],{"type":17,"tag":628,"props":5854,"children":5855},{"class":641},[5856],{"type":23,"value":5857},"e[",{"type":17,"tag":628,"props":5859,"children":5860},{"class":685},[5861],{"type":23,"value":881},{"type":17,"tag":628,"props":5863,"children":5864},{"class":641},[5865],{"type":23,"value":2431},{"type":17,"tag":628,"props":5867,"children":5868},{"class":685},[5869],{"type":23,"value":881},{"type":17,"tag":628,"props":5871,"children":5872},{"class":641},[5873],{"type":23,"value":2925},{"type":17,"tag":628,"props":5875,"children":5876},{"class":635},[5877],{"type":23,"value":725},{"type":17,"tag":628,"props":5879,"children":5880},{"class":641},[5881],{"type":23,"value":644},{"type":17,"tag":628,"props":5883,"children":5884},{"class":685},[5885],{"type":23,"value":2130},{"type":17,"tag":628,"props":5887,"children":5889},{"class":630,"line":5888},44,[5890,5895,5899,5904,5908],{"type":17,"tag":628,"props":5891,"children":5892},{"class":641},[5893],{"type":23,"value":5894},"gm ",{"type":17,"tag":628,"props":5896,"children":5897},{"class":635},[5898],{"type":23,"value":725},{"type":17,"tag":628,"props":5900,"children":5901},{"class":641},[5902],{"type":23,"value":5903}," np.linalg.norm(r0) ",{"type":17,"tag":628,"props":5905,"children":5906},{"class":635},[5907],{"type":23,"value":1070},{"type":17,"tag":628,"props":5909,"children":5910},{"class":641},[5911],{"type":23,"value":5912}," e\n",{"type":17,"tag":628,"props":5914,"children":5916},{"class":630,"line":5915},45,[5917],{"type":17,"tag":628,"props":5918,"children":5919},{"class":1865},[5920],{"type":23,"value":5921},"# print(gm)\n",{"type":17,"tag":628,"props":5923,"children":5925},{"class":630,"line":5924},46,[5926],{"type":17,"tag":628,"props":5927,"children":5928},{},[5929],{"type":23,"value":664},{"type":17,"tag":628,"props":5931,"children":5933},{"class":630,"line":5932},47,[5934,5939,5943,5947,5951],{"type":17,"tag":628,"props":5935,"children":5936},{"class":641},[5937],{"type":23,"value":5938},"UTMat, gm ",{"type":17,"tag":628,"props":5940,"children":5941},{"class":635},[5942],{"type":23,"value":725},{"type":17,"tag":628,"props":5944,"children":5945},{"class":641},[5946],{"type":23,"value":644},{"type":17,"tag":628,"props":5948,"children":5949},{"class":685},[5950],{"type":23,"value":715},{"type":17,"tag":628,"props":5952,"children":5953},{"class":641},[5954],{"type":23,"value":5955},".ToUTMat(Hm, gm, m)\n",{"type":17,"tag":628,"props":5957,"children":5959},{"class":630,"line":5958},48,[5960],{"type":17,"tag":628,"props":5961,"children":5962},{},[5963],{"type":23,"value":664},{"type":17,"tag":628,"props":5965,"children":5967},{"class":630,"line":5966},49,[5968,5973,5977,5981,5985],{"type":17,"tag":628,"props":5969,"children":5970},{"class":641},[5971],{"type":23,"value":5972},"min_y ",{"type":17,"tag":628,"props":5974,"children":5975},{"class":635},[5976],{"type":23,"value":725},{"type":17,"tag":628,"props":5978,"children":5979},{"class":641},[5980],{"type":23,"value":5565},{"type":17,"tag":628,"props":5982,"children":5983},{"class":685},[5984],{"type":23,"value":991},{"type":17,"tag":628,"props":5986,"children":5987},{"class":641},[5988],{"type":23,"value":5148},{"type":17,"tag":628,"props":5990,"children":5992},{"class":630,"line":5991},50,[5993],{"type":17,"tag":628,"props":5994,"children":5995},{},[5996],{"type":23,"value":664},{"type":17,"tag":628,"props":5998,"children":6000},{"class":630,"line":5999},51,[6001,6005,6009,6013,6017,6021],{"type":17,"tag":628,"props":6002,"children":6003},{"class":635},[6004],{"type":23,"value":2804},{"type":17,"tag":628,"props":6006,"children":6007},{"class":641},[6008],{"type":23,"value":2809},{"type":17,"tag":628,"props":6010,"children":6011},{"class":635},[6012],{"type":23,"value":2814},{"type":17,"tag":628,"props":6014,"children":6015},{"class":641},[6016],{"type":23,"value":644},{"type":17,"tag":628,"props":6018,"children":6019},{"class":685},[6020],{"type":23,"value":2823},{"type":17,"tag":628,"props":6022,"children":6023},{"class":641},[6024],{"type":23,"value":5278},{"type":17,"tag":628,"props":6026,"children":6028},{"class":630,"line":6027},52,[6029,6034,6038,6042,6046,6051,6055,6059,6063,6068,6072,6076,6081,6085],{"type":17,"tag":628,"props":6030,"children":6031},{"class":641},[6032],{"type":23,"value":6033},"    min_y[i][",{"type":17,"tag":628,"props":6035,"children":6036},{"class":685},[6037],{"type":23,"value":881},{"type":17,"tag":628,"props":6039,"children":6040},{"class":641},[6041],{"type":23,"value":2925},{"type":17,"tag":628,"props":6043,"children":6044},{"class":635},[6045],{"type":23,"value":725},{"type":17,"tag":628,"props":6047,"children":6048},{"class":641},[6049],{"type":23,"value":6050}," (gm[i, ",{"type":17,"tag":628,"props":6052,"children":6053},{"class":685},[6054],{"type":23,"value":881},{"type":17,"tag":628,"props":6056,"children":6057},{"class":641},[6058],{"type":23,"value":2925},{"type":17,"tag":628,"props":6060,"children":6061},{"class":635},[6062],{"type":23,"value":1060},{"type":17,"tag":628,"props":6064,"children":6065},{"class":641},[6066],{"type":23,"value":6067}," np.dot(UTMat[i:i",{"type":17,"tag":628,"props":6069,"children":6070},{"class":635},[6071],{"type":23,"value":1191},{"type":17,"tag":628,"props":6073,"children":6074},{"class":685},[6075],{"type":23,"value":991},{"type":17,"tag":628,"props":6077,"children":6078},{"class":641},[6079],{"type":23,"value":6080}," ,:] ,min_y))",{"type":17,"tag":628,"props":6082,"children":6083},{"class":635},[6084],{"type":23,"value":1428},{"type":17,"tag":628,"props":6086,"children":6087},{"class":641},[6088],{"type":23,"value":6089},"UTMat[i, i]\n",{"type":17,"tag":628,"props":6091,"children":6093},{"class":630,"line":6092},53,[6094],{"type":17,"tag":628,"props":6095,"children":6096},{},[6097],{"type":23,"value":664},{"type":17,"tag":628,"props":6099,"children":6101},{"class":630,"line":6100},54,[6102,6107,6111,6115,6119,6123,6127,6132,6136,6141,6145,6149,6153,6157,6161,6165,6169],{"type":17,"tag":628,"props":6103,"children":6104},{"class":641},[6105],{"type":23,"value":6106},"dU_new ",{"type":17,"tag":628,"props":6108,"children":6109},{"class":635},[6110],{"type":23,"value":725},{"type":17,"tag":628,"props":6112,"children":6113},{"class":641},[6114],{"type":23,"value":644},{"type":17,"tag":628,"props":6116,"children":6117},{"class":685},[6118],{"type":23,"value":715},{"type":17,"tag":628,"props":6120,"children":6121},{"class":641},[6122],{"type":23,"value":2474},{"type":17,"tag":628,"props":6124,"children":6125},{"class":635},[6126],{"type":23,"value":1191},{"type":17,"tag":628,"props":6128,"children":6129},{"class":641},[6130],{"type":23,"value":6131}," np.dot(Vm[:, ",{"type":17,"tag":628,"props":6133,"children":6134},{"class":685},[6135],{"type":23,"value":881},{"type":17,"tag":628,"props":6137,"children":6138},{"class":641},[6139],{"type":23,"value":6140},":m], min_y).reshape(",{"type":17,"tag":628,"props":6142,"children":6143},{"class":685},[6144],{"type":23,"value":715},{"type":17,"tag":628,"props":6146,"children":6147},{"class":641},[6148],{"type":23,"value":2492},{"type":17,"tag":628,"props":6150,"children":6151},{"class":685},[6152],{"type":23,"value":715},{"type":17,"tag":628,"props":6154,"children":6155},{"class":641},[6156],{"type":23,"value":5350},{"type":17,"tag":628,"props":6158,"children":6159},{"class":5353},[6160],{"type":23,"value":5356},{"type":17,"tag":628,"props":6162,"children":6163},{"class":635},[6164],{"type":23,"value":725},{"type":17,"tag":628,"props":6166,"children":6167},{"class":5363},[6168],{"type":23,"value":5366},{"type":17,"tag":628,"props":6170,"children":6171},{"class":641},[6172],{"type":23,"value":1437},{"type":17,"tag":628,"props":6174,"children":6176},{"class":630,"line":6175},55,[6177],{"type":17,"tag":628,"props":6178,"children":6179},{},[6180],{"type":23,"value":664},{"type":17,"tag":628,"props":6182,"children":6184},{"class":630,"line":6183},56,[6185,6189,6193,6197],{"type":17,"tag":628,"props":6186,"children":6187},{"class":685},[6188],{"type":23,"value":715},{"type":17,"tag":628,"props":6190,"children":6191},{"class":641},[6192],{"type":23,"value":2474},{"type":17,"tag":628,"props":6194,"children":6195},{"class":635},[6196],{"type":23,"value":725},{"type":17,"tag":628,"props":6198,"children":6199},{"class":641},[6200],{"type":23,"value":6201}," dU_new\n",{"type":17,"tag":628,"props":6203,"children":6205},{"class":630,"line":6204},57,[6206],{"type":17,"tag":628,"props":6207,"children":6208},{},[6209],{"type":23,"value":664},{"type":17,"tag":628,"props":6211,"children":6213},{"class":630,"line":6212},58,[6214,6218,6222,6227,6231,6235,6239,6243,6247,6251,6255],{"type":17,"tag":628,"props":6215,"children":6216},{"class":641},[6217],{"type":23,"value":2670},{"type":17,"tag":628,"props":6219,"children":6220},{"class":635},[6221],{"type":23,"value":725},{"type":17,"tag":628,"props":6223,"children":6224},{"class":641},[6225],{"type":23,"value":6226}," U ",{"type":17,"tag":628,"props":6228,"children":6229},{"class":635},[6230],{"type":23,"value":1191},{"type":17,"tag":628,"props":6232,"children":6233},{"class":641},[6234],{"type":23,"value":644},{"type":17,"tag":628,"props":6236,"children":6237},{"class":685},[6238],{"type":23,"value":715},{"type":17,"tag":628,"props":6240,"children":6241},{"class":641},[6242],{"type":23,"value":2474},{"type":17,"tag":628,"props":6244,"children":6245},{"class":635},[6246],{"type":23,"value":1070},{"type":17,"tag":628,"props":6248,"children":6249},{"class":641},[6250],{"type":23,"value":644},{"type":17,"tag":628,"props":6252,"children":6253},{"class":685},[6254],{"type":23,"value":715},{"type":17,"tag":628,"props":6256,"children":6257},{"class":641},[6258],{"type":23,"value":4874},{"type":17,"tag":26,"props":6260,"children":6261},{},[6262,6264,6269],{"type":23,"value":6263},"You can look in my code inside function ",{"type":17,"tag":169,"props":6265,"children":6266},{},[6267],{"type":23,"value":6268}," solve_nmpc ",{"type":23,"value":196},{"type":17,"tag":18,"props":6271,"children":6273},{"id":6272},"experiment-in-python",[6274],{"type":23,"value":6275},"Experiment in Python",{"type":17,"tag":26,"props":6277,"children":6278},{},[6279,6281,6284,6286,6289,6291,6295,6297,6301,6303,6307],{"type":23,"value":6280},"GMRES was consider one of the fastest solver for sparse linear algebra problem, so I will include the link for the GMRES algorithms. ",{"type":17,"tag":55,"props":6282,"children":6283},{},[],{"type":23,"value":6285},"\nIn my experiment, I use differential drive robot. ",{"type":17,"tag":55,"props":6287,"children":6288},{},[],{"type":23,"value":6290},"\nConsider as our state representation ",{"type":17,"tag":83,"props":6292,"children":6294},{"latex-express":6293,"styles":86}," x = \\begin{bmatrix} x \\\\ y \\\\ \\phi \\end{bmatrix} ",[],{"type":23,"value":6296}," and of course setting initialization ",{"type":17,"tag":83,"props":6298,"children":6300},{"latex-express":6299,"styles":86}," x_{0} = [0.0, 0.0, 0.0] ",[],{"type":23,"value":6302},", also ",{"type":17,"tag":83,"props":6304,"children":6306},{"latex-express":6305,"styles":86}," u_{0} = [0.0, 0.0] ",[],{"type":23,"value":196},{"type":17,"tag":6309,"props":6310,"children":6315},"figure",{"className":6311},[6312,6313,6314],"mb-4","inline-block","max-w-sm",[6316,6318],{"type":23,"value":6317},"\n  ",{"type":17,"tag":6319,"props":6320,"children":6326},"img",{"className":6321,"src":6323,"width":6324,"height":6325},[6322],"mx-auto","/topics/robotics/nmpc/nmpc_cgmres.gif",700,350,[],{"type":17,"tag":6328,"props":6329,"children":6334},"figcaption",{"className":6330},[67,6331,6332,6333],"text-sm","text-neutral-600","dark:text-neutral-400",[6335],{"type":23,"value":6336},"\n    Animation of Differential Drive robot on optimal trajectory !!!\n",{"type":17,"tag":26,"props":6338,"children":6339},{},[6340],{"type":23,"value":6341},"And here are the optimal data for all state and input control.",{"type":17,"tag":6309,"props":6343,"children":6345},{"className":6344},[6312,6313,6314],[6346,6347],{"type":23,"value":6317},{"type":17,"tag":6319,"props":6348,"children":6353},{"className":6349,"src":6350,"width":6351,"height":6352},[6322],"/topics/robotics/nmpc/cgmreDat1.png",600,300,[],{"type":17,"tag":6328,"props":6355,"children":6357},{"className":6356},[67,6331,6332,6333],[6358],{"type":23,"value":6359},"\n    All data obtained after simulation.\n",{"type":17,"tag":26,"props":6361,"children":6362},{},[6363,6365],{"type":23,"value":6364},"You can find all the code of NMPC even with CasAdi and CGMRES here in my github: ",{"type":17,"tag":6366,"props":6367,"children":6371},"a",{"href":6368,"rel":6369},"https://github.com/SokhengDin/Path-Tracking/tree/main",[6370],"nofollow",[6372],{"type":23,"value":6373},"Path-Tracking",{"type":17,"tag":18,"props":6375,"children":6377},{"id":6376},"in-conclusion",[6378],{"type":23,"value":6379},"In Conclusion",{"type":17,"tag":26,"props":6381,"children":6382},{},[6383],{"type":23,"value":6384},"Nonlinear Model Predictive Control with CGMRES is one of the great NMPC method that you should try, since it provides a very fast numerical calculation thank to the GMRES algorithms with Given Rotation method. Even though compare to another NMPC solver, NMPC with CGMRES sometime is hard for finding the optimal parameters in order to not cause unstable numerical calculation. Next time, I will bring the multiple shooting method which is consider in the promise of more robust numerical stability tha single shooting method.",{"type":17,"tag":18,"props":6386,"children":6388},{"id":6387},"references",[6389],{"type":23,"value":6390},"References",{"type":17,"tag":279,"props":6392,"children":6393},{},[6394,6404,6414,6424,6434],{"type":17,"tag":79,"props":6395,"children":6396},{},[6397],{"type":17,"tag":6366,"props":6398,"children":6401},{"href":6399,"rel":6400},"https://www.researchgate.net/publication/228007717_A_real-time_algorithm_for_nonlinear_receding_horizon_control_using_multiple_shooting_and_continuationKrylov_method",[6370],[6402],{"type":23,"value":6403},"A real‐time algorithm for nonlinear receding horizon control using multiple shooting and continuation/Krylov method",{"type":17,"tag":79,"props":6405,"children":6406},{},[6407],{"type":17,"tag":6366,"props":6408,"children":6411},{"href":6409,"rel":6410},"https://github.com/AtsushiSakai/PythonRobotics/tree/master/PathTracking/cgmres_nmpc",[6370],[6412],{"type":23,"value":6413},"Nonlinear Model Predictive Control with CGMRES of Steering Car ",{"type":17,"tag":79,"props":6415,"children":6416},{},[6417],{"type":17,"tag":6366,"props":6418,"children":6421},{"href":6419,"rel":6420},"https://qiita.com/PozihameBaystar/items/650cc839da5d9c974f5d",[6370],[6422],{"type":23,"value":6423},"C/GMRESシミュレーションを3つの言語で作ったので比較してみた",{"type":17,"tag":79,"props":6425,"children":6426},{},[6427],{"type":17,"tag":6366,"props":6428,"children":6431},{"href":6429,"rel":6430},"https://qiita.com/opticont/items/b3518b470d9e327144be",[6370],[6432],{"type":23,"value":6433},"Krylov部分空間とGMRES法について",{"type":17,"tag":79,"props":6435,"children":6436},{},[6437],{"type":17,"tag":6366,"props":6438,"children":6441},{"href":6439,"rel":6440},"https://www.sciencedirect.com/science/article/pii/S2405896318326727",[6370],[6442],{"type":23,"value":6443},"Nonlinear Model Predictive Control of Position and Attitude in a Hexacopter with Three Failed Rotors",{"type":17,"tag":6445,"children":6446},"style",[6447],{"type":23,"value":6448},".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-806137{color:#B392F0;}\n.ct-533739{color:#79B8FF;}\n.ct-326375{color:#6A737D;}\n.ct-657843{color:#FFAB70;}\n.ct-244866{color:#9ECBFF;}",{"title":7,"searchDepth":658,"depth":658,"links":6450},[6451,6457,6458,6459,6460],{"id":20,"depth":658,"text":24,"children":6452},[6453,6454,6455,6456],{"id":34,"depth":667,"text":37},{"id":45,"depth":667,"text":48},{"id":228,"depth":667,"text":231},{"id":262,"depth":667,"text":265},{"id":588,"depth":658,"text":591},{"id":6272,"depth":658,"text":6275},{"id":6376,"depth":658,"text":6379},{"id":6387,"depth":658,"text":6390},"markdown","content:topics:robotics:nmpc-cgmres.md","content","topics/robotics/nmpc-cgmres.md","md",1697294369592]