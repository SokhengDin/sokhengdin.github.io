{"_path":"/topics/nmpc","_dir":"topics","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Nonlinear Model Predictive Control","description":"Introduction to Nonlinear Model Predictive Control","author":"Din Sokheng","slug":"nmpc","tag":"nmpc","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"introduction-to-nonlinear-model-predictive-control-nmpc"},"children":[{"type":"text","value":"Introduction to Nonlinear Model Predictive Control (NMPC)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nonlinear Model Predictive Control (NMPC) is a sophisticated control strategy used in engineering and automation to regulate systems with complex and nonlinear behaviors. It combines the principles of optimization and predictive control to handle intricate processes and achieve desired performance."}]},{"type":"element","tag":"h2","props":{"id":"understanding-nmpc"},"children":[{"type":"text","value":"Understanding NMPC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"At its core, NMPC utilizes a mathematical model of the system to predict its future behavior based on the current state and control inputs. It then solves an optimization problem to find the optimal control inputs that minimize a predefined cost function while satisfying constraints."}]},{"type":"element","tag":"math-render","props":{"math-code":" H = \\sum_{k=0}^{N}(x_{ref,k}-x_{k})^{T}Q(x_{ref,k}-x_{k})^{T}+(u_{ref,k}-u_{k})^{T}R(u_{ref,k}-u_{k})+ \\lambda^{T}f(x,u) + \\mu^{T}C(x,u)"},"children":[]},{"type":"element","tag":"h2","props":{"id":"key-features-and-advantages"},"children":[{"type":"text","value":"Key Features and Advantages"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Nonlinear Systems Handling:"}]},{"type":"text","value":" NMPC is particularly useful for controlling systems with nonlinear dynamics, where the relationship between inputs and outputs is not linear. Examples include chemical processes, robotics, and advanced automotive control."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Constraint Handling:"}]},{"type":"text","value":" NMPC excels at handling constraints on control inputs, state variables, and even outputs. This ensures that the system operates within safe and feasible bounds."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Adaptability:"}]},{"type":"text","value":" NMPC can adapt to changing conditions and disturbances, making it suitable for processes with uncertain parameters."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Trajectory Tracking:"}]},{"type":"text","value":" NMPC can track desired trajectories by formulating the optimization problem to minimize the deviation from the reference trajectory."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Multi-Objective Control:"}]},{"type":"text","value":" NMPC can accommodate multiple objectives by including various terms in the cost function, allowing engineers to balance trade-offs."}]}]},{"type":"element","tag":"h2","props":{"id":"challenges-and-considerations"},"children":[{"type":"text","value":"Challenges and Considerations"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Computational Complexity:"}]},{"type":"text","value":" Solving the optimization problem in real-time can be computationally intensive, which might affect the real-time nature of control."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Model Accuracy:"}]},{"type":"text","value":" The accuracy of the mathematical model used in NMPC plays a crucial role. Inaccurate models can lead to suboptimal performance or instability."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Initial Condition Sensitivity:"}]},{"type":"text","value":" NMPC is sensitive to initial conditions, and errors in the initial state estimation can affect the control performance."}]}]},{"type":"element","tag":"h2","props":{"id":"applications"},"children":[{"type":"text","value":"Applications"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"NMPC finds applications in various industries:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Chemical Engineering:"}]},{"type":"text","value":" Control of chemical reactions and processes."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Robotics:"}]},{"type":"text","value":" Precise control of robotic manipulators and autonomous systems."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Automotive:"}]},{"type":"text","value":" Advanced vehicle control, such as autonomous driving."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Biomedical Engineering:"}]},{"type":"text","value":" Control of biological systems and medical devices."}]}]},{"type":"element","tag":"h2","props":{"id":"implement-in-casadi"},"children":[{"type":"text","value":"Implement in Casadi"}]},{"type":"element","tag":"code","props":{"className":["language-cpp"],"code":"#include \"auto_mecanum.hpp\"\n\nAUTO_MECANUM::AUTO_MECANUM(\n            double Lx, double Ly, double wheel_radius,\n            double dt, double sim_time, int prediction_horizon\n        )\n{\n    Lx_ = Lx;\n    Ly_ = Ly;\n    wheel_radius_ = wheel_radius;\n    dt_ = dt;\n    sim_time_ = sim_time;\n    prediction_horizon_ = prediction_horizon;\n    slice_states = Slice(0, 3);\n    slice_controls = Slice(0, 4);\n    lbg_ = DM::zeros(3*(prediction_horizon_+1), 1);\n    ubg_ = DM::zeros(3*(prediction_horizon_+1), 1);\n}\n","language":"cpp","meta":"copy"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"#include"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-244866"},"children":[{"type":"text","value":"\"auto_mecanum.hpp\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"AUTO_MECANUM"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"AUTO_MECANUM"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"double"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" Lx, "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"double"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" Ly, "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"double"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" wheel_radius,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"double"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" dt, "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"double"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" sim_time, "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" prediction_horizon\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"        )\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    Lx_ "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" Lx;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    Ly_ "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" Ly;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    wheel_radius_ "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" wheel_radius;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    dt_ "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" dt;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    sim_time_ "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" sim_time;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    prediction_horizon_ "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" prediction_horizon;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    slice_states "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"Slice"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    slice_controls "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"Slice"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    lbg_ "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"DM"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"zeros"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"(prediction_horizon_"}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"    ubg_ "}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"DM"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"::"}]},{"type":"element","tag":"span","props":{"class":"ct-806137"},"children":[{"type":"text","value":"zeros"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"(prediction_horizon_"}]},{"type":"element","tag":"span","props":{"class":"ct-857441"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-533739"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-767297"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"conclusion"},"children":[{"type":"text","value":"Conclusion"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nonlinear Model Predictive Control offers a powerful approach to control complex systems with nonlinear dynamics and constraints. By combining predictive modeling and optimization techniques, NMPC enables engineers to achieve robust and adaptive control in a wide range of applications."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-857441{color:#F97583;}\n.ct-767297{color:#E1E4E8;}\n.ct-244866{color:#9ECBFF;}\n.ct-806137{color:#B392F0;}\n.ct-533739{color:#79B8FF;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"understanding-nmpc","depth":2,"text":"Understanding NMPC"},{"id":"key-features-and-advantages","depth":2,"text":"Key Features and Advantages"},{"id":"challenges-and-considerations","depth":2,"text":"Challenges and Considerations"},{"id":"applications","depth":2,"text":"Applications"},{"id":"implement-in-casadi","depth":2,"text":"Implement in Casadi"},{"id":"conclusion","depth":2,"text":"Conclusion"}]}},"_type":"markdown","_id":"content:topics:nmpc.md","_source":"content","_file":"topics/nmpc.md","_extension":"md"}